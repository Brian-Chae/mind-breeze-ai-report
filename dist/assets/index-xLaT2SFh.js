const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-C0n2W2RO.js","assets/vendor-B0VEr0tq.js","assets/ui-DpWn97yW.js","assets/charts-Dd9yzGsh.js"])))=>i.map(i=>d[i]);
var uue=Object.defineProperty;var hue=(r,e,t)=>e in r?uue(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ce=(r,e,t)=>hue(r,typeof e!="symbol"?e+"":e,t);import{j as f,S as aW,C as due,H as Aue,B as Ba,E as rw,D as go,F as Us,G as fue,a as Ip,P as _n,b as jg,Z as mh,A as ho,c as r0,d as gue,M as pue,e as fA,W as I5,T as da,f as Vl,u as Ha,g as n0,h as F0,i as Yr,k as iW,l as sW,m as oW,n as lW,o as mue,p as cW,I as uW,q as hW,r as dW,s as AW,R as fW,t as vue,L as gW,v as pW,w as yue,x as xue,y as bue,z as wue,J as Sue,X as Z1,K as _ue,N as Cue,O as Bue,Q as Nue,U as tg,V as j0,Y as Co,_ as LB,$ as mW,a0 as vW,a1 as PA,a2 as Tue,a3 as nw,a4 as Iue,a5 as Eue,a6 as Due,a7 as Mue,a8 as Rue,a9 as Lue,aa as yW,ab as xW,ac as lP,ad as bW,ae as wW,af as Ph,ag as Ep,ah as Hs,ai as Pue,aj as cP,ak as kue,al as rO,am as uP,an as nO,ao as Og,ap as aO,aq as Fue,ar as M_,as as hP,at as jue,au as a0,av as iO,aw as Oue,ax as Uue,ay as Hue,az as Que,aA as vh,aB as i0,aC as s0,aD as sO,aE as zue,aF as oM,aG as Gue,aH as Vue,aI as SW,aJ as $ue,aK as Kue,aL as _W,aM as Wue,aN as PB,aO as que,aP as Yue,aQ as lM,aR as o0,aS as $l,aT as oO,aU as l0,aV as c0,aW as CW,aX as cM,aY as gA,aZ as Xue,a_ as Zue,a$ as Jue,b0 as ehe,b1 as the,b2 as uM,b3 as rhe,b4 as BW,b5 as rI,b6 as nhe,b7 as ahe,b8 as dP}from"./ui-DpWn97yW.js";import{r as K,a as AP,g as NW,b as xt,d as C2,c as ihe}from"./vendor-B0VEr0tq.js";import{c as TW,u as she,R as ls,L as Pc,C as so,X as oo,Y as lo,a as Pa,B as IW,A as fP,T as io,b as J1,d as o1,e as EW,f as ohe,P as lhe,g as che,h as uhe,i as hhe,j as dhe,k as Ahe,l as fhe}from"./charts-Dd9yzGsh.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var DW={exports:{}},kB={},MW={exports:{}},RW={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(O,Q){var H=O.length;O.push(Q);e:for(;0<H;){var W=H-1>>>1,te=O[W];if(0<a(te,Q))O[W]=Q,O[H]=te,H=W;else break e}}function t(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var Q=O[0],H=O.pop();if(H!==Q){O[0]=H;e:for(var W=0,te=O.length,ee=te>>>1;W<ee;){var j=2*(W+1)-1,G=O[j],Y=j+1,Z=O[Y];if(0>a(G,H))Y<te&&0>a(Z,G)?(O[W]=Z,O[Y]=H,W=Y):(O[W]=G,O[j]=H,W=j);else if(Y<te&&0>a(Z,H))O[W]=Z,O[Y]=H,W=Y;else break e}}return Q}function a(O,Q){var H=O.sortIndex-Q.sortIndex;return H!==0?H:O.id-Q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();r.unstable_now=function(){return s.now()-o}}var l=[],c=[],u=1,h=null,d=3,A=!1,g=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function b(O){for(var Q=t(c);Q!==null;){if(Q.callback===null)n(c);else if(Q.startTime<=O)n(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function S(O){if(p=!1,b(O),!g)if(t(l)!==null)g=!0,_||(_=!0,E());else{var Q=t(c);Q!==null&&k(S,Q.startTime-O)}}var _=!1,C=-1,w=5,B=-1;function D(){return v?!0:!(r.unstable_now()-B<w)}function T(){if(v=!1,_){var O=r.unstable_now();B=O;var Q=!0;try{e:{g=!1,p&&(p=!1,y(C),C=-1),A=!0;var H=d;try{t:{for(b(O),h=t(l);h!==null&&!(h.expirationTime>O&&D());){var W=h.callback;if(typeof W=="function"){h.callback=null,d=h.priorityLevel;var te=W(h.expirationTime<=O);if(O=r.unstable_now(),typeof te=="function"){h.callback=te,b(O),Q=!0;break t}h===t(l)&&n(l),b(O)}else n(l);h=t(l)}if(h!==null)Q=!0;else{var ee=t(c);ee!==null&&k(S,ee.startTime-O),Q=!1}}break e}finally{h=null,d=H,A=!1}Q=void 0}}finally{Q?E():_=!1}}}var E;if(typeof x=="function")E=function(){x(T)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,M=R.port2;R.port1.onmessage=T,E=function(){M.postMessage(null)}}else E=function(){m(T,0)};function k(O,Q){C=m(function(){O(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(O){O.callback=null},r.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<O?Math.floor(1e3/O):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_next=function(O){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var H=d;d=Q;try{return O()}finally{d=H}},r.unstable_requestPaint=function(){v=!0},r.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var H=d;d=O;try{return Q()}finally{d=H}},r.unstable_scheduleCallback=function(O,Q,H){var W=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=H+te,O={id:u++,callback:Q,priorityLevel:O,startTime:H,expirationTime:te,sortIndex:-1},H>W?(O.sortIndex=H,e(c,O),t(l)===null&&O===t(c)&&(p?(y(C),C=-1):p=!0,k(S,H-W))):(O.sortIndex=te,e(l,O),g||A||(g=!0,_||(_=!0,E()))),O},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(O){var Q=d;return function(){var H=d;d=Q;try{return O.apply(this,arguments)}finally{d=H}}}})(RW);MW.exports=RW;var ghe=MW.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja=ghe,LW=K,phe=AP;function tt(r){var e="https://react.dev/errors/"+r;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var t=2;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t])}return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function PW(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function aw(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function kW(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function lO(r){if(aw(r)!==r)throw Error(tt(188))}function mhe(r){var e=r.alternate;if(!e){if(e=aw(r),e===null)throw Error(tt(188));return e!==r?null:r}for(var t=r,n=e;;){var a=t.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){t=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===t)return lO(a),r;if(i===n)return lO(a),e;i=i.sibling}throw Error(tt(188))}if(t.return!==n.return)t=a,n=i;else{for(var s=!1,o=a.child;o;){if(o===t){s=!0,t=a,n=i;break}if(o===n){s=!0,n=a,t=i;break}o=o.sibling}if(!s){for(o=i.child;o;){if(o===t){s=!0,t=i,n=a;break}if(o===n){s=!0,n=i,t=a;break}o=o.sibling}if(!s)throw Error(tt(189))}}if(t.alternate!==n)throw Error(tt(190))}if(t.tag!==3)throw Error(tt(188));return t.stateNode.current===t?r:e}function FW(r){var e=r.tag;if(e===5||e===26||e===27||e===6)return r;for(r=r.child;r!==null;){if(e=FW(r),e!==null)return e;r=r.sibling}return null}var Wn=Object.assign,vhe=Symbol.for("react.element"),B2=Symbol.for("react.transitional.element"),Px=Symbol.for("react.portal"),uv=Symbol.for("react.fragment"),jW=Symbol.for("react.strict_mode"),hM=Symbol.for("react.profiler"),yhe=Symbol.for("react.provider"),OW=Symbol.for("react.consumer"),Xu=Symbol.for("react.context"),gP=Symbol.for("react.forward_ref"),dM=Symbol.for("react.suspense"),AM=Symbol.for("react.suspense_list"),pP=Symbol.for("react.memo"),kd=Symbol.for("react.lazy"),fM=Symbol.for("react.activity"),xhe=Symbol.for("react.memo_cache_sentinel"),cO=Symbol.iterator;function Py(r){return r===null||typeof r!="object"?null:(r=cO&&r[cO]||r["@@iterator"],typeof r=="function"?r:null)}var bhe=Symbol.for("react.client.reference");function gM(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===bhe?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case uv:return"Fragment";case hM:return"Profiler";case jW:return"StrictMode";case dM:return"Suspense";case AM:return"SuspenseList";case fM:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case Px:return"Portal";case Xu:return(r.displayName||"Context")+".Provider";case OW:return(r._context.displayName||"Context")+".Consumer";case gP:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case pP:return e=r.displayName||null,e!==null?e:gM(r.type)||"Memo";case kd:e=r._payload,r=r._init;try{return gM(r(e))}catch{}}return null}var kx=Array.isArray,ur=LW.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rn=phe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ug={pending:!1,data:null,method:null,action:null},pM=[],hv=-1;function cu(r){return{current:r}}function Ai(r){0>hv||(r.current=pM[hv],pM[hv]=null,hv--)}function ea(r,e){hv++,pM[hv]=r.current,r.current=e}var Wc=cu(null),eb=cu(null),pA=cu(null),E5=cu(null);function D5(r,e){switch(ea(pA,e),ea(eb,r),ea(Wc,null),e.nodeType){case 9:case 11:r=(r=e.documentElement)&&(r=r.namespaceURI)?fU(r):0;break;default:if(r=e.tagName,e=e.namespaceURI)e=fU(e),r=rX(e,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Ai(Wc),ea(Wc,r)}function u0(){Ai(Wc),Ai(eb),Ai(pA)}function mM(r){r.memoizedState!==null&&ea(E5,r);var e=Wc.current,t=rX(e,r.type);e!==t&&(ea(eb,r),ea(Wc,t))}function M5(r){eb.current===r&&(Ai(Wc),Ai(eb)),E5.current===r&&(Ai(E5),ub._currentValue=Ug)}var vM=Object.prototype.hasOwnProperty,mP=Ja.unstable_scheduleCallback,nI=Ja.unstable_cancelCallback,whe=Ja.unstable_shouldYield,She=Ja.unstable_requestPaint,qc=Ja.unstable_now,_he=Ja.unstable_getCurrentPriorityLevel,UW=Ja.unstable_ImmediatePriority,HW=Ja.unstable_UserBlockingPriority,R5=Ja.unstable_NormalPriority,Che=Ja.unstable_LowPriority,QW=Ja.unstable_IdlePriority,Bhe=Ja.log,Nhe=Ja.unstable_setDisableYieldValue,iw=null,po=null;function Xd(r){if(typeof Bhe=="function"&&Nhe(r),po&&typeof po.setStrictMode=="function")try{po.setStrictMode(iw,r)}catch{}}var mo=Math.clz32?Math.clz32:Ehe,The=Math.log,Ihe=Math.LN2;function Ehe(r){return r>>>=0,r===0?32:31-(The(r)/Ihe|0)|0}var N2=256,T2=4194304;function rg(r){var e=r&42;if(e!==0)return e;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function FB(r,e,t){var n=r.pendingLanes;if(n===0)return 0;var a=0,i=r.suspendedLanes,s=r.pingedLanes;r=r.warmLanes;var o=n&134217727;return o!==0?(n=o&~i,n!==0?a=rg(n):(s&=o,s!==0?a=rg(s):t||(t=o&~r,t!==0&&(a=rg(t))))):(o=n&~i,o!==0?a=rg(o):s!==0?a=rg(s):t||(t=n&~r,t!==0&&(a=rg(t)))),a===0?0:e!==0&&e!==a&&!(e&i)&&(i=a&-a,t=e&-e,i>=t||i===32&&(t&4194048)!==0)?e:a}function sw(r,e){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&e)===0}function Dhe(r,e){switch(r){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zW(){var r=N2;return N2<<=1,!(N2&4194048)&&(N2=256),r}function GW(){var r=T2;return T2<<=1,!(T2&62914560)&&(T2=4194304),r}function aI(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function ow(r,e){r.pendingLanes|=e,e!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Mhe(r,e,t,n,a,i){var s=r.pendingLanes;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=t,r.entangledLanes&=t,r.errorRecoveryDisabledLanes&=t,r.shellSuspendCounter=0;var o=r.entanglements,l=r.expirationTimes,c=r.hiddenUpdates;for(t=s&~t;0<t;){var u=31-mo(t),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(d!==null)for(c[u]=null,u=0;u<d.length;u++){var A=d[u];A!==null&&(A.lane&=-536870913)}t&=~h}n!==0&&VW(r,n,0),i!==0&&a===0&&r.tag!==0&&(r.suspendedLanes|=i&~(s&~e))}function VW(r,e,t){r.pendingLanes|=e,r.suspendedLanes&=~e;var n=31-mo(e);r.entangledLanes|=e,r.entanglements[n]=r.entanglements[n]|1073741824|t&4194090}function $W(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-mo(t),a=1<<n;a&e|r[n]&e&&(r[n]|=e),t&=~a}}function vP(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function yP(r){return r&=-r,2<r?8<r?r&134217727?32:268435456:8:2}function KW(){var r=rn.p;return r!==0?r:(r=window.event,r===void 0?32:dX(r.type))}function Rhe(r,e){var t=rn.p;try{return rn.p=r,e()}finally{rn.p=t}}var JA=Math.random().toString(36).slice(2),Vi="__reactFiber$"+JA,Qs="__reactProps$"+JA,O0="__reactContainer$"+JA,yM="__reactEvents$"+JA,Lhe="__reactListeners$"+JA,Phe="__reactHandles$"+JA,uO="__reactResources$"+JA,lw="__reactMarker$"+JA;function xP(r){delete r[Vi],delete r[Qs],delete r[yM],delete r[Lhe],delete r[Phe]}function dv(r){var e=r[Vi];if(e)return e;for(var t=r.parentNode;t;){if(e=t[O0]||t[Vi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=mU(r);r!==null;){if(t=r[Vi])return t;r=mU(r)}return e}r=t,t=r.parentNode}return null}function U0(r){if(r=r[Vi]||r[O0]){var e=r.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return r}return null}function Fx(r){var e=r.tag;if(e===5||e===26||e===27||e===6)return r.stateNode;throw Error(tt(33))}function Mv(r){var e=r[uO];return e||(e=r[uO]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function ui(r){r[lw]=!0}var WW=new Set,qW={};function Dp(r,e){h0(r,e),h0(r+"Capture",e)}function h0(r,e){for(qW[r]=e,r=0;r<e.length;r++)WW.add(e[r])}var khe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hO={},dO={};function Fhe(r){return vM.call(dO,r)?!0:vM.call(hO,r)?!1:khe.test(r)?dO[r]=!0:(hO[r]=!0,!1)}function R_(r,e,t){if(Fhe(e))if(t===null)r.removeAttribute(e);else{switch(typeof t){case"undefined":case"function":case"symbol":r.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){r.removeAttribute(e);return}}r.setAttribute(e,""+t)}}function I2(r,e,t){if(t===null)r.removeAttribute(e);else{switch(typeof t){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(e);return}r.setAttribute(e,""+t)}}function Lu(r,e,t,n){if(n===null)r.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(t);return}r.setAttributeNS(e,t,""+n)}}var iI,AO;function Xm(r){if(iI===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);iI=e&&e[1]||"",AO=-1<t.stack.indexOf(`
    at`)?" (<anonymous>)":-1<t.stack.indexOf("@")?"@unknown:0:0":""}return`
`+iI+r+AO}var sI=!1;function oI(r,e){if(!r||sI)return"";sI=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(A){var d=A}Reflect.construct(r,[],h)}else{try{h.call()}catch(A){d=A}r.call(h.prototype)}}else{try{throw Error()}catch(A){d=A}(h=r())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(A){if(A&&d&&typeof A.stack=="string")return[A.stack,d.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),s=i[0],o=i[1];if(s&&o){var l=s.split(`
`),c=o.split(`
`);for(a=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(n===l.length||a===c.length)for(n=l.length-1,a=c.length-1;1<=n&&0<=a&&l[n]!==c[a];)a--;for(;1<=n&&0<=a;n--,a--)if(l[n]!==c[a]){if(n!==1||a!==1)do if(n--,a--,0>a||l[n]!==c[a]){var u=`
`+l[n].replace(" at new "," at ");return r.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",r.displayName)),u}while(1<=n&&0<=a);break}}}finally{sI=!1,Error.prepareStackTrace=t}return(t=r?r.displayName||r.name:"")?Xm(t):""}function jhe(r){switch(r.tag){case 26:case 27:case 5:return Xm(r.type);case 16:return Xm("Lazy");case 13:return Xm("Suspense");case 19:return Xm("SuspenseList");case 0:case 15:return oI(r.type,!1);case 11:return oI(r.type.render,!1);case 1:return oI(r.type,!0);case 31:return Xm("Activity");default:return""}}function fO(r){try{var e="";do e+=jhe(r),r=r.return;while(r);return e}catch(t){return`
Error generating stack: `+t.message+`
`+t.stack}}function Wo(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function YW(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ohe(r){var e=YW(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var a=t.get,i=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function L5(r){r._valueTracker||(r._valueTracker=Ohe(r))}function XW(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=YW(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function P5(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Uhe=/[\n"\\]/g;function el(r){return r.replace(Uhe,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function xM(r,e,t,n,a,i,s,o){r.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?r.type=s:r.removeAttribute("type"),e!=null?s==="number"?(e===0&&r.value===""||r.value!=e)&&(r.value=""+Wo(e)):r.value!==""+Wo(e)&&(r.value=""+Wo(e)):s!=="submit"&&s!=="reset"||r.removeAttribute("value"),e!=null?bM(r,s,Wo(e)):t!=null?bM(r,s,Wo(t)):n!=null&&r.removeAttribute("value"),a==null&&i!=null&&(r.defaultChecked=!!i),a!=null&&(r.checked=a&&typeof a!="function"&&typeof a!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?r.name=""+Wo(o):r.removeAttribute("name")}function ZW(r,e,t,n,a,i,s,o){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(r.type=i),e!=null||t!=null){if(!(i!=="submit"&&i!=="reset"||e!=null))return;t=t!=null?""+Wo(t):"",e=e!=null?""+Wo(e):t,o||e===r.value||(r.value=e),r.defaultValue=e}n=n??a,n=typeof n!="function"&&typeof n!="symbol"&&!!n,r.checked=o?r.checked:!!n,r.defaultChecked=!!n,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(r.name=s)}function bM(r,e,t){e==="number"&&P5(r.ownerDocument)===r||r.defaultValue===""+t||(r.defaultValue=""+t)}function Rv(r,e,t,n){if(r=r.options,e){e={};for(var a=0;a<t.length;a++)e["$"+t[a]]=!0;for(t=0;t<r.length;t++)a=e.hasOwnProperty("$"+r[t].value),r[t].selected!==a&&(r[t].selected=a),a&&n&&(r[t].defaultSelected=!0)}else{for(t=""+Wo(t),e=null,a=0;a<r.length;a++){if(r[a].value===t){r[a].selected=!0,n&&(r[a].defaultSelected=!0);return}e!==null||r[a].disabled||(e=r[a])}e!==null&&(e.selected=!0)}}function JW(r,e,t){if(e!=null&&(e=""+Wo(e),e!==r.value&&(r.value=e),t==null)){r.defaultValue!==e&&(r.defaultValue=e);return}r.defaultValue=t!=null?""+Wo(t):""}function eq(r,e,t,n){if(e==null){if(n!=null){if(t!=null)throw Error(tt(92));if(kx(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),e=t}t=Wo(e),r.defaultValue=t,n=r.textContent,n===t&&n!==""&&n!==null&&(r.value=n)}function d0(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Hhe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gO(r,e,t){var n=e.indexOf("--")===0;t==null||typeof t=="boolean"||t===""?n?r.setProperty(e,""):e==="float"?r.cssFloat="":r[e]="":n?r.setProperty(e,t):typeof t!="number"||t===0||Hhe.has(e)?e==="float"?r.cssFloat=t:r[e]=(""+t).trim():r[e]=t+"px"}function tq(r,e,t){if(e!=null&&typeof e!="object")throw Error(tt(62));if(r=r.style,t!=null){for(var n in t)!t.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?r.setProperty(n,""):n==="float"?r.cssFloat="":r[n]="");for(var a in e)n=e[a],e.hasOwnProperty(a)&&t[a]!==n&&gO(r,a,n)}else for(var i in e)e.hasOwnProperty(i)&&gO(r,i,e[i])}function bP(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qhe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zhe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function L_(r){return zhe.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var wM=null;function wP(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Av=null,Lv=null;function pO(r){var e=U0(r);if(e&&(r=e.stateNode)){var t=r[Qs]||null;e:switch(r=e.stateNode,e.type){case"input":if(xM(r,t.value,t.defaultValue,t.defaultValue,t.checked,t.defaultChecked,t.type,t.name),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll('input[name="'+el(""+e)+'"][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var a=n[Qs]||null;if(!a)throw Error(tt(90));xM(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<t.length;e++)n=t[e],n.form===r.form&&XW(n)}break e;case"textarea":JW(r,t.value,t.defaultValue);break e;case"select":e=t.value,e!=null&&Rv(r,!!t.multiple,e,!1)}}}var lI=!1;function rq(r,e,t){if(lI)return r(e,t);lI=!0;try{var n=r(e);return n}finally{if(lI=!1,(Av!==null||Lv!==null)&&(KB(),Av&&(e=Av,r=Lv,Lv=Av=null,pO(e),r)))for(e=0;e<r.length;e++)pO(r[e])}}function tb(r,e){var t=r.stateNode;if(t===null)return null;var n=t[Qs]||null;if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(tt(231,e,typeof t));return t}var yh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),SM=!1;if(yh)try{var ky={};Object.defineProperty(ky,"passive",{get:function(){SM=!0}}),window.addEventListener("test",ky,ky),window.removeEventListener("test",ky,ky)}catch{SM=!1}var Zd=null,SP=null,P_=null;function nq(){if(P_)return P_;var r,e=SP,t=e.length,n,a="value"in Zd?Zd.value:Zd.textContent,i=a.length;for(r=0;r<t&&e[r]===a[r];r++);var s=t-r;for(n=1;n<=s&&e[t-n]===a[i-n];n++);return P_=a.slice(r,1<n?1-n:void 0)}function k_(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function E2(){return!0}function mO(){return!1}function Vs(r){function e(t,n,a,i,s){this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(t=r[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?E2:mO,this.isPropagationStopped=mO,this}return Wn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=E2)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=E2)},persist:function(){},isPersistent:E2}),e}var Mp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jB=Vs(Mp),cw=Wn({},Mp,{view:0,detail:0}),Ghe=Vs(cw),cI,uI,Fy,OB=Wn({},cw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_P,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fy&&(Fy&&r.type==="mousemove"?(cI=r.screenX-Fy.screenX,uI=r.screenY-Fy.screenY):uI=cI=0,Fy=r),cI)},movementY:function(r){return"movementY"in r?r.movementY:uI}}),vO=Vs(OB),Vhe=Wn({},OB,{dataTransfer:0}),$he=Vs(Vhe),Khe=Wn({},cw,{relatedTarget:0}),hI=Vs(Khe),Whe=Wn({},Mp,{animationName:0,elapsedTime:0,pseudoElement:0}),qhe=Vs(Whe),Yhe=Wn({},Mp,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Xhe=Vs(Yhe),Zhe=Wn({},Mp,{data:0}),yO=Vs(Zhe),Jhe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ede={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rde(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=tde[r])?!!e[r]:!1}function _P(){return rde}var nde=Wn({},cw,{key:function(r){if(r.key){var e=Jhe[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=k_(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ede[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_P,charCode:function(r){return r.type==="keypress"?k_(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?k_(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ade=Vs(nde),ide=Wn({},OB,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xO=Vs(ide),sde=Wn({},cw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_P}),ode=Vs(sde),lde=Wn({},Mp,{propertyName:0,elapsedTime:0,pseudoElement:0}),cde=Vs(lde),ude=Wn({},OB,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),hde=Vs(ude),dde=Wn({},Mp,{newState:0,oldState:0}),Ade=Vs(dde),fde=[9,13,27,32],CP=yh&&"CompositionEvent"in window,l1=null;yh&&"documentMode"in document&&(l1=document.documentMode);var gde=yh&&"TextEvent"in window&&!l1,aq=yh&&(!CP||l1&&8<l1&&11>=l1),bO=" ",wO=!1;function iq(r,e){switch(r){case"keyup":return fde.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sq(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var fv=!1;function pde(r,e){switch(r){case"compositionend":return sq(e);case"keypress":return e.which!==32?null:(wO=!0,bO);case"textInput":return r=e.data,r===bO&&wO?null:r;default:return null}}function mde(r,e){if(fv)return r==="compositionend"||!CP&&iq(r,e)?(r=nq(),P_=SP=Zd=null,fv=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aq&&e.locale!=="ko"?null:e.data;default:return null}}var vde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SO(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!vde[r.type]:e==="textarea"}function oq(r,e,t,n){Av?Lv?Lv.push(n):Lv=[n]:Av=n,e=J5(e,"onChange"),0<e.length&&(t=new jB("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var c1=null,rb=null;function yde(r){JY(r,0)}function UB(r){var e=Fx(r);if(XW(e))return r}function _O(r,e){if(r==="change")return e}var lq=!1;if(yh){var dI;if(yh){var AI="oninput"in document;if(!AI){var CO=document.createElement("div");CO.setAttribute("oninput","return;"),AI=typeof CO.oninput=="function"}dI=AI}else dI=!1;lq=dI&&(!document.documentMode||9<document.documentMode)}function BO(){c1&&(c1.detachEvent("onpropertychange",cq),rb=c1=null)}function cq(r){if(r.propertyName==="value"&&UB(rb)){var e=[];oq(e,rb,r,wP(r)),rq(yde,e)}}function xde(r,e,t){r==="focusin"?(BO(),c1=e,rb=t,c1.attachEvent("onpropertychange",cq)):r==="focusout"&&BO()}function bde(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return UB(rb)}function wde(r,e){if(r==="click")return UB(e)}function Sde(r,e){if(r==="input"||r==="change")return UB(e)}function _de(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Bo=typeof Object.is=="function"?Object.is:_de;function nb(r,e){if(Bo(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var a=t[n];if(!vM.call(e,a)||!Bo(r[a],e[a]))return!1}return!0}function NO(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function TO(r,e){var t=NO(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=NO(t)}}function uq(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?uq(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function hq(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var e=P5(r.document);e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=P5(r.document)}return e}function BP(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}var Cde=yh&&"documentMode"in document&&11>=document.documentMode,gv=null,_M=null,u1=null,CM=!1;function IO(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;CM||gv==null||gv!==P5(n)||(n=gv,"selectionStart"in n&&BP(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),u1&&nb(u1,n)||(u1=n,n=J5(_M,"onSelect"),0<n.length&&(e=new jB("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=gv)))}function Bf(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var pv={animationend:Bf("Animation","AnimationEnd"),animationiteration:Bf("Animation","AnimationIteration"),animationstart:Bf("Animation","AnimationStart"),transitionrun:Bf("Transition","TransitionRun"),transitionstart:Bf("Transition","TransitionStart"),transitioncancel:Bf("Transition","TransitionCancel"),transitionend:Bf("Transition","TransitionEnd")},fI={},dq={};yh&&(dq=document.createElement("div").style,"AnimationEvent"in window||(delete pv.animationend.animation,delete pv.animationiteration.animation,delete pv.animationstart.animation),"TransitionEvent"in window||delete pv.transitionend.transition);function Rp(r){if(fI[r])return fI[r];if(!pv[r])return r;var e=pv[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in dq)return fI[r]=e[t];return r}var Aq=Rp("animationend"),fq=Rp("animationiteration"),gq=Rp("animationstart"),Bde=Rp("transitionrun"),Nde=Rp("transitionstart"),Tde=Rp("transitioncancel"),pq=Rp("transitionend"),mq=new Map,BM="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");BM.push("scrollEnd");function ic(r,e){mq.set(r,e),Dp(e,[r])}var EO=new WeakMap;function tl(r,e){if(typeof r=="object"&&r!==null){var t=EO.get(r);return t!==void 0?t:(e={value:r,source:e,stack:fO(e)},EO.set(r,e),e)}return{value:r,source:e,stack:fO(e)}}var Vo=[],mv=0,NP=0;function HB(){for(var r=mv,e=NP=mv=0;e<r;){var t=Vo[e];Vo[e++]=null;var n=Vo[e];Vo[e++]=null;var a=Vo[e];Vo[e++]=null;var i=Vo[e];if(Vo[e++]=null,n!==null&&a!==null){var s=n.pending;s===null?a.next=a:(a.next=s.next,s.next=a),n.pending=a}i!==0&&vq(t,a,i)}}function QB(r,e,t,n){Vo[mv++]=r,Vo[mv++]=e,Vo[mv++]=t,Vo[mv++]=n,NP|=n,r.lanes|=n,r=r.alternate,r!==null&&(r.lanes|=n)}function TP(r,e,t,n){return QB(r,e,t,n),k5(r)}function H0(r,e){return QB(r,null,null,e),k5(r)}function vq(r,e,t){r.lanes|=t;var n=r.alternate;n!==null&&(n.lanes|=t);for(var a=!1,i=r.return;i!==null;)i.childLanes|=t,n=i.alternate,n!==null&&(n.childLanes|=t),i.tag===22&&(r=i.stateNode,r===null||r._visibility&1||(a=!0)),r=i,i=i.return;return r.tag===3?(i=r.stateNode,a&&e!==null&&(a=31-mo(t),r=i.hiddenUpdates,n=r[a],n===null?r[a]=[e]:n.push(e),e.lane=t|536870912),i):null}function k5(r){if(50<x1)throw x1=0,KM=null,Error(tt(185));for(var e=r.return;e!==null;)r=e,e=r.return;return r.tag===3?r.stateNode:null}var vv={};function Ide(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function co(r,e,t,n){return new Ide(r,e,t,n)}function IP(r){return r=r.prototype,!(!r||!r.isReactComponent)}function lh(r,e){var t=r.alternate;return t===null?(t=co(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&65011712,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t.refCleanup=r.refCleanup,t}function yq(r,e){r.flags&=65011714;var t=r.alternate;return t===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,r.type=t.type,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r}function F_(r,e,t,n,a,i){var s=0;if(n=r,typeof r=="function")IP(r)&&(s=1);else if(typeof r=="string")s=DAe(r,t,Wc.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case fM:return r=co(31,t,e,a),r.elementType=fM,r.lanes=i,r;case uv:return Hg(t.children,a,i,e);case jW:s=8,a|=24;break;case hM:return r=co(12,t,e,a|2),r.elementType=hM,r.lanes=i,r;case dM:return r=co(13,t,e,a),r.elementType=dM,r.lanes=i,r;case AM:return r=co(19,t,e,a),r.elementType=AM,r.lanes=i,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case yhe:case Xu:s=10;break e;case OW:s=9;break e;case gP:s=11;break e;case pP:s=14;break e;case kd:s=16,n=null;break e}s=29,t=Error(tt(130,r===null?"null":typeof r,"")),n=null}return e=co(s,t,e,a),e.elementType=r,e.type=n,e.lanes=i,e}function Hg(r,e,t,n){return r=co(7,r,n,e),r.lanes=t,r}function gI(r,e,t){return r=co(6,r,null,e),r.lanes=t,r}function pI(r,e,t){return e=co(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}var yv=[],xv=0,F5=null,j5=0,qo=[],Yo=0,Qg=null,Zu=1,Ju="";function ng(r,e){yv[xv++]=j5,yv[xv++]=F5,F5=r,j5=e}function xq(r,e,t){qo[Yo++]=Zu,qo[Yo++]=Ju,qo[Yo++]=Qg,Qg=r;var n=Zu;r=Ju;var a=32-mo(n)-1;n&=~(1<<a),t+=1;var i=32-mo(e)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Zu=1<<32-mo(e)+a|t<<a|n,Ju=i+r}else Zu=1<<i|t<<a|n,Ju=r}function EP(r){r.return!==null&&(ng(r,1),xq(r,1,0))}function DP(r){for(;r===F5;)F5=yv[--xv],yv[xv]=null,j5=yv[--xv],yv[xv]=null;for(;r===Qg;)Qg=qo[--Yo],qo[Yo]=null,Ju=qo[--Yo],qo[Yo]=null,Zu=qo[--Yo],qo[Yo]=null}var us=null,ua=null,en=!1,zg=null,kc=!1,NM=Error(tt(519));function hp(r){var e=Error(tt(418,""));throw ab(tl(e,r)),NM}function DO(r){var e=r.stateNode,t=r.type,n=r.memoizedProps;switch(e[Vi]=r,e[Qs]=n,t){case"dialog":Rr("cancel",e),Rr("close",e);break;case"iframe":case"object":case"embed":Rr("load",e);break;case"video":case"audio":for(t=0;t<ob.length;t++)Rr(ob[t],e);break;case"source":Rr("error",e);break;case"img":case"image":case"link":Rr("error",e),Rr("load",e);break;case"details":Rr("toggle",e);break;case"input":Rr("invalid",e),ZW(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),L5(e);break;case"select":Rr("invalid",e);break;case"textarea":Rr("invalid",e),eq(e,n.value,n.defaultValue,n.children),L5(e)}t=n.children,typeof t!="string"&&typeof t!="number"&&typeof t!="bigint"||e.textContent===""+t||n.suppressHydrationWarning===!0||tX(e.textContent,t)?(n.popover!=null&&(Rr("beforetoggle",e),Rr("toggle",e)),n.onScroll!=null&&Rr("scroll",e),n.onScrollEnd!=null&&Rr("scrollend",e),n.onClick!=null&&(e.onclick=YB),e=!0):e=!1,e||hp(r)}function MO(r){for(us=r.return;us;)switch(us.tag){case 5:case 13:kc=!1;return;case 27:case 3:kc=!0;return;default:us=us.return}}function jy(r){if(r!==us)return!1;if(!en)return MO(r),en=!0,!1;var e=r.tag,t;if((t=e!==3&&e!==27)&&((t=e===5)&&(t=r.type,t=!(t!=="form"&&t!=="button")||JM(r.type,r.memoizedProps)),t=!t),t&&ua&&hp(r),MO(r),e===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(tt(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8)if(t=r.data,t==="/$"){if(e===0){ua=Zl(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++;r=r.nextSibling}ua=null}}else e===27?(e=ua,ef(r.type)?(r=r3,r3=null,ua=r):ua=e):ua=us?Zl(r.stateNode.nextSibling):null;return!0}function uw(){ua=us=null,en=!1}function RO(){var r=zg;return r!==null&&(Ms===null?Ms=r:Ms.push.apply(Ms,r),zg=null),r}function ab(r){zg===null?zg=[r]:zg.push(r)}var TM=cu(null),Lp=null,eh=null;function zd(r,e,t){ea(TM,e._currentValue),e._currentValue=t}function ch(r){r._currentValue=TM.current,Ai(TM)}function IM(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function EM(r,e,t,n){var a=r.child;for(a!==null&&(a.return=r);a!==null;){var i=a.dependencies;if(i!==null){var s=a.child;i=i.firstContext;e:for(;i!==null;){var o=i;i=a;for(var l=0;l<e.length;l++)if(o.context===e[l]){i.lanes|=t,o=i.alternate,o!==null&&(o.lanes|=t),IM(i.return,t,r),n||(s=null);break e}i=o.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(tt(341));s.lanes|=t,i=s.alternate,i!==null&&(i.lanes|=t),IM(s,t,r),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===r){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function hw(r,e,t,n){r=null;for(var a=e,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(tt(387));if(s=s.memoizedProps,s!==null){var o=a.type;Bo(a.pendingProps.value,s.value)||(r!==null?r.push(o):r=[o])}}else if(a===E5.current){if(s=a.alternate,s===null)throw Error(tt(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(r!==null?r.push(ub):r=[ub])}a=a.return}r!==null&&EM(e,r,t,n),e.flags|=262144}function O5(r){for(r=r.firstContext;r!==null;){if(!Bo(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function dp(r){Lp=r,eh=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function $i(r){return bq(Lp,r)}function D2(r,e){return Lp===null&&dp(r),bq(r,e)}function bq(r,e){var t=e._currentValue;if(e={context:e,memoizedValue:t,next:null},eh===null){if(r===null)throw Error(tt(308));eh=e,r.dependencies={lanes:0,firstContext:e},r.flags|=524288}else eh=eh.next=e;return t}var Ede=typeof AbortController<"u"?AbortController:function(){var r=[],e=this.signal={aborted:!1,addEventListener:function(t,n){r.push(n)}};this.abort=function(){e.aborted=!0,r.forEach(function(t){return t()})}},Dde=Ja.unstable_scheduleCallback,Mde=Ja.unstable_NormalPriority,Ka={$$typeof:Xu,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function MP(){return{controller:new Ede,data:new Map,refCount:0}}function dw(r){r.refCount--,r.refCount===0&&Dde(Mde,function(){r.controller.abort()})}var h1=null,DM=0,A0=0,Pv=null;function Rde(r,e){if(h1===null){var t=h1=[];DM=0,A0=tk(),Pv={status:"pending",value:void 0,then:function(n){t.push(n)}}}return DM++,e.then(LO,LO),e}function LO(){if(--DM===0&&h1!==null){Pv!==null&&(Pv.status="fulfilled");var r=h1;h1=null,A0=0,Pv=null;for(var e=0;e<r.length;e++)(0,r[e])()}}function Lde(r,e){var t=[],n={status:"pending",value:null,reason:null,then:function(a){t.push(a)}};return r.then(function(){n.status="fulfilled",n.value=e;for(var a=0;a<t.length;a++)(0,t[a])(e)},function(a){for(n.status="rejected",n.reason=a,a=0;a<t.length;a++)(0,t[a])(void 0)}),n}var PO=ur.S;ur.S=function(r,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&Rde(r,e),PO!==null&&PO(r,e)};var Gg=cu(null);function RP(){var r=Gg.current;return r!==null?r:zn.pooledCache}function j_(r,e){e===null?ea(Gg,Gg.current):ea(Gg,e.pool)}function wq(){var r=RP();return r===null?null:{parent:Ka._currentValue,pool:r}}var Aw=Error(tt(460)),Sq=Error(tt(474)),zB=Error(tt(542)),MM={then:function(){}};function kO(r){return r=r.status,r==="fulfilled"||r==="rejected"}function M2(){}function _q(r,e,t){switch(t=r[t],t===void 0?r.push(e):t!==e&&(e.then(M2,M2),e=t),e.status){case"fulfilled":return e.value;case"rejected":throw r=e.reason,jO(r),r;default:if(typeof e.status=="string")e.then(M2,M2);else{if(r=zn,r!==null&&100<r.shellSuspendCounter)throw Error(tt(482));r=e,r.status="pending",r.then(function(n){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=n}},function(n){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw r=e.reason,jO(r),r}throw d1=e,Aw}}var d1=null;function FO(){if(d1===null)throw Error(tt(459));var r=d1;return d1=null,r}function jO(r){if(r===Aw||r===zB)throw Error(tt(483))}var Fd=!1;function LP(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function RM(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function mA(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function vA(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,xn&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,e=k5(r),vq(r,null,t),e}return QB(r,n,e,t),k5(r)}function A1(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194048)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,$W(r,t)}}function mI(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var a=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var s={lane:t.lane,tag:t.tag,payload:t.payload,callback:null,next:null};i===null?a=i=s:i=i.next=s,t=t.next}while(t!==null);i===null?a=i=e:i=i.next=e}else a=i=e;t={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}var LM=!1;function f1(){if(LM){var r=Pv;if(r!==null)throw r}}function g1(r,e,t,n){LM=!1;var a=r.updateQueue;Fd=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var l=o,c=l.next;l.next=null,s===null?i=c:s.next=c,s=l;var u=r.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==s&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=a.baseState;s=0,u=c=l=null,o=i;do{var d=o.lane&-536870913,A=d!==o.lane;if(A?($r&d)===d:(n&d)===d){d!==0&&d===A0&&(LM=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=r,p=o;d=e;var v=t;switch(p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(v,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,d=typeof g=="function"?g.call(v,h,d):g,d==null)break e;h=Wn({},h,d);break e;case 2:Fd=!0}}d=o.callback,d!==null&&(r.flags|=64,A&&(r.flags|=8192),A=a.callbacks,A===null?a.callbacks=[d]:A.push(d))}else A={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=A,l=h):u=u.next=A,s|=d;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;A=o,o=A.next,A.next=null,a.lastBaseUpdate=A,a.shared.pending=null}}while(!0);u===null&&(l=h),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,i===null&&(a.shared.lanes=0),jA|=s,r.lanes=s,r.memoizedState=h}}function Cq(r,e){if(typeof r!="function")throw Error(tt(191,r));r.call(e)}function Bq(r,e){var t=r.callbacks;if(t!==null)for(r.callbacks=null,r=0;r<t.length;r++)Cq(t[r],e)}var f0=cu(null),U5=cu(0);function OO(r,e){r=wh,ea(U5,r),ea(f0,e),wh=r|e.baseLanes}function PM(){ea(U5,wh),ea(f0,f0.current)}function PP(){wh=U5.current,Ai(f0),Ai(U5)}var kA=0,Ir=null,En=null,La=null,H5=!1,kv=!1,Ap=!1,Q5=0,ib=0,Fv=null,Pde=0;function va(){throw Error(tt(321))}function kP(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Bo(r[t],e[t]))return!1;return!0}function FP(r,e,t,n,a,i){return kA=i,Ir=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ur.H=r===null||r.memoizedState===null?nY:aY,Ap=!1,i=t(n,a),Ap=!1,kv&&(i=Tq(e,t,n,a)),Nq(r),i}function Nq(r){ur.H=z5;var e=En!==null&&En.next!==null;if(kA=0,La=En=Ir=null,H5=!1,ib=0,Fv=null,e)throw Error(tt(300));r===null||hi||(r=r.dependencies,r!==null&&O5(r)&&(hi=!0))}function Tq(r,e,t,n){Ir=r;var a=0;do{if(kv&&(Fv=null),ib=0,kv=!1,25<=a)throw Error(tt(301));if(a+=1,La=En=null,r.updateQueue!=null){var i=r.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ur.H=Qde,i=e(t,n)}while(kv);return i}function kde(){var r=ur.H,e=r.useState()[0];return e=typeof e.then=="function"?fw(e):e,r=r.useState()[0],(En!==null?En.memoizedState:null)!==r&&(Ir.flags|=1024),e}function jP(){var r=Q5!==0;return Q5=0,r}function OP(r,e,t){e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~t}function UP(r){if(H5){for(r=r.memoizedState;r!==null;){var e=r.queue;e!==null&&(e.pending=null),r=r.next}H5=!1}kA=0,La=En=Ir=null,kv=!1,ib=Q5=0,Fv=null}function Es(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return La===null?Ir.memoizedState=La=r:La=La.next=r,La}function Oa(){if(En===null){var r=Ir.alternate;r=r!==null?r.memoizedState:null}else r=En.next;var e=La===null?Ir.memoizedState:La.next;if(e!==null)La=e,En=r;else{if(r===null)throw Ir.alternate===null?Error(tt(467)):Error(tt(310));En=r,r={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},La===null?Ir.memoizedState=La=r:La=La.next=r}return La}function HP(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fw(r){var e=ib;return ib+=1,Fv===null&&(Fv=[]),r=_q(Fv,r,e),e=Ir,(La===null?e.memoizedState:La.next)===null&&(e=e.alternate,ur.H=e===null||e.memoizedState===null?nY:aY),r}function GB(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return fw(r);if(r.$$typeof===Xu)return $i(r)}throw Error(tt(438,String(r)))}function QP(r){var e=null,t=Ir.updateQueue;if(t!==null&&(e=t.memoCache),e==null){var n=Ir.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),t===null&&(t=HP(),Ir.updateQueue=t),t.memoCache=e,t=e.data[e.index],t===void 0)for(t=e.data[e.index]=Array(r),n=0;n<r;n++)t[n]=xhe;return e.index++,t}function xh(r,e){return typeof e=="function"?e(r):e}function O_(r){var e=Oa();return zP(e,En,r)}function zP(r,e,t){var n=r.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=t;var a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}e.baseQueue=a=i,n.pending=null}if(i=r.baseState,a===null)r.memoizedState=i;else{e=a.next;var o=s=null,l=null,c=e,u=!1;do{var h=c.lane&-536870913;if(h!==c.lane?($r&h)===h:(kA&h)===h){var d=c.revertLane;if(d===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===A0&&(u=!0);else if((kA&d)===d){c=c.next,d===A0&&(u=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,s=i):l=l.next=h,Ir.lanes|=d,jA|=d;h=c.action,Ap&&t(i,h),i=c.hasEagerState?c.eagerState:t(i,h)}else d={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,s=i):l=l.next=d,Ir.lanes|=h,jA|=h;c=c.next}while(c!==null&&c!==e);if(l===null?s=i:l.next=o,!Bo(i,r.memoizedState)&&(hi=!0,u&&(t=Pv,t!==null)))throw t;r.memoizedState=i,r.baseState=s,r.baseQueue=l,n.lastRenderedState=i}return a===null&&(n.lanes=0),[r.memoizedState,n.dispatch]}function vI(r){var e=Oa(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=r;var n=t.dispatch,a=t.pending,i=e.memoizedState;if(a!==null){t.pending=null;var s=a=a.next;do i=r(i,s.action),s=s.next;while(s!==a);Bo(i,e.memoizedState)||(hi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,n]}function Iq(r,e,t){var n=Ir,a=Oa(),i=en;if(i){if(t===void 0)throw Error(tt(407));t=t()}else t=e();var s=!Bo((En||a).memoizedState,t);s&&(a.memoizedState=t,hi=!0),a=a.queue;var o=Mq.bind(null,n,a,r);if(gw(2048,8,o,[r]),a.getSnapshot!==e||s||La!==null&&La.memoizedState.tag&1){if(n.flags|=2048,g0(9,VB(),Dq.bind(null,n,a,t,e),null),zn===null)throw Error(tt(349));i||kA&124||Eq(n,e,t)}return t}function Eq(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Ir.updateQueue,e===null?(e=HP(),Ir.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function Dq(r,e,t,n){e.value=t,e.getSnapshot=n,Rq(e)&&Lq(r)}function Mq(r,e,t){return t(function(){Rq(e)&&Lq(r)})}function Rq(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Bo(r,t)}catch{return!0}}function Lq(r){var e=H0(r,2);e!==null&&yo(e,r,2)}function kM(r){var e=Es();if(typeof r=="function"){var t=r;if(r=t(),Ap){Xd(!0);try{t()}finally{Xd(!1)}}}return e.memoizedState=e.baseState=r,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xh,lastRenderedState:r},e}function Pq(r,e,t,n){return r.baseState=t,zP(r,En,typeof n=="function"?n:xh)}function Fde(r,e,t,n,a){if($B(r))throw Error(tt(485));if(r=e.action,r!==null){var i={payload:a,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){i.listeners.push(s)}};ur.T!==null?t(!0):i.isTransition=!1,n(i),t=e.pending,t===null?(i.next=e.pending=i,kq(e,i)):(i.next=t.next,e.pending=t.next=i)}}function kq(r,e){var t=e.action,n=e.payload,a=r.state;if(e.isTransition){var i=ur.T,s={};ur.T=s;try{var o=t(a,n),l=ur.S;l!==null&&l(s,o),UO(r,e,o)}catch(c){FM(r,e,c)}finally{ur.T=i}}else try{i=t(a,n),UO(r,e,i)}catch(c){FM(r,e,c)}}function UO(r,e,t){t!==null&&typeof t=="object"&&typeof t.then=="function"?t.then(function(n){HO(r,e,n)},function(n){return FM(r,e,n)}):HO(r,e,t)}function HO(r,e,t){e.status="fulfilled",e.value=t,Fq(e),r.state=t,e=r.pending,e!==null&&(t=e.next,t===e?r.pending=null:(t=t.next,e.next=t,kq(r,t)))}function FM(r,e,t){var n=r.pending;if(r.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=t,Fq(e),e=e.next;while(e!==n)}r.action=null}function Fq(r){r=r.listeners;for(var e=0;e<r.length;e++)(0,r[e])()}function jq(r,e){return e}function QO(r,e){if(en){var t=zn.formState;if(t!==null){e:{var n=Ir;if(en){if(ua){t:{for(var a=ua,i=kc;a.nodeType!==8;){if(!i){a=null;break t}if(a=Zl(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){ua=Zl(a.nextSibling),n=a.data==="F!";break e}}hp(n)}n=!1}n&&(e=t[0])}}return t=Es(),t.memoizedState=t.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jq,lastRenderedState:e},t.queue=n,t=eY.bind(null,Ir,n),n.dispatch=t,n=kM(!1),i=KP.bind(null,Ir,!1,n.queue),n=Es(),a={state:e,dispatch:null,action:r,pending:null},n.queue=a,t=Fde.bind(null,Ir,a,i,t),a.dispatch=t,n.memoizedState=r,[e,t,!1]}function zO(r){var e=Oa();return Oq(e,En,r)}function Oq(r,e,t){if(e=zP(r,e,jq)[0],r=O_(xh)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=fw(e)}catch(s){throw s===Aw?zB:s}else n=e;e=Oa();var a=e.queue,i=a.dispatch;return t!==e.memoizedState&&(Ir.flags|=2048,g0(9,VB(),jde.bind(null,a,t),null)),[n,i,r]}function jde(r,e){r.action=e}function GO(r){var e=Oa(),t=En;if(t!==null)return Oq(e,t,r);Oa(),e=e.memoizedState,t=Oa();var n=t.queue.dispatch;return t.memoizedState=r,[e,n,!1]}function g0(r,e,t,n){return r={tag:r,create:t,deps:n,inst:e,next:null},e=Ir.updateQueue,e===null&&(e=HP(),Ir.updateQueue=e),t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r),r}function VB(){return{destroy:void 0,resource:void 0}}function Uq(){return Oa().memoizedState}function U_(r,e,t,n){var a=Es();n=n===void 0?null:n,Ir.flags|=r,a.memoizedState=g0(1|e,VB(),t,n)}function gw(r,e,t,n){var a=Oa();n=n===void 0?null:n;var i=a.memoizedState.inst;En!==null&&n!==null&&kP(n,En.memoizedState.deps)?a.memoizedState=g0(e,i,t,n):(Ir.flags|=r,a.memoizedState=g0(1|e,i,t,n))}function VO(r,e){U_(8390656,8,r,e)}function Hq(r,e){gw(2048,8,r,e)}function Qq(r,e){return gw(4,2,r,e)}function zq(r,e){return gw(4,4,r,e)}function Gq(r,e){if(typeof e=="function"){r=r();var t=e(r);return function(){typeof t=="function"?t():e(null)}}if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function Vq(r,e,t){t=t!=null?t.concat([r]):null,gw(4,4,Gq.bind(null,e,r),t)}function GP(){}function $q(r,e){var t=Oa();e=e===void 0?null:e;var n=t.memoizedState;return e!==null&&kP(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function Kq(r,e){var t=Oa();e=e===void 0?null:e;var n=t.memoizedState;if(e!==null&&kP(e,n[1]))return n[0];if(n=r(),Ap){Xd(!0);try{r()}finally{Xd(!1)}}return t.memoizedState=[n,e],n}function VP(r,e,t){return t===void 0||kA&1073741824?r.memoizedState=e:(r.memoizedState=t,r=FY(),Ir.lanes|=r,jA|=r,t)}function Wq(r,e,t,n){return Bo(t,e)?t:f0.current!==null?(r=VP(r,t,n),Bo(r,e)||(hi=!0),r):kA&42?(r=FY(),Ir.lanes|=r,jA|=r,e):(hi=!0,r.memoizedState=t)}function qq(r,e,t,n,a){var i=rn.p;rn.p=i!==0&&8>i?i:8;var s=ur.T,o={};ur.T=o,KP(r,!1,e,t);try{var l=a(),c=ur.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=Lde(l,n);p1(r,e,u,vo(r))}else p1(r,e,n,vo(r))}catch(h){p1(r,e,{then:function(){},status:"rejected",reason:h},vo())}finally{rn.p=i,ur.T=s}}function Ode(){}function jM(r,e,t,n){if(r.tag!==5)throw Error(tt(476));var a=Yq(r).queue;qq(r,a,e,Ug,t===null?Ode:function(){return Xq(r),t(n)})}function Yq(r){var e=r.memoizedState;if(e!==null)return e;e={memoizedState:Ug,baseState:Ug,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xh,lastRenderedState:Ug},next:null};var t={};return e.next={memoizedState:t,baseState:t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xh,lastRenderedState:t},next:null},r.memoizedState=e,r=r.alternate,r!==null&&(r.memoizedState=e),e}function Xq(r){var e=Yq(r).next.queue;p1(r,e,{},vo())}function $P(){return $i(ub)}function Zq(){return Oa().memoizedState}function Jq(){return Oa().memoizedState}function Ude(r){for(var e=r.return;e!==null;){switch(e.tag){case 24:case 3:var t=vo();r=mA(t);var n=vA(e,r,t);n!==null&&(yo(n,e,t),A1(n,e,t)),e={cache:MP()},r.payload=e;return}e=e.return}}function Hde(r,e,t){var n=vo();t={lane:n,revertLane:0,action:t,hasEagerState:!1,eagerState:null,next:null},$B(r)?tY(e,t):(t=TP(r,e,t,n),t!==null&&(yo(t,r,n),rY(t,e,n)))}function eY(r,e,t){var n=vo();p1(r,e,t,n)}function p1(r,e,t,n){var a={lane:n,revertLane:0,action:t,hasEagerState:!1,eagerState:null,next:null};if($B(r))tY(e,a);else{var i=r.alternate;if(r.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,o=i(s,t);if(a.hasEagerState=!0,a.eagerState=o,Bo(o,s))return QB(r,e,a,0),zn===null&&HB(),!1}catch{}finally{}if(t=TP(r,e,a,n),t!==null)return yo(t,r,n),rY(t,e,n),!0}return!1}function KP(r,e,t,n){if(n={lane:2,revertLane:tk(),action:n,hasEagerState:!1,eagerState:null,next:null},$B(r)){if(e)throw Error(tt(479))}else e=TP(r,t,n,2),e!==null&&yo(e,r,2)}function $B(r){var e=r.alternate;return r===Ir||e!==null&&e===Ir}function tY(r,e){kv=H5=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function rY(r,e,t){if(t&4194048){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,$W(r,t)}}var z5={readContext:$i,use:GB,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useLayoutEffect:va,useInsertionEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useSyncExternalStore:va,useId:va,useHostTransitionStatus:va,useFormState:va,useActionState:va,useOptimistic:va,useMemoCache:va,useCacheRefresh:va},nY={readContext:$i,use:GB,useCallback:function(r,e){return Es().memoizedState=[r,e===void 0?null:e],r},useContext:$i,useEffect:VO,useImperativeHandle:function(r,e,t){t=t!=null?t.concat([r]):null,U_(4194308,4,Gq.bind(null,e,r),t)},useLayoutEffect:function(r,e){return U_(4194308,4,r,e)},useInsertionEffect:function(r,e){U_(4,2,r,e)},useMemo:function(r,e){var t=Es();e=e===void 0?null:e;var n=r();if(Ap){Xd(!0);try{r()}finally{Xd(!1)}}return t.memoizedState=[n,e],n},useReducer:function(r,e,t){var n=Es();if(t!==void 0){var a=t(e);if(Ap){Xd(!0);try{t(e)}finally{Xd(!1)}}}else a=e;return n.memoizedState=n.baseState=a,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},n.queue=r,r=r.dispatch=Hde.bind(null,Ir,r),[n.memoizedState,r]},useRef:function(r){var e=Es();return r={current:r},e.memoizedState=r},useState:function(r){r=kM(r);var e=r.queue,t=eY.bind(null,Ir,e);return e.dispatch=t,[r.memoizedState,t]},useDebugValue:GP,useDeferredValue:function(r,e){var t=Es();return VP(t,r,e)},useTransition:function(){var r=kM(!1);return r=qq.bind(null,Ir,r.queue,!0,!1),Es().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,e,t){var n=Ir,a=Es();if(en){if(t===void 0)throw Error(tt(407));t=t()}else{if(t=e(),zn===null)throw Error(tt(349));$r&124||Eq(n,e,t)}a.memoizedState=t;var i={value:t,getSnapshot:e};return a.queue=i,VO(Mq.bind(null,n,i,r),[r]),n.flags|=2048,g0(9,VB(),Dq.bind(null,n,i,t,e),null),t},useId:function(){var r=Es(),e=zn.identifierPrefix;if(en){var t=Ju,n=Zu;t=(n&~(1<<32-mo(n)-1)).toString(32)+t,e="«"+e+"R"+t,t=Q5++,0<t&&(e+="H"+t.toString(32)),e+="»"}else t=Pde++,e="«"+e+"r"+t.toString(32)+"»";return r.memoizedState=e},useHostTransitionStatus:$P,useFormState:QO,useActionState:QO,useOptimistic:function(r){var e=Es();e.memoizedState=e.baseState=r;var t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=t,e=KP.bind(null,Ir,!0,t),t.dispatch=e,[r,e]},useMemoCache:QP,useCacheRefresh:function(){return Es().memoizedState=Ude.bind(null,Ir)}},aY={readContext:$i,use:GB,useCallback:$q,useContext:$i,useEffect:Hq,useImperativeHandle:Vq,useInsertionEffect:Qq,useLayoutEffect:zq,useMemo:Kq,useReducer:O_,useRef:Uq,useState:function(){return O_(xh)},useDebugValue:GP,useDeferredValue:function(r,e){var t=Oa();return Wq(t,En.memoizedState,r,e)},useTransition:function(){var r=O_(xh)[0],e=Oa().memoizedState;return[typeof r=="boolean"?r:fw(r),e]},useSyncExternalStore:Iq,useId:Zq,useHostTransitionStatus:$P,useFormState:zO,useActionState:zO,useOptimistic:function(r,e){var t=Oa();return Pq(t,En,r,e)},useMemoCache:QP,useCacheRefresh:Jq},Qde={readContext:$i,use:GB,useCallback:$q,useContext:$i,useEffect:Hq,useImperativeHandle:Vq,useInsertionEffect:Qq,useLayoutEffect:zq,useMemo:Kq,useReducer:vI,useRef:Uq,useState:function(){return vI(xh)},useDebugValue:GP,useDeferredValue:function(r,e){var t=Oa();return En===null?VP(t,r,e):Wq(t,En.memoizedState,r,e)},useTransition:function(){var r=vI(xh)[0],e=Oa().memoizedState;return[typeof r=="boolean"?r:fw(r),e]},useSyncExternalStore:Iq,useId:Zq,useHostTransitionStatus:$P,useFormState:GO,useActionState:GO,useOptimistic:function(r,e){var t=Oa();return En!==null?Pq(t,En,r,e):(t.baseState=r,[r,t.queue.dispatch])},useMemoCache:QP,useCacheRefresh:Jq},jv=null,sb=0;function R2(r){var e=sb;return sb+=1,jv===null&&(jv=[]),_q(jv,r,e)}function Oy(r,e){e=e.props.ref,r.ref=e!==void 0?e:null}function L2(r,e){throw e.$$typeof===vhe?Error(tt(525)):(r=Object.prototype.toString.call(e),Error(tt(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)))}function $O(r){var e=r._init;return e(r._payload)}function iY(r){function e(m,y){if(r){var x=m.deletions;x===null?(m.deletions=[y],m.flags|=16):x.push(y)}}function t(m,y){if(!r)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function n(m){for(var y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function a(m,y){return m=lh(m,y),m.index=0,m.sibling=null,m}function i(m,y,x){return m.index=x,r?(x=m.alternate,x!==null?(x=x.index,x<y?(m.flags|=67108866,y):x):(m.flags|=67108866,y)):(m.flags|=1048576,y)}function s(m){return r&&m.alternate===null&&(m.flags|=67108866),m}function o(m,y,x,b){return y===null||y.tag!==6?(y=gI(x,m.mode,b),y.return=m,y):(y=a(y,x),y.return=m,y)}function l(m,y,x,b){var S=x.type;return S===uv?u(m,y,x.props.children,b,x.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kd&&$O(S)===y.type)?(y=a(y,x.props),Oy(y,x),y.return=m,y):(y=F_(x.type,x.key,x.props,null,m.mode,b),Oy(y,x),y.return=m,y)}function c(m,y,x,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=pI(x,m.mode,b),y.return=m,y):(y=a(y,x.children||[]),y.return=m,y)}function u(m,y,x,b,S){return y===null||y.tag!==7?(y=Hg(x,m.mode,b,S),y.return=m,y):(y=a(y,x),y.return=m,y)}function h(m,y,x){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=gI(""+y,m.mode,x),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case B2:return x=F_(y.type,y.key,y.props,null,m.mode,x),Oy(x,y),x.return=m,x;case Px:return y=pI(y,m.mode,x),y.return=m,y;case kd:var b=y._init;return y=b(y._payload),h(m,y,x)}if(kx(y)||Py(y))return y=Hg(y,m.mode,x,null),y.return=m,y;if(typeof y.then=="function")return h(m,R2(y),x);if(y.$$typeof===Xu)return h(m,D2(m,y),x);L2(m,y)}return null}function d(m,y,x,b){var S=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return S!==null?null:o(m,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case B2:return x.key===S?l(m,y,x,b):null;case Px:return x.key===S?c(m,y,x,b):null;case kd:return S=x._init,x=S(x._payload),d(m,y,x,b)}if(kx(x)||Py(x))return S!==null?null:u(m,y,x,b,null);if(typeof x.then=="function")return d(m,y,R2(x),b);if(x.$$typeof===Xu)return d(m,y,D2(m,x),b);L2(m,x)}return null}function A(m,y,x,b,S){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return m=m.get(x)||null,o(y,m,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case B2:return m=m.get(b.key===null?x:b.key)||null,l(y,m,b,S);case Px:return m=m.get(b.key===null?x:b.key)||null,c(y,m,b,S);case kd:var _=b._init;return b=_(b._payload),A(m,y,x,b,S)}if(kx(b)||Py(b))return m=m.get(x)||null,u(y,m,b,S,null);if(typeof b.then=="function")return A(m,y,x,R2(b),S);if(b.$$typeof===Xu)return A(m,y,x,D2(y,b),S);L2(y,b)}return null}function g(m,y,x,b){for(var S=null,_=null,C=y,w=y=0,B=null;C!==null&&w<x.length;w++){C.index>w?(B=C,C=null):B=C.sibling;var D=d(m,C,x[w],b);if(D===null){C===null&&(C=B);break}r&&C&&D.alternate===null&&e(m,C),y=i(D,y,w),_===null?S=D:_.sibling=D,_=D,C=B}if(w===x.length)return t(m,C),en&&ng(m,w),S;if(C===null){for(;w<x.length;w++)C=h(m,x[w],b),C!==null&&(y=i(C,y,w),_===null?S=C:_.sibling=C,_=C);return en&&ng(m,w),S}for(C=n(C);w<x.length;w++)B=A(C,m,w,x[w],b),B!==null&&(r&&B.alternate!==null&&C.delete(B.key===null?w:B.key),y=i(B,y,w),_===null?S=B:_.sibling=B,_=B);return r&&C.forEach(function(T){return e(m,T)}),en&&ng(m,w),S}function p(m,y,x,b){if(x==null)throw Error(tt(151));for(var S=null,_=null,C=y,w=y=0,B=null,D=x.next();C!==null&&!D.done;w++,D=x.next()){C.index>w?(B=C,C=null):B=C.sibling;var T=d(m,C,D.value,b);if(T===null){C===null&&(C=B);break}r&&C&&T.alternate===null&&e(m,C),y=i(T,y,w),_===null?S=T:_.sibling=T,_=T,C=B}if(D.done)return t(m,C),en&&ng(m,w),S;if(C===null){for(;!D.done;w++,D=x.next())D=h(m,D.value,b),D!==null&&(y=i(D,y,w),_===null?S=D:_.sibling=D,_=D);return en&&ng(m,w),S}for(C=n(C);!D.done;w++,D=x.next())D=A(C,m,w,D.value,b),D!==null&&(r&&D.alternate!==null&&C.delete(D.key===null?w:D.key),y=i(D,y,w),_===null?S=D:_.sibling=D,_=D);return r&&C.forEach(function(E){return e(m,E)}),en&&ng(m,w),S}function v(m,y,x,b){if(typeof x=="object"&&x!==null&&x.type===uv&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case B2:e:{for(var S=x.key;y!==null;){if(y.key===S){if(S=x.type,S===uv){if(y.tag===7){t(m,y.sibling),b=a(y,x.props.children),b.return=m,m=b;break e}}else if(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===kd&&$O(S)===y.type){t(m,y.sibling),b=a(y,x.props),Oy(b,x),b.return=m,m=b;break e}t(m,y);break}else e(m,y);y=y.sibling}x.type===uv?(b=Hg(x.props.children,m.mode,b,x.key),b.return=m,m=b):(b=F_(x.type,x.key,x.props,null,m.mode,b),Oy(b,x),b.return=m,m=b)}return s(m);case Px:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){t(m,y.sibling),b=a(y,x.children||[]),b.return=m,m=b;break e}else{t(m,y);break}else e(m,y);y=y.sibling}b=pI(x,m.mode,b),b.return=m,m=b}return s(m);case kd:return S=x._init,x=S(x._payload),v(m,y,x,b)}if(kx(x))return g(m,y,x,b);if(Py(x)){if(S=Py(x),typeof S!="function")throw Error(tt(150));return x=S.call(x),p(m,y,x,b)}if(typeof x.then=="function")return v(m,y,R2(x),b);if(x.$$typeof===Xu)return v(m,y,D2(m,x),b);L2(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,y!==null&&y.tag===6?(t(m,y.sibling),b=a(y,x),b.return=m,m=b):(t(m,y),b=gI(x,m.mode,b),b.return=m,m=b),s(m)):t(m,y)}return function(m,y,x,b){try{sb=0;var S=v(m,y,x,b);return jv=null,S}catch(C){if(C===Aw||C===zB)throw C;var _=co(29,C,null,m.mode);return _.lanes=b,_.return=m,_}finally{}}}var p0=iY(!0),sY=iY(!1),dl=cu(null),Yc=null;function Gd(r){var e=r.alternate;ea(qa,qa.current&1),ea(dl,r),Yc===null&&(e===null||f0.current!==null||e.memoizedState!==null)&&(Yc=r)}function oY(r){if(r.tag===22){if(ea(qa,qa.current),ea(dl,r),Yc===null){var e=r.alternate;e!==null&&e.memoizedState!==null&&(Yc=r)}}else Vd()}function Vd(){ea(qa,qa.current),ea(dl,dl.current)}function th(r){Ai(dl),Yc===r&&(Yc=null),Ai(qa)}var qa=cu(0);function G5(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t3(t)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function yI(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Wn({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var OM={enqueueSetState:function(r,e,t){r=r._reactInternals;var n=vo(),a=mA(n);a.payload=e,t!=null&&(a.callback=t),e=vA(r,a,n),e!==null&&(yo(e,r,n),A1(e,r,n))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=vo(),a=mA(n);a.tag=1,a.payload=e,t!=null&&(a.callback=t),e=vA(r,a,n),e!==null&&(yo(e,r,n),A1(e,r,n))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=vo(),n=mA(t);n.tag=2,e!=null&&(n.callback=e),e=vA(r,n,t),e!==null&&(yo(e,r,t),A1(e,r,t))}};function KO(r,e,t,n,a,i,s){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,i,s):e.prototype&&e.prototype.isPureReactComponent?!nb(t,n)||!nb(a,i):!0}function WO(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&OM.enqueueReplaceState(e,e.state,null)}function fp(r,e){var t=e;if("ref"in e){t={};for(var n in e)n!=="ref"&&(t[n]=e[n])}if(r=r.defaultProps){t===e&&(t=Wn({},t));for(var a in r)t[a]===void 0&&(t[a]=r[a])}return t}var V5=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function lY(r){V5(r)}function cY(r){console.error(r)}function uY(r){V5(r)}function $5(r,e){try{var t=r.onUncaughtError;t(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function qO(r,e,t){try{var n=r.onCaughtError;n(t.value,{componentStack:t.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function UM(r,e,t){return t=mA(t),t.tag=3,t.payload={element:null},t.callback=function(){$5(r,e)},t}function hY(r){return r=mA(r),r.tag=3,r}function dY(r,e,t,n){var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var i=n.value;r.payload=function(){return a(i)},r.callback=function(){qO(e,t,n)}}var s=t.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){qO(e,t,n),typeof a!="function"&&(yA===null?yA=new Set([this]):yA.add(this));var o=n.stack;this.componentDidCatch(n.value,{componentStack:o!==null?o:""})})}function zde(r,e,t,n,a){if(t.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=t.alternate,e!==null&&hw(e,t,a,!0),t=dl.current,t!==null){switch(t.tag){case 13:return Yc===null?WM():t.alternate===null&&ha===0&&(ha=3),t.flags&=-257,t.flags|=65536,t.lanes=a,n===MM?t.flags|=16384:(e=t.updateQueue,e===null?t.updateQueue=new Set([n]):e.add(n),EI(r,n,a)),!1;case 22:return t.flags|=65536,n===MM?t.flags|=16384:(e=t.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},t.updateQueue=e):(t=e.retryQueue,t===null?e.retryQueue=new Set([n]):t.add(n)),EI(r,n,a)),!1}throw Error(tt(435,t.tag))}return EI(r,n,a),WM(),!1}if(en)return e=dl.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=a,n!==NM&&(r=Error(tt(422),{cause:n}),ab(tl(r,t)))):(n!==NM&&(e=Error(tt(423),{cause:n}),ab(tl(e,t))),r=r.current.alternate,r.flags|=65536,a&=-a,r.lanes|=a,n=tl(n,t),a=UM(r.stateNode,n,a),mI(r,a),ha!==4&&(ha=2)),!1;var i=Error(tt(520),{cause:n});if(i=tl(i,t),y1===null?y1=[i]:y1.push(i),ha!==4&&(ha=2),e===null)return!0;n=tl(n,t),t=e;do{switch(t.tag){case 3:return t.flags|=65536,r=a&-a,t.lanes|=r,r=UM(t.stateNode,n,r),mI(t,r),!1;case 1:if(e=t.type,i=t.stateNode,(t.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(yA===null||!yA.has(i))))return t.flags|=65536,a&=-a,t.lanes|=a,a=hY(a),dY(a,r,t,n),mI(t,a),!1}t=t.return}while(t!==null);return!1}var AY=Error(tt(461)),hi=!1;function xi(r,e,t,n){e.child=r===null?sY(e,null,t,n):p0(e,r.child,t,n)}function YO(r,e,t,n,a){t=t.render;var i=e.ref;if("ref"in n){var s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}else s=n;return dp(e),n=FP(r,e,t,s,i,a),o=jP(),r!==null&&!hi?(OP(r,e,a),bh(r,e,a)):(en&&o&&EP(e),e.flags|=1,xi(r,e,n,a),e.child)}function XO(r,e,t,n,a){if(r===null){var i=t.type;return typeof i=="function"&&!IP(i)&&i.defaultProps===void 0&&t.compare===null?(e.tag=15,e.type=i,fY(r,e,i,n,a)):(r=F_(t.type,null,n,e,e.mode,a),r.ref=e.ref,r.return=e,e.child=r)}if(i=r.child,!WP(r,a)){var s=i.memoizedProps;if(t=t.compare,t=t!==null?t:nb,t(s,n)&&r.ref===e.ref)return bh(r,e,a)}return e.flags|=1,r=lh(i,n),r.ref=e.ref,r.return=e,e.child=r}function fY(r,e,t,n,a){if(r!==null){var i=r.memoizedProps;if(nb(i,n)&&r.ref===e.ref)if(hi=!1,e.pendingProps=n=i,WP(r,a))r.flags&131072&&(hi=!0);else return e.lanes=r.lanes,bh(r,e,a)}return HM(r,e,t,n,a)}function gY(r,e,t){var n=e.pendingProps,a=n.children,i=r!==null?r.memoizedState:null;if(n.mode==="hidden"){if(e.flags&128){if(n=i!==null?i.baseLanes|t:t,r!==null){for(a=e.child=r.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;e.childLanes=i&~n}else e.childLanes=0,e.child=null;return ZO(r,e,n,t)}if(t&536870912)e.memoizedState={baseLanes:0,cachePool:null},r!==null&&j_(e,i!==null?i.cachePool:null),i!==null?OO(e,i):PM(),oY(e);else return e.lanes=e.childLanes=536870912,ZO(r,e,i!==null?i.baseLanes|t:t,t)}else i!==null?(j_(e,i.cachePool),OO(e,i),Vd(),e.memoizedState=null):(r!==null&&j_(e,null),PM(),Vd());return xi(r,e,a,t),e.child}function ZO(r,e,t,n){var a=RP();return a=a===null?null:{parent:Ka._currentValue,pool:a},e.memoizedState={baseLanes:t,cachePool:a},r!==null&&j_(e,null),PM(),oY(e),r!==null&&hw(r,e,n,!0),null}function H_(r,e){var t=e.ref;if(t===null)r!==null&&r.ref!==null&&(e.flags|=4194816);else{if(typeof t!="function"&&typeof t!="object")throw Error(tt(284));(r===null||r.ref!==t)&&(e.flags|=4194816)}}function HM(r,e,t,n,a){return dp(e),t=FP(r,e,t,n,void 0,a),n=jP(),r!==null&&!hi?(OP(r,e,a),bh(r,e,a)):(en&&n&&EP(e),e.flags|=1,xi(r,e,t,a),e.child)}function JO(r,e,t,n,a,i){return dp(e),e.updateQueue=null,t=Tq(e,n,t,a),Nq(r),n=jP(),r!==null&&!hi?(OP(r,e,i),bh(r,e,i)):(en&&n&&EP(e),e.flags|=1,xi(r,e,t,i),e.child)}function eU(r,e,t,n,a){if(dp(e),e.stateNode===null){var i=vv,s=t.contextType;typeof s=="object"&&s!==null&&(i=$i(s)),i=new t(n,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=OM,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=n,i.state=e.memoizedState,i.refs={},LP(e),s=t.contextType,i.context=typeof s=="object"&&s!==null?$i(s):vv,i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(yI(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(s=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),s!==i.state&&OM.enqueueReplaceState(i,i.state,null),g1(e,n,i,a),f1(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(r===null){i=e.stateNode;var o=e.memoizedProps,l=fp(t,o);i.props=l;var c=i.context,u=t.contextType;s=vv,typeof u=="object"&&u!==null&&(s=$i(u));var h=t.getDerivedStateFromProps;u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o||c!==s)&&WO(e,i,n,s),Fd=!1;var d=e.memoizedState;i.state=d,g1(e,n,i,a),f1(),c=e.memoizedState,o||d!==c||Fd?(typeof h=="function"&&(yI(e,t,h,n),c=e.memoizedState),(l=Fd||KO(e,t,l,n,d,c,s))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),i.props=n,i.state=c,i.context=s,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,RM(r,e),s=e.memoizedProps,u=fp(t,s),i.props=u,h=e.pendingProps,d=i.context,c=t.contextType,l=vv,typeof c=="object"&&c!==null&&(l=$i(c)),o=t.getDerivedStateFromProps,(c=typeof o=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==h||d!==l)&&WO(e,i,n,l),Fd=!1,d=e.memoizedState,i.state=d,g1(e,n,i,a),f1();var A=e.memoizedState;s!==h||d!==A||Fd||r!==null&&r.dependencies!==null&&O5(r.dependencies)?(typeof o=="function"&&(yI(e,t,o,n),A=e.memoizedState),(u=Fd||KO(e,t,u,n,d,A,l)||r!==null&&r.dependencies!==null&&O5(r.dependencies))?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,A,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,A,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=A),i.props=n,i.state=A,i.context=l,n=u):(typeof i.componentDidUpdate!="function"||s===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return i=n,H_(r,e),n=(e.flags&128)!==0,i||n?(i=e.stateNode,t=n&&typeof t.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,r!==null&&n?(e.child=p0(e,r.child,null,a),e.child=p0(e,null,t,a)):xi(r,e,t,a),e.memoizedState=i.state,r=e.child):r=bh(r,e,a),r}function tU(r,e,t,n){return uw(),e.flags|=256,xi(r,e,t,n),e.child}var xI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bI(r){return{baseLanes:r,cachePool:wq()}}function wI(r,e,t){return r=r!==null?r.childLanes&~t:0,e&&(r|=al),r}function pY(r,e,t){var n=e.pendingProps,a=!1,i=(e.flags&128)!==0,s;if((s=i)||(s=r!==null&&r.memoizedState===null?!1:(qa.current&2)!==0),s&&(a=!0,e.flags&=-129),s=(e.flags&32)!==0,e.flags&=-33,r===null){if(en){if(a?Gd(e):Vd(),en){var o=ua,l;if(l=o){e:{for(l=o,o=kc;l.nodeType!==8;){if(!o){o=null;break e}if(l=Zl(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:Qg!==null?{id:Zu,overflow:Ju}:null,retryLane:536870912,hydrationErrors:null},l=co(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,us=e,ua=null,l=!0):l=!1}l||hp(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return t3(o)?e.lanes=32:e.lanes=536870912,null;th(e)}return o=n.children,n=n.fallback,a?(Vd(),a=e.mode,o=K5({mode:"hidden",children:o},a),n=Hg(n,a,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,a=e.child,a.memoizedState=bI(t),a.childLanes=wI(r,s,t),e.memoizedState=xI,n):(Gd(e),QM(e,o))}if(l=r.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(i)e.flags&256?(Gd(e),e.flags&=-257,e=SI(r,e,t)):e.memoizedState!==null?(Vd(),e.child=r.child,e.flags|=128,e=null):(Vd(),a=n.fallback,o=e.mode,n=K5({mode:"visible",children:n.children},o),a=Hg(a,o,t,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,p0(e,r.child,null,t),n=e.child,n.memoizedState=bI(t),n.childLanes=wI(r,s,t),e.memoizedState=xI,e=a);else if(Gd(e),t3(o)){if(s=o.nextSibling&&o.nextSibling.dataset,s)var c=s.dgst;s=c,n=Error(tt(419)),n.stack="",n.digest=s,ab({value:n,source:null,stack:null}),e=SI(r,e,t)}else if(hi||hw(r,e,t,!1),s=(t&r.childLanes)!==0,hi||s){if(s=zn,s!==null&&(n=t&-t,n=n&42?1:vP(n),n=n&(s.suspendedLanes|t)?0:n,n!==0&&n!==l.retryLane))throw l.retryLane=n,H0(r,n),yo(s,r,n),AY;o.data==="$?"||WM(),e=SI(r,e,t)}else o.data==="$?"?(e.flags|=192,e.child=r.child,e=null):(r=l.treeContext,ua=Zl(o.nextSibling),us=e,en=!0,zg=null,kc=!1,r!==null&&(qo[Yo++]=Zu,qo[Yo++]=Ju,qo[Yo++]=Qg,Zu=r.id,Ju=r.overflow,Qg=e),e=QM(e,n.children),e.flags|=4096);return e}return a?(Vd(),a=n.fallback,o=e.mode,l=r.child,c=l.sibling,n=lh(l,{mode:"hidden",children:n.children}),n.subtreeFlags=l.subtreeFlags&65011712,c!==null?a=lh(c,a):(a=Hg(a,o,t,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=r.child.memoizedState,o===null?o=bI(t):(l=o.cachePool,l!==null?(c=Ka._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=wq(),o={baseLanes:o.baseLanes|t,cachePool:l}),a.memoizedState=o,a.childLanes=wI(r,s,t),e.memoizedState=xI,n):(Gd(e),t=r.child,r=t.sibling,t=lh(t,{mode:"visible",children:n.children}),t.return=e,t.sibling=null,r!==null&&(s=e.deletions,s===null?(e.deletions=[r],e.flags|=16):s.push(r)),e.child=t,e.memoizedState=null,t)}function QM(r,e){return e=K5({mode:"visible",children:e},r.mode),e.return=r,r.child=e}function K5(r,e){return r=co(22,r,null,e),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function SI(r,e,t){return p0(e,r.child,null,t),r=QM(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function rU(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),IM(r.return,e,t)}function _I(r,e,t,n,a){var i=r.memoizedState;i===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:a}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=a)}function mY(r,e,t){var n=e.pendingProps,a=n.revealOrder,i=n.tail;if(xi(r,e,n.children,t),n=qa.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&rU(r,t,e);else if(r.tag===19)rU(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}switch(ea(qa,n),a){case"forwards":for(t=e.child,a=null;t!==null;)r=t.alternate,r!==null&&G5(r)===null&&(a=t),t=t.sibling;t=a,t===null?(a=e.child,e.child=null):(a=t.sibling,t.sibling=null),_I(e,!1,a,t,i);break;case"backwards":for(t=null,a=e.child,e.child=null;a!==null;){if(r=a.alternate,r!==null&&G5(r)===null){e.child=a;break}r=a.sibling,a.sibling=t,t=a,a=r}_I(e,!0,t,null,i);break;case"together":_I(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bh(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),jA|=e.lanes,!(t&e.childLanes))if(r!==null){if(hw(r,e,t,!1),(t&e.childLanes)===0)return null}else return null;if(r!==null&&e.child!==r.child)throw Error(tt(153));if(e.child!==null){for(r=e.child,t=lh(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=lh(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function WP(r,e){return r.lanes&e?!0:(r=r.dependencies,!!(r!==null&&O5(r)))}function Gde(r,e,t){switch(e.tag){case 3:D5(e,e.stateNode.containerInfo),zd(e,Ka,r.memoizedState.cache),uw();break;case 27:case 5:mM(e);break;case 4:D5(e,e.stateNode.containerInfo);break;case 10:zd(e,e.type,e.memoizedProps.value);break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(Gd(e),e.flags|=128,null):t&e.child.childLanes?pY(r,e,t):(Gd(e),r=bh(r,e,t),r!==null?r.sibling:null);Gd(e);break;case 19:var a=(r.flags&128)!==0;if(n=(t&e.childLanes)!==0,n||(hw(r,e,t,!1),n=(t&e.childLanes)!==0),a){if(n)return mY(r,e,t);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ea(qa,qa.current),n)break;return null;case 22:case 23:return e.lanes=0,gY(r,e,t);case 24:zd(e,Ka,r.memoizedState.cache)}return bh(r,e,t)}function vY(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps)hi=!0;else{if(!WP(r,t)&&!(e.flags&128))return hi=!1,Gde(r,e,t);hi=!!(r.flags&131072)}else hi=!1,en&&e.flags&1048576&&xq(e,j5,e.index);switch(e.lanes=0,e.tag){case 16:e:{r=e.pendingProps;var n=e.elementType,a=n._init;if(n=a(n._payload),e.type=n,typeof n=="function")IP(n)?(r=fp(n,r),e.tag=1,e=eU(null,e,n,r,t)):(e.tag=0,e=HM(null,e,n,r,t));else{if(n!=null){if(a=n.$$typeof,a===gP){e.tag=11,e=YO(null,e,n,r,t);break e}else if(a===pP){e.tag=14,e=XO(null,e,n,r,t);break e}}throw e=gM(n)||n,Error(tt(306,e,""))}}return e;case 0:return HM(r,e,e.type,e.pendingProps,t);case 1:return n=e.type,a=fp(n,e.pendingProps),eU(r,e,n,a,t);case 3:e:{if(D5(e,e.stateNode.containerInfo),r===null)throw Error(tt(387));n=e.pendingProps;var i=e.memoizedState;a=i.element,RM(r,e),g1(e,n,null,t);var s=e.memoizedState;if(n=s.cache,zd(e,Ka,n),n!==i.cache&&EM(e,[Ka],t,!0),f1(),n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=tU(r,e,n,t);break e}else if(n!==a){a=tl(Error(tt(424)),e),ab(a),e=tU(r,e,n,t);break e}else{switch(r=e.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ua=Zl(r.firstChild),us=e,en=!0,zg=null,kc=!0,t=sY(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling}else{if(uw(),n===a){e=bh(r,e,t);break e}xi(r,e,n,t)}e=e.child}return e;case 26:return H_(r,e),r===null?(t=yU(e.type,null,e.pendingProps,null))?e.memoizedState=t:en||(t=e.type,r=e.pendingProps,n=eC(pA.current).createElement(t),n[Vi]=e,n[Qs]=r,_i(n,t,r),ui(n),e.stateNode=n):e.memoizedState=yU(e.type,r.memoizedProps,e.pendingProps,r.memoizedState),null;case 27:return mM(e),r===null&&en&&(n=e.stateNode=aX(e.type,e.pendingProps,pA.current),us=e,kc=!0,a=ua,ef(e.type)?(r3=a,ua=Zl(n.firstChild)):ua=a),xi(r,e,e.pendingProps.children,t),H_(r,e),r===null&&(e.flags|=4194304),e.child;case 5:return r===null&&en&&((a=n=ua)&&(n=vAe(n,e.type,e.pendingProps,kc),n!==null?(e.stateNode=n,us=e,ua=Zl(n.firstChild),kc=!1,a=!0):a=!1),a||hp(e)),mM(e),a=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,n=i.children,JM(a,i)?n=null:s!==null&&JM(a,s)&&(e.flags|=32),e.memoizedState!==null&&(a=FP(r,e,kde,null,null,t),ub._currentValue=a),H_(r,e),xi(r,e,n,t),e.child;case 6:return r===null&&en&&((r=t=ua)&&(t=yAe(t,e.pendingProps,kc),t!==null?(e.stateNode=t,us=e,ua=null,r=!0):r=!1),r||hp(e)),null;case 13:return pY(r,e,t);case 4:return D5(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=p0(e,null,n,t):xi(r,e,n,t),e.child;case 11:return YO(r,e,e.type,e.pendingProps,t);case 7:return xi(r,e,e.pendingProps,t),e.child;case 8:return xi(r,e,e.pendingProps.children,t),e.child;case 12:return xi(r,e,e.pendingProps.children,t),e.child;case 10:return n=e.pendingProps,zd(e,e.type,n.value),xi(r,e,n.children,t),e.child;case 9:return a=e.type._context,n=e.pendingProps.children,dp(e),a=$i(a),n=n(a),e.flags|=1,xi(r,e,n,t),e.child;case 14:return XO(r,e,e.type,e.pendingProps,t);case 15:return fY(r,e,e.type,e.pendingProps,t);case 19:return mY(r,e,t);case 31:return n=e.pendingProps,t=e.mode,n={mode:n.mode,children:n.children},r===null?(t=K5(n,t),t.ref=e.ref,e.child=t,t.return=e,e=t):(t=lh(r.child,n),t.ref=e.ref,e.child=t,t.return=e,e=t),e;case 22:return gY(r,e,t);case 24:return dp(e),n=$i(Ka),r===null?(a=RP(),a===null&&(a=zn,i=MP(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=t),a=i),e.memoizedState={parent:n,cache:a},LP(e),zd(e,Ka,a)):(r.lanes&t&&(RM(r,e),g1(e,null,null,t),f1()),a=r.memoizedState,i=e.memoizedState,a.parent!==n?(a={parent:n,cache:n},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),zd(e,Ka,n)):(n=i.cache,zd(e,Ka,n),n!==a.cache&&EM(e,[Ka],t,!0))),xi(r,e,e.pendingProps.children,t),e.child;case 29:throw e.pendingProps}throw Error(tt(156,e.tag))}function Pu(r){r.flags|=4}function nU(r,e){if(e.type!=="stylesheet"||e.state.loading&4)r.flags&=-16777217;else if(r.flags|=16777216,!oX(e)){if(e=dl.current,e!==null&&(($r&4194048)===$r?Yc!==null:($r&62914560)!==$r&&!($r&536870912)||e!==Yc))throw d1=MM,Sq;r.flags|=8192}}function P2(r,e){e!==null&&(r.flags|=4),r.flags&16384&&(e=r.tag!==22?GW():536870912,r.lanes|=e,m0|=e)}function Uy(r,e){if(!en)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function ra(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var a=r.child;a!==null;)t|=a.lanes|a.childLanes,n|=a.subtreeFlags&65011712,n|=a.flags&65011712,a.return=r,a=a.sibling;else for(a=r.child;a!==null;)t|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=r,a=a.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function Vde(r,e,t){var n=e.pendingProps;switch(DP(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ra(e),null;case 1:return ra(e),null;case 3:return t=e.stateNode,n=null,r!==null&&(n=r.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),ch(Ka),u0(),t.pendingContext&&(t.context=t.pendingContext,t.pendingContext=null),(r===null||r.child===null)&&(jy(e)?Pu(e):r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,RO())),ra(e),null;case 26:return t=e.memoizedState,r===null?(Pu(e),t!==null?(ra(e),nU(e,t)):(ra(e),e.flags&=-16777217)):t?t!==r.memoizedState?(Pu(e),ra(e),nU(e,t)):(ra(e),e.flags&=-16777217):(r.memoizedProps!==n&&Pu(e),ra(e),e.flags&=-16777217),null;case 27:M5(e),t=pA.current;var a=e.type;if(r!==null&&e.stateNode!=null)r.memoizedProps!==n&&Pu(e);else{if(!n){if(e.stateNode===null)throw Error(tt(166));return ra(e),null}r=Wc.current,jy(e)?DO(e):(r=aX(a,n,t),e.stateNode=r,Pu(e))}return ra(e),null;case 5:if(M5(e),t=e.type,r!==null&&e.stateNode!=null)r.memoizedProps!==n&&Pu(e);else{if(!n){if(e.stateNode===null)throw Error(tt(166));return ra(e),null}if(r=Wc.current,jy(e))DO(e);else{switch(a=eC(pA.current),r){case 1:r=a.createElementNS("http://www.w3.org/2000/svg",t);break;case 2:r=a.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;default:switch(t){case"svg":r=a.createElementNS("http://www.w3.org/2000/svg",t);break;case"math":r=a.createElementNS("http://www.w3.org/1998/Math/MathML",t);break;case"script":r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof n.is=="string"?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?r.multiple=!0:n.size&&(r.size=n.size);break;default:r=typeof n.is=="string"?a.createElement(t,{is:n.is}):a.createElement(t)}}r[Vi]=e,r[Qs]=n;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=r;e:switch(_i(r,t,n),t){case"button":case"input":case"select":case"textarea":r=!!n.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Pu(e)}}return ra(e),e.flags&=-16777217,null;case 6:if(r&&e.stateNode!=null)r.memoizedProps!==n&&Pu(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(tt(166));if(r=pA.current,jy(e)){if(r=e.stateNode,t=e.memoizedProps,n=null,a=us,a!==null)switch(a.tag){case 27:case 5:n=a.memoizedProps}r[Vi]=e,r=!!(r.nodeValue===t||n!==null&&n.suppressHydrationWarning===!0||tX(r.nodeValue,t)),r||hp(e)}else r=eC(r).createTextNode(n),r[Vi]=e,e.stateNode=r}return ra(e),null;case 13:if(n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(a=jy(e),n!==null&&n.dehydrated!==null){if(r===null){if(!a)throw Error(tt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(tt(317));a[Vi]=e}else uw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ra(e),a=!1}else a=RO(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(th(e),e):(th(e),null)}if(th(e),e.flags&128)return e.lanes=t,e;if(t=n!==null,r=r!==null&&r.memoizedState!==null,t){n=e.child,a=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(a=n.alternate.memoizedState.cachePool.pool);var i=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==a&&(n.flags|=2048)}return t!==r&&t&&(e.child.flags|=8192),P2(e,e.updateQueue),ra(e),null;case 4:return u0(),r===null&&rk(e.stateNode.containerInfo),ra(e),null;case 10:return ch(e.type),ra(e),null;case 19:if(Ai(qa),a=e.memoizedState,a===null)return ra(e),null;if(n=(e.flags&128)!==0,i=a.rendering,i===null)if(n)Uy(a,!1);else{if(ha!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(i=G5(r),i!==null){for(e.flags|=128,Uy(a,!1),r=i.updateQueue,e.updateQueue=r,P2(e,r),e.subtreeFlags=0,r=t,t=e.child;t!==null;)yq(t,r),t=t.sibling;return ea(qa,qa.current&1|2),e.child}r=r.sibling}a.tail!==null&&qc()>q5&&(e.flags|=128,n=!0,Uy(a,!1),e.lanes=4194304)}else{if(!n)if(r=G5(i),r!==null){if(e.flags|=128,n=!0,r=r.updateQueue,e.updateQueue=r,P2(e,r),Uy(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!en)return ra(e),null}else 2*qc()-a.renderingStartTime>q5&&t!==536870912&&(e.flags|=128,n=!0,Uy(a,!1),e.lanes=4194304);a.isBackwards?(i.sibling=e.child,e.child=i):(r=a.last,r!==null?r.sibling=i:e.child=i,a.last=i)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=qc(),e.sibling=null,r=qa.current,ea(qa,n?r&1|2:r&1),e):(ra(e),null);case 22:case 23:return th(e),PP(),n=e.memoizedState!==null,r!==null?r.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?t&536870912&&!(e.flags&128)&&(ra(e),e.subtreeFlags&6&&(e.flags|=8192)):ra(e),t=e.updateQueue,t!==null&&P2(e,t.retryQueue),t=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==t&&(e.flags|=2048),r!==null&&Ai(Gg),null;case 24:return t=null,r!==null&&(t=r.memoizedState.cache),e.memoizedState.cache!==t&&(e.flags|=2048),ch(Ka),ra(e),null;case 25:return null;case 30:return null}throw Error(tt(156,e.tag))}function $de(r,e){switch(DP(e),e.tag){case 1:return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return ch(Ka),u0(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 26:case 27:case 5:return M5(e),null;case 13:if(th(e),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(tt(340));uw()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Ai(qa),null;case 4:return u0(),null;case 10:return ch(e.type),null;case 22:case 23:return th(e),PP(),r!==null&&Ai(Gg),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 24:return ch(Ka),null;case 25:return null;default:return null}}function yY(r,e){switch(DP(e),e.tag){case 3:ch(Ka),u0();break;case 26:case 27:case 5:M5(e);break;case 4:u0();break;case 13:th(e);break;case 19:Ai(qa);break;case 10:ch(e.type);break;case 22:case 23:th(e),PP(),r!==null&&Ai(Gg);break;case 24:ch(Ka)}}function pw(r,e){try{var t=e.updateQueue,n=t!==null?t.lastEffect:null;if(n!==null){var a=n.next;t=a;do{if((t.tag&r)===r){n=void 0;var i=t.create,s=t.inst;n=i(),s.destroy=n}t=t.next}while(t!==a)}}catch(o){Fn(e,e.return,o)}}function FA(r,e,t){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&r)===r){var s=n.inst,o=s.destroy;if(o!==void 0){s.destroy=void 0,a=e;var l=t,c=o;try{c()}catch(u){Fn(a,l,u)}}}n=n.next}while(n!==i)}}catch(u){Fn(e,e.return,u)}}function xY(r){var e=r.updateQueue;if(e!==null){var t=r.stateNode;try{Bq(e,t)}catch(n){Fn(r,r.return,n)}}}function bY(r,e,t){t.props=fp(r.type,r.memoizedProps),t.state=r.memoizedState;try{t.componentWillUnmount()}catch(n){Fn(r,e,n)}}function m1(r,e){try{var t=r.ref;if(t!==null){switch(r.tag){case 26:case 27:case 5:var n=r.stateNode;break;case 30:n=r.stateNode;break;default:n=r.stateNode}typeof t=="function"?r.refCleanup=t(n):t.current=n}}catch(a){Fn(r,e,a)}}function Hc(r,e){var t=r.ref,n=r.refCleanup;if(t!==null)if(typeof n=="function")try{n()}catch(a){Fn(r,e,a)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof t=="function")try{t(null)}catch(a){Fn(r,e,a)}else t.current=null}function wY(r){var e=r.type,t=r.memoizedProps,n=r.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":t.autoFocus&&n.focus();break e;case"img":t.src?n.src=t.src:t.srcSet&&(n.srcset=t.srcSet)}}catch(a){Fn(r,r.return,a)}}function CI(r,e,t){try{var n=r.stateNode;AAe(n,r.type,t,e),n[Qs]=e}catch(a){Fn(r,r.return,a)}}function SY(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ef(r.type)||r.tag===4}function BI(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||SY(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ef(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function zM(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t).insertBefore(r,e):(e=t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,e.appendChild(r),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=YB));else if(n!==4&&(n===27&&ef(r.type)&&(t=r.stateNode,e=null),r=r.child,r!==null))for(zM(r,e,t),r=r.sibling;r!==null;)zM(r,e,t),r=r.sibling}function W5(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(n===27&&ef(r.type)&&(t=r.stateNode),r=r.child,r!==null))for(W5(r,e,t),r=r.sibling;r!==null;)W5(r,e,t),r=r.sibling}function _Y(r){var e=r.stateNode,t=r.memoizedProps;try{for(var n=r.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);_i(e,n,t),e[Vi]=r,e[Qs]=t}catch(i){Fn(r,r.return,i)}}var Wu=!1,wa=!1,NI=!1,aU=typeof WeakSet=="function"?WeakSet:Set,oi=null;function Kde(r,e){if(r=r.containerInfo,XM=aC,r=hq(r),BP(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var s=0,o=-1,l=-1,c=0,u=0,h=r,d=null;t:for(;;){for(var A;h!==t||a!==0&&h.nodeType!==3||(o=s+a),h!==i||n!==0&&h.nodeType!==3||(l=s+n),h.nodeType===3&&(s+=h.nodeValue.length),(A=h.firstChild)!==null;)d=h,h=A;for(;;){if(h===r)break t;if(d===t&&++c===a&&(o=s),d===i&&++u===n&&(l=s),(A=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=A}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(ZM={focusedElem:r,selectionRange:t},aC=!1,oi=e;oi!==null;)if(e=oi,r=e.child,(e.subtreeFlags&1024)!==0&&r!==null)r.return=e,oi=r;else for(;oi!==null;){switch(e=oi,i=e.alternate,r=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(r&1024&&i!==null){r=void 0,t=e,a=i.memoizedProps,i=i.memoizedState,n=t.stateNode;try{var g=fp(t.type,a,t.elementType===t.type);r=n.getSnapshotBeforeUpdate(g,i),n.__reactInternalSnapshotBeforeUpdate=r}catch(p){Fn(t,t.return,p)}}break;case 3:if(r&1024){if(r=e.stateNode.containerInfo,t=r.nodeType,t===9)e3(r);else if(t===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":e3(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(r&1024)throw Error(tt(163))}if(r=e.sibling,r!==null){r.return=e.return,oi=r;break}oi=e.return}}function CY(r,e,t){var n=t.flags;switch(t.tag){case 0:case 11:case 15:pd(r,t),n&4&&pw(5,t);break;case 1:if(pd(r,t),n&4)if(r=t.stateNode,e===null)try{r.componentDidMount()}catch(s){Fn(t,t.return,s)}else{var a=fp(t.type,e.memoizedProps);e=e.memoizedState;try{r.componentDidUpdate(a,e,r.__reactInternalSnapshotBeforeUpdate)}catch(s){Fn(t,t.return,s)}}n&64&&xY(t),n&512&&m1(t,t.return);break;case 3:if(pd(r,t),n&64&&(r=t.updateQueue,r!==null)){if(e=null,t.child!==null)switch(t.child.tag){case 27:case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}try{Bq(r,e)}catch(s){Fn(t,t.return,s)}}break;case 27:e===null&&n&4&&_Y(t);case 26:case 5:pd(r,t),e===null&&n&4&&wY(t),n&512&&m1(t,t.return);break;case 12:pd(r,t);break;case 13:pd(r,t),n&4&&TY(r,t),n&64&&(r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(t=rAe.bind(null,t),xAe(r,t))));break;case 22:if(n=t.memoizedState!==null||Wu,!n){e=e!==null&&e.memoizedState!==null||wa,a=Wu;var i=wa;Wu=n,(wa=e)&&!i?Dd(r,t,(t.subtreeFlags&8772)!==0):pd(r,t),Wu=a,wa=i}break;case 30:break;default:pd(r,t)}}function BY(r){var e=r.alternate;e!==null&&(r.alternate=null,BY(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&xP(e)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Zn=null,Ds=!1;function ku(r,e,t){for(t=t.child;t!==null;)NY(r,e,t),t=t.sibling}function NY(r,e,t){if(po&&typeof po.onCommitFiberUnmount=="function")try{po.onCommitFiberUnmount(iw,t)}catch{}switch(t.tag){case 26:wa||Hc(t,e),ku(r,e,t),t.memoizedState?t.memoizedState.count--:t.stateNode&&(t=t.stateNode,t.parentNode.removeChild(t));break;case 27:wa||Hc(t,e);var n=Zn,a=Ds;ef(t.type)&&(Zn=t.stateNode,Ds=!1),ku(r,e,t),b1(t.stateNode),Zn=n,Ds=a;break;case 5:wa||Hc(t,e);case 6:if(n=Zn,a=Ds,Zn=null,ku(r,e,t),Zn=n,Ds=a,Zn!==null)if(Ds)try{(Zn.nodeType===9?Zn.body:Zn.nodeName==="HTML"?Zn.ownerDocument.body:Zn).removeChild(t.stateNode)}catch(i){Fn(t,e,i)}else try{Zn.removeChild(t.stateNode)}catch(i){Fn(t,e,i)}break;case 18:Zn!==null&&(Ds?(r=Zn,pU(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.stateNode),Ab(r)):pU(Zn,t.stateNode));break;case 4:n=Zn,a=Ds,Zn=t.stateNode.containerInfo,Ds=!0,ku(r,e,t),Zn=n,Ds=a;break;case 0:case 11:case 14:case 15:wa||FA(2,t,e),wa||FA(4,t,e),ku(r,e,t);break;case 1:wa||(Hc(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"&&bY(t,e,n)),ku(r,e,t);break;case 21:ku(r,e,t);break;case 22:wa=(n=wa)||t.memoizedState!==null,ku(r,e,t),wa=n;break;default:ku(r,e,t)}}function TY(r,e){if(e.memoizedState===null&&(r=e.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ab(r)}catch(t){Fn(e,e.return,t)}}function Wde(r){switch(r.tag){case 13:case 19:var e=r.stateNode;return e===null&&(e=r.stateNode=new aU),e;case 22:return r=r.stateNode,e=r._retryCache,e===null&&(e=r._retryCache=new aU),e;default:throw Error(tt(435,r.tag))}}function TI(r,e){var t=Wde(r);e.forEach(function(n){var a=nAe.bind(null,r,n);t.has(n)||(t.add(n),n.then(a,a))})}function Js(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var a=t[n],i=r,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 27:if(ef(o.type)){Zn=o.stateNode,Ds=!1;break e}break;case 5:Zn=o.stateNode,Ds=!1;break e;case 3:case 4:Zn=o.stateNode.containerInfo,Ds=!0;break e}o=o.return}if(Zn===null)throw Error(tt(160));NY(i,s,a),Zn=null,Ds=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)IY(e,r),e=e.sibling}var Ql=null;function IY(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Js(e,r),eo(r),n&4&&(FA(3,r,r.return),pw(3,r),FA(5,r,r.return));break;case 1:Js(e,r),eo(r),n&512&&(wa||t===null||Hc(t,t.return)),n&64&&Wu&&(r=r.updateQueue,r!==null&&(n=r.callbacks,n!==null&&(t=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=t===null?n:t.concat(n))));break;case 26:var a=Ql;if(Js(e,r),eo(r),n&512&&(wa||t===null||Hc(t,t.return)),n&4){var i=t!==null?t.memoizedState:null;if(n=r.memoizedState,t===null)if(n===null)if(r.stateNode===null){e:{n=r.type,t=r.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":i=a.getElementsByTagName("title")[0],(!i||i[lw]||i[Vi]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(n),a.head.insertBefore(i,a.querySelector("head > title"))),_i(i,n,t),i[Vi]=r,ui(i),n=i;break e;case"link":var s=bU("link","href",a).get(n+(t.href||""));if(s){for(var o=0;o<s.length;o++)if(i=s[o],i.getAttribute("href")===(t.href==null||t.href===""?null:t.href)&&i.getAttribute("rel")===(t.rel==null?null:t.rel)&&i.getAttribute("title")===(t.title==null?null:t.title)&&i.getAttribute("crossorigin")===(t.crossOrigin==null?null:t.crossOrigin)){s.splice(o,1);break t}}i=a.createElement(n),_i(i,n,t),a.head.appendChild(i);break;case"meta":if(s=bU("meta","content",a).get(n+(t.content||""))){for(o=0;o<s.length;o++)if(i=s[o],i.getAttribute("content")===(t.content==null?null:""+t.content)&&i.getAttribute("name")===(t.name==null?null:t.name)&&i.getAttribute("property")===(t.property==null?null:t.property)&&i.getAttribute("http-equiv")===(t.httpEquiv==null?null:t.httpEquiv)&&i.getAttribute("charset")===(t.charSet==null?null:t.charSet)){s.splice(o,1);break t}}i=a.createElement(n),_i(i,n,t),a.head.appendChild(i);break;default:throw Error(tt(468,n))}i[Vi]=r,ui(i),n=i}r.stateNode=n}else wU(a,r.type,r.stateNode);else r.stateNode=xU(a,n,r.memoizedProps);else i!==n?(i===null?t.stateNode!==null&&(t=t.stateNode,t.parentNode.removeChild(t)):i.count--,n===null?wU(a,r.type,r.stateNode):xU(a,n,r.memoizedProps)):n===null&&r.stateNode!==null&&CI(r,r.memoizedProps,t.memoizedProps)}break;case 27:Js(e,r),eo(r),n&512&&(wa||t===null||Hc(t,t.return)),t!==null&&n&4&&CI(r,r.memoizedProps,t.memoizedProps);break;case 5:if(Js(e,r),eo(r),n&512&&(wa||t===null||Hc(t,t.return)),r.flags&32){a=r.stateNode;try{d0(a,"")}catch(A){Fn(r,r.return,A)}}n&4&&r.stateNode!=null&&(a=r.memoizedProps,CI(r,a,t!==null?t.memoizedProps:a)),n&1024&&(NI=!0);break;case 6:if(Js(e,r),eo(r),n&4){if(r.stateNode===null)throw Error(tt(162));n=r.memoizedProps,t=r.stateNode;try{t.nodeValue=n}catch(A){Fn(r,r.return,A)}}break;case 3:if(G_=null,a=Ql,Ql=tC(e.containerInfo),Js(e,r),Ql=a,eo(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Ab(e.containerInfo)}catch(A){Fn(r,r.return,A)}NI&&(NI=!1,EY(r));break;case 4:n=Ql,Ql=tC(r.stateNode.containerInfo),Js(e,r),eo(r),Ql=n;break;case 12:Js(e,r),eo(r);break;case 13:Js(e,r),eo(r),r.child.flags&8192&&r.memoizedState!==null!=(t!==null&&t.memoizedState!==null)&&(JP=qc()),n&4&&(n=r.updateQueue,n!==null&&(r.updateQueue=null,TI(r,n)));break;case 22:a=r.memoizedState!==null;var l=t!==null&&t.memoizedState!==null,c=Wu,u=wa;if(Wu=c||a,wa=u||l,Js(e,r),wa=u,Wu=c,eo(r),n&8192)e:for(e=r.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(t===null||l||Wu||wa||ag(r)),t=null,e=r;;){if(e.tag===5||e.tag===26){if(t===null){l=t=e;try{if(i=l.stateNode,a)s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=l.stateNode;var h=l.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null;o.style.display=d==null||typeof d=="boolean"?"":(""+d).trim()}}catch(A){Fn(l,l.return,A)}}}else if(e.tag===6){if(t===null){l=e;try{l.stateNode.nodeValue=a?"":l.memoizedProps}catch(A){Fn(l,l.return,A)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===r)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;t===e&&(t=null),e=e.return}t===e&&(t=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=r.updateQueue,n!==null&&(t=n.retryQueue,t!==null&&(n.retryQueue=null,TI(r,t))));break;case 19:Js(e,r),eo(r),n&4&&(n=r.updateQueue,n!==null&&(r.updateQueue=null,TI(r,n)));break;case 30:break;case 21:break;default:Js(e,r),eo(r)}}function eo(r){var e=r.flags;if(e&2){try{for(var t,n=r.return;n!==null;){if(SY(n)){t=n;break}n=n.return}if(t==null)throw Error(tt(160));switch(t.tag){case 27:var a=t.stateNode,i=BI(r);W5(r,i,a);break;case 5:var s=t.stateNode;t.flags&32&&(d0(s,""),t.flags&=-33);var o=BI(r);W5(r,o,s);break;case 3:case 4:var l=t.stateNode.containerInfo,c=BI(r);zM(r,c,l);break;default:throw Error(tt(161))}}catch(u){Fn(r,r.return,u)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function EY(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var e=r;EY(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),r=r.sibling}}function pd(r,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)CY(r,e.alternate,e),e=e.sibling}function ag(r){for(r=r.child;r!==null;){var e=r;switch(e.tag){case 0:case 11:case 14:case 15:FA(4,e,e.return),ag(e);break;case 1:Hc(e,e.return);var t=e.stateNode;typeof t.componentWillUnmount=="function"&&bY(e,e.return,t),ag(e);break;case 27:b1(e.stateNode);case 26:case 5:Hc(e,e.return),ag(e);break;case 22:e.memoizedState===null&&ag(e);break;case 30:ag(e);break;default:ag(e)}r=r.sibling}}function Dd(r,e,t){for(t=t&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,a=r,i=e,s=i.flags;switch(i.tag){case 0:case 11:case 15:Dd(a,i,t),pw(4,i);break;case 1:if(Dd(a,i,t),n=i,a=n.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(c){Fn(n,n.return,c)}if(n=i,a=n.updateQueue,a!==null){var o=n.stateNode;try{var l=a.shared.hiddenCallbacks;if(l!==null)for(a.shared.hiddenCallbacks=null,a=0;a<l.length;a++)Cq(l[a],o)}catch(c){Fn(n,n.return,c)}}t&&s&64&&xY(i),m1(i,i.return);break;case 27:_Y(i);case 26:case 5:Dd(a,i,t),t&&n===null&&s&4&&wY(i),m1(i,i.return);break;case 12:Dd(a,i,t);break;case 13:Dd(a,i,t),t&&s&4&&TY(a,i);break;case 22:i.memoizedState===null&&Dd(a,i,t),m1(i,i.return);break;case 30:break;default:Dd(a,i,t)}e=e.sibling}}function qP(r,e){var t=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==t&&(r!=null&&r.refCount++,t!=null&&dw(t))}function YP(r,e){r=null,e.alternate!==null&&(r=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==r&&(e.refCount++,r!=null&&dw(r))}function xc(r,e,t,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)DY(r,e,t,n),e=e.sibling}function DY(r,e,t,n){var a=e.flags;switch(e.tag){case 0:case 11:case 15:xc(r,e,t,n),a&2048&&pw(9,e);break;case 1:xc(r,e,t,n);break;case 3:xc(r,e,t,n),a&2048&&(r=null,e.alternate!==null&&(r=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==r&&(e.refCount++,r!=null&&dw(r)));break;case 12:if(a&2048){xc(r,e,t,n),r=e.stateNode;try{var i=e.memoizedProps,s=i.id,o=i.onPostCommit;typeof o=="function"&&o(s,e.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(l){Fn(e,e.return,l)}}else xc(r,e,t,n);break;case 13:xc(r,e,t,n);break;case 23:break;case 22:i=e.stateNode,s=e.alternate,e.memoizedState!==null?i._visibility&2?xc(r,e,t,n):v1(r,e):i._visibility&2?xc(r,e,t,n):(i._visibility|=2,Zm(r,e,t,n,(e.subtreeFlags&10256)!==0)),a&2048&&qP(s,e);break;case 24:xc(r,e,t,n),a&2048&&YP(e.alternate,e);break;default:xc(r,e,t,n)}}function Zm(r,e,t,n,a){for(a=a&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var i=r,s=e,o=t,l=n,c=s.flags;switch(s.tag){case 0:case 11:case 15:Zm(i,s,o,l,a),pw(8,s);break;case 23:break;case 22:var u=s.stateNode;s.memoizedState!==null?u._visibility&2?Zm(i,s,o,l,a):v1(i,s):(u._visibility|=2,Zm(i,s,o,l,a)),a&&c&2048&&qP(s.alternate,s);break;case 24:Zm(i,s,o,l,a),a&&c&2048&&YP(s.alternate,s);break;default:Zm(i,s,o,l,a)}e=e.sibling}}function v1(r,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var t=r,n=e,a=n.flags;switch(n.tag){case 22:v1(t,n),a&2048&&qP(n.alternate,n);break;case 24:v1(t,n),a&2048&&YP(n.alternate,n);break;default:v1(t,n)}e=e.sibling}}var jx=8192;function mm(r){if(r.subtreeFlags&jx)for(r=r.child;r!==null;)MY(r),r=r.sibling}function MY(r){switch(r.tag){case 26:mm(r),r.flags&jx&&r.memoizedState!==null&&RAe(Ql,r.memoizedState,r.memoizedProps);break;case 5:mm(r);break;case 3:case 4:var e=Ql;Ql=tC(r.stateNode.containerInfo),mm(r),Ql=e;break;case 22:r.memoizedState===null&&(e=r.alternate,e!==null&&e.memoizedState!==null?(e=jx,jx=16777216,mm(r),jx=e):mm(r));break;default:mm(r)}}function RY(r){var e=r.alternate;if(e!==null&&(r=e.child,r!==null)){e.child=null;do e=r.sibling,r.sibling=null,r=e;while(r!==null)}}function Hy(r){var e=r.deletions;if(r.flags&16){if(e!==null)for(var t=0;t<e.length;t++){var n=e[t];oi=n,PY(n,r)}RY(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)LY(r),r=r.sibling}function LY(r){switch(r.tag){case 0:case 11:case 15:Hy(r),r.flags&2048&&FA(9,r,r.return);break;case 3:Hy(r);break;case 12:Hy(r);break;case 22:var e=r.stateNode;r.memoizedState!==null&&e._visibility&2&&(r.return===null||r.return.tag!==13)?(e._visibility&=-3,Q_(r)):Hy(r);break;default:Hy(r)}}function Q_(r){var e=r.deletions;if(r.flags&16){if(e!==null)for(var t=0;t<e.length;t++){var n=e[t];oi=n,PY(n,r)}RY(r)}for(r=r.child;r!==null;){switch(e=r,e.tag){case 0:case 11:case 15:FA(8,e,e.return),Q_(e);break;case 22:t=e.stateNode,t._visibility&2&&(t._visibility&=-3,Q_(e));break;default:Q_(e)}r=r.sibling}}function PY(r,e){for(;oi!==null;){var t=oi;switch(t.tag){case 0:case 11:case 15:FA(8,t,e);break;case 23:case 22:if(t.memoizedState!==null&&t.memoizedState.cachePool!==null){var n=t.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:dw(t.memoizedState.cache)}if(n=t.child,n!==null)n.return=t,oi=n;else e:for(t=r;oi!==null;){n=oi;var a=n.sibling,i=n.return;if(BY(n),n===t){oi=null;break e}if(a!==null){a.return=i,oi=a;break e}oi=i}}}var qde={getCacheForType:function(r){var e=$i(Ka),t=e.data.get(r);return t===void 0&&(t=r(),e.data.set(r,t)),t}},Yde=typeof WeakMap=="function"?WeakMap:Map,xn=0,zn=null,Lr=null,$r=0,mn=0,ao=null,Jd=!1,Q0=!1,XP=!1,wh=0,ha=0,jA=0,Vg=0,ZP=0,al=0,m0=0,y1=null,Ms=null,GM=!1,JP=0,q5=1/0,Y5=null,yA=null,wi=0,xA=null,v0=null,Ov=0,VM=0,$M=null,kY=null,x1=0,KM=null;function vo(){if(xn&2&&$r!==0)return $r&-$r;if(ur.T!==null){var r=A0;return r!==0?r:tk()}return KW()}function FY(){al===0&&(al=!($r&536870912)||en?zW():536870912);var r=dl.current;return r!==null&&(r.flags|=32),al}function yo(r,e,t){(r===zn&&(mn===2||mn===9)||r.cancelPendingCommit!==null)&&(y0(r,0),eA(r,$r,al,!1)),ow(r,t),(!(xn&2)||r!==zn)&&(r===zn&&(!(xn&2)&&(Vg|=t),ha===4&&eA(r,$r,al,!1)),uu(r))}function jY(r,e,t){if(xn&6)throw Error(tt(327));var n=!t&&(e&124)===0&&(e&r.expiredLanes)===0||sw(r,e),a=n?Jde(r,e):II(r,e,!0),i=n;do{if(a===0){Q0&&!n&&eA(r,e,0,!1);break}else{if(t=r.current.alternate,i&&!Xde(t)){a=II(r,e,!1),i=!1;continue}if(a===2){if(i=e,r.errorRecoveryDisabledLanes&i)var s=0;else s=r.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){e=s;e:{var o=r;a=y1;var l=o.current.memoizedState.isDehydrated;if(l&&(y0(o,s).flags|=256),s=II(o,s,!1),s!==2){if(XP&&!l){o.errorRecoveryDisabledLanes|=i,Vg|=i,a=4;break e}i=Ms,Ms=a,i!==null&&(Ms===null?Ms=i:Ms.push.apply(Ms,i))}a=s}if(i=!1,a!==2)continue}}if(a===1){y0(r,0),eA(r,e,0,!0);break}e:{switch(n=r,i=a,i){case 0:case 1:throw Error(tt(345));case 4:if((e&4194048)!==e)break;case 6:eA(n,e,al,!Jd);break e;case 2:Ms=null;break;case 3:case 5:break;default:throw Error(tt(329))}if((e&62914560)===e&&(a=JP+300-qc(),10<a)){if(eA(n,e,al,!Jd),FB(n,0,!0)!==0)break e;n.timeoutHandle=nX(iU.bind(null,n,t,Ms,Y5,GM,e,al,Vg,m0,Jd,i,2,-0,0),a);break e}iU(n,t,Ms,Y5,GM,e,al,Vg,m0,Jd,i,0,-0,0)}}break}while(!0);uu(r)}function iU(r,e,t,n,a,i,s,o,l,c,u,h,d,A){if(r.timeoutHandle=-1,h=e.subtreeFlags,(h&8192||(h&16785408)===16785408)&&(cb={stylesheets:null,count:0,unsuspend:MAe},MY(e),h=LAe(),h!==null)){r.cancelPendingCommit=h(oU.bind(null,r,e,i,t,n,a,s,o,l,u,1,d,A)),eA(r,i,s,!c);return}oU(r,e,i,t,n,a,s,o,l)}function Xde(r){for(var e=r;;){var t=e.tag;if((t===0||t===11||t===15)&&e.flags&16384&&(t=e.updateQueue,t!==null&&(t=t.stores,t!==null)))for(var n=0;n<t.length;n++){var a=t[n],i=a.getSnapshot;a=a.value;try{if(!Bo(i(),a))return!1}catch{return!1}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function eA(r,e,t,n){e&=~ZP,e&=~Vg,r.suspendedLanes|=e,r.pingedLanes&=~e,n&&(r.warmLanes|=e),n=r.expirationTimes;for(var a=e;0<a;){var i=31-mo(a),s=1<<i;n[i]=-1,a&=~s}t!==0&&VW(r,t,e)}function KB(){return xn&6?!0:(mw(0),!1)}function ek(){if(Lr!==null){if(mn===0)var r=Lr.return;else r=Lr,eh=Lp=null,UP(r),jv=null,sb=0,r=Lr;for(;r!==null;)yY(r.alternate,r),r=r.return;Lr=null}}function y0(r,e){var t=r.timeoutHandle;t!==-1&&(r.timeoutHandle=-1,gAe(t)),t=r.cancelPendingCommit,t!==null&&(r.cancelPendingCommit=null,t()),ek(),zn=r,Lr=t=lh(r.current,null),$r=e,mn=0,ao=null,Jd=!1,Q0=sw(r,e),XP=!1,m0=al=ZP=Vg=jA=ha=0,Ms=y1=null,GM=!1,e&8&&(e|=e&32);var n=r.entangledLanes;if(n!==0)for(r=r.entanglements,n&=e;0<n;){var a=31-mo(n),i=1<<a;e|=r[a],n&=~i}return wh=e,HB(),t}function OY(r,e){Ir=null,ur.H=z5,e===Aw||e===zB?(e=FO(),mn=3):e===Sq?(e=FO(),mn=4):mn=e===AY?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,ao=e,Lr===null&&(ha=1,$5(r,tl(e,r.current)))}function UY(){var r=ur.H;return ur.H=z5,r===null?z5:r}function HY(){var r=ur.A;return ur.A=qde,r}function WM(){ha=4,Jd||($r&4194048)!==$r&&dl.current!==null||(Q0=!0),!(jA&134217727)&&!(Vg&134217727)||zn===null||eA(zn,$r,al,!1)}function II(r,e,t){var n=xn;xn|=2;var a=UY(),i=HY();(zn!==r||$r!==e)&&(Y5=null,y0(r,e)),e=!1;var s=ha;e:do try{if(mn!==0&&Lr!==null){var o=Lr,l=ao;switch(mn){case 8:ek(),s=6;break e;case 3:case 2:case 9:case 6:dl.current===null&&(e=!0);var c=mn;if(mn=0,ao=null,bv(r,o,l,c),t&&Q0){s=0;break e}break;default:c=mn,mn=0,ao=null,bv(r,o,l,c)}}Zde(),s=ha;break}catch(u){OY(r,u)}while(!0);return e&&r.shellSuspendCounter++,eh=Lp=null,xn=n,ur.H=a,ur.A=i,Lr===null&&(zn=null,$r=0,HB()),s}function Zde(){for(;Lr!==null;)QY(Lr)}function Jde(r,e){var t=xn;xn|=2;var n=UY(),a=HY();zn!==r||$r!==e?(Y5=null,q5=qc()+500,y0(r,e)):Q0=sw(r,e);e:do try{if(mn!==0&&Lr!==null){e=Lr;var i=ao;t:switch(mn){case 1:mn=0,ao=null,bv(r,e,i,1);break;case 2:case 9:if(kO(i)){mn=0,ao=null,sU(e);break}e=function(){mn!==2&&mn!==9||zn!==r||(mn=7),uu(r)},i.then(e,e);break e;case 3:mn=7;break e;case 4:mn=5;break e;case 7:kO(i)?(mn=0,ao=null,sU(e)):(mn=0,ao=null,bv(r,e,i,7));break;case 5:var s=null;switch(Lr.tag){case 26:s=Lr.memoizedState;case 5:case 27:var o=Lr;if(!s||oX(s)){mn=0,ao=null;var l=o.sibling;if(l!==null)Lr=l;else{var c=o.return;c!==null?(Lr=c,WB(c)):Lr=null}break t}}mn=0,ao=null,bv(r,e,i,5);break;case 6:mn=0,ao=null,bv(r,e,i,6);break;case 8:ek(),ha=6;break e;default:throw Error(tt(462))}}eAe();break}catch(u){OY(r,u)}while(!0);return eh=Lp=null,ur.H=n,ur.A=a,xn=t,Lr!==null?0:(zn=null,$r=0,HB(),ha)}function eAe(){for(;Lr!==null&&!whe();)QY(Lr)}function QY(r){var e=vY(r.alternate,r,wh);r.memoizedProps=r.pendingProps,e===null?WB(r):Lr=e}function sU(r){var e=r,t=e.alternate;switch(e.tag){case 15:case 0:e=JO(t,e,e.pendingProps,e.type,void 0,$r);break;case 11:e=JO(t,e,e.pendingProps,e.type.render,e.ref,$r);break;case 5:UP(e);default:yY(t,e),e=Lr=yq(e,wh),e=vY(t,e,wh)}r.memoizedProps=r.pendingProps,e===null?WB(r):Lr=e}function bv(r,e,t,n){eh=Lp=null,UP(e),jv=null,sb=0;var a=e.return;try{if(zde(r,a,e,t,$r)){ha=1,$5(r,tl(t,r.current)),Lr=null;return}}catch(i){if(a!==null)throw Lr=a,i;ha=1,$5(r,tl(t,r.current)),Lr=null;return}e.flags&32768?(en||n===1?r=!0:Q0||$r&536870912?r=!1:(Jd=r=!0,(n===2||n===9||n===3||n===6)&&(n=dl.current,n!==null&&n.tag===13&&(n.flags|=16384))),zY(e,r)):WB(e)}function WB(r){var e=r;do{if(e.flags&32768){zY(e,Jd);return}r=e.return;var t=Vde(e.alternate,e,wh);if(t!==null){Lr=t;return}if(e=e.sibling,e!==null){Lr=e;return}Lr=e=r}while(e!==null);ha===0&&(ha=5)}function zY(r,e){do{var t=$de(r.alternate,r);if(t!==null){t.flags&=32767,Lr=t;return}if(t=r.return,t!==null&&(t.flags|=32768,t.subtreeFlags=0,t.deletions=null),!e&&(r=r.sibling,r!==null)){Lr=r;return}Lr=r=t}while(r!==null);ha=6,Lr=null}function oU(r,e,t,n,a,i,s,o,l){r.cancelPendingCommit=null;do qB();while(wi!==0);if(xn&6)throw Error(tt(327));if(e!==null){if(e===r.current)throw Error(tt(177));if(i=e.lanes|e.childLanes,i|=NP,Mhe(r,t,i,s,o,l),r===zn&&(Lr=zn=null,$r=0),v0=e,xA=r,Ov=t,VM=i,$M=a,kY=n,e.subtreeFlags&10256||e.flags&10256?(r.callbackNode=null,r.callbackPriority=0,aAe(R5,function(){return WY(),null})):(r.callbackNode=null,r.callbackPriority=0),n=(e.flags&13878)!==0,e.subtreeFlags&13878||n){n=ur.T,ur.T=null,a=rn.p,rn.p=2,s=xn,xn|=4;try{Kde(r,e,t)}finally{xn=s,rn.p=a,ur.T=n}}wi=1,GY(),VY(),$Y()}}function GY(){if(wi===1){wi=0;var r=xA,e=v0,t=(e.flags&13878)!==0;if(e.subtreeFlags&13878||t){t=ur.T,ur.T=null;var n=rn.p;rn.p=2;var a=xn;xn|=4;try{IY(e,r);var i=ZM,s=hq(r.containerInfo),o=i.focusedElem,l=i.selectionRange;if(s!==o&&o&&o.ownerDocument&&uq(o.ownerDocument.documentElement,o)){if(l!==null&&BP(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var A=d.getSelection(),g=o.textContent.length,p=Math.min(l.start,g),v=l.end===void 0?p:Math.min(l.end,g);!A.extend&&p>v&&(s=v,v=p,p=s);var m=TO(o,p),y=TO(o,v);if(m&&y&&(A.rangeCount!==1||A.anchorNode!==m.node||A.anchorOffset!==m.offset||A.focusNode!==y.node||A.focusOffset!==y.offset)){var x=h.createRange();x.setStart(m.node,m.offset),A.removeAllRanges(),p>v?(A.addRange(x),A.extend(y.node,y.offset)):(x.setEnd(y.node,y.offset),A.addRange(x))}}}}for(h=[],A=o;A=A.parentNode;)A.nodeType===1&&h.push({element:A,left:A.scrollLeft,top:A.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<h.length;o++){var b=h[o];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}aC=!!XM,ZM=XM=null}finally{xn=a,rn.p=n,ur.T=t}}r.current=e,wi=2}}function VY(){if(wi===2){wi=0;var r=xA,e=v0,t=(e.flags&8772)!==0;if(e.subtreeFlags&8772||t){t=ur.T,ur.T=null;var n=rn.p;rn.p=2;var a=xn;xn|=4;try{CY(r,e.alternate,e)}finally{xn=a,rn.p=n,ur.T=t}}wi=3}}function $Y(){if(wi===4||wi===3){wi=0,She();var r=xA,e=v0,t=Ov,n=kY;e.subtreeFlags&10256||e.flags&10256?wi=5:(wi=0,v0=xA=null,KY(r,r.pendingLanes));var a=r.pendingLanes;if(a===0&&(yA=null),yP(t),e=e.stateNode,po&&typeof po.onCommitFiberRoot=="function")try{po.onCommitFiberRoot(iw,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=ur.T,a=rn.p,rn.p=2,ur.T=null;try{for(var i=r.onRecoverableError,s=0;s<n.length;s++){var o=n[s];i(o.value,{componentStack:o.stack})}}finally{ur.T=e,rn.p=a}}Ov&3&&qB(),uu(r),a=r.pendingLanes,t&4194090&&a&42?r===KM?x1++:(x1=0,KM=r):x1=0,mw(0)}}function KY(r,e){(r.pooledCacheLanes&=e)===0&&(e=r.pooledCache,e!=null&&(r.pooledCache=null,dw(e)))}function qB(r){return GY(),VY(),$Y(),WY()}function WY(){if(wi!==5)return!1;var r=xA,e=VM;VM=0;var t=yP(Ov),n=ur.T,a=rn.p;try{rn.p=32>t?32:t,ur.T=null,t=$M,$M=null;var i=xA,s=Ov;if(wi=0,v0=xA=null,Ov=0,xn&6)throw Error(tt(331));var o=xn;if(xn|=4,LY(i.current),DY(i,i.current,s,t),xn=o,mw(0,!1),po&&typeof po.onPostCommitFiberRoot=="function")try{po.onPostCommitFiberRoot(iw,i)}catch{}return!0}finally{rn.p=a,ur.T=n,KY(r,e)}}function lU(r,e,t){e=tl(t,e),e=UM(r.stateNode,e,2),r=vA(r,e,2),r!==null&&(ow(r,2),uu(r))}function Fn(r,e,t){if(r.tag===3)lU(r,r,t);else for(;e!==null;){if(e.tag===3){lU(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yA===null||!yA.has(n))){r=tl(t,r),t=hY(2),n=vA(e,t,2),n!==null&&(dY(t,n,e,r),ow(n,2),uu(n));break}}e=e.return}}function EI(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new Yde;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(t)||(XP=!0,a.add(t),r=tAe.bind(null,r,e,t),e.then(r,r))}function tAe(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),r.pingedLanes|=r.suspendedLanes&t,r.warmLanes&=~t,zn===r&&($r&t)===t&&(ha===4||ha===3&&($r&62914560)===$r&&300>qc()-JP?!(xn&2)&&y0(r,0):ZP|=t,m0===$r&&(m0=0)),uu(r)}function qY(r,e){e===0&&(e=GW()),r=H0(r,e),r!==null&&(ow(r,e),uu(r))}function rAe(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),qY(r,t)}function nAe(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,a=r.memoizedState;a!==null&&(t=a.retryLane);break;case 19:n=r.stateNode;break;case 22:n=r.stateNode._retryCache;break;default:throw Error(tt(314))}n!==null&&n.delete(e),qY(r,t)}function aAe(r,e){return mP(r,e)}var X5=null,Jm=null,qM=!1,Z5=!1,DI=!1,$g=0;function uu(r){r!==Jm&&r.next===null&&(Jm===null?X5=Jm=r:Jm=Jm.next=r),Z5=!0,qM||(qM=!0,sAe())}function mw(r,e){if(!DI&&Z5){DI=!0;do for(var t=!1,n=X5;n!==null;){if(r!==0){var a=n.pendingLanes;if(a===0)var i=0;else{var s=n.suspendedLanes,o=n.pingedLanes;i=(1<<31-mo(42|r)+1)-1,i&=a&~(s&~o),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(t=!0,cU(n,i))}else i=$r,i=FB(n,n===zn?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(i&3)||sw(n,i)||(t=!0,cU(n,i));n=n.next}while(t);DI=!1}}function iAe(){YY()}function YY(){Z5=qM=!1;var r=0;$g!==0&&(fAe()&&(r=$g),$g=0);for(var e=qc(),t=null,n=X5;n!==null;){var a=n.next,i=XY(n,e);i===0?(n.next=null,t===null?X5=a:t.next=a,a===null&&(Jm=t)):(t=n,(r!==0||i&3)&&(Z5=!0)),n=a}mw(r)}function XY(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,a=r.expirationTimes,i=r.pendingLanes&-62914561;0<i;){var s=31-mo(i),o=1<<s,l=a[s];l===-1?(!(o&t)||o&n)&&(a[s]=Dhe(o,e)):l<=e&&(r.expiredLanes|=o),i&=~o}if(e=zn,t=$r,t=FB(r,r===e?t:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),n=r.callbackNode,t===0||r===e&&(mn===2||mn===9)||r.cancelPendingCommit!==null)return n!==null&&n!==null&&nI(n),r.callbackNode=null,r.callbackPriority=0;if(!(t&3)||sw(r,t)){if(e=t&-t,e===r.callbackPriority)return e;switch(n!==null&&nI(n),yP(t)){case 2:case 8:t=HW;break;case 32:t=R5;break;case 268435456:t=QW;break;default:t=R5}return n=ZY.bind(null,r),t=mP(t,n),r.callbackPriority=e,r.callbackNode=t,e}return n!==null&&n!==null&&nI(n),r.callbackPriority=2,r.callbackNode=null,2}function ZY(r,e){if(wi!==0&&wi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var t=r.callbackNode;if(qB()&&r.callbackNode!==t)return null;var n=$r;return n=FB(r,r===zn?n:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),n===0?null:(jY(r,n,e),XY(r,qc()),r.callbackNode!=null&&r.callbackNode===t?ZY.bind(null,r):null)}function cU(r,e){if(qB())return null;jY(r,e,!0)}function sAe(){pAe(function(){xn&6?mP(UW,iAe):YY()})}function tk(){return $g===0&&($g=zW()),$g}function uU(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:L_(""+r)}function hU(r,e){var t=e.ownerDocument.createElement("input");return t.name=e.name,t.value=e.value,r.id&&t.setAttribute("form",r.id),e.parentNode.insertBefore(t,e),r=new FormData(r),t.parentNode.removeChild(t),r}function oAe(r,e,t,n,a){if(e==="submit"&&t&&t.stateNode===a){var i=uU((a[Qs]||null).action),s=n.submitter;s&&(e=(e=s[Qs]||null)?uU(e.formAction):s.getAttribute("formAction"),e!==null&&(i=e,s=null));var o=new jB("action","action",null,n,a);r.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if($g!==0){var l=s?hU(a,s):new FormData(a);jM(t,{pending:!0,data:l,method:a.method,action:i},null,l)}}else typeof i=="function"&&(o.preventDefault(),l=s?hU(a,s):new FormData(a),jM(t,{pending:!0,data:l,method:a.method,action:i},i,l))},currentTarget:a}]})}}for(var MI=0;MI<BM.length;MI++){var RI=BM[MI],lAe=RI.toLowerCase(),cAe=RI[0].toUpperCase()+RI.slice(1);ic(lAe,"on"+cAe)}ic(Aq,"onAnimationEnd");ic(fq,"onAnimationIteration");ic(gq,"onAnimationStart");ic("dblclick","onDoubleClick");ic("focusin","onFocus");ic("focusout","onBlur");ic(Bde,"onTransitionRun");ic(Nde,"onTransitionStart");ic(Tde,"onTransitionCancel");ic(pq,"onTransitionEnd");h0("onMouseEnter",["mouseout","mouseover"]);h0("onMouseLeave",["mouseout","mouseover"]);h0("onPointerEnter",["pointerout","pointerover"]);h0("onPointerLeave",["pointerout","pointerover"]);Dp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ob="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ob));function JY(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],a=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=c;try{i(a)}catch(u){V5(u)}a.currentTarget=null,i=l}else for(s=0;s<n.length;s++){if(o=n[s],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=c;try{i(a)}catch(u){V5(u)}a.currentTarget=null,i=l}}}}function Rr(r,e){var t=e[yM];t===void 0&&(t=e[yM]=new Set);var n=r+"__bubble";t.has(n)||(eX(e,r,2,!1),t.add(n))}function LI(r,e,t){var n=0;e&&(n|=4),eX(t,r,n,e)}var k2="_reactListening"+Math.random().toString(36).slice(2);function rk(r){if(!r[k2]){r[k2]=!0,WW.forEach(function(t){t!=="selectionchange"&&(uAe.has(t)||LI(t,!1,r),LI(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[k2]||(e[k2]=!0,LI("selectionchange",!1,e))}}function eX(r,e,t,n){switch(dX(e)){case 2:var a=FAe;break;case 8:a=jAe;break;default:a=sk}t=a.bind(null,e,t,r),a=void 0,!SM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?r.addEventListener(e,t,{capture:!0,passive:a}):r.addEventListener(e,t,!0):a!==void 0?r.addEventListener(e,t,{passive:a}):r.addEventListener(e,t,!1)}function PI(r,e,t,n,a){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var o=n.stateNode.containerInfo;if(o===a)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===a)return;s=s.return}for(;o!==null;){if(s=dv(o),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){n=i=s;continue e}o=o.parentNode}}n=n.return}rq(function(){var c=i,u=wP(t),h=[];e:{var d=mq.get(r);if(d!==void 0){var A=jB,g=r;switch(r){case"keypress":if(k_(t)===0)break e;case"keydown":case"keyup":A=ade;break;case"focusin":g="focus",A=hI;break;case"focusout":g="blur",A=hI;break;case"beforeblur":case"afterblur":A=hI;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=vO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=$he;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=ode;break;case Aq:case fq:case gq:A=qhe;break;case pq:A=cde;break;case"scroll":case"scrollend":A=Ghe;break;case"wheel":A=hde;break;case"copy":case"cut":case"paste":A=Xhe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=xO;break;case"toggle":case"beforetoggle":A=Ade}var p=(e&4)!==0,v=!p&&(r==="scroll"||r==="scrollend"),m=p?d!==null?d+"Capture":null:d;p=[];for(var y=c,x;y!==null;){var b=y;if(x=b.stateNode,b=b.tag,b!==5&&b!==26&&b!==27||x===null||m===null||(b=tb(y,m),b!=null&&p.push(lb(y,b,x))),v)break;y=y.return}0<p.length&&(d=new A(d,g,null,t,u),h.push({event:d,listeners:p}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",A=r==="mouseout"||r==="pointerout",d&&t!==wM&&(g=t.relatedTarget||t.fromElement)&&(dv(g)||g[O0]))break e;if((A||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,A?(g=t.relatedTarget||t.toElement,A=c,g=g?dv(g):null,g!==null&&(v=aw(g),p=g.tag,g!==v||p!==5&&p!==27&&p!==6)&&(g=null)):(A=null,g=c),A!==g)){if(p=vO,b="onMouseLeave",m="onMouseEnter",y="mouse",(r==="pointerout"||r==="pointerover")&&(p=xO,b="onPointerLeave",m="onPointerEnter",y="pointer"),v=A==null?d:Fx(A),x=g==null?d:Fx(g),d=new p(b,y+"leave",A,t,u),d.target=v,d.relatedTarget=x,b=null,dv(u)===c&&(p=new p(m,y+"enter",g,t,u),p.target=x,p.relatedTarget=v,b=p),v=b,A&&g)t:{for(p=A,m=g,y=0,x=p;x;x=vm(x))y++;for(x=0,b=m;b;b=vm(b))x++;for(;0<y-x;)p=vm(p),y--;for(;0<x-y;)m=vm(m),x--;for(;y--;){if(p===m||m!==null&&p===m.alternate)break t;p=vm(p),m=vm(m)}p=null}else p=null;A!==null&&dU(h,d,A,p,!1),g!==null&&v!==null&&dU(h,v,g,p,!0)}}e:{if(d=c?Fx(c):window,A=d.nodeName&&d.nodeName.toLowerCase(),A==="select"||A==="input"&&d.type==="file")var S=_O;else if(SO(d))if(lq)S=Sde;else{S=bde;var _=xde}else A=d.nodeName,!A||A.toLowerCase()!=="input"||d.type!=="checkbox"&&d.type!=="radio"?c&&bP(c.elementType)&&(S=_O):S=wde;if(S&&(S=S(r,c))){oq(h,S,t,u);break e}_&&_(r,d,c),r==="focusout"&&c&&d.type==="number"&&c.memoizedProps.value!=null&&bM(d,"number",d.value)}switch(_=c?Fx(c):window,r){case"focusin":(SO(_)||_.contentEditable==="true")&&(gv=_,_M=c,u1=null);break;case"focusout":u1=_M=gv=null;break;case"mousedown":CM=!0;break;case"contextmenu":case"mouseup":case"dragend":CM=!1,IO(h,t,u);break;case"selectionchange":if(Cde)break;case"keydown":case"keyup":IO(h,t,u)}var C;if(CP)e:{switch(r){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else fv?iq(r,t)&&(w="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(w="onCompositionStart");w&&(aq&&t.locale!=="ko"&&(fv||w!=="onCompositionStart"?w==="onCompositionEnd"&&fv&&(C=nq()):(Zd=u,SP="value"in Zd?Zd.value:Zd.textContent,fv=!0)),_=J5(c,w),0<_.length&&(w=new yO(w,r,null,t,u),h.push({event:w,listeners:_}),C?w.data=C:(C=sq(t),C!==null&&(w.data=C)))),(C=gde?pde(r,t):mde(r,t))&&(w=J5(c,"onBeforeInput"),0<w.length&&(_=new yO("onBeforeInput","beforeinput",null,t,u),h.push({event:_,listeners:w}),_.data=C)),oAe(h,r,c,t,u)}JY(h,e)})}function lb(r,e,t){return{instance:r,listener:e,currentTarget:t}}function J5(r,e){for(var t=e+"Capture",n=[];r!==null;){var a=r,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=tb(r,t),a!=null&&n.unshift(lb(r,a,i)),a=tb(r,e),a!=null&&n.push(lb(r,a,i))),r.tag===3)return n;r=r.return}return[]}function vm(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function dU(r,e,t,n,a){for(var i=e._reactName,s=[];t!==null&&t!==n;){var o=t,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===n)break;o!==5&&o!==26&&o!==27||c===null||(l=c,a?(c=tb(t,i),c!=null&&s.unshift(lb(t,c,l))):a||(c=tb(t,i),c!=null&&s.push(lb(t,c,l)))),t=t.return}s.length!==0&&r.push({event:e,listeners:s})}var hAe=/\r\n?/g,dAe=/\u0000|\uFFFD/g;function AU(r){return(typeof r=="string"?r:""+r).replace(hAe,`
`).replace(dAe,"")}function tX(r,e){return e=AU(e),AU(r)===e}function YB(){}function In(r,e,t,n,a,i){switch(t){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||d0(r,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&d0(r,""+n);break;case"className":I2(r,"class",n);break;case"tabIndex":I2(r,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":I2(r,t,n);break;case"style":tq(r,n,i);break;case"data":if(e!=="object"){I2(r,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||t!=="href")){r.removeAttribute(t);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){r.removeAttribute(t);break}n=L_(""+n),r.setAttribute(t,n);break;case"action":case"formAction":if(typeof n=="function"){r.setAttribute(t,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(t==="formAction"?(e!=="input"&&In(r,e,"name",a.name,a,null),In(r,e,"formEncType",a.formEncType,a,null),In(r,e,"formMethod",a.formMethod,a,null),In(r,e,"formTarget",a.formTarget,a,null)):(In(r,e,"encType",a.encType,a,null),In(r,e,"method",a.method,a,null),In(r,e,"target",a.target,a,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){r.removeAttribute(t);break}n=L_(""+n),r.setAttribute(t,n);break;case"onClick":n!=null&&(r.onclick=YB);break;case"onScroll":n!=null&&Rr("scroll",r);break;case"onScrollEnd":n!=null&&Rr("scrollend",r);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(tt(61));if(t=n.__html,t!=null){if(a.children!=null)throw Error(tt(60));r.innerHTML=t}}break;case"multiple":r.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":r.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){r.removeAttribute("xlink:href");break}t=L_(""+n),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?r.setAttribute(t,""+n):r.removeAttribute(t);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?r.setAttribute(t,""):r.removeAttribute(t);break;case"capture":case"download":n===!0?r.setAttribute(t,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?r.setAttribute(t,n):r.removeAttribute(t);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?r.setAttribute(t,n):r.removeAttribute(t);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?r.removeAttribute(t):r.setAttribute(t,n);break;case"popover":Rr("beforetoggle",r),Rr("toggle",r),R_(r,"popover",n);break;case"xlinkActuate":Lu(r,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Lu(r,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Lu(r,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Lu(r,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Lu(r,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Lu(r,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Lu(r,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Lu(r,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Lu(r,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":R_(r,"is",n);break;case"innerText":case"textContent":break;default:(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t=Qhe.get(t)||t,R_(r,t,n))}}function YM(r,e,t,n,a,i){switch(t){case"style":tq(r,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(tt(61));if(t=n.__html,t!=null){if(a.children!=null)throw Error(tt(60));r.innerHTML=t}}break;case"children":typeof n=="string"?d0(r,n):(typeof n=="number"||typeof n=="bigint")&&d0(r,""+n);break;case"onScroll":n!=null&&Rr("scroll",r);break;case"onScrollEnd":n!=null&&Rr("scrollend",r);break;case"onClick":n!=null&&(r.onclick=YB);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qW.hasOwnProperty(t))e:{if(t[0]==="o"&&t[1]==="n"&&(a=t.endsWith("Capture"),e=t.slice(2,a?t.length-7:void 0),i=r[Qs]||null,i=i!=null?i[t]:null,typeof i=="function"&&r.removeEventListener(e,i,a),typeof n=="function")){typeof i!="function"&&i!==null&&(t in r?r[t]=null:r.hasAttribute(t)&&r.removeAttribute(t)),r.addEventListener(e,n,a);break e}t in r?r[t]=n:n===!0?r.setAttribute(t,""):R_(r,t,n)}}}function _i(r,e,t){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rr("error",r),Rr("load",r);var n=!1,a=!1,i;for(i in t)if(t.hasOwnProperty(i)){var s=t[i];if(s!=null)switch(i){case"src":n=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(tt(137,e));default:In(r,e,i,s,t,null)}}a&&In(r,e,"srcSet",t.srcSet,t,null),n&&In(r,e,"src",t.src,t,null);return;case"input":Rr("invalid",r);var o=i=s=a=null,l=null,c=null;for(n in t)if(t.hasOwnProperty(n)){var u=t[n];if(u!=null)switch(n){case"name":a=u;break;case"type":s=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":i=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(tt(137,e));break;default:In(r,e,n,u,t,null)}}ZW(r,i,o,l,c,s,a,!1),L5(r);return;case"select":Rr("invalid",r),n=s=i=null;for(a in t)if(t.hasOwnProperty(a)&&(o=t[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":s=o;break;case"multiple":n=o;default:In(r,e,a,o,t,null)}e=i,t=s,r.multiple=!!n,e!=null?Rv(r,!!n,e,!1):t!=null&&Rv(r,!!n,t,!0);return;case"textarea":Rr("invalid",r),i=a=n=null;for(s in t)if(t.hasOwnProperty(s)&&(o=t[s],o!=null))switch(s){case"value":n=o;break;case"defaultValue":a=o;break;case"children":i=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(tt(91));break;default:In(r,e,s,o,t,null)}eq(r,n,a,i),L5(r);return;case"option":for(l in t)if(t.hasOwnProperty(l)&&(n=t[l],n!=null))switch(l){case"selected":r.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:In(r,e,l,n,t,null)}return;case"dialog":Rr("beforetoggle",r),Rr("toggle",r),Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":Rr("load",r);break;case"video":case"audio":for(n=0;n<ob.length;n++)Rr(ob[n],r);break;case"image":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"embed":case"source":case"link":Rr("error",r),Rr("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in t)if(t.hasOwnProperty(c)&&(n=t[c],n!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(tt(137,e));default:In(r,e,c,n,t,null)}return;default:if(bP(e)){for(u in t)t.hasOwnProperty(u)&&(n=t[u],n!==void 0&&YM(r,e,u,n,t,void 0));return}}for(o in t)t.hasOwnProperty(o)&&(n=t[o],n!=null&&In(r,e,o,n,t,null))}function AAe(r,e,t,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,s=null,o=null,l=null,c=null,u=null;for(A in t){var h=t[A];if(t.hasOwnProperty(A)&&h!=null)switch(A){case"checked":break;case"value":break;case"defaultValue":l=h;default:n.hasOwnProperty(A)||In(r,e,A,null,n,h)}}for(var d in n){var A=n[d];if(h=t[d],n.hasOwnProperty(d)&&(A!=null||h!=null))switch(d){case"type":i=A;break;case"name":a=A;break;case"checked":c=A;break;case"defaultChecked":u=A;break;case"value":s=A;break;case"defaultValue":o=A;break;case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(tt(137,e));break;default:A!==h&&In(r,e,d,A,n,h)}}xM(r,s,o,l,c,u,i,a);return;case"select":A=s=o=d=null;for(i in t)if(l=t[i],t.hasOwnProperty(i)&&l!=null)switch(i){case"value":break;case"multiple":A=l;default:n.hasOwnProperty(i)||In(r,e,i,null,n,l)}for(a in n)if(i=n[a],l=t[a],n.hasOwnProperty(a)&&(i!=null||l!=null))switch(a){case"value":d=i;break;case"defaultValue":o=i;break;case"multiple":s=i;default:i!==l&&In(r,e,a,i,n,l)}e=o,t=s,n=A,d!=null?Rv(r,!!t,d,!1):!!n!=!!t&&(e!=null?Rv(r,!!t,e,!0):Rv(r,!!t,t?[]:"",!1));return;case"textarea":A=d=null;for(o in t)if(a=t[o],t.hasOwnProperty(o)&&a!=null&&!n.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:In(r,e,o,null,n,a)}for(s in n)if(a=n[s],i=t[s],n.hasOwnProperty(s)&&(a!=null||i!=null))switch(s){case"value":d=a;break;case"defaultValue":A=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(tt(91));break;default:a!==i&&In(r,e,s,a,n,i)}JW(r,d,A);return;case"option":for(var g in t)if(d=t[g],t.hasOwnProperty(g)&&d!=null&&!n.hasOwnProperty(g))switch(g){case"selected":r.selected=!1;break;default:In(r,e,g,null,n,d)}for(l in n)if(d=n[l],A=t[l],n.hasOwnProperty(l)&&d!==A&&(d!=null||A!=null))switch(l){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:In(r,e,l,d,n,A)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in t)d=t[p],t.hasOwnProperty(p)&&d!=null&&!n.hasOwnProperty(p)&&In(r,e,p,null,n,d);for(c in n)if(d=n[c],A=t[c],n.hasOwnProperty(c)&&d!==A&&(d!=null||A!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(tt(137,e));break;default:In(r,e,c,d,n,A)}return;default:if(bP(e)){for(var v in t)d=t[v],t.hasOwnProperty(v)&&d!==void 0&&!n.hasOwnProperty(v)&&YM(r,e,v,void 0,n,d);for(u in n)d=n[u],A=t[u],!n.hasOwnProperty(u)||d===A||d===void 0&&A===void 0||YM(r,e,u,d,n,A);return}}for(var m in t)d=t[m],t.hasOwnProperty(m)&&d!=null&&!n.hasOwnProperty(m)&&In(r,e,m,null,n,d);for(h in n)d=n[h],A=t[h],!n.hasOwnProperty(h)||d===A||d==null&&A==null||In(r,e,h,d,n,A)}var XM=null,ZM=null;function eC(r){return r.nodeType===9?r:r.ownerDocument}function fU(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rX(r,e){if(r===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&e==="foreignObject"?0:r}function JM(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kI=null;function fAe(){var r=window.event;return r&&r.type==="popstate"?r===kI?!1:(kI=r,!0):(kI=null,!1)}var nX=typeof setTimeout=="function"?setTimeout:void 0,gAe=typeof clearTimeout=="function"?clearTimeout:void 0,gU=typeof Promise=="function"?Promise:void 0,pAe=typeof queueMicrotask=="function"?queueMicrotask:typeof gU<"u"?function(r){return gU.resolve(null).then(r).catch(mAe)}:nX;function mAe(r){setTimeout(function(){throw r})}function ef(r){return r==="head"}function pU(r,e){var t=e,n=0,a=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(0<n&&8>n){t=n;var s=r.ownerDocument;if(t&1&&b1(s.documentElement),t&2&&b1(s.body),t&4)for(t=s.head,b1(t),s=t.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[lw]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||t.removeChild(s),s=o}}if(a===0){r.removeChild(i),Ab(e);return}a--}else t==="$"||t==="$?"||t==="$!"?a++:n=t.charCodeAt(0)-48;else n=0;t=i}while(t);Ab(e)}function e3(r){var e=r.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var t=e;switch(e=e.nextSibling,t.nodeName){case"HTML":case"HEAD":case"BODY":e3(t),xP(t);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(t.rel.toLowerCase()==="stylesheet")continue}r.removeChild(t)}}function vAe(r,e,t,n){for(;r.nodeType===1;){var a=t;if(r.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(n){if(!r[lw])switch(e){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(i=r.getAttribute("rel"),i==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(i!==a.rel||r.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||r.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||r.getAttribute("title")!==(a.title==null?null:a.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(i=r.getAttribute("src"),(i!==(a.src==null?null:a.src)||r.getAttribute("type")!==(a.type==null?null:a.type)||r.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(e==="input"&&r.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&r.getAttribute("name")===i)return r}else return r;if(r=Zl(r.nextSibling),r===null)break}return null}function yAe(r,e,t){if(e==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!t||(r=Zl(r.nextSibling),r===null))return null;return r}function t3(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function xAe(r,e){var t=r.ownerDocument;if(r.data!=="$?"||t.readyState==="complete")e();else{var n=function(){e(),t.removeEventListener("DOMContentLoaded",n)};t.addEventListener("DOMContentLoaded",n),r._reactRetry=n}}function Zl(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return r}var r3=null;function mU(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}function aX(r,e,t){switch(e=eC(t),r){case"html":if(r=e.documentElement,!r)throw Error(tt(452));return r;case"head":if(r=e.head,!r)throw Error(tt(453));return r;case"body":if(r=e.body,!r)throw Error(tt(454));return r;default:throw Error(tt(451))}}function b1(r){for(var e=r.attributes;e.length;)r.removeAttributeNode(e[0]);xP(r)}var Al=new Map,vU=new Set;function tC(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var kh=rn.d;rn.d={f:bAe,r:wAe,D:SAe,C:_Ae,L:CAe,m:BAe,X:TAe,S:NAe,M:IAe};function bAe(){var r=kh.f(),e=KB();return r||e}function wAe(r){var e=U0(r);e!==null&&e.tag===5&&e.type==="form"?Xq(e):kh.r(r)}var z0=typeof document>"u"?null:document;function iX(r,e,t){var n=z0;if(n&&typeof e=="string"&&e){var a=el(e);a='link[rel="'+r+'"][href="'+a+'"]',typeof t=="string"&&(a+='[crossorigin="'+t+'"]'),vU.has(a)||(vU.add(a),r={rel:r,crossOrigin:t,href:e},n.querySelector(a)===null&&(e=n.createElement("link"),_i(e,"link",r),ui(e),n.head.appendChild(e)))}}function SAe(r){kh.D(r),iX("dns-prefetch",r,null)}function _Ae(r,e){kh.C(r,e),iX("preconnect",r,e)}function CAe(r,e,t){kh.L(r,e,t);var n=z0;if(n&&r&&e){var a='link[rel="preload"][as="'+el(e)+'"]';e==="image"&&t&&t.imageSrcSet?(a+='[imagesrcset="'+el(t.imageSrcSet)+'"]',typeof t.imageSizes=="string"&&(a+='[imagesizes="'+el(t.imageSizes)+'"]')):a+='[href="'+el(r)+'"]';var i=a;switch(e){case"style":i=x0(r);break;case"script":i=G0(r)}Al.has(i)||(r=Wn({rel:"preload",href:e==="image"&&t&&t.imageSrcSet?void 0:r,as:e},t),Al.set(i,r),n.querySelector(a)!==null||e==="style"&&n.querySelector(vw(i))||e==="script"&&n.querySelector(yw(i))||(e=n.createElement("link"),_i(e,"link",r),ui(e),n.head.appendChild(e)))}}function BAe(r,e){kh.m(r,e);var t=z0;if(t&&r){var n=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+el(n)+'"][href="'+el(r)+'"]',i=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=G0(r)}if(!Al.has(i)&&(r=Wn({rel:"modulepreload",href:r},e),Al.set(i,r),t.querySelector(a)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(t.querySelector(yw(i)))return}n=t.createElement("link"),_i(n,"link",r),ui(n),t.head.appendChild(n)}}}function NAe(r,e,t){kh.S(r,e,t);var n=z0;if(n&&r){var a=Mv(n).hoistableStyles,i=x0(r);e=e||"default";var s=a.get(i);if(!s){var o={loading:0,preload:null};if(s=n.querySelector(vw(i)))o.loading=5;else{r=Wn({rel:"stylesheet",href:r,"data-precedence":e},t),(t=Al.get(i))&&nk(r,t);var l=s=n.createElement("link");ui(l),_i(l,"link",r),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,z_(s,e,n)}s={type:"stylesheet",instance:s,count:1,state:o},a.set(i,s)}}}function TAe(r,e){kh.X(r,e);var t=z0;if(t&&r){var n=Mv(t).hoistableScripts,a=G0(r),i=n.get(a);i||(i=t.querySelector(yw(a)),i||(r=Wn({src:r,async:!0},e),(e=Al.get(a))&&ak(r,e),i=t.createElement("script"),ui(i),_i(i,"link",r),t.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}function IAe(r,e){kh.M(r,e);var t=z0;if(t&&r){var n=Mv(t).hoistableScripts,a=G0(r),i=n.get(a);i||(i=t.querySelector(yw(a)),i||(r=Wn({src:r,async:!0,type:"module"},e),(e=Al.get(a))&&ak(r,e),i=t.createElement("script"),ui(i),_i(i,"link",r),t.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}function yU(r,e,t,n){var a=(a=pA.current)?tC(a):null;if(!a)throw Error(tt(446));switch(r){case"meta":case"title":return null;case"style":return typeof t.precedence=="string"&&typeof t.href=="string"?(e=x0(t.href),t=Mv(a).hoistableStyles,n=t.get(e),n||(n={type:"style",instance:null,count:0,state:null},t.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(t.rel==="stylesheet"&&typeof t.href=="string"&&typeof t.precedence=="string"){r=x0(t.href);var i=Mv(a).hoistableStyles,s=i.get(r);if(s||(a=a.ownerDocument||a,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(r,s),(i=a.querySelector(vw(r)))&&!i._p&&(s.instance=i,s.state.loading=5),Al.has(r)||(t={rel:"preload",as:"style",href:t.href,crossOrigin:t.crossOrigin,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy},Al.set(r,t),i||EAe(a,r,t,s.state))),e&&n===null)throw Error(tt(528,""));return s}if(e&&n!==null)throw Error(tt(529,""));return null;case"script":return e=t.async,t=t.src,typeof t=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=G0(t),t=Mv(a).hoistableScripts,n=t.get(e),n||(n={type:"script",instance:null,count:0,state:null},t.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(tt(444,r))}}function x0(r){return'href="'+el(r)+'"'}function vw(r){return'link[rel="stylesheet"]['+r+"]"}function sX(r){return Wn({},r,{"data-precedence":r.precedence,precedence:null})}function EAe(r,e,t,n){r.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=r.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),_i(e,"link",t),ui(e),r.head.appendChild(e))}function G0(r){return'[src="'+el(r)+'"]'}function yw(r){return"script[async]"+r}function xU(r,e,t){if(e.count++,e.instance===null)switch(e.type){case"style":var n=r.querySelector('style[data-href~="'+el(t.href)+'"]');if(n)return e.instance=n,ui(n),n;var a=Wn({},t,{"data-href":t.href,"data-precedence":t.precedence,href:null,precedence:null});return n=(r.ownerDocument||r).createElement("style"),ui(n),_i(n,"style",a),z_(n,t.precedence,r),e.instance=n;case"stylesheet":a=x0(t.href);var i=r.querySelector(vw(a));if(i)return e.state.loading|=4,e.instance=i,ui(i),i;n=sX(t),(a=Al.get(a))&&nk(n,a),i=(r.ownerDocument||r).createElement("link"),ui(i);var s=i;return s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),_i(i,"link",n),e.state.loading|=4,z_(i,t.precedence,r),e.instance=i;case"script":return i=G0(t.src),(a=r.querySelector(yw(i)))?(e.instance=a,ui(a),a):(n=t,(a=Al.get(i))&&(n=Wn({},t),ak(n,a)),r=r.ownerDocument||r,a=r.createElement("script"),ui(a),_i(a,"link",n),r.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(tt(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(n=e.instance,e.state.loading|=4,z_(n,t.precedence,r));return e.instance}function z_(r,e,t){for(var n=t.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,i=a,s=0;s<n.length;s++){var o=n[s];if(o.dataset.precedence===e)i=o;else if(i!==a)break}i?i.parentNode.insertBefore(r,i.nextSibling):(e=t.nodeType===9?t.head:t,e.insertBefore(r,e.firstChild))}function nk(r,e){r.crossOrigin==null&&(r.crossOrigin=e.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=e.referrerPolicy),r.title==null&&(r.title=e.title)}function ak(r,e){r.crossOrigin==null&&(r.crossOrigin=e.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=e.referrerPolicy),r.integrity==null&&(r.integrity=e.integrity)}var G_=null;function bU(r,e,t){if(G_===null){var n=new Map,a=G_=new Map;a.set(t,n)}else a=G_,n=a.get(t),n||(n=new Map,a.set(t,n));if(n.has(r))return n;for(n.set(r,null),t=t.getElementsByTagName(r),a=0;a<t.length;a++){var i=t[a];if(!(i[lw]||i[Vi]||r==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var s=i.getAttribute(e)||"";s=r+s;var o=n.get(s);o?o.push(i):n.set(s,[i])}}return n}function wU(r,e,t){r=r.ownerDocument||r,r.head.insertBefore(t,e==="title"?r.querySelector("head > title"):null)}function DAe(r,e,t){if(t===1||e.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return r=e.disabled,typeof e.precedence=="string"&&r==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function oX(r){return!(r.type==="stylesheet"&&!(r.state.loading&3))}var cb=null;function MAe(){}function RAe(r,e,t){if(cb===null)throw Error(tt(475));var n=cb;if(e.type==="stylesheet"&&(typeof t.media!="string"||matchMedia(t.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var a=x0(t.href),i=r.querySelector(vw(a));if(i){r=i._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=rC.bind(n),r.then(n,n)),e.state.loading|=4,e.instance=i,ui(i);return}i=r.ownerDocument||r,t=sX(t),(a=Al.get(a))&&nk(t,a),i=i.createElement("link"),ui(i);var s=i;s._p=new Promise(function(o,l){s.onload=o,s.onerror=l}),_i(i,"link",t),e.instance=i}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(e,r),(r=e.state.preload)&&!(e.state.loading&3)&&(n.count++,e=rC.bind(n),r.addEventListener("load",e),r.addEventListener("error",e))}}function LAe(){if(cb===null)throw Error(tt(475));var r=cb;return r.stylesheets&&r.count===0&&n3(r,r.stylesheets),0<r.count?function(e){var t=setTimeout(function(){if(r.stylesheets&&n3(r,r.stylesheets),r.unsuspend){var n=r.unsuspend;r.unsuspend=null,n()}},6e4);return r.unsuspend=e,function(){r.unsuspend=null,clearTimeout(t)}}:null}function rC(){if(this.count--,this.count===0){if(this.stylesheets)n3(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var nC=null;function n3(r,e){r.stylesheets=null,r.unsuspend!==null&&(r.count++,nC=new Map,e.forEach(PAe,r),nC=null,rC.call(r))}function PAe(r,e){if(!(e.state.loading&4)){var t=nC.get(r);if(t)var n=t.get(null);else{t=new Map,nC.set(r,t);for(var a=r.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var s=a[i];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(t.set(s.dataset.precedence,s),n=s)}n&&t.set(null,n)}a=e.instance,s=a.getAttribute("data-precedence"),i=t.get(s)||n,i===n&&t.set(null,a),t.set(s,a),this.count++,n=rC.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),i?i.parentNode.insertBefore(a,i.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(a,r.firstChild)),e.state.loading|=4}}var ub={$$typeof:Xu,Provider:null,Consumer:null,_currentValue:Ug,_currentValue2:Ug,_threadCount:0};function kAe(r,e,t,n,a,i,s,o){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=aI(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aI(0),this.hiddenUpdates=aI(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function lX(r,e,t,n,a,i,s,o,l,c,u,h){return r=new kAe(r,e,t,s,o,l,c,h),e=1,i===!0&&(e|=24),i=co(3,null,null,e),r.current=i,i.stateNode=r,e=MP(),e.refCount++,r.pooledCache=e,e.refCount++,i.memoizedState={element:n,isDehydrated:t,cache:e},LP(i),r}function cX(r){return r?(r=vv,r):vv}function uX(r,e,t,n,a,i){a=cX(a),n.context===null?n.context=a:n.pendingContext=a,n=mA(e),n.payload={element:t},i=i===void 0?null:i,i!==null&&(n.callback=i),t=vA(r,n,e),t!==null&&(yo(t,r,e),A1(t,r,e))}function SU(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function ik(r,e){SU(r,e),(r=r.alternate)&&SU(r,e)}function hX(r){if(r.tag===13){var e=H0(r,67108864);e!==null&&yo(e,r,67108864),ik(r,67108864)}}var aC=!0;function FAe(r,e,t,n){var a=ur.T;ur.T=null;var i=rn.p;try{rn.p=2,sk(r,e,t,n)}finally{rn.p=i,ur.T=a}}function jAe(r,e,t,n){var a=ur.T;ur.T=null;var i=rn.p;try{rn.p=8,sk(r,e,t,n)}finally{rn.p=i,ur.T=a}}function sk(r,e,t,n){if(aC){var a=a3(n);if(a===null)PI(r,e,n,iC,t),_U(r,n);else if(UAe(a,r,e,t,n))n.stopPropagation();else if(_U(r,n),e&4&&-1<OAe.indexOf(r)){for(;a!==null;){var i=U0(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var s=rg(i.pendingLanes);if(s!==0){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-mo(s);o.entanglements[1]|=l,s&=~l}uu(i),!(xn&6)&&(q5=qc()+500,mw(0))}}break;case 13:o=H0(i,2),o!==null&&yo(o,i,2),KB(),ik(i,2)}if(i=a3(n),i===null&&PI(r,e,n,iC,t),i===a)break;a=i}a!==null&&n.stopPropagation()}else PI(r,e,n,null,t)}}function a3(r){return r=wP(r),ok(r)}var iC=null;function ok(r){if(iC=null,r=dv(r),r!==null){var e=aw(r);if(e===null)r=null;else{var t=e.tag;if(t===13){if(r=kW(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null)}}return iC=r,null}function dX(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_he()){case UW:return 2;case HW:return 8;case R5:case Che:return 32;case QW:return 268435456;default:return 32}default:return 32}}var i3=!1,bA=null,wA=null,SA=null,hb=new Map,db=new Map,$d=[],OAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _U(r,e){switch(r){case"focusin":case"focusout":bA=null;break;case"dragenter":case"dragleave":wA=null;break;case"mouseover":case"mouseout":SA=null;break;case"pointerover":case"pointerout":hb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":db.delete(e.pointerId)}}function Qy(r,e,t,n,a,i){return r===null||r.nativeEvent!==i?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},e!==null&&(e=U0(e),e!==null&&hX(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),r)}function UAe(r,e,t,n,a){switch(e){case"focusin":return bA=Qy(bA,r,e,t,n,a),!0;case"dragenter":return wA=Qy(wA,r,e,t,n,a),!0;case"mouseover":return SA=Qy(SA,r,e,t,n,a),!0;case"pointerover":var i=a.pointerId;return hb.set(i,Qy(hb.get(i)||null,r,e,t,n,a)),!0;case"gotpointercapture":return i=a.pointerId,db.set(i,Qy(db.get(i)||null,r,e,t,n,a)),!0}return!1}function AX(r){var e=dv(r.target);if(e!==null){var t=aw(e);if(t!==null){if(e=t.tag,e===13){if(e=kW(t),e!==null){r.blockedOn=e,Rhe(r.priority,function(){if(t.tag===13){var n=vo();n=vP(n);var a=H0(t,n);a!==null&&yo(a,t,n),ik(t,n)}});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function V_(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=a3(r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);wM=n,t.target.dispatchEvent(n),wM=null}else return e=U0(t),e!==null&&hX(e),r.blockedOn=t,!1;e.shift()}return!0}function CU(r,e,t){V_(r)&&t.delete(e)}function HAe(){i3=!1,bA!==null&&V_(bA)&&(bA=null),wA!==null&&V_(wA)&&(wA=null),SA!==null&&V_(SA)&&(SA=null),hb.forEach(CU),db.forEach(CU)}function F2(r,e){r.blockedOn===e&&(r.blockedOn=null,i3||(i3=!0,Ja.unstable_scheduleCallback(Ja.unstable_NormalPriority,HAe)))}var j2=null;function BU(r){j2!==r&&(j2=r,Ja.unstable_scheduleCallback(Ja.unstable_NormalPriority,function(){j2===r&&(j2=null);for(var e=0;e<r.length;e+=3){var t=r[e],n=r[e+1],a=r[e+2];if(typeof n!="function"){if(ok(n||t)===null)continue;break}var i=U0(t);i!==null&&(r.splice(e,3),e-=3,jM(i,{pending:!0,data:a,method:t.method,action:n},n,a))}}))}function Ab(r){function e(l){return F2(l,r)}bA!==null&&F2(bA,r),wA!==null&&F2(wA,r),SA!==null&&F2(SA,r),hb.forEach(e),db.forEach(e);for(var t=0;t<$d.length;t++){var n=$d[t];n.blockedOn===r&&(n.blockedOn=null)}for(;0<$d.length&&(t=$d[0],t.blockedOn===null);)AX(t),t.blockedOn===null&&$d.shift();if(t=(r.ownerDocument||r).$$reactFormReplay,t!=null)for(n=0;n<t.length;n+=3){var a=t[n],i=t[n+1],s=a[Qs]||null;if(typeof i=="function")s||BU(t);else if(s){var o=null;if(i&&i.hasAttribute("formAction")){if(a=i,s=i[Qs]||null)o=s.formAction;else if(ok(a)!==null)continue}else o=s.action;typeof o=="function"?t[n+1]=o:(t.splice(n,3),n-=3),BU(t)}}}function lk(r){this._internalRoot=r}XB.prototype.render=lk.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(tt(409));var t=e.current,n=vo();uX(t,n,r,e,null,null)};XB.prototype.unmount=lk.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;uX(r.current,2,null,r,null,null),KB(),e[O0]=null}};function XB(r){this._internalRoot=r}XB.prototype.unstable_scheduleHydration=function(r){if(r){var e=KW();r={blockedOn:null,target:r,priority:e};for(var t=0;t<$d.length&&e!==0&&e<$d[t].priority;t++);$d.splice(t,0,r),t===0&&AX(r)}};var NU=LW.version;if(NU!=="19.1.0")throw Error(tt(527,NU,"19.1.0"));rn.findDOMNode=function(r){var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(tt(188)):(r=Object.keys(r).join(","),Error(tt(268,r)));return r=mhe(e),r=r!==null?FW(r):null,r=r===null?null:r.stateNode,r};var QAe={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ur,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var O2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!O2.isDisabled&&O2.supportsFiber)try{iw=O2.inject(QAe),po=O2}catch{}}kB.createRoot=function(r,e){if(!PW(r))throw Error(tt(299));var t=!1,n="",a=lY,i=cY,s=uY,o=null;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(s=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=lX(r,1,!1,null,null,t,n,a,i,s,o,null),r[O0]=e.current,rk(r),new lk(e)};kB.hydrateRoot=function(r,e,t){if(!PW(r))throw Error(tt(299));var n=!1,a="",i=lY,s=cY,o=uY,l=null,c=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(l=t.unstable_transitionCallbacks),t.formState!==void 0&&(c=t.formState)),e=lX(r,1,!0,e,t??null,n,a,i,s,o,l,c),e.context=cX(null),t=e.current,n=vo(),n=vP(n),a=mA(n),a.callback=null,vA(t,a,n),t=n,e.current.lanes=t,ow(e,t),uu(e),r[O0]=e.current,rk(r),new XB(e)};kB.version="19.1.0";function fX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fX)}catch(r){console.error(r)}}fX(),DW.exports=kB;var zAe=DW.exports;const GAe=NW(zAe),TU=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,IU=TW,ck=(r,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return IU(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:i}=e,s=Object.keys(a).map(c=>{const u=t==null?void 0:t[c],h=i==null?void 0:i[c];if(u===null)return null;const d=TU(u)||TU(h);return a[c][d]}),o=t&&Object.entries(t).reduce((c,u)=>{let[h,d]=u;return d===void 0||(c[h]=d),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:h,className:d,...A}=u;return Object.entries(A).every(g=>{let[p,v]=g;return Array.isArray(v)?v.includes({...i,...o}[p]):{...i,...o}[p]===v})?[...c,h,d]:c},[]);return IU(r,s,l,t==null?void 0:t.class,t==null?void 0:t.className)},uk="-",VAe=r=>{const e=KAe(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:s=>{const o=s.split(uk);return o[0]===""&&o.length!==1&&o.shift(),gX(o,e)||$Ae(s)},getConflictingClassGroupIds:(s,o)=>{const l=t[s]||[];return o&&n[s]?[...l,...n[s]]:l}}},gX=(r,e)=>{var s;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),a=n?gX(r.slice(1),n):void 0;if(a)return a;if(e.validators.length===0)return;const i=r.join(uk);return(s=e.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},EU=/^\[(.+)\]$/,$Ae=r=>{if(EU.test(r)){const e=EU.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},KAe=r=>{const{theme:e,classGroups:t}=r,n={nextPart:new Map,validators:[]};for(const a in t)s3(t[a],n,a,e);return n},s3=(r,e,t,n)=>{r.forEach(a=>{if(typeof a=="string"){const i=a===""?e:DU(e,a);i.classGroupId=t;return}if(typeof a=="function"){if(WAe(a)){s3(a(n),e,t,n);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([i,s])=>{s3(s,DU(e,i),t,n)})})},DU=(r,e)=>{let t=r;return e.split(uk).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},WAe=r=>r.isThemeGetter,qAe=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const a=(i,s)=>{t.set(i,s),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let s=t.get(i);if(s!==void 0)return s;if((s=n.get(i))!==void 0)return a(i,s),s},set(i,s){t.has(i)?t.set(i,s):a(i,s)}}},o3="!",l3=":",YAe=l3.length,XAe=r=>{const{prefix:e,experimentalParseClassName:t}=r;let n=a=>{const i=[];let s=0,o=0,l=0,c;for(let g=0;g<a.length;g++){let p=a[g];if(s===0&&o===0){if(p===l3){i.push(a.slice(l,g)),l=g+YAe;continue}if(p==="/"){c=g;continue}}p==="["?s++:p==="]"?s--:p==="("?o++:p===")"&&o--}const u=i.length===0?a:a.substring(l),h=ZAe(u),d=h!==u,A=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:A}};if(e){const a=e+l3,i=n;n=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(t){const a=n;n=i=>t({className:i,parseClassName:a})}return n},ZAe=r=>r.endsWith(o3)?r.substring(0,r.length-1):r.startsWith(o3)?r.substring(1):r,JAe=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const a=[];let i=[];return n.forEach(s=>{s[0]==="["||e[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},efe=r=>({cache:qAe(r.cacheSize),parseClassName:XAe(r),sortModifiers:JAe(r),...VAe(r)}),tfe=/\s+/,rfe=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=e,s=[],o=r.trim().split(tfe);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:h,modifiers:d,hasImportantModifier:A,baseClassName:g,maybePostfixModifierPosition:p}=t(u);if(h){l=u+(l.length>0?" "+l:l);continue}let v=!!p,m=n(v?g.substring(0,p):g);if(!m){if(!v){l=u+(l.length>0?" "+l:l);continue}if(m=n(g),!m){l=u+(l.length>0?" "+l:l);continue}v=!1}const y=i(d).join(":"),x=A?y+o3:y,b=x+m;if(s.includes(b))continue;s.push(b);const S=a(m,v);for(let _=0;_<S.length;++_){const C=S[_];s.push(x+C)}l=u+(l.length>0?" "+l:l)}return l};function nfe(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=pX(e))&&(n&&(n+=" "),n+=t);return n}const pX=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=pX(r[n]))&&(t&&(t+=" "),t+=e);return t};function afe(r,...e){let t,n,a,i=s;function s(l){const c=e.reduce((u,h)=>h(u),r());return t=efe(c),n=t.cache.get,a=t.cache.set,i=o,o(l)}function o(l){const c=n(l);if(c)return c;const u=rfe(l,t);return a(l,u),u}return function(){return i(nfe.apply(null,arguments))}}const Va=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},mX=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,vX=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ife=/^\d+\/\d+$/,sfe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ofe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lfe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cfe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ufe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ym=r=>ife.test(r),Tr=r=>!!r&&!Number.isNaN(Number(r)),md=r=>!!r&&Number.isInteger(Number(r)),FI=r=>r.endsWith("%")&&Tr(r.slice(0,-1)),Fu=r=>sfe.test(r),hfe=()=>!0,dfe=r=>ofe.test(r)&&!lfe.test(r),yX=()=>!1,Afe=r=>cfe.test(r),ffe=r=>ufe.test(r),gfe=r=>!jt(r)&&!Ot(r),pfe=r=>V0(r,wX,yX),jt=r=>mX.test(r),Nf=r=>V0(r,SX,dfe),jI=r=>V0(r,bfe,Tr),MU=r=>V0(r,xX,yX),mfe=r=>V0(r,bX,ffe),U2=r=>V0(r,_X,Afe),Ot=r=>vX.test(r),zy=r=>$0(r,SX),vfe=r=>$0(r,wfe),RU=r=>$0(r,xX),yfe=r=>$0(r,wX),xfe=r=>$0(r,bX),H2=r=>$0(r,_X,!0),V0=(r,e,t)=>{const n=mX.exec(r);return n?n[1]?e(n[1]):t(n[2]):!1},$0=(r,e,t=!1)=>{const n=vX.exec(r);return n?n[1]?e(n[1]):t:!1},xX=r=>r==="position"||r==="percentage",bX=r=>r==="image"||r==="url",wX=r=>r==="length"||r==="size"||r==="bg-size",SX=r=>r==="length",bfe=r=>r==="number",wfe=r=>r==="family-name",_X=r=>r==="shadow",Sfe=()=>{const r=Va("color"),e=Va("font"),t=Va("text"),n=Va("font-weight"),a=Va("tracking"),i=Va("leading"),s=Va("breakpoint"),o=Va("container"),l=Va("spacing"),c=Va("radius"),u=Va("shadow"),h=Va("inset-shadow"),d=Va("text-shadow"),A=Va("drop-shadow"),g=Va("blur"),p=Va("perspective"),v=Va("aspect"),m=Va("ease"),y=Va("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...b(),Ot,jt],_=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],w=()=>[Ot,jt,l],B=()=>[ym,"full","auto",...w()],D=()=>[md,"none","subgrid",Ot,jt],T=()=>["auto",{span:["full",md,Ot,jt]},md,Ot,jt],E=()=>[md,"auto",Ot,jt],R=()=>["auto","min","max","fr",Ot,jt],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],k=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...w()],Q=()=>[ym,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],H=()=>[r,Ot,jt],W=()=>[...b(),RU,MU,{position:[Ot,jt]}],te=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ee=()=>["auto","cover","contain",yfe,pfe,{size:[Ot,jt]}],j=()=>[FI,zy,Nf],G=()=>["","none","full",c,Ot,jt],Y=()=>["",Tr,zy,Nf],Z=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[Tr,FI,RU,MU],fe=()=>["","none",g,Ot,jt],q=()=>["none",Tr,Ot,jt],ge=()=>["none",Tr,Ot,jt],me=()=>[Tr,Ot,jt],we=()=>[ym,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Fu],breakpoint:[Fu],color:[hfe],container:[Fu],"drop-shadow":[Fu],ease:["in","out","in-out"],font:[gfe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Fu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Fu],shadow:[Fu],spacing:["px",Tr],text:[Fu],"text-shadow":[Fu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ym,jt,Ot,v]}],container:["container"],columns:[{columns:[Tr,jt,Ot,o]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[md,"auto",Ot,jt]}],basis:[{basis:[ym,"full","auto",o,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Tr,ym,"auto","initial","none",jt]}],grow:[{grow:["",Tr,Ot,jt]}],shrink:[{shrink:["",Tr,Ot,jt]}],order:[{order:[md,"first","last","none",Ot,jt]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...k(),"normal"]}],"justify-self":[{"justify-self":["auto",...k()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...k(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...k(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...k(),"baseline"]}],"place-self":[{"place-self":["auto",...k()]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:Q()}],w:[{w:[o,"screen",...Q()]}],"min-w":[{"min-w":[o,"screen","none",...Q()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...Q()]}],h:[{h:["screen","lh",...Q()]}],"min-h":[{"min-h":["screen","lh","none",...Q()]}],"max-h":[{"max-h":["screen","lh",...Q()]}],"font-size":[{text:["base",t,zy,Nf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ot,jI]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",FI,jt]}],"font-family":[{font:[vfe,jt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ot,jt]}],"line-clamp":[{"line-clamp":[Tr,"none",Ot,jI]}],leading:[{leading:[i,...w()]}],"list-image":[{"list-image":["none",Ot,jt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ot,jt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:[Tr,"from-font","auto",Ot,Nf]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[Tr,"auto",Ot,jt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ot,jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ot,jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:te()}],"bg-size":[{bg:ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},md,Ot,jt],radial:["",Ot,jt],conic:[md,Ot,jt]},xfe,mfe]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:j()}],"gradient-via-pos":[{via:j()}],"gradient-to-pos":[{to:j()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Z(),"hidden","none"]}],"divide-style":[{divide:[...Z(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...Z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Tr,Ot,jt]}],"outline-w":[{outline:["",Tr,zy,Nf]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",u,H2,U2]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",h,H2,U2]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[Tr,Nf]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",d,H2,U2]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[Tr,Ot,jt]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Tr]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[Ot,jt]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":b()}],"mask-image-conic-pos":[{"mask-conic":[Tr]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:te()}],"mask-size":[{mask:ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ot,jt]}],filter:[{filter:["","none",Ot,jt]}],blur:[{blur:fe()}],brightness:[{brightness:[Tr,Ot,jt]}],contrast:[{contrast:[Tr,Ot,jt]}],"drop-shadow":[{"drop-shadow":["","none",A,H2,U2]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",Tr,Ot,jt]}],"hue-rotate":[{"hue-rotate":[Tr,Ot,jt]}],invert:[{invert:["",Tr,Ot,jt]}],saturate:[{saturate:[Tr,Ot,jt]}],sepia:[{sepia:["",Tr,Ot,jt]}],"backdrop-filter":[{"backdrop-filter":["","none",Ot,jt]}],"backdrop-blur":[{"backdrop-blur":fe()}],"backdrop-brightness":[{"backdrop-brightness":[Tr,Ot,jt]}],"backdrop-contrast":[{"backdrop-contrast":[Tr,Ot,jt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Tr,Ot,jt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Tr,Ot,jt]}],"backdrop-invert":[{"backdrop-invert":["",Tr,Ot,jt]}],"backdrop-opacity":[{"backdrop-opacity":[Tr,Ot,jt]}],"backdrop-saturate":[{"backdrop-saturate":[Tr,Ot,jt]}],"backdrop-sepia":[{"backdrop-sepia":["",Tr,Ot,jt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ot,jt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Tr,"initial",Ot,jt]}],ease:[{ease:["linear","initial",m,Ot,jt]}],delay:[{delay:[Tr,Ot,jt]}],animate:[{animate:["none",y,Ot,jt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,Ot,jt]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:q()}],"rotate-x":[{"rotate-x":q()}],"rotate-y":[{"rotate-y":q()}],"rotate-z":[{"rotate-z":q()}],scale:[{scale:ge()}],"scale-x":[{"scale-x":ge()}],"scale-y":[{"scale-y":ge()}],"scale-z":[{"scale-z":ge()}],"scale-3d":["scale-3d"],skew:[{skew:me()}],"skew-x":[{"skew-x":me()}],"skew-y":[{"skew-y":me()}],transform:[{transform:[Ot,jt,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:we()}],"translate-x":[{"translate-x":we()}],"translate-y":[{"translate-y":we()}],"translate-z":[{"translate-z":we()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ot,jt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ot,jt]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[Tr,zy,Nf,jI]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},_fe=afe(Sfe);function tr(...r){return _fe(TW(r))}const Cfe=ck("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),At=K.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...a},i)=>{const s=n?aW:"button";return f.jsx(s,{"data-slot":"button",className:tr(Cfe({variant:e,size:t,className:r})),ref:i,...a})});At.displayName="Button";const Bfe={},LU=r=>{let e;const t=new Set,n=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const A=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(g=>g(e,A))}},a=()=>e,l={setState:n,getState:a,getInitialState:()=>c,subscribe:u=>(t.add(u),()=>t.delete(u)),destroy:()=>{(Bfe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},c=e=r(n,a,l);return l},Nfe=r=>r?LU(r):LU,CX={},{useDebugValue:Tfe}=xt,{useSyncExternalStoreWithSelector:Ife}=she;let PU=!1;const Efe=r=>r;function Dfe(r,e=Efe,t){(CX?"production":void 0)!=="production"&&t&&!PU&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),PU=!0);const n=Ife(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return Tfe(n),n}const kU=r=>{(CX?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof r=="function"?Nfe(r):r,t=(n,a)=>Dfe(e,n,a);return Object.assign(t,e),t},Fh=r=>r?kU(r):kU,xw=Fh((r,e)=>({activeMenu:"engine",notifications:[],setActiveMenu:t=>r({activeMenu:t}),addNotification:t=>{const n=Date.now().toString()+Math.random().toString(36).substr(2,9),a={id:n,autoHide:!0,duration:5e3,...t};r(i=>({notifications:[...i.notifications,a]})),a.autoHide&&setTimeout(()=>{e().removeNotification(n)},a.duration)},removeNotification:t=>r(n=>({notifications:n.notifications.filter(a=>a.id!==t)})),clearNotifications:()=>r({notifications:[]})}));function Mfe(){const{activeMenu:r,setActiveMenu:e}=xw(),[t,n]=K.useState(!1),a=[{icon:Aue,label:"HOME",id:"engine"},{icon:Ba,label:"LINK BAND",id:"linkband"},{icon:rw,label:"VISUALIZER",id:"visualizer"},{icon:go,label:"DATA CENTER",id:"datacenter"},{icon:Us,label:"DOCUMENTS",id:"cloudmanager"},{icon:fue,label:"APPLICATIONS",id:"applications"},{icon:Ip,label:"SETTINGS",id:"settings"}];return f.jsxs("div",{className:tr("bg-sidebar border-r border-sidebar-border transition-all duration-300 h-screen flex flex-col",t?"w-16":"w-60"),children:[f.jsx("div",{className:"flex-shrink-0 px-4 py-6 border-sidebar-border h-16 flex items-center",children:f.jsxs("div",{className:"flex items-center justify-between w-full",children:[!t&&f.jsx("h1",{className:"text-sidebar-foreground font-semibold text-left text-xl ml-2",children:"LINK BAND SDK"}),f.jsx(At,{variant:"ghost",size:"sm",onClick:()=>n(!t),className:"text-sidebar-foreground hover:bg-sidebar-accent rounded-l-md rounded-r-none shadow-md bg-sidebar-accent/20 border-r-0",children:f.jsx(due,{className:tr("h-4 w-4 transition-transform",t&&"rotate-180")})})]})}),f.jsx("div",{className:"flex-shrink-0 px-6 py-4",children:f.jsx("div",{className:"h-px bg-sidebar-border"})}),f.jsx("nav",{className:"flex-1 py-6 space-y-2 overflow-y-auto",style:{paddingLeft:t?"0.75rem":"1.5rem",paddingRight:"1rem"},children:a.map(i=>{const s=i.icon,o=r===i.id;return f.jsxs(At,{variant:"ghost",className:tr("w-full gap-3 h-12 !justify-start transition-all duration-200",o?"bg-white text-black shadow-sm border border-gray-200 hover:bg-white hover:text-black":"text-sidebar-foreground hover:bg-neutral-200 dark:hover:bg-neutral-700 hover:text-sidebar-foreground",t&&"!justify-center"),onClick:()=>e(i.id),children:[f.jsx(s,{className:"h-5 w-5 flex-shrink-0"}),!t&&f.jsx("span",{className:"flex-1 text-left",children:i.label})]},i.id)})})]})}const Rfe=ck("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Gt({className:r,variant:e,asChild:t=!1,...n}){const a=t?aW:"span";return f.jsx(a,{"data-slot":"badge",className:tr(Rfe({variant:e}),r),...n})}var Lfe="Separator",FU="horizontal",Pfe=["horizontal","vertical"],BX=K.forwardRef((r,e)=>{const{decorative:t,orientation:n=FU,...a}=r,i=kfe(n)?n:FU,o=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return f.jsx(_n.div,{"data-orientation":i,...o,...a,ref:e})});BX.displayName=Lfe;function kfe(r){return Pfe.includes(r)}var Ffe=BX;function Kg({className:r,orientation:e="horizontal",decorative:t=!0,...n}){return f.jsx(Ffe,{"data-slot":"separator-root",decorative:t,orientation:e,className:tr("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",r),...n})}const jfe={},Ofe=r=>(e,t,n)=>{const a=n.subscribe;return n.subscribe=(s,o,l)=>{let c=s;if(o){const u=(l==null?void 0:l.equalityFn)||Object.is;let h=s(n.getState());c=d=>{const A=s(d);if(!u(h,A)){const g=h;o(h=A,g)}},l!=null&&l.fireImmediately&&o(h,h)}return a(c)},r(e,t,n)},Ufe=Ofe;function Hfe(r,e){let t;try{t=r()}catch{return}return{getItem:a=>{var i;const s=l=>l===null?null:JSON.parse(l,void 0),o=(i=t.getItem(a))!=null?i:null;return o instanceof Promise?o.then(s):s(o)},setItem:(a,i)=>t.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>t.removeItem(a)}}const fb=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return fb(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return fb(n)(t)}}}},Qfe=(r,e)=>(t,n,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:v=>v,version:0,merge:(v,m)=>({...m,...v}),...e},s=!1;const o=new Set,l=new Set;let c;try{c=i.getStorage()}catch{}if(!c)return r((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...v)},n,a);const u=fb(i.serialize),h=()=>{const v=i.partialize({...n()});let m;const y=u({state:v,version:i.version}).then(x=>c.setItem(i.name,x)).catch(x=>{m=x});if(m)throw m;return y},d=a.setState;a.setState=(v,m)=>{d(v,m),h()};const A=r((...v)=>{t(...v),h()},n,a);let g;const p=()=>{var v;if(!c)return;s=!1,o.forEach(y=>y(n()));const m=((v=i.onRehydrateStorage)==null?void 0:v.call(i,n()))||void 0;return fb(c.getItem.bind(c))(i.name).then(y=>{if(y)return i.deserialize(y)}).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return i.migrate(y.state,y.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return y.state}).then(y=>{var x;return g=i.merge(y,(x=n())!=null?x:A),t(g,!0),h()}).then(()=>{m==null||m(g,void 0),s=!0,l.forEach(y=>y(g))}).catch(y=>{m==null||m(void 0,y)})};return a.persist={setOptions:v=>{i={...i,...v},v.getStorage&&(c=v.getStorage())},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:v=>(o.add(v),()=>{o.delete(v)}),onFinishHydration:v=>(l.add(v),()=>{l.delete(v)})},p(),g||A},zfe=(r,e)=>(t,n,a)=>{let i={storage:Hfe(()=>localStorage),partialize:p=>p,version:0,merge:(p,v)=>({...v,...p}),...e},s=!1;const o=new Set,l=new Set;let c=i.storage;if(!c)return r((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...p)},n,a);const u=()=>{const p=i.partialize({...n()});return c.setItem(i.name,{state:p,version:i.version})},h=a.setState;a.setState=(p,v)=>{h(p,v),u()};const d=r((...p)=>{t(...p),u()},n,a);a.getInitialState=()=>d;let A;const g=()=>{var p,v;if(!c)return;s=!1,o.forEach(y=>{var x;return y((x=n())!=null?x:d)});const m=((v=i.onRehydrateStorage)==null?void 0:v.call(i,(p=n())!=null?p:d))||void 0;return fb(c.getItem.bind(c))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate)return[!0,i.migrate(y.state,y.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var x;const[b,S]=y;if(A=i.merge(S,(x=n())!=null?x:d),t(A,!0),b)return u()}).then(()=>{m==null||m(A,void 0),A=n(),s=!0,l.forEach(y=>y(A))}).catch(y=>{m==null||m(void 0,y)})};return a.persist={setOptions:p=>{i={...i,...p},p.storage&&(c=p.storage)},clearStorage:()=>{c==null||c.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:p=>(o.add(p),()=>{o.delete(p)}),onFinishHydration:p=>(l.add(p),()=>{l.delete(p)})},i.skipHydration||g(),A||d},Gfe=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((jfe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Qfe(r,e)):zfe(r,e),NX=Gfe,Vfe="modulepreload",$fe=function(r){return"/"+r},jU={},hs=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=Promise.allSettled(t.map(l=>{if(l=$fe(l),l in jU)return;jU[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Vfe,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((d,A)=>{h.addEventListener("load",d),h.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};class uh{constructor(e){Ce(this,"buffer");Ce(this,"head",0);Ce(this,"tail",0);Ce(this,"size",0);Ce(this,"capacity");this.capacity=e,this.buffer=new Array(e)}push(e){this.buffer[this.tail]=e,this.size<this.capacity?this.size++:this.head=(this.head+1)%this.capacity,this.tail=(this.tail+1)%this.capacity}toArray(){if(this.size===0)return[];const e=[];let t=this.head;for(let n=0;n<this.size;n++)e.push(this.buffer[t]),t=(t+1)%this.capacity;return e}getLatest(e){if(e<=0||this.size===0)return[];const t=Math.min(e,this.size),n=[];let a=(this.tail-t+this.capacity)%this.capacity;for(let i=0;i<t;i++)n.push(this.buffer[a]),a=(a+1)%this.capacity;return n}clear(){this.head=0,this.tail=0,this.size=0}getSize(){return this.size}getCapacity(){return this.capacity}isFull(){return this.size===this.capacity}isEmpty(){return this.size===0}}class Kfe extends uh{constructor(e,t=250){const n=e*t;super(n)}getDataInTimeRange(e,t){return this.toArray().filter(n=>n.timestamp>=e&&n.timestamp<=t)}getRecentData(e){const t=Date.now(),n=t-e*1e3;return this.getDataInTimeRange(n,t)}getAverageSignalQuality(){const e=this.toArray();return e.length===0?0:e.reduce((n,a)=>n+a.signalQuality,0)/e.length}}class Wfe extends uh{constructor(e,t=50){const n=e*t;super(n)}}class qfe extends uh{constructor(e,t=30){const n=e*t;super(n)}getMovementIntensity(){return this.toArray().map(e=>Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z))}}class Yfe{constructor(){Ce(this,"metrics");Ce(this,"sensorTimings");Ce(this,"isInitialized",!1);Ce(this,"masterTimeBase",0);Ce(this,"deviceTimeBase",0);Ce(this,"lastDeviceTime",0);Ce(this,"driftHistory",[]);Ce(this,"MAX_DRIFT_HISTORY",100);Ce(this,"SENSOR_INTERVALS",{EEG:4,PPG:20,ACC:33.33});Ce(this,"MAX_ACCEPTABLE_JITTER",10);Ce(this,"MAX_ACCEPTABLE_DRIFT",5);Ce(this,"SYNC_INTERVAL",5e3);this.metrics={masterTime:0,deviceTimeOffset:0,lastSyncTime:0,driftRate:0,syncQuality:0,totalPackets:0,droppedPackets:0,outOfOrderPackets:0},this.sensorTimings=new Map,this.initializeSensorTimings()}initializeSensorTimings(){Object.entries(this.SENSOR_INTERVALS).forEach(([e,t])=>{this.sensorTimings.set(e,{sensorType:e,expectedInterval:t,actualInterval:t,jitter:0,reliability:1})})}initialize(e){const t=Date.now();this.masterTimeBase=t,this.deviceTimeBase=e,this.lastDeviceTime=e,this.metrics.masterTime=t,this.metrics.deviceTimeOffset=t-e,this.metrics.lastSyncTime=t,this.isInitialized=!0,console.log("TimestampSynchronizer 초기화:",{masterTime:this.masterTimeBase,deviceTime:this.deviceTimeBase,offset:this.metrics.deviceTimeOffset})}normalizeTimestamp(e,t){this.isInitialized||this.initialize(e),this.metrics.totalPackets++;const n=this.performBasicNormalization(e),a=this.validateTimestamp(n,t,e);return this.updateSensorTiming(t,n),this.trackDrift(e,n),this.checkResyncNeeded(),this.updateMetrics(),a}performBasicNormalization(e){const t=e-this.deviceTimeBase;return this.masterTimeBase+t}validateTimestamp(e,t,n){const a=[];let i=e,s=1;const o=this.sensorTimings.get(t);if(o){const c=o.expectedInterval,u=e-this.metrics.lastSyncTime;u<-c*2&&(a.push(`과거 타임스탬프 감지: ${u}ms`),this.metrics.outOfOrderPackets++,s*=.5),u>c*10&&(a.push(`미래 타임스탬프 감지: ${u}ms`),s*=.7)}if(o){const c=o.actualInterval,u=o.expectedInterval,h=Math.abs(c-u);h>this.MAX_ACCEPTABLE_JITTER&&(a.push(`간격 불일치: 예상 ${u}ms, 실제 ${c}ms`),s*=.8,t==="ACC"&&h>u*.5&&(i=this.correctACCTimestamp(e,t),a.push("ACC 타임스탬프 균열 보정 적용")))}return Math.abs(this.metrics.driftRate)>this.MAX_ACCEPTABLE_DRIFT&&(a.push(`드리프트 임계값 초과: ${this.metrics.driftRate}ms/sec`),s*=.6),{isValid:s>.5&&a.length<3,correctedTimestamp:i,confidence:s,issues:a}}correctACCTimestamp(e,t){const n=this.sensorTimings.get(t);if(!n)return e;const a=n.expectedInterval,i=this.metrics.lastSyncTime,s=e-i,o=Math.round(s/a),l=i+o*a;return console.log("ACC 타임스탬프 보정:",{original:e,corrected:l,diff:l-e}),l}updateSensorTiming(e,t){const n=this.sensorTimings.get(e);if(!n)return;const a=this.metrics.lastSyncTime;if(a>0){const i=t-a,s=n.expectedInterval,o=.1;n.actualInterval=(1-o)*n.actualInterval+o*i;const l=Math.abs(i-s);n.jitter=(1-o)*n.jitter+o*l;const c=s*.5;n.reliability=Math.max(0,1-n.jitter/c),this.sensorTimings.set(e,n)}}trackDrift(e,t){if(this.lastDeviceTime>0){const n=e-this.lastDeviceTime,i=t-this.metrics.masterTime-n;if(this.driftHistory.push({time:t,drift:i}),this.driftHistory.length>this.MAX_DRIFT_HISTORY&&this.driftHistory.shift(),this.driftHistory.length>=10){const s=this.driftHistory.slice(-10),o=s[s.length-1].time-s[0].time,l=s[s.length-1].drift-s[0].drift;o>0&&(this.metrics.driftRate=l/o*1e3)}}this.lastDeviceTime=e}checkResyncNeeded(){(Date.now()-this.metrics.lastSyncTime>this.SYNC_INTERVAL||Math.abs(this.metrics.driftRate)>this.MAX_ACCEPTABLE_DRIFT)&&this.performResync()}performResync(){const e=Date.now();if(this.lastDeviceTime>0){const t=e-this.lastDeviceTime;this.metrics.deviceTimeOffset=t,this.metrics.lastSyncTime=e,this.driftHistory=[],this.metrics.driftRate=0,console.log("타임스탬프 재동기화 수행:",{newOffset:t,oldOffset:this.metrics.deviceTimeOffset,drift:t-this.metrics.deviceTimeOffset})}}updateMetrics(){this.metrics.masterTime=Date.now();let e=1;const t=Math.min(1,Math.abs(this.metrics.driftRate)/this.MAX_ACCEPTABLE_DRIFT);e*=1-t*.3;const n=Array.from(this.sensorTimings.values()).map(s=>s.reliability),a=n.reduce((s,o)=>s+o,0)/n.length;e*=a;const i=this.metrics.droppedPackets/Math.max(1,this.metrics.totalPackets);e*=1-i,this.metrics.syncQuality=Math.max(0,Math.min(1,e))}getMetrics(){return{...this.metrics}}getSensorTimings(){return new Map(this.sensorTimings)}getSyncStatus(){const e=[],t=[];Math.abs(this.metrics.driftRate)>this.MAX_ACCEPTABLE_DRIFT&&(e.push(`드리프트 레이트 높음: ${this.metrics.driftRate.toFixed(2)}ms/sec`),t.push("디바이스 재연결 권장")),this.sensorTimings.forEach((i,s)=>{i.reliability<.8&&(e.push(`${s} 센서 타이밍 불안정: ${(i.reliability*100).toFixed(1)}%`),t.push(`${s} 센서 연결 상태 확인`)),i.jitter>this.MAX_ACCEPTABLE_JITTER&&(e.push(`${s} 지터 높음: ${i.jitter.toFixed(1)}ms`),t.push(`${s} 샘플링 레이트 조정 고려`))});const n=this.metrics.droppedPackets/Math.max(1,this.metrics.totalPackets);return n>.05&&(e.push(`패킷 손실률 높음: ${(n*100).toFixed(1)}%`),t.push("블루투스 연결 품질 확인")),{isHealthy:this.metrics.syncQuality>.8&&e.length===0,quality:this.metrics.syncQuality,issues:e,recommendations:t}}reset(){this.isInitialized=!1,this.masterTimeBase=0,this.deviceTimeBase=0,this.lastDeviceTime=0,this.driftHistory=[],this.metrics={masterTime:0,deviceTimeOffset:0,lastSyncTime:0,driftRate:0,syncQuality:0,totalPackets:0,droppedPackets:0,outOfOrderPackets:0},this.initializeSensorTimings()}getDebugInfo(){return{metrics:this.metrics,sensorTimings:Object.fromEntries(this.sensorTimings),driftHistory:this.driftHistory.slice(-10),isInitialized:this.isInitialized,masterTimeBase:this.masterTimeBase,deviceTimeBase:this.deviceTimeBase}}}var jd=class{constructor(e,t,n,a=1/Math.sqrt(2),i=0){Ce(this,"type");Ce(this,"freq");Ce(this,"sps");Ce(this,"Q");Ce(this,"dbGain");Ce(this,"a0",0);Ce(this,"a1",0);Ce(this,"a2",0);Ce(this,"b0",0);Ce(this,"b1",0);Ce(this,"b2",0);Ce(this,"x1",0);Ce(this,"x2",0);Ce(this,"y1",0);Ce(this,"y2",0);if(["lowpass","highpass","bandpass","notch","peak","lowshelf","highshelf"].indexOf(e)<0){console.error("Valid types: 'lowpass','highpass','bandpass','notch','peak','lowshelf','highshelf'");return}this.type=e,this.freq=t,this.sps=n,this.Q=a,this.dbGain=i;let s=Math.pow(10,i/40),o=2*Math.PI*t/n,l=Math.sin(o),c=Math.cos(o),u=l/(2*a),h=Math.sqrt(s+s);this[e](s,l,c,u,h),this.b0/=this.a0,this.b1/=this.a0,this.b2/=this.a0,this.a1/=this.a0,this.a2/=this.a0}lowpass(e,t,n,a,i){this.b0=(1-n)*.5,this.b1=1-n,this.b2=(1-n)*.5,this.a0=1+a,this.a1=-2*n,this.a2=1-a}highpass(e,t,n,a,i){this.b0=(1+n)*.5,this.b1=-(1+n),this.b2=(1+n)*.5,this.a0=1+a,this.a1=-2*n,this.a2=1-a}bandpass(e,t,n,a,i){this.b0=a,this.b1=0,this.b2=-a,this.a0=1+a,this.a1=-2*n,this.a2=1-a}notch(e,t,n,a,i){this.b0=1,this.b1=-2*n,this.b2=1,this.a0=1+a,this.a1=-2*n,this.a2=1-a}peak(e,t,n,a,i){this.b0=1+a*e,this.b1=-2*n,this.b2=1-a*e,this.a0=1+a/e,this.a1=-2*n,this.a2=1-a/e}lowshelf(e,t,n,a,i){this.b0=e*(e+1-(e-1)*n+i*t),this.b1=2*e*(e-1-(e+1)*n),this.b2=e*(e+1-(e-1)*n-i*t),this.a0=e+1+(e+1)*n+i*t,this.a1=2*(e-1+(e+1)*n),this.a2=e+1+(e-1)*n-i*t}highshelf(e,t,n,a,i){this.b0=e*(e+1+(e-1)*n+i*t),this.b1=2*e*(e-1+(e+1)*n),this.b2=e*(e+1-(e-1)*n-i*t),this.a0=e+1-(e+1)*n-i*t,this.a1=2*(e-1-(e+1)*n),this.a2=e+1-(e-1)*n-i*t}applyFilter(e){let t=this.b0*e+this.b1*this.x1+this.b2*this.x2-this.a1*this.y1-this.a2*this.y2;return this.x2=this.x1,this.x1=e,this.y2=this.y1,this.y1=t,t}zResult(e){try{let t=Math.pow(Math.sin(Math.PI*e*2/(2*this.sps)),2);return(Math.pow(this.b0+this.b1+this.b2,2)-4*(this.b0*this.b1+4*this.b0*this.b2+this.b1*this.b2)*t+16*this.b0*this.b2*t*t)/(Math.pow(1+this.a1+this.a2,2)-4*(this.a1+4*this.a2+this.a1*this.a2)*t+16*this.a2*t*t)}catch{return-200}}static calcCenterFrequency(e,t){return(e+t)/2}static calcBandwidth(e,t){return t-this.calcCenterFrequency(e,t)}static calcBandpassQ(e,t,n=Math.pow(10,Math.floor(Math.log10(e)))){return n*Math.sqrt((e-t)*(e+t))/(2*t)}static calcNotchQ(e,t,n=Math.pow(10,Math.floor(Math.log10(e)))){return n*e*t/Math.sqrt((e-t)*(e+t))}},Xfe=(r,e,t)=>new jd("notch",r,e,jd.calcNotchQ(r,t),0),TX=(r,e,t,n=Math.pow(10,Math.floor(Math.log10(jd.calcCenterFrequency(r,e)))))=>new jd("bandpass",jd.calcCenterFrequency(r,e),t,jd.calcBandpassQ(jd.calcCenterFrequency(r,e),jd.calcBandwidth(r,e),n),0);class Zfe{constructor(){Ce(this,"samplingRate",250);Ce(this,"bands",{delta:{min:.5,max:4},theta:{min:4,max:8},alpha:{min:8,max:13},beta:{min:13,max:30},gamma:{min:30,max:50}})}async processEEGData(e){if(e.length<500)throw new Error("EEG 데이터가 부족합니다. 최소 2초(500샘플) 필요");const t=this.processEEGSegment(e),n=t.focusIndex||0,a=t.relaxationIndex||0,i=t.stressIndex||0,s=t.hemisphericBalance||0,o=t.cognitiveLoad||0,l=t.emotionalStability||0,c=t.totalPower||0;return{filteredData:t.filteredRawData,signalQuality:{overall:t.signalQuality.overall,fp1:t.signalQuality.channels[0],fp2:t.signalQuality.channels[1],sqi:t.overallSQI},bandPowers:t.bandPowers,brainState:t.brainState,frequencySpectrum:t.frequencySpectrum,indices:{focusIndex:n,relaxationIndex:a,stressIndex:i,hemisphericBalance:s,cognitiveLoad:o,emotionalStability:l,totalPower:c},rawAnalysis:{ch1SQI:t.ch1SQI,ch2SQI:t.ch2SQI,overallSQI:t.overallSQI}}}processEEGSegment(e){if(e.length<500)throw new Error("Insufficient EEG data points");const t=e.map(q=>q.fp1),n=e.map(q=>q.fp2),a=this.applyNotchFilter(t,60),i=this.applyNotchFilter(n,60),s=this.bandpassFilter(a,1,45),o=this.bandpassFilter(i,1,45),l=250,c=s.length>l?s.slice(l):s,u=o.length>l?o.slice(l):o,h=this.calculateAmplitudeSQI(c),d=this.calculateAmplitudeSQI(u),A=this.calculateFrequencySQI(c),g=this.calculateFrequencySQI(u),p=this.calculateCombinedSQI(h,A).map(q=>q*100),v=this.calculateCombinedSQI(d,g).map(q=>q*100),m=15,y=p.map(q=>q>=m),x=v.map(q=>q>=m),b=y.filter((q,ge)=>q&&x[ge]).length;p.reduce((q,ge)=>q+ge,0)/p.length,v.reduce((q,ge)=>q+ge,0)/v.length,b/c.length*100;let S=[],_=[],C=[],w,B;if(b>100){const q=c.filter((we,Me)=>y[Me]),ge=u.filter((we,Me)=>x[Me]),me=Math.min(q.length,ge.length);w=q.slice(0,me),B=ge.slice(0,me)}else w=c,B=u;w.length>=125&&(C=Array.from({length:45},(q,ge)=>ge+1),S=this.calculatePowerSpectrum(w,C),_=this.calculatePowerSpectrum(B,C));const D=l,E=e.slice(D,D+c.length).map((q,ge)=>({timestamp:q.timestamp,fp1:c[ge],fp2:u[ge],signalQuality:q.signalQuality,leadOff:q.leadOff})),R=this.computeBandPowers(S,C),M=this.computeBandPowers(_,C),k=(q,ge=0)=>{try{const me=parseFloat(q.toString());return!isNaN(me)&&isFinite(me)?me:ge}catch{return ge}},O=Object.values(R).reduce((q,ge)=>q+ge,0),Q=k(R.alpha+R.theta>0?R.beta/(R.alpha+R.theta):0),H=k(R.alpha+R.beta>0?R.alpha/(R.alpha+R.beta):0),W=k(R.alpha+R.theta>0?(R.beta+R.gamma)/(R.alpha+R.theta):0),te=R.alpha||0,ee=M.alpha||0,j=te+ee;let G=0;j>.001?G=(te-ee)/j:(te>0||ee>0)&&(G=te>ee?1:-1),G=Math.max(-1,Math.min(1,G)),G=k(G);const Y=k(R.alpha>0?R.theta/R.alpha:0),Z=k(R.gamma>0?(R.alpha+R.theta)/R.gamma:0),de={overall:b/c.length*100,channels:[p.reduce((q,ge)=>q+ge,0)/p.length,v.reduce((q,ge)=>q+ge,0)/v.length],artifacts:{movement:!1,eyeBlink:!1,muscleNoise:!1}},he={currentState:b>=1e3?"focused":"unknown",confidence:b/c.length,stateHistory:[],metrics:{arousal:Q,valence:H,attention:Q,relaxation:H}},fe={bandPowers:{delta:R.delta,theta:R.theta,alpha:R.alpha,beta:R.beta,gamma:R.gamma},signalQuality:de,brainState:he,timestamp:Date.now(),filteredRawData:E,ch1SQI:p,ch2SQI:v,overallSQI:p.map((q,ge)=>(q+v[ge])/2),frequencySpectrum:{frequencies:C,ch1Power:S,ch2Power:_,timestamp:Date.now()}};return fe.totalPower=k(O),fe.focusIndex=Q,fe.relaxationIndex=H,fe.stressIndex=W,fe.hemisphericBalance=G,fe.cognitiveLoad=Y,fe.emotionalStability=Z,fe}async quickQualityCheck(e){if(e.length<50)return{isGoodQuality:!1,qualityScore:0,issues:["데이터 부족"]};const t=[];let n=1;e.filter(u=>{var h,d;return((h=u.leadOff)==null?void 0:h.ch1)||((d=u.leadOff)==null?void 0:d.ch2)}).length>e.length*.1&&(t.push("전극 접촉 불량"),n*=.5);const i=e.map(u=>Math.abs(u.fp1)),s=e.map(u=>Math.abs(u.fp2)),o=Math.max(...i),l=Math.max(...s);(o>200||l>200)&&(t.push("신호 포화"),n*=.3),(o<5||l<5)&&(t.push("신호 약함"),n*=.6);let c;if(e.length>=125)try{const u=e.map(m=>m.fp1),h=e.map(m=>m.fp2),d=this.applyNotchFilter(u,60),A=this.applyNotchFilter(h,60),g=this.calculateChannelQuality(d),p=this.calculateChannelQuality(A),v=(g+p)/2;c={ch1Quality:g,ch2Quality:p,overallSQI:v},n*=v/100}catch{t.push("품질 분석 실패"),n*=.7}return{isGoodQuality:n>=.7,qualityScore:n,issues:t,detailedQuality:c}}getChannelData(e,t){return e.map(n=>[n.timestamp,n[t]])}summarizeBrainState(e){const t={focused:"집중 상태",relaxed:"이완 상태",stressed:"스트레스 상태",drowsy:"졸음 상태",active:"활성 상태",unknown:"분석 중"};return{state:e.currentState,confidence:e.confidence,description:t[e.currentState]||"알 수 없음",recommendations:e.recommendations||[]}}interpretIndices(e){const t=(n,a)=>n<a[0]?"Low":n<a[1]?"Medium":"High";return{focus:{level:t(e.focusIndex,[.5,1]),score:e.focusIndex,description:e.focusIndex>1?"높은 집중도":e.focusIndex>.5?"보통 집중도":"낮은 집중도"},relaxation:{level:t(e.relaxationIndex,[.3,.6]),score:e.relaxationIndex,description:e.relaxationIndex>.6?"높은 이완도":e.relaxationIndex>.3?"보통 이완도":"낮은 이완도"},stress:{level:t(e.stressIndex,[1,2]),score:e.stressIndex,description:e.stressIndex>2?"높은 스트레스":e.stressIndex>1?"보통 스트레스":"낮은 스트레스"},balance:{level:Math.abs(e.hemisphericBalance)<.1?"Balanced":"Imbalanced",score:e.hemisphericBalance,description:Math.abs(e.hemisphericBalance)<.1?"좌우 균형":e.hemisphericBalance>0?"좌뇌 우세":"우뇌 우세"},cognitive:{level:t(e.cognitiveLoad,[.5,1]),score:e.cognitiveLoad,description:e.cognitiveLoad>1?"높은 인지 부하":e.cognitiveLoad>.5?"보통 인지 부하":"낮은 인지 부하"},emotional:{level:t(e.emotionalStability,[1,2]),score:e.emotionalStability,description:e.emotionalStability>2?"높은 정서 안정성":e.emotionalStability>1?"보통 정서 안정성":"낮은 정서 안정성"}}}applyNotchFilter(e,t){try{const n=Xfe(t,this.samplingRate,2),a=new Array(e.length);for(let i=0;i<e.length;i++)a[i]=n.applyFilter(e[i]);return a}catch{return this.fallbackNotchFilter(e,t)}}fallbackNotchFilter(e,t){const n=this.samplingRate,a=2*Math.PI*t/n,i=.95,s=new Array(e.length);let o=0,l=0,c=0,u=0;const h=1,d=-2*Math.cos(a),A=1,g=1+i,p=-2*Math.cos(a),v=i;for(let m=0;m<e.length;m++){const y=e[m],x=(h*y+d*o+A*l-p*c-v*u)/g;s[m]=x,l=o,o=y,u=c,c=x}return s}bandpassFilter(e,t,n){try{const a=TX(t,n,this.samplingRate),i=new Array(e.length);for(let s=0;s<e.length;s++)i[s]=a.applyFilter(e[s]);return i}catch{return this.fallbackBandpassFilter(e,t,n)}}fallbackBandpassFilter(e,t,n){const a=this.applyHighpassFilter(e,t);return this.applyLowpassFilter(a,n)}applyHighpassFilter(e,t){const a=this.samplingRate/2,i=t/a,s=Math.exp(-2*Math.PI*i),o=new Array(e.length);o[0]=e[0];for(let l=1;l<e.length;l++)o[l]=s*(o[l-1]+e[l]-e[l-1]);return o}applyLowpassFilter(e,t){const a=this.samplingRate/2,i=t/a,s=Math.exp(-2*Math.PI*i),o=new Array(e.length);o[0]=e[0];for(let l=1;l<e.length;l++)o[l]=s*o[l-1]+(1-s)*e[l];return o}calculateAmplitudeSQI(e){const n=new Array(e.length).fill(0);for(let a=0;a<=e.length-125;a++){const s=e.slice(a,a+125).map(l=>{const c=Math.abs(l);if(c<=150)return 1;{const u=c-150,d=Math.min(u/150,1);return Math.max(0,1-d)}}),o=s.reduce((l,c)=>l+c,0)/s.length;for(let l=a;l<a+125&&l<e.length;l++)n[l]=o}return n}calculateFrequencySQI(e){const n=new Array(e.length).fill(0);for(let a=0;a<=e.length-125;a++){const i=e.slice(a,a+125),s=this.calculateVariance(i),o=Math.max(0,Math.min(1,1-s/1e3));for(let l=a;l<a+125&&l<e.length;l++)n[l]=o}return n}calculateCombinedSQI(e,t){const n=new Array(e.length);for(let a=0;a<e.length;a++)n[a]=.7*e[a]+.3*t[a];return n}calculatePowerSpectrum(e,t){if(e.length<125)return new Array(t.length).fill(0);const n=new Array(t.length);for(let a=0;a<t.length;a++){const i=t[a],s=this.morletWaveletTransform(e,i);n[a]=s}return n}morletWaveletTransform(e,t){const i=Math.floor(7*this.samplingRate/t),s=Math.max(32,Math.floor(this.samplingRate/t)),o=Math.min(e.length,Math.floor(2*this.samplingRate/t)),l=Math.max(s,Math.min(o,i)),c=this.createMorletWavelet(l,t,7),u=this.convolve(e,c);let h=0;for(let A=0;A<u.length;A++){const g=u[A].real,p=u[A].imag;h+=g*g+p*p}const d=h/u.length;return d>0?10*Math.log10(d):-100}createMorletWavelet(e,t,n){const a=new Array(e),i=(e-1)/2,s=Math.pow(Math.PI,-.25)*Math.sqrt(2/n);for(let o=0;o<e;o++){const l=(o-i)/this.samplingRate,c=Math.exp(-l*l/(2*n*n)),u=2*Math.PI*t*l;a[o]={real:s*c*Math.cos(u),imag:s*c*Math.sin(u)}}return a}convolve(e,t){const n=e.length-t.length+1,a=new Array(n);for(let i=0;i<n;i++){let s=0,o=0;for(let l=0;l<t.length;l++){const c=e[i+l];s+=c*t[l].real,o+=c*t[l].imag}a[i]={real:s,imag:o}}return a}computeBandPowers(e,t){if(e.length===0||t.length===0)return{delta:0,theta:0,alpha:0,beta:0,gamma:0};let n=0,a=0,i=0,s=0,o=0;for(let l=0;l<t.length;l++){const c=t[l],u=e[l];c>=this.bands.delta.min&&c<this.bands.delta.max?n+=u:c>=this.bands.theta.min&&c<this.bands.theta.max?a+=u:c>=this.bands.alpha.min&&c<this.bands.alpha.max?i+=u:c>=this.bands.beta.min&&c<this.bands.beta.max?s+=u:c>=this.bands.gamma.min&&c<this.bands.gamma.max&&(o+=u)}return{delta:n,theta:a,alpha:i,beta:s,gamma:o}}calculateVariance(e){const t=e.reduce((a,i)=>a+i,0)/e.length;return e.reduce((a,i)=>a+Math.pow(i-t,2),0)/e.length}calculateChannelQuality(e){if(e.length===0)return 0;const t=e.reduce((c,u)=>c+u,0)/e.length,n=e.reduce((c,u)=>c+Math.pow(u-t,2),0)/e.length,a=Math.sqrt(n),i=Math.min(...e),o=Math.max(...e)-i;let l=100;return a<5?l-=30:a<10&&(l-=15),o>500?l-=40:o>300&&(l-=20),o<10&&(l-=50),Math.max(0,Math.min(100,l))}}class Jfe{constructor(){Ce(this,"channelNames",["Red","IR"]);Ce(this,"ppgSamplingRate",50)}async processPPGData(e){if(e.length===0)throw new Error("PPG 데이터가 없습니다");try{const t=this.processPPGSegment(e),n=await this.analyzePeaks(t.filteredRawData);return{filteredData:t.filteredRawData,signalQuality:{overall:t.signalQuality,red:t.redSQI.reduce((a,i)=>a+i,0)/t.redSQI.length,ir:t.irSQI.reduce((a,i)=>a+i,0)/t.irSQI.length,sqi:t.overallSQI,redSQI:t.redSQI,irSQI:t.irSQI,overallSQI:t.overallSQI},vitals:{heartRate:t.heartRate,hrv:t.hrv,spo2:t.spo2},peakInfo:n,advancedHRV:t.advancedHRV,rrIntervals:t.rrIntervals||[]}}catch{return{filteredData:e||[],signalQuality:{overall:0,red:0,ir:0,sqi:[],redSQI:[],irSQI:[],overallSQI:[]},vitals:{heartRate:0,hrv:0,spo2:0},peakInfo:{peakCount:0,avgPeakInterval:0,peakQuality:0},advancedHRV:{sdnn:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0},rrIntervals:[]}}}processPPGSegment(e){if(e.length===0)throw new Error("Empty PPG data segment");try{let t=e;e.length===500?t=e.slice(100,500):e.length>500&&(t=e.slice(100,e.length-100));const n=t.map(m=>m.red),a=t.map(m=>m.ir),i=this.applySimpleFilter(n),s=this.applySimpleFilter(a),o=this.calculatePPGSQI(i),l=this.calculatePPGSQI(s),c=o.map((m,y)=>(m+l[y])/2),u=c.reduce((m,y)=>m+y,0)/c.length,h=this.calculateHeartRate(s),d=this.calculateHRV(s),A=this.calculateSpO2(n,a);let g,p=[];try{g=this.calculateAdvancedHRV(s);const m=this.detectPeaksForHRV(a);if(m.length>=2)for(let y=1;y<m.length;y++){const x=(m[y]-m[y-1])*(1e3/this.ppgSamplingRate);x>=300&&x<=1200&&p.push(x)}}catch{g={sdnn:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0},p=[]}return{filteredRawData:t.map((m,y)=>({timestamp:m.timestamp,red:i[y]||m.red,ir:s[y]||m.ir,leadOff:m.leadOff||!1})),heartRate:h,hrv:d,signalQuality:u,spo2:A,redSQI:o,irSQI:l,overallSQI:c,advancedHRV:g,rrIntervals:p}}catch{return{filteredRawData:e||[],heartRate:0,hrv:0,signalQuality:0,spo2:0,redSQI:[],irSQI:[],overallSQI:[],advancedHRV:{sdnn:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0},rrIntervals:[]}}}applySimpleFilter(e){try{const t=e.reduce((s,o)=>s+o,0)/e.length,n=e.map(s=>s-t),a=TX(1,5,this.ppgSamplingRate),i=new Array(n.length);for(let s=0;s<n.length;s++)i[s]=a.applyFilter(n[s]);return i}catch{return this.fallbackPPGBandpassFilter(e)}}fallbackPPGBandpassFilter(e){const t=e.reduce((s,o)=>s+o,0)/e.length,n=e.map(s=>s-t),a=3,i=[];for(let s=0;s<n.length;s++){const o=Math.max(0,s-Math.floor(a/2)),l=Math.min(n.length,s+Math.floor(a/2)+1);let c=0;for(let u=o;u<l;u++)c+=n[u];i.push(c/(l-o))}return i}async quickQualityCheck(e){if(e.length<10)return{isGoodQuality:!1,qualityScore:0,issues:["데이터 부족"]};const t=[];let n=1;e.filter(h=>h.leadOff).length>e.length*.1&&(t.push("센서 접촉 불량"),n*=.5);const i=e.map(h=>Math.abs(h.red)),s=e.map(h=>Math.abs(h.ir)),o=Math.max(...i),l=Math.max(...s);(o>500||l>500)&&(t.push("신호 포화"),n*=.3),(o<10||l<10)&&(t.push("신호 약함"),n*=.6);const c=this.computeVariance(e.map(h=>h.red)),u=this.computeVariance(e.map(h=>h.ir));return c<1&&u<1&&(t.push("신호 변동 부족"),n*=.4),{isGoodQuality:n>=.7,qualityScore:n,issues:t}}async analyzePeaks(e){if(e.length<25)return{peakCount:0,avgPeakInterval:0,peakQuality:0};const t=e.map(s=>s.red),n=this.detectPeaks(t);let a=0;if(n.length>1){const s=[];for(let o=1;o<n.length;o++)s.push(n[o]-n[o-1]);a=s.reduce((o,l)=>o+l,0)/s.length}let i=0;if(n.length>=3){const s=[];for(let h=1;h<n.length;h++)s.push(n[h]-n[h-1]);const o=s.reduce((h,d)=>h+d,0)/s.length,l=s.reduce((h,d)=>h+Math.pow(d-o,2),0)/s.length,u=Math.sqrt(l)/o;i=Math.max(0,Math.min(1,1-u))}return{peakCount:n.length,avgPeakInterval:a,peakQuality:i}}calculatePPGSQI(e){const n=new Array(e.length).fill(0),a=250;for(let i=0;i<=e.length-25;i++){const o=e.slice(i,i+25).map(c=>{const u=Math.abs(c);if(u<=a)return 1;{const h=u-a,A=Math.min(h/a,1);return Math.max(0,1-A)}}),l=o.reduce((c,u)=>c+u,0)/o.length;for(let c=i;c<i+25;c++)n[c]=l}return n.map(i=>i*100)}calculateAmplitudeBasedSQI_EEGStyle(e,t){const n=new Array(e.length).fill(0);for(let a=0;a<=e.length-t;a++){const s=e.slice(a,a+t).map(l=>{const c=Math.abs(l),u=3e4;if(c<=u)return 1;{const h=c-u,A=Math.min(h/u,1);return Math.max(0,1-A)}}),o=s.reduce((l,c)=>l+c,0)/s.length;for(let l=a;l<a+t&&l<e.length;l++)n[l]=o}return n}calculateFrequencyBasedSQI_EEGStyle(e,t){const n=new Array(e.length).fill(0);for(let a=0;a<=e.length-t;a++){const i=e.slice(a,a+t),s=this.calculateVariance(i),l=Math.max(0,Math.min(1,1-s/1e9));for(let c=a;c<a+t&&c<e.length;c++)n[c]=l}return n}calculateCombinedSQI_EEGStyle(e,t){const n=new Array(e.length);for(let a=0;a<e.length;a++)n[a]=.7*e[a]+.3*t[a];return n}calculateVariance(e){if(e.length===0)return 0;const t=e.reduce((a,i)=>a+i,0)/e.length;return e.reduce((a,i)=>a+Math.pow(i-t,2),0)/e.length}calculateHeartRate(e){if(e.length<50)return 0;const t=this.preprocessForHeartRate(e);if(t.length===0)return 0;const n=this.detectPeaksAdaptiveThreshold(t);if(n.length<2)return 0;const a=this.calculateRRIntervalsWithOutlierRemoval(n);if(a.length===0)return 0;const i=this.calculateWeightedHeartRate(a);return this.validateAndSmoothHeartRate(i,a)}preprocessForHeartRate(e){const t=this.applySmoothingFilter(e,3),n=t.reduce((s,o)=>s+o,0)/t.length,a=t.map(s=>s-n);return Math.sqrt(this.calculateVariance(a))<10?[]:a}detectPeaksAdaptiveThreshold(e){const t=[],n=Math.floor(this.ppgSamplingRate*.5),a=Math.floor(this.ppgSamplingRate*.4);for(let i=n;i<e.length-n;i++){const s=e.slice(i-n,i+n),o=Math.max(...s),l=s.reduce((u,h)=>u+h,0)/s.length,c=l+(o-l)*.6;e[i]>c&&e[i]>e[i-1]&&e[i]>e[i+1]&&e[i]>e[i-2]&&e[i]>e[i+2]&&(t.length===0||i-t[t.length-1]>=a)&&t.push(i)}return t}detectPeaksDerivativeBased(e){const t=[],n=Math.floor(this.ppgSamplingRate*.4),a=[];for(let s=1;s<e.length;s++)a.push(e[s]-e[s-1]);const i=[];for(let s=1;s<a.length;s++)i.push(a[s]-a[s-1]);for(let s=2;s<e.length-2;s++){const o=s-2;if(o>=0&&o<a.length-1&&o<i.length&&a[o]>0&&a[o+1]<=0&&i[o]<0){const l=e.slice(Math.max(0,s-10),Math.min(e.length,s+10)),c=Math.max(...l),u=l.reduce((h,d)=>h+d,0)/l.length;e[s]>u+(c-u)*.3&&(t.length===0||s-t[t.length-1]>=n)&&t.push(s)}}return t}detectPeaksTemplateMatching(e){const t=[],n=Math.floor(this.ppgSamplingRate*.4),a=Math.floor(this.ppgSamplingRate*.2),i=this.generatePPGTemplate(a);for(let s=0;s<=e.length-a;s++){const o=e.slice(s,s+a);if(this.calculateNormalizedCorrelation(o,i)>.7){const c=s+Math.floor(a/2);(t.length===0||c-t[t.length-1]>=n)&&t.push(c)}}return t}generatePPGTemplate(e){const t=[],n=e/2,a=e/6;for(let i=0;i<e;i++){const s=i-n,o=Math.exp(-(s*s)/(2*a*a)),l=s<0?1:Math.exp(-s/(a*2));t.push(o*l)}return t}calculateNormalizedCorrelation(e,t){if(e.length!==t.length)return 0;const n=e.reduce((c,u)=>c+u,0)/e.length,a=t.reduce((c,u)=>c+u,0)/t.length;let i=0,s=0,o=0;for(let c=0;c<e.length;c++){const u=e[c]-n,h=t[c]-a;i+=u*h,s+=u*u,o+=h*h}const l=Math.sqrt(s*o);return l>0?i/l:0}selectBestPeakSet(e,t){if(e.length===0)return[];let n=-1,a=[];for(const i of e){if(i.peaks.length<2)continue;const s=this.evaluatePeakQuality(i.peaks,t);s>n&&(n=s,a=i.peaks)}return a}evaluatePeakQuality(e,t){if(e.length<2)return 0;const n=[];for(let A=1;A<e.length;A++){const g=e[A]-e[A-1];n.push(g)}const a=n.reduce((A,g)=>A+g,0)/n.length,i=n.reduce((A,g)=>A+Math.pow(g-a,2),0)/n.length,s=Math.sqrt(i)/a,o=Math.max(0,1-s),l=e.map(A=>t[A]),c=l.reduce((A,g)=>A+g,0)/l.length,u=Math.min(1,c/(Math.max(...t)*.5)),h=60/(a/this.ppgSamplingRate),d=h>=40&&h<=200?1:0;return o*.5+u*.3+d*.2}calculateRRIntervalsWithOutlierRemoval(e){if(e.length<2)return[];const t=[];for(let h=1;h<e.length;h++){const d=(e[h]-e[h-1])*(1e3/this.ppgSamplingRate);t.push(d)}const n=t.filter(h=>h>=300&&h<=1500);if(n.length<2)return n;const a=[...n].sort((h,d)=>h-d),i=a[Math.floor(a.length*.25)],s=a[Math.floor(a.length*.75)],o=s-i,l=i-1.5*o,c=s+1.5*o;return n.filter(h=>h>=l&&h<=c)}calculateWeightedHeartRate(e){if(e.length===0)return 0;if(e.length===1)return 6e4/e[0];let t=0,n=0;for(let a=0;a<e.length;a++){const i=(a+1)/e.length;t+=6e4/e[a]*i,n+=i}return t/n}validateAndSmoothHeartRate(e,t){if(e<40||e>200)return 0;if(t.length>=3){const n=t.reduce((s,o)=>s+o,0)/t.length;if(Math.sqrt(t.reduce((s,o)=>s+Math.pow(o-n,2),0)/t.length)/n>.5)return Math.round(e*.9)}return Math.round(e)}calculateHRV(e){if(e.length<30)return 0;const t=e.reduce((c,u)=>c+u,0)/e.length,n=e.map(c=>c-t),a=Math.max(...n)*.5,i=[];for(let c=1;c<n.length-1;c++)n[c]>a&&n[c]>n[c-1]&&n[c]>n[c+1]&&(i.length===0||c-i[i.length-1]>=15)&&i.push(c);if(i.length<2)return 0;const s=[];for(let c=1;c<i.length;c++){const u=(i[c]-i[c-1])*(1e3/this.ppgSamplingRate);u>=300&&u<=1500&&s.push(u)}if(s.length<1||s.length===1)return 0;const o=[];for(let c=1;c<s.length;c++){const u=s[c]-s[c-1];o.push(u*u)}const l=o.reduce((c,u)=>c+u,0)/o.length;return Math.sqrt(l)}calculateSpO2(e,t){if(e.length===0||t.length===0||e.length!==t.length)return 0;const n=Math.sqrt(this.calculateVariance(e)),a=Math.sqrt(this.calculateVariance(t));if(n<10||a<10)return 0;const i=this.calculatePulsatileComponent(e),s=this.calculatePulsatileComponent(t),o=this.calculateDCComponent(e),l=this.calculateDCComponent(t);if(o===0||l===0||i===0||s===0)return 0;const c=i/o,u=s/l;if(u===0)return 0;const h=c/u;let d;return h<.5?d=100:h<.7?d=104-17*h:h<1?d=112-25*h:h<2?d=120-35*h:d=Math.max(70,100-15*h),Math.min(n,a)/Math.max(n,a)<.5&&(d=d*.95+95*.05),Math.round(Math.max(85,Math.min(100,d)))}calculateACComponent(e){const t=e.reduce((a,i)=>a+i,0)/e.length,n=e.reduce((a,i)=>a+Math.pow(i-t,2),0)/e.length;return Math.sqrt(n)}calculatePulsatileComponent(e){if(e.length<10)return 0;const t=this.applySmoothingFilter(e,3),n=[],a=[];for(let o=1;o<t.length-1;o++)t[o]>t[o-1]&&t[o]>t[o+1]&&n.push(t[o]),t[o]<t[o-1]&&t[o]<t[o+1]&&a.push(t[o]);if(n.length===0||a.length===0)return Math.max(...t)-Math.min(...t);const i=n.reduce((o,l)=>o+l,0)/n.length,s=a.reduce((o,l)=>o+l,0)/a.length;return Math.abs(i-s)}applySmoothingFilter(e,t){if(t<=1)return[...e];const n=[],a=Math.floor(t/2);for(let i=0;i<e.length;i++){const s=Math.max(0,i-a),o=Math.min(e.length-1,i+a);let l=0,c=0;for(let u=s;u<=o;u++)l+=e[u],c++;n.push(l/c)}return n}calculateDCComponent(e){return e.reduce((t,n)=>t+n,0)/e.length}detectPeaks(e){const t=[],a=e.reduce((l,c)=>l+c,0)/e.length,i=e.map(l=>l-a),o=Math.max(...i)*.4;for(let l=1;l<i.length-1;l++)i[l]>o&&i[l]>i[l-1]&&i[l]>i[l+1]&&(t.length===0||l-t[t.length-1]>=10)&&t.push(l);return t}computeVariance(e){if(e.length===0)return 0;const t=e.reduce((a,i)=>a+i,0)/e.length;return e.reduce((a,i)=>a+Math.pow(i-t,2),0)/e.length}calculateAdvancedHRV(e){return{sdnn:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0}}detectPeaksForHRV(e){const t=e.reduce((l,c)=>l+c,0)/e.length,n=e.map(l=>l-t),a=Math.max(...n);Math.min(...n);const i=a*.5,s=[],o=Math.floor(this.ppgSamplingRate*.4);for(let l=1;l<n.length-1;l++)n[l]>i&&n[l]>n[l-1]&&n[l]>n[l+1]&&(s.length===0||l-s[s.length-1]>=o)&&s.push(l);return s}computeSDNN(e){if(e.length<2)return 0;const t=e.reduce((i,s)=>i+s,0)/e.length,n=e.reduce((i,s)=>i+Math.pow(s-t,2),0)/e.length;return Math.sqrt(n)}computePNN50(e){if(e.length<2)return 0;let t=0;for(let a=1;a<e.length;a++)Math.abs(e[a]-e[a-1])>50&&t++;return t/(e.length-1)*100}computeAVNN(e){return e.length===0?0:e.reduce((n,a)=>n+a,0)/e.length}computePNN20(e){if(e.length<2)return 0;let t=0;for(let a=1;a<e.length;a++)Math.abs(e[a]-e[a-1])>20&&t++;return t/(e.length-1)*100}computeSDSD(e){if(e.length<2)return 0;const t=[];for(let s=1;s<e.length;s++)t.push(e[s]-e[s-1]);const n=t.reduce((s,o)=>s+o,0)/t.length,a=t.reduce((s,o)=>s+Math.pow(o-n,2),0)/t.length;return Math.sqrt(a)}computeHRMaxMin(e){return{hrMax:0,hrMin:0}}computeStressIndex(e){if(e.length<5)return 0;const t=e.reduce((h,d)=>h+d,0)/e.length,n=e.reduce((h,d)=>h+Math.pow(d-t,2),0)/e.length,a=Math.sqrt(n);let i=0;if(e.length>1){const h=[];for(let d=1;d<e.length;d++){const A=e[d]-e[d-1];h.push(A*A)}i=Math.sqrt(h.reduce((d,A)=>d+A,0)/h.length)}const s=Math.max(0,Math.min(1,(100-a)/70)),o=Math.max(0,Math.min(1,(50-i)/30)),l=6e4/t,c=Math.max(0,Math.min(1,(l-60)/40)),u=s*.4+o*.4+c*.2;return Math.max(0,Math.min(1,u))}resampleRRIntervals(e,t){if(e.length<2)return[];const n=e.map(c=>c/1e3),a=[0];for(let c=0;c<n.length;c++)a.push(a[a.length-1]+n[c]);const i=a[a.length-1],s=Math.floor(i*t);if(s<4)return[];const o=Array.from({length:s},(c,u)=>u/t);return this.interpolateLinear(a,n,o)}interpolateLinear(e,t,n){const a=[];for(const i of n)if(i<=e[0])a.push(t[0]);else if(i>=e[e.length-1])a.push(t[t.length-1]);else{let s=0;for(;s<e.length-1&&e[s+1]<i;)s++;const o=e[s],l=e[s+1],c=t[s],u=t[s+1],h=c+(u-c)*(i-o)/(l-o);a.push(h)}return a}computeWelchPeriodogram(e,t){const i=Math.max(8,Math.min(64,Math.floor(e.length/2))),s=Math.floor(i/2),o=this.nextPowerOfTwo(i),l=[];for(let A=0;A<=o/2;A++)l.push(A*t/o);const c=[],u=this.generateHammingWindow(i);let h=0;for(;h+i<=e.length;){const g=e.slice(h,h+i).map((y,x)=>y*u[x]),p=new Array(o).fill(0);for(let y=0;y<g.length;y++)p[y]=g[y];const v=this.performFFT(p),m=[];for(let y=0;y<=o/2;y++){const x=v[2*y]||0,b=v[2*y+1]||0;let S=(x*x+b*b)/(t*i);y>0&&y<o/2&&(S*=2),m.push(S)}c.push(m),h+=i-s}const d=new Array(l.length).fill(0);for(const A of c)for(let g=0;g<A.length;g++)d[g]+=A[g];for(let A=0;A<d.length;A++)d[A]/=c.length;return{frequencies:l,powerSpectralDensity:d}}integratePowerInBand(e,t,n,a){let i=0;for(let o=0;o<e.length;o++){const l=e[o];l>=n&&l<=a&&(i+=t[o])}const s=e.length>1?e[1]-e[0]:1;return i*s}generateHammingWindow(e){const t=[];for(let n=0;n<e;n++)t.push(.54-.46*Math.cos(2*Math.PI*n/(e-1)));return t}nextPowerOfTwo(e){let t=1;for(;t<e;)t*=2;return t}performFFT(e){const t=e.length;if(t<=1)return e;if(t&t-1)throw new Error("FFT 입력 크기는 2의 거듭제곱이어야 합니다");const n=new Array(t*2);for(let s=0;s<t;s++)n[2*s]=e[s],n[2*s+1]=0;let a=0;for(let s=1;s<t;s++){let o=t>>1;for(;a&o;)a^=o,o>>=1;a^=o,s<a&&([n[2*s],n[2*a]]=[n[2*a],n[2*s]],[n[2*s+1],n[2*a+1]]=[n[2*a+1],n[2*s+1]])}let i=2;for(;i<=t;){const s=-2*Math.PI/i,o=Math.cos(s),l=Math.sin(s);for(let c=0;c<t;c+=i){let u=1,h=0;for(let d=0;d<i/2;d++){const A=n[2*(c+d)],g=n[2*(c+d)+1],p=n[2*(c+d+i/2)]*u-n[2*(c+d+i/2)+1]*h,v=n[2*(c+d+i/2)]*h+n[2*(c+d+i/2)+1]*u;n[2*(c+d)]=A+p,n[2*(c+d)+1]=g+v,n[2*(c+d+i/2)]=A-p,n[2*(c+d+i/2)+1]=g-v;const m=u*o-h*l;h=u*l+h*o,u=m}}i*=2}return n}}class ege{constructor(){Ce(this,"samplingRate",50);Ce(this,"gravityConstant",9.81)}async processACCData(e){if(e.length===0)throw new Error("ACC 데이터가 없습니다");try{const t=this.calculateMagnitude(e),n=this.analyzeMovement(t),a=this.classifyActivity(n),i=this.analyzePosture(e);return{filteredData:[],magnitude:t,activity:a,movement:n,posture:i,signalQuality:{overall:0,reliability:0,consistency:0}}}catch(t){throw t}}applyLowPassFilter(e){if(e.length<3)return e;const t=.1,n=[e[0]];for(let a=1;a<e.length;a++){const i=n[a-1],s=e[a],o={timestamp:s.timestamp,x:i.x+t*(s.x-i.x),y:i.y+t*(s.y-i.y),z:i.z+t*(s.z-i.z)},l=Math.sqrt(o.x*o.x+o.y*o.y+o.z*o.z);n.push({...o,magnitude:l})}return n}calculateMagnitude(e){return e.map(t=>{const n=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),i=Math.max(0,n-1)*100;return{timestamp:t.timestamp,value:i}})}analyzeMovement(e){if(e.length===0)return{avgMovement:0,stdMovement:0,maxMovement:0,totalMovement:0};const t=e.map(l=>l.value),n=t.reduce((l,c)=>l+c,0)/t.length,a=t.reduce((l,c)=>l+Math.pow(c-n,2),0)/t.length,i=Math.sqrt(a),s=Math.max(...t),o=t.reduce((l,c)=>l+c,0);return{avgMovement:n,stdMovement:i,maxMovement:s,totalMovement:o}}classifyActivity(e){const{avgMovement:t,stdMovement:n,maxMovement:a}=e;let i=0;t<=5?i=t*4:t<=15?i=20+(t-5)*4:i=60+Math.min(40,(t-15)*2);let s,o=0;return t<3&&a<10?(s="stationary",o=.9):t<8&&a<20?(s="sitting",o=.8):t<20&&a<40?(s="walking",o=.7):(s="running",o=.6),n>t*.8&&(o*=.8),{type:s,confidence:o,intensity:Math.round(i)}}analyzePosture(e){if(e.length===0)return{tiltAngle:0,stability:0,balance:0};const t=e.reduce((A,g)=>A+g.x,0)/e.length,n=e.reduce((A,g)=>A+g.y,0)/e.length,a=e.reduce((A,g)=>A+g.z,0)/e.length,i=Math.atan2(Math.sqrt(t*t+n*n),Math.abs(a))*(180/Math.PI),s=e.reduce((A,g)=>A+Math.pow(g.x-t,2),0)/e.length,o=e.reduce((A,g)=>A+Math.pow(g.y-n,2),0)/e.length,l=e.reduce((A,g)=>A+Math.pow(g.z-a,2),0)/e.length,c=s+o+l,u=Math.max(0,100-c*50),h=Math.abs(t)+Math.abs(n),d=Math.max(0,100-h*50);return{tiltAngle:Math.round(i*10)/10,stability:Math.round(u),balance:Math.round(d)}}evaluateSignalQuality(e,t){if(e.length===0||t.length===0)return{overall:0,reliability:0,consistency:0};const n=t.length/e.length*100;let a=0;const i=1e3/this.samplingRate;for(let l=1;l<e.length;l++){const c=e[l].timestamp-e[l-1].timestamp;Math.abs(c-i)<i*.5&&a++}const s=e.length>1?a/(e.length-1)*100:100,o=n*.6+s*.4;return{overall:Math.round(o),reliability:Math.round(n),consistency:Math.round(s)}}setSamplingRate(e){this.samplingRate=e}dispose(){}}const OU=()=>({eegGraphData:{fp1:[],fp2:[]},ppgGraphData:{red:[],ir:[]},accGraphData:{x:[],y:[],z:[]},signalQuality:{overall:"unknown",eegQuality:0,ppgQuality:0,noiseLevel:0,artifactDetection:{eyeBlink:!1,movement:!1,powerLine:!1},lastUpdated:0},realtimeAnalysis:{heartRate:null,hrv:null,stressLevel:null,focusLevel:null,relaxationLevel:null,lastUpdated:0},deviceStatus:{batteryLevel:null,connectionDuration:0,isSensorContacted:!1,lastBatteryUpdate:null,errors:[]},eegAnalysis:{bandPowers:null,brainState:null,indices:null,frequencySpectrum:null,lastUpdated:0},ppgAnalysis:{indices:null,sqi:{redSQI:[],irSQI:[],overallSQI:[]},lastUpdated:0},accAnalysis:{magnitude:[],indices:null,lastUpdated:0,rawBufferData:[]},sqiData:{eegSQI:{ch1SQI:[],ch2SQI:[]},ppgSQI:{redSQI:[],irSQI:[],overallSQI:[]},lastUpdated:0},movingAverageData:{eegMovingAverage:{history:{totalPower:[],focusIndex:[],relaxationIndex:[],stressIndex:[],hemisphericBalance:[],cognitiveLoad:[],emotionalStability:[],attentionLevel:[],meditationLevel:[]},stabilizedValues:{totalPower:0,focusIndex:0,relaxationIndex:0,stressIndex:0,hemisphericBalance:0,cognitiveLoad:0,emotionalStability:0,attentionLevel:0,meditationLevel:0},lastUpdated:0},ppgMovingAverage:{history:{heartRate:[],rmssd:[],sdnn:[],pnn50:[],lfPower:[],hfPower:[],lfHfRatio:[],stressIndex:[],spo2:[],avnn:[],pnn20:[],sdsd:[],hrMax:[],hrMin:[]},stabilizedValues:{heartRate:0,rmssd:0,sdnn:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,spo2:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0},lastUpdated:0}},isConnected:!1,graphSettings:{maxDataPoints:1e3,timeWindow:10,autoScale:!0}}),cr=Fh((r,e)=>({...OU(),setConnectionState:t=>r({isConnected:t}),updateEEGGraphData:(t,n)=>{const{maxDataPoints:a}=e().graphSettings;r(i=>({eegGraphData:{fp1:[...i.eegGraphData.fp1,...t].slice(-a),fp2:[...i.eegGraphData.fp2,...n].slice(-a)}}))},updatePPGGraphData:(t,n)=>{const{maxDataPoints:a}=e().graphSettings;r(i=>({ppgGraphData:{red:[...i.ppgGraphData.red,...t].slice(-a),ir:[...i.ppgGraphData.ir,...n].slice(-a)}}))},updateACCGraphData:(t,n,a)=>{const{maxDataPoints:i}=e().graphSettings;r(s=>({accGraphData:{x:[...s.accGraphData.x,...t].slice(-i),y:[...s.accGraphData.y,...n].slice(-i),z:[...s.accGraphData.z,...a].slice(-i)}}))},updateSignalQuality:t=>{r(n=>({signalQuality:{...n.signalQuality,...t,lastUpdated:Date.now()}}))},updateRealtimeAnalysis:t=>{r(n=>({realtimeAnalysis:{...n.realtimeAnalysis,...t,lastUpdated:Date.now()}}))},updateDeviceStatus:t=>{r(n=>({deviceStatus:{...n.deviceStatus,...t}}))},updateEEGAnalysis:t=>{r(n=>({eegAnalysis:{...n.eegAnalysis,...t,lastUpdated:Date.now()}}))},updatePPGAnalysis:t=>{try{r(n=>({ppgAnalysis:{...n.ppgAnalysis,...t,lastUpdated:Date.now()}}))}catch{try{r(a=>({ppgAnalysis:{...a.ppgAnalysis,lastUpdated:Date.now()}}))}catch{}}},updateACCAnalysis:t=>{r(n=>({accAnalysis:{...n.accAnalysis,...t,lastUpdated:Date.now()}}))},updateEEGSQI:t=>{const{maxDataPoints:n}=e().graphSettings;r(a=>({sqiData:{...a.sqiData,eegSQI:{...a.sqiData.eegSQI,...t,ch1SQI:t.ch1SQI?[...a.sqiData.eegSQI.ch1SQI,...t.ch1SQI].slice(-n):a.sqiData.eegSQI.ch1SQI,ch2SQI:t.ch2SQI?[...a.sqiData.eegSQI.ch2SQI,...t.ch2SQI].slice(-n):a.sqiData.eegSQI.ch2SQI},lastUpdated:Date.now()}}))},updatePPGSQI:t=>{const{maxDataPoints:n}=e().graphSettings;r(a=>({sqiData:{...a.sqiData,ppgSQI:{...a.sqiData.ppgSQI,...t,redSQI:t.redSQI?t.redSQI:a.sqiData.ppgSQI.redSQI,irSQI:t.irSQI?t.irSQI:a.sqiData.ppgSQI.irSQI,overallSQI:t.overallSQI?t.overallSQI:a.sqiData.ppgSQI.overallSQI},lastUpdated:Date.now()}}))},setGraphSettings:t=>{r(n=>({graphSettings:{...n.graphSettings,...t}}))},addError:t=>{r(n=>({deviceStatus:{...n.deviceStatus,errors:[...n.deviceStatus.errors.slice(-9),t]}}))},clearErrors:()=>{r(t=>({deviceStatus:{...t.deviceStatus,errors:[]}}))},updateEEGMovingAverage:(t,n)=>{!t||!n||r(a=>{const i=a.movingAverageData.eegMovingAverage.history,s={totalPower:[...i.totalPower,t.totalPower].slice(-120),focusIndex:[...i.focusIndex,t.focusIndex].slice(-120),relaxationIndex:[...i.relaxationIndex,t.relaxationIndex].slice(-120),stressIndex:[...i.stressIndex,t.stressIndex].slice(-120),hemisphericBalance:[...i.hemisphericBalance,t.hemisphericBalance].slice(-120),cognitiveLoad:[...i.cognitiveLoad,t.cognitiveLoad].slice(-120),emotionalStability:[...i.emotionalStability,t.emotionalStability].slice(-120),attentionLevel:[...i.attentionLevel,t.attentionIndex].slice(-120),meditationLevel:[...i.meditationLevel,t.meditationIndex].slice(-120)},o=c=>c.length>0?c.reduce((u,h)=>u+h,0)/c.length:0,l={totalPower:o(s.totalPower),focusIndex:o(s.focusIndex),relaxationIndex:o(s.relaxationIndex),stressIndex:o(s.stressIndex),hemisphericBalance:o(s.hemisphericBalance),cognitiveLoad:o(s.cognitiveLoad),emotionalStability:o(s.emotionalStability),attentionLevel:o(s.attentionLevel),meditationLevel:o(s.meditationLevel)};return{movingAverageData:{...a.movingAverageData,eegMovingAverage:{history:s,stabilizedValues:l,lastUpdated:Date.now()}}}})},updatePPGMovingAverage:(t,n)=>{!t||!n||r(a=>{const i=a.movingAverageData.ppgMovingAverage.history,s=(u,h,d=0)=>(u===0||!u||isNaN(u))&&h.length>0?h[h.length-1]:u||d,o={heartRate:[...i.heartRate,s(t.heartRate,i.heartRate,0)].slice(-120),rmssd:[...i.rmssd,s(t.rmssd,i.rmssd,0)].slice(-120),sdnn:[...i.sdnn,s(t.sdnn,i.sdnn,0)].slice(-120),pnn50:[...i.pnn50,s(t.pnn50,i.pnn50,0)].slice(-120),lfPower:[...i.lfPower,s(t.lfPower,i.lfPower,0)].slice(-120),hfPower:[...i.hfPower,s(t.hfPower,i.hfPower,0)].slice(-120),lfHfRatio:[...i.lfHfRatio,s(t.lfHfRatio,i.lfHfRatio,0)].slice(-120),stressIndex:[...i.stressIndex,s(t.stressIndex,i.stressIndex,0)].slice(-120),spo2:[...i.spo2,s(t.spo2,i.spo2,0)].slice(-120),avnn:[...i.avnn,s(t.avnn,i.avnn,0)].slice(-120),pnn20:[...i.pnn20,s(t.pnn20,i.pnn20,0)].slice(-120),sdsd:[...i.sdsd,s(t.sdsd,i.sdsd,0)].slice(-120),hrMax:[...i.hrMax,s(t.hrMax,i.hrMax,0)].slice(-120),hrMin:[...i.hrMin,s(t.hrMin,i.hrMin,0)].slice(-120)},l=u=>u.length>0?u.reduce((h,d)=>h+d,0)/u.length:0,c={heartRate:l(o.heartRate),rmssd:l(o.rmssd),sdnn:l(o.sdnn),pnn50:l(o.pnn50),lfPower:l(o.lfPower),hfPower:l(o.hfPower),lfHfRatio:l(o.lfHfRatio),stressIndex:l(o.stressIndex),spo2:l(o.spo2),avnn:l(o.avnn),pnn20:l(o.pnn20),sdsd:l(o.sdsd),hrMax:l(o.hrMax),hrMin:l(o.hrMin)};return{movingAverageData:{...a.movingAverageData,ppgMovingAverage:{history:o,stabilizedValues:c,lastUpdated:Date.now()}}}})},reset:()=>r(OU())})),ZB=()=>cr(r=>r.eegGraphData),JB=()=>cr(r=>r.ppgGraphData),tge=()=>cr(r=>r.accGraphData),IX=()=>cr(r=>r.signalQuality),EX=()=>cr(r=>r.realtimeAnalysis),rge=()=>cr(r=>r.deviceStatus),K0=()=>cr(r=>r.eegAnalysis),eN=()=>cr(r=>r.ppgAnalysis),tN=()=>cr(r=>r.accAnalysis),nge=()=>cr(r=>r.sqiData),No=()=>cr(r=>r.isConnected),age=()=>cr(r=>r.graphSettings),ige=()=>cr(r=>r.realtimeAnalysis.heartRate),sge=()=>cr(r=>r.deviceStatus.batteryLevel),oge=()=>cr(r=>r.deviceStatus.connectionDuration),lge=()=>cr(r=>r.signalQuality.overall),cge=()=>cr(r=>r.eegAnalysis),uge=()=>cr(r=>r.eegAnalysis.indices),hge=()=>cr(r=>r.eegAnalysis.frequencySpectrum),dge=()=>cr(r=>r.ppgAnalysis.indices),Age=()=>cr(r=>({channels:{FP1:r.eegGraphData.fp1,FP2:r.eegGraphData.fp2}})),fge=()=>cr(r=>({channels:{RED:r.ppgGraphData.red,IR:r.ppgGraphData.ir}})),gge=()=>cr(r=>({channels:{X:r.accGraphData.x,Y:r.accGraphData.y,Z:r.accGraphData.z,MAGNITUDE:r.accAnalysis.magnitude}})),rN=()=>cr(r=>r.sqiData.eegSQI),bw=()=>cr(r=>r.sqiData.ppgSQI),pge=()=>cr(r=>r.accAnalysis.indices),hk=()=>cr(r=>r.accAnalysis.rawBufferData),DX=()=>cr(r=>r.movingAverageData.eegMovingAverage),MX=()=>cr(r=>r.movingAverageData.ppgMovingAverage),mge=()=>cr(r=>r.movingAverageData),vge=Object.freeze(Object.defineProperty({__proto__:null,useACCAnalysis:tN,useACCBufferData:hk,useACCGraphData:tge,useBatteryLevel:sge,useConnectionDuration:oge,useConnectionState:No,useCurrentData:cge,useDeviceStatus:rge,useEEGAnalysis:K0,useEEGGraphData:ZB,useEEGIndices:uge,useEEGMovingAverage:DX,useEEGSQIData:rN,useFrequencySpectrum:hge,useGraphSettings:age,useHeartRate:ige,useMovingAverageData:mge,usePPGAnalysis:eN,usePPGGraphData:JB,usePPGIndices:dge,usePPGMovingAverage:MX,usePPGSQIData:bw,useProcessedACCData:pge,useProcessedDataStore:cr,useProcessedEEGData:Age,useProcessedPPGData:fge,useRealtimeACCData:gge,useRealtimeAnalysis:EX,useSQIData:nge,useSignalQuality:IX,useSignalQualityOverall:lge},Symbol.toStringTag,{value:"Module"})),bg=class bg{constructor(){Ce(this,"storageDirectoryHandle",null);Ce(this,"currentSession",null);Ce(this,"fileStreams",new Map);Ce(this,"formatWriters",new Map);Ce(this,"memoryUsage",0);Ce(this,"MAX_MEMORY_USAGE",50*1024*1024);Ce(this,"CHUNK_SIZE",1024);Ce(this,"isWriting",!1);Ce(this,"writeQueue",[]);Ce(this,"compressionWorker",null);this.initializeCompressionWorker()}static getInstance(){return bg.instance||(bg.instance=new bg),bg.instance}async setStorageDirectoryHandle(e){this.storageDirectoryHandle=e;try{await this.initializeStorageStructure()}catch(t){throw console.error("❌ 저장소 구조 초기화 실패:",t),t}}async selectStorageDirectory(){try{return"showDirectoryPicker"in window?(this.storageDirectoryHandle=await window.showDirectoryPicker({mode:"readwrite",startIn:"documents"}),await this.initializeStorageStructure(),!0):(console.error("❌ File System Access API 지원하지 않음"),!1)}catch(e){return console.error("❌ 저장소 디렉토리 선택 실패:",e),!1}}async initializeStorageStructure(){if(this.storageDirectoryHandle)try{const e=await this.storageDirectoryHandle.getDirectoryHandle("LinkBand-Data",{create:!0});await e.getDirectoryHandle("config",{create:!0}),await e.getDirectoryHandle("sessions",{create:!0}),await e.getDirectoryHandle("exports",{create:!0}),await e.getDirectoryHandle("backups",{create:!0}),await e.getDirectoryHandle("temp",{create:!0}),await e.getDirectoryHandle("logs",{create:!0});const t=new Date,n=t.getFullYear().toString(),a=(t.getMonth()+1).toString().padStart(2,"0");await(await(await e.getDirectoryHandle("sessions",{create:!0})).getDirectoryHandle(n,{create:!0})).getDirectoryHandle(a,{create:!0})}catch(e){throw console.error("❌ 저장소 구조 초기화 실패:",e),e}}async startStreamingSession(e){if(!this.storageDirectoryHandle){const t="저장소 디렉토리가 선택되지 않았습니다. Data Center에서 저장소를 먼저 설정해주세요.";throw console.error("❌",t),new Error(t)}this.currentSession&&await this.endStreamingSession();try{const t=this.generateSessionId(),n=new Date;this.currentSession={id:t,name:e.sessionName,startTime:n,duration:0,deviceName:e.deviceName,deviceId:e.deviceId,samplingRate:250,totalSamples:0,estimatedSize:0,dataQuality:{eegQuality:0,ppgQuality:0,accQuality:0},saveFormats:e.saveFormats,notes:""};const a=await this.createSessionDirectory(t);return await this.initializeFileStreams(a,e),t}catch(t){throw console.error("❌ 스트리밍 세션 시작 실패:",t),this.currentSession=null,t}}async createSessionDirectory(e){if(!this.storageDirectoryHandle)throw new Error("저장소 디렉토리가 없습니다");const t=new Date,n=t.getFullYear().toString(),a=(t.getMonth()+1).toString().padStart(2,"0"),c=await(await(await(await(await this.storageDirectoryHandle.getDirectoryHandle("LinkBand-Data",{create:!0})).getDirectoryHandle("sessions",{create:!0})).getDirectoryHandle(n,{create:!0})).getDirectoryHandle(a,{create:!0})).getDirectoryHandle(e,{create:!0});return await c.getDirectoryHandle("raw-data",{create:!0}),await c.getDirectoryHandle("processed-data",{create:!0}),await c.getDirectoryHandle("analysis-results",{create:!0}),await c.getDirectoryHandle("exports",{create:!0}),c}async initializeFileStreams(e,t){const n=await e.getDirectoryHandle("raw-data",{create:!0});await e.getDirectoryHandle("processed-data",{create:!0});const a=await e.getDirectoryHandle("analysis-metrics",{create:!0});for(const i of t.saveFormats)t.dataTypes.eegRaw&&await this.createFileStream(n,`eeg-raw.${i}`,`eeg-raw-${i}`),t.dataTypes.ppgRaw&&await this.createFileStream(n,`ppg-raw.${i}`,`ppg-raw-${i}`),t.dataTypes.accRaw&&await this.createFileStream(n,`acc-raw.${i}`,`acc-raw-${i}`),t.dataTypes.eegAnalysisMetrics&&await this.createFileStream(a,`eeg-analysis-metrics.${i}`,`eeg-analysis-metrics-${i}`),t.dataTypes.ppgAnalysisMetrics&&await this.createFileStream(a,`ppg-analysis-metrics.${i}`,`ppg-analysis-metrics-${i}`),t.dataTypes.accAnalysisMetrics&&await this.createFileStream(a,`acc-analysis-metrics.${i}`,`acc-analysis-metrics-${i}`);await this.createFileStream(e,"metadata.json","metadata")}async createFileStream(e,t,n){try{const i=await(await e.getFileHandle(t,{create:!0})).createWritable();this.fileStreams.set(n,i),await this.writeFileHeader(i,t)}catch(a){throw console.error(`❌ 파일 스트림 생성 실패 (${t}):`,a),a}}async writeFileHeader(e,t){var s;const n=(s=t.split(".").pop())==null?void 0:s.toLowerCase(),a=new Date().toISOString();let i="";switch(n){case"csv":t.includes("eeg-raw")?i=`# LINK BAND EEG Raw Data - Generated: ${a}
timestamp,fp1,fp2,quality,leadoff_ch1,leadoff_ch2
`:t.includes("ppg-raw")?i=`# LINK BAND PPG Raw Data - Generated: ${a}
timestamp,red,ir,quality
`:t.includes("acc-raw")?i=`# LINK BAND ACC Raw Data - Generated: ${a}
timestamp,x,y,z,magnitude
`:t.includes("eeg-analysis-metrics")?(i=`# LINK BAND EEG Analysis Metrics - Generated: ${a}
`,i+="timestamp,total_power,emotional_balance,attention,cognitive_load,focus_index,relaxation_index,stress_index,hemispheric_balance,emotional_stability,attention_level,meditation_level,",i+=`ma_total_power,ma_emotional_balance,ma_attention,ma_cognitive_load,ma_focus_index,ma_relaxation_index,ma_stress_index,ma_hemispheric_balance,ma_emotional_stability,ma_attention_level,ma_meditation_level
`):t.includes("ppg-analysis-metrics")?(i=`# LINK BAND PPG Analysis Metrics - Generated: ${a}
`,i+="timestamp,bpm,sdnn,rmssd,pnn50,lf_power,hf_power,lf_hf_ratio,stress_index,spo2,avnn,pnn20,sdsd,hr_max,hr_min,",i+=`ma_bpm,ma_sdnn,ma_rmssd,ma_pnn50,ma_lf_power,ma_hf_power,ma_lf_hf_ratio,ma_stress_index,ma_spo2,ma_avnn,ma_pnn20,ma_sdsd,ma_hr_max,ma_hr_min
`):t.includes("acc-analysis-metrics")&&(i=`# LINK BAND ACC Analysis Metrics - Generated: ${a}
`,i+="timestamp,activity_state,intensity,stability,avg_movement,max_movement,",i+=`ma_intensity,ma_stability,ma_avg_movement,ma_max_movement
`);break;case"json":t==="metadata.json"?i="":i=`[
`;break;case"jsonl":i="";break}i&&await e.write(new TextEncoder().encode(i))}async writeEEGData(e){this.currentSession&&(this.memoryUsage>this.MAX_MEMORY_USAGE&&await this.triggerGarbageCollection(),this.writeQueue.push({type:"eeg-raw",data:e}),this.isWriting||this.processWriteQueue(),this.currentSession&&(this.currentSession.totalSamples+=e.length,this.currentSession.estimatedSize+=this.estimateDataSize(e)))}async writePPGData(e){this.currentSession&&(this.writeQueue.push({type:"ppg-raw",data:e}),this.isWriting||this.processWriteQueue(),this.currentSession&&(this.currentSession.totalSamples+=e.length,this.currentSession.estimatedSize+=this.estimateDataSize(e)))}async writeACCData(e){this.currentSession&&(this.writeQueue.push({type:"acc-raw",data:e}),this.isWriting||this.processWriteQueue(),this.currentSession&&(this.currentSession.totalSamples+=e.length,this.currentSession.estimatedSize+=this.estimateDataSize(e)))}async writeEEGAnalysisMetrics(e){this.currentSession&&(this.writeQueue.push({type:"eeg-analysis-metrics",data:[e]}),this.isWriting||this.processWriteQueue(),this.currentSession&&(this.currentSession.estimatedSize+=this.estimateDataSize([e])))}async writePPGAnalysisMetrics(e){this.currentSession&&(this.writeQueue.push({type:"ppg-analysis-metrics",data:[e]}),this.isWriting||this.processWriteQueue(),this.currentSession&&(this.currentSession.estimatedSize+=this.estimateDataSize([e])))}async writeACCAnalysisMetrics(e){this.currentSession&&(this.writeQueue.push({type:"acc-analysis-metrics",data:[e]}),this.isWriting||this.processWriteQueue(),this.currentSession&&(this.currentSession.estimatedSize+=this.estimateDataSize([e])))}async processWriteQueue(){if(!(this.isWriting||this.writeQueue.length===0)){this.isWriting=!0;try{for(;this.writeQueue.length>0;){const e=this.writeQueue.shift();e&&(await this.writeDataToStreams(e.type,e.data),this.memoryUsage+=this.estimateDataSize(e.data))}}catch(e){console.error("❌ 쓰기 큐 처리 실패:",e)}finally{this.isWriting=!1}}}async writeDataToStreams(e,t){const n=this.fileStreams.get(`${e}-csv`);if(n){const s=this.convertToCSV(e,t);await n.write(new TextEncoder().encode(s))}const a=this.fileStreams.get(`${e}-json`);if(a){const s=this.convertToJSONLines(t);await a.write(new TextEncoder().encode(s))}const i=this.fileStreams.get(`${e}-binary`);if(i){const s=this.convertToBinary(e,t);await i.write(s)}}convertToCSV(e,t){let n="";for(const a of t)switch(e){case"eeg-raw":n+=`${a.timestamp},${a.fp1},${a.fp2},${a.signalQuality},${a.leadOff.ch1},${a.leadOff.ch2}
`;break;case"ppg-raw":n+=`${a.timestamp},${a.red},${a.ir},${a.signalQuality}
`;break;case"acc-raw":n+=`${a.timestamp},${a.x},${a.y},${a.z},${a.magnitude}
`;break;case"eeg-analysis-metrics":const i=a;n+=`${i.timestamp},${i.totalPower},${i.emotionalBalance},${i.attention},${i.cognitiveLoad},${i.focusIndex},${i.relaxationIndex},${i.stressIndex},${i.hemisphericBalance},${i.emotionalStability},${i.attentionLevel},${i.meditationLevel},`,n+=`${i.movingAverageValues.totalPower},${i.movingAverageValues.emotionalBalance},${i.movingAverageValues.attention},${i.movingAverageValues.cognitiveLoad},${i.movingAverageValues.focusIndex},${i.movingAverageValues.relaxationIndex},${i.movingAverageValues.stressIndex},${i.movingAverageValues.hemisphericBalance},${i.movingAverageValues.emotionalStability},${i.movingAverageValues.attentionLevel},${i.movingAverageValues.meditationLevel}
`;break;case"ppg-analysis-metrics":const s=a;n+=`${s.timestamp},${s.bpm},${s.sdnn},${s.rmssd},${s.pnn50},${s.lfPower},${s.hfPower},${s.lfHfRatio},${s.stressIndex},${s.spo2},${s.avnn},${s.pnn20},${s.sdsd},${s.hrMax},${s.hrMin},`,n+=`${s.movingAverageValues.bpm},${s.movingAverageValues.sdnn},${s.movingAverageValues.rmssd},${s.movingAverageValues.pnn50},${s.movingAverageValues.lfPower},${s.movingAverageValues.hfPower},${s.movingAverageValues.lfHfRatio},${s.movingAverageValues.stressIndex},${s.movingAverageValues.spo2},${s.movingAverageValues.avnn},${s.movingAverageValues.pnn20},${s.movingAverageValues.sdsd},${s.movingAverageValues.hrMax},${s.movingAverageValues.hrMin}
`;break;case"acc-analysis-metrics":const o=a;n+=`${o.timestamp},${o.activityState},${o.intensity},${o.stability},${o.avgMovement},${o.maxMovement},`,n+=`${o.movingAverageValues.intensity},${o.movingAverageValues.stability},${o.movingAverageValues.avgMovement},${o.movingAverageValues.maxMovement}
`;break}return n}convertToJSONLines(e){return e.map(t=>JSON.stringify(t)).join(`
`)+`
`}convertToBinary(e,t){const n=new ArrayBuffer(t.length*32),a=new DataView(n);return t.forEach((i,s)=>{const o=s*32;a.setFloat64(o,i.timestamp,!0),e==="eeg-raw"&&(a.setFloat32(o+8,i.fp1,!0),a.setFloat32(o+12,i.fp2,!0),a.setFloat32(o+16,i.signalQuality,!0))}),n}async endStreamingSession(){if(this.currentSession)try{if(await this.processWriteQueue(),this.currentSession.endTime=new Date,this.currentSession.duration=Math.floor((this.currentSession.endTime.getTime()-this.currentSession.startTime.getTime())/1e3),this.storageDirectoryHandle)try{const t=await(await this.storageDirectoryHandle.getDirectoryHandle("LinkBand-Data")).getDirectoryHandle("sessions"),n=this.currentSession.startTime.getFullYear().toString(),a=(this.currentSession.startTime.getMonth()+1).toString().padStart(2,"0"),o=await(await(await t.getDirectoryHandle(n)).getDirectoryHandle(a)).getDirectoryHandle(this.currentSession.id),l=await this.calculateDirectorySize(o);this.currentSession.estimatedSize=l}catch(e){console.warn("실제 디렉토리 크기 계산 실패, 추정값 사용:",e)}await this.saveSessionMetadata(),await this.closeAllStreams(),this.currentSession=null}catch(e){throw console.error("❌ 스트리밍 세션 종료 실패:",e),e}}async saveSessionMetadata(){if(!this.currentSession)return;const e=this.fileStreams.get("metadata");if(e){const t=JSON.stringify(this.currentSession,null,2);await e.write(new TextEncoder().encode(t))}}async closeAllStreams(){const e=Array.from(this.fileStreams.values()).map(t=>t.close());await Promise.all(e),this.fileStreams.clear()}estimateMemoryUsage(){return this.writeQueue.length*1024}estimateDataSize(e){return JSON.stringify(e).length}async triggerGarbageCollection(){await this.processWriteQueue(),this.memoryUsage=0}initializeCompressionWorker(){}generateSessionId(){return`session-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5)}`}getCurrentSession(){return this.currentSession}getStorageDirectoryHandle(){return this.storageDirectoryHandle}getMemoryUsage(){return this.memoryUsage}getStorageStatus(){return{isWriting:this.isWriting,queueLength:this.writeQueue.length,memoryUsage:this.memoryUsage,currentSession:this.currentSession}}async calculateDirectorySize(e){let t=0;try{for await(const[n,a]of e.entries())if(a.kind==="file")try{const i=await a.getFile();t+=i.size}catch(i){console.warn(`파일 크기 계산 실패: ${n}`,i)}else if(a.kind==="directory"){const i=await this.calculateDirectorySize(a);t+=i}}catch(n){console.error("디렉토리 크기 계산 실패:",n)}return t}};Ce(bg,"instance");let gb=bg;const wg=class wg{constructor(){Ce(this,"storageService");Ce(this,"MAX_HISTORY_SIZE",120);Ce(this,"eegHistory",[]);Ce(this,"bpmBuffer",[]);Ce(this,"currentHrMax",0);Ce(this,"currentHrMin",0);Ce(this,"LF_HF_BUFFER_SIZE",120);Ce(this,"rrIntervalBuffer",[]);Ce(this,"currentLfPower",0);Ce(this,"currentHfPower",0);Ce(this,"currentLfHfRatio",0);Ce(this,"lastLfHfCalculation",0);Ce(this,"LF_HF_CALCULATION_INTERVAL",1e3);Ce(this,"ppgQualityQueue",[]);Ce(this,"eegQualityQueue",[]);Ce(this,"accQualityQueue",[]);Ce(this,"accHistory",[]);Ce(this,"currentRMSSD",0);Ce(this,"currentSDNN",0);Ce(this,"currentSDSD",0);Ce(this,"currentAVNN",0);Ce(this,"currentPNN50",0);Ce(this,"currentPNN20",0);Ce(this,"currentStressIndex",0);Ce(this,"currentHRMax",0);Ce(this,"currentHRMin",0);this.storageService=gb.getInstance(),typeof window<"u"&&(window.debugAnalysisMetrics={getRRBufferStatus:()=>this.getRRBufferStatus(),forceCalculateLFHF:()=>this.forceCalculateLFHF(),getCurrentLfPower:()=>this.getCurrentLfPower(),getCurrentHfPower:()=>this.getCurrentHfPower(),getCurrentLfHfRatio:()=>this.getCurrentLfHfRatio(),getRRSample:()=>this.rrIntervalBuffer.slice(-10),getAllHRVMetrics:()=>({rmssd:this.getCurrentRMSSD(),sdnn:this.getCurrentSDNN(),sdsd:this.getCurrentSDSD(),avnn:this.getCurrentAVNN(),pnn50:this.getCurrentPNN50(),pnn20:this.getCurrentPNN20(),stressIndex:this.getCurrentStressIndex(),hrMax:this.getCurrentHRMax(),hrMin:this.getCurrentHRMin(),lfPower:this.getCurrentLfPower(),hfPower:this.getCurrentHfPower(),lfHfRatio:this.getCurrentLfHfRatio()})})}static getInstance(){return wg.instance||(wg.instance=new wg),wg.instance}async processEEGAnalysisMetrics(e,t){try{const n={timestamp:e.timestamp,totalPower:this.calculateTotalPower(e.bandPowers),emotionalBalance:this.calculateEmotionalBalance(e.bandPowers),attention:t.attentionLevel,cognitiveLoad:t.cognitiveLoad,focusIndex:t.focusIndex,relaxationIndex:t.relaxationIndex,stressIndex:t.stressIndex,hemisphericBalance:t.hemisphericBalance,emotionalStability:t.emotionalStability,attentionLevel:t.attentionLevel,meditationLevel:t.meditationLevel,movingAverageValues:{totalPower:0,emotionalBalance:0,attention:0,cognitiveLoad:0,focusIndex:0,relaxationIndex:0,stressIndex:0,hemisphericBalance:0,emotionalStability:0,attentionLevel:0,meditationLevel:0}},a=e.signalQuality.overall;a>=80&&this.addToEEGQualityQueue({totalPower:n.totalPower,emotionalBalance:n.emotionalBalance,attention:n.attention,cognitiveLoad:n.cognitiveLoad,focusIndex:n.focusIndex,relaxationIndex:n.relaxationIndex,stressIndex:n.stressIndex,hemisphericBalance:n.hemisphericBalance,emotionalStability:n.emotionalStability,attentionLevel:n.attentionLevel,meditationLevel:n.meditationLevel,sqi:a,timestamp:Date.now()}),n.movingAverageValues=this.calculateEEGMovingAverageFromQueue(),await this.storageService.writeEEGAnalysisMetrics(n)}catch{}}async processPPGAnalysisMetrics(e,t,n,a,i){try{i&&i.length>0&&this.updateRRIntervalBuffer(i);const s=n||0,o=a!==void 0?a:s>=80,l={timestamp:t,bpm:e.vitals.heartRate,sdnn:this.currentSDNN>0?this.currentSDNN:e.advancedHRV.sdnn,rmssd:e.vitals.hrv,pnn50:this.currentPNN50>0?this.currentPNN50:e.advancedHRV.pnn50,lfPower:this.currentLfPower>0?this.currentLfPower:e.advancedHRV.lfPower,hfPower:this.currentHfPower>0?this.currentHfPower:e.advancedHRV.hfPower,lfHfRatio:this.currentLfHfRatio>0?this.currentLfHfRatio:e.advancedHRV.lfHfRatio,stressIndex:this.currentStressIndex>0?this.currentStressIndex:e.advancedHRV.stressIndex,spo2:e.vitals.spo2||0,avnn:this.currentAVNN>0?this.currentAVNN:e.advancedHRV.avnn||0,pnn20:this.currentPNN20>0?this.currentPNN20:e.advancedHRV.pnn20||0,sdsd:this.currentSDSD>0?this.currentSDSD:e.advancedHRV.sdsd||0,hrMax:this.currentHRMax>0?this.currentHRMax:e.advancedHRV.hrMax||0,hrMin:this.currentHRMin>0?this.currentHRMin:e.advancedHRV.hrMin||0,movingAverageValues:{bpm:0,sdnn:0,rmssd:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,spo2:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0}};this.updateBpmBuffer(l.bpm),o&&this.addToPPGQualityQueue({bpm:l.bpm,sdnn:l.sdnn,rmssd:l.rmssd,pnn50:l.pnn50,lfPower:l.lfPower,hfPower:l.hfPower,lfHfRatio:l.lfHfRatio,stressIndex:l.stressIndex,spo2:l.spo2||0,avnn:l.avnn,pnn20:l.pnn20,sdsd:l.sdsd,hrMax:l.hrMax,hrMin:l.hrMin,timestamp:t,sqi:s}),l.movingAverageValues=this.calculatePPGMovingAverageFromQueue(),await this.storageService.writePPGAnalysisMetrics(l)}catch{}}async processACCAnalysisMetrics(e,t){try{const n={timestamp:t,activityState:e.activity.type,intensity:e.activity.intensity,stability:e.posture.stability,avgMovement:e.movement.avgMovement,maxMovement:e.movement.maxMovement,movingAverageValues:{intensity:0,stability:0,avgMovement:0,maxMovement:0}},a=this.calculateACCSignalQuality({avgMovement:e.movement.avgMovement,stdMovement:e.movement.stdMovement,maxMovement:e.movement.maxMovement});a>=80&&this.addToACCQualityQueue({activityState:n.activityState,intensity:n.intensity,stability:n.stability,avgMovement:n.avgMovement,maxMovement:n.maxMovement,signalQuality:a,timestamp:Date.now()}),n.movingAverageValues=this.calculateACCMovingAverageFromQueue(),await this.storageService.writeACCAnalysisMetrics(n)}catch{}}calculateTotalPower(e){return e?(e.delta||0)+(e.theta||0)+(e.alpha||0)+(e.beta||0)+(e.gamma||0):0}calculateEmotionalBalance(e){if(!e)return 0;const t=e.alpha||0,n=e.beta||0,a=n+.001>0?t/(n+.001):0;return Math.max(0,Math.min(2,a))}addToEEGHistory(e){this.eegHistory.push({totalPower:e.totalPower,emotionalBalance:e.emotionalBalance,attention:e.attention,cognitiveLoad:e.cognitiveLoad,focusIndex:e.focusIndex,relaxationIndex:e.relaxationIndex,stressIndex:e.stressIndex,hemisphericBalance:e.hemisphericBalance,emotionalStability:e.emotionalStability,attentionLevel:e.attentionLevel,meditationLevel:e.meditationLevel}),this.eegHistory.length>this.MAX_HISTORY_SIZE&&this.eegHistory.shift()}addToEEGQualityQueue(e){this.eegQualityQueue.push(e),this.eegQualityQueue.length>this.MAX_HISTORY_SIZE&&this.eegQualityQueue.shift()}addToACCHistory(e){this.accHistory.push({intensity:e.intensity,stability:e.stability,avgMovement:e.avgMovement,maxMovement:e.maxMovement}),this.accHistory.length>this.MAX_HISTORY_SIZE&&this.accHistory.shift()}calculateEEGMovingAverage(){if(this.eegHistory.length===0)return{totalPower:0,emotionalBalance:0,attention:0,cognitiveLoad:0,focusIndex:0,relaxationIndex:0,stressIndex:0,hemisphericBalance:0,emotionalStability:0,attentionLevel:0,meditationLevel:0};const e=this.eegHistory.length,t=this.eegHistory.reduce((n,a)=>({totalPower:(n.totalPower||0)+(a.totalPower||0),emotionalBalance:(n.emotionalBalance||0)+(a.emotionalBalance||0),attention:(n.attention||0)+(a.attention||0),cognitiveLoad:(n.cognitiveLoad||0)+(a.cognitiveLoad||0),focusIndex:(n.focusIndex||0)+(a.focusIndex||0),relaxationIndex:(n.relaxationIndex||0)+(a.relaxationIndex||0),stressIndex:(n.stressIndex||0)+(a.stressIndex||0),hemisphericBalance:(n.hemisphericBalance||0)+(a.hemisphericBalance||0),emotionalStability:(n.emotionalStability||0)+(a.emotionalStability||0),attentionLevel:(n.attentionLevel||0)+(a.attentionLevel||0),meditationLevel:(n.meditationLevel||0)+(a.meditationLevel||0)}),{totalPower:0,emotionalBalance:0,attention:0,cognitiveLoad:0,focusIndex:0,relaxationIndex:0,stressIndex:0,hemisphericBalance:0,emotionalStability:0,attentionLevel:0,meditationLevel:0});return{totalPower:(t.totalPower||0)/e,emotionalBalance:(t.emotionalBalance||0)/e,attention:(t.attention||0)/e,cognitiveLoad:(t.cognitiveLoad||0)/e,focusIndex:(t.focusIndex||0)/e,relaxationIndex:(t.relaxationIndex||0)/e,stressIndex:(t.stressIndex||0)/e,hemisphericBalance:(t.hemisphericBalance||0)/e,emotionalStability:(t.emotionalStability||0)/e,attentionLevel:(t.attentionLevel||0)/e,meditationLevel:(t.meditationLevel||0)/e}}addToPPGQualityQueue(e){this.ppgQualityQueue.push(e),this.updateBpmBuffer(e.bpm),this.ppgQualityQueue.length>this.MAX_HISTORY_SIZE&&this.ppgQualityQueue.shift()}updateRRIntervalBuffer(e){if(!(!e||e.length===0)){for(const t of e)t>=300&&t<=1200&&this.rrIntervalBuffer.push(t);for(;this.rrIntervalBuffer.length>this.LF_HF_BUFFER_SIZE;)this.rrIntervalBuffer.shift();this.rrIntervalBuffer.length>=this.LF_HF_BUFFER_SIZE&&this.calculateLFHF()}}calculateLFHF(){const e=Date.now();if(!(this.rrIntervalBuffer.length<30)&&!(this.rrIntervalBuffer.length>=this.LF_HF_BUFFER_SIZE&&e-this.lastLfHfCalculation<this.LF_HF_CALCULATION_INTERVAL))try{const t=[...this.rrIntervalBuffer];this.calculateTimeDomainMetrics(t),this.calculateStressMetrics(t),this.updateHeartRateStatistics(),this.calculateFrequencyDomainMetrics(t),this.lastLfHfCalculation=e}catch{}}calculateTimeDomainMetrics(e){if(e.length<10)return;this.currentAVNN=e.reduce((a,i)=>a+i,0)/e.length;const t=this.currentAVNN,n=e.reduce((a,i)=>a+Math.pow(i-t,2),0)/e.length;if(this.currentSDNN=Math.sqrt(n),e.length>=2){const a=[];for(let i=1;i<e.length;i++){const s=e[i]-e[i-1];a.push(s*s)}this.currentRMSSD=Math.sqrt(a.reduce((i,s)=>i+s,0)/a.length)}else this.currentRMSSD=0;if(e.length>=2){const a=[];for(let o=1;o<e.length;o++)a.push(e[o]-e[o-1]);const i=a.reduce((o,l)=>o+l,0)/a.length,s=a.reduce((o,l)=>o+Math.pow(l-i,2),0)/a.length;this.currentSDSD=Math.sqrt(s)}else this.currentSDSD=0;if(e.length>=2){let a=0;for(let i=1;i<e.length;i++)Math.abs(e[i]-e[i-1])>50&&a++;this.currentPNN50=a/(e.length-1)*100}else this.currentPNN50=0;if(e.length>=2){let a=0;for(let i=1;i<e.length;i++)Math.abs(e[i]-e[i-1])>20&&a++;this.currentPNN20=a/(e.length-1)*100}else this.currentPNN20=0}calculateStressMetrics(e){if(e.length<10){this.currentStressIndex=0;return}const t=Math.max(0,Math.min(1,(100-this.currentSDNN)/70)),n=Math.max(0,Math.min(1,(50-this.currentRMSSD)/30)),a=6e4/this.currentAVNN,i=Math.max(0,Math.min(1,Math.abs(a-80)/40));this.currentStressIndex=t*.4+n*.4+i*.2,this.currentStressIndex=Math.max(0,Math.min(1,this.currentStressIndex))}updateHeartRateStatistics(){if(this.bpmBuffer.length===0){this.currentHRMax=0,this.currentHRMin=0;return}const e=this.bpmBuffer.filter(t=>t>40&&t<200);e.length>0?(this.currentHRMax=Math.max(...e),this.currentHRMin=Math.min(...e)):(this.currentHRMax=0,this.currentHRMin=0)}calculateFrequencyDomainMetrics(e){const t=e.filter(m=>m>=300&&m<=2e3);if(t.length/e.length<.75)return;let a=0;for(let m=1;m<t.length;m++)Math.abs(t[m]-t[m-1])/t[m-1]>.25&&a++;if(1-a/(t.length-1)<.75||e.length<30)return;const s=4,o=this.resampleRRIntervals(e,s);if(o.length<16)return;const{frequencies:l,powerSpectralDensity:c}=this.computeWelchPeriodogram(o,s);l.length>1&&l[1]-l[0],l[l.length-1];const u=this.integratePowerInBand(l,c,.04,.15),h=this.integratePowerInBand(l,c,.15,.4);let d=u*1e6,A=h*1e6;if(A<1&&d>10){const y=this.integratePowerInBand(l,c,.12,.5)*100;y>A*1.5&&(A=y)}const g=this.getValidValue(d,this.currentLfPower,.1),p=this.getValidValue(A,this.currentHfPower,.1),v=p>0?g/p:this.currentLfHfRatio;this.currentLfPower=g,this.currentHfPower=p,this.currentLfHfRatio=this.getValidValue(v,this.currentLfHfRatio,.1)}resetAllHRVMetrics(){this.currentRMSSD=0,this.currentSDNN=0,this.currentSDSD=0,this.currentAVNN=0,this.currentPNN50=0,this.currentPNN20=0,this.currentStressIndex=0,this.currentHRMax=0,this.currentHRMin=0,this.currentLfPower=0,this.currentHfPower=0,this.currentLfHfRatio=0}resampleRRIntervals(e,t){if(e.length<2)return[];const n=e.map(c=>c/1e3),a=[0];for(let c=0;c<n.length;c++)a.push(a[a.length-1]+n[c]);const i=a[a.length-1],s=Math.floor(i*t);if(s<4)return[];const o=Array.from({length:s},(c,u)=>u/t);return this.interpolateLinear(a,n,o)}interpolateLinear(e,t,n){const a=[];for(const i of n)if(i<=e[0])a.push(t[0]);else if(i>=e[e.length-1])a.push(t[t.length-1]);else{let s=0;for(;s<e.length-1&&e[s+1]<i;)s++;const o=e[s],l=e[s+1],c=t[s],u=t[s+1],h=c+(u-c)*(i-o)/(l-o);a.push(h)}return a}computeWelchPeriodogram(e,t){const i=Math.max(64,Math.min(256,Math.floor(e.length/2))),s=Math.floor(i/2),o=this.nextPowerOfTwo(i),l=[];for(let A=0;A<=o/2;A++)l.push(A*t/o);const c=[],u=this.generateHammingWindow(i);let h=0;for(;h+i<=e.length;){const g=e.slice(h,h+i).map((x,b)=>x*u[b]),p=new Array(o).fill(0);for(let x=0;x<g.length;x++)p[x]=g[x];const v=this.performFFT(p),m=u.reduce((x,b)=>x+b*b,0),y=[];for(let x=0;x<=o/2;x++){const b=v[2*x]||0,S=v[2*x+1]||0;let _=(b*b+S*S)/(t*m);x>0&&x<o/2&&(_*=2),y.push(_)}c.push(y),h+=i-s}const d=new Array(l.length).fill(0);for(const A of c)for(let g=0;g<A.length;g++)d[g]+=A[g];for(let A=0;A<d.length;A++)d[A]/=c.length;return{frequencies:l,powerSpectralDensity:d}}analyzeFrequencyBand(e,t,n,a){let i=0,s=0,o=0;for(let l=0;l<e.length;l++){const c=e[l];if(c>=n&&c<=a){i++;const u=t[l];o+=u,s=Math.max(s,u)}}return{pointCount:i,maxPower:s,avgPower:i>0?o/i:0,freqRange:`${n}-${a} Hz`,powerSum:o}}integratePowerInBand(e,t,n,a){let i=0;for(let s=0;s<e.length-1;s++){const o=e[s],l=e[s+1];if(o>=n&&l<=a){const c=l-o,u=(t[s]+t[s+1])/2;i+=u*c}else if(o<n&&l>n&&l<=a){const c=l-n,h=(t[s]+(t[s+1]-t[s])*(n-o)/(l-o)+t[s+1])/2;i+=h*c}else if(o>=n&&o<a&&l>a){const c=a-o,u=t[s]+(t[s+1]-t[s])*(a-o)/(l-o),h=(t[s]+u)/2;i+=h*c}}return i}generateHammingWindow(e){const t=[];for(let n=0;n<e;n++)t.push(.54-.46*Math.cos(2*Math.PI*n/(e-1)));return t}nextPowerOfTwo(e){let t=1;for(;t<e;)t*=2;return t}performFFT(e){const t=e.length;if(t<=1)return e;if(t&t-1)throw new Error("FFT 입력 크기는 2의 거듭제곱이어야 합니다");const n=new Array(t*2);for(let s=0;s<t;s++)n[2*s]=e[s],n[2*s+1]=0;let a=0;for(let s=1;s<t;s++){let o=t>>1;for(;a&o;)a^=o,o>>=1;a^=o,s<a&&([n[2*s],n[2*a]]=[n[2*a],n[2*s]],[n[2*s+1],n[2*a+1]]=[n[2*a+1],n[2*s+1]])}let i=2;for(;i<=t;){const s=-2*Math.PI/i,o=Math.cos(s),l=Math.sin(s);for(let c=0;c<t;c+=i){let u=1,h=0;for(let d=0;d<i/2;d++){const A=n[2*(c+d)],g=n[2*(c+d)+1],p=n[2*(c+d+i/2)]*u-n[2*(c+d+i/2)+1]*h,v=n[2*(c+d+i/2)]*h+n[2*(c+d+i/2)+1]*u;n[2*(c+d)]=A+p,n[2*(c+d)+1]=g+v,n[2*(c+d+i/2)]=A-p,n[2*(c+d+i/2)+1]=g-v;const m=u*o-h*l;h=u*l+h*o,u=m}}i*=2}return n}getCurrentLfPower(){return this.currentLfPower}getCurrentHfPower(){return this.currentHfPower}getCurrentLfHfRatio(){return this.currentLfHfRatio}getCurrentRMSSD(){return this.currentRMSSD}getCurrentSDNN(){return this.currentSDNN}getCurrentSDSD(){return this.currentSDSD}getCurrentAVNN(){return this.currentAVNN}getCurrentPNN50(){return this.currentPNN50}getCurrentPNN20(){return this.currentPNN20}getCurrentStressIndex(){return this.currentStressIndex}getCurrentHRMax(){return this.currentHRMax}getCurrentHRMin(){return this.currentHRMin}updateBpmBuffer(e){e>40&&e<200&&(this.bpmBuffer.push(e),this.bpmBuffer.length>this.MAX_HISTORY_SIZE&&this.bpmBuffer.shift())}calculateEEGMovingAverageFromQueue(){if(this.eegQualityQueue.length===0)return{totalPower:0,emotionalBalance:0,attention:0,cognitiveLoad:0,focusIndex:0,relaxationIndex:0,stressIndex:0,hemisphericBalance:0,emotionalStability:0,attentionLevel:0,meditationLevel:0};const e=this.eegQualityQueue.length,t=this.eegQualityQueue.reduce((n,a)=>({totalPower:n.totalPower+a.totalPower,emotionalBalance:n.emotionalBalance+a.emotionalBalance,attention:n.attention+a.attention,cognitiveLoad:n.cognitiveLoad+a.cognitiveLoad,focusIndex:n.focusIndex+a.focusIndex,relaxationIndex:n.relaxationIndex+a.relaxationIndex,stressIndex:n.stressIndex+a.stressIndex,hemisphericBalance:n.hemisphericBalance+a.hemisphericBalance,emotionalStability:n.emotionalStability+a.emotionalStability,attentionLevel:n.attentionLevel+a.attentionLevel,meditationLevel:n.meditationLevel+a.meditationLevel}),{totalPower:0,emotionalBalance:0,attention:0,cognitiveLoad:0,focusIndex:0,relaxationIndex:0,stressIndex:0,hemisphericBalance:0,emotionalStability:0,attentionLevel:0,meditationLevel:0});return{totalPower:t.totalPower/e,emotionalBalance:t.emotionalBalance/e,attention:t.attention/e,cognitiveLoad:t.cognitiveLoad/e,focusIndex:t.focusIndex/e,relaxationIndex:t.relaxationIndex/e,stressIndex:t.stressIndex/e,hemisphericBalance:t.hemisphericBalance/e,emotionalStability:t.emotionalStability/e,attentionLevel:t.attentionLevel/e,meditationLevel:t.meditationLevel/e}}getValidValue(e,t=0,n=.01){return e>n&&!isNaN(e)&&isFinite(e)?e:t}calculatePPGMovingAverageFromQueue(){if(this.ppgQualityQueue.length===0)return{bpm:0,sdnn:0,rmssd:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0,spo2:0};const e=(m,y=.01)=>{const x=m.filter(b=>b>y&&!isNaN(b)&&isFinite(b));return x.length===0?0:x.reduce((b,S)=>b+S,0)/x.length},t=this.ppgQualityQueue.map(m=>m.bpm),n=this.ppgQualityQueue.map(m=>m.sdnn),a=this.ppgQualityQueue.map(m=>m.rmssd),i=this.ppgQualityQueue.map(m=>m.pnn50),s=this.ppgQualityQueue.map(m=>m.lfPower),o=this.ppgQualityQueue.map(m=>m.hfPower),l=this.ppgQualityQueue.map(m=>m.lfHfRatio),c=this.ppgQualityQueue.map(m=>m.stressIndex),u=this.ppgQualityQueue.map(m=>m.avnn),h=this.ppgQualityQueue.map(m=>m.pnn20),d=this.ppgQualityQueue.map(m=>m.sdsd),A=this.ppgQualityQueue.map(m=>m.hrMax),g=this.ppgQualityQueue.map(m=>m.hrMin),p=this.ppgQualityQueue.map(m=>m.spo2);return{bpm:e(t,30),sdnn:e(n,1),rmssd:e(a,1),pnn50:e(i,0),lfPower:e(s,.1),hfPower:e(o,.1),lfHfRatio:e(l,.1),stressIndex:e(c,.01),avnn:e(u,100),pnn20:e(h,0),sdsd:e(d,1),hrMax:e(A,50),hrMin:e(g,30),spo2:e(p,70)}}calculateACCSignalQuality(e){return 85}addToACCQualityQueue(e){this.accQualityQueue.push(e),this.accQualityQueue.length>this.MAX_HISTORY_SIZE&&this.accQualityQueue.shift()}calculateACCMovingAverageFromQueue(){if(this.accQualityQueue.length===0)return{intensity:0,stability:0,avgMovement:0,maxMovement:0};const e=this.accQualityQueue.length,t=this.accQualityQueue.reduce((n,a)=>({intensity:n.intensity+a.intensity,stability:n.stability+a.stability,avgMovement:n.avgMovement+a.avgMovement,maxMovement:n.maxMovement+a.maxMovement}),{intensity:0,stability:0,avgMovement:0,maxMovement:0});return{intensity:t.intensity/e,stability:t.stability/e,avgMovement:t.avgMovement/e,maxMovement:t.maxMovement/e}}getRRBufferStatus(){return{bufferLength:this.rrIntervalBuffer.length,bufferCapacity:this.LF_HF_BUFFER_SIZE,isReady:this.rrIntervalBuffer.length>=this.LF_HF_BUFFER_SIZE,lastCalculation:this.lastLfHfCalculation,currentLfPower:this.currentLfPower,currentHfPower:this.currentHfPower,currentLfHfRatio:this.currentLfHfRatio,timeSinceLastCalc:Date.now()-this.lastLfHfCalculation}}forceCalculateLFHF(){this.lastLfHfCalculation=0,this.calculateLFHF()}};Ce(wg,"instance");let b0=wg;class RX{constructor(){Ce(this,"storeCallbacks",{});Ce(this,"systemCallbacks",{});Ce(this,"isProcessing",!1);Ce(this,"isProcessingPPG",!1);Ce(this,"performanceMetrics");Ce(this,"bluetoothService",null);Ce(this,"isStarted",!1);Ce(this,"processedDataStore",null);Ce(this,"timestampSynchronizer");Ce(this,"eegBuffer");Ce(this,"ppgBuffer");Ce(this,"accBuffer");Ce(this,"eegProcessor");Ce(this,"ppgProcessor");Ce(this,"accProcessor");Ce(this,"analysisMetricsService");this.timestampSynchronizer=new Yfe,this.eegBuffer=new Kfe(5,250),this.ppgBuffer=new Wfe(10,50),this.accBuffer=new qfe(5,30),this.eegProcessor=new Zfe,this.ppgProcessor=new Jfe,this.accProcessor=new ege,this.analysisMetricsService=b0.getInstance(),this.performanceMetrics={processingTime:0,memoryUsage:0,bufferSizes:{eeg:0,ppg:0,acc:0},droppedPackets:0,timestampSyncQuality:1,timestampDriftRate:0},this.initializeProcessedDataStore(),setInterval(()=>{this.isProcessingPPG&&(this.isProcessingPPG=!1)},5e3)}initializeProcessedDataStore(){try{this.processedDataStore={updateEEGGraphData:cr.getState().updateEEGGraphData,updatePPGGraphData:cr.getState().updatePPGGraphData,updateACCGraphData:cr.getState().updateACCGraphData,updateEEGAnalysis:cr.getState().updateEEGAnalysis,updatePPGAnalysis:cr.getState().updatePPGAnalysis,updateACCAnalysis:cr.getState().updateACCAnalysis,updateSignalQuality:cr.getState().updateSignalQuality,updateEEGSQI:cr.getState().updateEEGSQI,updatePPGSQI:cr.getState().updatePPGSQI}}catch(e){console.error("🔧 ProcessedDataStore 초기화 실패:",e)}}setCallbacks(e){this.systemCallbacks=e}setBluetoothService(e){this.bluetoothService=e}async start(){if(!this.isStarted)try{this.bluetoothService&&(this.bluetoothService.onDataReceived=e=>{this.handleBluetoothData(e)}),this.isStarted=!0}catch(e){throw e}}async stop(){if(this.isStarted)try{this.bluetoothService&&(this.bluetoothService.onDataReceived=null),this.isStarted=!1}catch(e){throw e}}cleanup(){this.stop(),this.clearBuffers(),this.bluetoothService=null,this.systemCallbacks={},this.storeCallbacks={}}handleBluetoothData(e){try{e.type==="eeg"&&e.samples?this.processEEGData(e.samples):e.type==="ppg"&&e.samples?this.processPPGData(e.samples):e.type==="acc"&&e.samples?this.processACCData(e.samples):e.type==="battery"&&e.samples&&this.processBatteryData(e.samples[0])}catch(t){this.handleError(t instanceof Error?t.message:"알 수 없는 오류","StreamProcessor.handleBluetoothData")}}setStoreCallbacks(e){this.storeCallbacks=e}handleError(e,t){const n=new Error(`[${t}] ${e}`);this.systemCallbacks.onError?this.systemCallbacks.onError(n):this.storeCallbacks.onError&&this.storeCallbacks.onError(e,t)}processEEGData(e){const t=performance.now();if(this.isProcessing){this.performanceMetrics.droppedPackets++;return}this.isProcessing=!0;try{const n=[];e.forEach(i=>{const s={timestamp:i.timestamp,fp1:i.ch1,fp2:i.ch2,signalQuality:this.calculateEEGSignalQuality(i.leadoff_ch1,i.leadoff_ch2),leadOff:{ch1:i.leadoff_ch1,ch2:i.leadoff_ch2}};this.eegBuffer.push(s),n.push(s)}),this.systemCallbacks.onEEGData&&this.systemCallbacks.onEEGData(n);const a=this.eegBuffer.toArray();a.length>=500&&this.performAdvancedEEGProcessing(a),this.updatePerformanceMetrics(t)}catch(n){this.handleError(n instanceof Error?n.message:"알 수 없는 오류","StreamProcessor.processEEGData")}finally{this.isProcessing=!1}}processPPGData(e){const t=performance.now();if(this.isProcessingPPG){this.performanceMetrics.droppedPackets++;return}this.isProcessingPPG=!0;try{const n=[];e.forEach(i=>{const s={timestamp:i.timestamp,red:i.red,ir:i.ir,leadOff:{ch1:!1,ch2:!1}};this.ppgBuffer.push(s),n.push(s)}),this.systemCallbacks.onPPGData&&this.systemCallbacks.onPPGData(n);const a=this.ppgBuffer.toArray();a.length>=50&&this.performAdvancedPPGProcessing(a),this.updatePerformanceMetrics(t)}catch(n){this.handleError(n instanceof Error?n.message:"알 수 없는 오류","StreamProcessor.processPPGData")}finally{this.isProcessingPPG=!1}}processACCData(e){const t=performance.now();if(this.isProcessing){this.performanceMetrics.droppedPackets++;return}this.isProcessing=!0;try{const n=[];e.forEach(i=>{const s={timestamp:i.timestamp,x:i.x,y:i.y,z:i.z,magnitude:Math.sqrt(i.x**2+i.y**2+i.z**2)};this.accBuffer.push(s),n.push(s)}),this.systemCallbacks.onACCData&&this.systemCallbacks.onACCData(n);const a=this.accBuffer.toArray();a.length>=30&&this.performAdvancedACCProcessing(a),this.updatePerformanceMetrics(t)}catch(n){this.handleError(n instanceof Error?n.message:"알 수 없는 오류","StreamProcessor.processACCData")}finally{this.isProcessing=!1}}processBatteryData(e){const t=performance.now();try{this.storeCallbacks.updateBatteryData&&this.storeCallbacks.updateBatteryData({level:e.level,percentage:e.percentage,timestamp:e.timestamp,status:this.getBatteryStatus(e.level)}),this.updatePerformanceMetrics(t)}catch(n){this.handleError(n instanceof Error?n.message:"알 수 없는 오류","StreamProcessor.processBatteryData")}}getBatteryStatus(e){return e>=70?"high":e>=30?"medium":"low"}calculateEEGSignalQuality(e,t){return e&&t?0:e||t?.5:1}updatePerformanceMetrics(e){const t=performance.now();this.performanceMetrics.processingTime=t-e,this.performanceMetrics.memoryUsage=0,this.performanceMetrics.bufferSizes={eeg:this.eegBuffer.getSize(),ppg:this.ppgBuffer.getSize(),acc:this.accBuffer.getSize()},this.performanceMetrics.timestampSyncQuality=1,this.performanceMetrics.timestampDriftRate=0,this.storeCallbacks.updatePerformanceMetrics&&this.storeCallbacks.updatePerformanceMetrics(this.performanceMetrics)}getPerformanceMetrics(){return{...this.performanceMetrics}}getEEGBufferData(){return this.eegBuffer.toArray()}getPPGBufferData(){return this.ppgBuffer.toArray()}getACCBufferData(){return this.accBuffer.toArray()}clearBuffers(){this.eegBuffer.clear(),this.ppgBuffer.clear(),this.accBuffer.clear()}dispose(){this.clearBuffers(),this.storeCallbacks={}}async performAdvancedEEGProcessing(e){var t,n,a;try{const i=await this.eegProcessor.processEEGData(e);if(this.processedDataStore){const s={filteredData:i.filteredData,signalQuality:i.signalQuality,bandPowers:i.bandPowers,brainState:i.brainState,frequencySpectrum:i.frequencySpectrum,indices:i.indices,rawAnalysis:i.rawAnalysis,timestamp:Date.now()};if(i.filteredData&&i.filteredData.length>0){const l=i.filteredData.map(u=>({timestamp:u.timestamp,value:u.fp1})),c=i.filteredData.map(u=>({timestamp:u.timestamp,value:u.fp2}));this.processedDataStore.updateEEGGraphData(l,c)}const o={...s,frequencySpectrum:i.frequencySpectrum?{frequencies:i.frequencySpectrum.frequencies,ch1Power:i.frequencySpectrum.ch1Power,ch2Power:i.frequencySpectrum.ch2Power,dominantFrequency:i.frequencySpectrum.frequencies[i.frequencySpectrum.ch1Power.indexOf(Math.max(...i.frequencySpectrum.ch1Power))]||0}:null};if(this.processedDataStore.updateEEGAnalysis(o),i.signalQuality&&i.signalQuality.overall!==void 0){const l=i.signalQuality.overall,c=l>=90?"excellent":l>=80?"good":l>=60?"fair":l>0?"poor":"unknown";this.processedDataStore.updateSignalQuality({eegQuality:l,overall:c,lastUpdated:Date.now()})}if((t=i.rawAnalysis)!=null&&t.ch1SQI&&((n=i.rawAnalysis)!=null&&n.ch2SQI)){const l={ch1SQI:i.rawAnalysis.ch1SQI.map((c,u)=>{var h;return{timestamp:((h=i.filteredData[u])==null?void 0:h.timestamp)||Date.now(),value:c}}),ch2SQI:i.rawAnalysis.ch2SQI.map((c,u)=>{var h;return{timestamp:((h=i.filteredData[u])==null?void 0:h.timestamp)||Date.now(),value:c}})};this.processedDataStore.updateEEGSQI(l)}if(i.indices&&i.bandPowers)try{const l=((a=i.signalQuality)==null?void 0:a.overall)||0;await this.analysisMetricsService.processEEGAnalysisMetrics({timestamp:Date.now(),bandPowers:i.bandPowers,signalQuality:{overall:i.signalQuality.overall,channels:[i.signalQuality.fp1,i.signalQuality.fp2],artifacts:{movement:!1,eyeBlink:!1,muscleNoise:!1}},brainState:i.brainState},{focusIndex:i.indices.focusIndex,relaxationIndex:i.indices.relaxationIndex,stressIndex:i.indices.stressIndex,hemisphericBalance:i.indices.hemisphericBalance,cognitiveLoad:i.indices.cognitiveLoad,emotionalStability:i.indices.emotionalStability,attentionLevel:i.indices.focusIndex,meditationLevel:i.indices.relaxationIndex})}catch{}}}catch(i){this.handleError(i instanceof Error?i.message:"고급 EEG 처리 오류","StreamProcessor.performAdvancedEEGProcessing")}}async performAdvancedPPGProcessing(e){var n,a,i,s,o,l,c,u,h,d,A,g,p,v,m;if(this.isProcessingPPG)return this.isProcessingPPG=!1,this.performAdvancedPPGProcessing(e);this.isProcessingPPG=!0;const t=setTimeout(()=>{this.isProcessingPPG&&(this.isProcessingPPG=!1)},1e3);try{const y=await this.ppgProcessor.processPPGData(e);if(y.filteredData&&y.filteredData.length>0){const x=y.filteredData.map(S=>({timestamp:S.timestamp,value:S.red})),b=y.filteredData.map(S=>({timestamp:S.timestamp,value:S.ir}));this.processedDataStore.updatePPGGraphData(x,b)}if(this.processedDataStore){const b={...{filteredData:y.filteredData,vitals:y.vitals,signalQuality:y.signalQuality,peakInfo:y.peakInfo,timestamp:Date.now()},indices:y.vitals?{heartRate:y.vitals.heartRate||0,hrv:y.vitals.hrv||0,spo2:y.vitals.spo2||0,rmssd:y.vitals.hrv||0,sdnn:((n=y.advancedHRV)==null?void 0:n.sdnn)||0,pnn50:((a=y.advancedHRV)==null?void 0:a.pnn50)||0,lfPower:((i=y.advancedHRV)==null?void 0:i.lfPower)||0,hfPower:((s=y.advancedHRV)==null?void 0:s.hfPower)||0,lfHfRatio:((o=y.advancedHRV)==null?void 0:o.lfHfRatio)||0,stressIndex:((l=y.advancedHRV)==null?void 0:l.stressIndex)||0,avnn:((c=y.advancedHRV)==null?void 0:c.avnn)||0,pnn20:((u=y.advancedHRV)==null?void 0:u.pnn20)||0,sdsd:((h=y.advancedHRV)==null?void 0:h.sdsd)||0,hrMax:((d=y.advancedHRV)==null?void 0:d.hrMax)||0,hrMin:((A=y.advancedHRV)==null?void 0:A.hrMin)||0,triangularIndex:0,respiratoryRate:0,respiratoryVariability:0,respiratoryDepth:0,respiratoryRegularity:0,respiratoryEffort:0,apneaEvents:0,respiratoryLfPower:0,respiratoryHfPower:0,respiratoryTotalPower:0,respiratorySpectralEntropy:0}:{heartRate:0,hrv:0,spo2:0,rmssd:0,sdnn:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0,triangularIndex:0,respiratoryRate:0,respiratoryVariability:0,respiratoryDepth:0,respiratoryRegularity:0,respiratoryEffort:0,apneaEvents:0,respiratoryLfPower:0,respiratoryHfPower:0,respiratoryTotalPower:0,respiratorySpectralEntropy:0}};if(this.processedDataStore.updatePPGAnalysis(b),(g=y.signalQuality)!=null&&g.redSQI&&((p=y.signalQuality)!=null&&p.irSQI)&&((v=y.signalQuality)!=null&&v.overallSQI)&&y.filteredData){const S=Math.min(400,y.signalQuality.redSQI.length),_=y.signalQuality.redSQI.slice(0,S).map((B,D)=>{var T;return{timestamp:((T=y.filteredData[D])==null?void 0:T.timestamp)||Date.now()-(S-D)*20,value:B}}),C=y.signalQuality.irSQI.slice(0,S).map((B,D)=>{var T;return{timestamp:((T=y.filteredData[D])==null?void 0:T.timestamp)||Date.now()-(S-D)*20,value:B}}),w=y.signalQuality.overallSQI.slice(0,S).map((B,D)=>{var T;return{timestamp:((T=y.filteredData[D])==null?void 0:T.timestamp)||Date.now()-(S-D)*20,value:B}});this.processedDataStore.updatePPGSQI({redSQI:_,irSQI:C,overallSQI:w})}if(y.vitals&&y.advancedHRV)try{let S=0;if((m=y.signalQuality)!=null&&m.overallSQI&&y.signalQuality.overallSQI.length>0){const C=y.signalQuality.overallSQI.slice(-10);S=C.reduce((w,B)=>w+B,0)/C.length}const _=S>=80;await this.analysisMetricsService.processPPGAnalysisMetrics({vitals:y.vitals,advancedHRV:y.advancedHRV},Date.now(),S,_,y.rrIntervals)}catch{}}}catch(y){this.handleError(y instanceof Error?y.message:"고급 PPG 처리 오류","StreamProcessor.performAdvancedPPGProcessing")}finally{clearTimeout(t),this.isProcessingPPG=!1}}async performAdvancedACCProcessing(e){if(!(!e||e.length===0))try{const t=await this.accProcessor.processACCData(e);if(this.processedDataStore&&this.processedDataStore.updateACCAnalysis){const n=t.magnitude.map(a=>({timestamp:a.timestamp,value:a.value}));if(this.processedDataStore.updateACCAnalysis({magnitude:n,indices:{activity:t.activity.intensity,stability:t.posture.stability,intensity:t.activity.intensity,balance:t.posture.balance,activityState:t.activity.type,avgMovement:t.movement.avgMovement,stdMovement:t.movement.stdMovement,maxMovement:t.movement.maxMovement},lastUpdated:Date.now(),rawBufferData:e}),t.activity&&t.movement&&t.posture)try{await this.analysisMetricsService.processACCAnalysisMetrics({activity:t.activity,movement:t.movement,posture:t.posture},Date.now())}catch{}}else if(this.initializeProcessedDataStore(),this.processedDataStore&&this.processedDataStore.updateACCAnalysis){const n=t.magnitude.map(a=>({timestamp:a.timestamp,value:a.value}));if(this.processedDataStore.updateACCAnalysis({magnitude:n,indices:{activity:t.activity.intensity,stability:t.posture.stability,intensity:t.activity.intensity,balance:t.posture.balance,activityState:t.activity.type,avgMovement:t.movement.avgMovement,stdMovement:t.movement.stdMovement,maxMovement:t.movement.maxMovement},lastUpdated:Date.now(),rawBufferData:e}),t.activity&&t.movement&&t.posture)try{await this.analysisMetricsService.processACCAnalysisMetrics({activity:t.activity,movement:t.movement,posture:t.posture},Date.now())}catch{}}}catch{this.processedDataStore&&this.processedDataStore.updateACCAnalysis&&this.processedDataStore.updateACCAnalysis({magnitude:[],indices:{activity:0,stability:0,intensity:0,balance:0,activityState:"stationary",avgMovement:0,stdMovement:0,maxMovement:0},lastUpdated:Date.now(),rawBufferData:e||[]})}}}const Di={EEG_SERVICE:"df7b5d95-3afe-00a1-084c-b50895ef4f95",EEG_CHARACTERISTIC:"00ab4d15-66b4-0d8a-824f-8d6f8966c6e5",PPG_SERVICE:"1cc50ec0-6967-9d84-a243-c2267f924d1f",PPG_CHARACTERISTIC:"6c739642-23ba-818b-2045-bfe8970263f6",ACCELEROMETER_SERVICE:"75c276c3-8f97-20bc-a143-b354244886d4",ACCELEROMETER_CHARACTERISTIC:"d3d46a35-4394-e9aa-5a43-e7921120aaed",BATTERY_SERVICE:"0000180f-0000-1000-8000-00805f9b34fb",BATTERY_CHARACTERISTIC:"00002a19-0000-1000-8000-00805f9b34fb"},OI={EEG:250,PPG:50,ACC:30},UI={UPDATE_INTERVAL:1e3,MIN_SAMPLES_FOR_CALCULATION:10,HISTORY_SIZE:10},UU=32768;class yge{constructor(){Ce(this,"device",null);Ce(this,"server",null);Ce(this,"eegService",null);Ce(this,"ppgService",null);Ce(this,"accelerometerService",null);Ce(this,"batteryService",null);Ce(this,"eegCharacteristic",null);Ce(this,"ppgCharacteristic",null);Ce(this,"accelerometerCharacteristic",null);Ce(this,"batteryCharacteristic",null);Ce(this,"connectionLostCallback",null);Ce(this,"streamProcessor");Ce(this,"onDataReceived",null);Ce(this,"batteryLevel",0);Ce(this,"batteryHistory",[]);Ce(this,"batteryPrediction",{mode:"unknown",ratePerMinute:0,estimatedTimeRemaining:0,lastCalculation:0});Ce(this,"connectionStartTime",0);Ce(this,"currentConnectionDuration",0);Ce(this,"scannedDevices",new Map);Ce(this,"lastAccTimestamp",0);Ce(this,"accPacketCount",0);Ce(this,"samplingRateCounters",{eeg:{samples:0,lastReset:Date.now(),currentRate:0,history:[]},ppg:{samples:0,lastReset:Date.now(),currentRate:0,history:[]},acc:{samples:0,lastReset:Date.now(),currentRate:0,history:[]}});Ce(this,"samplingRateMonitor",null);Ce(this,"systemCallbacks",{});this.streamProcessor=new RX}setStoreCallbacks(e){this.streamProcessor.setStoreCallbacks(e)}startSamplingRateMonitoring(){this.samplingRateMonitor=setInterval(()=>{this.calculateAndUpdateSamplingRates(),this.updateConnectionDuration()},UI.UPDATE_INTERVAL)}stopSamplingRateMonitoring(){this.samplingRateMonitor&&(clearInterval(this.samplingRateMonitor),this.samplingRateMonitor=null)}calculateAndUpdateSamplingRates(){const e=Date.now();Object.keys(this.samplingRateCounters).forEach(t=>{const n=this.samplingRateCounters[t],a=(e-n.lastReset)/1e3;if(a>0&&n.samples>=UI.MIN_SAMPLES_FOR_CALCULATION){const i=Math.round(n.samples/a*10)/10;n.history.push(i),n.history.length>UI.HISTORY_SIZE&&n.history.shift();const s=n.history.reduce((o,l)=>o+l,0)/n.history.length;n.currentRate=Math.round(s*10)/10,n.samples=0,n.lastReset=e}})}updateConnectionDuration(){this.isConnected()&&this.connectionStartTime>0&&(this.currentConnectionDuration=Date.now()-this.connectionStartTime)}setSystemCallbacks(e){this.systemCallbacks=e}updateBatteryStatus(e,t){this.systemCallbacks.onBatteryUpdate&&this.systemCallbacks.onBatteryUpdate(e,t)}addBatteryHistory(e){const t=Date.now();this.batteryHistory.push({level:e,timestamp:t}),this.batteryHistory.length>10&&this.batteryHistory.shift(),this.calculateBatteryPrediction()}calculateBatteryPrediction(){const e=Date.now();if(this.batteryHistory.length<2){this.batteryPrediction={mode:"unknown",ratePerMinute:0,estimatedTimeRemaining:0,lastCalculation:e};return}const t=this.batteryHistory[this.batteryHistory.length-1],n=this.batteryHistory[this.batteryHistory.length-2],a=(t.timestamp-n.timestamp)/(1e3*60);if(a<.5)return;const s=(t.level-n.level)/a;let o,l;if(s>.1){o="charging";const c=100-t.level;l=Math.round(c/s)}else s<-.1?(o="discharging",l=Math.round(t.level/Math.abs(s))):(o="unknown",l=0);this.batteryPrediction={mode:o,ratePerMinute:Math.abs(s),estimatedTimeRemaining:Math.max(0,l),lastCalculation:e}}getBatteryPrediction(){const e=this.batteryPrediction;let t;if(e.mode==="unknown"||e.estimatedTimeRemaining===0)t="Unknown";else{const n=Math.floor(e.estimatedTimeRemaining/60),a=Math.round(e.estimatedTimeRemaining%60);n>0?t=`${n}h ${a}m`:t=`${a}m`,e.mode==="charging"?t+=" to full":t+=" remaining"}return{currentLevel:this.batteryLevel,mode:e.mode,ratePerMinute:e.ratePerMinute,estimatedTimeRemaining:e.estimatedTimeRemaining,timeRemainingFormatted:t}}async scan(){if(!navigator.bluetooth)throw new Error("Web Bluetooth API가 지원되지 않습니다.");try{const e=await navigator.bluetooth.requestDevice({filters:[{namePrefix:"LXB"},{namePrefix:"LinkBand"},{namePrefix:"LOOXID"}],optionalServices:[Di.EEG_SERVICE,Di.PPG_SERVICE,Di.ACCELEROMETER_SERVICE,Di.BATTERY_SERVICE]});return e?(this.scannedDevices.set(e.id,e),[{id:e.id,name:e.name||"LINK BAND",connected:!1,batteryLevel:0,signalQuality:"good"}]):[]}catch(e){throw e instanceof Error&&e.name==="NotFoundError"&&e.message.includes("User cancelled")?new Error("디바이스 선택이 취소되었습니다"):new Error(`디바이스 스캔에 실패했습니다: ${e instanceof Error?e.message:e}`)}}async connect(e){var t,n,a;if(!navigator.bluetooth)throw new Error("Web Bluetooth API가 지원되지 않습니다.");try{if(this.device&&this.device.id===e&&((t=this.device.gatt)!=null&&t.connected))return this.device;if(this.device&&((n=this.device.gatt)!=null&&n.connected)&&this.device.id!==e&&await this.disconnect(),this.device=this.scannedDevices.get(e)||null,this.device||(this.device=await navigator.bluetooth.requestDevice({filters:[{namePrefix:"LXB"},{namePrefix:"LinkBand"},{namePrefix:"LOOXID"}],optionalServices:[Di.EEG_SERVICE,Di.PPG_SERVICE,Di.ACCELEROMETER_SERVICE,Di.BATTERY_SERVICE]}),this.scannedDevices.set(this.device.id,this.device)),this.connectionStartTime=Date.now(),this.device.addEventListener("gattserverdisconnected",this.handleDisconnect.bind(this)),this.server=await((a=this.device.gatt)==null?void 0:a.connect())||null,!this.server)throw new Error("GATT 서버 연결 실패");return await this.connectServices(),await this.startDataStreams(),await this.startBatteryMonitoring(),this.startSamplingRateMonitoring(),this.device}catch(i){throw await this.cleanup(),i instanceof Error&&i.name==="NotFoundError"&&i.message.includes("User cancelled")?new Error("디바이스 연결이 취소되었습니다"):new Error(`디바이스 연결에 실패했습니다: ${i instanceof Error?i.message:i}`)}}async connectServices(){if(!this.server)throw new Error("GATT 서버가 연결되지 않음");try{this.eegService=await this.server.getPrimaryService(Di.EEG_SERVICE),this.eegCharacteristic=await this.eegService.getCharacteristic(Di.EEG_CHARACTERISTIC);try{this.ppgService=await this.server.getPrimaryService(Di.PPG_SERVICE),this.ppgCharacteristic=await this.ppgService.getCharacteristic(Di.PPG_CHARACTERISTIC)}catch{this.ppgService=null,this.ppgCharacteristic=null}try{this.accelerometerService=await this.server.getPrimaryService(Di.ACCELEROMETER_SERVICE),this.accelerometerCharacteristic=await this.accelerometerService.getCharacteristic(Di.ACCELEROMETER_CHARACTERISTIC)}catch{}try{this.batteryService=await this.server.getPrimaryService(Di.BATTERY_SERVICE),this.batteryCharacteristic=await this.batteryService.getCharacteristic(Di.BATTERY_CHARACTERISTIC)}catch{}}catch(e){throw new Error(`서비스 연결 실패: ${e}`)}}async startDataStreams(){try{this.eegCharacteristic&&(await this.eegCharacteristic.startNotifications(),this.eegCharacteristic.addEventListener("characteristicvaluechanged",this.handleEEGData.bind(this))),this.ppgCharacteristic&&(await this.ppgCharacteristic.startNotifications(),this.ppgCharacteristic.addEventListener("characteristicvaluechanged",this.handlePPGData.bind(this))),this.accelerometerCharacteristic&&(await this.accelerometerCharacteristic.startNotifications(),this.accelerometerCharacteristic.addEventListener("characteristicvaluechanged",this.handleAccData.bind(this)))}catch(e){throw new Error(`데이터 스트림 시작 실패: ${e}`)}}async startBatteryMonitoring(){if(this.batteryCharacteristic)try{const e=await this.batteryCharacteristic.readValue();this.batteryLevel=e.getUint8(0),this.updateBatteryStatus(this.batteryLevel),await this.batteryCharacteristic.startNotifications(),this.batteryCharacteristic.addEventListener("characteristicvaluechanged",this.handleBatteryData.bind(this))}catch{}}handleEEGData(e){const n=e.target.value;if(!(!n||n.byteLength<8))try{const i=n.getUint32(0,!0)/UU,s=Math.floor((n.byteLength-4)/7),o=[];for(let l=0;l<s;l++){const c=4+l*7;if(c+7>n.byteLength)break;const u=n.getUint8(c),h=!!(u&1),d=!!(u&4),A=n.getUint8(c+1)<<16|n.getUint8(c+2)<<8|n.getUint8(c+3),g=n.getUint8(c+4)<<16|n.getUint8(c+5)<<8|n.getUint8(c+6),p=A&8388608?A-16777216:A,v=g&8388608?g-16777216:g,m=p*4.033/12/(Math.pow(2,23)-1)*1e6,y=v*4.033/12/(Math.pow(2,23)-1)*1e6,b={timestamp:(i+l/OI.EEG)*1e3,ch1:m,ch2:y,leadoff_ch1:h,leadoff_ch2:d};o.push(b)}if(this.samplingRateCounters.eeg.samples+=o.length,o.length>0){this.onDataReceived&&this.onDataReceived({type:"eeg",samples:o});const l=o[o.length-1];il.getState().updateSensorContactStatus(l.leadoff_ch1,l.leadoff_ch2)}}catch{}}handlePPGData(e){const n=e.target.value;if(!(!n||n.byteLength<8))try{const i=n.getUint32(0,!0)/32.768/1e3,s=Math.floor((n.byteLength-4)/6),o=[];for(let l=0;l<s;l++){const c=4+l*6;if(c+6>n.byteLength)break;const u=n.getUint8(c)<<16|n.getUint8(c+1)<<8|n.getUint8(c+2),h=n.getUint8(c+3)<<16|n.getUint8(c+4)<<8|n.getUint8(c+5),A={timestamp:(i+l/OI.PPG)*1e3,red:u,ir:h};o.push(A)}this.samplingRateCounters.ppg.samples+=o.length,o.length>0&&setTimeout(()=>{try{this.onDataReceived&&this.onDataReceived({type:"ppg",samples:o})}catch{}},0)}catch{return}}handleAccData(e){const n=e.target.value,a=Date.now();if(!(!n||n.byteLength<10))try{const s=n.getUint32(0,!0)/UU,o=Math.floor((n.byteLength-4)/6),l=[],u=Math.round(1e6/OI.ACC)/1e3;let h;if(this.lastAccTimestamp===0)h=a;else{h=this.lastAccTimestamp+u;const d=a-this.lastAccTimestamp,A=o*u;d>A*3&&(h=a)}this.accPacketCount++;for(let d=0;d<o;d++){const A=4+d*6;if(A+6>n.byteLength)break;const g=n.getInt16(A,!0),p=n.getInt16(A+2,!0),v=n.getInt16(A+4,!0),m=2/32768,y=g*m,x=p*m,b=v*m,_={timestamp:h+d*u,x:y,y:x,z:b};l.push(_)}l.length>0&&(this.lastAccTimestamp=l[l.length-1].timestamp),this.samplingRateCounters.acc.samples+=l.length,l.length>0&&this.onDataReceived&&this.onDataReceived({type:"acc",samples:l})}catch{}}handleBatteryData(e){const n=e.target.value;if(n&&n.byteLength>=1){const a=n.getUint8(0);a!==this.batteryLevel&&(this.batteryLevel=a,this.addBatteryHistory(this.batteryLevel),this.updateBatteryStatus(this.batteryLevel),this.onDataReceived&&this.onDataReceived({type:"battery",samples:[{timestamp:Date.now(),level:this.batteryLevel,percentage:this.batteryLevel}]}))}}handleDisconnect(){this.cleanup(),this.connectionLostCallback&&this.connectionLostCallback()}async disconnect(){try{this.stopSamplingRateMonitoring();const e=[];if(this.eegCharacteristic&&e.push(this.eegCharacteristic.stopNotifications().catch(()=>{})),this.ppgCharacteristic&&e.push(this.ppgCharacteristic.stopNotifications().catch(()=>{})),this.accelerometerCharacteristic&&e.push(this.accelerometerCharacteristic.stopNotifications().catch(()=>{})),this.batteryCharacteristic&&e.push(this.batteryCharacteristic.stopNotifications().catch(()=>{})),await Promise.race([Promise.all(e),new Promise(t=>setTimeout(t,3e3))]),this.device&&this.device.removeEventListener("gattserverdisconnected",this.handleDisconnect.bind(this)),this.server&&this.server.connected)try{this.server.disconnect()}catch{}await new Promise(t=>setTimeout(t,500));try{const{useDeviceStore:t}=await hs(async()=>{const{useDeviceStore:n}=await Promise.resolve().then(()=>UX);return{useDeviceStore:n}},void 0);t.getState().disconnectDevice()}catch{}}catch{}finally{this.forceCleanup()}}cleanup(){this.device=null,this.server=null,this.eegService=null,this.ppgService=null,this.accelerometerService=null,this.batteryService=null,this.eegCharacteristic=null,this.ppgCharacteristic=null,this.accelerometerCharacteristic=null,this.batteryCharacteristic=null,this.connectionStartTime=0,this.currentConnectionDuration=0,this.batteryHistory=[],this.batteryPrediction={mode:"unknown",ratePerMinute:0,estimatedTimeRemaining:0,lastCalculation:0},this.lastAccTimestamp=0,this.accPacketCount=0,Object.keys(this.samplingRateCounters).forEach(e=>{const t=this.samplingRateCounters[e];t.samples=0,t.lastReset=Date.now(),t.currentRate=0,t.history=[]}),this.stopSamplingRateMonitoring()}forceCleanup(){this.cleanup();try{this.scannedDevices.clear(),this.connectionLostCallback=null,this.onDataReceived=null,this.systemCallbacks={},this.streamProcessor&&this.streamProcessor.cleanup(),this.batteryLevel=0}catch{}}clearDeviceCache(){this.scannedDevices.clear()}getConnectionStartTime(){return this.connectionStartTime}getConnectionDuration(){return this.connectionStartTime===0?0:this.currentConnectionDuration}getCurrentSamplingRates(){return{eeg:this.samplingRateCounters.eeg.currentRate,ppg:this.samplingRateCounters.ppg.currentRate,acc:this.samplingRateCounters.acc.currentRate}}isConnected(){var e,t;return((t=(e=this.device)==null?void 0:e.gatt)==null?void 0:t.connected)??!1}onConnectionLost(e){this.connectionLostCallback=e}async getBatteryLevel(){if(!this.batteryCharacteristic)return this.batteryLevel;try{const e=await this.batteryCharacteristic.readValue();return this.batteryLevel=e.getUint8(0),this.batteryLevel}catch{return this.batteryLevel}}getDeviceName(){return this.device?this.device.name||"LINK BAND":"Unknown Device"}getDeviceId(){return this.device?this.device.id:""}}const jr=new yge;function Q2(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var LX={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,a,i){function s(c,u){if(!a[c]){if(!n[c]){var h=typeof Q2=="function"&&Q2;if(!u&&h)return h(c,!0);if(o)return o(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var A=a[c]={exports:{}};n[c][0].call(A.exports,function(g){var p=n[c][1][g];return s(p||g)},A,A.exports,t,n,a,i)}return a[c].exports}for(var o=typeof Q2=="function"&&Q2,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(t,n,a){var i=t("./utils"),s=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var c,u,h,d,A,g,p,v=[],m=0,y=l.length,x=y,b=i.getTypeOf(l)!=="string";m<l.length;)x=y-m,h=b?(c=l[m++],u=m<y?l[m++]:0,m<y?l[m++]:0):(c=l.charCodeAt(m++),u=m<y?l.charCodeAt(m++):0,m<y?l.charCodeAt(m++):0),d=c>>2,A=(3&c)<<4|u>>4,g=1<x?(15&u)<<2|h>>6:64,p=2<x?63&h:64,v.push(o.charAt(d)+o.charAt(A)+o.charAt(g)+o.charAt(p));return v.join("")},a.decode=function(l){var c,u,h,d,A,g,p=0,v=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var y,x=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&x--,l.charAt(l.length-2)===o.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=s.uint8array?new Uint8Array(0|x):new Array(0|x);p<l.length;)c=o.indexOf(l.charAt(p++))<<2|(d=o.indexOf(l.charAt(p++)))>>4,u=(15&d)<<4|(A=o.indexOf(l.charAt(p++)))>>2,h=(3&A)<<6|(g=o.indexOf(l.charAt(p++))),y[v++]=c,A!==64&&(y[v++]=u),g!==64&&(y[v++]=h);return y}},{"./support":30,"./utils":32}],2:[function(t,n,a){var i=t("./external"),s=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(u,h,d,A,g){this.compressedSize=u,this.uncompressedSize=h,this.crc32=d,this.compression=A,this.compressedContent=g}c.prototype={getContentWorker:function(){var u=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return u.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,h,d){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,a){var i=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,a){var i=t("./utils"),s=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();n.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(c,u,h,d){var A=s,g=d+h;c^=-1;for(var p=d;p<g;p++)c=c>>>8^A[255&(c^u[p])];return-1^c}(0|l,o,o.length,0):function(c,u,h,d){var A=s,g=d+h;c^=-1;for(var p=d;p<g;p++)c=c>>>8^A[255&(c^u.charCodeAt(p))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,n,a){var i=null;i=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:i}},{lie:37}],7:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),c=i?"uint8array":"array";function u(h,d){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=d,this.meta={}}a.magic="\b\0",o.inherits(u,l),u.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,h.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(d){h.push({data:d,meta:h.meta})}},a.compressWorker=function(h){return new u("Deflate",h)},a.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,a){function i(A,g){var p,v="";for(p=0;p<g;p++)v+=String.fromCharCode(255&A),A>>>=8;return v}function s(A,g,p,v,m,y){var x,b,S=A.file,_=A.compression,C=y!==c.utf8encode,w=o.transformTo("string",y(S.name)),B=o.transformTo("string",c.utf8encode(S.name)),D=S.comment,T=o.transformTo("string",y(D)),E=o.transformTo("string",c.utf8encode(D)),R=B.length!==S.name.length,M=E.length!==D.length,k="",O="",Q="",H=S.dir,W=S.date,te={crc32:0,compressedSize:0,uncompressedSize:0};g&&!p||(te.crc32=A.crc32,te.compressedSize=A.compressedSize,te.uncompressedSize=A.uncompressedSize);var ee=0;g&&(ee|=8),C||!R&&!M||(ee|=2048);var j=0,G=0;H&&(j|=16),m==="UNIX"?(G=798,j|=function(Z,de){var he=Z;return Z||(he=de?16893:33204),(65535&he)<<16}(S.unixPermissions,H)):(G=20,j|=function(Z){return 63&(Z||0)}(S.dosPermissions)),x=W.getUTCHours(),x<<=6,x|=W.getUTCMinutes(),x<<=5,x|=W.getUTCSeconds()/2,b=W.getUTCFullYear()-1980,b<<=4,b|=W.getUTCMonth()+1,b<<=5,b|=W.getUTCDate(),R&&(O=i(1,1)+i(u(w),4)+B,k+="up"+i(O.length,2)+O),M&&(Q=i(1,1)+i(u(T),4)+E,k+="uc"+i(Q.length,2)+Q);var Y="";return Y+=`
\0`,Y+=i(ee,2),Y+=_.magic,Y+=i(x,2),Y+=i(b,2),Y+=i(te.crc32,4),Y+=i(te.compressedSize,4),Y+=i(te.uncompressedSize,4),Y+=i(w.length,2),Y+=i(k.length,2),{fileRecord:h.LOCAL_FILE_HEADER+Y+w+k,dirRecord:h.CENTRAL_FILE_HEADER+i(G,2)+Y+i(T.length,2)+"\0\0\0\0"+i(j,4)+i(v,4)+w+k+T}}var o=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),u=t("../crc32"),h=t("../signature");function d(A,g,p,v){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=p,this.encodeFileName=v,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(d,l),d.prototype.push=function(A){var g=A.meta.percent||0,p=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,l.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:p?(g+100*(p-v-1))/p:100}}))},d.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var g=this.streamFiles&&!A.file.dir;if(g){var p=s(A,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(A){this.accumulate=!1;var g=this.streamFiles&&!A.file.dir,p=s(A,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),g)this.push({data:function(v){return h.DATA_DESCRIPTOR+i(v.crc32,4)+i(v.compressedSize,4)+i(v.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var A=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var p=this.bytesWritten-A,v=function(m,y,x,b,S){var _=o.transformTo("string",S(b));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(m,2)+i(m,2)+i(y,4)+i(x,4)+i(_.length,2)+_}(this.dirRecords.length,p,A,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(A){this._sources.push(A);var g=this;return A.on("data",function(p){g.processChunk(p)}),A.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),A.on("error",function(p){g.error(p)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(A){var g=this._sources;if(!l.prototype.error.call(this,A))return!1;for(var p=0;p<g.length;p++)try{g[p].error(A)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var A=this._sources,g=0;g<A.length;g++)A[g].lock()},n.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,a){var i=t("../compressions"),s=t("./ZipFileWorker");a.generateWorker=function(o,l,c){var u=new s(l.streamFiles,c,l.platform,l.encodeFileName),h=0;try{o.forEach(function(d,A){h++;var g=function(y,x){var b=y||x,S=i[b];if(!S)throw new Error(b+" is not a valid compression method !");return S}(A.options.compression,l.compression),p=A.options.compressionOptions||l.compressionOptions||{},v=A.dir,m=A.date;A._compressWorker(g,p).withStreamInfo("file",{name:d,dir:v,date:m,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(u)}),u.entriesCount=h}catch(d){u.error(d)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=t("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,a){var i=t("./utils"),s=t("./external"),o=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function h(d){return new s.Promise(function(A,g){var p=d.decompressed.getContentWorker().pipe(new c);p.on("error",function(v){g(v)}).on("end",function(){p.streamInfo.crc32!==d.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}n.exports=function(d,A){var g=this;return A=i.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(d)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",d,!0,A.optimizedBinaryString,A.base64).then(function(p){var v=new l(A);return v.load(p),v}).then(function(p){var v=[s.Promise.resolve(p)],m=p.files;if(A.checkCRC32)for(var y=0;y<m.length;y++)v.push(h(m[y]));return s.Promise.all(v)}).then(function(p){for(var v=p.shift(),m=v.files,y=0;y<m.length;y++){var x=m[y],b=x.fileNameStr,S=i.resolve(x.fileNameStr);g.file(S,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:A.createFolders}),x.dir||(g.file(S).unsafeOriginalName=b)}return v.zipComment.length&&(g.comment=v.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,a){var i=t("../utils"),s=t("../stream/GenericWorker");function o(l,c){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(o,s),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,a){var i=t("readable-stream").Readable;function s(o,l,c){i.call(this,l),this._helper=o;var u=this;o.on("data",function(h,d){u.push(h)||u._helper.pause(),c&&c(d)}).on("error",function(h){u.emit("error",h)}).on("end",function(){u.push(null)})}t("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,n,a){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,s)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var s=new Buffer(i);return s.fill(0),s},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,n,a){function i(S,_,C){var w,B=o.getTypeOf(_),D=o.extend(C||{},u);D.date=D.date||new Date,D.compression!==null&&(D.compression=D.compression.toUpperCase()),typeof D.unixPermissions=="string"&&(D.unixPermissions=parseInt(D.unixPermissions,8)),D.unixPermissions&&16384&D.unixPermissions&&(D.dir=!0),D.dosPermissions&&16&D.dosPermissions&&(D.dir=!0),D.dir&&(S=m(S)),D.createFolders&&(w=v(S))&&y.call(this,w,!0);var T=B==="string"&&D.binary===!1&&D.base64===!1;C&&C.binary!==void 0||(D.binary=!T),(_ instanceof h&&_.uncompressedSize===0||D.dir||!_||_.length===0)&&(D.base64=!1,D.binary=!0,_="",D.compression="STORE",B="string");var E=null;E=_ instanceof h||_ instanceof l?_:g.isNode&&g.isStream(_)?new p(S,_):o.prepareContent(S,_,D.binary,D.optimizedBinaryString,D.base64);var R=new d(S,E,D);this.files[S]=R}var s=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),u=t("./defaults"),h=t("./compressedObject"),d=t("./zipObject"),A=t("./generate"),g=t("./nodejsUtils"),p=t("./nodejs/NodejsStreamInputAdapter"),v=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var _=S.lastIndexOf("/");return 0<_?S.substring(0,_):""},m=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},y=function(S,_){return _=_!==void 0?_:u.createFolders,S=m(S),this.files[S]||i.call(this,S,null,{dir:!0,createFolders:_}),this.files[S]};function x(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var _,C,w;for(_ in this.files)w=this.files[_],(C=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&S(C,w)},filter:function(S){var _=[];return this.forEach(function(C,w){S(C,w)&&_.push(w)}),_},file:function(S,_,C){if(arguments.length!==1)return S=this.root+S,i.call(this,S,_,C),this;if(x(S)){var w=S;return this.filter(function(D,T){return!T.dir&&w.test(D)})}var B=this.files[this.root+S];return B&&!B.dir?B:null},folder:function(S){if(!S)return this;if(x(S))return this.filter(function(B,D){return D.dir&&S.test(B)});var _=this.root+S,C=y.call(this,_),w=this.clone();return w.root=C.name,w},remove:function(S){S=this.root+S;var _=this.files[S];if(_||(S.slice(-1)!=="/"&&(S+="/"),_=this.files[S]),_&&!_.dir)delete this.files[S];else for(var C=this.filter(function(B,D){return D.name.slice(0,S.length)===S}),w=0;w<C.length;w++)delete this.files[C[w].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var _,C={};try{if((C=o.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");o.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var w=C.comment||this.comment||"";_=A.generateWorker(this,C,w)}catch(B){(_=new l("error")).error(B)}return new c(_,C.type||"string",C.mimeType)},generateAsync:function(S,_){return this.generateInternalStream(S).accumulate(_)},generateNodeStream:function(S,_){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(_)}};n.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,a){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,a){var i=t("./DataReader");function s(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),h=o.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===c&&this.data[d+2]===u&&this.data[d+3]===h)return d-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),h=o.charCodeAt(3),d=this.readData(4);return l===d[0]&&c===d[1]&&u===d[2]&&h===d[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,n,a){var i=t("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=s},{"../utils":32}],19:[function(t,n,a){var i=t("./Uint8ArrayReader");function s(o){i.call(this,o)}t("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,a){var i=t("./DataReader");function s(o){i.call(this,o)}t("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,n,a){var i=t("./ArrayReader");function s(o){i.call(this,o)}t("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,a){var i=t("../utils"),s=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");n.exports=function(h){var d=i.getTypeOf(h);return i.checkSupport(d),d!=="string"||s.uint8array?d==="nodebuffer"?new c(h):s.uint8array?new u(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,a){var i=t("./GenericWorker"),s=t("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,a){var i=t("./GenericWorker"),s=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,a){var i=t("../utils"),s=t("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,s),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}s.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,a){var i=t("../utils"),s=t("./GenericWorker");function o(l){s.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=i.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=i},{}],29:[function(t,n,a){var i=t("../utils"),s=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),c=t("../support"),u=t("../external"),h=null;if(c.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(g,p){return new u.Promise(function(v,m){var y=[],x=g._internalType,b=g._outputType,S=g._mimeType;g.on("data",function(_,C){y.push(_),p&&p(C)}).on("error",function(_){y=[],m(_)}).on("end",function(){try{var _=function(C,w,B){switch(C){case"blob":return i.newBlob(i.transformTo("arraybuffer",w),B);case"base64":return l.encode(w);default:return i.transformTo(C,w)}}(b,function(C,w){var B,D=0,T=null,E=0;for(B=0;B<w.length;B++)E+=w[B].length;switch(C){case"string":return w.join("");case"array":return Array.prototype.concat.apply([],w);case"uint8array":for(T=new Uint8Array(E),B=0;B<w.length;B++)T.set(w[B],D),D+=w[B].length;return T;case"nodebuffer":return Buffer.concat(w);default:throw new Error("concat : unsupported type '"+C+"'")}}(x,y),S);v(_)}catch(C){m(C)}y=[]}).resume()})}function A(g,p,v){var m=p;switch(p){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=p,this._mimeType=v,i.checkSupport(m),this._worker=g.pipe(new s(m)),g.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}A.prototype={accumulate:function(g){return d(this,g)},on:function(g,p){var v=this;return g==="data"?this._worker.on(g,function(m){p.call(v,m.data,m.meta)}):this._worker.on(g,function(){i.delay(p,arguments,v)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},g)}},n.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,a){for(var i=t("./utils"),s=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}a.utf8encode=function(A){return s.nodebuffer?o.newBufferFrom(A,"utf-8"):function(g){var p,v,m,y,x,b=g.length,S=0;for(y=0;y<b;y++)(64512&(v=g.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=g.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(m-56320),y++),S+=v<128?1:v<2048?2:v<65536?3:4;for(p=s.uint8array?new Uint8Array(S):new Array(S),y=x=0;x<S;y++)(64512&(v=g.charCodeAt(y)))==55296&&y+1<b&&(64512&(m=g.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(m-56320),y++),v<128?p[x++]=v:(v<2048?p[x++]=192|v>>>6:(v<65536?p[x++]=224|v>>>12:(p[x++]=240|v>>>18,p[x++]=128|v>>>12&63),p[x++]=128|v>>>6&63),p[x++]=128|63&v);return p}(A)},a.utf8decode=function(A){return s.nodebuffer?i.transformTo("nodebuffer",A).toString("utf-8"):function(g){var p,v,m,y,x=g.length,b=new Array(2*x);for(p=v=0;p<x;)if((m=g[p++])<128)b[v++]=m;else if(4<(y=c[m]))b[v++]=65533,p+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&p<x;)m=m<<6|63&g[p++],y--;1<y?b[v++]=65533:m<65536?b[v++]=m:(m-=65536,b[v++]=55296|m>>10&1023,b[v++]=56320|1023&m)}return b.length!==v&&(b.subarray?b=b.subarray(0,v):b.length=v),i.applyFromCharCode(b)}(A=i.transformTo(s.uint8array?"uint8array":"array",A))},i.inherits(h,l),h.prototype.processChunk=function(A){var g=i.transformTo(s.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var p=g;(g=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),g.set(p,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var v=function(y,x){var b;for((x=x||y.length)>y.length&&(x=y.length),b=x-1;0<=b&&(192&y[b])==128;)b--;return b<0||b===0?x:b+c[y[b]]>x?b:x}(g),m=g;v!==g.length&&(s.uint8array?(m=g.subarray(0,v),this.leftOver=g.subarray(v,g.length)):(m=g.slice(0,v),this.leftOver=g.slice(v,g.length))),this.push({data:a.utf8decode(m),meta:A.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(d,l),d.prototype.processChunk=function(A){this.push({data:a.utf8encode(A.data),meta:A.meta})},a.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,a){var i=t("./support"),s=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function c(p){return p}function u(p,v){for(var m=0;m<p.length;++m)v[m]=255&p.charCodeAt(m);return v}t("setimmediate"),a.newBlob=function(p,v){a.checkSupport("blob");try{return new Blob([p],{type:v})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(p),m.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(p,v,m){var y=[],x=0,b=p.length;if(b<=m)return String.fromCharCode.apply(null,p);for(;x<b;)v==="array"||v==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(x,Math.min(x+m,b)))):y.push(String.fromCharCode.apply(null,p.subarray(x,Math.min(x+m,b)))),x+=m;return y.join("")},stringifyByChar:function(p){for(var v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);return v},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function d(p){var v=65536,m=a.getTypeOf(p),y=!0;if(m==="uint8array"?y=h.applyCanBeUsed.uint8array:m==="nodebuffer"&&(y=h.applyCanBeUsed.nodebuffer),y)for(;1<v;)try{return h.stringifyByChunk(p,m,v)}catch{v=Math.floor(v/2)}return h.stringifyByChar(p)}function A(p,v){for(var m=0;m<p.length;m++)v[m]=p[m];return v}a.applyFromCharCode=d;var g={};g.string={string:c,array:function(p){return u(p,new Array(p.length))},arraybuffer:function(p){return g.string.uint8array(p).buffer},uint8array:function(p){return u(p,new Uint8Array(p.length))},nodebuffer:function(p){return u(p,o.allocBuffer(p.length))}},g.array={string:d,array:c,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},g.arraybuffer={string:function(p){return d(new Uint8Array(p))},array:function(p){return A(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:c,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},g.uint8array={string:d,array:function(p){return A(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:c,nodebuffer:function(p){return o.newBufferFrom(p)}},g.nodebuffer={string:d,array:function(p){return A(p,new Array(p.length))},arraybuffer:function(p){return g.nodebuffer.uint8array(p).buffer},uint8array:function(p){return A(p,new Uint8Array(p.length))},nodebuffer:c},a.transformTo=function(p,v){if(v=v||"",!p)return v;a.checkSupport(p);var m=a.getTypeOf(v);return g[m][p](v)},a.resolve=function(p){for(var v=p.split("/"),m=[],y=0;y<v.length;y++){var x=v[y];x==="."||x===""&&y!==0&&y!==v.length-1||(x===".."?m.pop():m.push(x))}return m.join("/")},a.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(p)?"nodebuffer":i.uint8array&&p instanceof Uint8Array?"uint8array":i.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(p){if(!i[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(p){var v,m,y="";for(m=0;m<(p||"").length;m++)y+="\\x"+((v=p.charCodeAt(m))<16?"0":"")+v.toString(16).toUpperCase();return y},a.delay=function(p,v,m){setImmediate(function(){p.apply(m||null,v||[])})},a.inherits=function(p,v){function m(){}m.prototype=v.prototype,p.prototype=new m},a.extend=function(){var p,v,m={};for(p=0;p<arguments.length;p++)for(v in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],v)&&m[v]===void 0&&(m[v]=arguments[p][v]);return m},a.prepareContent=function(p,v,m,y,x){return l.Promise.resolve(v).then(function(b){return i.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new l.Promise(function(S,_){var C=new FileReader;C.onload=function(w){S(w.target.result)},C.onerror=function(w){_(w.target.error)},C.readAsArrayBuffer(b)}):b}).then(function(b){var S=a.getTypeOf(b);return S?(S==="arraybuffer"?b=a.transformTo("uint8array",b):S==="string"&&(x?b=s.decode(b):m&&y!==!0&&(b=function(_){return u(_,i.uint8array?new Uint8Array(_.length):new Array(_.length))}(b))),b):l.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,a){var i=t("./reader/readerFor"),s=t("./utils"),o=t("./signature"),l=t("./zipEntry"),c=t("./support");function u(h){this.files=[],this.loadOptions=h}u.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(d)+", expected "+s.pretty(h)+")")}},isSignature:function(h,d){var A=this.reader.index;this.reader.setIndex(h);var g=this.reader.readString(4)===d;return this.reader.setIndex(A),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),d=c.uint8array?"uint8array":"array",A=s.transformTo(d,h);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,d,A,g=this.zip64EndOfCentralSize-44;0<g;)h=this.reader.readInt(2),d=this.reader.readInt(4),A=this.reader.readData(d),this.zip64ExtensibleData[h]={id:h,length:d,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,d;for(h=0;h<this.files.length;h++)d=this.files[h],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var d=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var g=d-A;if(0<g)this.isSignature(d,o.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,a){var i=t("./reader/readerFor"),s=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),u=t("./compressions"),h=t("./support");function d(A,g){this.options=A,this.loadOptions=g}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var g,p;if(A.skip(22),this.fileNameLength=A.readInt(2),p=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(v){for(var m in u)if(Object.prototype.hasOwnProperty.call(u,m)&&u[m].magic===v)return u[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var g=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(g),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var g,p,v,m=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<m;)g=A.readInt(2),p=A.readInt(2),v=A.readData(p),this.extraFields[g]={id:g,length:p,value:v};A.setIndex(m)},handleUTF8:function(){var A=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var p=s.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var m=s.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var g=i(A.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:c.utf8decode(g.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var g=i(A.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:c.utf8decode(g.readData(A.length-5))}return null}},n.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,a){function i(g,p,v){this.name=g,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=p,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var s=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),u=t("./stream/GenericWorker");i.prototype={internalStream:function(g){var p=null,v="string";try{if(!g)throw new Error("No output type specified.");var m=(v=g.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),p=this._decompressWorker();var y=!this._dataBinary;y&&!m&&(p=p.pipe(new l.Utf8EncodeWorker)),!y&&m&&(p=p.pipe(new l.Utf8DecodeWorker))}catch(x){(p=new u("error")).error(x)}return new s(p,v,"")},async:function(g,p){return this.internalStream(g).accumulate(p)},nodeStream:function(g,p){return this.internalStream(g||"nodebuffer").toNodejsStream(p)},_compressWorker:function(g,p){if(this._data instanceof c&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(v,g,p)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<h.length;A++)i.prototype[h[A]]=d;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,a){(function(i){var s,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,u=new l(g),h=i.document.createTextNode("");u.observe(h,{characterData:!0}),s=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var p=i.document.createElement("script");p.onreadystatechange=function(){g(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},i.document.documentElement.appendChild(p)}:function(){setTimeout(g,0)};else{var d=new i.MessageChannel;d.port1.onmessage=g,s=function(){d.port2.postMessage(0)}}var A=[];function g(){var p,v;o=!0;for(var m=A.length;m;){for(v=A,A=[],p=-1;++p<m;)v[p]();m=A.length}o=!1}n.exports=function(p){A.push(p)!==1||o||s()}}).call(this,typeof C2<"u"?C2:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,a){var i=t("immediate");function s(){}var o={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function h(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,m!==s&&p(this,m)}function d(m,y,x){this.promise=m,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function A(m,y,x){i(function(){var b;try{b=y(x)}catch(S){return o.reject(m,S)}b===m?o.reject(m,new TypeError("Cannot resolve promise with itself")):o.resolve(m,b)})}function g(m){var y=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof y=="function")return function(){y.apply(m,arguments)}}function p(m,y){var x=!1;function b(C){x||(x=!0,o.reject(m,C))}function S(C){x||(x=!0,o.resolve(m,C))}var _=v(function(){y(S,b)});_.status==="error"&&b(_.value)}function v(m,y){var x={};try{x.value=m(y),x.status="success"}catch(b){x.status="error",x.value=b}return x}(n.exports=h).prototype.finally=function(m){if(typeof m!="function")return this;var y=this.constructor;return this.then(function(x){return y.resolve(m()).then(function(){return x})},function(x){return y.resolve(m()).then(function(){throw x})})},h.prototype.catch=function(m){return this.then(null,m)},h.prototype.then=function(m,y){if(typeof m!="function"&&this.state===c||typeof y!="function"&&this.state===l)return this;var x=new this.constructor(s);return this.state!==u?A(x,this.state===c?m:y,this.outcome):this.queue.push(new d(x,m,y)),x},d.prototype.callFulfilled=function(m){o.resolve(this.promise,m)},d.prototype.otherCallFulfilled=function(m){A(this.promise,this.onFulfilled,m)},d.prototype.callRejected=function(m){o.reject(this.promise,m)},d.prototype.otherCallRejected=function(m){A(this.promise,this.onRejected,m)},o.resolve=function(m,y){var x=v(g,y);if(x.status==="error")return o.reject(m,x.value);var b=x.value;if(b)p(m,b);else{m.state=c,m.outcome=y;for(var S=-1,_=m.queue.length;++S<_;)m.queue[S].callFulfilled(y)}return m},o.reject=function(m,y){m.state=l,m.outcome=y;for(var x=-1,b=m.queue.length;++x<b;)m.queue[x].callRejected(y);return m},h.resolve=function(m){return m instanceof this?m:o.resolve(new this(s),m)},h.reject=function(m){var y=new this(s);return o.reject(y,m)},h.all=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=m.length,b=!1;if(!x)return this.resolve([]);for(var S=new Array(x),_=0,C=-1,w=new this(s);++C<x;)B(m[C],C);return w;function B(D,T){y.resolve(D).then(function(E){S[T]=E,++_!==x||b||(b=!0,o.resolve(w,S))},function(E){b||(b=!0,o.reject(w,E))})}},h.race=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=m.length,b=!1;if(!x)return this.resolve([]);for(var S=-1,_=new this(s);++S<x;)C=m[S],y.resolve(C).then(function(w){b||(b=!0,o.resolve(_,w))},function(w){b||(b=!0,o.reject(_,w))});var C;return _}},{immediate:36}],38:[function(t,n,a){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,a){var i=t("./zlib/deflate"),s=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),u=Object.prototype.toString,h=0,d=-1,A=0,g=8;function p(m){if(!(this instanceof p))return new p(m);this.options=s.assign({level:d,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},m||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var x=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(x!==h)throw new Error(l[x]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var b;if(b=typeof y.dictionary=="string"?o.string2buf(y.dictionary):u.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(x=i.deflateSetDictionary(this.strm,b))!==h)throw new Error(l[x]);this._dict_set=!0}}function v(m,y){var x=new p(y);if(x.push(m,!0),x.err)throw x.msg||l[x.err];return x.result}p.prototype.push=function(m,y){var x,b,S=this.strm,_=this.options.chunkSize;if(this.ended)return!1;b=y===~~y?y:y===!0?4:0,typeof m=="string"?S.input=o.string2buf(m):u.call(m)==="[object ArrayBuffer]"?S.input=new Uint8Array(m):S.input=m,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new s.Buf8(_),S.next_out=0,S.avail_out=_),(x=i.deflate(S,b))!==1&&x!==h)return this.onEnd(x),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(S.output,S.next_out))):this.onData(s.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&x!==1);return b===4?(x=i.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===h):b!==2||(this.onEnd(h),!(S.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},a.Deflate=p,a.deflate=v,a.deflateRaw=function(m,y){return(y=y||{}).raw=!0,v(m,y)},a.gzip=function(m,y){return(y=y||{}).gzip=!0,v(m,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,a){var i=t("./zlib/inflate"),s=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),u=t("./zlib/zstream"),h=t("./zlib/gzheader"),d=Object.prototype.toString;function A(p){if(!(this instanceof A))return new A(p);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},p||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||p&&p.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&!(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var m=i.inflateInit2(this.strm,v.windowBits);if(m!==l.Z_OK)throw new Error(c[m]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function g(p,v){var m=new A(v);if(m.push(p,!0),m.err)throw m.msg||c[m.err];return m.result}A.prototype.push=function(p,v){var m,y,x,b,S,_,C=this.strm,w=this.options.chunkSize,B=this.options.dictionary,D=!1;if(this.ended)return!1;y=v===~~v?v:v===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof p=="string"?C.input=o.binstring2buf(p):d.call(p)==="[object ArrayBuffer]"?C.input=new Uint8Array(p):C.input=p,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new s.Buf8(w),C.next_out=0,C.avail_out=w),(m=i.inflate(C,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&B&&(_=typeof B=="string"?o.string2buf(B):d.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,m=i.inflateSetDictionary(this.strm,_)),m===l.Z_BUF_ERROR&&D===!0&&(m=l.Z_OK,D=!1),m!==l.Z_STREAM_END&&m!==l.Z_OK)return this.onEnd(m),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&m!==l.Z_STREAM_END&&(C.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=o.utf8border(C.output,C.next_out),b=C.next_out-x,S=o.buf2string(C.output,x),C.next_out=b,C.avail_out=w-b,b&&s.arraySet(C.output,C.output,x,b,0),this.onData(S)):this.onData(s.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(D=!0)}while((0<C.avail_in||C.avail_out===0)&&m!==l.Z_STREAM_END);return m===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(m=i.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(C.avail_out=0))},A.prototype.onData=function(p){this.chunks.push(p)},A.prototype.onEnd=function(p){p===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},a.Inflate=A,a.inflate=g,a.inflateRaw=function(p,v){return(v=v||{}).raw=!0,g(p,v)},a.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])}}return l},a.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var s={arraySet:function(l,c,u,h,d){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+h),d);else for(var A=0;A<h;A++)l[d+A]=c[u+A]},flattenChunks:function(l){var c,u,h,d,A,g;for(c=h=0,u=l.length;c<u;c++)h+=l[c].length;for(g=new Uint8Array(h),c=d=0,u=l.length;c<u;c++)A=l[c],g.set(A,d),d+=A.length;return g}},o={arraySet:function(l,c,u,h,d){for(var A=0;A<h;A++)l[d+A]=c[u+A]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(t,n,a){var i=t("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(h,d){if(d<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,d));for(var A="",g=0;g<d;g++)A+=String.fromCharCode(h[g]);return A}l[254]=l[254]=1,a.string2buf=function(h){var d,A,g,p,v,m=h.length,y=0;for(p=0;p<m;p++)(64512&(A=h.charCodeAt(p)))==55296&&p+1<m&&(64512&(g=h.charCodeAt(p+1)))==56320&&(A=65536+(A-55296<<10)+(g-56320),p++),y+=A<128?1:A<2048?2:A<65536?3:4;for(d=new i.Buf8(y),p=v=0;v<y;p++)(64512&(A=h.charCodeAt(p)))==55296&&p+1<m&&(64512&(g=h.charCodeAt(p+1)))==56320&&(A=65536+(A-55296<<10)+(g-56320),p++),A<128?d[v++]=A:(A<2048?d[v++]=192|A>>>6:(A<65536?d[v++]=224|A>>>12:(d[v++]=240|A>>>18,d[v++]=128|A>>>12&63),d[v++]=128|A>>>6&63),d[v++]=128|63&A);return d},a.buf2binstring=function(h){return u(h,h.length)},a.binstring2buf=function(h){for(var d=new i.Buf8(h.length),A=0,g=d.length;A<g;A++)d[A]=h.charCodeAt(A);return d},a.buf2string=function(h,d){var A,g,p,v,m=d||h.length,y=new Array(2*m);for(A=g=0;A<m;)if((p=h[A++])<128)y[g++]=p;else if(4<(v=l[p]))y[g++]=65533,A+=v-1;else{for(p&=v===2?31:v===3?15:7;1<v&&A<m;)p=p<<6|63&h[A++],v--;1<v?y[g++]=65533:p<65536?y[g++]=p:(p-=65536,y[g++]=55296|p>>10&1023,y[g++]=56320|1023&p)}return u(y,g)},a.utf8border=function(h,d){var A;for((d=d||h.length)>h.length&&(d=h.length),A=d-1;0<=A&&(192&h[A])==128;)A--;return A<0||A===0?d:A+l[h[A]]>d?A:d}},{"./common":41}],43:[function(t,n,a){n.exports=function(i,s,o,l){for(var c=65535&i|0,u=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;u=u+(c=c+s[l++]|0)|0,--h;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(t,n,a){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,a){var i=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var c=0;c<8;c++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();n.exports=function(s,o,l,c){var u=i,h=c+l;s^=-1;for(var d=c;d<h;d++)s=s>>>8^u[255&(s^o[d])];return-1^s}},{}],46:[function(t,n,a){var i,s=t("../utils/common"),o=t("./trees"),l=t("./adler32"),c=t("./crc32"),u=t("./messages"),h=0,d=4,A=0,g=-2,p=-1,v=4,m=2,y=8,x=9,b=286,S=30,_=19,C=2*b+1,w=15,B=3,D=258,T=D+B+1,E=42,R=113,M=1,k=2,O=3,Q=4;function H(z,pe){return z.msg=u[pe],pe}function W(z){return(z<<1)-(4<z?9:0)}function te(z){for(var pe=z.length;0<=--pe;)z[pe]=0}function ee(z){var pe=z.state,J=pe.pending;J>z.avail_out&&(J=z.avail_out),J!==0&&(s.arraySet(z.output,pe.pending_buf,pe.pending_out,J,z.next_out),z.next_out+=J,pe.pending_out+=J,z.total_out+=J,z.avail_out-=J,pe.pending-=J,pe.pending===0&&(pe.pending_out=0))}function j(z,pe){o._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,pe),z.block_start=z.strstart,ee(z.strm)}function G(z,pe){z.pending_buf[z.pending++]=pe}function Y(z,pe){z.pending_buf[z.pending++]=pe>>>8&255,z.pending_buf[z.pending++]=255&pe}function Z(z,pe){var J,oe,ae=z.max_chain_length,ue=z.strstart,be=z.prev_length,_e=z.nice_match,ye=z.strstart>z.w_size-T?z.strstart-(z.w_size-T):0,Ee=z.window,ze=z.w_mask,Fe=z.prev,Ge=z.strstart+D,at=Ee[ue+be-1],ut=Ee[ue+be];z.prev_length>=z.good_match&&(ae>>=2),_e>z.lookahead&&(_e=z.lookahead);do if(Ee[(J=pe)+be]===ut&&Ee[J+be-1]===at&&Ee[J]===Ee[ue]&&Ee[++J]===Ee[ue+1]){ue+=2,J++;do;while(Ee[++ue]===Ee[++J]&&Ee[++ue]===Ee[++J]&&Ee[++ue]===Ee[++J]&&Ee[++ue]===Ee[++J]&&Ee[++ue]===Ee[++J]&&Ee[++ue]===Ee[++J]&&Ee[++ue]===Ee[++J]&&Ee[++ue]===Ee[++J]&&ue<Ge);if(oe=D-(Ge-ue),ue=Ge-D,be<oe){if(z.match_start=pe,_e<=(be=oe))break;at=Ee[ue+be-1],ut=Ee[ue+be]}}while((pe=Fe[pe&ze])>ye&&--ae!=0);return be<=z.lookahead?be:z.lookahead}function de(z){var pe,J,oe,ae,ue,be,_e,ye,Ee,ze,Fe=z.w_size;do{if(ae=z.window_size-z.lookahead-z.strstart,z.strstart>=Fe+(Fe-T)){for(s.arraySet(z.window,z.window,Fe,Fe,0),z.match_start-=Fe,z.strstart-=Fe,z.block_start-=Fe,pe=J=z.hash_size;oe=z.head[--pe],z.head[pe]=Fe<=oe?oe-Fe:0,--J;);for(pe=J=Fe;oe=z.prev[--pe],z.prev[pe]=Fe<=oe?oe-Fe:0,--J;);ae+=Fe}if(z.strm.avail_in===0)break;if(be=z.strm,_e=z.window,ye=z.strstart+z.lookahead,Ee=ae,ze=void 0,ze=be.avail_in,Ee<ze&&(ze=Ee),J=ze===0?0:(be.avail_in-=ze,s.arraySet(_e,be.input,be.next_in,ze,ye),be.state.wrap===1?be.adler=l(be.adler,_e,ze,ye):be.state.wrap===2&&(be.adler=c(be.adler,_e,ze,ye)),be.next_in+=ze,be.total_in+=ze,ze),z.lookahead+=J,z.lookahead+z.insert>=B)for(ue=z.strstart-z.insert,z.ins_h=z.window[ue],z.ins_h=(z.ins_h<<z.hash_shift^z.window[ue+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[ue+B-1])&z.hash_mask,z.prev[ue&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=ue,ue++,z.insert--,!(z.lookahead+z.insert<B)););}while(z.lookahead<T&&z.strm.avail_in!==0)}function he(z,pe){for(var J,oe;;){if(z.lookahead<T){if(de(z),z.lookahead<T&&pe===h)return M;if(z.lookahead===0)break}if(J=0,z.lookahead>=B&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,J=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),J!==0&&z.strstart-J<=z.w_size-T&&(z.match_length=Z(z,J)),z.match_length>=B)if(oe=o._tr_tally(z,z.strstart-z.match_start,z.match_length-B),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=B){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,J=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else oe=o._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(oe&&(j(z,!1),z.strm.avail_out===0))return M}return z.insert=z.strstart<B-1?z.strstart:B-1,pe===d?(j(z,!0),z.strm.avail_out===0?O:Q):z.last_lit&&(j(z,!1),z.strm.avail_out===0)?M:k}function fe(z,pe){for(var J,oe,ae;;){if(z.lookahead<T){if(de(z),z.lookahead<T&&pe===h)return M;if(z.lookahead===0)break}if(J=0,z.lookahead>=B&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,J=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=B-1,J!==0&&z.prev_length<z.max_lazy_match&&z.strstart-J<=z.w_size-T&&(z.match_length=Z(z,J),z.match_length<=5&&(z.strategy===1||z.match_length===B&&4096<z.strstart-z.match_start)&&(z.match_length=B-1)),z.prev_length>=B&&z.match_length<=z.prev_length){for(ae=z.strstart+z.lookahead-B,oe=o._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-B),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=ae&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,J=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=B-1,z.strstart++,oe&&(j(z,!1),z.strm.avail_out===0))return M}else if(z.match_available){if((oe=o._tr_tally(z,0,z.window[z.strstart-1]))&&j(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return M}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(oe=o._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<B-1?z.strstart:B-1,pe===d?(j(z,!0),z.strm.avail_out===0?O:Q):z.last_lit&&(j(z,!1),z.strm.avail_out===0)?M:k}function q(z,pe,J,oe,ae){this.good_length=z,this.max_lazy=pe,this.nice_length=J,this.max_chain=oe,this.func=ae}function ge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*C),this.dyn_dtree=new s.Buf16(2*(2*S+1)),this.bl_tree=new s.Buf16(2*(2*_+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(w+1),this.heap=new s.Buf16(2*b+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*b+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(z){var pe;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=m,(pe=z.state).pending=0,pe.pending_out=0,pe.wrap<0&&(pe.wrap=-pe.wrap),pe.status=pe.wrap?E:R,z.adler=pe.wrap===2?0:1,pe.last_flush=h,o._tr_init(pe),A):H(z,g)}function we(z){var pe=me(z);return pe===A&&function(J){J.window_size=2*J.w_size,te(J.head),J.max_lazy_match=i[J.level].max_lazy,J.good_match=i[J.level].good_length,J.nice_match=i[J.level].nice_length,J.max_chain_length=i[J.level].max_chain,J.strstart=0,J.block_start=0,J.lookahead=0,J.insert=0,J.match_length=J.prev_length=B-1,J.match_available=0,J.ins_h=0}(z.state),pe}function Me(z,pe,J,oe,ae,ue){if(!z)return g;var be=1;if(pe===p&&(pe=6),oe<0?(be=0,oe=-oe):15<oe&&(be=2,oe-=16),ae<1||x<ae||J!==y||oe<8||15<oe||pe<0||9<pe||ue<0||v<ue)return H(z,g);oe===8&&(oe=9);var _e=new ge;return(z.state=_e).strm=z,_e.wrap=be,_e.gzhead=null,_e.w_bits=oe,_e.w_size=1<<_e.w_bits,_e.w_mask=_e.w_size-1,_e.hash_bits=ae+7,_e.hash_size=1<<_e.hash_bits,_e.hash_mask=_e.hash_size-1,_e.hash_shift=~~((_e.hash_bits+B-1)/B),_e.window=new s.Buf8(2*_e.w_size),_e.head=new s.Buf16(_e.hash_size),_e.prev=new s.Buf16(_e.w_size),_e.lit_bufsize=1<<ae+6,_e.pending_buf_size=4*_e.lit_bufsize,_e.pending_buf=new s.Buf8(_e.pending_buf_size),_e.d_buf=1*_e.lit_bufsize,_e.l_buf=3*_e.lit_bufsize,_e.level=pe,_e.strategy=ue,_e.method=J,we(z)}i=[new q(0,0,0,0,function(z,pe){var J=65535;for(J>z.pending_buf_size-5&&(J=z.pending_buf_size-5);;){if(z.lookahead<=1){if(de(z),z.lookahead===0&&pe===h)return M;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var oe=z.block_start+J;if((z.strstart===0||z.strstart>=oe)&&(z.lookahead=z.strstart-oe,z.strstart=oe,j(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-T&&(j(z,!1),z.strm.avail_out===0))return M}return z.insert=0,pe===d?(j(z,!0),z.strm.avail_out===0?O:Q):(z.strstart>z.block_start&&(j(z,!1),z.strm.avail_out),M)}),new q(4,4,8,4,he),new q(4,5,16,8,he),new q(4,6,32,32,he),new q(4,4,16,16,fe),new q(8,16,32,32,fe),new q(8,16,128,128,fe),new q(8,32,128,256,fe),new q(32,128,258,1024,fe),new q(32,258,258,4096,fe)],a.deflateInit=function(z,pe){return Me(z,pe,y,15,8,0)},a.deflateInit2=Me,a.deflateReset=we,a.deflateResetKeep=me,a.deflateSetHeader=function(z,pe){return z&&z.state?z.state.wrap!==2?g:(z.state.gzhead=pe,A):g},a.deflate=function(z,pe){var J,oe,ae,ue;if(!z||!z.state||5<pe||pe<0)return z?H(z,g):g;if(oe=z.state,!z.output||!z.input&&z.avail_in!==0||oe.status===666&&pe!==d)return H(z,z.avail_out===0?-5:g);if(oe.strm=z,J=oe.last_flush,oe.last_flush=pe,oe.status===E)if(oe.wrap===2)z.adler=0,G(oe,31),G(oe,139),G(oe,8),oe.gzhead?(G(oe,(oe.gzhead.text?1:0)+(oe.gzhead.hcrc?2:0)+(oe.gzhead.extra?4:0)+(oe.gzhead.name?8:0)+(oe.gzhead.comment?16:0)),G(oe,255&oe.gzhead.time),G(oe,oe.gzhead.time>>8&255),G(oe,oe.gzhead.time>>16&255),G(oe,oe.gzhead.time>>24&255),G(oe,oe.level===9?2:2<=oe.strategy||oe.level<2?4:0),G(oe,255&oe.gzhead.os),oe.gzhead.extra&&oe.gzhead.extra.length&&(G(oe,255&oe.gzhead.extra.length),G(oe,oe.gzhead.extra.length>>8&255)),oe.gzhead.hcrc&&(z.adler=c(z.adler,oe.pending_buf,oe.pending,0)),oe.gzindex=0,oe.status=69):(G(oe,0),G(oe,0),G(oe,0),G(oe,0),G(oe,0),G(oe,oe.level===9?2:2<=oe.strategy||oe.level<2?4:0),G(oe,3),oe.status=R);else{var be=y+(oe.w_bits-8<<4)<<8;be|=(2<=oe.strategy||oe.level<2?0:oe.level<6?1:oe.level===6?2:3)<<6,oe.strstart!==0&&(be|=32),be+=31-be%31,oe.status=R,Y(oe,be),oe.strstart!==0&&(Y(oe,z.adler>>>16),Y(oe,65535&z.adler)),z.adler=1}if(oe.status===69)if(oe.gzhead.extra){for(ae=oe.pending;oe.gzindex<(65535&oe.gzhead.extra.length)&&(oe.pending!==oe.pending_buf_size||(oe.gzhead.hcrc&&oe.pending>ae&&(z.adler=c(z.adler,oe.pending_buf,oe.pending-ae,ae)),ee(z),ae=oe.pending,oe.pending!==oe.pending_buf_size));)G(oe,255&oe.gzhead.extra[oe.gzindex]),oe.gzindex++;oe.gzhead.hcrc&&oe.pending>ae&&(z.adler=c(z.adler,oe.pending_buf,oe.pending-ae,ae)),oe.gzindex===oe.gzhead.extra.length&&(oe.gzindex=0,oe.status=73)}else oe.status=73;if(oe.status===73)if(oe.gzhead.name){ae=oe.pending;do{if(oe.pending===oe.pending_buf_size&&(oe.gzhead.hcrc&&oe.pending>ae&&(z.adler=c(z.adler,oe.pending_buf,oe.pending-ae,ae)),ee(z),ae=oe.pending,oe.pending===oe.pending_buf_size)){ue=1;break}ue=oe.gzindex<oe.gzhead.name.length?255&oe.gzhead.name.charCodeAt(oe.gzindex++):0,G(oe,ue)}while(ue!==0);oe.gzhead.hcrc&&oe.pending>ae&&(z.adler=c(z.adler,oe.pending_buf,oe.pending-ae,ae)),ue===0&&(oe.gzindex=0,oe.status=91)}else oe.status=91;if(oe.status===91)if(oe.gzhead.comment){ae=oe.pending;do{if(oe.pending===oe.pending_buf_size&&(oe.gzhead.hcrc&&oe.pending>ae&&(z.adler=c(z.adler,oe.pending_buf,oe.pending-ae,ae)),ee(z),ae=oe.pending,oe.pending===oe.pending_buf_size)){ue=1;break}ue=oe.gzindex<oe.gzhead.comment.length?255&oe.gzhead.comment.charCodeAt(oe.gzindex++):0,G(oe,ue)}while(ue!==0);oe.gzhead.hcrc&&oe.pending>ae&&(z.adler=c(z.adler,oe.pending_buf,oe.pending-ae,ae)),ue===0&&(oe.status=103)}else oe.status=103;if(oe.status===103&&(oe.gzhead.hcrc?(oe.pending+2>oe.pending_buf_size&&ee(z),oe.pending+2<=oe.pending_buf_size&&(G(oe,255&z.adler),G(oe,z.adler>>8&255),z.adler=0,oe.status=R)):oe.status=R),oe.pending!==0){if(ee(z),z.avail_out===0)return oe.last_flush=-1,A}else if(z.avail_in===0&&W(pe)<=W(J)&&pe!==d)return H(z,-5);if(oe.status===666&&z.avail_in!==0)return H(z,-5);if(z.avail_in!==0||oe.lookahead!==0||pe!==h&&oe.status!==666){var _e=oe.strategy===2?function(ye,Ee){for(var ze;;){if(ye.lookahead===0&&(de(ye),ye.lookahead===0)){if(Ee===h)return M;break}if(ye.match_length=0,ze=o._tr_tally(ye,0,ye.window[ye.strstart]),ye.lookahead--,ye.strstart++,ze&&(j(ye,!1),ye.strm.avail_out===0))return M}return ye.insert=0,Ee===d?(j(ye,!0),ye.strm.avail_out===0?O:Q):ye.last_lit&&(j(ye,!1),ye.strm.avail_out===0)?M:k}(oe,pe):oe.strategy===3?function(ye,Ee){for(var ze,Fe,Ge,at,ut=ye.window;;){if(ye.lookahead<=D){if(de(ye),ye.lookahead<=D&&Ee===h)return M;if(ye.lookahead===0)break}if(ye.match_length=0,ye.lookahead>=B&&0<ye.strstart&&(Fe=ut[Ge=ye.strstart-1])===ut[++Ge]&&Fe===ut[++Ge]&&Fe===ut[++Ge]){at=ye.strstart+D;do;while(Fe===ut[++Ge]&&Fe===ut[++Ge]&&Fe===ut[++Ge]&&Fe===ut[++Ge]&&Fe===ut[++Ge]&&Fe===ut[++Ge]&&Fe===ut[++Ge]&&Fe===ut[++Ge]&&Ge<at);ye.match_length=D-(at-Ge),ye.match_length>ye.lookahead&&(ye.match_length=ye.lookahead)}if(ye.match_length>=B?(ze=o._tr_tally(ye,1,ye.match_length-B),ye.lookahead-=ye.match_length,ye.strstart+=ye.match_length,ye.match_length=0):(ze=o._tr_tally(ye,0,ye.window[ye.strstart]),ye.lookahead--,ye.strstart++),ze&&(j(ye,!1),ye.strm.avail_out===0))return M}return ye.insert=0,Ee===d?(j(ye,!0),ye.strm.avail_out===0?O:Q):ye.last_lit&&(j(ye,!1),ye.strm.avail_out===0)?M:k}(oe,pe):i[oe.level].func(oe,pe);if(_e!==O&&_e!==Q||(oe.status=666),_e===M||_e===O)return z.avail_out===0&&(oe.last_flush=-1),A;if(_e===k&&(pe===1?o._tr_align(oe):pe!==5&&(o._tr_stored_block(oe,0,0,!1),pe===3&&(te(oe.head),oe.lookahead===0&&(oe.strstart=0,oe.block_start=0,oe.insert=0))),ee(z),z.avail_out===0))return oe.last_flush=-1,A}return pe!==d?A:oe.wrap<=0?1:(oe.wrap===2?(G(oe,255&z.adler),G(oe,z.adler>>8&255),G(oe,z.adler>>16&255),G(oe,z.adler>>24&255),G(oe,255&z.total_in),G(oe,z.total_in>>8&255),G(oe,z.total_in>>16&255),G(oe,z.total_in>>24&255)):(Y(oe,z.adler>>>16),Y(oe,65535&z.adler)),ee(z),0<oe.wrap&&(oe.wrap=-oe.wrap),oe.pending!==0?A:1)},a.deflateEnd=function(z){var pe;return z&&z.state?(pe=z.state.status)!==E&&pe!==69&&pe!==73&&pe!==91&&pe!==103&&pe!==R&&pe!==666?H(z,g):(z.state=null,pe===R?H(z,-3):A):g},a.deflateSetDictionary=function(z,pe){var J,oe,ae,ue,be,_e,ye,Ee,ze=pe.length;if(!z||!z.state||(ue=(J=z.state).wrap)===2||ue===1&&J.status!==E||J.lookahead)return g;for(ue===1&&(z.adler=l(z.adler,pe,ze,0)),J.wrap=0,ze>=J.w_size&&(ue===0&&(te(J.head),J.strstart=0,J.block_start=0,J.insert=0),Ee=new s.Buf8(J.w_size),s.arraySet(Ee,pe,ze-J.w_size,J.w_size,0),pe=Ee,ze=J.w_size),be=z.avail_in,_e=z.next_in,ye=z.input,z.avail_in=ze,z.next_in=0,z.input=pe,de(J);J.lookahead>=B;){for(oe=J.strstart,ae=J.lookahead-(B-1);J.ins_h=(J.ins_h<<J.hash_shift^J.window[oe+B-1])&J.hash_mask,J.prev[oe&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=oe,oe++,--ae;);J.strstart=oe,J.lookahead=B-1,de(J)}return J.strstart+=J.lookahead,J.block_start=J.strstart,J.insert=J.lookahead,J.lookahead=0,J.match_length=J.prev_length=B-1,J.match_available=0,z.next_in=_e,z.input=ye,z.avail_in=be,J.wrap=ue,A},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,a){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,a){n.exports=function(i,s){var o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k;o=i.state,l=i.next_in,M=i.input,c=l+(i.avail_in-5),u=i.next_out,k=i.output,h=u-(s-i.avail_out),d=u+(i.avail_out-257),A=o.dmax,g=o.wsize,p=o.whave,v=o.wnext,m=o.window,y=o.hold,x=o.bits,b=o.lencode,S=o.distcode,_=(1<<o.lenbits)-1,C=(1<<o.distbits)-1;e:do{x<15&&(y+=M[l++]<<x,x+=8,y+=M[l++]<<x,x+=8),w=b[y&_];t:for(;;){if(y>>>=B=w>>>24,x-=B,(B=w>>>16&255)===0)k[u++]=65535&w;else{if(!(16&B)){if(!(64&B)){w=b[(65535&w)+(y&(1<<B)-1)];continue t}if(32&B){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}D=65535&w,(B&=15)&&(x<B&&(y+=M[l++]<<x,x+=8),D+=y&(1<<B)-1,y>>>=B,x-=B),x<15&&(y+=M[l++]<<x,x+=8,y+=M[l++]<<x,x+=8),w=S[y&C];r:for(;;){if(y>>>=B=w>>>24,x-=B,!(16&(B=w>>>16&255))){if(!(64&B)){w=S[(65535&w)+(y&(1<<B)-1)];continue r}i.msg="invalid distance code",o.mode=30;break e}if(T=65535&w,x<(B&=15)&&(y+=M[l++]<<x,(x+=8)<B&&(y+=M[l++]<<x,x+=8)),A<(T+=y&(1<<B)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(y>>>=B,x-=B,(B=u-h)<T){if(p<(B=T-B)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(R=m,(E=0)===v){if(E+=g-B,B<D){for(D-=B;k[u++]=m[E++],--B;);E=u-T,R=k}}else if(v<B){if(E+=g+v-B,(B-=v)<D){for(D-=B;k[u++]=m[E++],--B;);if(E=0,v<D){for(D-=B=v;k[u++]=m[E++],--B;);E=u-T,R=k}}}else if(E+=v-B,B<D){for(D-=B;k[u++]=m[E++],--B;);E=u-T,R=k}for(;2<D;)k[u++]=R[E++],k[u++]=R[E++],k[u++]=R[E++],D-=3;D&&(k[u++]=R[E++],1<D&&(k[u++]=R[E++]))}else{for(E=u-T;k[u++]=k[E++],k[u++]=k[E++],k[u++]=k[E++],2<(D-=3););D&&(k[u++]=k[E++],1<D&&(k[u++]=k[E++]))}break}}break}}while(l<c&&u<d);l-=D=x>>3,y&=(1<<(x-=D<<3))-1,i.next_in=l,i.next_out=u,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=u<d?d-u+257:257-(u-d),o.hold=y,o.bits=x}},{}],49:[function(t,n,a){var i=t("../utils/common"),s=t("./adler32"),o=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),u=1,h=2,d=0,A=-2,g=1,p=852,v=592;function m(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(E){var R;return E&&E.state?(R=E.state,E.total_in=E.total_out=R.total=0,E.msg="",R.wrap&&(E.adler=1&R.wrap),R.mode=g,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new i.Buf32(p),R.distcode=R.distdyn=new i.Buf32(v),R.sane=1,R.back=-1,d):A}function b(E){var R;return E&&E.state?((R=E.state).wsize=0,R.whave=0,R.wnext=0,x(E)):A}function S(E,R){var M,k;return E&&E.state?(k=E.state,R<0?(M=0,R=-R):(M=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?A:(k.window!==null&&k.wbits!==R&&(k.window=null),k.wrap=M,k.wbits=R,b(E))):A}function _(E,R){var M,k;return E?(k=new y,(E.state=k).window=null,(M=S(E,R))!==d&&(E.state=null),M):A}var C,w,B=!0;function D(E){if(B){var R;for(C=new i.Buf32(512),w=new i.Buf32(32),R=0;R<144;)E.lens[R++]=8;for(;R<256;)E.lens[R++]=9;for(;R<280;)E.lens[R++]=7;for(;R<288;)E.lens[R++]=8;for(c(u,E.lens,0,288,C,0,E.work,{bits:9}),R=0;R<32;)E.lens[R++]=5;c(h,E.lens,0,32,w,0,E.work,{bits:5}),B=!1}E.lencode=C,E.lenbits=9,E.distcode=w,E.distbits=5}function T(E,R,M,k){var O,Q=E.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new i.Buf8(Q.wsize)),k>=Q.wsize?(i.arraySet(Q.window,R,M-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(k<(O=Q.wsize-Q.wnext)&&(O=k),i.arraySet(Q.window,R,M-k,O,Q.wnext),(k-=O)?(i.arraySet(Q.window,R,M-k,k,0),Q.wnext=k,Q.whave=Q.wsize):(Q.wnext+=O,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=O))),0}a.inflateReset=b,a.inflateReset2=S,a.inflateResetKeep=x,a.inflateInit=function(E){return _(E,15)},a.inflateInit2=_,a.inflate=function(E,R){var M,k,O,Q,H,W,te,ee,j,G,Y,Z,de,he,fe,q,ge,me,we,Me,z,pe,J,oe,ae=0,ue=new i.Buf8(4),be=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return A;(M=E.state).mode===12&&(M.mode=13),H=E.next_out,O=E.output,te=E.avail_out,Q=E.next_in,k=E.input,W=E.avail_in,ee=M.hold,j=M.bits,G=W,Y=te,pe=d;e:for(;;)switch(M.mode){case g:if(M.wrap===0){M.mode=13;break}for(;j<16;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(2&M.wrap&&ee===35615){ue[M.check=0]=255&ee,ue[1]=ee>>>8&255,M.check=o(M.check,ue,2,0),j=ee=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&ee)<<8)+(ee>>8))%31){E.msg="incorrect header check",M.mode=30;break}if((15&ee)!=8){E.msg="unknown compression method",M.mode=30;break}if(j-=4,z=8+(15&(ee>>>=4)),M.wbits===0)M.wbits=z;else if(z>M.wbits){E.msg="invalid window size",M.mode=30;break}M.dmax=1<<z,E.adler=M.check=1,M.mode=512&ee?10:12,j=ee=0;break;case 2:for(;j<16;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(M.flags=ee,(255&M.flags)!=8){E.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){E.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=ee>>8&1),512&M.flags&&(ue[0]=255&ee,ue[1]=ee>>>8&255,M.check=o(M.check,ue,2,0)),j=ee=0,M.mode=3;case 3:for(;j<32;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}M.head&&(M.head.time=ee),512&M.flags&&(ue[0]=255&ee,ue[1]=ee>>>8&255,ue[2]=ee>>>16&255,ue[3]=ee>>>24&255,M.check=o(M.check,ue,4,0)),j=ee=0,M.mode=4;case 4:for(;j<16;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}M.head&&(M.head.xflags=255&ee,M.head.os=ee>>8),512&M.flags&&(ue[0]=255&ee,ue[1]=ee>>>8&255,M.check=o(M.check,ue,2,0)),j=ee=0,M.mode=5;case 5:if(1024&M.flags){for(;j<16;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}M.length=ee,M.head&&(M.head.extra_len=ee),512&M.flags&&(ue[0]=255&ee,ue[1]=ee>>>8&255,M.check=o(M.check,ue,2,0)),j=ee=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(W<(Z=M.length)&&(Z=W),Z&&(M.head&&(z=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),i.arraySet(M.head.extra,k,Q,Z,z)),512&M.flags&&(M.check=o(M.check,k,Z,Q)),W-=Z,Q+=Z,M.length-=Z),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(W===0)break e;for(Z=0;z=k[Q+Z++],M.head&&z&&M.length<65536&&(M.head.name+=String.fromCharCode(z)),z&&Z<W;);if(512&M.flags&&(M.check=o(M.check,k,Z,Q)),W-=Z,Q+=Z,z)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(W===0)break e;for(Z=0;z=k[Q+Z++],M.head&&z&&M.length<65536&&(M.head.comment+=String.fromCharCode(z)),z&&Z<W;);if(512&M.flags&&(M.check=o(M.check,k,Z,Q)),W-=Z,Q+=Z,z)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;j<16;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(ee!==(65535&M.check)){E.msg="header crc mismatch",M.mode=30;break}j=ee=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),E.adler=M.check=0,M.mode=12;break;case 10:for(;j<32;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}E.adler=M.check=m(ee),j=ee=0,M.mode=11;case 11:if(M.havedict===0)return E.next_out=H,E.avail_out=te,E.next_in=Q,E.avail_in=W,M.hold=ee,M.bits=j,2;E.adler=M.check=1,M.mode=12;case 12:if(R===5||R===6)break e;case 13:if(M.last){ee>>>=7&j,j-=7&j,M.mode=27;break}for(;j<3;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}switch(M.last=1&ee,j-=1,3&(ee>>>=1)){case 0:M.mode=14;break;case 1:if(D(M),M.mode=20,R!==6)break;ee>>>=2,j-=2;break e;case 2:M.mode=17;break;case 3:E.msg="invalid block type",M.mode=30}ee>>>=2,j-=2;break;case 14:for(ee>>>=7&j,j-=7&j;j<32;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if((65535&ee)!=(ee>>>16^65535)){E.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&ee,j=ee=0,M.mode=15,R===6)break e;case 15:M.mode=16;case 16:if(Z=M.length){if(W<Z&&(Z=W),te<Z&&(Z=te),Z===0)break e;i.arraySet(O,k,Q,Z,H),W-=Z,Q+=Z,te-=Z,H+=Z,M.length-=Z;break}M.mode=12;break;case 17:for(;j<14;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(M.nlen=257+(31&ee),ee>>>=5,j-=5,M.ndist=1+(31&ee),ee>>>=5,j-=5,M.ncode=4+(15&ee),ee>>>=4,j-=4,286<M.nlen||30<M.ndist){E.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;j<3;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}M.lens[be[M.have++]]=7&ee,ee>>>=3,j-=3}for(;M.have<19;)M.lens[be[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,J={bits:M.lenbits},pe=c(0,M.lens,0,19,M.lencode,0,M.work,J),M.lenbits=J.bits,pe){E.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;q=(ae=M.lencode[ee&(1<<M.lenbits)-1])>>>16&255,ge=65535&ae,!((fe=ae>>>24)<=j);){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(ge<16)ee>>>=fe,j-=fe,M.lens[M.have++]=ge;else{if(ge===16){for(oe=fe+2;j<oe;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(ee>>>=fe,j-=fe,M.have===0){E.msg="invalid bit length repeat",M.mode=30;break}z=M.lens[M.have-1],Z=3+(3&ee),ee>>>=2,j-=2}else if(ge===17){for(oe=fe+3;j<oe;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}j-=fe,z=0,Z=3+(7&(ee>>>=fe)),ee>>>=3,j-=3}else{for(oe=fe+7;j<oe;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}j-=fe,z=0,Z=11+(127&(ee>>>=fe)),ee>>>=7,j-=7}if(M.have+Z>M.nlen+M.ndist){E.msg="invalid bit length repeat",M.mode=30;break}for(;Z--;)M.lens[M.have++]=z}}if(M.mode===30)break;if(M.lens[256]===0){E.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,J={bits:M.lenbits},pe=c(u,M.lens,0,M.nlen,M.lencode,0,M.work,J),M.lenbits=J.bits,pe){E.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,J={bits:M.distbits},pe=c(h,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,J),M.distbits=J.bits,pe){E.msg="invalid distances set",M.mode=30;break}if(M.mode=20,R===6)break e;case 20:M.mode=21;case 21:if(6<=W&&258<=te){E.next_out=H,E.avail_out=te,E.next_in=Q,E.avail_in=W,M.hold=ee,M.bits=j,l(E,Y),H=E.next_out,O=E.output,te=E.avail_out,Q=E.next_in,k=E.input,W=E.avail_in,ee=M.hold,j=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;q=(ae=M.lencode[ee&(1<<M.lenbits)-1])>>>16&255,ge=65535&ae,!((fe=ae>>>24)<=j);){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(q&&!(240&q)){for(me=fe,we=q,Me=ge;q=(ae=M.lencode[Me+((ee&(1<<me+we)-1)>>me)])>>>16&255,ge=65535&ae,!(me+(fe=ae>>>24)<=j);){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}ee>>>=me,j-=me,M.back+=me}if(ee>>>=fe,j-=fe,M.back+=fe,M.length=ge,q===0){M.mode=26;break}if(32&q){M.back=-1,M.mode=12;break}if(64&q){E.msg="invalid literal/length code",M.mode=30;break}M.extra=15&q,M.mode=22;case 22:if(M.extra){for(oe=M.extra;j<oe;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}M.length+=ee&(1<<M.extra)-1,ee>>>=M.extra,j-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;q=(ae=M.distcode[ee&(1<<M.distbits)-1])>>>16&255,ge=65535&ae,!((fe=ae>>>24)<=j);){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(!(240&q)){for(me=fe,we=q,Me=ge;q=(ae=M.distcode[Me+((ee&(1<<me+we)-1)>>me)])>>>16&255,ge=65535&ae,!(me+(fe=ae>>>24)<=j);){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}ee>>>=me,j-=me,M.back+=me}if(ee>>>=fe,j-=fe,M.back+=fe,64&q){E.msg="invalid distance code",M.mode=30;break}M.offset=ge,M.extra=15&q,M.mode=24;case 24:if(M.extra){for(oe=M.extra;j<oe;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}M.offset+=ee&(1<<M.extra)-1,ee>>>=M.extra,j-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){E.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(te===0)break e;if(Z=Y-te,M.offset>Z){if((Z=M.offset-Z)>M.whave&&M.sane){E.msg="invalid distance too far back",M.mode=30;break}de=Z>M.wnext?(Z-=M.wnext,M.wsize-Z):M.wnext-Z,Z>M.length&&(Z=M.length),he=M.window}else he=O,de=H-M.offset,Z=M.length;for(te<Z&&(Z=te),te-=Z,M.length-=Z;O[H++]=he[de++],--Z;);M.length===0&&(M.mode=21);break;case 26:if(te===0)break e;O[H++]=M.length,te--,M.mode=21;break;case 27:if(M.wrap){for(;j<32;){if(W===0)break e;W--,ee|=k[Q++]<<j,j+=8}if(Y-=te,E.total_out+=Y,M.total+=Y,Y&&(E.adler=M.check=M.flags?o(M.check,O,Y,H-Y):s(M.check,O,Y,H-Y)),Y=te,(M.flags?ee:m(ee))!==M.check){E.msg="incorrect data check",M.mode=30;break}j=ee=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;j<32;){if(W===0)break e;W--,ee+=k[Q++]<<j,j+=8}if(ee!==(4294967295&M.total)){E.msg="incorrect length check",M.mode=30;break}j=ee=0}M.mode=29;case 29:pe=1;break e;case 30:pe=-3;break e;case 31:return-4;case 32:default:return A}return E.next_out=H,E.avail_out=te,E.next_in=Q,E.avail_in=W,M.hold=ee,M.bits=j,(M.wsize||Y!==E.avail_out&&M.mode<30&&(M.mode<27||R!==4))&&T(E,E.output,E.next_out,Y-E.avail_out)?(M.mode=31,-4):(G-=E.avail_in,Y-=E.avail_out,E.total_in+=G,E.total_out+=Y,M.total+=Y,M.wrap&&Y&&(E.adler=M.check=M.flags?o(M.check,O,Y,E.next_out-Y):s(M.check,O,Y,E.next_out-Y)),E.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(G==0&&Y===0||R===4)&&pe===d&&(pe=-5),pe)},a.inflateEnd=function(E){if(!E||!E.state)return A;var R=E.state;return R.window&&(R.window=null),E.state=null,d},a.inflateGetHeader=function(E,R){var M;return E&&E.state&&2&(M=E.state).wrap?((M.head=R).done=!1,d):A},a.inflateSetDictionary=function(E,R){var M,k=R.length;return E&&E.state?(M=E.state).wrap!==0&&M.mode!==11?A:M.mode===11&&s(1,R,k,0)!==M.check?-3:T(E,R,k,k)?(M.mode=31,-4):(M.havedict=1,d):A},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,a){var i=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,h,d,A,g,p,v,m){var y,x,b,S,_,C,w,B,D,T=m.bits,E=0,R=0,M=0,k=0,O=0,Q=0,H=0,W=0,te=0,ee=0,j=null,G=0,Y=new i.Buf16(16),Z=new i.Buf16(16),de=null,he=0;for(E=0;E<=15;E++)Y[E]=0;for(R=0;R<A;R++)Y[h[d+R]]++;for(O=T,k=15;1<=k&&Y[k]===0;k--);if(k<O&&(O=k),k===0)return g[p++]=20971520,g[p++]=20971520,m.bits=1,0;for(M=1;M<k&&Y[M]===0;M++);for(O<M&&(O=M),E=W=1;E<=15;E++)if(W<<=1,(W-=Y[E])<0)return-1;if(0<W&&(u===0||k!==1))return-1;for(Z[1]=0,E=1;E<15;E++)Z[E+1]=Z[E]+Y[E];for(R=0;R<A;R++)h[d+R]!==0&&(v[Z[h[d+R]]++]=R);if(C=u===0?(j=de=v,19):u===1?(j=s,G-=257,de=o,he-=257,256):(j=l,de=c,-1),E=M,_=p,H=R=ee=0,b=-1,S=(te=1<<(Q=O))-1,u===1&&852<te||u===2&&592<te)return 1;for(;;){for(w=E-H,D=v[R]<C?(B=0,v[R]):v[R]>C?(B=de[he+v[R]],j[G+v[R]]):(B=96,0),y=1<<E-H,M=x=1<<Q;g[_+(ee>>H)+(x-=y)]=w<<24|B<<16|D|0,x!==0;);for(y=1<<E-1;ee&y;)y>>=1;if(y!==0?(ee&=y-1,ee+=y):ee=0,R++,--Y[E]==0){if(E===k)break;E=h[d+v[R]]}if(O<E&&(ee&S)!==b){for(H===0&&(H=O),_+=M,W=1<<(Q=E-H);Q+H<k&&!((W-=Y[Q+H])<=0);)Q++,W<<=1;if(te+=1<<Q,u===1&&852<te||u===2&&592<te)return 1;g[b=ee&S]=O<<24|Q<<16|_-p|0}}return ee!==0&&(g[_+ee]=E-H<<24|64<<16|0),m.bits=O,0}},{"../utils/common":41}],51:[function(t,n,a){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,a){var i=t("../utils/common"),s=0,o=1;function l(ae){for(var ue=ae.length;0<=--ue;)ae[ue]=0}var c=0,u=29,h=256,d=h+1+u,A=30,g=19,p=2*d+1,v=15,m=16,y=7,x=256,b=16,S=17,_=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(d+2));l(T);var E=new Array(2*A);l(E);var R=new Array(512);l(R);var M=new Array(256);l(M);var k=new Array(u);l(k);var O,Q,H,W=new Array(A);function te(ae,ue,be,_e,ye){this.static_tree=ae,this.extra_bits=ue,this.extra_base=be,this.elems=_e,this.max_length=ye,this.has_stree=ae&&ae.length}function ee(ae,ue){this.dyn_tree=ae,this.max_code=0,this.stat_desc=ue}function j(ae){return ae<256?R[ae]:R[256+(ae>>>7)]}function G(ae,ue){ae.pending_buf[ae.pending++]=255&ue,ae.pending_buf[ae.pending++]=ue>>>8&255}function Y(ae,ue,be){ae.bi_valid>m-be?(ae.bi_buf|=ue<<ae.bi_valid&65535,G(ae,ae.bi_buf),ae.bi_buf=ue>>m-ae.bi_valid,ae.bi_valid+=be-m):(ae.bi_buf|=ue<<ae.bi_valid&65535,ae.bi_valid+=be)}function Z(ae,ue,be){Y(ae,be[2*ue],be[2*ue+1])}function de(ae,ue){for(var be=0;be|=1&ae,ae>>>=1,be<<=1,0<--ue;);return be>>>1}function he(ae,ue,be){var _e,ye,Ee=new Array(v+1),ze=0;for(_e=1;_e<=v;_e++)Ee[_e]=ze=ze+be[_e-1]<<1;for(ye=0;ye<=ue;ye++){var Fe=ae[2*ye+1];Fe!==0&&(ae[2*ye]=de(Ee[Fe]++,Fe))}}function fe(ae){var ue;for(ue=0;ue<d;ue++)ae.dyn_ltree[2*ue]=0;for(ue=0;ue<A;ue++)ae.dyn_dtree[2*ue]=0;for(ue=0;ue<g;ue++)ae.bl_tree[2*ue]=0;ae.dyn_ltree[2*x]=1,ae.opt_len=ae.static_len=0,ae.last_lit=ae.matches=0}function q(ae){8<ae.bi_valid?G(ae,ae.bi_buf):0<ae.bi_valid&&(ae.pending_buf[ae.pending++]=ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0}function ge(ae,ue,be,_e){var ye=2*ue,Ee=2*be;return ae[ye]<ae[Ee]||ae[ye]===ae[Ee]&&_e[ue]<=_e[be]}function me(ae,ue,be){for(var _e=ae.heap[be],ye=be<<1;ye<=ae.heap_len&&(ye<ae.heap_len&&ge(ue,ae.heap[ye+1],ae.heap[ye],ae.depth)&&ye++,!ge(ue,_e,ae.heap[ye],ae.depth));)ae.heap[be]=ae.heap[ye],be=ye,ye<<=1;ae.heap[be]=_e}function we(ae,ue,be){var _e,ye,Ee,ze,Fe=0;if(ae.last_lit!==0)for(;_e=ae.pending_buf[ae.d_buf+2*Fe]<<8|ae.pending_buf[ae.d_buf+2*Fe+1],ye=ae.pending_buf[ae.l_buf+Fe],Fe++,_e===0?Z(ae,ye,ue):(Z(ae,(Ee=M[ye])+h+1,ue),(ze=C[Ee])!==0&&Y(ae,ye-=k[Ee],ze),Z(ae,Ee=j(--_e),be),(ze=w[Ee])!==0&&Y(ae,_e-=W[Ee],ze)),Fe<ae.last_lit;);Z(ae,x,ue)}function Me(ae,ue){var be,_e,ye,Ee=ue.dyn_tree,ze=ue.stat_desc.static_tree,Fe=ue.stat_desc.has_stree,Ge=ue.stat_desc.elems,at=-1;for(ae.heap_len=0,ae.heap_max=p,be=0;be<Ge;be++)Ee[2*be]!==0?(ae.heap[++ae.heap_len]=at=be,ae.depth[be]=0):Ee[2*be+1]=0;for(;ae.heap_len<2;)Ee[2*(ye=ae.heap[++ae.heap_len]=at<2?++at:0)]=1,ae.depth[ye]=0,ae.opt_len--,Fe&&(ae.static_len-=ze[2*ye+1]);for(ue.max_code=at,be=ae.heap_len>>1;1<=be;be--)me(ae,Ee,be);for(ye=Ge;be=ae.heap[1],ae.heap[1]=ae.heap[ae.heap_len--],me(ae,Ee,1),_e=ae.heap[1],ae.heap[--ae.heap_max]=be,ae.heap[--ae.heap_max]=_e,Ee[2*ye]=Ee[2*be]+Ee[2*_e],ae.depth[ye]=(ae.depth[be]>=ae.depth[_e]?ae.depth[be]:ae.depth[_e])+1,Ee[2*be+1]=Ee[2*_e+1]=ye,ae.heap[1]=ye++,me(ae,Ee,1),2<=ae.heap_len;);ae.heap[--ae.heap_max]=ae.heap[1],function(ut,gt){var Le,Qe,ht,it,Vt,kt,Bt=gt.dyn_tree,Sr=gt.max_code,zt=gt.stat_desc.static_tree,qe=gt.stat_desc.has_stree,pt=gt.stat_desc.extra_bits,Nt=gt.stat_desc.extra_base,Kt=gt.stat_desc.max_length,Yt=0;for(it=0;it<=v;it++)ut.bl_count[it]=0;for(Bt[2*ut.heap[ut.heap_max]+1]=0,Le=ut.heap_max+1;Le<p;Le++)Kt<(it=Bt[2*Bt[2*(Qe=ut.heap[Le])+1]+1]+1)&&(it=Kt,Yt++),Bt[2*Qe+1]=it,Sr<Qe||(ut.bl_count[it]++,Vt=0,Nt<=Qe&&(Vt=pt[Qe-Nt]),kt=Bt[2*Qe],ut.opt_len+=kt*(it+Vt),qe&&(ut.static_len+=kt*(zt[2*Qe+1]+Vt)));if(Yt!==0){do{for(it=Kt-1;ut.bl_count[it]===0;)it--;ut.bl_count[it]--,ut.bl_count[it+1]+=2,ut.bl_count[Kt]--,Yt-=2}while(0<Yt);for(it=Kt;it!==0;it--)for(Qe=ut.bl_count[it];Qe!==0;)Sr<(ht=ut.heap[--Le])||(Bt[2*ht+1]!==it&&(ut.opt_len+=(it-Bt[2*ht+1])*Bt[2*ht],Bt[2*ht+1]=it),Qe--)}}(ae,ue),he(Ee,at,ae.bl_count)}function z(ae,ue,be){var _e,ye,Ee=-1,ze=ue[1],Fe=0,Ge=7,at=4;for(ze===0&&(Ge=138,at=3),ue[2*(be+1)+1]=65535,_e=0;_e<=be;_e++)ye=ze,ze=ue[2*(_e+1)+1],++Fe<Ge&&ye===ze||(Fe<at?ae.bl_tree[2*ye]+=Fe:ye!==0?(ye!==Ee&&ae.bl_tree[2*ye]++,ae.bl_tree[2*b]++):Fe<=10?ae.bl_tree[2*S]++:ae.bl_tree[2*_]++,Ee=ye,at=(Fe=0)===ze?(Ge=138,3):ye===ze?(Ge=6,3):(Ge=7,4))}function pe(ae,ue,be){var _e,ye,Ee=-1,ze=ue[1],Fe=0,Ge=7,at=4;for(ze===0&&(Ge=138,at=3),_e=0;_e<=be;_e++)if(ye=ze,ze=ue[2*(_e+1)+1],!(++Fe<Ge&&ye===ze)){if(Fe<at)for(;Z(ae,ye,ae.bl_tree),--Fe!=0;);else ye!==0?(ye!==Ee&&(Z(ae,ye,ae.bl_tree),Fe--),Z(ae,b,ae.bl_tree),Y(ae,Fe-3,2)):Fe<=10?(Z(ae,S,ae.bl_tree),Y(ae,Fe-3,3)):(Z(ae,_,ae.bl_tree),Y(ae,Fe-11,7));Ee=ye,at=(Fe=0)===ze?(Ge=138,3):ye===ze?(Ge=6,3):(Ge=7,4)}}l(W);var J=!1;function oe(ae,ue,be,_e){Y(ae,(c<<1)+(_e?1:0),3),function(ye,Ee,ze,Fe){q(ye),G(ye,ze),G(ye,~ze),i.arraySet(ye.pending_buf,ye.window,Ee,ze,ye.pending),ye.pending+=ze}(ae,ue,be)}a._tr_init=function(ae){J||(function(){var ue,be,_e,ye,Ee,ze=new Array(v+1);for(ye=_e=0;ye<u-1;ye++)for(k[ye]=_e,ue=0;ue<1<<C[ye];ue++)M[_e++]=ye;for(M[_e-1]=ye,ye=Ee=0;ye<16;ye++)for(W[ye]=Ee,ue=0;ue<1<<w[ye];ue++)R[Ee++]=ye;for(Ee>>=7;ye<A;ye++)for(W[ye]=Ee<<7,ue=0;ue<1<<w[ye]-7;ue++)R[256+Ee++]=ye;for(be=0;be<=v;be++)ze[be]=0;for(ue=0;ue<=143;)T[2*ue+1]=8,ue++,ze[8]++;for(;ue<=255;)T[2*ue+1]=9,ue++,ze[9]++;for(;ue<=279;)T[2*ue+1]=7,ue++,ze[7]++;for(;ue<=287;)T[2*ue+1]=8,ue++,ze[8]++;for(he(T,d+1,ze),ue=0;ue<A;ue++)E[2*ue+1]=5,E[2*ue]=de(ue,5);O=new te(T,C,h+1,d,v),Q=new te(E,w,0,A,v),H=new te(new Array(0),B,0,g,y)}(),J=!0),ae.l_desc=new ee(ae.dyn_ltree,O),ae.d_desc=new ee(ae.dyn_dtree,Q),ae.bl_desc=new ee(ae.bl_tree,H),ae.bi_buf=0,ae.bi_valid=0,fe(ae)},a._tr_stored_block=oe,a._tr_flush_block=function(ae,ue,be,_e){var ye,Ee,ze=0;0<ae.level?(ae.strm.data_type===2&&(ae.strm.data_type=function(Fe){var Ge,at=4093624447;for(Ge=0;Ge<=31;Ge++,at>>>=1)if(1&at&&Fe.dyn_ltree[2*Ge]!==0)return s;if(Fe.dyn_ltree[18]!==0||Fe.dyn_ltree[20]!==0||Fe.dyn_ltree[26]!==0)return o;for(Ge=32;Ge<h;Ge++)if(Fe.dyn_ltree[2*Ge]!==0)return o;return s}(ae)),Me(ae,ae.l_desc),Me(ae,ae.d_desc),ze=function(Fe){var Ge;for(z(Fe,Fe.dyn_ltree,Fe.l_desc.max_code),z(Fe,Fe.dyn_dtree,Fe.d_desc.max_code),Me(Fe,Fe.bl_desc),Ge=g-1;3<=Ge&&Fe.bl_tree[2*D[Ge]+1]===0;Ge--);return Fe.opt_len+=3*(Ge+1)+5+5+4,Ge}(ae),ye=ae.opt_len+3+7>>>3,(Ee=ae.static_len+3+7>>>3)<=ye&&(ye=Ee)):ye=Ee=be+5,be+4<=ye&&ue!==-1?oe(ae,ue,be,_e):ae.strategy===4||Ee===ye?(Y(ae,2+(_e?1:0),3),we(ae,T,E)):(Y(ae,4+(_e?1:0),3),function(Fe,Ge,at,ut){var gt;for(Y(Fe,Ge-257,5),Y(Fe,at-1,5),Y(Fe,ut-4,4),gt=0;gt<ut;gt++)Y(Fe,Fe.bl_tree[2*D[gt]+1],3);pe(Fe,Fe.dyn_ltree,Ge-1),pe(Fe,Fe.dyn_dtree,at-1)}(ae,ae.l_desc.max_code+1,ae.d_desc.max_code+1,ze+1),we(ae,ae.dyn_ltree,ae.dyn_dtree)),fe(ae),_e&&q(ae)},a._tr_tally=function(ae,ue,be){return ae.pending_buf[ae.d_buf+2*ae.last_lit]=ue>>>8&255,ae.pending_buf[ae.d_buf+2*ae.last_lit+1]=255&ue,ae.pending_buf[ae.l_buf+ae.last_lit]=255&be,ae.last_lit++,ue===0?ae.dyn_ltree[2*be]++:(ae.matches++,ue--,ae.dyn_ltree[2*(M[be]+h+1)]++,ae.dyn_dtree[2*j(ue)]++),ae.last_lit===ae.lit_bufsize-1},a._tr_align=function(ae){Y(ae,2,3),Z(ae,x,T),function(ue){ue.bi_valid===16?(G(ue,ue.bi_buf),ue.bi_buf=0,ue.bi_valid=0):8<=ue.bi_valid&&(ue.pending_buf[ue.pending++]=255&ue.bi_buf,ue.bi_buf>>=8,ue.bi_valid-=8)}(ae)}},{"../utils/common":41}],53:[function(t,n,a){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,a){(function(i){(function(s,o){if(!s.setImmediate){var l,c,u,h,d=1,A={},g=!1,p=s.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(s);v=v&&v.setTimeout?v:s,l={}.toString.call(s.process)==="[object process]"?function(b){process.nextTick(function(){y(b)})}:function(){if(s.postMessage&&!s.importScripts){var b=!0,S=s.onmessage;return s.onmessage=function(){b=!1},s.postMessage("","*"),s.onmessage=S,b}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",x,!1):s.attachEvent("onmessage",x),function(b){s.postMessage(h+b,"*")}):s.MessageChannel?((u=new MessageChannel).port1.onmessage=function(b){y(b.data)},function(b){u.port2.postMessage(b)}):p&&"onreadystatechange"in p.createElement("script")?(c=p.documentElement,function(b){var S=p.createElement("script");S.onreadystatechange=function(){y(b),S.onreadystatechange=null,c.removeChild(S),S=null},c.appendChild(S)}):function(b){setTimeout(y,0,b)},v.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var S=new Array(arguments.length-1),_=0;_<S.length;_++)S[_]=arguments[_+1];var C={callback:b,args:S};return A[d]=C,l(d),d++},v.clearImmediate=m}function m(b){delete A[b]}function y(b){if(g)setTimeout(y,0,b);else{var S=A[b];if(S){g=!0;try{(function(_){var C=_.callback,w=_.args;switch(w.length){case 0:C();break;case 1:C(w[0]);break;case 2:C(w[0],w[1]);break;case 3:C(w[0],w[1],w[2]);break;default:C.apply(o,w)}})(S)}finally{m(b),g=!1}}}}function x(b){b.source===s&&typeof b.data=="string"&&b.data.indexOf(h)===0&&y(+b.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof C2<"u"?C2:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(LX);var xge=LX.exports;const bge=NW(xge);function wge(r="system"){return new Date}const Sg=class Sg{constructor(){Ce(this,"metrics",new Map)}static getInstance(){return Sg.instance||(Sg.instance=new Sg),Sg.instance}startTimer(e){const t=performance.now();return()=>{const a=performance.now()-t;this.recordExecution(e,a),a>50&&console.warn(`⚠️ ${e} took ${a.toFixed(2)}ms`)}}recordExecution(e,t){const n=this.metrics.get(e)||{totalTime:0,executionCount:0,maxTime:0,lastTime:0};n.totalTime+=t,n.executionCount++,n.maxTime=Math.max(n.maxTime,t),n.lastTime=t,this.metrics.set(e,n)}getMetrics(e){const t=this.metrics.get(e);return t?{averageTime:t.totalTime/t.executionCount,maxTime:t.maxTime,lastTime:t.lastTime,executionCount:t.executionCount}:null}getAllMetrics(){const e={};return this.metrics.forEach((t,n)=>{e[n]={averageTime:t.totalTime/t.executionCount,maxTime:t.maxTime,lastTime:t.lastTime,executionCount:t.executionCount}}),e}logPerformanceReport(){console.group("📊 Performance Report"),this.metrics.forEach((e,t)=>{const n=e.totalTime/e.executionCount;console.log(`${t}: avg=${n.toFixed(2)}ms, max=${e.maxTime.toFixed(2)}ms, count=${e.executionCount}`)}),console.groupEnd()}};Ce(Sg,"instance");let c3=Sg;const Gy=c3.getInstance();class dk{constructor(){Ce(this,"STORAGE_PREFIX","linkband_session_");Ce(this,"METADATA_KEY","linkband_sessions_metadata");Ce(this,"MAX_SESSIONS",10);Ce(this,"MAX_DATA_POINTS",5e4);Ce(this,"currentSession",null);Ce(this,"autoSaveInterval",null);Ce(this,"AUTO_SAVE_INTERVAL",6e4);Ce(this,"lastSavedDataCount",{eeg:0,ppg:0,acc:0,eegProcessed:0,ppgProcessed:0,accProcessed:0});Ce(this,"isSaving",!1);Ce(this,"pendingSave",!1)}startSession(e,t,n,a={eegRaw:!0,ppgRaw:!0,accRaw:!0,eegProcessed:!0,ppgProcessed:!0,accProcessed:!0},i="system"){this.currentSession&&this.endSession();const s=this.generateSessionId(),o=wge(i),l={id:s,name:n||`Session ${o.toLocaleDateString()} ${o.toLocaleTimeString()}`,startTime:o,duration:0,deviceName:e,deviceId:t,samplingRate:250,dataCount:{eeg:0,ppg:0,acc:0,eegProcessed:0,ppgProcessed:0,accProcessed:0},saveOptions:a};return this.currentSession={metadata:l,eegData:[],ppgData:[],accData:[],systemLogs:[]},this.startAutoSave(),s}endSession(){if(!this.currentSession)return console.warn("종료할 활성 세션이 없습니다"),!1;const e=new Date;return this.currentSession.metadata.endTime=e,this.currentSession.metadata.duration=Math.floor((e.getTime()-this.currentSession.metadata.startTime.getTime())/1e3),this.saveCurrentSession(),this.stopAutoSave(),this.currentSession=null,!0}addEEGData(e){if(!(!this.currentSession||!this.currentSession.metadata.saveOptions.eegRaw)){if(this.currentSession.eegData.length+e.length>this.MAX_DATA_POINTS){const t=this.currentSession.eegData.length+e.length-this.MAX_DATA_POINTS;this.currentSession.eegData.splice(0,t)}this.currentSession.eegData.push(...e),this.currentSession.metadata.dataCount.eeg=this.currentSession.eegData.length}}addPPGData(e){if(!(!this.currentSession||!this.currentSession.metadata.saveOptions.ppgRaw)){if(this.currentSession.ppgData.length+e.length>this.MAX_DATA_POINTS){const t=this.currentSession.ppgData.length+e.length-this.MAX_DATA_POINTS;this.currentSession.ppgData.splice(0,t)}this.currentSession.ppgData.push(...e),this.currentSession.metadata.dataCount.ppg=this.currentSession.ppgData.length}}addACCData(e){if(!(!this.currentSession||!this.currentSession.metadata.saveOptions.accRaw)){if(this.currentSession.accData.length+e.length>this.MAX_DATA_POINTS){const t=this.currentSession.accData.length+e.length-this.MAX_DATA_POINTS;this.currentSession.accData.splice(0,t)}this.currentSession.accData.push(...e),this.currentSession.metadata.dataCount.acc=this.currentSession.accData.length}}addProcessedData(e){}addSystemLog(e){this.currentSession&&(this.currentSession.systemLogs.push(e),this.currentSession.systemLogs.length>1e4&&this.currentSession.systemLogs.shift())}getCurrentSession(){return this.currentSession}getAllSessions(){try{const e=localStorage.getItem(this.METADATA_KEY);return e?JSON.parse(e).map(n=>{var a,i,s,o,l,c;return{...n,startTime:n.startTime?new Date(n.startTime):new Date,endTime:n.endTime?new Date(n.endTime):void 0,duration:n.duration||0,deviceName:n.deviceName||"Unknown Device",deviceId:n.deviceId||"unknown",samplingRate:n.samplingRate||250,dataCount:{eeg:((a=n.dataCount)==null?void 0:a.eeg)||0,ppg:((i=n.dataCount)==null?void 0:i.ppg)||0,acc:((s=n.dataCount)==null?void 0:s.acc)||0,eegProcessed:((o=n.dataCount)==null?void 0:o.eegProcessed)||0,ppgProcessed:((l=n.dataCount)==null?void 0:l.ppgProcessed)||0,accProcessed:((c=n.dataCount)==null?void 0:c.accProcessed)||0},saveOptions:n.saveOptions||{eegRaw:!0,ppgRaw:!0,accRaw:!0,eegProcessed:!0,ppgProcessed:!0,accProcessed:!0}}}):[]}catch(e){return console.error("세션 메타데이터 로드 실패:",e),[]}}loadSession(e){try{const t=localStorage.getItem(this.STORAGE_PREFIX+e);if(!t)return console.warn(`세션을 찾을 수 없습니다: ${e}`),null;const n=JSON.parse(t);return n.metadata.startTime=n.metadata.startTime?new Date(n.metadata.startTime):new Date,n.metadata.endTime&&(n.metadata.endTime=new Date(n.metadata.endTime)),n.metadata.duration=n.metadata.duration||0,n.metadata.deviceName=n.metadata.deviceName||"Unknown Device",n.metadata.deviceId=n.metadata.deviceId||"unknown",n.metadata.samplingRate=n.metadata.samplingRate||250,n.metadata.dataCount?n.metadata.dataCount={eeg:n.metadata.dataCount.eeg||0,ppg:n.metadata.dataCount.ppg||0,acc:n.metadata.dataCount.acc||0,eegProcessed:n.metadata.dataCount.eegProcessed||0,ppgProcessed:n.metadata.dataCount.ppgProcessed||0,accProcessed:n.metadata.dataCount.accProcessed||0}:n.metadata.dataCount={eeg:0,ppg:0,acc:0,eegProcessed:0,ppgProcessed:0,accProcessed:0},n.metadata.saveOptions||(n.metadata.saveOptions={eegRaw:!0,ppgRaw:!0,accRaw:!0,eegProcessed:!0,ppgProcessed:!0,accProcessed:!0}),n?(n.eegData||(n.eegData=[]),n.ppgData||(n.ppgData=[]),n.accData||(n.accData=[]),n.systemLogs||(n.systemLogs=[]),n.metadata.dataCount={eeg:n.eegData.length,ppg:n.ppgData.length,acc:n.accData.length,eegProcessed:0,ppgProcessed:0,accProcessed:0},console.log(`세션 로드 완료: ${e}`,{dataCount:n.metadata.dataCount,actualLengths:{eeg:n.eegData.length,ppg:n.ppgData.length,acc:n.accData.length,eegProcessed:0,ppgProcessed:0,accProcessed:0}}),n):(console.error("세션 데이터가 존재하지 않습니다"),null)}catch(t){return console.error(`세션 로드 실패: ${e}`,t),null}}deleteSession(e){try{localStorage.removeItem(this.STORAGE_PREFIX+e);const n=this.getAllSessions().filter(a=>a.id!==e);return this.saveSessionsMetadata(n),!0}catch(t){return console.error(`세션 삭제 실패: ${e}`,t),!1}}exportToCSV(e,t="eeg"){const n=e==="current"?this.currentSession:this.loadSession(e);if(!n)return console.error("내보낼 세션을 찾을 수 없습니다"),null;try{let a="";switch(t){case"eeg":a=this.generateEEGCSV(n.eegData,n.metadata);break;case"ppg":a=this.generatePPGCSV(n.ppgData,n.metadata);break;case"acc":a=this.generateACCCSV(n.accData,n.metadata);break;case"system":a=this.generateSystemCSV(n.systemLogs,n.metadata);break;default:throw new Error(`지원되지 않는 데이터 타입: ${t}`)}return a}catch(a){return console.error("CSV 내보내기 실패:",a),null}}async downloadAllAsZip(e,t){console.log(`🔧 SessionManager.downloadAllAsZip 호출됨 - sessionId: ${e}`),console.log("🔧 Target directory handle:",t?`${t.name}`:"undefined (기본 다운로드)");let n=null;if(e==="current")n=this.currentSession;else if(n=this.loadSession(e),!n){console.log(`🔧 localStorage에서 세션을 찾을 수 없음, StorageStore에서 메타데이터 검색: ${e}`);try{const{useStorageStore:a}=await hs(async()=>{const{useStorageStore:o}=await Promise.resolve().then(()=>Ox);return{useStorageStore:o}},void 0),s=a.getState().sessions.find(o=>o.id===e);s&&(console.log(`🔧 StorageStore에서 세션 메타데이터 발견: ${s.name}`),n={metadata:{id:s.id,name:s.name,startTime:new Date(s.date+" "+s.time),endTime:void 0,duration:this.parseDurationString(s.duration),deviceName:s.deviceName||"Unknown Device",deviceId:s.deviceId||"unknown",samplingRate:250,dataCount:{eeg:0,ppg:0,acc:0,eegProcessed:0,ppgProcessed:0,accProcessed:0},saveOptions:{eegRaw:!0,ppgRaw:!0,accRaw:!0,eegProcessed:!0,ppgProcessed:!0,accProcessed:!0}},eegData:[],ppgData:[],accData:[],systemLogs:[]})}catch(a){console.error("❌ StorageStore에서 세션 정보 가져오기 실패:",a)}}if(!n)return console.error("❌ SessionManager.downloadAllAsZip - 세션을 찾을 수 없습니다"),!1;try{console.log(`🔧 SessionManager.downloadAllAsZip - 세션 발견: ${n.metadata.name}`);const a=new bge,i=this.generateSessionInfoText(n.metadata);a.file("session_info.txt",i);const s=JSON.stringify(n.metadata,null,2);a.file("metadata.json",s);const o=e!=="current"&&n.eegData.length===0&&n.ppgData.length===0&&n.accData.length===0;console.log(`🔧 세션 타입 확인: ${o?"StorageStore 세션":"localStorage 세션"}`);const l=[{type:"eeg",filename:"raw-data/eeg_raw_data.csv",hasData:o||n.eegData.length>0},{type:"ppg",filename:"raw-data/ppg_raw_data.csv",hasData:o||n.ppgData.length>0},{type:"acc",filename:"raw-data/acc_raw_data.csv",hasData:o||n.accData.length>0},{type:"system",filename:"system_logs.csv",hasData:o||n.systemLogs.length>0}];await this.addRawDataToZip(a,n.metadata,l,e),await this.addAnalyticsMetricsToZip(a,n.metadata);const c=await a.generateAsync({type:"blob"}),u=`${n.metadata.name}_complete_data_${Date.now()}.zip`;if(t){console.log(`🔧 사용자 선택 폴더에 저장: ${t.name}`);try{const d=await(await t.getFileHandle(u,{create:!0})).createWritable();await d.write(c),await d.close(),console.log(`✅ ZIP 파일이 선택한 폴더에 저장됨: ${u}`)}catch(h){console.error("❌ 선택한 폴더에 파일 저장 실패, 기본 다운로드로 대체:",h),this.downloadZipBlob(c,u)}}else console.log("🔧 기본 다운로드 폴더에 저장"),this.downloadZipBlob(c,u);return console.log("✅ ZIP 파일 다운로드 완료"),!0}catch(a){return console.error("ZIP 다운로드 실패:",a),!1}}downloadZipBlob(e,t){const n=document.createElement("a"),a=URL.createObjectURL(e);n.setAttribute("href",a),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}async addAnalyticsMetricsToZip(e,t){try{console.log("🔧 Analytics metrics 파일들을 ZIP에 추가 시작...");const{useStorageStore:n}=await hs(async()=>{const{useStorageStore:s}=await Promise.resolve().then(()=>Ox);return{useStorageStore:s}},void 0),i=n.getState().config.storageDirectory;if(!i){console.warn("⚠️ 저장소 디렉토리가 없어서 샘플 analytics metrics 파일 생성"),await this.addSampleAnalyticsMetrics(e,t);return}try{const s=t.startTime,o=s.getFullYear().toString(),l=(s.getMonth()+1).toString().padStart(2,"0"),g=await(await(await(await(await(await i.getDirectoryHandle("LinkBand-Data")).getDirectoryHandle("sessions")).getDirectoryHandle(o)).getDirectoryHandle(l)).getDirectoryHandle(t.id)).getDirectoryHandle("analysis-metrics");console.log("🔧 Analytics metrics 디렉토리 찾음:",g.name);const p="analysis-metrics/";let v=0;for await(const[m,y]of g.entries())if(y.kind==="file"&&m.endsWith(".csv"))try{const b=await(await y.getFile()).text();e.file(p+m,b),v++,console.log(`✅ Analytics metrics 파일 추가됨: ${m} (${b.length} bytes)`)}catch(x){console.warn(`⚠️ Analytics metrics 파일 읽기 실패: ${m}`,x)}v===0?(console.warn("⚠️ Analytics metrics 파일이 없어서 샘플 파일 생성"),await this.addSampleAnalyticsMetrics(e,t)):console.log(`✅ ${v}개의 실제 analytics metrics 파일이 ZIP에 추가됨`)}catch(s){console.warn("⚠️ Analytics metrics 디렉토리 접근 실패, 샘플 파일 생성:",s),await this.addSampleAnalyticsMetrics(e,t)}}catch(n){console.error("❌ Analytics metrics 파일 추가 실패:",n),await this.addSampleAnalyticsMetrics(e,t)}}async addRawDataToZip(e,t,n,a){try{if(console.log("🔧 Raw data 파일들을 ZIP에 추가 시작..."),a!=="current"){console.log("🔧 StorageStore 세션 - 실제 파일 시스템에서 CSV 파일 읽기 시도");const l=await this.addStorageStoreRawData(e,t,n,a);if(l>0){console.log(`✅ ${l}개의 실제 raw data 파일이 ZIP에 추가됨`);return}else console.warn("⚠️ 실제 파일을 찾을 수 없어서 빈 CSV 파일 생성")}console.log("🔧 Raw data 파일들을 ZIP에 추가 시작...");const{useStorageStore:i}=await hs(async()=>{const{useStorageStore:l}=await Promise.resolve().then(()=>Ox);return{useStorageStore:l}},void 0),o=i.getState().config.storageDirectory;if(!o){console.warn("⚠️ 저장소 디렉토리가 없어서 localStorage 데이터 사용"),await this.addLocalStorageRawData(e,n,a);return}try{const l=t.startTime,c=l.getFullYear().toString(),u=(l.getMonth()+1).toString().padStart(2,"0"),v=await(await(await(await(await(await o.getDirectoryHandle("LinkBand-Data")).getDirectoryHandle("sessions")).getDirectoryHandle(c)).getDirectoryHandle(u)).getDirectoryHandle(t.id)).getDirectoryHandle("raw-data");console.log("🔧 Raw data 디렉토리 찾음:",v.name);let m=0;for await(const[y,x]of v.entries())if(x.kind==="file"&&y.endsWith(".csv"))try{const S=await(await x.getFile()).text();e.file("raw-data/"+y,S),m++,console.log(`✅ Raw data 파일 추가됨: ${y} (${S.length} bytes)`)}catch(b){console.warn(`⚠️ Raw data 파일 읽기 실패: ${y}`,b)}m===0?(console.warn("⚠️ Raw data 파일이 없어서 localStorage 데이터 사용"),await this.addLocalStorageRawData(e,n,a)):console.log(`✅ ${m}개의 실제 raw data 파일이 ZIP에 추가됨`)}catch(l){console.warn("⚠️ Raw data 디렉토리 접근 실패, localStorage 데이터 사용:",l),await this.addLocalStorageRawData(e,n,a)}}catch(i){console.error("❌ Raw data 파일 추가 실패:",i),await this.addLocalStorageRawData(e,n,a)}}async addStorageStoreRawData(e,t,n,a){try{console.log("🔧 StorageStore Raw Data 읽기 시작...");const{useStorageStore:i}=await hs(async()=>{const{useStorageStore:l}=await Promise.resolve().then(()=>Ox);return{useStorageStore:l}},void 0),s=i.getState(),o=s.config.storageDirectory;return console.log("🔧 StorageStore 상태 확인:",{isInitialized:s.isInitialized,storageDirectoryExists:o?"YES":"NO",storageDirectoryName:(o==null?void 0:o.name)||"null",storageDirectoryPath:s.storageDirectoryPath}),o?await this.processStorageDirectory(e,o,t,n,a):(console.warn("⚠️ StorageStore에 저장소 디렉토리가 없음"),0)}catch(i){return console.error("❌ StorageStore Raw Data 읽기 실패:",i),0}}async processStorageDirectory(e,t,n,a,i){let s=0;try{console.log(`🔧 저장소 디렉토리에서 세션 파일 찾기 시작: ${i}`),console.log(`🔧 저장소 디렉토리 이름: ${t.name}`);const o=n.startTime,l=o.getFullYear().toString(),c=(o.getMonth()+1).toString().padStart(2,"0");console.log(`🔧 세션 날짜 정보: ${l}년 ${c}월`);try{let u=null;const h=[["LinkBand-Data","sessions",l,c,i],["sessions",l,c,i],[l,c,i],[i]];for(const A of h)try{let g=t;console.log(`🔧 경로 시도: ${A.join(" -> ")}`);for(const p of A)g=await g.getDirectoryHandle(p),console.log(`🔧 디렉토리 찾음: ${p}`);u=g,console.log(`🔧 세션 디렉토리 찾음: ${u.name}`);break}catch(g){const p=g instanceof Error?g.message:String(g);console.log(`🔧 경로 실패: ${A.join(" -> ")} - ${p}`);continue}if(!u)throw new Error(`세션 디렉토리를 찾을 수 없음: ${i}`);let d=null;try{d=await u.getDirectoryHandle("raw-data"),console.log("🔧 raw-data 디렉토리 찾음")}catch{console.log("🔧 raw-data 디렉토리가 없음, 세션 루트에서 CSV 파일 찾기 시도"),d=u}for(const A of a)if(A.hasData)try{let g="";switch(A.type){case"eeg":g="eeg_raw_data.csv";break;case"ppg":g="ppg_raw_data.csv";break;case"acc":g="acc_raw_data.csv";break;case"system":g="system_logs.csv";break}const m=await(await(await d.getFileHandle(g)).getFile()).text();m.trim()?(e.file(A.filename,m),s++,console.log(`✅ 실제 Raw data 파일 추가됨: ${g} (${m.length} bytes)`)):console.warn(`⚠️ ${g} 파일이 비어있음`)}catch(g){console.warn(`⚠️ ${A.type} raw data 파일 읽기 실패:`,g)}}catch(u){const h=u instanceof Error?u.message:String(u);console.warn("⚠️ 세션 디렉토리 접근 실패:",h)}}catch(o){console.error("❌ StorageStore raw data 파일 읽기 실패:",o)}return s}async addLocalStorageRawData(e,t,n){console.log(`🔧 localStorage 데이터 fallback 시작 - sessionId: ${n}`);const a=n!=="current";for(const i of t)if(i.hasData){const s=this.exportToCSV(n,i.type);if(s&&s.length>0)e.file(i.filename,s),console.log(`✅ ${i.filename} 파일 추가됨 (localStorage) (${s.length} bytes)`);else if(a){const o=this.generateEmptyCSV(i.type);e.file(i.filename,o),console.log(`⚠️ ${i.filename} 빈 파일 추가됨 (StorageStore 세션)`)}}}generateEmptyCSV(e){switch(e){case"eeg":return`timestamp,ch1,ch2,ch3,ch4,ch5,ch6,ch7,ch8,battery,temperature,accelerometer_x,accelerometer_y,accelerometer_z,gyroscope_x,gyroscope_y,gyroscope_z
`;case"ppg":return`timestamp,ppg_red,ppg_ir,ppg_green,ambient_light,temperature
`;case"acc":return`timestamp,x,y,z,magnitude
`;case"system":return`timestamp,event,details
`;default:return`timestamp,data
`}}async addSampleAnalyticsMetrics(e,t){const n="analysis-metrics/",i=`# LINK BAND EEG Analysis Metrics - Session: ${t.name}
`+`timestamp,total_power,emotional_balance,attention,cognitive_load,focus_index,relaxation_index,stress_index,hemispheric_balance,emotional_stability,attention_level,meditation_level,ma_total_power,ma_emotional_balance,ma_attention,ma_cognitive_load,ma_focus_index,ma_relaxation_index,ma_stress_index,ma_hemispheric_balance,ma_emotional_stability,ma_attention_level,ma_meditation_level
`,o=`# LINK BAND PPG Analysis Metrics - Session: ${t.name}
`+`timestamp,bpm,sdnn,rmssd,pnn50,lf_power,hf_power,lf_hf_ratio,stress_index,spo2,ma_bpm,ma_sdnn,ma_rmssd,ma_pnn50,ma_lf_power,ma_hf_power,ma_lf_hf_ratio,ma_stress_index,ma_spo2
`,c=`# LINK BAND ACC Analysis Metrics - Session: ${t.name}
`+`timestamp,activity_state,activity_level,stability,avg_movement,std_movement,max_movement,tilt_angle,balance,ma_activity_level,ma_stability,ma_avg_movement,ma_std_movement,ma_max_movement,ma_tilt_angle,ma_balance
`;e.file(n+"eeg-analysis-metrics.csv",i),e.file(n+"ppg-analysis-metrics.csv",o),e.file(n+"acc-analysis-metrics.csv",c),console.log("✅ 샘플 Analytics metrics 파일들이 ZIP에 추가됨")}downloadCSV(e,t="eeg"){const n=this.exportToCSV(e,t);if(!n)return!1;try{const a=e==="current"?this.currentSession:this.loadSession(e);if(!a)return!1;const i=new Blob([n],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");if(s.download!==void 0){const o=URL.createObjectURL(i);s.setAttribute("href",o),s.setAttribute("download",`${a.metadata.name}_${t}_${Date.now()}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}return!0}catch(a){return console.error("CSV 다운로드 실패:",a),!1}}getStorageInfo(){let e=0;const t=this.getAllSessions().length;for(let a in localStorage)(a.startsWith(this.STORAGE_PREFIX)||a===this.METADATA_KEY)&&(e+=localStorage[a].length);const n=5*1024*1024-e;return{used:e,available:n,sessions:t}}cleanupOldSessions(){const e=this.getAllSessions();if(e.length<=this.MAX_SESSIONS)return;e.sort((n,a)=>n.startTime.getTime()-a.startTime.getTime());const t=e.slice(0,e.length-this.MAX_SESSIONS);for(const n of t)this.deleteSession(n.id)}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateSessionInfoText(e){let t=`LINK BAND Session Information
`;return t+=`================================

`,t+=`Session Name: ${e.name}
`,t+=`Session ID: ${e.id}
`,t+=`Device: ${e.deviceName} (${e.deviceId})
`,t+=`Start Time: ${e.startTime.toISOString()}
`,e.endTime&&(t+=`End Time: ${e.endTime.toISOString()}
`),t+=`Duration: ${e.duration} seconds
`,t+=`Sampling Rate: ${e.samplingRate} Hz

`,t+=`Data Summary:
`,t+=`-------------
`,t+=`EEG Raw Data: ${e.dataCount.eeg.toLocaleString()} points
`,t+=`PPG Raw Data: ${e.dataCount.ppg.toLocaleString()} points
`,t+=`ACC Raw Data: ${e.dataCount.acc.toLocaleString()} points
`,t+=`EEG Processed Data: ${e.dataCount.eegProcessed.toLocaleString()} points
`,t+=`PPG Processed Data: ${e.dataCount.ppgProcessed.toLocaleString()} points
`,t+=`ACC Processed Data: ${e.dataCount.accProcessed.toLocaleString()} points

`,t+=`Save Options:
`,t+=`-------------
`,t+=`EEG Raw: ${e.saveOptions.eegRaw?"Enabled":"Disabled"}
`,t+=`PPG Raw: ${e.saveOptions.ppgRaw?"Enabled":"Disabled"}
`,t+=`ACC Raw: ${e.saveOptions.accRaw?"Enabled":"Disabled"}
`,t+=`EEG Processed: ${e.saveOptions.eegProcessed?"Enabled":"Disabled"}
`,t+=`PPG Processed: ${e.saveOptions.ppgProcessed?"Enabled":"Disabled"}
`,t+=`ACC Processed: ${e.saveOptions.accProcessed?"Enabled":"Disabled"}

`,e.notes&&(t+=`Notes:
`,t+=`------
`,t+=`${e.notes}

`),t+=`Generated: ${new Date().toISOString()}
`,t}startAutoSave(){this.stopAutoSave(),this.autoSaveInterval=setInterval(()=>{const e=Gy.startTimer("SessionManager.autoSave");try{this.currentSession&&!this.isSaving?this.saveCurrentSessionOptimized():this.currentSession&&this.isSaving&&(this.pendingSave=!0)}finally{e()}},this.AUTO_SAVE_INTERVAL)}stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null),this.pendingSave=!1}async saveCurrentSessionOptimized(){if(!this.currentSession||this.isSaving)return;const e=Gy.startTimer("SessionManager.saveOptimized");this.isSaving=!0;try{const t={eeg:this.currentSession.eegData.length,ppg:this.currentSession.ppgData.length,acc:this.currentSession.accData.length,eegProcessed:0,ppgProcessed:0,accProcessed:0};if(!Object.keys(t).some(a=>t[a]!==this.lastSavedDataCount[a]))return;await new Promise((a,i)=>{setTimeout(()=>{const s=Gy.startTimer("SessionManager.localStorage");try{this.saveCurrentSession(),this.lastSavedDataCount={...t},a()}catch(o){console.error("세션 저장 오류:",o),i(o)}finally{s()}},0)})}catch(t){console.error("최적화된 세션 저장 실패:",t)}finally{this.isSaving=!1,e(),this.pendingSave&&(this.pendingSave=!1,setTimeout(()=>this.saveCurrentSessionOptimized(),1e3))}}saveCurrentSession(){if(this.currentSession)try{const e=new Date;this.currentSession.metadata.duration=Math.floor((e.getTime()-this.currentSession.metadata.startTime.getTime())/1e3),this.currentSession.metadata.dataCount={eeg:this.currentSession.eegData.length,ppg:this.currentSession.ppgData.length,acc:this.currentSession.accData.length,eegProcessed:0,ppgProcessed:0,accProcessed:0};const t=this.currentSession,n=JSON.stringify(t).length;n>5*1024*1024&&(console.warn(`⚠️ 세션 데이터 크기가 큼: ${(n/1024/1024).toFixed(2)}MB`),this.trimSessionData(t));const a=JSON.stringify(t);localStorage.setItem(this.STORAGE_PREFIX+t.metadata.id,a);const i=this.getAllSessions(),s=i.findIndex(o=>o.id===t.metadata.id);s>=0?i[s]=t.metadata:i.push(t.metadata),this.saveSessionsMetadata(i),this.cleanupOldSessions()}catch(e){if(console.error("세션 저장 실패:",e),e instanceof Error&&e.name==="QuotaExceededError"){this.cleanupOldSessions();try{const t=JSON.stringify(this.currentSession);localStorage.setItem(this.STORAGE_PREFIX+this.currentSession.metadata.id,t)}catch(t){console.error("세션 저장 재시도 실패:",t)}}}}parseDurationString(e){if(!e)return 0;const t=[{unit:"시간",multiplier:3600},{unit:"분",multiplier:60},{unit:"초",multiplier:1}];let n=0;for(const{unit:a,multiplier:i}of t){const s=new RegExp(`(\\d+)${a}`),o=e.match(s);o&&(n+=parseInt(o[1])*i)}return n||0}trimSessionData(e){e.eegData.length>1e4&&(e.eegData=e.eegData.slice(-1e4)),e.ppgData.length>1e4&&(e.ppgData=e.ppgData.slice(-1e4)),e.accData.length>1e4&&(e.accData=e.accData.slice(-1e4))}saveSessionsMetadata(e){try{const t=JSON.stringify(e);localStorage.setItem(this.METADATA_KEY,t)}catch(t){console.error("세션 메타데이터 저장 실패:",t)}}generateEEGCSV(e,t){let n=`# LINK BAND EEG Data Export
`;n+=`# Session: ${t.name}
`,n+=`# Device: ${t.deviceName} (${t.deviceId})
`,n+=`# Start Time: ${t.startTime.toISOString()}
`,n+=`# Duration: ${t.duration}s
`,n+=`# Sampling Rate: ${t.samplingRate}Hz
`,n+=`# Data Points: ${e.length}
`,n+=`#
`,n+=`timestamp,fp1,fp2
`;for(const a of e)n+=`${a.timestamp},${a.fp1},${a.fp2}
`;return n}generatePPGCSV(e,t){let n=`# LINK BAND PPG Data Export
`;n+=`# Session: ${t.name}
`,n+=`timestamp,red,ir
`;for(const a of e)n+=`${a.timestamp},${a.red},${a.ir}
`;return n}generateACCCSV(e,t){let n=`# LINK BAND Accelerometer Data Export
`;n+=`# Session: ${t.name}
`,n+=`timestamp,x,y,z
`;for(const a of e)n+=`${a.timestamp},${a.x},${a.y},${a.z}
`;return n}generateProcessedEEGCSV(e,t){let n=`# LINK BAND Processed EEG Data Export
`;n+=`# Session: ${t.name}
`,n+=`timestamp,delta,theta,alpha,beta,gamma,signal_quality,brain_state,confidence
`;for(const a of e)n+=`${a.timestamp},${a.bandPowers.delta},${a.bandPowers.theta},${a.bandPowers.alpha},${a.bandPowers.beta},${a.bandPowers.gamma},${a.signalQuality.overall},${a.brainState.currentState},${a.brainState.confidence}
`;return n}generateProcessedPPGCSV(e,t){let n=`# LINK BAND Processed PPG Data Export
`;n+=`# Session: ${t.name}
`,n+=`timestamp,heart_rate,hrv,spo2,signal_quality
`;for(const a of e)n+=`${a.timestamp},${a.heartRate},${a.hrv},${a.spo2},${a.signalQuality}
`;return n}generateProcessedACCCSV(e,t){let n=`# LINK BAND Processed Accelerometer Data Export
`;n+=`# Session: ${t.name}
`,n+=`timestamp,magnitude,activity,steps,pitch,roll,yaw
`;for(const a of e)n+=`${a.timestamp},${a.magnitude},${a.activity},${a.steps},${a.orientation.pitch},${a.orientation.roll},${a.orientation.yaw}
`;return n}generateSystemCSV(e,t){let n=`# LINK BAND System Logs Export
`;n+=`# Session: ${t.name}
`,n+=`# Log Entries: ${e.length}
`,n+=`#
`;for(const a of e)n+=a+`
`;return n}getPerformanceReport(){return Gy.getAllMetrics()}logPerformanceReport(){Gy.logPerformanceReport()}}const Sge=new dk,_ge=Object.freeze(Object.defineProperty({__proto__:null,SessionManager:dk,sessionManager:Sge},Symbol.toStringTag,{value:"Module"}));class Cge{constructor(){Ce(this,"streamProcessor");Ce(this,"sessionManager");Ce(this,"streamingStorageService");Ce(this,"isInitialized",!1);Ce(this,"isConnected",!1);Ce(this,"isStreaming",!1);Ce(this,"isRecording",!1);Ce(this,"currentDeviceId",null);Ce(this,"monitoringInterval",null);Ce(this,"batteryUpdateInterval",null);Ce(this,"samplingRateUpdateInterval",null);Ce(this,"samplingRateHistory",{eeg:[],ppg:[],acc:[]});Ce(this,"storeRefs",{});this.streamProcessor=new RX,this.sessionManager=new dk,this.streamingStorageService=gb.getInstance()}async initialize(){if(!this.isInitialized)try{await this.loadStoreReferences(),await this.setupDataFlow(),this.isInitialized=!0}catch(e){throw console.error("❌ SystemControlService 초기화 실패:",e),e}}async loadStoreReferences(){try{const[{useRawDataStore:e},{useProcessedDataStore:t},{useDeviceStore:n},{useSensorDataStore:a},{useStorageStore:i}]=await Promise.all([hs(()=>Promise.resolve().then(()=>Yge),void 0),hs(()=>Promise.resolve().then(()=>vge),void 0),hs(()=>Promise.resolve().then(()=>UX),void 0),hs(()=>Promise.resolve().then(()=>jPe),void 0),hs(()=>Promise.resolve().then(()=>Ox),void 0)]);this.storeRefs={rawDataStore:e,processedDataStore:t,deviceStore:n,sensorDataStore:a,storageStore:i}}catch(e){throw console.error("Failed to load store references:",e),e}}async setupDataFlow(){if(!this.storeRefs.rawDataStore||!this.storeRefs.processedDataStore)throw new Error("Store references not loaded");const e={onEEGData:t=>{this.streamingStorageService?this.streamingStorageService.writeEEGData(t):console.error("🔧 StreamingStorageService가 없음")},onPPGData:t=>{this.streamingStorageService?this.streamingStorageService.writePPGData(t):console.error("🔧 StreamingStorageService가 없음")},onACCData:t=>{this.streamingStorageService?this.streamingStorageService.writeACCData(t):console.error("🔧 StreamingStorageService가 없음")}};this.streamProcessor.setCallbacks(e)}async scanDevices(){this.isInitialized||await this.initialize();try{return await jr.scan()}catch(e){throw console.error("Device scan failed:",e),e}}async connectDevice(e){var t;if(this.isInitialized||await this.initialize(),this.isConnected)throw new Error("다른 디바이스가 이미 연결되어 있습니다.");try{jr.setSystemCallbacks({onBatteryUpdate:(a,i)=>{this.storeRefs.deviceStore&&this.storeRefs.deviceStore.getState().updateBatteryInfo(a,i)}}),await jr.connect(e);const n={id:e,name:jr.getDeviceName()||"Unknown Device",batteryLevel:jr.getBatteryLevel()||0};this.storeRefs.deviceStore&&this.storeRefs.deviceStore.getState().startDeviceConnection(n),this.streamProcessor.setBluetoothService(jr),this.isConnected=!0,this.currentDeviceId=e,(t=this.storeRefs.processedDataStore)==null||t.getState().setConnectionState(!0),this.startConnectionMonitoring();try{await this.startStreaming()}catch(a){console.error("🔧 Auto-streaming failed:",a)}}catch(n){throw console.error("Device connection failed:",n),this.isConnected=!1,this.currentDeviceId=null,n}}async registerDevice(e,t){var n;try{(n=this.storeRefs.deviceStore)==null||n.getState().registerDevice(e,t)}catch(a){throw console.error("Device registration failed:",a),a}}async unregisterDevice(e){var t;try{(t=this.storeRefs.deviceStore)==null||t.getState().unregisterDevice(e)}catch(n){throw console.error("Device unregistration failed:",n),n}}getDeviceMonitoringInfo(){if(!this.isConnected||!this.currentDeviceId)return null;try{return{deviceId:jr.getDeviceId(),deviceName:jr.getDeviceName(),batteryLevel:jr.getBatteryLevel(),connectionDuration:jr.getConnectionDuration(),connectionStartTime:jr.getConnectionStartTime(),samplingRates:jr.getCurrentSamplingRates()}}catch(e){return console.error("Failed to get device monitoring info:",e),null}}getCurrentSamplingRates(){try{return jr.getCurrentSamplingRates()}catch(e){return console.error("Failed to get sampling rates:",e),null}}async getBatteryInfo(){var n;const e=(n=this.storeRefs.deviceStore)==null?void 0:n.getState();if(!e||!e.connectedDevice)return null;const t=e.connectedDevice.battery;return{level:t.level,decreaseRate:t.decreaseRate,timeRemaining:e.batteryTimeRemainingFormatted}}async disconnectDevice(){var e,t;if(this.isConnected)try{this.stopConnectionMonitoring(),this.isStreaming&&await this.stopStreaming(),this.isRecording&&await this.stopRecording(),this.streamProcessor.cleanup(),await jr.disconnect(),await new Promise(n=>setTimeout(n,1e3)),this.isConnected=!1,this.currentDeviceId=null,this.isStreaming=!1,this.isRecording=!1,(e=this.storeRefs.processedDataStore)==null||e.getState().setConnectionState(!1),(t=this.storeRefs.rawDataStore)==null||t.getState().reset(),this.samplingRateHistory={eeg:[],ppg:[],acc:[]}}catch(n){console.error("❌ SystemControlService 연결 해제 실패:",n),this.isConnected=!1,this.currentDeviceId=null,this.isStreaming=!1,this.isRecording=!1;try{jr.clearDeviceCache()}catch(a){console.error("캐시 정리 실패:",a)}throw n}}async startStreaming(){if(!this.isConnected)throw new Error("디바이스가 연결되지 않았습니다.");if(!this.isStreaming)try{if(!jr.isConnected())throw new Error("BluetoothService가 연결되지 않았습니다.");if(!this.streamProcessor)throw new Error("StreamProcessor가 초기화되지 않았습니다.");await this.streamProcessor.start(),this.isStreaming=!0}catch(e){throw console.error("Streaming start failed:",e),this.isStreaming=!1,e}}async stopStreaming(){if(this.isStreaming)try{await this.streamProcessor.stop(),this.isStreaming=!1}catch(e){throw console.error("Streaming stop failed:",e),e}}async startRecording(e,t){var n,a,i,s;if(!this.isConnected)throw new Error("디바이스가 연결되지 않았습니다.");if(this.isRecording)return((n=this.streamingStorageService.getCurrentSession())==null?void 0:n.id)||"current_session";try{if(this.isStreaming||await this.startStreaming(),!this.streamingStorageService)throw new Error("StreamingStorageService가 초기화되지 않았습니다.");if(!this.streamingStorageService.getStorageDirectoryHandle()){console.error("🔧 저장소 디렉토리가 설정되지 않음");const d=(a=this.storeRefs.storageStore)==null?void 0:a.getState();if(!((i=d==null?void 0:d.config)!=null&&i.storageDirectory))throw new Error("저장소 디렉토리가 설정되지 않았습니다. Data Center에서 저장소를 먼저 설정해주세요.");try{await this.streamingStorageService.setStorageDirectoryHandle(d.config.storageDirectory)}catch(A){throw console.error("❌ StreamingStorageService 저장소 디렉토리 설정 실패:",A),new Error("저장소 디렉토리 설정에 실패했습니다. Data Center에서 저장소를 다시 설정해주세요.")}}const l=await this.getConnectedDeviceInfo();if(!l)throw new Error("연결된 디바이스 정보를 찾을 수 없습니다.");const c=e||`session_${Date.now()}`,u=t||{sessionName:c,deviceName:(l==null?void 0:l.name)||"Unknown Device",deviceId:(l==null?void 0:l.id)||"unknown",saveFormats:["json","csv"],dataTypes:{eegRaw:!0,ppgRaw:!0,accRaw:!0,eegProcessed:!0,ppgProcessed:!0,accProcessed:!0},compression:!1,chunkSize:1024};console.log("🔧 스트리밍 설정:",u);const h=await this.streamingStorageService.startStreamingSession(u);return console.log("🔧 StreamingStorageService 세션 시작 완료:",h),this.storeRefs.storageStore&&(this.storeRefs.storageStore.getState().setCurrentSession(h),this.storeRefs.storageStore.getState().setIsRecording(!0)),(s=this.storeRefs.sensorDataStore)==null||s.getState().startRecording(h),this.isRecording=!0,h}catch(o){throw console.error("❌ Recording start failed:",o),this.isRecording=!1,o instanceof Error?new Error(`레코딩 시작 실패: ${o.message}`):new Error("레코딩 시작 중 알 수 없는 오류가 발생했습니다.")}}async stopRecording(){var e;if(this.isRecording)try{await this.streamingStorageService.endStreamingSession(),this.storeRefs.storageStore&&(this.storeRefs.storageStore.getState().setCurrentSession(null),this.storeRefs.storageStore.getState().setIsRecording(!1)),(e=this.storeRefs.sensorDataStore)==null||e.getState().stopRecording(),this.isRecording=!1}catch(t){throw console.error("Recording stop failed:",t),t}}getStatus(){return{isInitialized:this.isInitialized,isConnected:this.isConnected,isStreaming:this.isStreaming,isRecording:this.isRecording,currentDeviceId:this.currentDeviceId}}async getConnectedDeviceInfo(){var e,t;if(!this.isConnected||!this.currentDeviceId)return console.warn("🔧 연결된 디바이스가 없음:",{isConnected:this.isConnected,currentDeviceId:this.currentDeviceId}),null;try{const n=jr.getDeviceId(),a=jr.getDeviceName(),i=await jr.getBatteryLevel(),s=(e=this.storeRefs.deviceStore)==null?void 0:e.getState(),o=s==null?void 0:s.connectedDevice;return{id:n||this.currentDeviceId,name:a||(o==null?void 0:o.name)||"Unknown Device",batteryLevel:i||((t=o==null?void 0:o.battery)==null?void 0:t.level)||0}}catch(n){return console.error("🔧 디바이스 정보 조회 실패:",n),{id:this.currentDeviceId,name:"Unknown Device",batteryLevel:0}}}async getSessionList(){var e;return((e=this.storeRefs.sensorDataStore)==null?void 0:e.getState().getAllSessions())||[]}async loadSession(e){var t;return((t=this.storeRefs.sensorDataStore)==null?void 0:t.getState().getSessionData(e))||null}async deleteSession(e){}startConnectionMonitoring(){this.monitoringInterval||(this.monitoringInterval=setInterval(()=>{if(!jr.isConnected()){console.warn("Device connection lost detected"),this.handleConnectionLoss();return}try{const e=jr.getCurrentSamplingRates();this.storeRefs.deviceStore&&e&&this.storeRefs.deviceStore.getState().updateSamplingRates(e)}catch(e){console.error("Failed to update sampling rates:",e)}},1e3))}handleConnectionLoss(){this.isConnected=!1,this.currentDeviceId=null,this.stopConnectionMonitoring(),this.storeRefs.deviceStore&&this.storeRefs.deviceStore.getState().disconnectDevice()}stopConnectionMonitoring(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null),this.batteryUpdateInterval&&(clearInterval(this.batteryUpdateInterval),this.batteryUpdateInterval=null),this.samplingRateUpdateInterval&&(clearInterval(this.samplingRateUpdateInterval),this.samplingRateUpdateInterval=null)}async cleanup(){var e,t,n,a;try{this.stopConnectionMonitoring(),this.isRecording&&await this.stopRecording(),this.isStreaming&&await this.stopStreaming(),this.isConnected&&await this.disconnectDevice(),(e=this.storeRefs.rawDataStore)==null||e.getState().reset(),(t=this.storeRefs.processedDataStore)==null||t.getState().reset(),(n=this.storeRefs.deviceStore)==null||n.getState().reset(),(a=this.storeRefs.sensorDataStore)==null||a.getState().reset(),this.samplingRateHistory={eeg:[],ppg:[],acc:[]},this.isInitialized=!1,this.storeRefs={}}catch(i){throw console.error("SystemControlService cleanup failed:",i),i}}}const rs=new Cge,Bge=()=>{try{const r=localStorage.getItem("registeredDevices");return r?JSON.parse(r):[]}catch(r){return console.error("Failed to load registered devices:",r),[]}},Tf=r=>{try{localStorage.setItem("registeredDevices",JSON.stringify(r))}catch(e){console.error("Failed to save registered devices:",e)}},HU={registeredDevices:Bge(),availableDevices:[],connectedDevice:null,connectionState:{status:"disconnected"},isScanning:!1},Nge=r=>{if(r.length<2)return{decreaseRate:0,estimatedTime:0};const e=Date.now()-60*60*1e3,t=r.filter(c=>c.timestamp>=e);if(t.length<2)return{decreaseRate:0,estimatedTime:0};const n=t[0],a=t[t.length-1],i=(a.timestamp-n.timestamp)/(1e3*60*60),s=n.level-a.level;if(i<=0||s<=0)return{decreaseRate:0,estimatedTime:0};const o=s/i,l=a.level/o*60;return{decreaseRate:Math.round(o*100)/100,estimatedTime:Math.max(0,Math.round(l))}},Tge=r=>{const e=Math.floor(r/1e3),t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},PX=r=>{if(r<=0)return"0m";const e=Math.floor(r/60),t=Math.round(r%60);return e>0?`${e}h ${t}m`:`${t}m`},QU=()=>({autoRecord:!1,defaultFormat:"jsonl",sessionNameTemplate:"{deviceName}_{date}_{time}",maxSessionDuration:60,compressionEnabled:!0,saveLocation:"sessions",autoSaveInterval:5,memoryThreshold:50,minSignalQuality:70,pauseOnLowQuality:!1}),Dn=Fh((r,e)=>({...HU,registerDevice:(t,n)=>r(a=>{const i=a.registeredDevices.findIndex(l=>l.id===t.id),s={id:t.id,name:t.name||"Unknown Device",nickname:n,registeredAt:Date.now(),connectionCount:0,totalUsageDuration:0,storageSettings:QU(),connectionHistory:[]};let o;return i>=0?(o=[...a.registeredDevices],o[i]={...o[i],...s}):o=[...a.registeredDevices,s],Tf(o),{registeredDevices:o}}),unregisterDevice:t=>r(n=>{const a=n.registeredDevices.filter(i=>i.id!==t);return Tf(a),{registeredDevices:a}}),updateRegisteredDevice:(t,n)=>r(a=>{const i=a.registeredDevices.map(s=>s.id===t?{...s,...n}:s);return Tf(i),{registeredDevices:i}}),renameDevice:(t,n)=>r(a=>{const i=a.registeredDevices.map(s=>s.id===t?{...s,nickname:n.trim()||void 0}:s);return Tf(i),{registeredDevices:i}}),isDeviceRegistered:t=>e().registeredDevices.some(n=>n.id===t),updateDeviceStorageSettings:(t,n)=>r(a=>{const i=a.registeredDevices.map(s=>s.id===t?{...s,storageSettings:{...s.storageSettings,...n}}:s);return Tf(i),{registeredDevices:i}}),getDeviceStorageSettings:t=>{const n=e().registeredDevices.find(a=>a.id===t);return(n==null?void 0:n.storageSettings)||null},resetDeviceStorageSettings:t=>r(n=>{const a=n.registeredDevices.map(i=>i.id===t?{...i,storageSettings:QU()}:i);return Tf(a),{registeredDevices:a}}),setAvailableDevices:t=>r({availableDevices:t}),addDevice:t=>r(n=>({availableDevices:[...n.availableDevices.filter(a=>a.id!==t.id),t]})),updateDevice:(t,n)=>r(a=>({availableDevices:a.availableDevices.map(i=>i.id===t?{...i,...n}:i)})),setScanning:t=>r({isScanning:t}),setConnectionState:t=>r({connectionState:t}),startDeviceConnection:t=>{const n=Date.now(),a={device:t,connectionStartTime:n,connectionDuration:0,samplingRates:{eeg:250,ppg:50,acc:30,lastUpdated:n},battery:{level:t.batteryLevel||0,lastUpdated:n,history:[{timestamp:n,level:t.batteryLevel||0}],decreaseRate:0,estimatedTimeRemaining:0},signalQuality:{eeg:0,ppg:0,acc:0,overall:0},dataStats:{totalSamplesReceived:{eeg:0,ppg:0,acc:0},lastDataReceived:{eeg:0,ppg:0,acc:0}}};r({connectedDevice:a,connectionState:{status:"connected",device:t}});const i=e(),s=i.registeredDevices.find(o=>o.id===t.id);if(s){const o=[...s.connectionHistory,{startTime:n,duration:0}];o.length>10&&o.splice(0,o.length-10),i.updateRegisteredDevice(t.id,{lastConnectedAt:n,connectionCount:s.connectionCount+1,connectionHistory:o})}},updateConnectedDeviceStatus:t=>r(n=>n.connectedDevice?{connectedDevice:{...n.connectedDevice,...t,connectionDuration:Date.now()-n.connectedDevice.connectionStartTime}}:n),disconnectDevice:()=>r(t=>{const n=Date.now();let a={connectedDevice:null,connectionState:{status:"disconnected"}};if(t.connectedDevice){const i=t.connectedDevice.device.id,s=n-t.connectedDevice.connectionStartTime,o=t.registeredDevices.findIndex(l=>l.id===i);if(o>=0){const l=t.registeredDevices[o],c=[...l.connectionHistory];c.length>0&&!c[c.length-1].endTime&&(c[c.length-1]={...c[c.length-1],endTime:n,duration:s}),c.length>10&&c.splice(0,c.length-10);const u=[...t.registeredDevices];return u[o]={...l,totalUsageDuration:l.totalUsageDuration+s,connectionHistory:c},Tf(u),{...a,registeredDevices:u}}}return a}),updateSamplingRates:t=>r(n=>n.connectedDevice?{connectedDevice:{...n.connectedDevice,samplingRates:{...n.connectedDevice.samplingRates,...t,lastUpdated:Date.now()}}}:n),updateBatteryInfo:(t,n)=>r(a=>{if(!a.connectedDevice)return a;const i=Date.now(),s=[...a.connectedDevice.battery.history,{timestamp:i,level:t}],o=i-2*60*60*1e3,l=s.filter(h=>h.timestamp>=o),{decreaseRate:c,estimatedTime:u}=Nge(l);return{connectedDevice:{...a.connectedDevice,battery:{level:t,voltage:n,lastUpdated:i,history:l,decreaseRate:c,estimatedTimeRemaining:u}}}}),updateSignalQuality:t=>r(n=>{if(!n.connectedDevice)return n;const a={...n.connectedDevice.signalQuality,...t};return a.overall=Math.round((a.eeg+a.ppg+a.acc)/3),{connectedDevice:{...n.connectedDevice,signalQuality:a}}}),updateDataStats:t=>r(n=>{if(!n.connectedDevice)return n;const a=Date.now();return{connectedDevice:{...n.connectedDevice,dataStats:{totalSamplesReceived:{...n.connectedDevice.dataStats.totalSamplesReceived,...t.totalSamplesReceived},lastDataReceived:{...n.connectedDevice.dataStats.lastDataReceived,...t.lastDataReceived,...t.lastDataReceived&&Object.keys(t.lastDataReceived).reduce((i,s)=>(i[s]=a,i),{})}}}}}),getRegisteredDeviceByName:t=>e().registeredDevices.find(n=>n.name===t||n.nickname===t)||null,getConnectionHistory:()=>[],reset:()=>r(HU)})),kX=()=>Dn(r=>r.registeredDevices),Ak=()=>Dn(r=>r.availableDevices),Ige=()=>Dn(r=>r.connectionState),nN=()=>Dn(r=>r.connectedDevice),FX=()=>Dn(r=>r.isScanning),fk=()=>Dn(r=>r.connectionState.status==="connected"),jX=()=>Dn(r=>{var e;return((e=r.connectedDevice)==null?void 0:e.device)||null}),aN=()=>Dn(r=>{const e=r.connectedDevice,t=e?Tge(Date.now()-e.connectionStartTime):"00:00:00",n=e?PX(e.battery.estimatedTimeRemaining):"0m";return{connectionDuration:t,batteryLevel:(e==null?void 0:e.battery.level)||0,batteryDecreaseRate:(e==null?void 0:e.battery.decreaseRate)||0,batteryTimeRemaining:n,samplingRates:e==null?void 0:e.samplingRates,signalQuality:e==null?void 0:e.signalQuality,dataStats:e==null?void 0:e.dataStats}}),gk=()=>Dn(r=>{const e=r.connectedDevice,t=e?PX(e.battery.estimatedTimeRemaining):"0m";return{level:(e==null?void 0:e.battery.level)||0,decreaseRate:(e==null?void 0:e.battery.decreaseRate)||0,timeRemaining:t,voltage:e==null?void 0:e.battery.voltage}}),pk=()=>Dn(r=>{var e;return(e=r.connectedDevice)==null?void 0:e.samplingRates}),mk=()=>Dn(r=>({registerDevice:r.registerDevice,unregisterDevice:r.unregisterDevice,updateRegisteredDevice:r.updateRegisteredDevice,renameDevice:r.renameDevice,isDeviceRegistered:r.isDeviceRegistered,updateDeviceStorageSettings:r.updateDeviceStorageSettings,getDeviceStorageSettings:r.getDeviceStorageSettings,resetDeviceStorageSettings:r.resetDeviceStorageSettings,getRegisteredDeviceByName:r.getRegisteredDeviceByName})),OX=r=>Dn(e=>{var t;return((t=e.registeredDevices.find(n=>n.id===r))==null?void 0:t.storageSettings)||null}),UX=Object.freeze(Object.defineProperty({__proto__:null,useBatteryInfo:gk,useConnectedDevice:nN,useConnectionState:Ige,useCurrentDevice:jX,useDeviceActions:mk,useDeviceList:Ak,useDeviceMonitoring:aN,useDeviceStorageSettings:OX,useDeviceStore:Dn,useIsConnected:fk,useIsScanning:FX,useRegisteredDevices:kX,useSamplingRates:pk},Symbol.toStringTag,{value:"Module"})),il=Fh()(Ufe((r,e)=>{let t=null;return setTimeout(()=>{t||(t=setInterval(()=>{try{const a=rs.getStatus(),i=e();(i.isInitialized!==a.isInitialized||i.isConnected!==a.isConnected||i.isStreaming!==a.isStreaming||i.isRecording!==a.isRecording||i.currentDeviceId!==a.currentDeviceId)&&r({isInitialized:a.isInitialized,isConnected:a.isConnected,isStreaming:a.isStreaming,isRecording:a.isRecording,currentDeviceId:a.currentDeviceId,lastUpdateTime:Date.now(),updateCount:i.updateCount+1})}catch(a){console.error("Status monitoring error:",a)}},1e3))},1e3),{isInitialized:!1,systemStatus:"idle",systemError:null,isConnected:!1,currentDeviceId:null,deviceName:null,batteryLevel:0,isSensorContacted:!1,leadOffStatus:{fp1:!1,fp2:!1},isStreaming:!1,streamingError:null,isRecording:!1,currentSessionName:null,recordingError:null,isScanning:!1,scanError:null,availableDevices:[],lastUpdateTime:Date.now(),updateCount:0,initializeSystem:async()=>{r({systemStatus:"initializing",systemError:null});try{await rs.initialize(),r({isInitialized:!0,systemStatus:"ready",lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(a){const i=a instanceof Error?a.message:"Unknown error";throw r({systemStatus:"error",systemError:i,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),a}},shutdownSystem:async()=>{try{await rs.cleanup(),r({isInitialized:!1,systemStatus:"idle",isConnected:!1,isStreaming:!1,isRecording:!1,currentDeviceId:null,deviceName:null,systemError:null,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(a){const i=a instanceof Error?a.message:"Unknown error";throw r({systemError:i,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),a}},scanDevices:async()=>{r({isScanning:!0,scanError:null}),Dn.getState().setScanning(!0);try{const a=await rs.scanDevices();Dn.getState().setAvailableDevices(a),Dn.getState().setScanning(!1),r({availableDevices:a,isScanning:!1,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(a){const i=a instanceof Error?a.message:"Unknown error";throw Dn.getState().setScanning(!1),r({isScanning:!1,scanError:i,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),a}},registerDevice:async(a,i)=>{try{await rs.registerDevice(a,i),r({lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(s){const o=s instanceof Error?s.message:"Unknown error";throw r({systemError:o,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),s}},unregisterDevice:async a=>{try{await rs.unregisterDevice(a),r({lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(i){const s=i instanceof Error?i.message:"Unknown error";throw r({systemError:s,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),i}},connectDevice:async a=>{r({systemError:null});try{await rs.connectDevice(a);const i=rs.getConnectedDeviceInfo();Dn.getState().setConnectionState({status:"connected",device:i,lastConnected:new Date}),cr.getState().updateDeviceStatus({batteryLevel:(i==null?void 0:i.batteryLevel)||null}),r({isConnected:!0,currentDeviceId:a,deviceName:(i==null?void 0:i.name)||"Unknown Device",batteryLevel:(i==null?void 0:i.batteryLevel)||0,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(i){const s=i instanceof Error?i.message:"Unknown error";throw Dn.getState().setConnectionState({status:"error",error:s}),r({systemError:s,isConnected:!1,currentDeviceId:null,deviceName:null,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),i}},disconnectDevice:async()=>{try{await rs.disconnectDevice(),r({isConnected:!1,currentDeviceId:null,deviceName:null,batteryLevel:0,isStreaming:!1,isRecording:!1,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(a){const i=a instanceof Error?a.message:"Unknown error";throw r({systemError:i,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),a}},startStreaming:async()=>{r({streamingError:null});try{await rs.startStreaming(),r({isStreaming:!0,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(a){const i=a instanceof Error?a.message:"Unknown error";throw r({streamingError:i,isStreaming:!1,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),a}},stopStreaming:async()=>{try{await rs.stopStreaming(),r({isStreaming:!1,streamingError:null,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(a){const i=a instanceof Error?a.message:"Unknown error";throw r({streamingError:i,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),a}},startRecording:async a=>{r({recordingError:null});try{await rs.startRecording(a),r({isRecording:!0,currentSessionName:a||`Session_${Date.now()}`,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(i){const s=i instanceof Error?i.message:"Unknown error";throw r({recordingError:s,isRecording:!1,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),i}},stopRecording:async()=>{try{await rs.stopRecording(),r({isRecording:!1,currentSessionName:null,recordingError:null,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}catch(a){const i=a instanceof Error?a.message:"Unknown error";throw r({recordingError:i,lastUpdateTime:Date.now(),updateCount:e().updateCount+1}),a}},updateSystemStatus:()=>{const a=rs.getStatus();r({isInitialized:a.isInitialized,isConnected:a.isConnected,isStreaming:a.isStreaming,isRecording:a.isRecording,currentDeviceId:a.currentDeviceId,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})},setError:a=>{r({systemError:a,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})},clearError:()=>{r({systemError:null,streamingError:null,recordingError:null,scanError:null,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})},updateSensorContactStatus:(a,i)=>{r({isSensorContacted:!a&&!i,leadOffStatus:{fp1:a,fp2:i},lastUpdateTime:Date.now(),updateCount:e().updateCount+1})},setScanningState:a=>{r({isScanning:a,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})},setAvailableDevices:a=>{r({availableDevices:a,lastUpdateTime:Date.now(),updateCount:e().updateCount+1})}}})),W0=()=>il(r=>({isInitialized:r.isInitialized,systemStatus:r.systemStatus,systemError:r.systemError,lastUpdateTime:r.lastUpdateTime,updateCount:r.updateCount})),q0=()=>il(r=>({isConnected:r.isConnected,currentDeviceId:r.currentDeviceId,deviceName:r.deviceName,batteryLevel:r.batteryLevel})),ww=()=>il(r=>({isStreaming:r.isStreaming,streamingError:r.streamingError})),HX=()=>il(r=>({isRecording:r.isRecording,currentSessionName:r.currentSessionName,recordingError:r.recordingError})),vk=()=>il(r=>({initializeSystem:r.initializeSystem,shutdownSystem:r.shutdownSystem,scanDevices:r.scanDevices,connectDevice:r.connectDevice,disconnectDevice:r.disconnectDevice,registerDevice:r.registerDevice,unregisterDevice:r.unregisterDevice,startStreaming:r.startStreaming,stopStreaming:r.stopStreaming,startRecording:r.startRecording,stopRecording:r.stopRecording,setError:r.setError,clearError:r.clearError,updateSensorContactStatus:r.updateSensorContactStatus})),Ege=()=>il(r=>({isScanning:r.isScanning,scanError:r.scanError,availableDevices:r.availableDevices})),To=()=>{const r=il(t=>t.isSensorContacted),e=il(t=>t.leadOffStatus);return{isSensorContacted:r,leadOffStatus:e,isConnected:il(t=>t.isConnected),isStreaming:il(t=>t.isStreaming)}},Dge="LinkBandStorageDB",Mge=1,to="directoryHandles",z2="mainStorageDirectory";class Rge{constructor(){Ce(this,"db",null);Ce(this,"initPromise",null)}async initDB(){if(!this.db){if(this.initPromise){await this.initPromise;return}this.initPromise=new Promise((e,t)=>{const n=indexedDB.open(Dge,Mge);n.onerror=()=>{console.error("IndexedDB 열기 실패:",n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,e()},n.onupgradeneeded=a=>{const i=a.target.result;i.objectStoreNames.contains(to)&&i.deleteObjectStore(to),i.createObjectStore(to,{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}}),await this.initPromise}}async saveDirectoryHandle(e){try{if(await this.initDB(),!this.db)throw new Error("IndexedDB가 초기화되지 않았습니다");const n=this.db.transaction([to],"readwrite").objectStore(to),a={key:z2,handle:e,name:e.name,timestamp:Date.now()},i=n.put(a);await new Promise((s,o)=>{i.onsuccess=()=>{s()},i.onerror=()=>{console.error("디렉토리 핸들 저장 실패:",i.error),o(i.error)}})}catch(t){throw console.error("❌ 디렉토리 핸들 저장 실패:",t),t}}async restoreDirectoryHandle(){try{if(await this.initDB(),!this.db)return console.warn("IndexedDB가 초기화되지 않았습니다"),null;const n=this.db.transaction([to],"readonly").objectStore(to).get(z2),a=await new Promise((s,o)=>{n.onsuccess=()=>{s(n.result)},n.onerror=()=>{console.error("디렉토리 핸들 조회 실패:",n.error),o(n.error)}});if(!a)return null;const i=a.handle;try{return await i.entries().next(),i}catch(s){if(console.warn(`⚠️ 디렉토리 핸들 권한 확인 실패: ${a.name}`,s),s instanceof DOMException){if(s.name==="NotAllowedError")return null;if(s.name==="NotFoundError")return await this.removeDirectoryHandle(),null}return await this.removeDirectoryHandle(),null}}catch(e){return console.error("❌ 디렉토리 핸들 복원 실패:",e),null}}async getStoredDirectoryInfo(){try{if(await this.initDB(),!this.db)return null;const n=this.db.transaction([to],"readonly").objectStore(to).get(z2),a=await new Promise((i,s)=>{n.onsuccess=()=>{i(n.result)},n.onerror=()=>{s(n.error)}});return a?{name:a.name,timestamp:a.timestamp}:null}catch(e){return console.error("❌ 저장된 디렉토리 정보 조회 실패:",e),null}}async removeDirectoryHandle(){try{if(await this.initDB(),!this.db)return;const n=this.db.transaction([to],"readwrite").objectStore(to).delete(z2);await new Promise((a,i)=>{n.onsuccess=()=>{a()},n.onerror=()=>{console.error("디렉토리 핸들 삭제 실패:",n.error),i(n.error)}})}catch(e){throw console.error("❌ 디렉토리 핸들 삭제 실패:",e),e}}async clearAll(){try{if(await this.initDB(),!this.db)return;const n=this.db.transaction([to],"readwrite").objectStore(to).clear();await new Promise((a,i)=>{n.onsuccess=()=>{a()},n.onerror=()=>{console.error("디렉토리 핸들 정리 실패:",n.error),i(n.error)}})}catch(e){throw console.error("❌ 디렉토리 핸들 정리 실패:",e),e}}isSupported(){return"showDirectoryPicker"in window&&"indexedDB"in window}}const iN=new Rge,Lge=r=>iN.saveDirectoryHandle(r),Pge=()=>iN.restoreDirectoryHandle(),kge=()=>iN.getStoredDirectoryInfo(),zU=()=>iN.isSupported();function fl(){const r=navigator.userAgent.toLowerCase(),e=navigator.platform.toLowerCase();return r.includes("android")?"android":r.includes("win")||e.includes("win")?"windows":r.includes("mac")||e.includes("mac")?"macos":r.includes("linux")||e.includes("linux")?"linux":"unknown"}function QX(){return fl()==="windows"?"\\":"/"}function u3(...r){if(r.length===0)return"";const e=r.filter(n=>n&&n.trim()!=="").map(n=>zX(n.trim())),t=QX();return e.join(t)}function zX(r){return r?(QX(),fl()==="windows"?r.replace(/\//g,"\\"):r.replace(/\\/g,"/")):""}function Fge(){const r=fl(),e=GX();switch(r){case"windows":return{documents:`C:\\Users\\${e}\\Documents`,downloads:`C:\\Users\\${e}\\Downloads`,desktop:`C:\\Users\\${e}\\Desktop`,appData:`C:\\Users\\${e}\\AppData\\Roaming`,linkBandDefault:`C:\\Users\\${e}\\Documents\\LINK SDK`};case"macos":return{documents:`/Users/${e}/Documents`,downloads:`/Users/${e}/Downloads`,desktop:`/Users/${e}/Desktop`,appData:`/Users/${e}/Library/Application Support`,linkBandDefault:`/Users/${e}/Documents/LINK SDK`};case"linux":return{documents:`/home/${e}/Documents`,downloads:`/home/${e}/Downloads`,desktop:`/home/${e}/Desktop`,appData:`/home/${e}/.config`,linkBandDefault:`/home/${e}/Documents/LINK SDK`};case"android":return{documents:"/storage/emulated/0/Documents",downloads:"/storage/emulated/0/Download",desktop:"/storage/emulated/0/Desktop",appData:"/storage/emulated/0/Android/data",linkBandDefault:"/storage/emulated/0/Documents/LINK SDK"};default:return{documents:`${e}/Documents`,downloads:`${e}/Downloads`,desktop:`${e}/Desktop`,appData:`${e}/.config`,linkBandDefault:`${e}/Documents/LINK SDK`}}}function jge(){switch(fl()){case"windows":return["C:\\Users\\[사용자명]\\Documents\\LINK SDK","C:\\Users\\[사용자명]\\Downloads\\LINK SDK","C:\\Users\\[사용자명]\\Desktop\\LINK SDK","D:\\LINK SDK"];case"macos":return["/Users/[사용자명]/Documents/LINK SDK","/Users/[사용자명]/Downloads/LINK SDK","/Users/[사용자명]/Desktop/LINK SDK","/Volumes/ExternalDrive/LINK SDK"];case"linux":return["/home/[사용자명]/Documents/LINK SDK","/home/[사용자명]/Downloads/LINK SDK","/home/[사용자명]/Desktop/LINK SDK","/media/[사용자명]/storage/LINK SDK"];case"android":return["/storage/emulated/0/Documents/LINK SDK","/storage/emulated/0/Download/LINK SDK","/sdcard/Documents/LINK SDK","/sdcard/Download/LINK SDK"];default:return["[사용자 폴더]/Documents/LINK SDK","[사용자 폴더]/Downloads/LINK SDK"]}}function GX(){try{switch(fl()){case"windows":return"[사용자명]";case"macos":return"[사용자명]";case"linux":return"[사용자명]";case"android":return"android";default:return"[사용자명]"}}catch(r){console.warn("Could not detect username:",r)}return"user"}function Oge(r,e="downloads"){const n=Fge()[e];return u3(n,r)}function Uge(r){switch(fl()){case"windows":return/^[A-Za-z]:\\/.test(r)||/^\\\\/.test(r);case"macos":case"linux":return r.startsWith("/");default:return r.includes("/")||r.includes("\\")}}function Gu(r){if(!r)return"";const e=zX(r);return fl()==="windows"?e.replace(/\//g,"\\"):e}function G2(){switch(fl()){case"windows":return"Windows";case"macos":return"macOS";case"linux":return"Linux";case"android":return"Android";default:return"알 수 없음"}}const GU={theme:"system",language:"en",autoConnect:!0,notificationsEnabled:!0,dataRetentionDays:30,samplingRate:250,bufferSize:1024,exportFormat:"csv",streamingRecordingFormat:"csv",compressionEnabled:!0,debugMode:!1,timezone:"korea"},Od=Fh()(NX((r,e)=>({...GU,setTheme:t=>r({theme:t}),setLanguage:t=>r({language:t}),setAutoConnect:t=>r({autoConnect:t}),setNotificationsEnabled:t=>r({notificationsEnabled:t}),setDataRetentionDays:t=>r({dataRetentionDays:t}),setSamplingRate:t=>r({samplingRate:t}),setBufferSize:t=>r({bufferSize:t}),setExportFormat:t=>r({exportFormat:t}),setStreamingRecordingFormat:t=>r({streamingRecordingFormat:t}),setCompressionEnabled:t=>r({compressionEnabled:t}),setDebugMode:t=>r({debugMode:t}),setTimezone:t=>r({timezone:t}),resetToDefaults:()=>r(GU)}),{name:"linkband-settings",version:1})),VU={autoSave:!0,defaultFormats:["json","csv"],compression:!0,backupInterval:"weekly",maxSessionSize:500,cleanupOldSessions:!0,maxStorageSize:10},$U={available:"0 GB",used:"0 GB",sessions:0,totalSize:"0 MB"},KU={isWriting:!1,writeSpeed:0,savedData:0,currentFormats:[],queueLength:0,memoryUsage:0},WU={storageDirectory:null,storageDirectoryName:void 0,defaultFormat:"jsonl",autoSaveInterval:5e3,memoryThreshold:50*1024*1024,retentionDays:30,compressionEnabled:!0,backupEnabled:!1,defaultSaveOptions:{eegRaw:!0,ppgRaw:!0,accRaw:!0,eegAnalysisMetrics:!0,ppgAnalysisMetrics:!0,accAnalysisMetrics:!0}},VX="linkband_storage_config",Hge=r=>{switch(r){case"korea":return 9*60;case"utc":return 0;case"system":default:return new Date().getTimezoneOffset()*-1}},qU=(r,e)=>{const t=Hge(e),n=new Date().getTimezoneOffset()*-1,a=t-n;return new Date(r.getTime()+a*60*1e3)},HI=()=>{try{const r=localStorage.getItem(VX);if(r)return{...JSON.parse(r),storageDirectory:null}}catch(r){console.error("저장소 설정 로드 실패:",r)}return{}},Vy=r=>{try{const{storageDirectory:e,...t}=r,n={...t,storageDirectoryName:(e==null?void 0:e.name)||null};localStorage.setItem(VX,JSON.stringify(n))}catch(e){console.error("저장소 설정 저장 실패:",e)}},Xc=Fh((r,e)=>{const t=gb.getInstance(),n=HI(),a={...WU,...n};return{isInitialized:!1,storageDirectoryPath:n.storageDirectoryName||"",storageStats:$U,storageSettings:VU,storageStatus:KU,sessions:[],currentSession:null,selectedSessions:[],config:a,isStorageReady:!1,updateConfig:i=>{const s={...e().config,...i};r(o=>({config:s,isStorageReady:i.storageDirectory!==null?!0:o.isStorageReady})),Vy(s)},requestStorageDirectory:async()=>{try{if("showDirectoryPicker"in window){const i=await window.showDirectoryPicker({mode:"readwrite",startIn:"downloads"}),s={...e().config,storageDirectory:i};r(o=>({config:s,isStorageReady:!0,storageDirectoryPath:i.name||"Selected Directory"})),Vy(s)}}catch(i){console.error("Failed to select directory:",i)}},selectStorageDirectory:async()=>{var i;try{if(console.log("[REPOSITORY] 📁 저장소 디렉토리 선택 시작"),!("showDirectoryPicker"in window))throw new Error("File System Access API가 지원되지 않습니다.");const s=await window.showDirectoryPicker({mode:"readwrite",startIn:"downloads"});console.log(`[REPOSITORY] ✅ 디렉토리 선택됨: ${s.name}`);const o=fl(),l=GX(),c=Oge(s.name,"downloads");console.log(`[REPOSITORY] 🖥️ 감지된 OS: ${o}`),console.log(`[REPOSITORY] 👤 감지된 사용자: ${l}`),console.log(`[REPOSITORY] 📍 스마트 기본 경로: ${c}`);let u="";try{let A=[];switch(o){case"windows":A=[`C:\\Users\\${l}\\Documents\\${s.name}`,`C:\\Users\\${l}\\Downloads\\${s.name}`,`C:\\Users\\${l}\\Desktop\\${s.name}`];break;case"macos":A=[`/Users/${l}/Documents/${s.name}`,`/Users/${l}/Downloads/${s.name}`,`/Users/${l}/Desktop/${s.name}`];break;case"linux":A=[`/home/${l}/Documents/${s.name}`,`/home/${l}/Downloads/${s.name}`,`/home/${l}/Desktop/${s.name}`];break;default:A=[`${l}/Documents/${s.name}`,`${l}/Downloads/${s.name}`,`${l}/Desktop/${s.name}`]}const g=prompt(`선택한 폴더의 절대 경로를 입력해주세요.

폴더명: ${s.name}
운영체제: ${o.toUpperCase()}

일반적인 위치 예시:
`+A.map(p=>`• ${p}`).join(`
`)+`

정확한 절대 경로를 입력하면 파일 경로 복사 시 올바른 경로가 제공됩니다.

취소하면 추정된 경로를 사용합니다.`,c);if(g&&g.trim()){const p=g.trim();Uge(p)?(u=Gu(p),console.log(`[REPOSITORY] 📍 사용자 입력 절대 경로: ${u}`)):(console.warn(`[REPOSITORY] ⚠️ 잘못된 절대 경로 형식: ${p}, 기본값 사용`),u=c)}else u=c,console.log(`[REPOSITORY] 📍 스마트 기본 절대 경로 사용: ${u}`)}catch(A){console.warn("[REPOSITORY] ⚠️ 절대 경로 추정 실패, 기본값 사용:",A),u=c}try{zU()?(await Lge(s),console.log("[REPOSITORY] 💾 디렉토리 권한 영구 저장 완료")):console.log("[REPOSITORY] ⚠️ 브라우저가 영구 저장을 지원하지 않음")}catch(A){console.warn("[REPOSITORY] ⚠️ 디렉토리 영구 저장 실패 (기능은 정상 동작):",A)}console.log("[REPOSITORY] 🔄 상태 업데이트 전:",{isInitialized:e().isInitialized,storageDirectoryPath:e().storageDirectoryPath,configDirectory:e().config.storageDirectory?"SET":"NULL"}),r({config:{...e().config,storageDirectory:s,storageDirectoryName:s.name,storageDirectoryAbsolutePath:u},isInitialized:!0,isStorageReady:!0,storageDirectoryPath:u||s.name}),console.log("[REPOSITORY] ✅ 저장소 상태 업데이트 완료"),console.log("[REPOSITORY] 🔍 업데이트된 상태:",{isInitialized:e().isInitialized,storageDirectoryPath:e().storageDirectoryPath,configDirectory:e().config.storageDirectory?"SET":"NULL"});const h=e();console.log("[REPOSITORY] 🔍 상태 검증:",{isInitialized:h.isInitialized,configStorageDirectory:h.config.storageDirectory?"VERIFIED_SET":"VERIFIED_NULL",directoryName:((i=h.config.storageDirectory)==null?void 0:i.name)||"NO_NAME"});const d=e().config;return Vy(d),console.log("[REPOSITORY] 🔄 initializeStorage 호출 전 상태:",{isInitialized:e().isInitialized,configDirectory:e().config.storageDirectory?"SET":"NULL"}),await e().initializeStorage(),console.log("[REPOSITORY] 🔄 initializeStorage 호출 후 상태:",{isInitialized:e().isInitialized,configDirectory:e().config.storageDirectory?"SET":"NULL"}),await e().loadSessions(),await e().updateStorageStats(),console.log("[REPOSITORY] ✅ 저장소 선택 및 설정 완료"),!0}catch(s){return console.error("[REPOSITORY] ❌ 저장소 디렉토리 선택 실패:",s),s instanceof Error&&(s.name==="AbortError"?console.log("[REPOSITORY] 🚫 사용자가 디렉토리 선택을 취소함"):console.error("[REPOSITORY] ❌ 디렉토리 선택 오류:",s.message)),!1}},changeStorageDirectory:async()=>{try{if(!window.confirm(`⚠️ 저장소 변경 경고

저장소를 변경하면 다음과 같은 변경사항이 적용됩니다:

• 현재 세션이 종료됩니다
• 모든 저장소 관련 설정이 초기화됩니다
• 이전 저장소의 데이터는 그대로 유지됩니다
• 새로운 저장소에서 새로 시작됩니다

계속하시겠습니까?`))return!1;e().storageStatus.isWriting&&await e().stopRecording(),r({isInitialized:!1,storageDirectoryPath:"",storageStats:{...$U},storageStatus:{...KU},sessions:[],currentSession:null,selectedSessions:[],config:{...WU}});const s=await e().selectStorageDirectory();return s&&(console.log("✅ 저장소 변경 완료"),await e().loadSessions()),s}catch(i){return console.error("❌ 저장소 변경 실패:",i),!1}},initializeStorage:async()=>{try{console.log("[REPOSITORY] 🔧 저장소 초기화 시작");const i=localStorage.getItem("linkband_storage_settings");if(i){const l=JSON.parse(i);r({storageSettings:{...VU,...l}})}if(e().config.storageDirectory){console.log("[REPOSITORY] 🔧 저장소가 이미 설정됨, localStorage 덮어쓰기 건너뛰기"),console.log("[REPOSITORY] ✅ 저장소 초기화 완료 (기존 설정 유지)");return}const o=HI();if(o.storageDirectoryName){console.log("[REPOSITORY] 💾 저장된 저장소 설정 발견:",o.storageDirectoryName),console.log("[REPOSITORY] 🔄 브라우저 보안상 저장소를 다시 선택해주세요.");const{storageDirectory:l,...c}=o;let u=o.storageDirectoryAbsolutePath||o.storageDirectoryName||"";if(u.includes("/Users/user/Documents/")||u.includes("/Users/user/")){console.log(`[REPOSITORY] 🔧 잘못된 저장된 경로 감지: ${u}`);const h=`/Users/brian_chae/Downloads/${o.storageDirectoryName}`;console.log(`[REPOSITORY] 🔧 올바른 경로로 수정: ${h}`),u=h;const d={...c,storageDirectoryAbsolutePath:h};Vy(d)}r({storageDirectoryPath:u,config:{...e().config,...c}})}console.log("[REPOSITORY] ✅ 저장소 초기화 완료")}catch(i){throw console.error("[REPOSITORY] ❌ 저장소 초기화 실패:",i),i}},checkAndRestoreStorage:async()=>{try{if(console.log("[REPOSITORY] 🔄 저장소 복원 시도..."),!zU())return console.log("[REPOSITORY] ⚠️ 브라우저가 영구 저장을 지원하지 않음"),!1;console.log("[REPOSITORY] ✅ 영구 저장 시스템 지원됨");const i=await kge();if(!i)return console.log("[REPOSITORY] 📭 저장된 디렉토리 정보 없음"),!1;console.log(`[REPOSITORY] 📂 저장된 디렉토리 발견: ${i.name} (${new Date(i.timestamp).toLocaleString()})`),console.log("[REPOSITORY] 🔄 디렉토리 핸들 복원 시도...");const s=await Pge();if(!s)return console.log("[REPOSITORY] ❌ 디렉토리 핸들 복원 실패"),!1;console.log(`[REPOSITORY] ✅ 디렉토리 핸들 복원 성공: ${s.name}`),console.log("[REPOSITORY] 🔄 저장소 상태 업데이트 중...");const o=HI();let l=o.storageDirectoryAbsolutePath||s.name;if(l.includes("/Users/user/Documents/")||l.includes("/Users/user/")){console.log(`[REPOSITORY] 🔧 잘못된 절대 경로 감지: ${l}`);const c=`/Users/brian_chae/Downloads/${s.name}`;console.log(`[REPOSITORY] 🔧 올바른 절대 경로로 수정: ${c}`),l=c;const u={...o,storageDirectoryAbsolutePath:c};Vy(u)}return r({config:{...e().config,storageDirectory:s,storageDirectoryName:s.name,storageDirectoryAbsolutePath:l},isInitialized:!0,isStorageReady:!0,storageDirectoryPath:l}),console.log("[REPOSITORY] ✅ 저장소 상태 업데이트 완료"),console.log("[REPOSITORY] 🔍 업데이트된 상태:",{isInitialized:e().isInitialized,storageDirectoryPath:e().storageDirectoryPath,configDirectory:e().config.storageDirectory?"SET":"NULL"}),console.log("[REPOSITORY] 🔄 세션 목록 로드 시작..."),await e().loadSessions(),console.log("[REPOSITORY] 🔄 저장소 통계 업데이트 시작..."),await e().updateStorageStats(),console.log("[REPOSITORY] ✅ 저장소 자동 복원 완료"),!0}catch(i){return console.error("[REPOSITORY] ❌ 저장소 복원 실패:",i),!1}},startRecording:async i=>{var s;try{if(console.log("🔧 StorageStore.startRecording 시작"),console.log("🔧 현재 저장소 상태:",{isInitialized:e().isInitialized,configStorageDirectory:e().config.storageDirectory?"SET":"NULL",storageDirectoryName:((s=e().config.storageDirectory)==null?void 0:s.name)||"null"}),console.log("🔧 전달받은 config:",i),!e().config.storageDirectory)throw new Error("저장소 디렉토리가 설정되지 않았습니다. Data Center에서 저장소를 먼저 설정해주세요.");console.log("🔧 SystemControlService.startRecording 호출, config 전달");const o=await rs.startRecording(i.sessionName,i),l=t.getCurrentSession();return r({currentSession:l,storageStatus:{...e().storageStatus,isWriting:!0,currentFormats:i.saveFormats}}),e().startStatusMonitoring(),console.log("✅ 레코딩 시작 완료:",o),o}catch(o){throw console.error("❌ 레코딩 시작 실패:",o),o}},stopRecording:async()=>{try{await t.endStreamingSession(),r({currentSession:null,storageStatus:{...e().storageStatus,isWriting:!1,writeSpeed:0,currentFormats:[],savedData:0,memoryUsage:0}}),await e().loadSessions(),await e().updateStorageStats(),console.log("✅ 레코딩 중지")}catch(i){throw console.error("❌ 레코딩 중지 실패:",i),i}},pauseRecording:async()=>{console.log("⏸️ 레코딩 일시정지 (추후 구현)")},resumeRecording:async()=>{console.log("▶️ 레코딩 재개 (추후 구현)")},loadSessions:async()=>{if(console.log("[REPOSITORY] 🔧 loadSessions 시작"),console.log("[REPOSITORY] 🔧 현재 저장소 상태:",{isInitialized:e().isInitialized,storageDirectoryPath:e().storageDirectoryPath,configStorageDirectory:e().config.storageDirectory?"SET":"NULL"}),!e().isInitialized||!e().config.storageDirectory){console.log("[REPOSITORY] 🔧 저장소가 초기화되지 않음"),console.log("[REPOSITORY] 🔧 - isInitialized:",e().isInitialized),console.log("[REPOSITORY] 🔧 - config.storageDirectory:",e().config.storageDirectory?"SET":"NULL");return}try{console.log("[REPOSITORY] 🔧 세션 로드 시작...");const i=Date.now(),s=await e().loadSessionsFromStorage();console.log(`[REPOSITORY] 🔧 로드된 세션 수: ${s.length}`),console.log("[REPOSITORY] 🔧 로드된 세션들:",s.map(l=>({id:l.id,name:l.name,path:l.id})));const o=Date.now()-i;console.log(`[REPOSITORY] 🔧 세션 로드 소요 시간: ${o}ms`),r({sessions:s}),await e().updateStorageStats(),console.log("[REPOSITORY] ✅ 세션 로드 완료")}catch(i){console.error("[REPOSITORY] ❌ 세션 로드 실패:",i)}},loadSessionsFromStorage:async()=>{const i=e().config.storageDirectory;if(!i)return console.log("[REPOSITORY] 🔧 저장소 디렉토리가 없음"),[];console.log("[REPOSITORY] 🔧 저장소에서 세션 로드 시작");try{try{console.log("[REPOSITORY] 🔧 표준 구조 시도: LinkBand-Data/sessions 디렉토리 접근");const o=await i.getDirectoryHandle("LinkBand-Data");console.log("[REPOSITORY] 🔧 LinkBand-Data 디렉토리 접근 성공");const l=await o.getDirectoryHandle("sessions");console.log("[REPOSITORY] 🔧 sessions 디렉토리 접근 성공");const c=await e().loadFromStandardStructure(l);if(console.log(`[REPOSITORY] 🔧 표준 구조에서 ${c.length}개 세션 발견`),c.length>0)return console.log(`[REPOSITORY] 🔧 표준 구조 성공: ${c.length}개 세션 반환`),c;console.log("[REPOSITORY] 🔧 표준 구조에서 세션을 찾지 못함, 다음 구조 시도")}catch(o){console.log("[REPOSITORY] 🔧 표준 구조 접근 실패:",o)}try{console.log("[REPOSITORY] 🔧 직접 구조 시도: 루트에서 session- 접두사 검색");const o=await e().loadFromDirectStructure(i);if(o.length>0)return console.log(`[REPOSITORY] 🔧 직접 구조에서 ${o.length}개 세션 발견`),o}catch(o){console.log("[REPOSITORY] 🔧 직접 구조 접근 실패:",o)}try{console.log("[REPOSITORY] 🔧 루트 세션 구조 시도: 루트/sessions");const o=await i.getDirectoryHandle("sessions"),l=await e().loadFromStandardStructure(o);if(l.length>0)return console.log(`[REPOSITORY] 🔧 루트 세션 구조에서 ${l.length}개 세션 발견`),l}catch(o){console.log("[REPOSITORY] 🔧 루트 세션 구조 접근 실패:",o)}console.log("[REPOSITORY] 🔧 최후 수단: 모든 디렉토리를 세션으로 간주");const s=await e().loadFromFallbackStructure(i);return console.log(`[REPOSITORY] 🔧 최후 수단에서 ${s.length}개 세션 발견`),s}catch(s){return console.error("[REPOSITORY] 🔧 저장소 세션 로드 실패:",s),[]}},loadFromStandardStructure:async i=>{const s=[];try{const o=[];for await(const[l,c]of i.entries())c.kind==="directory"&&o.push({name:l,handle:c});console.log("🔧 발견된 년도 디렉토리:",o.map(l=>l.name));for(const l of o){console.log(`🔧 년도 ${l.name} 처리 중`);try{const c=[];for await(const[u,h]of l.handle.entries())h.kind==="directory"&&c.push({name:u,handle:h});console.log(`🔧 년도 ${l.name}의 월 디렉토리:`,c.map(u=>u.name));for(const u of c){console.log(`🔧 월 ${u.name} 처리 중`);try{const h=[];for await(const[d,A]of u.handle.entries())A.kind==="directory"&&h.push({name:d,handle:A});console.log(`🔧 월 ${u.name}의 세션 디렉토리:`,h.map(d=>d.name));for(const d of h){const A=await e().loadSessionMetadata(d.name,d.handle);A&&s.push(A)}}catch(h){console.error(`🔧 월 ${u.name} 처리 실패:`,h)}}}catch(c){console.error(`🔧 년도 ${l.name} 처리 실패:`,c)}}}catch(o){throw console.error("🔧 표준 구조 로드 실패:",o),o}return s},loadFromDirectStructure:async i=>{const s=[];try{console.log("🔧 직접 구조에서 세션 검색 시작");for await(const[o,l]of i.entries())if(l.kind==="directory"&&o.startsWith("session-")){console.log(`🔧 세션 디렉토리 발견: ${o}`);const c=await e().loadSessionMetadata(o,l);c&&s.push(c)}}catch(o){throw console.error("🔧 직접 구조 로드 실패:",o),o}return s},loadFromFallbackStructure:async i=>{const s=[];try{console.log("🔧 최후 수단: 모든 디렉토리를 세션으로 간주");const o=["LinkBand-Data","sessions",".git","node_modules","dist","build"];for await(const[l,c]of i.entries())if(c.kind==="directory"){if(console.log(`🔧 디렉토리 발견: ${l}`),o.includes(l)){console.log(`🔧 시스템 디렉토리 건너뛰기: ${l}`);continue}const u=await e().loadSessionMetadata(l,c);u&&s.push(u)}}catch(o){throw console.error("🔧 최후 수단 로드 실패:",o),o}return s},loadSessionMetadata:async(i,s)=>{try{console.log(`🔧 세션 ${i} 메타데이터 로드 시도`);let o=null,l="",c;try{if(l=await(await(await s.getFileHandle("metadata.json")).getFile()).text(),console.log(`[REPOSITORY] 🔧 세션 ${i} 메타데이터 원본 텍스트:`,l),!l.trim())throw console.log(`[REPOSITORY] 🔧 세션 ${i} 메타데이터 파일이 비어있음`),new Error("Empty metadata file");let d=l.trim();d.startsWith("[")&&!d.endsWith("]")&&(console.log(`[REPOSITORY] 🔧 세션 ${i} 불완전한 JSON 배열 감지, 수정 시도`),d=d.replace(/,\s*$/,"")+`
]`,console.log("[REPOSITORY] 🔧 수정된 메타데이터:",d)),o=JSON.parse(d),console.log(`[REPOSITORY] 🔧 세션 ${i} 메타데이터 파싱 완료:`,o),console.log(`[REPOSITORY] 🔧 메타데이터 타입: ${Array.isArray(o)?"Array":"Object"}`);const A=Array.isArray(o)?o[0]:o;if(console.log(`[REPOSITORY] 🔧 세션 ${i} 실제 메타데이터:`,A),!A||typeof A!="object")throw console.error(`[REPOSITORY] 🔧 세션 ${i} 메타데이터 구조 오류:`,A),new Error("Invalid metadata structure");console.log(`[REPOSITORY] 🔧 deviceName: ${A.deviceName}, deviceId: ${A.deviceId}`),console.log(`[REPOSITORY] 🔧 duration: ${A.duration} (타입: ${typeof A.duration})`),console.log(`[REPOSITORY] 🔧 startTime: ${A.startTime}, endTime: ${A.endTime}`),console.log(`[REPOSITORY] 🔧 estimatedSize: ${A.estimatedSize} (타입: ${typeof A.estimatedSize})`),console.log(`[REPOSITORY] 🔧 saveFormats: ${JSON.stringify(A.saveFormats)}`);const g=A.deviceName&&A.deviceName!=="Unknown Device",p=A.deviceId&&A.deviceId!=="LB001",v=A.duration&&typeof A.duration=="number"&&A.duration>0,m=A.estimatedSize&&typeof A.estimatedSize=="number"&&A.estimatedSize>0;console.log(`[REPOSITORY] ${g?"✅":"❌"} 디바이스 이름: ${A.deviceName}`),console.log(`[REPOSITORY] ${p?"✅":"❌"} 디바이스 ID: ${A.deviceId}`),console.log(`[REPOSITORY] ${v?"✅":"❌"} 지속 시간: ${A.duration}`),console.log(`[REPOSITORY] ${m?"✅":"❌"} 파일 크기: ${A.estimatedSize}`);let y=0;if(A.dataQuality){const{eegQuality:x,ppgQuality:b,accQuality:S}=A.dataQuality;y=Math.round((x+b+S)/3),console.log(`[REPOSITORY] 🔧 실제 데이터 품질 사용: EEG=${x}, PPG=${b}, ACC=${S}, 평균=${y}`)}else{const x=A.duration||0,b=A.estimatedSize||0,S=A.deviceName||"";let _=75;x>=30?_+=10:x>=10?_+=5:x<5&&(_-=15),b>=1024*1024?_+=5:b>=100*1024?_+=2:b<10*1024&&(_-=10),S!=="Unknown Device"&&S.includes("LXB")&&(_+=5),y=Math.max(0,Math.min(100,_)),console.log(`[REPOSITORY] 🔧 추정 데이터 품질 계산: 기본=75, 지속시간=${x}s, 크기=${b}bytes, 디바이스=${S}, 최종=${y}`)}c={id:i,name:i,date:e().parseSessionDate(i),time:e().parseSessionTime(i),duration:e().formatDuration(A.duration||0),formats:A.saveFormats||["unknown"],totalSize:e().formatFileSize(A.estimatedSize||0),avgFileSize:e().formatFileSize((A.estimatedSize||0)/Math.max(1,A.totalSamples||1)),quality:y,deviceName:A.deviceName||"Unknown Device",deviceId:A.deviceId||"unknown",size:e().formatFileSize(A.estimatedSize||0),notes:A.notes||"",handle:s}}catch(u){console.log(`[REPOSITORY] 🔧 세션 ${i} 메타데이터 파싱 실패:`,u),console.log("[REPOSITORY] 🔧 원본 메타데이터 텍스트:",l),console.log(`[REPOSITORY] 🔧 세션 ${i} 기본 정보로 복원 시도`);let h=0;try{h=await e().calculateDirectorySize(s)}catch(g){console.warn(`[REPOSITORY] 🔧 세션 ${i} 크기 계산 실패:`,g)}const d=await e().detectFormats(s);let A=50;h>=1024*1024?A=70:h>=100*1024?A=60:h<10*1024&&(A=30),d.length>=2&&(A+=10),i.match(/\d{4}-\d{2}-\d{2}/)&&(A+=10),A=Math.max(0,Math.min(100,A)),console.log(`[REPOSITORY] 🔧 메타데이터 없음 - 추정 품질: 크기=${h}bytes, 형식=${d.length}개, 최종=${A}`),c={id:i,name:i,date:e().parseSessionDate(i),time:e().parseSessionTime(i),duration:"알 수 없음",formats:d,totalSize:e().formatFileSize(h),avgFileSize:e().formatFileSize(h/Math.max(1,d.length)),quality:A,deviceName:"Unknown Device",deviceId:"unknown",size:e().formatFileSize(h),notes:"메타데이터 파일 손상 또는 누락",handle:s},console.log(`[REPOSITORY] 🔧 세션 ${i} 기본 정보로 복원 완료:`,c)}return c}catch(o){console.warn(`🔧 세션 ${i} 메타데이터 로드 실패:`,o);try{const l=await e().detectFormats(s),c=await e().calculateDirectorySize(s);let u=40;return c>=500*1024?u=55:c<50*1024&&(u=25),l.length>0&&(u+=5),console.log(`[REPOSITORY] 🔧 완전 실패 케이스 - 추정 품질: 크기=${c}bytes, 형식=${l.length}개, 최종=${u}`),{id:i,name:i,date:e().parseSessionDate(i),time:e().parseSessionTime(i),duration:"알 수 없음",formats:l,totalSize:e().formatFileSize(c),avgFileSize:e().formatFileSize(c/Math.max(1,l.length)),quality:u,deviceName:"Unknown Device",deviceId:"unknown",size:e().formatFileSize(c),notes:"세션 정보 복원 실패",handle:s}}catch(l){return console.error(`🔧 세션 ${i} 완전 복원 실패:`,l),null}}},parseSessionDate:i=>{var o;const s=i.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})-(\d{2})/);if(s)try{const l=(((o=Od.getState)==null?void 0:o.call(Od))||{timezone:"korea"}).timezone,c=new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}.000Z`);return qU(c,l).toISOString().split("T")[0]}catch(l){return console.warn("날짜 파싱 중 오류:",l),`${s[1]}-${s[2]}-${s[3]}`}return new Date().toISOString().split("T")[0]},parseSessionTime:i=>{var o;const s=i.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2})-(\d{2})-(\d{2})/);if(s)try{const l=(((o=Od.getState)==null?void 0:o.call(Od))||{timezone:"korea"}).timezone,c=new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}.000Z`),u=qU(c,l),h=u.getHours().toString().padStart(2,"0"),d=u.getMinutes().toString().padStart(2,"0"),A=u.getSeconds().toString().padStart(2,"0");return`${h}:${d}:${A}`}catch(l){return console.warn("시간 파싱 중 오류:",l),`${s[4]}:${s[5]}:${s[6]}`}return"00:00:00"},formatDuration:i=>{if(i<=0)return"0초";const s=Math.floor(i/3600),o=Math.floor(i%3600/60),l=Math.floor(i%60);return s>0?`${s}:${o.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`:o>0?`${o}:${l.toString().padStart(2,"0")}`:`${l}초`},detectFormats:async i=>{var o;const s=[];try{for await(const[l,c]of i.entries())if(c.kind==="file"){const u=(o=l.split(".").pop())==null?void 0:o.toLowerCase();u&&!s.includes(u)&&s.push(u)}}catch(l){console.warn("파일 형식 감지 실패:",l)}return s.length>0?s:["unknown"]},deleteSession:async i=>{try{console.log(`[REPOSITORY] 🗑️ 세션 삭제 시작: ${i}`);const s=e().sessions.find(d=>d.id===i);if(!s)throw new Error(`세션을 찾을 수 없습니다: ${i}`);if(!window.confirm(`⚠️ 세션 삭제 확인

세션명: ${s.name}
크기: ${s.size}
생성일: ${s.date} ${s.time}

이 세션을 완전히 삭제하시겠습니까?
이 작업은 되돌릴 수 없습니다.`)){console.log(`[REPOSITORY] 🗑️ 세션 삭제 취소: ${i}`);return}console.log(`[REPOSITORY] 🗑️ 세션 디렉토리 삭제 시작: ${i}`);let l=!1;const c=e().config.storageDirectory;if(c&&s.handle)try{console.log("[REPOSITORY] 🗑️ 방법 1: 부모 디렉토리에서 직접 삭제 시도");const d=[["LinkBand-Data","sessions"],["sessions"],[]];let A=!1;for(const g of d)try{let p=c;for(const v of g)p=await p.getDirectoryHandle(v);if(g.includes("sessions")){const v=e().parseSessionDate(i),m=v.split("-")[0],y=v.split("-")[1];try{p=await(await p.getDirectoryHandle(m)).getDirectoryHandle(y)}catch{}}console.log(`[REPOSITORY] 🗑️ 부모 디렉토리에서 세션 삭제 시도: ${i}`),await p.removeEntry(i,{recursive:!0}),console.log(`[REPOSITORY] ✅ 부모 디렉토리에서 세션 삭제 성공: ${i}`),l=!0,A=!0;break}catch(p){console.log(`[REPOSITORY] 🗑️ 경로 ${g.join("/")}에서 삭제 실패:`,p);continue}if(!A)throw new Error("부모 디렉토리를 찾을 수 없습니다")}catch(d){console.warn("[REPOSITORY] ⚠️ 방법 1 실패:",d),console.log("[REPOSITORY] 🗑️ 방법 2: 내용 삭제 후 빈 디렉토리 삭제");try{const A=[];for await(const[g,p]of s.handle.entries())A.push({name:g,kind:p.kind});console.log(`[REPOSITORY] 🗑️ 삭제할 항목 ${A.length}개 발견`);for(const g of A)try{g.kind==="directory"?await s.handle.removeEntry(g.name,{recursive:!0}):await s.handle.removeEntry(g.name),console.log(`[REPOSITORY] 🗑️ 항목 삭제 성공: ${g.name} (${g.kind})`)}catch(p){console.error(`[REPOSITORY] ❌ 항목 삭제 실패: ${g.name}`,p)}console.log(`[REPOSITORY] ✅ 세션 내용 삭제 완료: ${i}`),l=!0}catch(A){throw console.error("[REPOSITORY] ❌ 세션 내용 삭제 실패:",A),new Error(`세션 파일 삭제 중 오류가 발생했습니다: ${A instanceof Error?A.message:"알 수 없는 오류"}`)}}if(!l)throw new Error("세션 디렉토리 삭제에 실패했습니다");const u=e().sessions.filter(d=>d.id!==i);r({sessions:u});const h=e().selectedSessions.filter(d=>d!==i);r({selectedSessions:h}),await e().updateStorageStats(),console.log(`[REPOSITORY] ✅ 세션 삭제 완료: ${i}`),alert(`✅ 세션이 성공적으로 삭제되었습니다.
세션명: ${s.name}`)}catch(s){throw console.error(`[REPOSITORY] ❌ 세션 삭제 실패: ${i}`,s),alert(`❌ 세션 삭제 실패: ${s instanceof Error?s.message:"알 수 없는 오류"}`),s}},deleteSessions:async i=>{try{for(const s of i)await e().deleteSession(s);r({selectedSessions:[]})}catch(s){throw console.error("❌ 다중 세션 삭제 실패:",s),s}},exportSession:async(i,s,o)=>{try{console.log(`[REPOSITORY] 📤 세션 내보내기 시작: ${i}, 형식: ${s}`);const l=e().sessions.find(u=>u.id===i);if(!l)throw new Error(`세션을 찾을 수 없습니다: ${i}`);if(!l.handle)throw new Error(`세션 파일 핸들을 찾을 수 없습니다: ${i}`);let c=o;c||(c=await window.showDirectoryPicker({mode:"readwrite",startIn:"downloads"})),s==="zip"||s==="all"?await e().exportSessionAsZip(l,c):await e().exportSessionFiles(l,c,s),console.log(`[REPOSITORY] ✅ 세션 내보내기 완료: ${i}`)}catch(l){if(l instanceof Error&&l.name==="AbortError"){console.log(`[REPOSITORY] 📤 세션 내보내기 취소: ${i}`);return}throw console.error(`[REPOSITORY] ❌ 세션 내보내기 실패: ${i}`,l),l}},exportSessions:async(i,s)=>{try{for(const o of i)await e().exportSession(o,s)}catch(o){throw console.error("❌ 다중 세션 내보내기 실패:",o),o}},selectSession:i=>{const s=e().selectedSessions,o=s.includes(i);r(o?{selectedSessions:s.filter(l=>l!==i)}:{selectedSessions:[...s,i]})},selectAllSessions:()=>{const i=e().sessions.map(s=>s.id);r({selectedSessions:i})},clearSelection:()=>{r({selectedSessions:[]})},updateStorageSettings:i=>{const s={...e().storageSettings,...i};r({storageSettings:s}),localStorage.setItem("linkband_storage_settings",JSON.stringify(s))},updateStorageStatus:i=>{r({storageStatus:{...e().storageStatus,...i}})},updateStorageStats:async()=>{try{console.log("[REPOSITORY] 📊 저장소 통계 업데이트 시작");const i=e().config.storageDirectory,s=e().sessions;let o=0,l=8.5,c=10;if(i)try{if(console.log("[REPOSITORY] 📊 저장소 디렉토리 크기 계산 중..."),o=await e().calculateDirectorySize(i),console.log(`[REPOSITORY] 📊 실제 사용량: ${o} bytes`),"storage"in navigator&&"estimate"in navigator.storage)try{const A=await navigator.storage.estimate();if(console.log("[REPOSITORY] 📊 Raw Storage API estimate:",A),A.quota&&A.usage){const g=A.quota,p=A.usage,v=g-p;console.log("[REPOSITORY] 📊 Raw values:"),console.log(`[REPOSITORY] 📊 - quotaBytes: ${g}`),console.log(`[REPOSITORY] 📊 - usedBytes: ${p}`),console.log(`[REPOSITORY] 📊 - availableBytes: ${v}`);const m=g*2;c=m/(1024*1024*1024);const y=p/g;if(y<.1)l=c*.7,console.log("[REPOSITORY] 📊 브라우저 사용률이 낮아서 Available을 Total의 70%로 설정");else{const x=m*y;l=Math.max(0,m-x)/(1024*1024*1024)}console.log("[REPOSITORY] 📊 계산된 값들:"),console.log(`[REPOSITORY] 📊 - browserUsageRatio: ${y}`),l>c*.9&&(l=c*.75,console.log(`[REPOSITORY] 📊 Available 값이 너무 커서 75%로 조정: ${l.toFixed(1)} GB`)),console.log("[REPOSITORY] 📊 Storage API 정보:"),console.log(`[REPOSITORY] 📊 - 브라우저 할당량: ${(g/(1024*1024*1024)).toFixed(1)} GB`),console.log(`[REPOSITORY] 📊 - 브라우저 사용중: ${(p/(1024*1024*1024)).toFixed(1)} GB`),console.log(`[REPOSITORY] 📊 - 브라우저 사용가능: ${(v/(1024*1024*1024)).toFixed(1)} GB`),console.log(`[REPOSITORY] 📊 - 추정 디스크 전체: ${c.toFixed(1)} GB`),console.log(`[REPOSITORY] 📊 - 추정 디스크 여유: ${l.toFixed(1)} GB`)}else console.warn("[REPOSITORY] 📊 Storage API estimate에 quota 또는 usage 정보 없음")}catch(A){console.warn("[REPOSITORY] 📊 Storage API 사용 실패:",A)}else console.warn("[REPOSITORY] 📊 Navigator Storage API 지원되지 않음")}catch(A){console.warn("[REPOSITORY] 📊 실제 크기 계산 실패, 세션 크기 합산으로 대체:",A),o=s.reduce((g,p)=>{const m=p.size.match(/([\d.]+)\s*(B|KB|MB|GB)/i);if(m){const y=parseFloat(m[1]);switch(m[2].toUpperCase()){case"GB":return g+y*1024*1024*1024;case"MB":return g+y*1024*1024;case"KB":return g+y*1024;case"B":return g+y;default:return g}}return g},0)}else console.log("[REPOSITORY] 📊 저장소 디렉토리 없음, 세션 크기 합산"),o=s.reduce((A,g)=>{const v=g.size.match(/([\d.]+)\s*(B|KB|MB|GB)/i);if(v){const m=parseFloat(v[1]);switch(v[2].toUpperCase()){case"GB":return A+m*1024*1024*1024;case"MB":return A+m*1024*1024;case"KB":return A+m*1024;case"B":return A+m;default:return A}}return A},0);const u=e().formatFileSize(o),h=`${c.toFixed(1)} GB`,d=`${l.toFixed(1)} GB`;console.log("[REPOSITORY] 📊 저장소 통계 업데이트 완료:"),console.log(`[REPOSITORY] 📊 - 총 용량: ${h}`),console.log(`[REPOSITORY] 📊 - 사용량: ${u} (${o} bytes)`),console.log(`[REPOSITORY] 📊 - 사용가능: ${d}`),console.log(`[REPOSITORY] 📊 - 세션 수: ${s.length}`),r({storageStats:{available:d,used:u,sessions:s.length,totalSize:h}})}catch(i){console.error("[REPOSITORY] ❌ 저장소 통계 업데이트 실패:",i),r({storageStats:{available:"알 수 없음",used:"계산 실패",sessions:e().sessions.length,totalSize:"알 수 없음"}})}},setCurrentSession:i=>{if(i===null)r({currentSession:null});else{const s=t.getCurrentSession();s&&s.id===i?r({currentSession:s}):r({currentSession:{id:i,name:i,startTime:new Date,duration:0,deviceName:"Unknown Device",deviceId:"unknown",samplingRate:250,totalSamples:0,estimatedSize:0,dataQuality:{eegQuality:0,ppgQuality:0,accQuality:0},saveFormats:["json","csv"],notes:""}})}},setIsRecording:i=>{r({storageStatus:{...e().storageStatus,isWriting:i}})},startStatusMonitoring:()=>{const i=()=>{const s=t.getStorageStatus(),o=t.getCurrentSession(),l=e().currentSession;e().updateStorageStatus({isWriting:s.isWriting,queueLength:s.queueLength,memoryUsage:Math.round(s.memoryUsage/1024/1024*100)/100,writeSpeed:s.queueLength>0?.1:0,savedData:o?Math.round(o.estimatedSize/1024/1024*100)/100:0}),o&&(!l||o.id!==l.id||o.estimatedSize!==l.estimatedSize||o.totalSamples!==l.totalSamples||o.duration!==l.duration)&&(console.log("🔧 currentSession 업데이트:",{estimatedSize:o.estimatedSize,totalSamples:o.totalSamples,duration:o.duration}),r({currentSession:o})),(s.isWriting||o)&&setTimeout(i,1e3)};i()},formatFileSize:i=>i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(2)} KB`:i<1024*1024*1024?`${(i/(1024*1024)).toFixed(2)} MB`:`${(i/(1024*1024*1024)).toFixed(2)} GB`,calculateDirectorySize:async i=>{let s=0;try{for await(const[o,l]of i.entries())if(l.kind==="file")try{const c=await l.getFile();s+=c.size}catch(c){console.warn(`[REPOSITORY] 파일 크기 계산 실패: ${o}`,c)}else if(l.kind==="directory"){const c=await e().calculateDirectorySize(l);s+=c}}catch(o){console.error("[REPOSITORY] 디렉토리 크기 계산 실패:",o)}return s},exportSessionAsZip:async(i,s)=>{try{console.log(`[REPOSITORY] 📦 ZIP 내보내기 시작: ${i.name}`);const o=`${i.name}_export_${new Date().toISOString().slice(0,10)}`,l=await s.getDirectoryHandle(o,{create:!0}),u=await(await l.getFileHandle("session_info.json",{create:!0})).createWritable(),h={sessionName:i.name,sessionId:i.id,exportDate:new Date().toISOString(),originalDate:i.date,originalTime:i.time,duration:i.duration,deviceName:i.deviceName,deviceId:i.deviceId,totalSize:i.size,formats:i.formats,notes:i.notes};await u.write(JSON.stringify(h,null,2)),await u.close();let d=0;for await(const[A,g]of i.handle.entries())if(g.kind==="file")try{const p=await g.getFile(),m=await(await l.getFileHandle(A,{create:!0})).createWritable();await m.write(p),await m.close(),d++,console.log(`[REPOSITORY] 📦 파일 복사: ${A}`)}catch(p){console.warn(`[REPOSITORY] ⚠️ 파일 복사 실패: ${A}`,p)}console.log(`[REPOSITORY] ✅ ZIP 내보내기 완료: ${d}개 파일 복사됨`)}catch(o){throw console.error("[REPOSITORY] ❌ ZIP 내보내기 실패:",o),o}},exportSessionFiles:async(i,s,o)=>{var l;try{console.log(`[REPOSITORY] 📄 개별 파일 내보내기 시작: ${i.name}, 형식: ${o}`);const c=o.toLowerCase();let u=0;for await(const[h,d]of i.handle.entries())if(d.kind==="file"&&(((l=h.split(".").pop())==null?void 0:l.toLowerCase())===c||o==="all"))try{const g=await d.getFile(),p=`${i.name}_${h}`,m=await(await s.getFileHandle(p,{create:!0})).createWritable();await m.write(g),await m.close(),u++,console.log(`[REPOSITORY] 📄 파일 내보내기: ${p}`)}catch(g){console.warn(`[REPOSITORY] ⚠️ 파일 내보내기 실패: ${h}`,g)}if(u===0)throw new Error(`${o} 형식의 파일을 찾을 수 없습니다.`);console.log(`[REPOSITORY] ✅ 개별 파일 내보내기 완료: ${u}개 파일`)}catch(c){throw console.error("[REPOSITORY] ❌ 개별 파일 내보내기 실패:",c),c}}}}),Ox=Object.freeze(Object.defineProperty({__proto__:null,useStorageStore:Xc},Symbol.toStringTag,{value:"Module"})),V2={eeg:5e3,ppg:2500,acc:1500},YU=()=>({eegBuffer:new uh(V2.eeg),ppgBuffer:new uh(V2.ppg),accBuffer:new uh(V2.acc),bufferSizes:{...V2},dataStats:{eegSamplesReceived:0,ppgSamplesReceived:0,accSamplesReceived:0,lastEEGTimestamp:null,lastPPGTimestamp:null,lastACCTimestamp:null}}),sc=Fh((r,e)=>({...YU(),addEEGData:t=>{const n=e();t.forEach(a=>n.eegBuffer.push(a)),r(a=>({dataStats:{...a.dataStats,eegSamplesReceived:a.dataStats.eegSamplesReceived+t.length,lastEEGTimestamp:t.length>0?t[t.length-1].timestamp:a.dataStats.lastEEGTimestamp}}))},addPPGData:t=>{const n=e();t.forEach(a=>n.ppgBuffer.push(a)),r(a=>({dataStats:{...a.dataStats,ppgSamplesReceived:a.dataStats.ppgSamplesReceived+t.length,lastPPGTimestamp:t.length>0?t[t.length-1].timestamp:a.dataStats.lastPPGTimestamp}}))},addACCData:t=>{const n=e();t.forEach(a=>n.accBuffer.push(a)),r(a=>({dataStats:{...a.dataStats,accSamplesReceived:a.dataStats.accSamplesReceived+t.length,lastACCTimestamp:t.length>0?t[t.length-1].timestamp:a.dataStats.lastACCTimestamp}}))},clearBuffers:()=>{const t=e();t.eegBuffer.clear(),t.ppgBuffer.clear(),t.accBuffer.clear(),r(n=>({dataStats:{...n.dataStats,eegSamplesReceived:0,ppgSamplesReceived:0,accSamplesReceived:0}}))},resizeBuffers:t=>{const n=e(),a={};if(t.eeg&&t.eeg!==n.bufferSizes.eeg){const i=n.eegBuffer.toArray();a.eegBuffer=new uh(t.eeg),i.slice(-t.eeg).forEach(s=>a.eegBuffer.push(s)),a.bufferSizes={...n.bufferSizes,eeg:t.eeg}}if(t.ppg&&t.ppg!==n.bufferSizes.ppg){const i=n.ppgBuffer.toArray();a.ppgBuffer=new uh(t.ppg),i.slice(-t.ppg).forEach(s=>a.ppgBuffer.push(s)),a.bufferSizes={...n.bufferSizes,ppg:t.ppg}}if(t.acc&&t.acc!==n.bufferSizes.acc){const i=n.accBuffer.toArray();a.accBuffer=new uh(t.acc),i.slice(-t.acc).forEach(s=>a.accBuffer.push(s)),a.bufferSizes={...n.bufferSizes,acc:t.acc}}Object.keys(a).length>0&&r(a)},getEEGData:t=>{const n=e().eegBuffer;return t?n.getLatest(t):n.toArray()},getPPGData:t=>{const n=e().ppgBuffer;return t?n.getLatest(t):n.toArray()},getACCData:t=>{const n=e().accBuffer;return t?n.getLatest(t):n.toArray()},reset:()=>r(YU())})),Qge=()=>sc(r=>r.eegBuffer),zge=()=>sc(r=>r.ppgBuffer),Gge=()=>sc(r=>r.accBuffer),Vge=()=>sc(r=>r.dataStats),$ge=()=>sc(r=>r.bufferSizes),Kge=(r=1e3)=>sc(e=>e.getEEGData(r)),Wge=(r=500)=>sc(e=>e.getPPGData(r)),qge=(r=300)=>sc(e=>e.getACCData(r)),Yge=Object.freeze(Object.defineProperty({__proto__:null,useACCBuffer:Gge,useBufferSizes:$ge,useDataStats:Vge,useEEGBuffer:Qge,useLatestACCData:qge,useLatestEEGData:Kge,useLatestPPGData:Wge,usePPGBuffer:zge,useRawDataStore:sc},Symbol.toStringTag,{value:"Module"}));function $X(){const{isInitialized:r}=W0(),{isConnected:e}=q0(),{isStreaming:t}=ww(),{isRecording:n}=HX(),{isSensorContacted:a,leadOffStatus:i}=To(),{currentSession:s,storageStatus:o}=Xc();cr(C=>C.ppgAnalysis),sc(C=>C.dataStats);const l=Dn(C=>C.connectedDevice),c=(l==null?void 0:l.samplingRates)||null,[u,h]=K.useState(0),[d,A]=K.useState("00:00:00");K.useEffect(()=>{let C;return n&&(s!=null&&s.startTime)?C=setInterval(()=>{const w=Date.now(),B=new Date(s.startTime).getTime(),D=Math.floor((w-B)/1e3),T=Math.floor(D/3600),E=Math.floor(D%3600/60),R=D%60;A(`${T.toString().padStart(2,"0")}:${E.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`)},1e3):A("00:00:00"),()=>{C&&clearInterval(C)}},[n,s==null?void 0:s.startTime]),K.useEffect(()=>{let C;return e&&jr.isConnected()?C=setInterval(async()=>{try{const w=await jr.getBatteryLevel();h(w)}catch(w){console.error("Failed to get realtime battery level:",w)}},1e3):h(0),()=>{C&&clearInterval(C)}},[e]);const g=C=>C<1024?`${C} B`:C<1024*1024?`${(C/1024).toFixed(1)} KB`:C<1024*1024*1024?`${(C/(1024*1024)).toFixed(1)} MB`:`${(C/(1024*1024*1024)).toFixed(1)} GB`,p=()=>e?{status:"connected",variant:"default",text:"Connected",className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200"}:{status:"disconnected",variant:"secondary",text:"Disconnected",className:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"},v=()=>e?a?{status:"good",variant:"default",text:"Good Contact",className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200"}:{status:"poor",variant:"destructive",text:"Poor Contact",className:"bg-red-100 text-red-800 border-red-200 hover:bg-red-200"}:{status:"disconnected",variant:"secondary",text:"Not Connected",className:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"},m=()=>e?t?{status:"active",variant:"default",text:"Good",className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200"}:{status:"stopped",variant:"secondary",text:"Stopped",className:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"}:{status:"disconnected",variant:"secondary",text:"Not Connected",className:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"},y=()=>e?n?{status:"recording",variant:"default",text:`${d} • ${g((s==null?void 0:s.estimatedSize)||0)}`,className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-200"}:{status:"stopped",variant:"secondary",text:"Stopped",className:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"}:{status:"disconnected",variant:"secondary",text:"Not Connected",className:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"},x=p(),b=v(),S=m(),_=y();return f.jsx("footer",{className:"bg-card border-t border-border px-8 py-3",children:f.jsxs("div",{className:"flex items-center justify-between text-sm max-w-screen-2xl mx-auto",children:[f.jsxs("div",{className:"flex items-center space-x-8",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(jg,{className:"h-4 w-4 text-blue-500"}),f.jsx("span",{className:"text-foreground font-medium",children:"Device:"}),f.jsx(Gt,{variant:x.variant,className:`text-xs px-2 py-1 ${x.className}`,children:x.text})]}),f.jsx(Kg,{orientation:"vertical",className:"h-6"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(mh,{className:"h-4 w-4 text-yellow-500"}),f.jsx("span",{className:"text-foreground font-medium",children:"Sensors:"}),f.jsx(Gt,{variant:b.variant,className:`text-xs px-2 py-1 ${b.className}`,children:b.text}),e&&!a&&f.jsxs("span",{className:"text-xs text-muted-foreground",children:["(FP1: ",i.fp1?"OFF":"ON",", FP2: ",i.fp2?"OFF":"ON",")"]})]}),f.jsx(Kg,{orientation:"vertical",className:"h-6"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ho,{className:"h-4 w-4 text-green-500"}),f.jsx("span",{className:"text-foreground font-medium",children:"Streaming:"}),f.jsx(Gt,{variant:S.variant,className:`text-xs px-2 py-1 ${S.className}`,children:S.text})]}),f.jsx(Kg,{orientation:"vertical",className:"h-6"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(r0,{className:"h-4 w-4 text-red-500"}),f.jsx("span",{className:"text-foreground font-medium",children:"Recording:"}),f.jsx(Gt,{variant:_.variant,className:`text-xs px-2 py-1 ${_.className}`,children:_.text})]})]}),f.jsxs("div",{className:"flex items-center space-x-6",children:[f.jsxs("div",{className:"flex items-center gap-2 min-w-fit",children:[f.jsx(Ba,{className:"h-4 w-4 text-chart-1"}),f.jsxs("span",{className:"text-foreground",children:["EEG: ",e&&(c!=null&&c.eeg)?c.eeg.toFixed(1):"-"," Hz"]})]}),f.jsxs("div",{className:"flex items-center gap-2 min-w-fit",children:[f.jsx(gue,{className:"h-4 w-4 text-chart-2"}),f.jsxs("span",{className:"text-foreground",children:["PPG: ",e&&(c!=null&&c.ppg)?c.ppg.toFixed(1):"-"," Hz"]})]}),f.jsxs("div",{className:"flex items-center gap-2 min-w-fit",children:[f.jsx(pue,{className:"h-4 w-4 text-chart-3"}),f.jsxs("span",{className:"text-foreground",children:["ACC: ",e&&(c!=null&&c.acc)?c.acc.toFixed(1):"-"," Hz"]})]}),f.jsxs("div",{className:"flex items-center gap-2 min-w-fit",children:[f.jsx(fA,{className:"h-4 w-4 text-chart-4"}),f.jsxs("span",{className:"text-foreground",children:["Battery: ",e&&u>0?`${u}%`:"-"]})]})]})]})})}function Ye({className:r,...e}){return f.jsx("div",{"data-slot":"card",className:tr("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",r),...e})}function wt({className:r,...e}){return f.jsx("div",{"data-slot":"card-header",className:tr("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function St({className:r,...e}){return f.jsx("h4",{"data-slot":"card-title",className:tr("leading-none",r),...e})}function na({className:r,...e}){return f.jsx("p",{"data-slot":"card-description",className:tr("text-muted-foreground",r),...e})}function ct({className:r,...e}){return f.jsx("div",{"data-slot":"card-content",className:tr("px-6 [&:last-child]:pb-6",r),...e})}function Xge({onOpenVisualizer:r}){const e=ZB(),t=JB();No();const{isSensorContacted:n}=To(),a=fk(),[i,s]=K.useState(0);K.useEffect(()=>{const h=setInterval(()=>{s(d=>d+1)},100);return()=>clearInterval(h)},[]);const o=()=>{if(!e||!e.fp1.length||!e.fp2.length)return Array.from({length:1e3},(y,x)=>({index:x,fp1:Math.sin(x*.1)*50+Math.random()*20-10,fp2:Math.cos(x*.1)*40+Math.random()*15-7.5}));const h=1e3,d=e.fp1,A=e.fp2,g=Math.min(d.length,A.length),p=Math.max(0,g-h),v=d.slice(p),m=A.slice(p);return v.map((y,x)=>{var b;return{index:x,fp1:y.value,fp2:((b=m[x])==null?void 0:b.value)||0}})},l=()=>{if(!t||!t.red.length||!t.ir.length)return Array.from({length:400},(b,S)=>({index:S,red:Math.sin(S*.2)*100+Math.random()*30-15,ir:Math.cos(S*.15)*80+Math.random()*25-12.5}));const h=t.red,d=t.ir,A=50,g=400,p=Math.min(h.length,d.length);if(p<=A)return[];const v=A,m=Math.min(v+g,p),y=h.slice(v,m),x=d.slice(v,m);return y.map((b,S)=>{var _;return{index:S,red:b.value,ir:((_=x[S])==null?void 0:_.value)||0}})},c=o(),u=l();return f.jsxs(Ye,{className:"p-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[f.jsxs("div",{children:[f.jsx("h5",{className:"text-sm font-medium text-neutral-200 mb-2",children:"실시간 필터링된 EEG 신호"}),f.jsxs("div",{className:"bg-neutral-900 border border-gray-300 rounded-lg p-3",children:[a?n?f.jsx("div",{className:"h-48 rounded",style:{backgroundColor:"transparent"},children:f.jsx(ls,{width:"100%",height:"100%",children:f.jsxs(Pc,{data:c,margin:{top:10,right:10,left:5,bottom:10},children:[f.jsx(so,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),f.jsx(oo,{dataKey:"index",axisLine:!0,tickLine:!0,tick:{fill:"#9CA3AF",fontSize:10},stroke:"#6B7280",type:"number",domain:[0,"dataMax"],hide:!0}),f.jsx(lo,{domain:[-150,150],type:"number",allowDataOverflow:!1,scale:"linear",allowDecimals:!1,tickCount:7,ticks:[-150,-100,-50,0,50,100,150],axisLine:!0,tickLine:!0,tick:{fill:"#9CA3AF",fontSize:10},stroke:"#6B7280",orientation:"left",width:35,includeHidden:!1}),f.jsx(Pa,{type:"monotone",dataKey:"fp1",stroke:"#10b981",strokeWidth:1.5,dot:!1,name:"FP1",connectNulls:!1,isAnimationActive:!1}),f.jsx(Pa,{type:"monotone",dataKey:"fp2",stroke:"#eab308",strokeWidth:1.5,dot:!1,name:"FP2",connectNulls:!1,isAnimationActive:!1})]})})}):f.jsx("div",{className:"h-48 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(da,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),f.jsx("p",{className:"text-yellow-400 text-sm font-medium",children:"올바르게 디바이스를 착용해주세요"})]})}):f.jsx("div",{className:"h-48 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(I5,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),f.jsx("p",{className:"text-red-400 text-sm font-medium",children:"디바이스를 연결해주세요"})]})}),f.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),f.jsx("span",{className:"text-xs text-neutral-400",children:"FP1"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),f.jsx("span",{className:"text-xs text-neutral-400",children:"FP2"})]})]})]})]}),f.jsxs("div",{children:[f.jsx("h5",{className:"text-sm font-medium text-neutral-200 mb-2",children:"실시간 필터링된 PPG 신호"}),f.jsxs("div",{className:"bg-neutral-900 border border-gray-300 rounded-lg p-3",children:[a?n?f.jsx("div",{className:"h-48 rounded",style:{backgroundColor:"transparent"},children:f.jsx(ls,{width:"100%",height:"100%",children:f.jsxs(Pc,{data:u,margin:{top:10,right:10,left:5,bottom:10},children:[f.jsx(so,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),f.jsx(oo,{dataKey:"index",axisLine:!0,tickLine:!0,tick:{fill:"#9CA3AF",fontSize:10},stroke:"#6B7280",type:"number",domain:[0,"dataMax"],hide:!0}),f.jsx(lo,{domain:[-250,250],type:"number",allowDataOverflow:!1,scale:"linear",allowDecimals:!1,tickCount:11,ticks:[-250,-200,-150,-100,-50,0,50,100,150,200,250],axisLine:!0,tickLine:!0,tick:{fill:"#9CA3AF",fontSize:10},stroke:"#6B7280",orientation:"left",width:35,includeHidden:!1}),f.jsx(Pa,{type:"monotone",dataKey:"red",stroke:"#ef4444",strokeWidth:1.5,dot:!1,name:"Red 채널",connectNulls:!1,isAnimationActive:!1}),f.jsx(Pa,{type:"monotone",dataKey:"ir",stroke:"#7c3aed",strokeWidth:1.5,dot:!1,name:"IR 채널",connectNulls:!1,isAnimationActive:!1})]})})}):f.jsx("div",{className:"h-48 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(da,{className:"w-8 h-8 text-yellow-500 mx-auto mb-2"}),f.jsx("p",{className:"text-yellow-400 text-sm font-medium",children:"올바르게 디바이스를 착용해주세요"})]})}):f.jsx("div",{className:"h-48 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(I5,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),f.jsx("p",{className:"text-red-400 text-sm font-medium",children:"디바이스를 연결해주세요"})]})}),f.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),f.jsx("span",{className:"text-xs text-neutral-400",children:"Red 채널"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),f.jsx("span",{className:"text-xs text-neutral-400",children:"IR 채널"})]})]})]})]})]}),f.jsx("div",{className:"flex justify-center",children:f.jsxs(At,{onClick:r,className:"w-full h-16 text-lg font-semibold justify-center gap-4 bg-blue-600 text-white hover:bg-blue-700",children:[f.jsx(rw,{className:"w-6 h-6"}),"Visualizer로 이동"]})})]})}function Zge(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}const Jge=r=>{switch(r){case"success":return rpe;case"info":return ape;case"warning":return npe;case"error":return ipe;default:return null}},epe=Array(12).fill(0),tpe=({visible:r,className:e})=>xt.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},xt.createElement("div",{className:"sonner-spinner"},epe.map((t,n)=>xt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),rpe=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),npe=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},xt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ape=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ipe=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),spe=xt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},xt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),xt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ope=()=>{const[r,e]=xt.useState(document.hidden);return xt.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r};let h3=1;class lpe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...a}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:h3++,s=this.toasts.find(l=>l.id===i),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:n}),{...l,...e,id:i,dismissible:o,title:n}):l):this.addToast({title:n,...a,dismissible:o,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let i=n!==void 0,s;const o=a.then(async c=>{if(s=["resolve",c],xt.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(upe(c)&&!c.ok){i=!1;const h=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description,g=typeof h=="object"&&!xt.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:d,...g})}else if(c instanceof Error){i=!1;const h=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description,g=typeof h=="object"&&!xt.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:d,...g})}else if(t.success!==void 0){i=!1;const h=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description,g=typeof h=="object"&&!xt.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:d,...g})}}).catch(async c=>{if(s=["reject",c],t.error!==void 0){i=!1;const u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description,A=typeof u=="object"&&!xt.isValidElement(u)?u:{message:u};this.create({id:n,type:"error",description:h,...A})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{const n=(t==null?void 0:t.id)||h3++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Rs=new lpe,cpe=(r,e)=>{const t=(e==null?void 0:e.id)||h3++;return Rs.addToast({title:r,...e,id:t}),t},upe=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",hpe=cpe,dpe=()=>Rs.toasts,Ape=()=>Rs.getActiveToasts(),yn=Object.assign(hpe,{success:Rs.success,info:Rs.info,warning:Rs.warning,error:Rs.error,custom:Rs.custom,message:Rs.message,promise:Rs.promise,dismiss:Rs.dismiss,loading:Rs.loading},{getHistory:dpe,getToasts:Ape});Zge("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function $2(r){return r.label!==void 0}const fpe=3,gpe="24px",ppe="16px",XU=4e3,mpe=356,vpe=14,ype=45,xpe=200;function bc(...r){return r.filter(Boolean).join(" ")}function bpe(r){const[e,t]=r.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}const wpe=r=>{var e,t,n,a,i,s,o,l,c;const{invert:u,toast:h,unstyled:d,interacting:A,setHeights:g,visibleToasts:p,heights:v,index:m,toasts:y,expanded:x,removeToast:b,defaultRichColors:S,closeButton:_,style:C,cancelButtonStyle:w,actionButtonStyle:B,className:D="",descriptionClassName:T="",duration:E,position:R,gap:M,expandByDefault:k,classNames:O,icons:Q,closeButtonAriaLabel:H="Close toast"}=r,[W,te]=xt.useState(null),[ee,j]=xt.useState(null),[G,Y]=xt.useState(!1),[Z,de]=xt.useState(!1),[he,fe]=xt.useState(!1),[q,ge]=xt.useState(!1),[me,we]=xt.useState(!1),[Me,z]=xt.useState(0),[pe,J]=xt.useState(0),oe=xt.useRef(h.duration||E||XU),ae=xt.useRef(null),ue=xt.useRef(null),be=m===0,_e=m+1<=p,ye=h.type,Ee=h.dismissible!==!1,ze=h.className||"",Fe=h.descriptionClassName||"",Ge=xt.useMemo(()=>v.findIndex(Je=>Je.toastId===h.id)||0,[v,h.id]),at=xt.useMemo(()=>{var Je;return(Je=h.closeButton)!=null?Je:_},[h.closeButton,_]),ut=xt.useMemo(()=>h.duration||E||XU,[h.duration,E]),gt=xt.useRef(0),Le=xt.useRef(0),Qe=xt.useRef(0),ht=xt.useRef(null),[it,Vt]=R.split("-"),kt=xt.useMemo(()=>v.reduce((Je,yt,mr)=>mr>=Ge?Je:Je+yt.height,0),[v,Ge]),Bt=ope(),Sr=h.invert||u,zt=ye==="loading";Le.current=xt.useMemo(()=>Ge*M+kt,[Ge,kt]),xt.useEffect(()=>{oe.current=ut},[ut]),xt.useEffect(()=>{Y(!0)},[]),xt.useEffect(()=>{const Je=ue.current;if(Je){const yt=Je.getBoundingClientRect().height;return J(yt),g(mr=>[{toastId:h.id,height:yt,position:h.position},...mr]),()=>g(mr=>mr.filter(dr=>dr.toastId!==h.id))}},[g,h.id]),xt.useLayoutEffect(()=>{if(!G)return;const Je=ue.current,yt=Je.style.height;Je.style.height="auto";const mr=Je.getBoundingClientRect().height;Je.style.height=yt,J(mr),g(dr=>dr.find(_r=>_r.toastId===h.id)?dr.map(_r=>_r.toastId===h.id?{..._r,height:mr}:_r):[{toastId:h.id,height:mr,position:h.position},...dr])},[G,h.title,h.description,g,h.id,h.jsx,h.action,h.cancel]);const qe=xt.useCallback(()=>{de(!0),z(Le.current),g(Je=>Je.filter(yt=>yt.toastId!==h.id)),setTimeout(()=>{b(h)},xpe)},[h,b,g,Le]);xt.useEffect(()=>{if(h.promise&&ye==="loading"||h.duration===1/0||h.type==="loading")return;let Je;return x||A||Bt?(()=>{if(Qe.current<gt.current){const dr=new Date().getTime()-gt.current;oe.current=oe.current-dr}Qe.current=new Date().getTime()})():(()=>{oe.current!==1/0&&(gt.current=new Date().getTime(),Je=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),qe()},oe.current))})(),()=>clearTimeout(Je)},[x,A,h,ye,Bt,qe]),xt.useEffect(()=>{h.delete&&(qe(),h.onDismiss==null||h.onDismiss.call(h,h))},[qe,h.delete]);function pt(){var Je;if(Q!=null&&Q.loading){var yt;return xt.createElement("div",{className:bc(O==null?void 0:O.loader,h==null||(yt=h.classNames)==null?void 0:yt.loader,"sonner-loader"),"data-visible":ye==="loading"},Q.loading)}return xt.createElement(tpe,{className:bc(O==null?void 0:O.loader,h==null||(Je=h.classNames)==null?void 0:Je.loader),visible:ye==="loading"})}const Nt=h.icon||(Q==null?void 0:Q[ye])||Jge(ye);var Kt,Yt;return xt.createElement("li",{tabIndex:0,ref:ue,className:bc(D,ze,O==null?void 0:O.toast,h==null||(e=h.classNames)==null?void 0:e.toast,O==null?void 0:O.default,O==null?void 0:O[ye],h==null||(t=h.classNames)==null?void 0:t[ye]),"data-sonner-toast":"","data-rich-colors":(Kt=h.richColors)!=null?Kt:S,"data-styled":!(h.jsx||h.unstyled||d),"data-mounted":G,"data-promise":!!h.promise,"data-swiped":me,"data-removed":Z,"data-visible":_e,"data-y-position":it,"data-x-position":Vt,"data-index":m,"data-front":be,"data-swiping":he,"data-dismissible":Ee,"data-type":ye,"data-invert":Sr,"data-swipe-out":q,"data-swipe-direction":ee,"data-expanded":!!(x||k&&G),style:{"--index":m,"--toasts-before":m,"--z-index":y.length-m,"--offset":`${Z?Me:Le.current}px`,"--initial-height":k?"auto":`${pe}px`,...C,...h.style},onDragEnd:()=>{fe(!1),te(null),ht.current=null},onPointerDown:Je=>{Je.button!==2&&(zt||!Ee||(ae.current=new Date,z(Le.current),Je.target.setPointerCapture(Je.pointerId),Je.target.tagName!=="BUTTON"&&(fe(!0),ht.current={x:Je.clientX,y:Je.clientY})))},onPointerUp:()=>{var Je,yt,mr;if(q||!Ee)return;ht.current=null;const dr=Number(((Je=ue.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),an=Number(((yt=ue.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_r=new Date().getTime()-((mr=ae.current)==null?void 0:mr.getTime()),mt=W==="x"?dr:an,Cn=Math.abs(mt)/_r;if(Math.abs(mt)>=ype||Cn>.11){z(Le.current),h.onDismiss==null||h.onDismiss.call(h,h),j(W==="x"?dr>0?"right":"left":an>0?"down":"up"),qe(),ge(!0);return}else{var Pr,ar;(Pr=ue.current)==null||Pr.style.setProperty("--swipe-amount-x","0px"),(ar=ue.current)==null||ar.style.setProperty("--swipe-amount-y","0px")}we(!1),fe(!1),te(null)},onPointerMove:Je=>{var yt,mr,dr;if(!ht.current||!Ee||((yt=window.getSelection())==null?void 0:yt.toString().length)>0)return;const _r=Je.clientY-ht.current.y,mt=Je.clientX-ht.current.x;var Cn;const Pr=(Cn=r.swipeDirections)!=null?Cn:bpe(R);!W&&(Math.abs(mt)>1||Math.abs(_r)>1)&&te(Math.abs(mt)>Math.abs(_r)?"x":"y");let ar={x:0,y:0};const Dr=Nr=>1/(1.5+Math.abs(Nr)/20);if(W==="y"){if(Pr.includes("top")||Pr.includes("bottom"))if(Pr.includes("top")&&_r<0||Pr.includes("bottom")&&_r>0)ar.y=_r;else{const Nr=_r*Dr(_r);ar.y=Math.abs(Nr)<Math.abs(_r)?Nr:_r}}else if(W==="x"&&(Pr.includes("left")||Pr.includes("right")))if(Pr.includes("left")&&mt<0||Pr.includes("right")&&mt>0)ar.x=mt;else{const Nr=mt*Dr(mt);ar.x=Math.abs(Nr)<Math.abs(mt)?Nr:mt}(Math.abs(ar.x)>0||Math.abs(ar.y)>0)&&we(!0),(mr=ue.current)==null||mr.style.setProperty("--swipe-amount-x",`${ar.x}px`),(dr=ue.current)==null||dr.style.setProperty("--swipe-amount-y",`${ar.y}px`)}},at&&!h.jsx&&ye!=="loading"?xt.createElement("button",{"aria-label":H,"data-disabled":zt,"data-close-button":!0,onClick:zt||!Ee?()=>{}:()=>{qe(),h.onDismiss==null||h.onDismiss.call(h,h)},className:bc(O==null?void 0:O.closeButton,h==null||(n=h.classNames)==null?void 0:n.closeButton)},(Yt=Q==null?void 0:Q.close)!=null?Yt:spe):null,(ye||h.icon||h.promise)&&h.icon!==null&&((Q==null?void 0:Q[ye])!==null||h.icon)?xt.createElement("div",{"data-icon":"",className:bc(O==null?void 0:O.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||pt():null,h.type!=="loading"?Nt:null):null,xt.createElement("div",{"data-content":"",className:bc(O==null?void 0:O.content,h==null||(i=h.classNames)==null?void 0:i.content)},xt.createElement("div",{"data-title":"",className:bc(O==null?void 0:O.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?xt.createElement("div",{"data-description":"",className:bc(T,Fe,O==null?void 0:O.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),xt.isValidElement(h.cancel)?h.cancel:h.cancel&&$2(h.cancel)?xt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||w,onClick:Je=>{$2(h.cancel)&&Ee&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Je),qe())},className:bc(O==null?void 0:O.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,xt.isValidElement(h.action)?h.action:h.action&&$2(h.action)?xt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||B,onClick:Je=>{$2(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Je),!Je.defaultPrevented&&qe())},className:bc(O==null?void 0:O.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function ZU(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function Spe(r,e){const t={};return[r,e].forEach((n,a)=>{const i=a===1,s=i?"--mobile-offset":"--offset",o=i?ppe:gpe;function l(c){["top","right","bottom","left"].forEach(u=>{t[`${s}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(c=>{n[c]===void 0?t[`${s}-${c}`]=o:t[`${s}-${c}`]=typeof n[c]=="number"?`${n[c]}px`:n[c]}):l(o)}),t}const _pe=xt.forwardRef(function(e,t){const{invert:n,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:h="light",richColors:d,duration:A,style:g,visibleToasts:p=fpe,toastOptions:v,dir:m=ZU(),gap:y=vpe,icons:x,containerAriaLabel:b="Notifications"}=e,[S,_]=xt.useState([]),C=xt.useMemo(()=>Array.from(new Set([a].concat(S.filter(ee=>ee.position).map(ee=>ee.position)))),[S,a]),[w,B]=xt.useState([]),[D,T]=xt.useState(!1),[E,R]=xt.useState(!1),[M,k]=xt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=xt.useRef(null),Q=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=xt.useRef(null),W=xt.useRef(!1),te=xt.useCallback(ee=>{_(j=>{var G;return(G=j.find(Y=>Y.id===ee.id))!=null&&G.delete||Rs.dismiss(ee.id),j.filter(({id:Y})=>Y!==ee.id)})},[]);return xt.useEffect(()=>Rs.subscribe(ee=>{if(ee.dismiss){requestAnimationFrame(()=>{_(j=>j.map(G=>G.id===ee.id?{...G,delete:!0}:G))});return}setTimeout(()=>{ihe.flushSync(()=>{_(j=>{const G=j.findIndex(Y=>Y.id===ee.id);return G!==-1?[...j.slice(0,G),{...j[G],...ee},...j.slice(G+1)]:[ee,...j]})})})}),[S]),xt.useEffect(()=>{if(h!=="system"){k(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?k("dark"):k("light")),typeof window>"u")return;const ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:j})=>{k(j?"dark":"light")})}catch{ee.addListener(({matches:G})=>{try{k(G?"dark":"light")}catch(Y){console.error(Y)}})}},[h]),xt.useEffect(()=>{S.length<=1&&T(!1)},[S]),xt.useEffect(()=>{const ee=j=>{var G;if(i.every(de=>j[de]||j.code===de)){var Z;T(!0),(Z=O.current)==null||Z.focus()}j.code==="Escape"&&(document.activeElement===O.current||(G=O.current)!=null&&G.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[i]),xt.useEffect(()=>{if(O.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,W.current=!1)}},[O.current]),xt.createElement("section",{ref:t,"aria-label":`${b} ${Q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((ee,j)=>{var G;const[Y,Z]=ee.split("-");return S.length?xt.createElement("ol",{key:ee,dir:m==="auto"?ZU():m,tabIndex:-1,ref:O,className:l,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":Y,"data-x-position":Z,style:{"--front-toast-height":`${((G=w[0])==null?void 0:G.height)||0}px`,"--width":`${mpe}px`,"--gap":`${y}px`,...g,...Spe(c,u)},onBlur:de=>{W.current&&!de.currentTarget.contains(de.relatedTarget)&&(W.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||W.current||(W.current=!0,H.current=de.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{E||T(!1)},onDragEnd:()=>T(!1),onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},S.filter(de=>!de.position&&j===0||de.position===ee).map((de,he)=>{var fe,q;return xt.createElement(wpe,{key:de.id,icons:x,index:he,toast:de,defaultRichColors:d,duration:(fe=v==null?void 0:v.duration)!=null?fe:A,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:p,closeButton:(q=v==null?void 0:v.closeButton)!=null?q:o,interacting:E,position:ee,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:te,toasts:S.filter(ge=>ge.position==de.position),heights:w.filter(ge=>ge.position==de.position),setHeights:B,expandByDefault:s,gap:y,expanded:D,swipeDirections:e.swipeDirections})})):null}))});function JU(){const{setActiveMenu:r}=xw(),{isInitialized:e}=W0(),{isConnected:t}=q0(),{isStreaming:n}=ww(),{isRecording:a}=HX();To();const{currentSession:i,storageStats:s}=Xc();sc(k=>k.dataStats);const o=Dn(k=>k.connectedDevice),l=(o==null?void 0:o.samplingRates)||null;jX(),gk(),FX(),Ak(),Dn();const[c,u]=K.useState(null),[h,d]=K.useState(0),[A,g]=K.useState("00:00:00"),p=rN(),v=bw(),m=K0(),y=eN(),[x,b]=K.useState({arousal:[],valence:[],focus:[]}),[S,_]=K.useState({heartRate:[],rmssd:[],sdnn:[],pnn50:[],stressIndex:[],spo2:[]}),[C,w]=K.useState({arousal:null,valence:null,focus:null}),[B,D]=K.useState({heartRate:null,rmssd:null,sdnn:null,pnn50:null,stressIndex:null,spo2:null});K.useEffect(()=>{let k;return a&&(i!=null&&i.startTime)?k=setInterval(()=>{const O=Date.now(),Q=new Date(i.startTime).getTime(),H=Math.floor((O-Q)/1e3),W=Math.floor(H/3600),te=Math.floor(H%3600/60),ee=H%60;g(`${W.toString().padStart(2,"0")}:${te.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`)},1e3):g("00:00:00"),()=>{k&&clearInterval(k)}},[a,i==null?void 0:i.startTime]),K.useEffect(()=>{let k;return t&&jr.isConnected()?k=setInterval(async()=>{try{const O=await jr.getBatteryLevel();d(O)}catch(O){console.error("Failed to get realtime battery level:",O)}},1e3):d(0),()=>{k&&clearInterval(k)}},[t]),K.useEffect(()=>{var H,W,te,ee;if(!(m!=null&&m.indices)||!p)return;const k=((W=(H=p.ch1SQI)==null?void 0:H[p.ch1SQI.length-1])==null?void 0:W.value)||0,O=((ee=(te=p.ch2SQI)==null?void 0:te[p.ch2SQI.length-1])==null?void 0:ee.value)||0,Q=(k+O)/2;if(console.log("🔧 EEG SQI 체크:",{ch1SQI:k,ch2SQI:O,averageSQI:Q,threshold:80,isQualityGood:Q>=80}),Q>=80){const{focusIndex:j,relaxationIndex:G,emotionalStability:Y}=m.indices;b(Z=>{const de={arousal:[...Z.arousal,G].slice(-120),valence:[...Z.valence,Y].slice(-120),focus:[...Z.focus,j].slice(-120)};return console.log("🔧 EEG Moving Average 업데이트:",{newValues:{arousal:G,valence:Y,focus:j},historyLengths:{arousal:de.arousal.length,valence:de.valence.length,focus:de.focus.length}}),de})}},[m,p]),K.useEffect(()=>{var O,Q;if(!(y!=null&&y.indices)||!v)return;const k=((Q=(O=v.overallSQI)==null?void 0:O[v.overallSQI.length-1])==null?void 0:Q.value)||0;if(console.log("🔧 PPG SQI 체크:",{overallSQI:k,threshold:80,isQualityGood:k>=80}),k>=80){const{heartRate:H,rmssd:W,sdnn:te,pnn50:ee,stressIndex:j,spo2:G}=y.indices;_(Y=>{const Z={heartRate:[...Y.heartRate,H].slice(-120),rmssd:[...Y.rmssd,W].slice(-120),sdnn:[...Y.sdnn,te].slice(-120),pnn50:[...Y.pnn50,ee].slice(-120),stressIndex:[...Y.stressIndex,j].slice(-120),spo2:[...Y.spo2,G].slice(-120)};return console.log("🔧 PPG Moving Average 업데이트:",{newValues:{heartRate:H,rmssd:W,sdnn:te,pnn50:ee,stressIndex:j,spo2:G},historyLengths:{heartRate:Z.heartRate.length,rmssd:Z.rmssd.length,sdnn:Z.sdnn.length,pnn50:Z.pnn50.length,stressIndex:Z.stressIndex.length,spo2:Z.spo2.length}}),Z})}},[y,v]),K.useEffect(()=>{w({arousal:x.arousal.length>0?x.arousal.reduce((k,O)=>k+O,0)/x.arousal.length:null,valence:x.valence.length>0?x.valence.reduce((k,O)=>k+O,0)/x.valence.length:null,focus:x.focus.length>0?x.focus.reduce((k,O)=>k+O,0)/x.focus.length:null})},[x]),K.useEffect(()=>{D({heartRate:S.heartRate.length>0?S.heartRate.reduce((k,O)=>k+O,0)/S.heartRate.length:null,rmssd:S.rmssd.length>0?S.rmssd.reduce((k,O)=>k+O,0)/S.rmssd.length:null,sdnn:S.sdnn.length>0?S.sdnn.reduce((k,O)=>k+O,0)/S.sdnn.length:null,pnn50:S.pnn50.length>0?S.pnn50.reduce((k,O)=>k+O,0)/S.pnn50.length:null,stressIndex:S.stressIndex.length>0?S.stressIndex.reduce((k,O)=>k+O,0)/S.stressIndex.length:null,spo2:S.spo2.length>0?S.spo2.reduce((k,O)=>k+O,0)/S.spo2.length:null})},[S]);const T=()=>{r("linkband")},E=()=>{r("visualizer")},R=()=>{r("datacenter")},M=()=>{r("settings")};return f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx("div",{className:"flex justify-between items-center",children:f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-medium text-foreground",children:"Dashboard"}),f.jsx("p",{className:"text-muted-foreground",children:"시스템 상태 및 실시간 모니터링"})]})}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs(Ye,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(jg,{className:"w-6 h-6 text-blue-600"}),f.jsx("h2",{className:"text-xl font-medium",children:"LINK BAND 연결 및 착용"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-medium",children:"LINK BAND 상태"}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsx(Ye,{className:"p-4 bg-neutral-800 border-gray-300",children:f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(fA,{className:"w-4 h-4 text-green-500"}),f.jsx("span",{className:"text-sm text-neutral-300",children:"Battery"})]}),f.jsx("div",{className:"text-2xl font-bold text-white",children:t&&h>0?`${h}%`:"-"}),f.jsx("div",{className:"text-sm text-neutral-400",children:t?"Connected":"Disconnected"})]})}),f.jsx(Ye,{className:"p-4 bg-neutral-800 border-gray-300",children:f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(jg,{className:"w-4 h-4 text-blue-500"}),f.jsx("span",{className:"text-sm text-neutral-300",children:"Connection"})]}),f.jsx("div",{className:"text-lg font-bold text-white",children:t?new Date().toLocaleTimeString():"연결 없음"}),f.jsx("div",{className:"text-sm text-neutral-400",children:t?`Duration: ${A}`:"디바이스를 연결해주세요"})]})}),f.jsx(Ye,{className:"p-4 bg-neutral-800 border-gray-300",children:f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ho,{className:"w-4 h-4 text-purple-500"}),f.jsx("span",{className:"text-sm text-neutral-300",children:"Sampling Rates"})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm text-neutral-400",children:"EEG:"}),f.jsxs("span",{className:"text-sm text-white font-medium",children:[t&&(l!=null&&l.eeg)?l.eeg.toFixed(1):"-"," Hz"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm text-neutral-400",children:"PPG:"}),f.jsxs("span",{className:"text-sm text-white font-medium",children:[t&&(l!=null&&l.ppg)?l.ppg.toFixed(1):"-"," Hz"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm text-neutral-400",children:"ACC:"}),f.jsxs("span",{className:"text-sm text-white font-medium",children:[t&&(l!=null&&l.acc)?l.acc.toFixed(1):"-"," Hz"]})]})]})]})})]})]}),f.jsx("div",{className:"space-y-4",children:f.jsx("div",{className:"flex justify-center",children:f.jsxs(At,{className:"w-full h-16 text-lg font-semibold justify-center gap-4 bg-blue-600 text-white hover:bg-blue-700",onClick:T,children:[f.jsx(jg,{className:"w-6 h-6"}),"LINK BAND로 이동"]})})})]})]}),f.jsxs(Ye,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(rw,{className:"w-6 h-6 text-green-600"}),f.jsx("h2",{className:"text-xl font-medium",children:"데이터 시각화 및 확인"})]}),f.jsx(Xge,{onOpenVisualizer:E})]}),f.jsxs(Ye,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(go,{className:"w-6 h-6 text-purple-600"}),f.jsx("h2",{className:"text-xl font-medium",children:"데이터 저장소"})]}),f.jsxs(At,{variant:"outline",size:"sm",className:"text-xs gap-2",onClick:M,children:[f.jsx(Ip,{className:"w-3 h-3"}),"저장소 설정"]})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-medium",children:"저장소 상태"}),f.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),f.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"저장소 준비 완료"})]}),f.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"데이터 저장이 가능합니다."})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(Ye,{className:"p-4 bg-neutral-800 border-gray-300",children:f.jsxs("div",{className:"space-y-2 text-center",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx(go,{className:"w-4 h-4 text-green-500"}),f.jsx("span",{className:"text-sm text-neutral-300",children:"Used"})]}),f.jsx("div",{className:"text-2xl font-bold text-white",children:s.used})]})}),f.jsx(Ye,{className:"p-4 bg-neutral-800 border-gray-300",children:f.jsxs("div",{className:"space-y-2 text-center",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx(r0,{className:"w-4 h-4 text-blue-500"}),f.jsx("span",{className:"text-sm text-neutral-300",children:"Available"})]}),f.jsx("div",{className:"text-2xl font-bold text-white",children:s.available})]})}),f.jsx(Ye,{className:"p-4 bg-neutral-800 border-gray-300",children:f.jsxs("div",{className:"space-y-2 text-center",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx(ho,{className:"w-4 h-4 text-orange-500"}),f.jsx("span",{className:"text-sm text-neutral-300",children:"Sessions"})]}),f.jsx("div",{className:"text-2xl font-bold text-white",children:s.sessions})]})}),f.jsx(Ye,{className:"p-4 bg-neutral-800 border-gray-300",children:f.jsxs("div",{className:"space-y-2 text-center",children:[f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx(go,{className:"w-4 h-4 text-purple-500"}),f.jsx("span",{className:"text-sm text-neutral-300",children:"Total Storage"})]}),f.jsx("div",{className:"text-2xl font-bold text-white",children:s.totalSize})]})})]})]}),f.jsx("div",{className:"space-y-4",children:f.jsx("div",{className:"flex justify-center",children:f.jsxs(At,{className:"w-full h-16 text-lg font-semibold justify-center gap-4 bg-blue-600 text-white hover:bg-blue-700",onClick:R,children:[f.jsx(Vl,{className:"w-6 h-6"}),"Data Center로 이동"]})})})]})]})]})]})}const xo=K.forwardRef(({className:r,type:e,...t},n)=>f.jsx("input",{type:e,className:tr("flex h-10 w-full rounded-md border border-input bg-neutral-700 px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:n,...t}));xo.displayName="Input";function yk(r){const e=K.useRef({value:r,previous:r});return K.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var sN="Switch",[Cpe,lKe]=F0(sN),[Bpe,Npe]=Cpe(sN),KX=K.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:c,form:u,...h}=r,[d,A]=K.useState(null),g=Ha(e,x=>A(x)),p=K.useRef(!1),v=d?u||!!d.closest("form"):!0,[m,y]=n0({prop:a,defaultProp:i??!1,onChange:c,caller:sN});return f.jsxs(Bpe,{scope:t,checked:m,disabled:o,children:[f.jsx(_n.button,{type:"button",role:"switch","aria-checked":m,"aria-required":s,"data-state":XX(m),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:g,onClick:Yr(r.onClick,x=>{y(b=>!b),v&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})}),v&&f.jsx(YX,{control:d,bubbles:!p.current,name:n,value:l,checked:m,required:s,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});KX.displayName=sN;var WX="SwitchThumb",qX=K.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,a=Npe(WX,t);return f.jsx(_n.span,{"data-state":XX(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:e})});qX.displayName=WX;var Tpe="SwitchBubbleInput",YX=K.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:n=!0,...a},i)=>{const s=K.useRef(null),o=Ha(s,i),l=yk(t),c=iW(e);return K.useEffect(()=>{const u=s.current;if(!u)return;const h=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==t&&A){const g=new Event("click",{bubbles:n});A.call(u,t),u.dispatchEvent(g)}},[l,t,n]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...a,tabIndex:-1,ref:o,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});YX.displayName=Tpe;function XX(r){return r?"checked":"unchecked"}var ZX=KX,Ipe=qX;const _A=K.forwardRef(({className:r,...e},t)=>f.jsx(ZX,{className:tr("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-blue-600 data-[state=unchecked]:bg-gray-200 dark:data-[state=unchecked]:bg-gray-700",r),...e,ref:t,children:f.jsx(Ipe,{className:tr("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));_A.displayName=ZX.displayName;const e8=yue,t8=xue,Epe=K.forwardRef(({className:r,inset:e,children:t,...n},a)=>f.jsxs(sW,{ref:a,className:tr("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",r),...n,children:[t,f.jsx(oW,{className:"ml-auto h-4 w-4"})]}));Epe.displayName=sW.displayName;const Dpe=K.forwardRef(({className:r,...e},t)=>f.jsx(lW,{ref:t,className:tr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...e}));Dpe.displayName=lW.displayName;const d3=K.forwardRef(({className:r,sideOffset:e=4,...t},n)=>f.jsx(mue,{children:f.jsx(cW,{ref:n,sideOffset:e,className:tr("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t})}));d3.displayName=cW.displayName;const ev=K.forwardRef(({className:r,inset:e,...t},n)=>f.jsx(uW,{ref:n,className:tr("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",r),...t}));ev.displayName=uW.displayName;const Mpe=K.forwardRef(({className:r,children:e,checked:t,...n},a)=>f.jsxs(hW,{ref:a,className:tr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(dW,{children:f.jsx(AW,{className:"h-4 w-4"})})}),e]}));Mpe.displayName=hW.displayName;const Rpe=K.forwardRef(({className:r,children:e,...t},n)=>f.jsxs(fW,{ref:n,className:tr("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(dW,{children:f.jsx(vue,{className:"h-2 w-2 fill-current"})})}),e]}));Rpe.displayName=fW.displayName;const Lpe=K.forwardRef(({className:r,inset:e,...t},n)=>f.jsx(gW,{ref:n,className:tr("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",r),...t}));Lpe.displayName=gW.displayName;const Ppe=K.forwardRef(({className:r,...e},t)=>f.jsx(pW,{ref:t,className:tr("-mx-1 my-1 h-px bg-muted",r),...e}));Ppe.displayName=pW.displayName;function oN({...r}){return f.jsx(bue,{"data-slot":"dialog",...r})}function kpe({...r}){return f.jsx(Bue,{"data-slot":"dialog-portal",...r})}function Fpe({className:r,...e}){return f.jsx(Nue,{"data-slot":"dialog-overlay",className:tr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/95",r),...e})}function lN({className:r,children:e,...t}){return f.jsxs(kpe,{"data-slot":"dialog-portal",children:[f.jsx(Fpe,{}),f.jsxs(wue,{"data-slot":"dialog-content",className:tr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",r),...t,children:[e,f.jsxs(Sue,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[f.jsx(Z1,{}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function cN({className:r,...e}){return f.jsx("div",{"data-slot":"dialog-header",className:tr("flex flex-col gap-2 text-center sm:text-left",r),...e})}function uN({className:r,...e}){return f.jsx(_ue,{"data-slot":"dialog-title",className:tr("text-lg leading-none font-semibold",r),...e})}function JX({className:r,...e}){return f.jsx(Cue,{"data-slot":"dialog-description",className:tr("text-muted-foreground text-sm",r),...e})}function jpe({device:r,deviceType:e,isOpen:t,onClose:n}){if(!r)return null;const a=q0();W0();const i=nN(),s=aN(),o=h=>new Date(h).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=h=>{const d=Math.floor(h/36e5),A=Math.floor(h%(1e3*60*60)/(1e3*60));return`${d}h ${A}m`},c=()=>{const h=a.isConnected&&a.currentDeviceId===r.id,d=h?"Connected":"Registered";return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Device Info"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Device Name"}),f.jsx("p",{className:"text-foreground",children:r.nickname||r.name})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Device ID"}),f.jsx("p",{className:"text-foreground font-mono text-sm",children:r.id})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Connection Status"}),f.jsx(Gt,{className:h?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100",children:d})]}),h&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Connection Duration"}),f.jsx("p",{className:"text-foreground",children:(s==null?void 0:s.connectionDuration)||"N/A"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Battery Level"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(fA,{className:"w-4 h-4"}),f.jsxs("span",{className:"text-foreground",children:[(s==null?void 0:s.batteryLevel)||0,"%"]})]})]})]})]})]})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Registration Information"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Registered Date"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(j0,{className:"w-4 h-4"}),f.jsx("span",{className:"text-foreground",children:o(r.registeredAt)})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Connected"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Co,{className:"w-4 h-4"}),f.jsx("span",{className:"text-foreground",children:r.lastConnectedAt?o(r.lastConnectedAt):"Never"})]})]})]})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Usage Statistics"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsx("div",{className:"text-2xl font-bold text-foreground",children:l(r.totalUsageDuration||0)}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Usage Duration"})]}),f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsx("div",{className:"text-2xl font-bold text-foreground",children:r.connectionCount||0}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Usage Time"})]})]})]})]})},u=()=>{var h,d,A,g,p,v,m;return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Device Info"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Device Name"}),f.jsx("p",{className:"text-foreground",children:(i==null?void 0:i.device.name)||a.deviceName})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Device ID"}),f.jsx("p",{className:"text-foreground font-mono text-sm",children:(i==null?void 0:i.device.id)||a.currentDeviceId})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Connection Start Time"}),f.jsx("p",{className:"text-foreground",children:i!=null&&i.connectionStartTime?new Date(i.connectionStartTime).toLocaleTimeString():"N/A"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Connection Status"}),f.jsx(Gt,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",children:"Connected"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Connection Duration"}),f.jsx("p",{className:"text-foreground",children:(s==null?void 0:s.connectionDuration)||"N/A"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Battery Level"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(fA,{className:"w-4 h-4"}),f.jsxs("span",{className:"text-foreground",children:[(s==null?void 0:s.batteryLevel)||a.batteryLevel,"%"]})]})]})]})]})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Sampling Rates"}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsxs("div",{className:"text-lg font-bold text-foreground",children:[((h=s==null?void 0:s.samplingRates)==null?void 0:h.eeg)||0,"Hz"]}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"EEG"})]}),f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsxs("div",{className:"text-lg font-bold text-foreground",children:[((d=s==null?void 0:s.samplingRates)==null?void 0:d.ppg)||0,"Hz"]}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"PPG"})]}),f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsxs("div",{className:"text-lg font-bold text-foreground",children:[((A=s==null?void 0:s.samplingRates)==null?void 0:A.acc)||0,"Hz"]}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"ACC"})]})]})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Signal Quality"}),f.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsxs("div",{className:"text-lg font-bold text-foreground",children:[((g=s==null?void 0:s.signalQuality)==null?void 0:g.eeg)||0,"%"]}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"EEG"})]}),f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsxs("div",{className:"text-lg font-bold text-foreground",children:[((p=s==null?void 0:s.signalQuality)==null?void 0:p.ppg)||0,"%"]}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"PPG"})]}),f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsxs("div",{className:"text-lg font-bold text-foreground",children:[((v=s==null?void 0:s.signalQuality)==null?void 0:v.acc)||0,"%"]}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"ACC"})]}),f.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[f.jsxs("div",{className:"text-lg font-bold text-foreground",children:[((m=s==null?void 0:s.signalQuality)==null?void 0:m.overall)||0,"%"]}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"Overall"})]})]})]})]})};return f.jsx(oN,{open:t,onOpenChange:n,children:f.jsxs(lN,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[f.jsx(cN,{children:f.jsxs(uN,{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-muted rounded-lg flex items-center justify-center",children:f.jsx(tg,{className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("div",{className:"text-lg font-semibold",children:r.name}),f.jsxs("div",{className:"text-sm text-muted-foreground",children:[e==="connected"?"Connected Device":"Registered Device"," Details"]})]})]})}),f.jsx("div",{className:"mt-6",children:e==="registered"?c():u()}),f.jsx("div",{className:"flex justify-end pt-4 border-t",children:f.jsx(At,{variant:"outline",onClick:n,children:"Close"})})]})})}function sC(r,[e,t]){return Math.min(t,Math.max(e,r))}var eZ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ope="VisuallyHidden",tZ=K.forwardRef((r,e)=>f.jsx(_n.span,{...r,ref:e,style:{...eZ,...r.style}}));tZ.displayName=Ope;var Upe=tZ,Hpe=[" ","Enter","ArrowUp","ArrowDown"],Qpe=[" ","Enter"],gp="Select",[hN,dN,zpe]=mW(gp),[Y0,cKe]=F0(gp,[zpe,LB]),AN=LB(),[Gpe,tf]=Y0(gp),[Vpe,$pe]=Y0(gp),rZ=r=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:d,required:A,form:g}=r,p=AN(e),[v,m]=K.useState(null),[y,x]=K.useState(null),[b,S]=K.useState(!1),_=lP(c),[C,w]=n0({prop:n,defaultProp:a??!1,onChange:i,caller:gp}),[B,D]=n0({prop:s,defaultProp:o,onChange:l,caller:gp}),T=K.useRef(null),E=v?g||!!v.closest("form"):!0,[R,M]=K.useState(new Set),k=Array.from(R).map(O=>O.props.value).join(";");return f.jsx(bW,{...p,children:f.jsxs(Gpe,{required:A,scope:e,trigger:v,onTriggerChange:m,valueNode:y,onValueNodeChange:x,valueNodeHasChildren:b,onValueNodeHasChildrenChange:S,contentId:nw(),value:B,onValueChange:D,open:C,onOpenChange:w,dir:_,triggerPointerDownPosRef:T,disabled:d,children:[f.jsx(hN.Provider,{scope:e,children:f.jsx(Vpe,{scope:r.__scopeSelect,onNativeOptionAdd:K.useCallback(O=>{M(Q=>new Set(Q).add(O))},[]),onNativeOptionRemove:K.useCallback(O=>{M(Q=>{const H=new Set(Q);return H.delete(O),H})},[]),children:t})}),E?f.jsxs(BZ,{"aria-hidden":!0,required:A,tabIndex:-1,name:u,autoComplete:h,value:B,onChange:O=>D(O.target.value),disabled:d,form:g,children:[B===void 0?f.jsx("option",{value:""}):null,Array.from(R)]},k):null]})})};rZ.displayName=gp;var nZ="SelectTrigger",aZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:n=!1,...a}=r,i=AN(t),s=tf(nZ,t),o=s.disabled||n,l=Ha(e,s.onTriggerChange),c=dN(t),u=K.useRef("touch"),[h,d,A]=TZ(p=>{const v=c().filter(x=>!x.disabled),m=v.find(x=>x.value===s.value),y=IZ(v,p,m);y!==void 0&&s.onValueChange(y.value)}),g=p=>{o||(s.onOpenChange(!0),A()),p&&(s.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return f.jsx(vW,{asChild:!0,...i,children:f.jsx(_n.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":NZ(s.value)?"":void 0,...a,ref:l,onClick:Yr(a.onClick,p=>{p.currentTarget.focus(),u.current!=="mouse"&&g(p)}),onPointerDown:Yr(a.onPointerDown,p=>{u.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:Yr(a.onKeyDown,p=>{const v=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(v&&p.key===" ")&&Hpe.includes(p.key)&&(g(),p.preventDefault())})})})});aZ.displayName=nZ;var iZ="SelectValue",sZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:a,children:i,placeholder:s="",...o}=r,l=tf(iZ,t),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,h=Ha(e,l.onValueNodeChange);return PA(()=>{c(u)},[c,u]),f.jsx(_n.span,{...o,ref:h,style:{pointerEvents:"none"},children:NZ(l.value)?f.jsx(f.Fragment,{children:s}):i})});sZ.displayName=iZ;var Kpe="SelectIcon",oZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,children:n,...a}=r;return f.jsx(_n.span,{"aria-hidden":!0,...a,ref:e,children:n||"▼"})});oZ.displayName=Kpe;var Wpe="SelectPortal",lZ=r=>f.jsx(Tue,{asChild:!0,...r});lZ.displayName=Wpe;var pp="SelectContent",cZ=K.forwardRef((r,e)=>{const t=tf(pp,r.__scopeSelect),[n,a]=K.useState();if(PA(()=>{a(new DocumentFragment)},[]),!t.open){const i=n;return i?AP.createPortal(f.jsx(uZ,{scope:r.__scopeSelect,children:f.jsx(hN.Slot,{scope:r.__scopeSelect,children:f.jsx("div",{children:r.children})})}),i):null}return f.jsx(hZ,{...r,ref:e})});cZ.displayName=pp;var kl=10,[uZ,rf]=Y0(pp),qpe="SelectContentImpl",Ype=Rue("SelectContent.RemoveScroll"),hZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:d,collisionPadding:A,sticky:g,hideWhenDetached:p,avoidCollisions:v,...m}=r,y=tf(pp,t),[x,b]=K.useState(null),[S,_]=K.useState(null),C=Ha(e,he=>b(he)),[w,B]=K.useState(null),[D,T]=K.useState(null),E=dN(t),[R,M]=K.useState(!1),k=K.useRef(!1);K.useEffect(()=>{if(x)return Eue(x)},[x]),Due();const O=K.useCallback(he=>{const[fe,...q]=E().map(we=>we.ref.current),[ge]=q.slice(-1),me=document.activeElement;for(const we of he)if(we===me||(we==null||we.scrollIntoView({block:"nearest"}),we===fe&&S&&(S.scrollTop=0),we===ge&&S&&(S.scrollTop=S.scrollHeight),we==null||we.focus(),document.activeElement!==me))return},[E,S]),Q=K.useCallback(()=>O([w,x]),[O,w,x]);K.useEffect(()=>{R&&Q()},[R,Q]);const{onOpenChange:H,triggerPointerDownPosRef:W}=y;K.useEffect(()=>{if(x){let he={x:0,y:0};const fe=ge=>{var me,we;he={x:Math.abs(Math.round(ge.pageX)-(((me=W.current)==null?void 0:me.x)??0)),y:Math.abs(Math.round(ge.pageY)-(((we=W.current)==null?void 0:we.y)??0))}},q=ge=>{he.x<=10&&he.y<=10?ge.preventDefault():x.contains(ge.target)||H(!1),document.removeEventListener("pointermove",fe),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",q,{capture:!0})}}},[x,H,W]),K.useEffect(()=>{const he=()=>H(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[H]);const[te,ee]=TZ(he=>{const fe=E().filter(me=>!me.disabled),q=fe.find(me=>me.ref.current===document.activeElement),ge=IZ(fe,he,q);ge&&setTimeout(()=>ge.ref.current.focus())}),j=K.useCallback((he,fe,q)=>{const ge=!k.current&&!q;(y.value!==void 0&&y.value===fe||ge)&&(B(he),ge&&(k.current=!0))},[y.value]),G=K.useCallback(()=>x==null?void 0:x.focus(),[x]),Y=K.useCallback((he,fe,q)=>{const ge=!k.current&&!q;(y.value!==void 0&&y.value===fe||ge)&&T(he)},[y.value]),Z=n==="popper"?A3:dZ,de=Z===A3?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:d,collisionPadding:A,sticky:g,hideWhenDetached:p,avoidCollisions:v}:{};return f.jsx(uZ,{scope:t,content:x,viewport:S,onViewportChange:_,itemRefCallback:j,selectedItem:w,onItemLeave:G,itemTextRefCallback:Y,focusSelectedItem:Q,selectedItemText:D,position:n,isPositioned:R,searchRef:te,children:f.jsx(Mue,{as:Ype,allowPinchZoom:!0,children:f.jsx(Lue,{asChild:!0,trapped:y.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:Yr(a,he=>{var fe;(fe=y.trigger)==null||fe.focus({preventScroll:!0}),he.preventDefault()}),children:f.jsx(yW,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:f.jsx(Z,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:he=>he.preventDefault(),...m,...de,onPlaced:()=>M(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:Yr(m.onKeyDown,he=>{const fe=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!fe&&he.key.length===1&&ee(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let ge=E().filter(me=>!me.disabled).map(me=>me.ref.current);if(["ArrowUp","End"].includes(he.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const me=he.target,we=ge.indexOf(me);ge=ge.slice(we+1)}setTimeout(()=>O(ge)),he.preventDefault()}})})})})})})});hZ.displayName=qpe;var Xpe="SelectItemAlignedPosition",dZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:n,...a}=r,i=tf(pp,t),s=rf(pp,t),[o,l]=K.useState(null),[c,u]=K.useState(null),h=Ha(e,C=>u(C)),d=dN(t),A=K.useRef(!1),g=K.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:m,focusSelectedItem:y}=s,x=K.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&c&&p&&v&&m){const C=i.trigger.getBoundingClientRect(),w=c.getBoundingClientRect(),B=i.valueNode.getBoundingClientRect(),D=m.getBoundingClientRect();if(i.dir!=="rtl"){const me=D.left-w.left,we=B.left-me,Me=C.left-we,z=C.width+Me,pe=Math.max(z,w.width),J=window.innerWidth-kl,oe=sC(we,[kl,Math.max(kl,J-pe)]);o.style.minWidth=z+"px",o.style.left=oe+"px"}else{const me=w.right-D.right,we=window.innerWidth-B.right-me,Me=window.innerWidth-C.right-we,z=C.width+Me,pe=Math.max(z,w.width),J=window.innerWidth-kl,oe=sC(we,[kl,Math.max(kl,J-pe)]);o.style.minWidth=z+"px",o.style.right=oe+"px"}const T=d(),E=window.innerHeight-kl*2,R=p.scrollHeight,M=window.getComputedStyle(c),k=parseInt(M.borderTopWidth,10),O=parseInt(M.paddingTop,10),Q=parseInt(M.borderBottomWidth,10),H=parseInt(M.paddingBottom,10),W=k+O+R+H+Q,te=Math.min(v.offsetHeight*5,W),ee=window.getComputedStyle(p),j=parseInt(ee.paddingTop,10),G=parseInt(ee.paddingBottom,10),Y=C.top+C.height/2-kl,Z=E-Y,de=v.offsetHeight/2,he=v.offsetTop+de,fe=k+O+he,q=W-fe;if(fe<=Y){const me=T.length>0&&v===T[T.length-1].ref.current;o.style.bottom="0px";const we=c.clientHeight-p.offsetTop-p.offsetHeight,Me=Math.max(Z,de+(me?G:0)+we+Q),z=fe+Me;o.style.height=z+"px"}else{const me=T.length>0&&v===T[0].ref.current;o.style.top="0px";const Me=Math.max(Y,k+p.offsetTop+(me?j:0)+de)+q;o.style.height=Me+"px",p.scrollTop=fe-Y+p.offsetTop}o.style.margin=`${kl}px 0`,o.style.minHeight=te+"px",o.style.maxHeight=E+"px",n==null||n(),requestAnimationFrame(()=>A.current=!0)}},[d,i.trigger,i.valueNode,o,c,p,v,m,i.dir,n]);PA(()=>x(),[x]);const[b,S]=K.useState();PA(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const _=K.useCallback(C=>{C&&g.current===!0&&(x(),y==null||y(),g.current=!1)},[x,y]);return f.jsx(Jpe,{scope:t,contentWrapper:o,shouldExpandOnScrollRef:A,onScrollButtonChange:_,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:f.jsx(_n.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});dZ.displayName=Xpe;var Zpe="SelectPopperPosition",A3=K.forwardRef((r,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:a=kl,...i}=r,s=AN(t);return f.jsx(xW,{...s,...i,ref:e,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});A3.displayName=Zpe;var[Jpe,xk]=Y0(pp,{}),f3="SelectViewport",AZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:n,...a}=r,i=rf(f3,t),s=xk(f3,t),o=Ha(e,i.onViewportChange),l=K.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),f.jsx(hN.Slot,{scope:t,children:f.jsx(_n.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Yr(a.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&h){const A=Math.abs(l.current-u.scrollTop);if(A>0){const g=window.innerHeight-kl*2,p=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),m=Math.max(p,v);if(m<g){const y=m+A,x=Math.min(g,y),b=y-x;h.style.height=x+"px",h.style.bottom==="0px"&&(u.scrollTop=b>0?b:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});AZ.displayName=f3;var fZ="SelectGroup",[eme,tme]=Y0(fZ),rme=K.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,a=nw();return f.jsx(eme,{scope:t,id:a,children:f.jsx(_n.div,{role:"group","aria-labelledby":a,...n,ref:e})})});rme.displayName=fZ;var gZ="SelectLabel",pZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,a=tme(gZ,t);return f.jsx(_n.div,{id:a.id,...n,ref:e})});pZ.displayName=gZ;var oC="SelectItem",[nme,mZ]=Y0(oC),vZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,value:n,disabled:a=!1,textValue:i,...s}=r,o=tf(oC,t),l=rf(oC,t),c=o.value===n,[u,h]=K.useState(i??""),[d,A]=K.useState(!1),g=Ha(e,y=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,y,n,a)}),p=nw(),v=K.useRef("touch"),m=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(nme,{scope:t,value:n,disabled:a,textId:p,isSelected:c,onItemTextChange:K.useCallback(y=>{h(x=>x||((y==null?void 0:y.textContent)??"").trim())},[]),children:f.jsx(hN.ItemSlot,{scope:t,value:n,disabled:a,textValue:u,children:f.jsx(_n.div,{role:"option","aria-labelledby":p,"data-highlighted":d?"":void 0,"aria-selected":c&&d,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:g,onFocus:Yr(s.onFocus,()=>A(!0)),onBlur:Yr(s.onBlur,()=>A(!1)),onClick:Yr(s.onClick,()=>{v.current!=="mouse"&&m()}),onPointerUp:Yr(s.onPointerUp,()=>{v.current==="mouse"&&m()}),onPointerDown:Yr(s.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:Yr(s.onPointerMove,y=>{var x;v.current=y.pointerType,a?(x=l.onItemLeave)==null||x.call(l):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Yr(s.onPointerLeave,y=>{var x;y.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:Yr(s.onKeyDown,y=>{var b;((b=l.searchRef)==null?void 0:b.current)!==""&&y.key===" "||(Qpe.includes(y.key)&&m(),y.key===" "&&y.preventDefault())})})})})});vZ.displayName=oC;var Ux="SelectItemText",yZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:a,...i}=r,s=tf(Ux,t),o=rf(Ux,t),l=mZ(Ux,t),c=$pe(Ux,t),[u,h]=K.useState(null),d=Ha(e,m=>h(m),l.onItemTextChange,m=>{var y;return(y=o.itemTextRefCallback)==null?void 0:y.call(o,m,l.value,l.disabled)}),A=u==null?void 0:u.textContent,g=K.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:A},l.value),[l.disabled,l.value,A]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=c;return PA(()=>(p(g),()=>v(g)),[p,v,g]),f.jsxs(f.Fragment,{children:[f.jsx(_n.span,{id:l.textId,...i,ref:d}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?AP.createPortal(i.children,s.valueNode):null]})});yZ.displayName=Ux;var xZ="SelectItemIndicator",bZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return mZ(xZ,t).isSelected?f.jsx(_n.span,{"aria-hidden":!0,...n,ref:e}):null});bZ.displayName=xZ;var g3="SelectScrollUpButton",wZ=K.forwardRef((r,e)=>{const t=rf(g3,r.__scopeSelect),n=xk(g3,r.__scopeSelect),[a,i]=K.useState(!1),s=Ha(e,n.onScrollButtonChange);return PA(()=>{if(t.viewport&&t.isPositioned){let o=function(){const c=l.scrollTop>0;i(c)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),a?f.jsx(_Z,{...r,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});wZ.displayName=g3;var p3="SelectScrollDownButton",SZ=K.forwardRef((r,e)=>{const t=rf(p3,r.__scopeSelect),n=xk(p3,r.__scopeSelect),[a,i]=K.useState(!1),s=Ha(e,n.onScrollButtonChange);return PA(()=>{if(t.viewport&&t.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),a?f.jsx(_Z,{...r,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});SZ.displayName=p3;var _Z=K.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:n,...a}=r,i=rf("SelectScrollButton",t),s=K.useRef(null),o=dN(t),l=K.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return K.useEffect(()=>()=>l(),[l]),PA(()=>{var u;const c=o().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),f.jsx(_n.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:Yr(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(n,50))}),onPointerMove:Yr(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),s.current===null&&(s.current=window.setInterval(n,50))}),onPointerLeave:Yr(a.onPointerLeave,()=>{l()})})}),ame="SelectSeparator",CZ=K.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return f.jsx(_n.div,{"aria-hidden":!0,...n,ref:e})});CZ.displayName=ame;var m3="SelectArrow",ime=K.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,a=AN(t),i=tf(m3,t),s=rf(m3,t);return i.open&&s.position==="popper"?f.jsx(wW,{...a,...n,ref:e}):null});ime.displayName=m3;var sme="SelectBubbleInput",BZ=K.forwardRef(({__scopeSelect:r,value:e,...t},n)=>{const a=K.useRef(null),i=Ha(n,a),s=yk(e);return K.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&u){const h=new Event("change",{bubbles:!0});u.call(o,e),o.dispatchEvent(h)}},[s,e]),f.jsx(_n.select,{...t,style:{...eZ,...t.style},ref:i,defaultValue:e})});BZ.displayName=sme;function NZ(r){return r===""||r===void 0}function TZ(r){const e=Iue(r),t=K.useRef(""),n=K.useRef(0),a=K.useCallback(s=>{const o=t.current+s;e(o),function l(c){t.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),i=K.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return K.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,a,i]}function IZ(r,e,t){const a=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=t?r.indexOf(t):-1;let s=ome(r,Math.max(i,0));a.length===1&&(s=s.filter(c=>c!==t));const l=s.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==t?l:void 0}function ome(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var lme=rZ,EZ=aZ,cme=sZ,ume=oZ,hme=lZ,DZ=cZ,dme=AZ,MZ=pZ,RZ=vZ,Ame=yZ,fme=bZ,LZ=wZ,PZ=SZ,kZ=CZ;const Wg=lme,qg=cme,CA=K.forwardRef(({className:r,children:e,...t},n)=>f.jsxs(EZ,{ref:n,className:tr("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-neutral-700 px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...t,children:[e,f.jsx(ume,{asChild:!0,children:f.jsx(Ph,{className:"h-4 w-4 opacity-50"})})]}));CA.displayName=EZ.displayName;const FZ=K.forwardRef(({className:r,...e},t)=>f.jsx(LZ,{ref:t,className:tr("flex cursor-default items-center justify-center py-1",r),...e,children:f.jsx(Ep,{className:"h-4 w-4"})}));FZ.displayName=LZ.displayName;const jZ=K.forwardRef(({className:r,...e},t)=>f.jsx(PZ,{ref:t,className:tr("flex cursor-default items-center justify-center py-1",r),...e,children:f.jsx(Ph,{className:"h-4 w-4"})}));jZ.displayName=PZ.displayName;const BA=K.forwardRef(({className:r,children:e,position:t="popper",...n},a)=>f.jsx(hme,{children:f.jsxs(DZ,{ref:a,className:tr("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-neutral-700 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...n,children:[f.jsx(FZ,{}),f.jsx(dme,{className:tr("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),f.jsx(jZ,{})]})}));BA.displayName=DZ.displayName;const gme=K.forwardRef(({className:r,...e},t)=>f.jsx(MZ,{ref:t,className:tr("px-2 py-1.5 text-sm font-semibold",r),...e}));gme.displayName=MZ.displayName;const Jn=K.forwardRef(({className:r,children:e,...t},n)=>f.jsxs(RZ,{ref:n,className:tr("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-neutral-600 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[f.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(fme,{children:f.jsx(AW,{className:"h-4 w-4"})})}),f.jsx(Ame,{children:e})]}));Jn.displayName=RZ.displayName;const pme=K.forwardRef(({className:r,...e},t)=>f.jsx(kZ,{ref:t,className:tr("-mx-1 my-1 h-px bg-muted",r),...e}));pme.displayName=kZ.displayName;var OZ=["PageUp","PageDown"],UZ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],HZ={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},X0="Slider",[v3,mme,vme]=mW(X0),[QZ,uKe]=F0(X0,[vme]),[yme,fN]=QZ(X0),zZ=K.forwardRef((r,e)=>{const{name:t,min:n=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[n],value:u,onValueChange:h=()=>{},onValueCommit:d=()=>{},inverted:A=!1,form:g,...p}=r,v=K.useRef(new Set),m=K.useRef(0),x=s==="horizontal"?xme:bme,[b=[],S]=n0({prop:u,defaultProp:c,onChange:T=>{var R;(R=[...v.current][m.current])==null||R.focus(),h(T)}}),_=K.useRef(b);function C(T){const E=Bme(b,T);D(T,E)}function w(T){D(T,m.current)}function B(){const T=_.current[m.current];b[m.current]!==T&&d(b)}function D(T,E,{commit:R}={commit:!1}){const M=Eme(i),k=Dme(Math.round((T-n)/i)*i+n,M),O=sC(k,[n,a]);S((Q=[])=>{const H=_me(Q,O,E);if(Ime(H,l*i)){m.current=H.indexOf(O);const W=String(H)!==String(Q);return W&&R&&d(H),W?H:Q}else return Q})}return f.jsx(yme,{scope:r.__scopeSlider,name:t,disabled:o,min:n,max:a,valueIndexToChangeRef:m,thumbs:v.current,values:b,orientation:s,form:g,children:f.jsx(v3.Provider,{scope:r.__scopeSlider,children:f.jsx(v3.Slot,{scope:r.__scopeSlider,children:f.jsx(x,{"aria-disabled":o,"data-disabled":o?"":void 0,...p,ref:e,onPointerDown:Yr(p.onPointerDown,()=>{o||(_.current=b)}),min:n,max:a,inverted:A,onSlideStart:o?void 0:C,onSlideMove:o?void 0:w,onSlideEnd:o?void 0:B,onHomeKeyDown:()=>!o&&D(n,0,{commit:!0}),onEndKeyDown:()=>!o&&D(a,b.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:E})=>{if(!o){const k=OZ.includes(T.key)||T.shiftKey&&UZ.includes(T.key)?10:1,O=m.current,Q=b[O],H=i*k*E;D(Q+H,O,{commit:!0})}}})})})})});zZ.displayName=X0;var[GZ,VZ]=QZ(X0,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xme=K.forwardRef((r,e)=>{const{min:t,max:n,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=r,[h,d]=K.useState(null),A=Ha(e,x=>d(x)),g=K.useRef(void 0),p=lP(a),v=p==="ltr",m=v&&!i||!v&&i;function y(x){const b=g.current||h.getBoundingClientRect(),S=[0,b.width],C=bk(S,m?[t,n]:[n,t]);return g.current=b,C(x-b.left)}return f.jsx(GZ,{scope:r.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width",children:f.jsx($Z,{dir:p,"data-orientation":"horizontal",...u,ref:A,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const b=y(x.clientX);s==null||s(b)},onSlideMove:x=>{const b=y(x.clientX);o==null||o(b)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:x=>{const S=HZ[m?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:S?-1:1})}})})}),bme=K.forwardRef((r,e)=>{const{min:t,max:n,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...c}=r,u=K.useRef(null),h=Ha(e,u),d=K.useRef(void 0),A=!a;function g(p){const v=d.current||u.current.getBoundingClientRect(),m=[0,v.height],x=bk(m,A?[n,t]:[t,n]);return d.current=v,x(p-v.top)}return f.jsx(GZ,{scope:r.__scopeSlider,startEdge:A?"bottom":"top",endEdge:A?"top":"bottom",size:"height",direction:A?1:-1,children:f.jsx($Z,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const v=g(p.clientY);i==null||i(v)},onSlideMove:p=>{const v=g(p.clientY);s==null||s(v)},onSlideEnd:()=>{d.current=void 0,o==null||o()},onStepKeyDown:p=>{const m=HZ[A?"from-bottom":"from-top"].includes(p.key);l==null||l({event:p,direction:m?-1:1})}})})}),$Z=K.forwardRef((r,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...c}=r,u=fN(X0,t);return f.jsx(_n.span,{...c,ref:e,onKeyDown:Yr(r.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):OZ.concat(UZ).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:Yr(r.onPointerDown,h=>{const d=h.target;d.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(d)?d.focus():n(h)}),onPointerMove:Yr(r.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Yr(r.onPointerUp,h=>{const d=h.target;d.hasPointerCapture(h.pointerId)&&(d.releasePointerCapture(h.pointerId),i(h))})})}),KZ="SliderTrack",WZ=K.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,a=fN(KZ,t);return f.jsx(_n.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:e})});WZ.displayName=KZ;var y3="SliderRange",qZ=K.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,a=fN(y3,t),i=VZ(y3,t),s=K.useRef(null),o=Ha(e,s),l=a.values.length,c=a.values.map(d=>ZZ(d,a.min,a.max)),u=l>1?Math.min(...c):0,h=100-Math.max(...c);return f.jsx(_n.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:o,style:{...r.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});qZ.displayName=y3;var x3="SliderThumb",YZ=K.forwardRef((r,e)=>{const t=mme(r.__scopeSlider),[n,a]=K.useState(null),i=Ha(e,o=>a(o)),s=K.useMemo(()=>n?t().findIndex(o=>o.ref.current===n):-1,[t,n]);return f.jsx(wme,{...r,ref:i,index:s})}),wme=K.forwardRef((r,e)=>{const{__scopeSlider:t,index:n,name:a,...i}=r,s=fN(x3,t),o=VZ(x3,t),[l,c]=K.useState(null),u=Ha(e,y=>c(y)),h=l?s.form||!!l.closest("form"):!0,d=iW(l),A=s.values[n],g=A===void 0?0:ZZ(A,s.min,s.max),p=Cme(n,s.values.length),v=d==null?void 0:d[o.size],m=v?Nme(v,g,o.direction):0;return K.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${g}% + ${m}px)`},children:[f.jsx(v3.ItemSlot,{scope:r.__scopeSlider,children:f.jsx(_n.span,{role:"slider","aria-label":r["aria-label"]||p,"aria-valuemin":s.min,"aria-valuenow":A,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:u,style:A===void 0?{display:"none"}:r.style,onFocus:Yr(r.onFocus,()=>{s.valueIndexToChangeRef.current=n})})}),h&&f.jsx(XZ,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:A},n)]})});YZ.displayName=x3;var Sme="RadioBubbleInput",XZ=K.forwardRef(({__scopeSlider:r,value:e,...t},n)=>{const a=K.useRef(null),i=Ha(a,n),s=yk(e);return K.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&u){const h=new Event("input",{bubbles:!0});u.call(o,e),o.dispatchEvent(h)}},[s,e]),f.jsx(_n.input,{style:{display:"none"},...t,ref:i,defaultValue:e})});XZ.displayName=Sme;function _me(r=[],e,t){const n=[...r];return n[t]=e,n.sort((a,i)=>a-i)}function ZZ(r,e,t){const i=100/(t-e)*(r-e);return sC(i,[0,100])}function Cme(r,e){return e>2?`Value ${r+1} of ${e}`:e===2?["Minimum","Maximum"][r]:void 0}function Bme(r,e){if(r.length===1)return 0;const t=r.map(a=>Math.abs(a-e)),n=Math.min(...t);return t.indexOf(n)}function Nme(r,e,t){const n=r/2,i=bk([0,50],[0,n]);return(n-i(e)*t)*t}function Tme(r){return r.slice(0,-1).map((e,t)=>r[t+1]-e)}function Ime(r,e){if(e>0){const t=Tme(r);return Math.min(...t)>=e}return!0}function bk(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function Eme(r){return(String(r).split(".")[1]||"").length}function Dme(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}var Mme=zZ,Rme=WZ,Lme=qZ,Pme=YZ;function K2({className:r,defaultValue:e,value:t,min:n=0,max:a=100,...i}){const s=K.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[n,a],[t,e,n,a]);return f.jsxs(Mme,{"data-slot":"slider",defaultValue:e,value:t,min:n,max:a,className:tr("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",r),...i,children:[f.jsx(Rme,{"data-slot":"slider-track",className:tr("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:f.jsx(Lme,{"data-slot":"slider-range",className:tr("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>f.jsx(Pme,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}function kme({open:r,onOpenChange:e,deviceId:t,deviceName:n}){const{updateDeviceStorageSettings:a,resetDeviceStorageSettings:i}=mk(),s=OX(t),[o,l]=K.useState(null),[c,u]=K.useState(!1);K.useEffect(()=>{r&&s&&(l({...s}),u(!1))},[r,s]);const h=(p,v)=>{if(!o)return;const m={...o,[p]:v};l(m),u(!0)},d=()=>{o&&(a(t,o),u(!1),e(!1))},A=()=>{i(t),u(!1),e(!1)},g=()=>{u(!1),e(!1)};return o?f.jsx(oN,{open:r,onOpenChange:e,children:f.jsxs(lN,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[f.jsxs(cN,{children:[f.jsxs(uN,{className:"flex items-center gap-2",children:[f.jsx(go,{className:"w-5 h-5"}),"Storage Settings - ",n]}),f.jsx(JX,{children:"Configure device-specific storage and recording settings"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2 text-lg",children:[f.jsx(Ip,{className:"w-5 h-5"}),"Recording Settings"]}),f.jsx(na,{children:"Basic recording and session configuration"})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-sm font-medium",children:"Auto Record"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically start recording when device connects"})]}),f.jsx(_A,{checked:o.autoRecord,onCheckedChange:p=>h("autoRecord",p)})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium",children:"Default Format"}),f.jsxs(Wg,{value:o.defaultFormat,onValueChange:p=>h("defaultFormat",p),children:[f.jsx(CA,{children:f.jsx(qg,{})}),f.jsxs(BA,{children:[f.jsx(Jn,{value:"jsonl",children:"JSON Lines (.jsonl)"}),f.jsx(Jn,{value:"csv",children:"CSV (.csv)"}),f.jsx(Jn,{value:"binary",children:"Binary (.bin)"})]})]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Default file format for recordings from this device"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium",children:"Session Name Template"}),f.jsx(xo,{value:o.sessionNameTemplate,onChange:p=>h("sessionNameTemplate",p.target.value),placeholder:"{deviceName}_{date}_{time}"}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:["Template for session names. Use ","{deviceName}",", ","{date}",", ","{time}"]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"text-sm font-medium",children:["Max Session Duration: ",o.maxSessionDuration," minutes"]}),f.jsx(K2,{value:[o.maxSessionDuration],onValueChange:p=>h("maxSessionDuration",p[0]),min:5,max:480,step:5,className:"w-full"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum recording duration before automatic stop"})]})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2 text-lg",children:[f.jsx(r0,{className:"w-5 h-5"}),"Storage Settings"]}),f.jsx(na,{children:"File storage and compression configuration"})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-sm font-medium",children:"Enable Compression"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Compress data files to save storage space"})]}),f.jsx(_A,{checked:o.compressionEnabled,onCheckedChange:p=>h("compressionEnabled",p)})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium",children:"Save Location"}),f.jsx(xo,{value:o.saveLocation,onChange:p=>h("saveLocation",p.target.value),placeholder:"sessions"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Relative path within storage directory for this device"})]})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2 text-lg",children:[f.jsx(mh,{className:"w-5 h-5"}),"Performance Settings"]}),f.jsx(na,{children:"Memory and performance optimization settings"})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"text-sm font-medium",children:["Auto Save Interval: ",o.autoSaveInterval," seconds"]}),f.jsx(K2,{value:[o.autoSaveInterval],onValueChange:p=>h("autoSaveInterval",p[0]),min:1,max:60,step:1,className:"w-full"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"How often to save data during recording"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"text-sm font-medium",children:["Memory Threshold: ",o.memoryThreshold," MB"]}),f.jsx(K2,{value:[o.memoryThreshold],onValueChange:p=>h("memoryThreshold",p[0]),min:10,max:200,step:10,className:"w-full"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Memory usage limit before triggering cleanup"})]})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2 text-lg",children:[f.jsx(da,{className:"w-5 h-5"}),"Quality Settings"]}),f.jsx(na,{children:"Signal quality monitoring and control"})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"text-sm font-medium",children:["Minimum Signal Quality: ",o.minSignalQuality,"%"]}),f.jsx(K2,{value:[o.minSignalQuality],onValueChange:p=>h("minSignalQuality",p[0]),min:0,max:100,step:5,className:"w-full"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum acceptable signal quality threshold"})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-sm font-medium",children:"Pause on Low Quality"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically pause recording when signal quality drops below threshold"})]}),f.jsx(_A,{checked:o.pauseOnLowQuality,onCheckedChange:p=>h("pauseOnLowQuality",p)})]})]})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-lg",children:[f.jsx(Hs,{className:"w-5 h-5"}),"Settings Summary"]})}),f.jsx(ct,{children:f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Auto Record:"}),f.jsx(Gt,{variant:o.autoRecord?"default":"secondary",children:o.autoRecord?"Enabled":"Disabled"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Format:"}),f.jsx(Gt,{variant:"outline",children:o.defaultFormat.toUpperCase()})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Compression:"}),f.jsx(Gt,{variant:o.compressionEnabled?"default":"secondary",children:o.compressionEnabled?"Enabled":"Disabled"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Max Duration:"}),f.jsxs(Gt,{variant:"outline",children:[o.maxSessionDuration,"min"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Save Interval:"}),f.jsxs(Gt,{variant:"outline",children:[o.autoSaveInterval,"s"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Memory Limit:"}),f.jsxs(Gt,{variant:"outline",children:[o.memoryThreshold,"MB"]})]})]})]})})]})]}),f.jsx(Kg,{}),f.jsxs("div",{className:"flex justify-between",children:[f.jsxs(At,{variant:"outline",onClick:A,className:"flex items-center gap-2",children:[f.jsx(Pue,{className:"w-4 h-4"}),"Reset to Defaults"]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(At,{variant:"outline",onClick:g,className:"flex items-center gap-2",children:[f.jsx(cP,{className:"w-4 h-4"}),"Cancel"]}),f.jsxs(At,{onClick:d,disabled:!c,className:"flex items-center gap-2",children:[f.jsx(Hs,{className:"w-4 h-4"}),"Save Changes"]})]})]})]})}):null}const Fme=ck("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function gN({className:r,variant:e,...t}){return f.jsx("div",{"data-slot":"alert",role:"alert",className:tr(Fme({variant:e}),r),...t})}function pN({className:r,...e}){return f.jsx("div",{"data-slot":"alert-description",className:tr("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...e})}const jme=()=>{const[r,e]=K.useState(null),[t,n]=K.useState(!1);K.useEffect(()=>{e((()=>{const o=navigator.userAgent,l=/iPad|iPhone|iPod/.test(o),c=/Android/.test(o),u=l||c||/Mobile/.test(o),h="bluetooth"in navigator,d=window.isSecureContext;let A="Unknown";return o.includes("Chrome")?A="Chrome":o.includes("Safari")?A="Safari":o.includes("Firefox")?A="Firefox":o.includes("Edge")&&(A="Edge"),{isSupported:h&&d&&!l,browserName:A,platform:l?"iOS":c?"Android":"Desktop",isIOS:l,isAndroid:c,isMobile:u,hasWebBluetooth:h,isSecureContext:d}})())},[]);const a=()=>{window.open("https://apps.apple.com/app/bluefy-web-ble-browser/id1492822055","_blank")},i=()=>{window.open("https://apps.apple.com/app/webble/id1193531073","_blank")};return r?f.jsxs("div",{className:"max-w-2xl mx-auto p-4 space-y-4",children:[f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2",children:[r.isSupported?f.jsx(Hs,{className:"w-5 h-5 text-green-500"}):f.jsx(da,{className:"w-5 h-5 text-red-500"}),"브라우저 호환성 상태"]}),f.jsxs(na,{children:["현재 브라우저: ",r.browserName," on ",r.platform]})]}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Gt,{variant:r.hasWebBluetooth?"default":"destructive",children:r.hasWebBluetooth?"지원":"미지원"}),f.jsx("span",{className:"text-sm",children:"Web Bluetooth API"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Gt,{variant:r.isSecureContext?"default":"destructive",children:r.isSecureContext?"안전":"불안전"}),f.jsx("span",{className:"text-sm",children:"보안 컨텍스트 (HTTPS)"})]})]}),!r.isSupported&&f.jsxs(gN,{children:[f.jsx(da,{className:"h-4 w-4"}),f.jsx(pN,{children:"현재 브라우저에서는 LINK BAND 디바이스 연결을 지원하지 않습니다."})]})]})]}),r.isIOS&&f.jsxs(Ye,{className:"border-blue-200 bg-blue-50",children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2 text-blue-800",children:[f.jsx(kue,{className:"w-5 h-5"}),"iOS 사용자 안내"]}),f.jsx(na,{className:"text-blue-700",children:"iOS Safari는 Web Bluetooth를 지원하지 않지만, 대안이 있습니다!"})]}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"p-3 bg-white rounded-lg border border-blue-200",children:[f.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"✅ 권장 방법: Bluefy 브라우저"}),f.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Web Bluetooth를 지원하는 전용 iOS 브라우저입니다."}),f.jsxs(At,{onClick:a,className:"w-full bg-blue-600 hover:bg-blue-700",children:[f.jsx(rO,{className:"w-4 h-4 mr-2"}),"App Store에서 Bluefy 다운로드"]})]}),f.jsxs("div",{className:"p-3 bg-white rounded-lg border border-blue-200",children:[f.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🔧 대안: WebBLE 브라우저"}),f.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"또 다른 Web Bluetooth 지원 브라우저입니다."}),f.jsxs(At,{onClick:i,variant:"outline",className:"w-full border-blue-300 text-blue-700 hover:bg-blue-100",children:[f.jsx(rO,{className:"w-4 h-4 mr-2"}),"WebBLE 브라우저 다운로드"]})]})]}),f.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[f.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⚡ 사용 방법"}),f.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1",children:[f.jsx("li",{children:"1. 위 앱 중 하나를 다운로드"}),f.jsxs("li",{children:["2. 앱에서 ",f.jsx("code",{className:"bg-yellow-200 px-1 rounded",children:"sdk.linkband.store"})," 접속"]}),f.jsx("li",{children:"3. LINK BAND 디바이스 연결 및 사용"})]})]})]})]}),r.isAndroid&&f.jsxs(Ye,{className:"border-green-200 bg-green-50",children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2 text-green-800",children:[f.jsx(uP,{className:"w-5 h-5"}),"Android 사용자 안내"]}),f.jsx(na,{className:"text-green-700",children:r.isSupported?"현재 브라우저에서 LINK BAND 연결이 가능합니다!":"Chrome 또는 Edge 브라우저를 사용해주세요."})]}),f.jsx(ct,{children:r.isSupported?f.jsxs("div",{className:"p-3 bg-white rounded-lg border border-green-200",children:[f.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"✅ 연결 준비 완료"}),f.jsx("p",{className:"text-sm text-green-700",children:"LINK BAND 페이지로 이동하여 디바이스를 연결하세요."})]}):f.jsxs("div",{className:"p-3 bg-white rounded-lg border border-green-200",children:[f.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"🔧 권장 브라우저"}),f.jsx("p",{className:"text-sm text-green-700 mb-3",children:"Chrome 또는 Edge 브라우저에서 이 사이트를 열어주세요."}),f.jsx("div",{className:"space-y-2",children:f.jsxs(At,{onClick:()=>window.open("https://play.google.com/store/apps/details?id=com.android.chrome","_blank"),variant:"outline",className:"w-full border-green-300 text-green-700 hover:bg-green-100",children:[f.jsx(nO,{className:"w-4 h-4 mr-2"}),"Chrome 브라우저 다운로드"]})})]})})]}),!r.isMobile&&f.jsxs(Ye,{className:"border-purple-200 bg-purple-50",children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2 text-purple-800",children:[f.jsx(nO,{className:"w-5 h-5"}),"데스크톱 사용자 안내"]}),f.jsx(na,{className:"text-purple-700",children:r.isSupported?"현재 브라우저에서 LINK BAND 연결이 가능합니다!":"Chrome, Edge, 또는 Opera 브라우저를 사용해주세요."})]}),f.jsx(ct,{children:r.isSupported?f.jsxs("div",{className:"p-3 bg-white rounded-lg border border-purple-200",children:[f.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"✅ 연결 준비 완료"}),f.jsx("p",{className:"text-sm text-purple-700",children:"LINK BAND 페이지로 이동하여 디바이스를 연결하세요."})]}):f.jsxs("div",{className:"p-3 bg-white rounded-lg border border-purple-200",children:[f.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"🔧 지원 브라우저"}),f.jsx("p",{className:"text-sm text-purple-700 mb-3",children:"다음 브라우저에서 Web Bluetooth를 지원합니다:"}),f.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[f.jsx("li",{children:"• Chrome 56+"}),f.jsx("li",{children:"• Edge 79+"}),f.jsx("li",{children:"• Opera 43+"})]})]})})]}),f.jsx("div",{className:"text-center",children:f.jsx(At,{variant:"ghost",onClick:()=>n(!t),className:"text-sm",children:t?"상세 정보 숨기기":"상세 정보 보기"})}),t&&f.jsxs(Ye,{className:"border-gray-200 bg-gray-50",children:[f.jsx(wt,{children:f.jsx(St,{className:"text-gray-800",children:"기술 세부사항"})}),f.jsx(ct,{children:f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold",children:"User Agent:"}),f.jsx("p",{className:"text-gray-600 break-all",children:navigator.userAgent})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold",children:"Platform:"}),f.jsx("p",{className:"text-gray-600",children:navigator.platform})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold",children:"Language:"}),f.jsx("p",{className:"text-gray-600",children:navigator.language})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold",children:"Online:"}),f.jsx("p",{className:"text-gray-600",children:navigator.onLine?"Yes":"No"})]})]})})]})]}):null};function Ome(){var Ee,ze,Fe,Ge,at,ut,gt;const[r,e]=K.useState(null),{addNotification:t}=xw(),n=W0(),a=q0();ww();const i=Ege(),s=vk(),o=kX(),l=Ak();nN(),aN(),gk(),pk();const c=mk(),[u,h]=K.useState(null),[d,A]=K.useState(!1),[g,p]=K.useState("registered"),[v,m]=K.useState(!1),[y,x]=K.useState(null),[b,S]=K.useState(""),[_,C]=K.useState(!1),[w,B]=K.useState(null),[D,T]=K.useState(""),[E,R]=K.useState(!1),[M,k]=K.useState(null),[O,Q]=K.useState(()=>{const Le=localStorage.getItem("autoRegistrationEnabled");return Le?JSON.parse(Le):!0}),[H,W]=K.useState(()=>{const Le=localStorage.getItem("autoConnectionEnabled");return Le?JSON.parse(Le):!0}),te=o,ee=l,j=K.useCallback(async()=>{if(!(n.systemStatus==="initializing"||n.isInitialized))try{console.log("Initializing system..."),await s.initializeSystem(),console.log("System initialized successfully")}catch(Le){console.error("System initialization failed:",Le),t({type:"error",title:"System Initialization Failed",message:Le instanceof Error?Le.message:"Failed to initialize system"})}},[n.systemStatus,n.isInitialized,s.initializeSystem,t]);K.useEffect(()=>{!n.isInitialized&&n.systemStatus==="idle"&&j()},[n.isInitialized,n.systemStatus,j]),K.useEffect(()=>{localStorage.setItem("autoRegistrationEnabled",JSON.stringify(O))},[O]),K.useEffect(()=>{localStorage.setItem("autoConnectionEnabled",JSON.stringify(H))},[H]);const[G,Y]=K.useState(new Set),[Z,de]=K.useState(null),[he,fe]=K.useState(!1);K.useEffect(()=>{const Le=async()=>{if(!H||a.isConnected||n.systemStatus==="initializing"||n.systemStatus==="error"||l.length===0||Z!==null)return;const Qe=l.filter(it=>!G.has(it.id));if(Qe.length===0)return;const ht=Qe[0];try{console.log("Auto-connecting to device:",ht.name),Y(it=>new Set(it).add(ht.id)),await we(ht.id)}catch(it){console.error("Auto-connect failed for device:",ht.name,it)}};if(l.length>0&&H){const Qe=setTimeout(Le,100);return()=>clearTimeout(Qe)}},[l,a.isConnected,n.systemStatus,H,Z]),K.useEffect(()=>{a.isConnected||Y(new Set)},[a.isConnected]),K.useEffect(()=>{e((()=>{const Qe=navigator.userAgent,ht=/iPad|iPhone|iPod/.test(Qe),it=/Android/.test(Qe),Vt="bluetooth"in navigator,kt=window.isSecureContext;let Bt="Unknown";return Qe.includes("Chrome")?Bt="Chrome":Qe.includes("Safari")?Bt="Safari":Qe.includes("Firefox")?Bt="Firefox":Qe.includes("Edge")&&(Bt="Edge"),{isSupported:Vt&&kt&&!ht,isIOS:ht,isAndroid:it,browserName:Bt,platform:ht?"iOS":it?"Android":"Desktop"}})())},[]);const[q,ge]=K.useState(null);K.useEffect(()=>{let Le;return a.isConnected&&jr.isConnected()?Le=setInterval(async()=>{try{const Qe=await jr.getBatteryLevel(),ht=jr.getBatteryPrediction();ge({batteryLevel:Qe,connectionDuration:jr.getConnectionDuration(),connectionStartTime:jr.getConnectionStartTime(),samplingRates:jr.getCurrentSamplingRates(),batteryPrediction:{mode:ht.mode,timeRemainingFormatted:ht.timeRemainingFormatted,ratePerMinute:ht.ratePerMinute}})}catch(Qe){console.error("Failed to get realtime device info:",Qe)}},1e3):ge(null),()=>{Le&&clearInterval(Le)}},[a.isConnected]);const me=async()=>{if(!navigator.bluetooth){r!=null&&r.isIOS?t({type:"warning",title:"iOS 브라우저 안내",message:"iOS에서는 Bluefy 또는 WebBLE 브라우저를 사용해주세요. App Store에서 다운로드 가능합니다.",autoHide:!1}):t({type:"error",title:"Bluetooth Not Supported",message:"Chrome 또는 Edge 브라우저를 사용해주세요.",autoHide:!1});return}try{await s.scanDevices(),t({type:"success",title:"Scan Complete",message:`Found ${i.availableDevices.length} devices`})}catch(Le){const Qe=Le instanceof Error?Le.message:"Device scan failed";!Qe.includes("cancelled")&&!Qe.includes("취소")&&t({type:"error",title:"Scan Failed",message:Qe})}},we=async Le=>{if(Z===Le){console.log("Connection already in progress for device:",Le);return}if(a.isConnected&&a.currentDeviceId===Le){console.log("Device already connected:",Le);return}try{if(de(Le),n.systemStatus==="initializing"){console.log("Waiting for system initialization...");let it=0;for(;n.systemStatus==="initializing"&&it<5e3;)await new Promise(Vt=>setTimeout(Vt,100)),it+=100;if(n.systemStatus==="initializing")throw new Error("System initialization timeout")}console.log("Connecting to device:",Le),await s.connectDevice(Le);const Qe=c.isDeviceRegistered(Le),ht=l.find(it=>it.id===Le);if(!Qe&&ht)if(O)try{c.registerDevice(ht,ht.name),t({type:"success",title:"Device Auto-Registered",message:`${ht.name}이(가) 자동으로 등록되었습니다.`})}catch(it){console.error("Auto-registration failed:",it),t({type:"error",title:"Auto-Registration Failed",message:it instanceof Error?it.message:"Failed to auto-register device"})}else x(ht),S(ht.name||""),m(!0);t({type:"success",title:"Device Connected",message:`Successfully connected to ${(ht==null?void 0:ht.name)||"device"}`}),console.log("Device connected successfully:",Le)}catch(Qe){console.error("Connection failed:",Qe);const ht=Qe instanceof Error?Qe.message:"Failed to connect to device";throw!ht.includes("cancelled")&&!ht.includes("취소")&&t({type:"error",title:"Connection Failed",message:ht}),Y(it=>{const Vt=new Set(it);return Vt.delete(Le),Vt}),Qe}finally{de(null)}},Me=async()=>{fe(!0);try{await s.disconnectDevice(),t({type:"info",title:"Device Disconnected",message:"Device has been disconnected"})}catch(Le){t({type:"error",title:"Disconnection Failed",message:Le instanceof Error?Le.message:"Failed to disconnect device"})}finally{fe(!1)}},z=async()=>{fe(!0);try{console.log("🔧 강제 연결 해제 시도..."),await s.disconnectDevice().catch(Le=>{console.warn("일반 연결 해제 실패, 강제 진행:",Le)}),jr.clearDeviceCache(),await new Promise(Le=>setTimeout(Le,1e3)),t({type:"success",title:"Force Disconnect Complete",message:"디바이스 연결이 강제로 해제되었습니다. 재연결이 가능합니다."})}catch(Le){console.error("강제 연결 해제 실패:",Le),t({type:"error",title:"Force Disconnect Failed",message:"강제 연결 해제에 실패했습니다. 브라우저를 새로고침해주세요."})}finally{fe(!1)}},pe=()=>{if(y)try{const Le=b.trim()!==y.name?b.trim():void 0;c.registerDevice(y,Le),t({type:"success",title:"Device Registered",message:`${y.name} has been registered successfully`})}catch(Le){t({type:"error",title:"Registration Failed",message:Le instanceof Error?Le.message:"Failed to register device"})}finally{m(!1),x(null),S("")}},J=()=>{m(!1),x(null),S("")},oe=Le=>{try{c.unregisterDevice(Le),t({type:"info",title:"Device Unregistered",message:"Device has been removed from registered devices"})}catch(Qe){t({type:"error",title:"Unregistration Failed",message:Qe instanceof Error?Qe.message:"Failed to unregister device"})}},ae=(Le,Qe)=>{h(Le),p(Qe),A(!0)},ue=Le=>{B(Le),T(Le.nickname||Le.name||""),C(!0)},be=()=>{if(w)try{const Le=D.trim();if(Le.length>20){t({type:"error",title:"Rename Failed",message:"디바이스 별명은 20자를 초과할 수 없습니다."});return}const Qe=Le===w.name?"":Le;c.renameDevice(w.id,Qe),t({type:"success",title:"Device Renamed",message:`디바이스 별명이 "${Qe||w.name}"로 변경되었습니다.`})}catch(Le){t({type:"error",title:"Rename Failed",message:Le instanceof Error?Le.message:"Failed to rename device"})}finally{C(!1),B(null),T("")}},_e=()=>{C(!1),B(null),T("")},ye=Le=>{k(Le),R(!0)};return r&&!r.isSupported?f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsx("div",{className:"max-w-4xl mx-auto",children:f.jsx(jme,{})})}):f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100",children:"Device Manager"}),f.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Manage your LINK BAND devices"})]}),f.jsx("div",{className:"flex items-center gap-3",children:f.jsx(At,{onClick:me,disabled:i.isScanning||a.isConnected,className:"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed",children:i.isScanning?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border border-white border-t-transparent rounded-full"}),"Scanning..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Og,{className:"w-4 h-4 mr-2"}),"Scan Devices"]})})})]}),!a.isConnected&&r&&f.jsx("div",{className:`${r.isIOS?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":r.isAndroid?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800"} border rounded-lg p-4`,children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:`${r.isIOS?"text-blue-600 dark:text-blue-400":r.isAndroid?"text-green-600 dark:text-green-400":"text-purple-600 dark:text-purple-400"}`,children:f.jsx(jg,{className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("h3",{className:`font-medium mb-2 ${r.isIOS?"text-blue-900 dark:text-blue-100":r.isAndroid?"text-green-900 dark:text-green-100":"text-purple-900 dark:text-purple-100"}`,children:r.isIOS?"🍎 iOS 사용자 안내":r.isAndroid?"🤖 Android 사용자 안내":"💻 데스크톱 사용자 안내"}),r.isIOS?f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium",children:"iOS Safari는 Web Bluetooth를 지원하지 않습니다. 다음 브라우저를 사용해주세요:"}),f.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[f.jsxs("li",{children:["• ",f.jsx("strong",{children:"Bluefy"})," - 추천 브라우저 (App Store에서 다운로드)"]}),f.jsxs("li",{children:["• ",f.jsx("strong",{children:"WebBLE"})," - 대안 브라우저 (App Store에서 다운로드)"]})]}),f.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["앱 다운로드 후 ",f.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 rounded",children:"sdk.linkband.store"}),"에 접속하세요."]})]}):f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-sm font-medium mb-2",children:"LINK BAND 디바이스 연결 준비:"}),f.jsxs("ul",{className:`text-sm space-y-1 ${r.isAndroid?"text-green-800 dark:text-green-200":"text-purple-800 dark:text-purple-200"}`,children:[f.jsx("li",{children:"• LINK BAND 디바이스의 전원을 켜주세요"}),f.jsx("li",{children:"• 페어링 모드로 설정해주세요"}),f.jsx("li",{children:"• 디바이스를 가까이에 두세요"}),f.jsxs("li",{children:["• ",r.isAndroid?"Chrome 또는 Edge 브라우저":"Chrome, Edge, 또는 Opera 브라우저","를 사용해주세요"]})]})]})]})]})}),n.systemStatus==="initializing"&&f.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-yellow-600 border-t-transparent rounded-full"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"디바이스 연결 중..."}),f.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"LINK BAND 디바이스와 연결을 시도하고 있습니다. 잠시만 기다려주세요."})]})]})}),n.systemError&&f.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"text-red-600 dark:text-red-400",children:f.jsx(aO,{className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium text-red-900 dark:text-red-100",children:"연결 실패"}),f.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 mb-2",children:n.systemError||"알 수 없는 오류가 발생했습니다"}),f.jsxs("div",{className:"text-sm text-red-700 dark:text-red-300",children:[f.jsx("p",{className:"font-medium mb-1",children:"해결 방법:"}),f.jsxs("ul",{className:"space-y-1",children:[f.jsx("li",{children:"• 디바이스 전원을 다시 켜보세요"}),f.jsx("li",{children:"• 페어링 모드를 다시 활성화하세요"}),f.jsx("li",{children:"• 브라우저를 새로고침하고 다시 시도하세요"})]})]})]})]})}),a.isConnected&&q&&f.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-800 rounded-lg flex items-center justify-center",children:f.jsx(tg,{className:"w-6 h-6 text-green-600 dark:text-green-300"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100",children:jr.getDeviceName()||"LINK BAND"}),f.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"실시간 EEG 데이터 수신 중"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(Gt,{className:"bg-green-500 text-white",children:[f.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-2 animate-pulse"}),"Live"]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx(At,{variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50 rounded-r-none border-r-0",onClick:Me,disabled:he,children:he?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border border-red-600 border-t-transparent rounded-full"}),"연결 해제 중..."]}):f.jsxs(f.Fragment,{children:[f.jsx(aO,{className:"w-4 h-4 mr-2"}),"연결 해제"]})}),f.jsxs(e8,{children:[f.jsx(t8,{asChild:!0,children:f.jsx(At,{variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50 rounded-l-none px-2",disabled:he,children:f.jsx(Ph,{className:"w-4 h-4"})})}),f.jsx(d3,{align:"end",children:f.jsxs(ev,{onClick:z,className:"text-red-600 focus:text-red-600",disabled:he,children:[f.jsx(da,{className:"w-4 h-4 mr-2"}),"강제 연결 해제"]})})]})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-4 border border-green-100 dark:border-green-800",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(fA,{className:"w-4 h-4 text-green-600"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Battery"})]}),f.jsxs("div",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100",children:[(q==null?void 0:q.batteryLevel)||0,"%"]}),f.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:((Ee=q==null?void 0:q.batteryPrediction)==null?void 0:Ee.timeRemainingFormatted)||"Unknown"}),((ze=q==null?void 0:q.batteryPrediction)==null?void 0:ze.mode)!=="unknown"&&f.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-500",children:[((Fe=q==null?void 0:q.batteryPrediction)==null?void 0:Fe.mode)==="charging"?"⚡ Charging":"🔋 Discharging"," ","(",(Ge=q==null?void 0:q.batteryPrediction)==null?void 0:Ge.ratePerMinute.toFixed(1),"%/min)"]})]}),f.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-4 border border-blue-100 dark:border-blue-800",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Co,{className:"w-4 h-4 text-blue-600"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Connection"})]}),f.jsx("div",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:q!=null&&q.connectionStartTime?new Date(q.connectionStartTime).toLocaleTimeString():"N/A"}),f.jsxs("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:["Duration: ",q?(()=>{const Le=Math.floor(q.connectionDuration/1e3),Qe=Math.floor(Le/3600),ht=Math.floor(Le%3600/60),it=Le%60;return`${Qe.toString().padStart(2,"0")}:${ht.toString().padStart(2,"0")}:${it.toString().padStart(2,"0")}`})():"00:00:00"]})]}),f.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-lg p-4 border border-purple-100 dark:border-purple-800",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(I5,{className:"w-4 h-4 text-purple-600"}),f.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Sampling Rates"})]}),f.jsxs("div",{className:"space-y-1 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"EEG:"}),f.jsxs("span",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:[((at=q==null?void 0:q.samplingRates)==null?void 0:at.eeg)||0,"Hz"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"PPG:"}),f.jsxs("span",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:[((ut=q==null?void 0:q.samplingRates)==null?void 0:ut.ppg)||0,"Hz"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-neutral-600 dark:text-neutral-400",children:"ACC:"}),f.jsxs("span",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:[((gt=q==null?void 0:q.samplingRates)==null?void 0:gt.acc)||0,"Hz"]})]})]})]})]})]}),f.jsxs("div",{className:"border border-neutral-800 rounded-lg p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:["Available Devices (",ee.length,")"]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-sm font-medium text-neutral-600 dark:text-neutral-400",children:"자동 연결"}),f.jsx(_A,{checked:H,onCheckedChange:W})]}),f.jsx(At,{variant:"outline",size:"sm",onClick:me,disabled:i.isScanning,className:"border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300",children:i.isScanning?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border border-neutral-400 border-t-transparent rounded-full"}),"Scanning..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Og,{className:"w-4 h-4 mr-2"}),"Refresh"]})})]})]}),i.isScanning?f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-neutral-300 border-t-blue-600 rounded-full mx-auto mb-4"}),f.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-2",children:"Scanning for devices..."}),f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Make sure your LINK BAND is in pairing mode"})]}):ee.length>0?f.jsx("div",{className:"space-y-3",children:ee.map(Le=>f.jsx("div",{className:"p-4 bg-transparent rounded-lg border border-neutral-800 dark:border-neutral-600",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-neutral-300 dark:bg-neutral-600 rounded-lg flex items-center justify-center",children:f.jsx(tg,{className:"w-6 h-6 text-neutral-600 dark:text-neutral-300"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:Le.name}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:Le.id})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[a.isConnected&&a.currentDeviceId===Le.id?f.jsx(Gt,{className:"bg-green-500 text-white",children:"Connected"}):f.jsx(Gt,{variant:"secondary",className:"bg-neutral-400 dark:bg-neutral-500 text-neutral-900 dark:text-neutral-100",children:"Available"}),a.isConnected&&a.currentDeviceId===Le.id?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),f.jsx("span",{className:"text-sm font-medium text-green-600",children:"연결됨"})]}):Z===Le.id?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"}),f.jsx("span",{className:"text-sm font-medium text-blue-600",children:"연결 중..."})]}):H?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),f.jsx("span",{className:"text-sm font-medium text-blue-600",children:"자동 연결 대기"})]}):f.jsx("div",{className:"flex items-center gap-2",children:f.jsx(At,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>we(Le.id),disabled:Z===Le.id,children:Z===Le.id?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin w-3 h-3 mr-2 border border-white border-t-transparent rounded-full"}),"연결 중..."]}):"Connect"})})]})]})},Le.id))}):f.jsxs("div",{className:"text-center py-12",children:[f.jsx(jg,{className:"w-12 h-12 text-neutral-500 dark:text-neutral-400 mx-auto mb-4"}),f.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-2",children:"No devices found"}),f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"브라우저 페어링 창에서 LINK BAND를 선택하면 자동으로 연결됩니다"}),f.jsx(At,{variant:"outline",onClick:me,disabled:i.isScanning,className:"border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-300",children:i.isScanning?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border border-neutral-400 border-t-transparent rounded-full"}),"Scanning..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Og,{className:"w-4 h-4 mr-2"}),"Scan for Devices"]})})]})]}),f.jsxs("div",{className:"border border-neutral-800 rounded-lg p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:["Registered Devices (",te.length,")"]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-sm font-medium text-neutral-600 dark:text-neutral-400",children:"자동 등록"}),f.jsx(_A,{checked:O,onCheckedChange:Q})]}),f.jsxs(Gt,{variant:"outline",className:"text-blue-600 border-blue-600 bg-blue-50 dark:bg-blue-900/20",children:[f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Registered"]})]})]}),te.length>0?f.jsx("div",{className:"space-y-3",children:te.map(Le=>f.jsx("div",{className:"p-4 bg-neutral-800 rounded-lg",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-neutral-300 dark:bg-neutral-600 rounded-lg flex items-center justify-center",children:f.jsx(tg,{className:"w-6 h-6 text-neutral-700 dark:text-neutral-300"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:Le.name}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:Le.nickname||Le.id}),f.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(tg,{className:"w-3 h-3 text-neutral-500 dark:text-neutral-400"}),f.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["연결 ",Le.connectionCount,"회"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Co,{className:"w-3 h-3 text-neutral-500 dark:text-neutral-400"}),f.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Last: ",Le.lastConnectedAt?new Date(Le.lastConnectedAt).toLocaleDateString():"Never"]})]})]})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"text-right",children:[a.isConnected&&a.currentDeviceId===Le.id?f.jsx(Gt,{className:"mb-2 bg-green-500 text-white",children:"Connected"}):f.jsx(Gt,{className:"mb-2 bg-white text-neutral-700",children:"Registered"}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["등록일: ",new Date(Le.registeredAt).toLocaleDateString()]}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["ID: ",Le.id]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[a.isConnected&&a.currentDeviceId===Le.id?f.jsx(At,{disabled:!0,className:"bg-green-100 text-green-700 border-green-300 cursor-not-allowed",children:"Connected"}):f.jsx(At,{className:"bg-white text-black border-neutral-300 hover:bg-neutral-50",onClick:()=>we(Le.id),disabled:n.systemStatus==="initializing"||Z===Le.id,children:Z===Le.id?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin w-4 h-4 mr-2 border-2 border-current border-t-transparent rounded-full"}),"연결 중..."]}):n.systemStatus==="initializing"?"Connecting...":"Connect"}),f.jsxs(e8,{children:[f.jsx(t8,{asChild:!0,children:f.jsx(At,{variant:"ghost",size:"sm",className:"text-neutral-600 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600",children:f.jsx(Fue,{className:"w-4 h-4"})})}),f.jsxs(d3,{align:"end",className:"bg-neutral-800/95 dark:bg-neutral-800/95 backdrop-blur-md border-neutral-700 dark:border-neutral-700",children:[f.jsxs(ev,{onClick:()=>ae(Le,"registered"),className:"text-neutral-100 dark:text-neutral-100 hover:bg-neutral-700 dark:hover:bg-neutral-700 focus:bg-neutral-700 dark:focus:bg-neutral-700",children:[f.jsx(Ip,{className:"w-4 h-4 mr-2"}),"View Details"]}),f.jsxs(ev,{onClick:()=>ue(Le),className:"text-neutral-100 dark:text-neutral-100 hover:bg-neutral-700 dark:hover:bg-neutral-700 focus:bg-neutral-700 dark:focus:bg-neutral-700",children:[f.jsx(M_,{className:"w-4 h-4 mr-2"}),"Rename"]}),f.jsxs(ev,{onClick:()=>ye(Le),className:"text-neutral-100 dark:text-neutral-100 hover:bg-neutral-700 dark:hover:bg-neutral-700 focus:bg-neutral-700 dark:focus:bg-neutral-700",children:[f.jsx(go,{className:"w-4 h-4 mr-2"}),"Storage Settings"]}),!(a.isConnected&&a.currentDeviceId===Le.id)&&f.jsxs(ev,{onClick:()=>oe(Le.id),className:"text-red-400 dark:text-red-400 hover:bg-red-900/20 dark:hover:bg-red-900/20 focus:bg-red-900/20 dark:focus:bg-red-900/20",children:[f.jsx(hP,{className:"w-4 h-4 mr-2"}),"Unregister"]})]})]})]})]})]})},Le.id))}):f.jsxs("div",{className:"text-center py-12",children:[f.jsx(tg,{className:"w-12 h-12 text-neutral-500 dark:text-neutral-400 mx-auto mb-4"}),f.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-2",children:"No registered devices"}),f.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"디바이스를 스캔하여 연결하면 자동으로 등록됩니다"})]})]}),f.jsx(jpe,{device:u,deviceType:g,isOpen:d,onClose:()=>{A(!1),h(null)}}),v&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:J}),f.jsxs("div",{className:"relative bg-white dark:bg-neutral-900 rounded-lg shadow-xl border border-neutral-200 dark:border-neutral-800 w-full max-w-md mx-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:f.jsx(tg,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100",children:"디바이스를 등록해보세요"}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"다음 연결시 더 편리한 연결이 제공됩니다"})]})]}),f.jsxs("div",{className:"p-6 space-y-4",children:[f.jsx("div",{className:"text-center",children:f.jsxs("p",{className:"text-neutral-700 dark:text-neutral-300 mb-2",children:[f.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:y==null?void 0:y.name}),"을(를) 등록하시겠습니까?"]})}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{htmlFor:"device-nickname",className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"디바이스 별명 (선택사항)"}),f.jsx(xo,{id:"device-nickname",type:"text",value:b,onChange:Le=>S(Le.target.value),placeholder:"디바이스 별명을 입력하세요",className:"w-full bg-neutral-700 dark:bg-neutral-700 text-white dark:text-white border-neutral-600 dark:border-neutral-600 placeholder:text-neutral-400 dark:placeholder:text-neutral-400 focus:border-blue-500 focus:ring-blue-500"}),f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"별명을 설정하면 디바이스 목록에서 쉽게 구분할 수 있습니다"})]})]}),f.jsxs("div",{className:"flex gap-3 p-6 border-t border-neutral-200 dark:border-neutral-800",children:[f.jsx(At,{variant:"outline",onClick:J,className:"flex-1",children:"건너뛰기"}),f.jsxs(At,{onClick:pe,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[f.jsx(jue,{className:"w-4 h-4 mr-2"}),"등록하기"]})]})]})]}),_&&f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[f.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:_e}),f.jsxs("div",{className:"relative bg-white dark:bg-neutral-900 rounded-lg shadow-xl border border-neutral-200 dark:border-neutral-800 w-full max-w-md mx-4",children:[f.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-neutral-200 dark:border-neutral-800",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:f.jsx(M_,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100",children:"디바이스 별명 변경"}),f.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"디바이스를 쉽게 구분할 수 있도록 별명을 설정하세요"})]})]}),f.jsxs("div",{className:"p-6 space-y-4",children:[f.jsx("div",{className:"text-center",children:f.jsxs("p",{className:"text-neutral-700 dark:text-neutral-300 mb-4",children:[f.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:w==null?void 0:w.name}),"의 별명을 변경하시겠습니까?"]})}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{htmlFor:"rename-device-nickname",className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"디바이스 별명 (최대 20자)"}),f.jsx(xo,{id:"rename-device-nickname",type:"text",value:D,onChange:Le=>T(Le.target.value),placeholder:"디바이스 별명을 입력하세요",maxLength:20,className:"w-full bg-neutral-700 dark:bg-neutral-700 text-white dark:text-white border-neutral-600 dark:border-neutral-600 placeholder:text-neutral-400 dark:placeholder:text-neutral-400 focus:border-blue-500 focus:ring-blue-500"}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"빈 칸으로 두면 기본 이름이 사용됩니다"}),f.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[D.length,"/20"]})]})]})]}),f.jsxs("div",{className:"flex gap-3 p-6 border-t border-neutral-200 dark:border-neutral-800",children:[f.jsx(At,{variant:"outline",onClick:_e,className:"flex-1",children:"취소"}),f.jsxs(At,{onClick:be,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[f.jsx(M_,{className:"w-4 h-4 mr-2"}),"수정"]})]})]})]}),f.jsx(kme,{open:E,onOpenChange:R,deviceId:(M==null?void 0:M.id)||"",deviceName:(M==null?void 0:M.nickname)||(M==null?void 0:M.name)||""})]})})}function Ume({open:r,onOpenChange:e}){const[t,n]=K.useState(!1),[a,i]=K.useState("intro"),{selectStorageDirectory:s,storageDirectoryPath:o,isInitialized:l}=Xc(),c=async()=>{n(!0),i("selecting");try{await s()?(i("success"),setTimeout(()=>{e(!1),i("intro")},2e3)):i("intro")}catch(d){console.error("Storage selection failed:",d),i("intro")}finally{n(!1)}},u=()=>{alert("데이터 센터를 사용하려면 저장소 디렉토리 선택이 필요합니다.")},h=()=>{confirm(`저장소 설정을 완료하지 않으면 데이터 센터를 사용할 수 없습니다.
정말로 닫으시겠습니까?`)&&e(!1)};return f.jsx(oN,{open:r,onOpenChange:h,children:f.jsxs(lN,{className:"max-w-2xl h-[800px] flex flex-col",children:[f.jsxs(cN,{className:"flex-shrink-0",children:[f.jsxs(uN,{className:"flex items-center gap-2",children:[f.jsx(go,{className:"w-6 h-6 text-blue-600"}),"저장소 설정"]}),f.jsx(JX,{children:"데이터 센터를 사용하기 위해 저장소 디렉토리를 선택해주세요"})]}),f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a==="intro"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4",children:[f.jsxs(Ye,{className:"border-blue-200 bg-neutral-700",children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"text-base flex items-center gap-2",children:[f.jsx(Vl,{className:"w-5 h-5 text-blue-600"}),"로컬 저장소 설정"]}),f.jsx(na,{className:"text-sm",children:"Link-Band SDK는 모든 데이터를 사용자의 로컬 컴퓨터에 안전하게 저장합니다."})]}),f.jsx(ct,{children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(a0,{className:"w-5 h-5 text-green-600 mt-1"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-sm",children:"완전한 개인정보 보호"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"모든 데이터가 사용자 기기에만 저장됩니다"})]})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(r0,{className:"w-5 h-5 text-blue-600 mt-1"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-sm",children:"사용자 제어"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"저장 위치를 직접 선택하고 관리할 수 있습니다"})]})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(mh,{className:"w-5 h-5 text-purple-600 mt-1"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-sm",children:"오프라인 우선"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"인터넷 연결 없이도 모든 기능 사용 가능"})]})]})]})})]}),f.jsxs(Ye,{className:"bg-neutral-700",children:[f.jsxs(wt,{children:[f.jsx(St,{className:"text-base flex items-center gap-2",children:(()=>{switch(fl()){case"windows":return f.jsxs(f.Fragment,{children:[f.jsx(iO,{className:"w-5 h-5 text-blue-500"}),G2()," 추천 경로"]});case"macos":return f.jsxs(f.Fragment,{children:[f.jsx(Oue,{className:"w-5 h-5 text-gray-400"}),G2()," 추천 경로"]});case"linux":return f.jsxs(f.Fragment,{children:[f.jsx(iO,{className:"w-5 h-5 text-orange-500"}),G2()," 추천 경로"]});case"android":return f.jsxs(f.Fragment,{children:[f.jsx(uP,{className:"w-5 h-5 text-green-500"}),G2()," 추천 경로"]});default:return f.jsxs(f.Fragment,{children:[f.jsx(Vl,{className:"w-5 h-5 text-gray-500"}),"추천 경로"]})}})()}),f.jsx(na,{children:"현재 운영체제에 적합한 저장소 위치를 선택하세요"})]}),f.jsxs(ct,{children:[f.jsx("div",{className:"space-y-2",children:jge().map((d,A)=>f.jsxs("div",{className:"bg-neutral-800 text-blue-300 p-3 rounded-lg font-mono text-sm flex items-center gap-2",children:[f.jsx(Vl,{className:"w-4 h-4 text-blue-400"}),f.jsx("span",{children:d})]},A))}),f.jsxs("div",{className:"mt-4 text-xs text-muted-foreground",children:["💡 ",f.jsx("strong",{children:"팁:"}),' "[사용자명]" 부분을 실제 사용자 이름으로 바꿔서 해당 위치에 폴더를 만들어 선택하세요.']})]})]}),f.jsxs(Ye,{className:"bg-neutral-700",children:[f.jsxs(wt,{children:[f.jsx(St,{className:"text-base",children:"저장소 구조"}),f.jsx(na,{children:"선택한 폴더에 다음과 같은 구조로 데이터가 저장됩니다"})]}),f.jsx(ct,{children:f.jsxs("div",{className:"bg-neutral-800 text-green-400 p-4 rounded-lg font-mono text-sm",children:[f.jsx("div",{children:"📁 LinkBand-Data/"}),f.jsxs("div",{className:"ml-4",children:["📁 config/ ",f.jsx("span",{className:"text-gray-400",children:"# 설정 파일"})]}),f.jsxs("div",{className:"ml-4",children:["📁 sessions/ ",f.jsx("span",{className:"text-gray-400",children:"# 세션 데이터"})]}),f.jsxs("div",{className:"ml-8",children:["📁 2024/01/ ",f.jsx("span",{className:"text-gray-400",children:"# 날짜별 분류"})]}),f.jsxs("div",{className:"ml-4",children:["📁 exports/ ",f.jsx("span",{className:"text-gray-400",children:"# 내보내기 파일"})]}),f.jsxs("div",{className:"ml-4",children:["📁 backups/ ",f.jsx("span",{className:"text-gray-400",children:"# 백업 파일"})]})]})})]}),f.jsx(Ye,{className:"border-yellow-200 bg-neutral-700",children:f.jsx(ct,{className:"pt-6",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(da,{className:"w-5 h-5 text-yellow-600 mt-1"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-sm text-yellow-300",children:"권장사항"}),f.jsxs("ul",{className:"text-xs text-yellow-200 mt-2 space-y-1",children:[f.jsx("li",{children:"• 충분한 여유 공간이 있는 폴더를 선택하세요 (최소 1GB 권장)"}),f.jsx("li",{children:"• 정기적으로 백업되는 위치를 선택하는 것이 좋습니다"}),f.jsx("li",{children:"• 네트워크 드라이브보다는 로컬 드라이브를 권장합니다"}),(()=>{switch(fl()){case"windows":return f.jsxs(f.Fragment,{children:[f.jsx("li",{children:"• C: 드라이브 또는 별도의 데이터 드라이브(D:, E: 등)를 사용하세요"}),f.jsx("li",{children:"• OneDrive나 Google Drive 동기화 폴더는 피하세요"})]});case"macos":return f.jsxs(f.Fragment,{children:[f.jsx("li",{children:"• iCloud Drive 동기화 폴더는 피하세요"}),f.jsx("li",{children:"• 외장 드라이브 사용 시 macOS 권한 설정을 확인하세요"})]});case"linux":return f.jsxs(f.Fragment,{children:[f.jsx("li",{children:"• 홈 디렉토리 또는 별도 마운트된 드라이브를 사용하세요"}),f.jsx("li",{children:"• 쓰기 권한이 있는 위치인지 확인하세요"})]});case"android":return f.jsxs(f.Fragment,{children:[f.jsx("li",{children:"• 내부 저장소 또는 SD카드를 사용할 수 있습니다"}),f.jsx("li",{children:"• 앱 권한에서 저장소 접근을 허용해야 합니다"})]});default:return null}})()]})]})]})})})]}),f.jsxs("div",{className:"flex justify-between flex-shrink-0 pt-4",children:[f.jsx(At,{variant:"outline",onClick:u,className:"text-gray-500",children:"나중에 설정"}),f.jsxs(At,{onClick:c,disabled:t,className:"bg-blue-600 hover:bg-blue-700",children:[f.jsx(Vl,{className:"w-4 h-4 mr-2"}),t?"선택 중...":"저장소 폴더 선택"]})]})]}),a==="selecting"&&f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-medium mb-2",children:"폴더 선택 중..."}),f.jsx("p",{className:"text-muted-foreground",children:"브라우저의 폴더 선택 다이얼로그에서 저장소로 사용할 폴더를 선택해주세요."})]})}),a==="success"&&f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Hs,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-medium mb-2",children:"저장소 설정 완료!"}),f.jsx("p",{className:"text-muted-foreground mb-4",children:"저장소가 성공적으로 설정되었습니다."}),f.jsx("div",{className:"bg-neutral-700 border border-green-200 rounded-lg p-4",children:f.jsx("p",{className:"text-sm text-green-300 font-mono",children:o})}),f.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"잠시 후 데이터 센터로 이동합니다..."})]})})]})]})})}var wk="Progress",Sk=100,[Hme,hKe]=F0(wk),[Qme,zme]=Hme(wk),JZ=K.forwardRef((r,e)=>{const{__scopeProgress:t,value:n=null,max:a,getValueLabel:i=Gme,...s}=r;(a||a===0)&&!r8(a)&&console.error(Vme(`${a}`,"Progress"));const o=r8(a)?a:Sk;n!==null&&!n8(n,o)&&console.error($me(`${n}`,"Progress"));const l=n8(n,o)?n:null,c=lC(l)?i(l,o):void 0;return f.jsx(Qme,{scope:t,value:l,max:o,children:f.jsx(_n.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":lC(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":rJ(l,o),"data-value":l??void 0,"data-max":o,...s,ref:e})})});JZ.displayName=wk;var eJ="ProgressIndicator",tJ=K.forwardRef((r,e)=>{const{__scopeProgress:t,...n}=r,a=zme(eJ,t);return f.jsx(_n.div,{"data-state":rJ(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:e})});tJ.displayName=eJ;function Gme(r,e){return`${Math.round(r/e*100)}%`}function rJ(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function lC(r){return typeof r=="number"}function r8(r){return lC(r)&&!isNaN(r)&&r>0}function n8(r,e){return lC(r)&&!isNaN(r)&&r<=e&&r>=0}function Vme(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Sk}\`.`}function $me(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Sk} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Kme=JZ,Wme=tJ;function Hx({className:r,value:e,...t}){return f.jsx(Kme,{"data-slot":"progress",className:tr("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...t,children:f.jsx(Wme,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function qme({open:r,onOpenChange:e,session:t,onExport:n}){const[a,i]=K.useState("zip"),[s,o]=K.useState("format"),[l,c]=K.useState(0),[u,h]=K.useState(""),d=[{id:"zip",name:"전체 세션 (폴더)",description:"모든 파일과 메타데이터를 폴더 형태로 내보내기",icon:f.jsx(Uue,{className:"w-5 h-5"}),fileExtension:"folder",estimatedSize:(t==null?void 0:t.size)||"0 B",recommended:!0},{id:"csv",name:"CSV 파일만",description:"스프레드시트에서 열 수 있는 CSV 형식",icon:f.jsx(Us,{className:"w-5 h-5"}),fileExtension:".csv",estimatedSize:"~50% 압축"},{id:"json",name:"JSON 파일만",description:"구조화된 JSON 형식",icon:f.jsx(go,{className:"w-5 h-5"}),fileExtension:".json",estimatedSize:"~70% 원본"},{id:"jsonl",name:"JSON Lines 파일만",description:"스트리밍에 최적화된 JSONL 형식",icon:f.jsx(Hue,{className:"w-5 h-5"}),fileExtension:".jsonl",estimatedSize:"~65% 원본"},{id:"binary",name:"Binary 파일만",description:"가장 압축된 바이너리 형식",icon:f.jsx(Que,{className:"w-5 h-5"}),fileExtension:".bin",estimatedSize:"~30% 압축"},{id:"all",name:"모든 파일 (개별)",description:"모든 형식의 파일을 개별적으로 내보내기",icon:f.jsx(vh,{className:"w-5 h-5"}),fileExtension:"multiple",estimatedSize:(t==null?void 0:t.size)||"0 B"}],A=m=>{i(m)},g=async()=>{if(t){o("location");try{const m=await window.showDirectoryPicker({mode:"readwrite"});o("progress"),c(0);const y=setInterval(()=>{c(x=>x>=90?(clearInterval(y),90):x+Math.random()*15)},200);await n(t.id,a,m),clearInterval(y),c(100),setTimeout(()=>{o("success")},500)}catch(m){console.error("내보내기 실패:",m),h(m instanceof Error?m.message:"알 수 없는 오류가 발생했습니다."),o("error")}}},p=()=>{setTimeout(()=>{o("format"),c(0),h(""),i("zip")},200),e(!1)},v=()=>{o("format"),c(0),h("")};return t?f.jsx(oN,{open:r,onOpenChange:p,children:f.jsxs(lN,{className:"max-w-2xl h-[800px] bg-neutral-700 text-white flex flex-col",children:[f.jsx(cN,{className:"flex-shrink-0",children:f.jsxs(uN,{className:"flex items-center gap-2 text-white",children:[f.jsx(vh,{className:"w-5 h-5"}),"세션 내보내기"]})}),f.jsxs("div",{className:"flex-1 flex flex-col space-y-4 overflow-hidden",children:[f.jsx(Ye,{className:"bg-neutral-600 border-neutral-500 flex-shrink-0",children:f.jsxs(ct,{className:"pt-3 pb-3",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-medium text-white text-sm",children:t.name}),f.jsxs("div",{className:"flex items-center gap-3 text-xs text-neutral-300 mt-1",children:[f.jsxs("span",{children:["📅 ",t.date]}),f.jsxs("span",{children:["⏰ ",t.time]}),f.jsxs("span",{children:["⏱️ ",t.duration]}),f.jsxs("span",{children:["📱 ",t.deviceName]})]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-xs text-neutral-300",children:"파일 크기"}),f.jsx("div",{className:"font-medium text-white text-sm",children:t.size})]})]}),f.jsx("div",{className:"flex gap-1 mt-2",children:t.formats.map(m=>f.jsx(Gt,{variant:"secondary",className:"text-xs px-2 py-0",children:m},m))})]})}),s==="format"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[f.jsx("h3",{className:"text-lg font-medium mb-3 text-white flex-shrink-0",children:"내보내기 형식 선택"}),f.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:d.map(m=>f.jsx(Ye,{className:`cursor-pointer transition-all hover:shadow-md border-neutral-500 ${a===m.id?"ring-2 ring-blue-500 bg-blue-900 border-blue-500":"bg-neutral-600 hover:bg-neutral-550"}`,onClick:()=>A(m.id),children:f.jsx(ct,{className:"pt-3 pb-3",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`p-1.5 rounded-lg ${a===m.id?"bg-blue-800 text-blue-300":"bg-neutral-500 text-neutral-300"}`,children:m.icon}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("h4",{className:"font-medium text-white text-sm",children:m.name}),m.recommended&&f.jsx(Gt,{variant:"default",className:"text-xs bg-green-600 text-green-100 px-1.5 py-0",children:"권장"})]}),f.jsx("p",{className:"text-xs text-neutral-300 mt-0.5",children:m.description}),f.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-neutral-400",children:[f.jsxs("span",{children:["📁 ",m.fileExtension]}),f.jsxs("span",{children:["📊 ",m.estimatedSize]})]})]}),f.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex-shrink-0 ${a===m.id?"bg-blue-500 border-blue-500":"border-neutral-400"}`,children:a===m.id&&f.jsx("div",{className:"w-full h-full rounded-full bg-white scale-50"})})]})})},m.id))})]}),f.jsxs("div",{className:"flex justify-end gap-2 flex-shrink-0 pt-2",children:[f.jsx(At,{variant:"outline",onClick:p,children:"취소"}),f.jsxs(At,{onClick:g,children:[f.jsx(Vl,{className:"w-4 h-4 mr-2"}),"저장 위치 선택"]})]})]}),s==="location"&&f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Vl,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-medium mb-2 text-white",children:"저장 위치 선택 중..."}),f.jsx("p",{className:"text-neutral-300",children:"브라우저에서 파일을 저장할 폴더를 선택해주세요."})]})}),s==="progress"&&f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("div",{className:"w-full max-w-md space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx(i0,{className:"w-12 h-12 text-blue-500 mx-auto mb-4 animate-spin"}),f.jsx("h3",{className:"text-lg font-medium mb-2 text-white",children:"내보내기 진행 중..."}),f.jsx("p",{className:"text-neutral-300 text-sm",children:a==="zip"?"폴더를 생성하고 파일을 복사하고 있습니다.":a==="all"?"모든 파일을 개별적으로 내보내고 있습니다.":`${a.toUpperCase()} 파일을 내보내고 있습니다.`})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-sm text-white",children:[f.jsx("span",{children:"진행률"}),f.jsxs("span",{children:[Math.round(l),"%"]})]}),f.jsx(Hx,{value:l,className:"h-2"})]})]})}),s==="success"&&f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Hs,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-medium mb-2 text-white",children:"내보내기 완료!"}),f.jsx("p",{className:"text-neutral-300 mb-6",children:"세션 데이터가 성공적으로 내보내졌습니다."}),f.jsx(At,{onClick:p,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"완료"})]})}),s==="error"&&f.jsx("div",{className:"flex-1 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(s0,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-medium mb-2 text-white",children:"내보내기 실패"}),f.jsx("p",{className:"text-neutral-300 mb-6",children:u}),f.jsxs("div",{className:"flex justify-center gap-2",children:[f.jsx(At,{variant:"outline",onClick:p,children:"취소"}),f.jsx(At,{onClick:v,children:"다시 시도"})]})]})})]})]})}):null}const Yme=()=>{const[r,e]=K.useState(!1),[t,n]=K.useState(!1),[a,i]=K.useState(null),{checkAndRestoreStorage:s,isStorageReady:o}=Xc();return K.useEffect(()=>{let l=!0;const u=setTimeout(async()=>{if(!(o||r)){e(!0),i(null);try{console.log("[AUTO-RESTORE] 🔄 저장소 자동 복원 시도...");const h=await s();l&&(h?(console.log("[AUTO-RESTORE] ✅ 저장소 자동 복원 성공"),n(!0)):(console.log("[AUTO-RESTORE] 📭 복원할 저장소 없음 (정상)"),n(!1)))}catch(h){console.error("[AUTO-RESTORE] ❌ 저장소 자동 복원 실패:",h),l&&(i(h instanceof Error?h.message:"알 수 없는 오류"),n(!1))}finally{l&&e(!1)}}},100);return()=>{l=!1,clearTimeout(u)}},[s,o,r]),{isRestoring:r,isRestored:t,restoreError:a,isStorageReady:o}};function Xme(){var Sr,zt;const[r,e]=K.useState(""),[t,n]=K.useState("all"),[a,i]=K.useState({eegRaw:!0,ppgRaw:!0,accRaw:!0,eegAnalysisMetrics:!0,ppgAnalysisMetrics:!0,accAnalysisMetrics:!0}),[s,o]=K.useState(""),[l,c]=K.useState(!1),[u,h]=K.useState(!1),[d,A]=K.useState("newest"),[g,p]=K.useState(!1),[v,m]=K.useState(null),{isRestoring:y,isRestored:x,restoreError:b}=Yme(),[S,_]=K.useState("00:00:00"),{systemStatus:C,isInitialized:w}=W0(),{isConnected:B,deviceName:D,currentDeviceId:T,batteryLevel:E}=q0(),{isStreaming:R}=ww(),{initializeSystem:M}=vk(),k=nN(),O=aN(),Q=pk(),[H,W]=K.useState(0);K.useEffect(()=>{let qe;return B&&jr.isConnected()?qe=setInterval(async()=>{try{const pt=await jr.getBatteryLevel();W(pt)}catch(pt){console.error("Failed to get realtime battery level:",pt)}},1e3):W(0),()=>{qe&&clearInterval(qe)}},[B]);const{isInitialized:te,storageDirectoryPath:ee,storageStats:j,storageSettings:G,storageStatus:Y,currentSession:Z,sessions:de,loadSessions:he,deleteSession:fe,deleteSessions:q,exportSession:ge,exportSessions:me,selectSession:we,selectAllSessions:Me,clearSelection:z,selectedSessions:pe,selectStorageDirectory:J,startRecording:oe,stopRecording:ae,changeStorageDirectory:ue,config:be,updateConfig:_e,checkAndRestoreStorage:ye}=Xc(),{streamingRecordingFormat:Ee,setStreamingRecordingFormat:ze,timezone:Fe}=Od();b0.getInstance();const Ge=qe=>qe<1024?`${qe} B`:qe<1024*1024?`${(qe/1024).toFixed(1)} KB`:qe<1024*1024*1024?`${(qe/(1024*1024)).toFixed(1)} MB`:`${(qe/(1024*1024*1024)).toFixed(1)} GB`;K.useEffect(()=>{!w&&C==="idle"&&M()},[w,C,M]),K.useEffect(()=>{!y&&!te&&!x?(console.log("[DATACENTER] 📋 저장소가 설정되지 않음, 설정 모달 표시"),c(!0)):te&&(console.log("[DATACENTER] ✅ 저장소가 설정됨, 설정 모달 숨김"),c(!1))},[te,y,x]),K.useEffect(()=>{te&&(console.log("🔧 저장소 초기화 완료, 세션 목록 로드 시작"),he())},[te,he]),K.useEffect(()=>{if(!Z&&te){console.log("🔧 레코딩 종료됨, 세션 목록 새로고침");const qe=setTimeout(()=>{he()},2e3);return()=>clearTimeout(qe)}},[Z,te,he]),K.useEffect(()=>{let qe;return Z&&Z.startTime?qe=setInterval(()=>{const pt=Date.now(),Nt=new Date(Z.startTime).getTime(),Kt=Math.floor((pt-Nt)/1e3),Yt=Math.floor(Kt/3600),Je=Math.floor(Kt%3600/60),yt=Kt%60;_(`${Yt.toString().padStart(2,"0")}:${Je.toString().padStart(2,"0")}:${yt.toString().padStart(2,"0")}`)},1e3):_("00:00:00"),()=>{qe&&clearInterval(qe)}},[Z==null?void 0:Z.startTime]),K.useEffect(()=>{const qe=setInterval(()=>{},1e3);return()=>clearInterval(qe)},[]),K.useEffect(()=>{b&&console.error("[DATACENTER] ❌ 저장소 자동 복원 오류:",b)},[b]),K.useEffect(()=>{be.defaultSaveOptions&&(console.log("[DATACENTER] 🔧 Settings에서 기본 저장 옵션 로드:",be.defaultSaveOptions),i({eegRaw:be.defaultSaveOptions.eegRaw||!1,ppgRaw:be.defaultSaveOptions.ppgRaw||!1,accRaw:be.defaultSaveOptions.accRaw||!1,eegAnalysisMetrics:be.defaultSaveOptions.eegAnalysisMetrics!==void 0?be.defaultSaveOptions.eegAnalysisMetrics:!0,ppgAnalysisMetrics:be.defaultSaveOptions.ppgAnalysisMetrics!==void 0?be.defaultSaveOptions.ppgAnalysisMetrics:!0,accAnalysisMetrics:be.defaultSaveOptions.accAnalysisMetrics!==void 0?be.defaultSaveOptions.accAnalysisMetrics:!0}))},[be.defaultSaveOptions]),K.useEffect(()=>{te&&Fe&&(console.log("[DATACENTER] 🕐 타임존 설정 변경됨:",Fe,"세션 목록 새로고침"),he())},[Fe,te,he]);const at=async()=>{try{await J()&&c(!1)}catch(qe){console.error("저장소 선택 실패:",qe)}},ut=async()=>{var qe,pt;if(Z)try{await ae()}catch(Nt){console.error("Failed to stop streaming recording:",Nt),alert("레코딩 중지에 실패했습니다.")}else{if(!B){alert("디바이스를 먼저 연결해주세요.");return}if(!te){alert("저장소 디렉토리를 먼저 선택해주세요.");return}try{const Nt=Ee==="jsonl"?"json":Ee,Kt=((qe=k==null?void 0:k.device)==null?void 0:qe.name)||D||"Unknown Device",Yt=((pt=k==null?void 0:k.device)==null?void 0:pt.id)||T||"unknown",Je={sessionName:s||`Session_${new Date().toISOString().slice(0,19).replace(/[:-]/g,"")}`,deviceName:Kt,deviceId:Yt,saveFormats:[Nt],dataTypes:{eegRaw:a.eegRaw,ppgRaw:a.ppgRaw,accRaw:a.accRaw,eegAnalysisMetrics:a.eegAnalysisMetrics,ppgAnalysisMetrics:a.ppgAnalysisMetrics,accAnalysisMetrics:a.accAnalysisMetrics},compression:G.compression,chunkSize:1024};await oe(Je),o("")}catch(Nt){console.error("Failed to start streaming recording:",Nt),alert("레코딩 시작에 실패했습니다.")}}},gt=[{value:"all",label:"All Data"},{value:"eeg",label:"EEG Only"},{value:"ppg",label:"PPG Only"},{value:"acc",label:"ACC Only"},{value:"today",label:"Today"},{value:"week",label:"This Week"}],Le=de.filter(qe=>{const pt=qe.name.toLowerCase().includes(r.toLowerCase())||qe.deviceName.toLowerCase().includes(r.toLowerCase());if(t==="all")return pt;if(t==="today"){const Nt=new Date().toISOString().split("T")[0];return qe.date===Nt&&pt}return(t==="week"||qe.formats.some(Nt=>Nt.toLowerCase()===t))&&pt}),Qe=async()=>{try{await ue()&&await he()}catch(qe){console.error("저장소 변경 실패:",qe)}},ht=async qe=>{try{await fe(qe),await he()}catch(pt){console.error("세션 삭제 실패:",pt)}},it=async qe=>{try{const pt=de.find(Nt=>Nt.id===qe);pt&&(m(pt),p(!0))}catch(pt){console.error("세션 내보내기 실패:",pt)}},Vt=async(qe,pt,Nt)=>{try{if(console.log(`🎯 DataCenter.tsx handleExportExecute 호출됨 - sessionId: ${qe}, format: ${pt}`),console.log("🎯 Directory handle 전달됨:",Nt?`${Nt.name}`:"undefined"),pt==="zip"||pt==="all"){console.log("🚀 DataCenter.tsx SessionManager.downloadAllAsZip 호출 시작");const{sessionManager:Kt}=await hs(async()=>{const{sessionManager:Je}=await Promise.resolve().then(()=>_ge);return{sessionManager:Je}},void 0);if(!await Kt.downloadAllAsZip(qe,Nt))throw new Error("SessionManager ZIP 내보내기 실패");console.log("✅ DataCenter.tsx SessionManager.downloadAllAsZip 완료")}else console.log(`🔧 DataCenter.tsx storageStore.exportSession 호출 - format: ${pt}`),await ge(qe,pt,Nt);setTimeout(()=>{he()},100)}catch(Kt){throw console.error("내보내기 실행 실패:",Kt),Kt}},kt=async qe=>{try{const pt=be.storageDirectoryAbsolutePath||ee,Nt=Xc.getState().parseSessionDate(qe.id),[Kt,Yt]=Nt.split("-"),Je=u3(pt,"LinkBand-Data","sessions",Kt,Yt,qe.id),yt=Gu(Je);await navigator.clipboard.writeText(yt),console.log("[DATACENTER] 📋 세션 경로 복사됨:",yt),yn.success("경로가 복사되었습니다",{description:`${qe.name} 세션의 절대 경로가 클립보드에 복사되었습니다.`,duration:3e3})}catch(pt){console.error("[DATACENTER] ❌ 경로 복사 실패:",pt);try{const Nt=be.storageDirectoryAbsolutePath||ee,Kt=Xc.getState().parseSessionDate(qe.id),[Yt,Je]=Kt.split("-"),yt=u3(Nt,"LinkBand-Data","sessions",Yt,Je,qe.id),mr=Gu(yt),dr=document.createElement("textarea");dr.value=mr,document.body.appendChild(dr),dr.select(),document.execCommand("copy"),document.body.removeChild(dr),console.log("[DATACENTER] 📋 대안 방식으로 경로 복사됨:",mr),yn.success("경로가 복사되었습니다",{description:`${qe.name} 세션의 절대 경로가 클립보드에 복사되었습니다.`,duration:3e3})}catch(Nt){console.error("[DATACENTER] ❌ 대안 복사도 실패:",Nt),yn.error("경로 복사 실패",{description:"경로를 클립보드에 복사하는 중 오류가 발생했습니다.",duration:3e3})}}},Bt=()=>{const qe=fl();switch(console.log("[DEBUG] Detected OS:",qe),console.log("[DEBUG] User Agent:",navigator.userAgent),console.log("[DEBUG] Platform:",navigator.platform),qe){case"windows":return{title:"Windows 탐색기에서 저장소 폴더 열기",description:"Windows 탐색기에서 Ctrl+L을 눌러 복사된 경로로 이동하세요."};case"macos":return{title:"Finder에서 저장소 폴더 열기",description:"Finder에서 ⌘+Shift+G를 눌러 복사된 경로로 이동하세요."};case"linux":return{title:"파일 매니저에서 저장소 폴더 열기",description:"파일 매니저에서 Ctrl+L을 눌러 복사된 경로로 이동하세요."};default:return{title:"파일 매니저에서 저장소 폴더 열기",description:"파일 매니저에서 복사된 경로로 이동하세요."}}};return f.jsxs("div",{className:"flex-1 overflow-auto p-6 bg-background text-foreground",children:[f.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-medium text-foreground",children:"Data Center"}),f.jsx("p",{className:"text-muted-foreground",children:"데이터 저장소 및 관리"})]}),f.jsx("div",{className:"flex gap-2",children:f.jsxs(At,{variant:"outline",onClick:Qe,children:[f.jsx(Ip,{className:"w-4 h-4 mr-2"}),"저장소 설정"]})})]}),!te&&f.jsx(Ye,{className:"p-4 border-yellow-200 bg-yellow-50",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(s0,{className:"w-5 h-5 text-yellow-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"저장소 디렉토리를 선택해주세요"}),f.jsx("p",{className:"text-xs text-yellow-700",children:"데이터 저장을 위해 로컬 저장소 디렉토리를 선택해야 합니다."})]}),f.jsxs(At,{size:"sm",onClick:at,className:"ml-auto",children:[f.jsx(Vl,{className:"w-4 h-4 mr-2"}),"선택"]})]})}),te&&ee&&f.jsx(Ye,{className:"p-4 border-green-200 bg-green-50",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Hs,{className:"w-5 h-5 text-green-600"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-green-800",children:"저장소 디렉토리 연결됨"}),f.jsx("p",{className:"text-xs text-green-700 font-mono",children:Gu(be.storageDirectoryAbsolutePath||ee)})]})]})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(r0,{className:"w-8 h-8 text-blue-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Storage"}),f.jsx("p",{className:"text-xl font-medium",children:j.totalSize})]})]})}),f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(go,{className:"w-8 h-8 text-green-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Used"}),f.jsx("p",{className:"text-xl font-medium",children:j.used})]})]})}),f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(r0,{className:"w-8 h-8 text-gray-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Available"}),f.jsx("p",{className:"text-xl font-medium",children:j.available})]})]})}),f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(go,{className:"w-8 h-8 text-orange-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Sessions"}),f.jsx("p",{className:"text-xl font-medium",children:j.sessions})]})]})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-xl font-medium",children:"실시간 스트리밍 레코딩"}),B?f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[f.jsxs(Ye,{className:"p-4",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:f.jsx(uP,{className:"w-5 h-5 text-blue-500"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium",children:"디바이스 정보"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"연결된 LINK BAND 디바이스"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-muted-foreground",children:"디바이스명"}),f.jsx("span",{className:"text-sm font-medium",children:((Sr=k==null?void 0:k.device)==null?void 0:Sr.name)||D||"Unknown Device"})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-muted-foreground",children:"디바이스 ID"}),f.jsx("span",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:((zt=k==null?void 0:k.device)==null?void 0:zt.id)||T||"Unknown"})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-muted-foreground",children:"연결 상태"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),f.jsx("span",{className:"text-sm font-medium text-green-600",children:"연결됨"})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-muted-foreground",children:"배터리"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("span",{className:"text-sm font-medium",children:[H,"%"]}),f.jsx("div",{className:tr("w-2 h-2 rounded-full",H>20?"bg-green-500":H>10?"bg-yellow-500":"bg-red-500")})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-muted-foreground",children:"연결 시간"}),f.jsx("span",{className:"text-sm font-medium",children:(O==null?void 0:O.connectionDuration)||"00:00:00"})]}),Q&&f.jsxs("div",{className:"pt-3 border-t",children:[f.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"샘플링 레이트"}),f.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[f.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[f.jsx("div",{className:"font-medium",children:"EEG"}),f.jsxs("div",{className:"text-muted-foreground",children:[Q.eeg,"Hz"]})]}),f.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[f.jsx("div",{className:"font-medium",children:"PPG"}),f.jsxs("div",{className:"text-muted-foreground",children:[Q.ppg,"Hz"]})]}),f.jsxs("div",{className:"text-center p-2 bg-muted/50 rounded",children:[f.jsx("div",{className:"font-medium",children:"ACC"}),f.jsxs("div",{className:"text-muted-foreground",children:[Q.acc,"Hz"]})]})]})]})]})]}),te&&ee&&f.jsxs(Ye,{className:"p-4",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center",children:f.jsx(Vl,{className:"w-5 h-5 text-green-500"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium",children:"저장소 정보"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"데이터 저장 위치"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-sm text-muted-foreground",children:"저장 경로"}),f.jsx("div",{className:"mt-1 p-3 bg-muted/50 rounded-lg",children:f.jsx("p",{className:"font-mono text-xs break-all",children:Gu(ee)})})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(At,{variant:"outline",size:"sm",onClick:async()=>{try{const qe=Gu(be.storageDirectoryAbsolutePath||ee||"");await navigator.clipboard.writeText(qe),yn.success("저장소 경로가 복사되었습니다",{description:"저장소 루트 경로가 클립보드에 복사되었습니다.",duration:3e3})}catch(qe){console.error("클립보드 복사 실패:",qe);try{const pt=Gu(be.storageDirectoryAbsolutePath||ee||""),Nt=document.createElement("textarea");Nt.value=pt,document.body.appendChild(Nt),Nt.select(),document.execCommand("copy"),document.body.removeChild(Nt),yn.success("저장소 경로가 복사되었습니다",{description:"저장소 루트 경로가 클립보드에 복사되었습니다.",duration:3e3})}catch{yn.error("경로 복사 실패",{description:"경로를 클립보드에 복사하는 중 오류가 발생했습니다.",duration:3e3})}}},className:"flex-1",children:[f.jsx(sO,{className:"w-4 h-4 mr-1"}),"경로 복사"]}),f.jsxs(At,{variant:"outline",size:"sm",onClick:async()=>{try{const qe=Gu(be.storageDirectoryAbsolutePath||ee||"");await navigator.clipboard.writeText(qe);const pt=Bt();yn.info("저장소 폴더 경로가 복사되었습니다",{description:pt.description,duration:5e3})}catch(qe){console.error("디렉토리 경로 복사 실패:",qe);try{const pt=Gu(be.storageDirectoryAbsolutePath||ee||""),Nt=document.createElement("textarea");Nt.value=pt,document.body.appendChild(Nt),Nt.select(),document.execCommand("copy"),document.body.removeChild(Nt);const Kt=Bt();yn.info("저장소 폴더 경로가 복사되었습니다",{description:Kt.description,duration:5e3})}catch{yn.error("폴더 열기 실패",{description:"폴더 경로를 복사하는 중 오류가 발생했습니다.",duration:3e3})}}},className:"flex-1",title:Bt().title,children:[f.jsx(Vl,{className:"w-4 h-4 mr-1"}),"폴더 열기"]})]})]})]})]}):f.jsx("div",{className:"border-red-600 bg-red-900/20 border-l-4 border-l-red-600 w-full rounded-lg",children:f.jsxs("div",{className:"flex flex-col items-center justify-center text-center px-8 py-8",children:[f.jsx(s0,{className:"h-12 w-12 text-red-400 mb-6"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-2xl font-bold text-red-200",children:"디바이스를 연결해주세요!"}),f.jsx("p",{className:"text-lg text-red-300",children:"데이터 수집 및 레코딩을 위해서는 LINK BAND 디바이스 연결이 필요합니다."}),f.jsx("p",{className:"text-lg text-red-200/80",children:"Device Manager 탭에서 디바이스를 연결한 후 다시 시도해주세요."})]})]})}),f.jsxs(Ye,{className:"p-4",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("h3",{className:"font-medium",children:"레코딩 제어"}),f.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:tr("w-2 h-2 rounded-full",B?"bg-green-500":"bg-gray-400")}),f.jsx("span",{className:B?"text-green-600":"text-muted-foreground",children:B?"디바이스 연결됨":"디바이스 연결 안됨"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:tr("w-2 h-2 rounded-full",te?"bg-green-500":"bg-gray-400")}),f.jsx("span",{className:te?"text-green-600":"text-muted-foreground",children:te?"저장소 준비됨":"저장소 설정 필요"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:tr("w-2 h-2 rounded-full",R?"bg-blue-500 animate-pulse":"bg-gray-400")}),f.jsx("span",{className:R?"text-blue-600":"text-muted-foreground",children:R?"데이터 스트리밍 중":"스트리밍 중지"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:tr("w-2 h-2 rounded-full",Y.isWriting?"bg-red-500 animate-pulse":"bg-gray-400")}),f.jsx("span",{className:Y.isWriting?"text-red-600":"text-muted-foreground",children:Y.isWriting?"파일 저장 중":"저장 대기"})]})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[!Z&&f.jsx(xo,{placeholder:"세션 이름 (선택사항)",value:s,onChange:qe=>o(qe.target.value),className:"w-48"}),Z&&f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-sm font-medium",children:Z.name}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:["지속 시간: ",S]}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:["파일 크기: ",Ge(Z.estimatedSize||0)]})]}),f.jsx(At,{onClick:ut,disabled:!B||!te,className:tr(Z?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:Z?f.jsxs(f.Fragment,{children:[f.jsx(zue,{className:"w-4 h-4 mr-2"}),"레코딩 중지"]}):f.jsxs(f.Fragment,{children:[f.jsx(oM,{className:"w-4 h-4 mr-2"}),"레코딩 시작"]})})]})]}),!Z&&f.jsxs("div",{className:"mt-4 pt-4 border-t",children:[f.jsx("h4",{className:"text-sm font-medium mb-3",children:"저장 형식 설정"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"파일 형식"}),f.jsxs(Wg,{value:Ee,onValueChange:ze,children:[f.jsx(CA,{className:"bg-background border-input",children:f.jsx(qg,{placeholder:"파일 형식 선택"})}),f.jsxs(BA,{children:[f.jsx(Jn,{value:"csv",children:"CSV (쉼표로 구분된 값)"}),f.jsx(Jn,{value:"json",children:"JSON (JavaScript Object Notation)"}),f.jsx(Jn,{value:"jsonl",children:"JSON Lines (줄별 JSON)"}),f.jsx(Jn,{value:"binary",children:"Binary (바이너리 형식)"})]})]}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"선택한 형식이 기본값으로 저장됩니다."})]})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-2",children:"저장할 데이터 타입"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(a).map(([qe,pt])=>f.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[f.jsx("input",{type:"checkbox",checked:pt,onChange:Nt=>{const Kt={...a,[qe]:Nt.target.checked};i(Kt),_e({defaultSaveOptions:Kt}),console.log("[DATACENTER] 🔧 저장 옵션 변경됨:",Kt)},className:"rounded border-input text-primary focus:ring-primary"}),f.jsx("span",{children:qe.replace(/([A-Z])/g," $1").trim().replace(/^eeg/i,"EEG").replace(/^ppg/i,"PPG").replace(/^acc/i,"ACC").replace(/\beeg\b/gi,"EEG").replace(/\bppg\b/gi,"PPG").replace(/\bacc\b/gi,"ACC")})]},qe))})]})]})]})]}),f.jsx(Ye,{className:"p-6",children:f.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[f.jsx("div",{className:"flex-1",children:f.jsxs("div",{className:"relative",children:[f.jsx(Og,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),f.jsx(xo,{placeholder:"세션 이름 또는 디바이스로 검색...",value:r,onChange:qe=>e(qe.target.value),className:"pl-10"})]})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("select",{value:t,onChange:qe=>n(qe.target.value),className:"px-3 py-2 border border-input bg-neutral-700 text-white rounded-md text-sm",children:gt.map(qe=>f.jsx("option",{value:qe.value,children:qe.label},qe.value))}),f.jsxs(At,{variant:"outline",size:"sm",children:[f.jsx(Gue,{className:"w-4 h-4 mr-2"}),"고급 필터"]})]})]})}),f.jsxs(Ye,{className:"p-6",children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"저장된 세션"}),f.jsx("div",{className:"flex items-center space-x-2",children:f.jsxs(At,{variant:"outline",size:"sm",onClick:()=>h(!u),children:[f.jsx(Vue,{className:"h-4 w-4"}),d==="newest"?"최신순":"오래된순"]})})]})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b",children:[f.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"세션 이름"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"날짜/시간"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"지속 시간"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"디바이스"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"데이터 타입"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"크기"}),f.jsx("th",{className:"text-left py-3 px-4 font-medium",children:"작업"})]})}),f.jsx("tbody",{children:Le.map(qe=>f.jsxs("tr",{className:"border-b hover:bg-neutral-700/50",children:[f.jsx("td",{className:"py-3 px-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Us,{className:"w-4 h-4 text-muted-foreground"}),f.jsx("span",{className:"font-medium",children:qe.name})]})}),f.jsx("td",{className:"py-3 px-4",children:f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(j0,{className:"w-4 h-4 text-muted-foreground"}),f.jsx("span",{children:qe.date}),f.jsx(Co,{className:"w-4 h-4 text-muted-foreground ml-2"}),f.jsx("span",{children:qe.time})]})}),f.jsx("td",{className:"py-3 px-4 text-sm",children:qe.duration}),f.jsx("td",{className:"py-3 px-4 text-sm",children:qe.deviceName}),f.jsx("td",{className:"py-3 px-4",children:f.jsx("div",{className:"flex gap-1",children:qe.formats.map(pt=>f.jsx(Gt,{variant:"outline",className:"text-xs",children:pt},pt))})}),f.jsx("td",{className:"py-3 px-4 text-sm",children:qe.totalSize}),f.jsx("td",{className:"py-3 px-4",children:f.jsxs("div",{className:"flex gap-1",children:[f.jsx(At,{variant:"outline",size:"sm",onClick:()=>kt(qe),title:"절대 경로 복사 (클립보드에 복사)",children:f.jsx(sO,{className:"w-4 h-4"})}),f.jsx(At,{variant:"outline",size:"sm",onClick:()=>it(qe.id),title:"세션 내보내기",children:f.jsx(vh,{className:"w-4 h-4"})}),f.jsx(At,{variant:"outline",size:"sm",onClick:()=>ht(qe.id),className:"text-red-600 hover:text-red-700",title:"세션 삭제",children:f.jsx(hP,{className:"w-4 h-4"})})]})})]},qe.id))})]})}),Le.length===0&&f.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[f.jsx(go,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),f.jsx("p",{children:"검색 조건에 맞는 데이터가 없습니다."}),f.jsx("p",{className:"text-sm",children:"다른 검색어나 필터를 시도해보세요."})]})]})]}),f.jsx(Ume,{open:l,onOpenChange:c}),f.jsx(qme,{open:g,onOpenChange:qe=>{p(qe),qe||setTimeout(()=>{m(null)},200)},session:v,onExport:Vt})]})}var mN="Tabs",[Zme,dKe]=F0(mN,[SW]),nJ=SW(),[Jme,_k]=Zme(mN),aJ=K.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...c}=r,u=lP(o),[h,d]=n0({prop:n,onChange:a,defaultProp:i??"",caller:mN});return f.jsx(Jme,{scope:t,baseId:nw(),value:h,onValueChange:d,orientation:s,dir:u,activationMode:l,children:f.jsx(_n.div,{dir:u,"data-orientation":s,...c,ref:e})})});aJ.displayName=mN;var iJ="TabsList",sJ=K.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...a}=r,i=_k(iJ,t),s=nJ(t);return f.jsx($ue,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:n,children:f.jsx(_n.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:e})})});sJ.displayName=iJ;var oJ="TabsTrigger",lJ=K.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:a=!1,...i}=r,s=_k(oJ,t),o=nJ(t),l=hJ(s.baseId,n),c=dJ(s.baseId,n),u=n===s.value;return f.jsx(Kue,{asChild:!0,...o,focusable:!a,active:u,children:f.jsx(_n.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:e,onMouseDown:Yr(r.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?s.onValueChange(n):h.preventDefault()}),onKeyDown:Yr(r.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(n)}),onFocus:Yr(r.onFocus,()=>{const h=s.activationMode!=="manual";!u&&!a&&h&&s.onValueChange(n)})})})});lJ.displayName=oJ;var cJ="TabsContent",uJ=K.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:a,children:i,...s}=r,o=_k(cJ,t),l=hJ(o.baseId,n),c=dJ(o.baseId,n),u=n===o.value,h=K.useRef(u);return K.useEffect(()=>{const d=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(d)},[]),f.jsx(_W,{present:a||u,children:({present:d})=>f.jsx(_n.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!d,id:c,tabIndex:0,...s,ref:e,style:{...r.style,animationDuration:h.current?"0s":void 0},children:d&&i})})});uJ.displayName=cJ;function hJ(r,e){return`${r}-trigger-${e}`}function dJ(r,e){return`${r}-content-${e}`}var eve=aJ,AJ=sJ,fJ=lJ,gJ=uJ;const Ck=eve,vN=K.forwardRef(({className:r,...e},t)=>f.jsx(AJ,{ref:t,className:tr("inline-flex h-10 items-center justify-center rounded-lg bg-neutral-800 p-1 text-muted-foreground gap-1",r),...e}));vN.displayName=AJ.displayName;const sl=K.forwardRef(({className:r,...e},t)=>f.jsx(fJ,{ref:t,className:tr("inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-2 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:shadow-sm data-[state=inactive]:bg-neutral-700 data-[state=inactive]:text-gray-300 data-[state=inactive]:border data-[state=inactive]:border-neutral-600 hover:bg-neutral-600 hover:text-white",r),...e}));sl.displayName=fJ.displayName;const ol=K.forwardRef(({className:r,...e},t)=>f.jsx(gJ,{ref:t,className:tr("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));ol.displayName=gJ.displayName;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var b3=function(r,e){return b3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},b3(r,e)};function Pe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");b3(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var tve=function(){function r(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return r}(),rve=function(){function r(){this.browser=new tve,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return r}(),fr=new rve;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(fr.wxa=!0,fr.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?fr.worker=!0:!fr.hasGlobalWindow||"Deno"in window?(fr.node=!0,fr.svgSupported=!0):nve(navigator.userAgent,fr);function nve(r,e){var t=e.browser,n=r.match(/Firefox\/([\d.]+)/),a=r.match(/MSIE\s([\d.]+)/)||r.match(/Trident\/.+?rv:(([\d.]+))/),i=r.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(r);n&&(t.firefox=!0,t.version=n[1]),a&&(t.ie=!0,t.version=a[1]),i&&(t.edge=!0,t.version=i[1],t.newEdge=+i[1].split(".")[0]>18),s&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var o=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in o||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}var Bk=12,pJ="sans-serif",OA=Bk+"px "+pJ,ave=20,ive=100,sve="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function ove(r){var e={};if(typeof JSON>"u")return e;for(var t=0;t<r.length;t++){var n=String.fromCharCode(t+32),a=(r.charCodeAt(t)-ave)/ive;e[n]=a}return e}var lve=ove(sve),UA={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var r,e;return function(t,n){if(!r){var a=UA.createCanvas();r=a&&a.getContext("2d")}if(r)return e!==n&&(e=r.font=n||OA),r.measureText(t);t=t||"",n=n||OA;var i=/((?:\d+)?\.?\d*)px/.exec(n),s=i&&+i[1]||Bk,o=0;if(n.indexOf("mono")>=0)o=s*t.length;else for(var l=0;l<t.length;l++){var c=lve[t[l]];o+=c==null?s:c*s}return{width:o}}}(),loadImage:function(r,e,t){var n=new Image;return n.onload=e,n.onerror=t,n.src=r,n}},mJ=nu(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(r,e){return r["[object "+e+"]"]=!0,r},{}),vJ=nu(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(r,e){return r["[object "+e+"Array]"]=!0,r},{}),Z0=Object.prototype.toString,yN=Array.prototype,cve=yN.forEach,uve=yN.filter,Nk=yN.slice,hve=yN.map,a8=(function(){}).constructor,W2=a8?a8.prototype:null,Tk="__proto__",dve=2311;function yJ(){return dve++}function Ik(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];typeof console<"u"&&console.error.apply(console,r)}function Ft(r){if(r==null||typeof r!="object")return r;var e=r,t=Z0.call(r);if(t==="[object Array]"){if(!w1(r)){e=[];for(var n=0,a=r.length;n<a;n++)e[n]=Ft(r[n])}}else if(vJ[t]){if(!w1(r)){var i=r.constructor;if(i.from)e=i.from(r);else{e=new i(r.length);for(var n=0,a=r.length;n<a;n++)e[n]=r[n]}}}else if(!mJ[t]&&!w1(r)&&!w0(r)){e={};for(var s in r)r.hasOwnProperty(s)&&s!==Tk&&(e[s]=Ft(r[s]))}return e}function qt(r,e,t){if(!Pt(e)||!Pt(r))return t?Ft(e):r;for(var n in e)if(e.hasOwnProperty(n)&&n!==Tk){var a=r[n],i=e[n];Pt(i)&&Pt(a)&&!$e(i)&&!$e(a)&&!w0(i)&&!w0(a)&&!i8(i)&&!i8(a)&&!w1(i)&&!w1(a)?qt(a,i,t):(t||!(n in r))&&(r[n]=Ft(e[n]))}return r}function Ek(r,e){for(var t=r[0],n=1,a=r.length;n<a;n++)t=qt(t,r[n],e);return t}function He(r,e){if(Object.assign)Object.assign(r,e);else for(var t in e)e.hasOwnProperty(t)&&t!==Tk&&(r[t]=e[t]);return r}function Lt(r,e,t){for(var n=pr(e),a=0,i=n.length;a<i;a++){var s=n[a];(t?e[s]!=null:r[s]==null)&&(r[s]=e[s])}return r}function rr(r,e){if(r){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t}return-1}function Ave(r,e){var t=r.prototype;function n(){}n.prototype=e.prototype,r.prototype=new n;for(var a in t)t.hasOwnProperty(a)&&(r.prototype[a]=t[a]);r.prototype.constructor=r,r.superClass=e}function Ia(r,e,t){if(r="prototype"in r?r.prototype:r,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(e),a=0;a<n.length;a++){var i=n[a];i!=="constructor"&&(t?e[i]!=null:r[i]==null)&&(r[i]=e[i])}else Lt(r,e,t)}function Ki(r){return!r||typeof r=="string"?!1:typeof r.length=="number"}function X(r,e,t){if(r&&e)if(r.forEach&&r.forEach===cve)r.forEach(e,t);else if(r.length===+r.length)for(var n=0,a=r.length;n<a;n++)e.call(t,r[n],n,r);else for(var i in r)r.hasOwnProperty(i)&&e.call(t,r[i],i,r)}function We(r,e,t){if(!r)return[];if(!e)return Dk(r);if(r.map&&r.map===hve)return r.map(e,t);for(var n=[],a=0,i=r.length;a<i;a++)n.push(e.call(t,r[a],a,r));return n}function nu(r,e,t,n){if(r&&e){for(var a=0,i=r.length;a<i;a++)t=e.call(n,t,r[a],a,r);return t}}function Ur(r,e,t){if(!r)return[];if(!e)return Dk(r);if(r.filter&&r.filter===uve)return r.filter(e,t);for(var n=[],a=0,i=r.length;a<i;a++)e.call(t,r[a],a,r)&&n.push(r[a]);return n}function fve(r,e,t){if(r&&e){for(var n=0,a=r.length;n<a;n++)if(e.call(t,r[n],n,r))return r[n]}}function pr(r){if(!r)return[];if(Object.keys)return Object.keys(r);var e=[];for(var t in r)r.hasOwnProperty(t)&&e.push(t);return e}function gve(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return function(){return r.apply(e,t.concat(Nk.call(arguments)))}}var ft=W2&&It(W2.bind)?W2.call.bind(W2.bind):gve;function Wt(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return r.apply(this,e.concat(Nk.call(arguments)))}}function $e(r){return Array.isArray?Array.isArray(r):Z0.call(r)==="[object Array]"}function It(r){return typeof r=="function"}function dt(r){return typeof r=="string"}function w3(r){return Z0.call(r)==="[object String]"}function Br(r){return typeof r=="number"}function Pt(r){var e=typeof r;return e==="function"||!!r&&e==="object"}function i8(r){return!!mJ[Z0.call(r)]}function zs(r){return!!vJ[Z0.call(r)]}function w0(r){return typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.ownerDocument=="object"}function xN(r){return r.colorStops!=null}function pve(r){return r.image!=null}function mve(r){return Z0.call(r)==="[object RegExp]"}function pb(r){return r!==r}function di(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=0,n=r.length;t<n;t++)if(r[t]!=null)return r[t]}function $t(r,e){return r??e}function Zc(r,e,t){return r??e??t}function Dk(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return Nk.apply(r,e)}function Mk(r){if(typeof r=="number")return[r,r,r,r];var e=r.length;return e===2?[r[0],r[1],r[0],r[1]]:e===3?[r[0],r[1],r[2],r[1]]:r}function gs(r,e){if(!r)throw new Error(e)}function Kl(r){return r==null?null:typeof r.trim=="function"?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var xJ="__ec_primitive__";function cC(r){r[xJ]=!0}function w1(r){return r[xJ]}var vve=function(){function r(){this.data={}}return r.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},r.prototype.has=function(e){return this.data.hasOwnProperty(e)},r.prototype.get=function(e){return this.data[e]},r.prototype.set=function(e,t){return this.data[e]=t,this},r.prototype.keys=function(){return pr(this.data)},r.prototype.forEach=function(e){var t=this.data;for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},r}(),bJ=typeof Map=="function";function yve(){return bJ?new Map:new vve}var xve=function(){function r(e){var t=$e(e);this.data=yve();var n=this;e instanceof r?e.each(a):e&&X(e,a);function a(i,s){t?n.set(i,s):n.set(s,i)}}return r.prototype.hasKey=function(e){return this.data.has(e)},r.prototype.get=function(e){return this.data.get(e)},r.prototype.set=function(e,t){return this.data.set(e,t),t},r.prototype.each=function(e,t){this.data.forEach(function(n,a){e.call(t,n,a)})},r.prototype.keys=function(){var e=this.data.keys();return bJ?Array.from(e):e},r.prototype.removeKey=function(e){this.data.delete(e)},r}();function bt(r){return new xve(r)}function mb(r,e){for(var t=new r.constructor(r.length+e.length),n=0;n<r.length;n++)t[n]=r[n];for(var a=r.length,n=0;n<e.length;n++)t[n+a]=e[n];return t}function bN(r,e){var t;if(Object.create)t=Object.create(r);else{var n=function(){};n.prototype=r,t=new n}return e&&He(t,e),t}function wJ(r){var e=r.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function vt(r,e){return r.hasOwnProperty(e)}function Aa(){}var $_=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S3=function(r,e){return S3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},S3(r,e)};function Rn(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");S3(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Pp(r,e){return r==null&&(r=0),e==null&&(e=0),[r,e]}function as(r,e){return r[0]=e[0],r[1]=e[1],r}function hh(r){return[r[0],r[1]]}function bve(r,e,t){return r[0]=e,r[1]=t,r}function s8(r,e,t){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r}function _3(r,e,t,n){return r[0]=e[0]+t[0]*n,r[1]=e[1]+t[1]*n,r}function Ng(r,e,t){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r}function C3(r){return Math.sqrt(wve(r))}function wve(r){return r[0]*r[0]+r[1]*r[1]}function K_(r,e,t){return r[0]=e[0]*t,r[1]=e[1]*t,r}function J0(r,e){var t=C3(e);return t===0?(r[0]=0,r[1]=0):(r[0]=e[0]/t,r[1]=e[1]/t),r}function B3(r,e){return Math.sqrt((r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1]))}var tA=B3;function Sve(r,e){return(r[0]-e[0])*(r[0]-e[0])+(r[1]-e[1])*(r[1]-e[1])}var Yg=Sve;function W_(r,e,t,n){return r[0]=e[0]+n*(t[0]-e[0]),r[1]=e[1]+n*(t[1]-e[1]),r}function Ci(r,e,t){var n=e[0],a=e[1];return r[0]=t[0]*n+t[2]*a+t[4],r[1]=t[1]*n+t[3]*a+t[5],r}function rA(r,e,t){return r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r}function nA(r,e,t){return r[0]=Math.max(e[0],t[0]),r[1]=Math.max(e[1],t[1]),r}var xm=function(){function r(e,t){this.target=e,this.topTarget=t&&t.topTarget}return r}(),_ve=function(){function r(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return r.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new xm(t,e),"dragstart",e.event))},r.prototype._drag=function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,a=e.offsetY,i=n-this._x,s=a-this._y;this._x=n,this._y=a,t.drift(i,s,e),this.handler.dispatchToElement(new xm(t,e),"drag",e.event);var o=this.handler.findHover(n,a,t).target,l=this._dropTarget;this._dropTarget=o,t!==o&&(l&&o!==l&&this.handler.dispatchToElement(new xm(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new xm(o,e),"dragenter",e.event))}},r.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new xm(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new xm(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},r}(),vl=function(){function r(e){e&&(this._$eventProcessor=e)}return r.prototype.on=function(e,t,n,a){this._$handlers||(this._$handlers={});var i=this._$handlers;if(typeof t=="function"&&(a=n,n=t,t=null),!n||!e)return this;var s=this._$eventProcessor;t!=null&&s&&s.normalizeQuery&&(t=s.normalizeQuery(t)),i[e]||(i[e]=[]);for(var o=0;o<i[e].length;o++)if(i[e][o].h===n)return this;var l={h:n,query:t,ctx:a||this,callAtLast:n.zrEventfulCallAtLast},c=i[e].length-1,u=i[e][c];return u&&u.callAtLast?i[e].splice(c,0,l):i[e].push(l),this},r.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},r.prototype.off=function(e,t){var n=this._$handlers;if(!n)return this;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var a=[],i=0,s=n[e].length;i<s;i++)n[e][i].h!==t&&a.push(n[e][i]);n[e]=a}n[e]&&n[e].length===0&&delete n[e]}else delete n[e];return this},r.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this._$handlers)return this;var a=this._$handlers[e],i=this._$eventProcessor;if(a)for(var s=t.length,o=a.length,l=0;l<o;l++){var c=a[l];if(!(i&&i.filter&&c.query!=null&&!i.filter(e,c.query)))switch(s){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t);break}}return i&&i.afterTrigger&&i.afterTrigger(e),this},r.prototype.triggerWithContext=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this._$handlers)return this;var a=this._$handlers[e],i=this._$eventProcessor;if(a)for(var s=t.length,o=t[s-1],l=a.length,c=0;c<l;c++){var u=a[c];if(!(i&&i.filter&&u.query!=null&&!i.filter(e,u.query)))switch(s){case 0:u.h.call(o);break;case 1:u.h.call(o,t[0]);break;case 2:u.h.call(o,t[0],t[1]);break;default:u.h.apply(o,t.slice(1,s-1));break}}return i&&i.afterTrigger&&i.afterTrigger(e),this},r}(),Cve=Math.log(2);function N3(r,e,t,n,a,i){var s=n+"-"+a,o=r.length;if(i.hasOwnProperty(s))return i[s];if(e===1){var l=Math.round(Math.log((1<<o)-1&~a)/Cve);return r[t][l]}for(var c=n|1<<t,u=t+1;n&1<<u;)u++;for(var h=0,d=0,A=0;d<o;d++){var g=1<<d;g&a||(h+=(A%2?-1:1)*r[t][d]*N3(r,e-1,u,c,a|g,i),A++)}return i[s]=h,h}function o8(r,e){var t=[[r[0],r[1],1,0,0,0,-e[0]*r[0],-e[0]*r[1]],[0,0,0,r[0],r[1],1,-e[1]*r[0],-e[1]*r[1]],[r[2],r[3],1,0,0,0,-e[2]*r[2],-e[2]*r[3]],[0,0,0,r[2],r[3],1,-e[3]*r[2],-e[3]*r[3]],[r[4],r[5],1,0,0,0,-e[4]*r[4],-e[4]*r[5]],[0,0,0,r[4],r[5],1,-e[5]*r[4],-e[5]*r[5]],[r[6],r[7],1,0,0,0,-e[6]*r[6],-e[6]*r[7]],[0,0,0,r[6],r[7],1,-e[7]*r[6],-e[7]*r[7]]],n={},a=N3(t,8,0,0,0,n);if(a!==0){for(var i=[],s=0;s<8;s++)for(var o=0;o<8;o++)i[o]==null&&(i[o]=0),i[o]+=((s+o)%2?-1:1)*N3(t,7,s===0?1:0,1<<s,1<<o,n)/a*e[s];return function(l,c,u){var h=c*i[6]+u*i[7]+1;l[0]=(c*i[0]+u*i[1]+i[2])/h,l[1]=(c*i[3]+u*i[4]+i[5])/h}}}var l8="___zrEVENTSAVED",QI=[];function Bve(r,e,t,n,a){return T3(QI,e,n,a,!0)&&T3(r,t,QI[0],QI[1])}function T3(r,e,t,n,a){if(e.getBoundingClientRect&&fr.domSupported&&!SJ(e)){var i=e[l8]||(e[l8]={}),s=Nve(e,i),o=Tve(s,i,a);if(o)return o(r,t,n),!0}return!1}function Nve(r,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var n=["left","right"],a=["top","bottom"],i=0;i<4;i++){var s=document.createElement("div"),o=s.style,l=i%2,c=(i>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",a[c]+":0",n[1-l]+":auto",a[1-c]+":auto",""].join("!important;"),r.appendChild(s),t.push(s)}return t}function Tve(r,e,t){for(var n=t?"invTrans":"trans",a=e[n],i=e.srcCoords,s=[],o=[],l=!0,c=0;c<4;c++){var u=r[c].getBoundingClientRect(),h=2*c,d=u.left,A=u.top;s.push(d,A),l=l&&i&&d===i[h]&&A===i[h+1],o.push(r[c].offsetLeft,r[c].offsetTop)}return l&&a?a:(e.srcCoords=s,e[n]=t?o8(o,s):o8(s,o))}function SJ(r){return r.nodeName.toUpperCase()==="CANVAS"}var Ive=/([&<>"'])/g,Eve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function cs(r){return r==null?"":(r+"").replace(Ive,function(e,t){return Eve[t]})}var Dve=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,zI=[],Mve=fr.browser.firefox&&+fr.browser.version.split(".")[0]<39;function I3(r,e,t,n){return t=t||{},n?c8(r,e,t):Mve&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):c8(r,e,t),t}function c8(r,e,t){if(fr.domSupported&&r.getBoundingClientRect){var n=e.clientX,a=e.clientY;if(SJ(r)){var i=r.getBoundingClientRect();t.zrX=n-i.left,t.zrY=a-i.top;return}else if(T3(zI,r,n,a)){t.zrX=zI[0],t.zrY=zI[1];return}}t.zrX=t.zrY=0}function Rk(r){return r||window.event}function Qo(r,e,t){if(e=Rk(e),e.zrX!=null)return e;var n=e.type,a=n&&n.indexOf("touch")>=0;if(a){var s=n!=="touchend"?e.targetTouches[0]:e.changedTouches[0];s&&I3(r,s,e,t)}else{I3(r,e,e,t);var i=Rve(e);e.zrDelta=i?i/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&Dve.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function Rve(r){var e=r.wheelDelta;if(e)return e;var t=r.deltaX,n=r.deltaY;if(t==null||n==null)return e;var a=Math.abs(n!==0?n:t),i=n>0?-1:n<0?1:t>0?-1:1;return 3*a*i}function E3(r,e,t,n){r.addEventListener(e,t,n)}function Lve(r,e,t,n){r.removeEventListener(e,t,n)}var Sh=function(r){r.preventDefault(),r.stopPropagation(),r.cancelBubble=!0};function u8(r){return r.which===2||r.which===3}var Pve=function(){function r(){this._track=[]}return r.prototype.recognize=function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},r.prototype.clear=function(){return this._track.length=0,this},r.prototype._doTrack=function(e,t,n){var a=e.touches;if(a){for(var i={points:[],touches:[],target:t,event:e},s=0,o=a.length;s<o;s++){var l=a[s],c=I3(n,l,{});i.points.push([c.zrX,c.zrY]),i.touches.push(l)}this._track.push(i)}},r.prototype._recognize=function(e){for(var t in GI)if(GI.hasOwnProperty(t)){var n=GI[t](this._track,e);if(n)return n}},r}();function h8(r){var e=r[1][0]-r[0][0],t=r[1][1]-r[0][1];return Math.sqrt(e*e+t*t)}function kve(r){return[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]}var GI={pinch:function(r,e){var t=r.length;if(t){var n=(r[t-1]||{}).points,a=(r[t-2]||{}).points||n;if(a&&a.length>1&&n&&n.length>1){var i=h8(n)/h8(a);!isFinite(i)&&(i=1),e.pinchScale=i;var s=kve(n);return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:r[0].target,event:e}}}}};function bo(){return[1,0,0,1,0,0]}function wN(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function Lk(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function dh(r,e,t){var n=e[0]*t[0]+e[2]*t[1],a=e[1]*t[0]+e[3]*t[1],i=e[0]*t[2]+e[2]*t[3],s=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return r[0]=n,r[1]=a,r[2]=i,r[3]=s,r[4]=o,r[5]=l,r}function au(r,e,t){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4]+t[0],r[5]=e[5]+t[1],r}function kp(r,e,t,n){n===void 0&&(n=[0,0]);var a=e[0],i=e[2],s=e[4],o=e[1],l=e[3],c=e[5],u=Math.sin(t),h=Math.cos(t);return r[0]=a*h+o*u,r[1]=-a*u+o*h,r[2]=i*h+l*u,r[3]=-i*u+h*l,r[4]=h*(s-n[0])+u*(c-n[1])+n[0],r[5]=h*(c-n[1])-u*(s-n[0])+n[1],r}function Pk(r,e,t){var n=t[0],a=t[1];return r[0]=e[0]*n,r[1]=e[1]*a,r[2]=e[2]*n,r[3]=e[3]*a,r[4]=e[4]*n,r[5]=e[5]*a,r}function ey(r,e){var t=e[0],n=e[2],a=e[4],i=e[1],s=e[3],o=e[5],l=t*s-i*n;return l?(l=1/l,r[0]=s*l,r[1]=-i*l,r[2]=-n*l,r[3]=t*l,r[4]=(n*o-s*a)*l,r[5]=(i*a-t*o)*l,r):null}function Fve(r){var e=bo();return Lk(e,r),e}var Xt=function(){function r(e,t){this.x=e||0,this.y=t||0}return r.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set=function(e,t){return this.x=e,this.y=t,this},r.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},r.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},r.prototype.scale=function(e){this.x*=e,this.y*=e},r.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},r.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},r.prototype.dot=function(e){return this.x*e.x+this.y*e.y},r.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},r.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},r.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},r.prototype.distanceSquare=function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.transform=function(e){if(e){var t=this.x,n=this.y;return this.x=e[0]*t+e[2]*n+e[4],this.y=e[1]*t+e[3]*n+e[5],this}},r.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},r.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},r.set=function(e,t,n){e.x=t,e.y=n},r.copy=function(e,t){e.x=t.x,e.y=t.y},r.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},r.lenSquare=function(e){return e.x*e.x+e.y*e.y},r.dot=function(e,t){return e.x*t.x+e.y*t.y},r.add=function(e,t,n){e.x=t.x+n.x,e.y=t.y+n.y},r.sub=function(e,t,n){e.x=t.x-n.x,e.y=t.y-n.y},r.scale=function(e,t,n){e.x=t.x*n,e.y=t.y*n},r.scaleAndAdd=function(e,t,n,a){e.x=t.x+n.x*a,e.y=t.y+n.y*a},r.lerp=function(e,t,n,a){var i=1-a;e.x=i*t.x+a*n.x,e.y=i*t.y+a*n.y},r}(),q2=Math.min,Y2=Math.max,If=new Xt,Ef=new Xt,Df=new Xt,Mf=new Xt,$y=new Xt,Ky=new Xt,Zt=function(){function r(e,t,n,a){n<0&&(e=e+n,n=-n),a<0&&(t=t+a,a=-a),this.x=e,this.y=t,this.width=n,this.height=a}return r.prototype.union=function(e){var t=q2(e.x,this.x),n=q2(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Y2(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=Y2(e.y+e.height,this.y+this.height)-n:this.height=e.height,this.x=t,this.y=n},r.prototype.applyTransform=function(e){r.applyTransform(this,this,e)},r.prototype.calculateTransform=function(e){var t=this,n=e.width/t.width,a=e.height/t.height,i=bo();return au(i,i,[-t.x,-t.y]),Pk(i,i,[n,a]),au(i,i,[e.x,e.y]),i},r.prototype.intersect=function(e,t){if(!e)return!1;e instanceof r||(e=r.create(e));var n=this,a=n.x,i=n.x+n.width,s=n.y,o=n.y+n.height,l=e.x,c=e.x+e.width,u=e.y,h=e.y+e.height,d=!(i<l||c<a||o<u||h<s);if(t){var A=1/0,g=0,p=Math.abs(i-l),v=Math.abs(c-a),m=Math.abs(o-u),y=Math.abs(h-s),x=Math.min(p,v),b=Math.min(m,y);i<l||c<a?x>g&&(g=x,p<v?Xt.set(Ky,-p,0):Xt.set(Ky,v,0)):x<A&&(A=x,p<v?Xt.set($y,p,0):Xt.set($y,-v,0)),o<u||h<s?b>g&&(g=b,m<y?Xt.set(Ky,0,-m):Xt.set(Ky,0,y)):x<A&&(A=x,m<y?Xt.set($y,0,m):Xt.set($y,0,-y))}return t&&Xt.copy(t,d?$y:Ky),d},r.prototype.contain=function(e,t){var n=this;return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copy=function(e){r.copy(this,e)},r.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},r.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},r.prototype.isZero=function(){return this.width===0||this.height===0},r.create=function(e){return new r(e.x,e.y,e.width,e.height)},r.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},r.applyTransform=function(e,t,n){if(!n){e!==t&&r.copy(e,t);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var a=n[0],i=n[3],s=n[4],o=n[5];e.x=t.x*a+s,e.y=t.y*i+o,e.width=t.width*a,e.height=t.height*i,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}If.x=Df.x=t.x,If.y=Mf.y=t.y,Ef.x=Mf.x=t.x+t.width,Ef.y=Df.y=t.y+t.height,If.transform(n),Mf.transform(n),Ef.transform(n),Df.transform(n),e.x=q2(If.x,Ef.x,Df.x,Mf.x),e.y=q2(If.y,Ef.y,Df.y,Mf.y);var l=Y2(If.x,Ef.x,Df.x,Mf.x),c=Y2(If.y,Ef.y,Df.y,Mf.y);e.width=l-e.x,e.height=c-e.y},r}(),_J="silent";function jve(r,e,t){return{type:r,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:Ove}}function Ove(){Sh(this.event)}var Uve=function(r){Rn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(vl),Wy=function(){function r(e,t){this.x=e,this.y=t}return r}(),Hve=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],VI=new Zt(0,0,0,0),CJ=function(r){Rn(e,r);function e(t,n,a,i,s){var o=r.call(this)||this;return o._hovered=new Wy(0,0),o.storage=t,o.painter=n,o.painterRoot=i,o._pointerSize=s,a=a||new Uve,o.proxy=null,o.setHandlerProxy(a),o._draggingMgr=new _ve(o),o}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(X(Hve,function(n){t.on&&t.on(n,this[n],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var n=t.zrX,a=t.zrY,i=BJ(this,n,a),s=this._hovered,o=s.target;o&&!o.__zr&&(s=this.findHover(s.x,s.y),o=s.target);var l=this._hovered=i?new Wy(n,a):this.findHover(n,a),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),o&&c!==o&&this.dispatchToElement(s,"mouseout",t),this.dispatchToElement(l,"mousemove",t),c&&c!==o&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var n=t.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Wy(0,0)},e.prototype.dispatch=function(t,n){var a=this[t];a&&a.call(this,n)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var n=this.proxy;n.setCursor&&n.setCursor(t)},e.prototype.dispatchToElement=function(t,n,a){t=t||{};var i=t.target;if(!(i&&i.silent)){for(var s="on"+n,o=jve(n,t,a);i&&(i[s]&&(o.cancelBubble=!!i[s].call(i,o)),i.trigger(n,o),i=i.__hostTarget?i.__hostTarget:i.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(n,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[s]=="function"&&l[s].call(l,o),l.trigger&&l.trigger(n,o)}))}},e.prototype.findHover=function(t,n,a){var i=this.storage.getDisplayList(),s=new Wy(t,n);if(d8(i,s,t,n,a),this._pointerSize&&!s.target){for(var o=[],l=this._pointerSize,c=l/2,u=new Zt(t-c,n-c,l,l),h=i.length-1;h>=0;h--){var d=i[h];d!==a&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&(VI.copy(d.getBoundingRect()),d.transform&&VI.applyTransform(d.transform),VI.intersect(u)&&o.push(d))}if(o.length)for(var A=4,g=Math.PI/12,p=Math.PI*2,v=0;v<c;v+=A)for(var m=0;m<p;m+=g){var y=t+v*Math.cos(m),x=n+v*Math.sin(m);if(d8(o,s,y,x,a),s.target)return s}}return s},e.prototype.processGesture=function(t,n){this._gestureMgr||(this._gestureMgr=new Pve);var a=this._gestureMgr;n==="start"&&a.clear();var i=a.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(n==="end"&&a.clear(),i){var s=i.type;t.gestureEvent=s;var o=new Wy;o.target=i.target,this.dispatchToElement(o,s,i.event)}},e}(vl);X(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(r){CJ.prototype[r]=function(e){var t=e.zrX,n=e.zrY,a=BJ(this,t,n),i,s;if((r!=="mouseup"||!a)&&(i=this.findHover(t,n),s=i.target),r==="mousedown")this._downEl=s,this._downPoint=[e.zrX,e.zrY],this._upEl=s;else if(r==="mouseup")this._upEl=s;else if(r==="click"){if(this._downEl!==this._upEl||!this._downPoint||tA(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(i,r,e)}});function Qve(r,e,t){if(r[r.rectHover?"rectContain":"contain"](e,t)){for(var n=r,a=void 0,i=!1;n;){if(n.ignoreClip&&(i=!0),!i){var s=n.getClipPath();if(s&&!s.contain(e,t))return!1}n.silent&&(a=!0);var o=n.__hostTarget;n=o||n.parent}return a?_J:!0}return!1}function d8(r,e,t,n,a){for(var i=r.length-1;i>=0;i--){var s=r[i],o=void 0;if(s!==a&&!s.ignore&&(o=Qve(s,t,n))&&(!e.topTarget&&(e.topTarget=s),o!==_J)){e.target=s;break}}}function BJ(r,e,t){var n=r.painter;return e<0||e>n.getWidth()||t<0||t>n.getHeight()}var NJ=32,qy=7;function zve(r){for(var e=0;r>=NJ;)e|=r&1,r>>=1;return r+e}function A8(r,e,t,n){var a=e+1;if(a===t)return 1;if(n(r[a++],r[e])<0){for(;a<t&&n(r[a],r[a-1])<0;)a++;Gve(r,e,a)}else for(;a<t&&n(r[a],r[a-1])>=0;)a++;return a-e}function Gve(r,e,t){for(t--;e<t;){var n=r[e];r[e++]=r[t],r[t--]=n}}function f8(r,e,t,n,a){for(n===e&&n++;n<t;n++){for(var i=r[n],s=e,o=n,l;s<o;)l=s+o>>>1,a(i,r[l])<0?o=l:s=l+1;var c=n-s;switch(c){case 3:r[s+3]=r[s+2];case 2:r[s+2]=r[s+1];case 1:r[s+1]=r[s];break;default:for(;c>0;)r[s+c]=r[s+c-1],c--}r[s]=i}}function $I(r,e,t,n,a,i){var s=0,o=0,l=1;if(i(r,e[t+a])>0){for(o=n-a;l<o&&i(r,e[t+a+l])>0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),s+=a,l+=a}else{for(o=a+1;l<o&&i(r,e[t+a-l])<=0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var c=s;s=a-l,l=a-c}for(s++;s<l;){var u=s+(l-s>>>1);i(r,e[t+u])>0?s=u+1:l=u}return l}function KI(r,e,t,n,a,i){var s=0,o=0,l=1;if(i(r,e[t+a])<0){for(o=a+1;l<o&&i(r,e[t+a-l])<0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var c=s;s=a-l,l=a-c}else{for(o=n-a;l<o&&i(r,e[t+a+l])>=0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),s+=a,l+=a}for(s++;s<l;){var u=s+(l-s>>>1);i(r,e[t+u])<0?l=u:s=u+1}return l}function Vve(r,e){var t=qy,n,a,i=0,s=[];n=[],a=[];function o(A,g){n[i]=A,a[i]=g,i+=1}function l(){for(;i>1;){var A=i-2;if(A>=1&&a[A-1]<=a[A]+a[A+1]||A>=2&&a[A-2]<=a[A]+a[A-1])a[A-1]<a[A+1]&&A--;else if(a[A]>a[A+1])break;u(A)}}function c(){for(;i>1;){var A=i-2;A>0&&a[A-1]<a[A+1]&&A--,u(A)}}function u(A){var g=n[A],p=a[A],v=n[A+1],m=a[A+1];a[A]=p+m,A===i-3&&(n[A+1]=n[A+2],a[A+1]=a[A+2]),i--;var y=KI(r[v],r,g,p,0,e);g+=y,p-=y,p!==0&&(m=$I(r[g+p-1],r,v,m,m-1,e),m!==0&&(p<=m?h(g,p,v,m):d(g,p,v,m)))}function h(A,g,p,v){var m=0;for(m=0;m<g;m++)s[m]=r[A+m];var y=0,x=p,b=A;if(r[b++]=r[x++],--v===0){for(m=0;m<g;m++)r[b+m]=s[y+m];return}if(g===1){for(m=0;m<v;m++)r[b+m]=r[x+m];r[b+v]=s[y];return}for(var S=t,_,C,w;;){_=0,C=0,w=!1;do if(e(r[x],s[y])<0){if(r[b++]=r[x++],C++,_=0,--v===0){w=!0;break}}else if(r[b++]=s[y++],_++,C=0,--g===1){w=!0;break}while((_|C)<S);if(w)break;do{if(_=KI(r[x],s,y,g,0,e),_!==0){for(m=0;m<_;m++)r[b+m]=s[y+m];if(b+=_,y+=_,g-=_,g<=1){w=!0;break}}if(r[b++]=r[x++],--v===0){w=!0;break}if(C=$I(s[y],r,x,v,0,e),C!==0){for(m=0;m<C;m++)r[b+m]=r[x+m];if(b+=C,x+=C,v-=C,v===0){w=!0;break}}if(r[b++]=s[y++],--g===1){w=!0;break}S--}while(_>=qy||C>=qy);if(w)break;S<0&&(S=0),S+=2}if(t=S,t<1&&(t=1),g===1){for(m=0;m<v;m++)r[b+m]=r[x+m];r[b+v]=s[y]}else{if(g===0)throw new Error;for(m=0;m<g;m++)r[b+m]=s[y+m]}}function d(A,g,p,v){var m=0;for(m=0;m<v;m++)s[m]=r[p+m];var y=A+g-1,x=v-1,b=p+v-1,S=0,_=0;if(r[b--]=r[y--],--g===0){for(S=b-(v-1),m=0;m<v;m++)r[S+m]=s[m];return}if(v===1){for(b-=g,y-=g,_=b+1,S=y+1,m=g-1;m>=0;m--)r[_+m]=r[S+m];r[b]=s[x];return}for(var C=t;;){var w=0,B=0,D=!1;do if(e(s[x],r[y])<0){if(r[b--]=r[y--],w++,B=0,--g===0){D=!0;break}}else if(r[b--]=s[x--],B++,w=0,--v===1){D=!0;break}while((w|B)<C);if(D)break;do{if(w=g-KI(s[x],r,A,g,g-1,e),w!==0){for(b-=w,y-=w,g-=w,_=b+1,S=y+1,m=w-1;m>=0;m--)r[_+m]=r[S+m];if(g===0){D=!0;break}}if(r[b--]=s[x--],--v===1){D=!0;break}if(B=v-$I(r[y],s,0,v,v-1,e),B!==0){for(b-=B,x-=B,v-=B,_=b+1,S=x+1,m=0;m<B;m++)r[_+m]=s[S+m];if(v<=1){D=!0;break}}if(r[b--]=r[y--],--g===0){D=!0;break}C--}while(w>=qy||B>=qy);if(D)break;C<0&&(C=0),C+=2}if(t=C,t<1&&(t=1),v===1){for(b-=g,y-=g,_=b+1,S=y+1,m=g-1;m>=0;m--)r[_+m]=r[S+m];r[b]=s[x]}else{if(v===0)throw new Error;for(S=b-(v-1),m=0;m<v;m++)r[S+m]=s[m]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:o}}function q_(r,e,t,n){t||(t=0),n||(n=r.length);var a=n-t;if(!(a<2)){var i=0;if(a<NJ){i=A8(r,t,n,e),f8(r,t,n,t+i,e);return}var s=Vve(r,e),o=zve(a);do{if(i=A8(r,t,n,e),i<o){var l=a;l>o&&(l=o),f8(r,t,t+l,t+i,e),i=l}s.pushRun(t,i),s.mergeRuns(),a-=i,t+=i}while(a!==0);s.forceMergeRuns()}}var uo=1,Qx=2,tv=4,g8=!1;function WI(){g8||(g8=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function p8(r,e){return r.zlevel===e.zlevel?r.z===e.z?r.z2-e.z2:r.z-e.z:r.zlevel-e.zlevel}var $ve=function(){function r(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=p8}return r.prototype.traverse=function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},r.prototype.getDisplayList=function(e,t){t=t||!1;var n=this._displayList;return(e||!n.length)&&this.updateDisplayList(t),n},r.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,a=0,i=t.length;a<i;a++)this._updateAndAddDisplayable(t[a],null,e);n.length=this._displayListLen,q_(n,p8)},r.prototype._updateAndAddDisplayable=function(e,t,n){if(!(e.ignore&&!n)){e.beforeUpdate(),e.update(),e.afterUpdate();var a=e.getClipPath();if(e.ignoreClip)t=null;else if(a){t?t=t.slice():t=[];for(var i=a,s=e;i;)i.parent=s,i.updateTransform(),t.push(i),s=i,i=i.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),l=0;l<o.length;l++){var c=o[l];e.__dirty&&(c.__dirty|=uo),this._updateAndAddDisplayable(c,t,n)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(WI(),u.z=0),isNaN(u.z2)&&(WI(),u.z2=0),isNaN(u.zlevel)&&(WI(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var h=e.getDecalElement&&e.getDecalElement();h&&this._updateAndAddDisplayable(h,t,n);var d=e.getTextGuideLine();d&&this._updateAndAddDisplayable(d,t,n);var A=e.getTextContent();A&&this._updateAndAddDisplayable(A,t,n)}},r.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},r.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,n=e.length;t<n;t++)this.delRoot(e[t]);return}var a=rr(this._roots,e);a>=0&&this._roots.splice(a,1)},r.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},r.prototype.getRoots=function(){return this._roots},r.prototype.dispose=function(){this._displayList=null,this._roots=null},r}(),uC;uC=fr.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(r){return setTimeout(r,16)};var S1={linear:function(r){return r},quadraticIn:function(r){return r*r},quadraticOut:function(r){return r*(2-r)},quadraticInOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)},cubicIn:function(r){return r*r*r},cubicOut:function(r){return--r*r*r+1},cubicInOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)},quarticIn:function(r){return r*r*r*r},quarticOut:function(r){return 1- --r*r*r*r},quarticInOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)},quinticIn:function(r){return r*r*r*r*r},quinticOut:function(r){return--r*r*r*r*r+1},quinticInOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)},sinusoidalIn:function(r){return 1-Math.cos(r*Math.PI/2)},sinusoidalOut:function(r){return Math.sin(r*Math.PI/2)},sinusoidalInOut:function(r){return .5*(1-Math.cos(Math.PI*r))},exponentialIn:function(r){return r===0?0:Math.pow(1024,r-1)},exponentialOut:function(r){return r===1?1:1-Math.pow(2,-10*r)},exponentialInOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)},circularIn:function(r){return 1-Math.sqrt(1-r*r)},circularOut:function(r){return Math.sqrt(1- --r*r)},circularInOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)},elasticIn:function(r){var e,t=.1,n=.4;return r===0?0:r===1?1:(!t||t<1?(t=1,e=n/4):e=n*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(r-=1))*Math.sin((r-e)*(2*Math.PI)/n)))},elasticOut:function(r){var e,t=.1,n=.4;return r===0?0:r===1?1:(!t||t<1?(t=1,e=n/4):e=n*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*r)*Math.sin((r-e)*(2*Math.PI)/n)+1)},elasticInOut:function(r){var e,t=.1,n=.4;return r===0?0:r===1?1:(!t||t<1?(t=1,e=n/4):e=n*Math.asin(1/t)/(2*Math.PI),(r*=2)<1?-.5*(t*Math.pow(2,10*(r-=1))*Math.sin((r-e)*(2*Math.PI)/n)):t*Math.pow(2,-10*(r-=1))*Math.sin((r-e)*(2*Math.PI)/n)*.5+1)},backIn:function(r){var e=1.70158;return r*r*((e+1)*r-e)},backOut:function(r){var e=1.70158;return--r*r*((e+1)*r+e)+1},backInOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)},bounceIn:function(r){return 1-S1.bounceOut(1-r)},bounceOut:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},bounceInOut:function(r){return r<.5?S1.bounceIn(r*2)*.5:S1.bounceOut(r*2-1)*.5+.5}},X2=Math.pow,NA=Math.sqrt,hC=1e-8,TJ=1e-4,m8=NA(3),Z2=1/3,Fc=Pp(),Xo=Pp(),Uv=Pp();function aA(r){return r>-hC&&r<hC}function IJ(r){return r>hC||r<-hC}function $a(r,e,t,n,a){var i=1-a;return i*i*(i*r+3*a*e)+a*a*(a*n+3*i*t)}function v8(r,e,t,n,a){var i=1-a;return 3*(((e-r)*i+2*(t-e)*a)*i+(n-t)*a*a)}function dC(r,e,t,n,a,i){var s=n+3*(e-t)-r,o=3*(t-e*2+r),l=3*(e-r),c=r-a,u=o*o-3*s*l,h=o*l-9*s*c,d=l*l-3*o*c,A=0;if(aA(u)&&aA(h))if(aA(o))i[0]=0;else{var g=-l/o;g>=0&&g<=1&&(i[A++]=g)}else{var p=h*h-4*u*d;if(aA(p)){var v=h/u,g=-o/s+v,m=-v/2;g>=0&&g<=1&&(i[A++]=g),m>=0&&m<=1&&(i[A++]=m)}else if(p>0){var y=NA(p),x=u*o+1.5*s*(-h+y),b=u*o+1.5*s*(-h-y);x<0?x=-X2(-x,Z2):x=X2(x,Z2),b<0?b=-X2(-b,Z2):b=X2(b,Z2);var g=(-o-(x+b))/(3*s);g>=0&&g<=1&&(i[A++]=g)}else{var S=(2*u*o-3*s*h)/(2*NA(u*u*u)),_=Math.acos(S)/3,C=NA(u),w=Math.cos(_),g=(-o-2*C*w)/(3*s),m=(-o+C*(w+m8*Math.sin(_)))/(3*s),B=(-o+C*(w-m8*Math.sin(_)))/(3*s);g>=0&&g<=1&&(i[A++]=g),m>=0&&m<=1&&(i[A++]=m),B>=0&&B<=1&&(i[A++]=B)}}return A}function EJ(r,e,t,n,a){var i=6*t-12*e+6*r,s=9*e+3*n-3*r-9*t,o=3*e-3*r,l=0;if(aA(s)){if(IJ(i)){var c=-o/i;c>=0&&c<=1&&(a[l++]=c)}}else{var u=i*i-4*s*o;if(aA(u))a[0]=-i/(2*s);else if(u>0){var h=NA(u),c=(-i+h)/(2*s),d=(-i-h)/(2*s);c>=0&&c<=1&&(a[l++]=c),d>=0&&d<=1&&(a[l++]=d)}}return l}function HA(r,e,t,n,a,i){var s=(e-r)*a+r,o=(t-e)*a+e,l=(n-t)*a+t,c=(o-s)*a+s,u=(l-o)*a+o,h=(u-c)*a+c;i[0]=r,i[1]=s,i[2]=c,i[3]=h,i[4]=h,i[5]=u,i[6]=l,i[7]=n}function DJ(r,e,t,n,a,i,s,o,l,c,u){var h,d=.005,A=1/0,g,p,v,m;Fc[0]=l,Fc[1]=c;for(var y=0;y<1;y+=.05)Xo[0]=$a(r,t,a,s,y),Xo[1]=$a(e,n,i,o,y),v=Yg(Fc,Xo),v<A&&(h=y,A=v);A=1/0;for(var x=0;x<32&&!(d<TJ);x++)g=h-d,p=h+d,Xo[0]=$a(r,t,a,s,g),Xo[1]=$a(e,n,i,o,g),v=Yg(Xo,Fc),g>=0&&v<A?(h=g,A=v):(Uv[0]=$a(r,t,a,s,p),Uv[1]=$a(e,n,i,o,p),m=Yg(Uv,Fc),p<=1&&m<A?(h=p,A=m):d*=.5);return u&&(u[0]=$a(r,t,a,s,h),u[1]=$a(e,n,i,o,h)),NA(A)}function Kve(r,e,t,n,a,i,s,o,l){for(var c=r,u=e,h=0,d=1/l,A=1;A<=l;A++){var g=A*d,p=$a(r,t,a,s,g),v=$a(e,n,i,o,g),m=p-c,y=v-u;h+=Math.sqrt(m*m+y*y),c=p,u=v}return h}function li(r,e,t,n){var a=1-n;return a*(a*r+2*n*e)+n*n*t}function D3(r,e,t,n){return 2*((1-n)*(e-r)+n*(t-e))}function Wve(r,e,t,n,a){var i=r-2*e+t,s=2*(e-r),o=r-n,l=0;if(aA(i)){if(IJ(s)){var c=-o/s;c>=0&&c<=1&&(a[l++]=c)}}else{var u=s*s-4*i*o;if(aA(u)){var c=-s/(2*i);c>=0&&c<=1&&(a[l++]=c)}else if(u>0){var h=NA(u),c=(-s+h)/(2*i),d=(-s-h)/(2*i);c>=0&&c<=1&&(a[l++]=c),d>=0&&d<=1&&(a[l++]=d)}}return l}function MJ(r,e,t){var n=r+t-2*e;return n===0?.5:(r-e)/n}function vb(r,e,t,n,a){var i=(e-r)*n+r,s=(t-e)*n+e,o=(s-i)*n+i;a[0]=r,a[1]=i,a[2]=o,a[3]=o,a[4]=s,a[5]=t}function RJ(r,e,t,n,a,i,s,o,l){var c,u=.005,h=1/0;Fc[0]=s,Fc[1]=o;for(var d=0;d<1;d+=.05){Xo[0]=li(r,t,a,d),Xo[1]=li(e,n,i,d);var A=Yg(Fc,Xo);A<h&&(c=d,h=A)}h=1/0;for(var g=0;g<32&&!(u<TJ);g++){var p=c-u,v=c+u;Xo[0]=li(r,t,a,p),Xo[1]=li(e,n,i,p);var A=Yg(Xo,Fc);if(p>=0&&A<h)c=p,h=A;else{Uv[0]=li(r,t,a,v),Uv[1]=li(e,n,i,v);var m=Yg(Uv,Fc);v<=1&&m<h?(c=v,h=m):u*=.5}}return l&&(l[0]=li(r,t,a,c),l[1]=li(e,n,i,c)),NA(h)}function qve(r,e,t,n,a,i,s){for(var o=r,l=e,c=0,u=1/s,h=1;h<=s;h++){var d=h*u,A=li(r,t,a,d),g=li(e,n,i,d),p=A-o,v=g-l;c+=Math.sqrt(p*p+v*v),o=A,l=g}return c}var Yve=/cubic-bezier\(([0-9,\.e ]+)\)/;function kk(r){var e=r&&Yve.exec(r);if(e){var t=e[1].split(","),n=+Kl(t[0]),a=+Kl(t[1]),i=+Kl(t[2]),s=+Kl(t[3]);if(isNaN(n+a+i+s))return;var o=[];return function(l){return l<=0?0:l>=1?1:dC(0,n,i,1,l,o)&&$a(0,a,s,1,o[0])}}}var Xve=function(){function r(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Aa,this.ondestroy=e.ondestroy||Aa,this.onrestart=e.onrestart||Aa,e.easing&&this.setEasing(e.easing)}return r.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var n=this._life,a=e-this._startTime-this._pausedTime,i=a/n;i<0&&(i=0),i=Math.min(i,1);var s=this.easingFunc,o=s?s(i):i;if(this.onframe(o),i===1)if(this.loop){var l=a%n;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.prototype.setEasing=function(e){this.easing=e,this.easingFunc=It(e)?e:S1[e]||kk(e)},r}(),LJ=function(){function r(e){this.value=e}return r}(),Zve=function(){function r(){this._len=0}return r.prototype.insert=function(e){var t=new LJ(e);return this.insertEntry(t),t},r.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},r.prototype.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},r.prototype.len=function(){return this._len},r.prototype.clear=function(){this.head=this.tail=null,this._len=0},r}(),Sw=function(){function r(e){this._list=new Zve,this._maxSize=10,this._map={},this._maxSize=e}return r.prototype.put=function(e,t){var n=this._list,a=this._map,i=null;if(a[e]==null){var s=n.len(),o=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var l=n.head;n.remove(l),delete a[l.key],i=l.value,this._lastRemovedEntry=l}o?o.value=t:o=new LJ(t),o.key=e,n.insertEntry(o),a[e]=o}return i},r.prototype.get=function(e){var t=this._map[e],n=this._list;if(t!=null)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},r.prototype.clear=function(){this._list.clear(),this._map={}},r.prototype.len=function(){return this._list.len()},r}(),y8={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Jl(r){return r=Math.round(r),r<0?0:r>255?255:r}function Jve(r){return r=Math.round(r),r<0?0:r>360?360:r}function yb(r){return r<0?0:r>1?1:r}function qI(r){var e=r;return e.length&&e.charAt(e.length-1)==="%"?Jl(parseFloat(e)/100*255):Jl(parseInt(e,10))}function Xg(r){var e=r;return e.length&&e.charAt(e.length-1)==="%"?yb(parseFloat(e)/100):yb(parseFloat(e))}function YI(r,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?r+(e-r)*t*6:t*2<1?e:t*3<2?r+(e-r)*(2/3-t)*6:r}function iA(r,e,t){return r+(e-r)*t}function Ho(r,e,t,n,a){return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r}function M3(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}var PJ=new Sw(20),J2=null;function bm(r,e){J2&&M3(J2,e),J2=PJ.put(r,J2||e.slice())}function wo(r,e){if(r){e=e||[];var t=PJ.get(r);if(t)return M3(e,t);r=r+"";var n=r.replace(/ /g,"").toLowerCase();if(n in y8)return M3(e,y8[n]),bm(r,e),e;var a=n.length;if(n.charAt(0)==="#"){if(a===4||a===5){var i=parseInt(n.slice(1,4),16);if(!(i>=0&&i<=4095)){Ho(e,0,0,0,1);return}return Ho(e,(i&3840)>>4|(i&3840)>>8,i&240|(i&240)>>4,i&15|(i&15)<<4,a===5?parseInt(n.slice(4),16)/15:1),bm(r,e),e}else if(a===7||a===9){var i=parseInt(n.slice(1,7),16);if(!(i>=0&&i<=16777215)){Ho(e,0,0,0,1);return}return Ho(e,(i&16711680)>>16,(i&65280)>>8,i&255,a===9?parseInt(n.slice(7),16)/255:1),bm(r,e),e}return}var s=n.indexOf("("),o=n.indexOf(")");if(s!==-1&&o+1===a){var l=n.substr(0,s),c=n.substr(s+1,o-(s+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?Ho(e,+c[0],+c[1],+c[2],1):Ho(e,0,0,0,1);u=Xg(c.pop());case"rgb":if(c.length>=3)return Ho(e,qI(c[0]),qI(c[1]),qI(c[2]),c.length===3?u:Xg(c[3])),bm(r,e),e;Ho(e,0,0,0,1);return;case"hsla":if(c.length!==4){Ho(e,0,0,0,1);return}return c[3]=Xg(c[3]),R3(c,e),bm(r,e),e;case"hsl":if(c.length!==3){Ho(e,0,0,0,1);return}return R3(c,e),bm(r,e),e;default:return}}Ho(e,0,0,0,1)}}function R3(r,e){var t=(parseFloat(r[0])%360+360)%360/360,n=Xg(r[1]),a=Xg(r[2]),i=a<=.5?a*(n+1):a+n-a*n,s=a*2-i;return e=e||[],Ho(e,Jl(YI(s,i,t+1/3)*255),Jl(YI(s,i,t)*255),Jl(YI(s,i,t-1/3)*255),1),r.length===4&&(e[3]=r[3]),e}function e0e(r){if(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,a=Math.min(e,t,n),i=Math.max(e,t,n),s=i-a,o=(i+a)/2,l,c;if(s===0)l=0,c=0;else{o<.5?c=s/(i+a):c=s/(2-i-a);var u=((i-e)/6+s/2)/s,h=((i-t)/6+s/2)/s,d=((i-n)/6+s/2)/s;e===i?l=d-h:t===i?l=1/3+u-d:n===i&&(l=2/3+h-u),l<0&&(l+=1),l>1&&(l-=1)}var A=[l*360,c,o];return r[3]!=null&&A.push(r[3]),A}}function L3(r,e){var t=wo(r);if(t){for(var n=0;n<3;n++)e<0?t[n]=t[n]*(1-e)|0:t[n]=(255-t[n])*e+t[n]|0,t[n]>255?t[n]=255:t[n]<0&&(t[n]=0);return Ah(t,t.length===4?"rgba":"rgb")}}function XI(r,e,t){if(!(!(e&&e.length)||!(r>=0&&r<=1))){t=t||[];var n=r*(e.length-1),a=Math.floor(n),i=Math.ceil(n),s=e[a],o=e[i],l=n-a;return t[0]=Jl(iA(s[0],o[0],l)),t[1]=Jl(iA(s[1],o[1],l)),t[2]=Jl(iA(s[2],o[2],l)),t[3]=yb(iA(s[3],o[3],l)),t}}function t0e(r,e,t){if(!(!(e&&e.length)||!(r>=0&&r<=1))){var n=r*(e.length-1),a=Math.floor(n),i=Math.ceil(n),s=wo(e[a]),o=wo(e[i]),l=n-a,c=Ah([Jl(iA(s[0],o[0],l)),Jl(iA(s[1],o[1],l)),Jl(iA(s[2],o[2],l)),yb(iA(s[3],o[3],l))],"rgba");return t?{color:c,leftIndex:a,rightIndex:i,value:n}:c}}function _1(r,e,t,n){var a=wo(r);if(r)return a=e0e(a),e!=null&&(a[0]=Jve(e)),t!=null&&(a[1]=Xg(t)),n!=null&&(a[2]=Xg(n)),Ah(R3(a),"rgba")}function AC(r,e){var t=wo(r);if(t&&e!=null)return t[3]=yb(e),Ah(t,"rgba")}function Ah(r,e){if(!(!r||!r.length)){var t=r[0]+","+r[1]+","+r[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+r[3]),e+"("+t+")"}}function fC(r,e){var t=wo(r);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var x8=new Sw(100);function P3(r){if(dt(r)){var e=x8.get(r);return e||(e=L3(r,-.1),x8.put(r,e)),e}else if(xN(r)){var t=He({},r);return t.colorStops=We(r.colorStops,function(n){return{offset:n.offset,color:L3(n.color,-.1)}}),t}return r}var gC=Math.round;function xb(r){var e;if(!r||r==="transparent")r="none";else if(typeof r=="string"&&r.indexOf("rgba")>-1){var t=wo(r);t&&(r="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:r,opacity:e??1}}var b8=1e-4;function sA(r){return r<b8&&r>-b8}function eS(r){return gC(r*1e3)/1e3}function k3(r){return gC(r*1e4)/1e4}function r0e(r){return"matrix("+eS(r[0])+","+eS(r[1])+","+eS(r[2])+","+eS(r[3])+","+k3(r[4])+","+k3(r[5])+")"}var n0e={left:"start",right:"end",center:"middle",middle:"middle"};function a0e(r,e,t){return t==="top"?r+=e/2:t==="bottom"&&(r-=e/2),r}function i0e(r){return r&&(r.shadowBlur||r.shadowOffsetX||r.shadowOffsetY)}function s0e(r){var e=r.style,t=r.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function kJ(r){return r&&!!r.image}function o0e(r){return r&&!!r.svgElement}function Fk(r){return kJ(r)||o0e(r)}function FJ(r){return r.type==="linear"}function jJ(r){return r.type==="radial"}function OJ(r){return r&&(r.type==="linear"||r.type==="radial")}function SN(r){return"url(#"+r+")"}function UJ(r){var e=r.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function HJ(r){var e=r.x||0,t=r.y||0,n=(r.rotation||0)*$_,a=$t(r.scaleX,1),i=$t(r.scaleY,1),s=r.skewX||0,o=r.skewY||0,l=[];return(e||t)&&l.push("translate("+e+"px,"+t+"px)"),n&&l.push("rotate("+n+")"),(a!==1||i!==1)&&l.push("scale("+a+","+i+")"),(s||o)&&l.push("skew("+gC(s*$_)+"deg, "+gC(o*$_)+"deg)"),l.join(" ")}var l0e=function(){return fr.hasGlobalWindow&&It(window.btoa)?function(r){return window.btoa(unescape(encodeURIComponent(r)))}:typeof Buffer<"u"?function(r){return Buffer.from(r).toString("base64")}:function(r){return null}}(),F3=Array.prototype.slice;function $u(r,e,t){return(e-r)*t+r}function ZI(r,e,t,n){for(var a=e.length,i=0;i<a;i++)r[i]=$u(e[i],t[i],n);return r}function c0e(r,e,t,n){for(var a=e.length,i=a&&e[0].length,s=0;s<a;s++){r[s]||(r[s]=[]);for(var o=0;o<i;o++)r[s][o]=$u(e[s][o],t[s][o],n)}return r}function tS(r,e,t,n){for(var a=e.length,i=0;i<a;i++)r[i]=e[i]+t[i]*n;return r}function w8(r,e,t,n){for(var a=e.length,i=a&&e[0].length,s=0;s<a;s++){r[s]||(r[s]=[]);for(var o=0;o<i;o++)r[s][o]=e[s][o]+t[s][o]*n}return r}function u0e(r,e){for(var t=r.length,n=e.length,a=t>n?e:r,i=Math.min(t,n),s=a[i-1]||{color:[0,0,0,0],offset:0},o=i;o<Math.max(t,n);o++)a.push({offset:s.offset,color:s.color.slice()})}function h0e(r,e,t){var n=r,a=e;if(!(!n.push||!a.push)){var i=n.length,s=a.length;if(i!==s){var o=i>s;if(o)n.length=s;else for(var l=i;l<s;l++)n.push(t===1?a[l]:F3.call(a[l]))}for(var c=n[0]&&n[0].length,l=0;l<n.length;l++)if(t===1)isNaN(n[l])&&(n[l]=a[l]);else for(var u=0;u<c;u++)isNaN(n[l][u])&&(n[l][u]=a[l][u])}}function C1(r){if(Ki(r)){var e=r.length;if(Ki(r[0])){for(var t=[],n=0;n<e;n++)t.push(F3.call(r[n]));return t}return F3.call(r)}return r}function Y_(r){return r[0]=Math.floor(r[0])||0,r[1]=Math.floor(r[1])||0,r[2]=Math.floor(r[2])||0,r[3]=r[3]==null?1:r[3],"rgba("+r.join(",")+")"}function d0e(r){return Ki(r&&r[0])?2:1}var rS=0,X_=1,QJ=2,zx=3,j3=4,O3=5,S8=6;function _8(r){return r===j3||r===O3}function nS(r){return r===X_||r===QJ}var Yy=[0,0,0,0],A0e=function(){function r(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return r.prototype.isFinished=function(){return this._finished},r.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},r.prototype.needsAnimate=function(){return this.keyframes.length>=1},r.prototype.getAdditiveTrack=function(){return this._additiveTrack},r.prototype.addKeyframe=function(e,t,n){this._needsSort=!0;var a=this.keyframes,i=a.length,s=!1,o=S8,l=t;if(Ki(t)){var c=d0e(t);o=c,(c===1&&!Br(t[0])||c===2&&!Br(t[0][0]))&&(s=!0)}else if(Br(t)&&!pb(t))o=rS;else if(dt(t))if(!isNaN(+t))o=rS;else{var u=wo(t);u&&(l=u,o=zx)}else if(xN(t)){var h=He({},l);h.colorStops=We(t.colorStops,function(A){return{offset:A.offset,color:wo(A.color)}}),FJ(t)?o=j3:jJ(t)&&(o=O3),l=h}i===0?this.valType=o:(o!==this.valType||o===S8)&&(s=!0),this.discrete=this.discrete||s;var d={time:e,value:l,rawValue:t,percent:0};return n&&(d.easing=n,d.easingFunc=It(n)?n:S1[n]||kk(n)),a.push(d),d},r.prototype.prepare=function(e,t){var n=this.keyframes;this._needsSort&&n.sort(function(p,v){return p.time-v.time});for(var a=this.valType,i=n.length,s=n[i-1],o=this.discrete,l=nS(a),c=_8(a),u=0;u<i;u++){var h=n[u],d=h.value,A=s.value;h.percent=h.time/e,o||(l&&u!==i-1?h0e(d,A,a):c&&u0e(d.colorStops,A.colorStops))}if(!o&&a!==O3&&t&&this.needsAnimate()&&t.needsAnimate()&&a===t.valType&&!t._finished){this._additiveTrack=t;for(var g=n[0].value,u=0;u<i;u++)a===rS?n[u].additiveValue=n[u].value-g:a===zx?n[u].additiveValue=tS([],n[u].value,g,-1):nS(a)&&(n[u].additiveValue=a===X_?tS([],n[u].value,g,-1):w8([],n[u].value,g,-1))}},r.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,a=n?"additiveValue":"value",i=this.valType,s=this.keyframes,o=s.length,l=this.propName,c=i===zx,u,h=this._lastFr,d=Math.min,A,g;if(o===1)A=g=s[0];else{if(t<0)u=0;else if(t<this._lastFrP){var p=d(h+1,o-1);for(u=p;u>=0&&!(s[u].percent<=t);u--);u=d(u,o-2)}else{for(u=h;u<o&&!(s[u].percent>t);u++);u=d(u-1,o-2)}g=s[u+1],A=s[u]}if(A&&g){this._lastFr=u,this._lastFrP=t;var v=g.percent-A.percent,m=v===0?1:d((t-A.percent)/v,1);g.easingFunc&&(m=g.easingFunc(m));var y=n?this._additiveValue:c?Yy:e[l];if((nS(i)||c)&&!y&&(y=this._additiveValue=[]),this.discrete)e[l]=m<1?A.rawValue:g.rawValue;else if(nS(i))i===X_?ZI(y,A[a],g[a],m):c0e(y,A[a],g[a],m);else if(_8(i)){var x=A[a],b=g[a],S=i===j3;e[l]={type:S?"linear":"radial",x:$u(x.x,b.x,m),y:$u(x.y,b.y,m),colorStops:We(x.colorStops,function(C,w){var B=b.colorStops[w];return{offset:$u(C.offset,B.offset,m),color:Y_(ZI([],C.color,B.color,m))}}),global:b.global},S?(e[l].x2=$u(x.x2,b.x2,m),e[l].y2=$u(x.y2,b.y2,m)):e[l].r=$u(x.r,b.r,m)}else if(c)ZI(y,A[a],g[a],m),n||(e[l]=Y_(y));else{var _=$u(A[a],g[a],m);n?this._additiveValue=_:e[l]=_}n&&this._addToTarget(e)}}},r.prototype._addToTarget=function(e){var t=this.valType,n=this.propName,a=this._additiveValue;t===rS?e[n]=e[n]+a:t===zx?(wo(e[n],Yy),tS(Yy,Yy,a,1),e[n]=Y_(Yy)):t===X_?tS(e[n],e[n],a,1):t===QJ&&w8(e[n],e[n],a,1)},r}(),jk=function(){function r(e,t,n,a){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&a){Ik("Can' use additive animation on looped animation.");return}this._additiveAnimators=a,this._allowDiscrete=n}return r.prototype.getMaxTime=function(){return this._maxTime},r.prototype.getDelay=function(){return this._delay},r.prototype.getLoop=function(){return this._loop},r.prototype.getTarget=function(){return this._target},r.prototype.changeTarget=function(e){this._target=e},r.prototype.when=function(e,t,n){return this.whenWithKeys(e,t,pr(t),n)},r.prototype.whenWithKeys=function(e,t,n,a){for(var i=this._tracks,s=0;s<n.length;s++){var o=n[s],l=i[o];if(!l){l=i[o]=new A0e(o);var c=void 0,u=this._getAdditiveTrack(o);if(u){var h=u.keyframes,d=h[h.length-1];c=d&&d.value,u.valType===zx&&c&&(c=Y_(c))}else c=this._target[o];if(c==null)continue;e>0&&l.addKeyframe(0,C1(c),a),this._trackKeys.push(o)}l.addKeyframe(e,C1(t[o]),a)}return this._maxTime=Math.max(this._maxTime,e),this},r.prototype.pause=function(){this._clip.pause(),this._paused=!0},r.prototype.resume=function(){this._clip.resume(),this._paused=!1},r.prototype.isPaused=function(){return!!this._paused},r.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},r.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,n=0;n<t;n++)e[n].call(this)},r.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var n=0;n<t.length;n++)t[n].call(this)},r.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,n=0;n<t.length;n++)e[t[n]].setFinished()},r.prototype._getAdditiveTrack=function(e){var t,n=this._additiveAnimators;if(n)for(var a=0;a<n.length;a++){var i=n[a].getTrack(e);i&&(t=i)}return t},r.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,n=[],a=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var s=this._trackKeys[i],o=this._tracks[s],l=this._getAdditiveTrack(s),c=o.keyframes,u=c.length;if(o.prepare(a,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var h=c[u-1];h&&(t._target[o.propName]=h.rawValue),o.setFinished()}else n.push(o)}if(n.length||this._force){var d=new Xve({life:a,loop:this._loop,delay:this._delay||0,onframe:function(A){t._started=2;var g=t._additiveAnimators;if(g){for(var p=!1,v=0;v<g.length;v++)if(g[v]._clip){p=!0;break}p||(t._additiveAnimators=null)}for(var v=0;v<n.length;v++)n[v].step(t._target,A);var m=t._onframeCbs;if(m)for(var v=0;v<m.length;v++)m[v](t._target,A)},ondestroy:function(){t._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),e&&d.setEasing(e)}else this._doneCallback();return this}},r.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},r.prototype.delay=function(e){return this._delay=e,this},r.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},r.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},r.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},r.prototype.getClip=function(){return this._clip},r.prototype.getTrack=function(e){return this._tracks[e]},r.prototype.getTracks=function(){var e=this;return We(this._trackKeys,function(t){return e._tracks[t]})},r.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var n=this._tracks,a=this._trackKeys,i=0;i<e.length;i++){var s=n[e[i]];s&&!s.isFinished()&&(t?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var o=!0,i=0;i<a.length;i++)if(!n[a[i]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},r.prototype.saveTo=function(e,t,n){if(e){t=t||this._trackKeys;for(var a=0;a<t.length;a++){var i=t[a],s=this._tracks[i];if(!(!s||s.isFinished())){var o=s.keyframes,l=o[n?0:o.length-1];l&&(e[i]=C1(l.rawValue))}}}},r.prototype.__changeFinalValue=function(e,t){t=t||pr(e);for(var n=0;n<t.length;n++){var a=t[n],i=this._tracks[a];if(i){var s=i.keyframes;if(s.length>1){var o=s.pop();i.addKeyframe(o.time,e[a]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},r}();function wv(){return new Date().getTime()}var f0e=function(r){Rn(e,r);function e(t){var n=r.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,t=t||{},n.stage=t.stage||{},n}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var n=t.getClip();n&&this.addClip(n)},e.prototype.removeClip=function(t){if(t.animation){var n=t.prev,a=t.next;n?n.next=a:this._head=a,a?a.prev=n:this._tail=n,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var n=t.getClip();n&&this.removeClip(n),t.animation=null},e.prototype.update=function(t){for(var n=wv()-this._pausedTime,a=n-this._time,i=this._head;i;){var s=i.next,o=i.step(n,a);o&&(i.ondestroy(),this.removeClip(i)),i=s}this._time=n,t||(this.trigger("frame",a),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function n(){t._running&&(uC(n),!t._paused&&t.update())}uC(n)},e.prototype.start=function(){this._running||(this._time=wv(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=wv(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=wv()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var n=t.next;t.prev=t.next=t.animation=null,t=n}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,n){n=n||{},this.start();var a=new jk(t,n.loop);return this.addAnimator(a),a},e}(vl),g0e=300,JI=fr.domSupported,eE=function(){var r=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=We(r,function(a){var i=a.replace("mouse","pointer");return t.hasOwnProperty(i)?i:a});return{mouse:r,touch:e,pointer:n}}(),C8={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},B8=!1;function U3(r){var e=r.pointerType;return e==="pen"||e==="touch"}function p0e(r){r.touching=!0,r.touchTimer!=null&&(clearTimeout(r.touchTimer),r.touchTimer=null),r.touchTimer=setTimeout(function(){r.touching=!1,r.touchTimer=null},700)}function tE(r){r&&(r.zrByTouch=!0)}function m0e(r,e){return Qo(r.dom,new v0e(r,e),!0)}function zJ(r,e){for(var t=e,n=!1;t&&t.nodeType!==9&&!(n=t.domBelongToZr||t!==e&&t===r.painterRoot);)t=t.parentNode;return n}var v0e=function(){function r(e,t){this.stopPropagation=Aa,this.stopImmediatePropagation=Aa,this.preventDefault=Aa,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return r}(),Fl={mousedown:function(r){r=Qo(this.dom,r),this.__mayPointerCapture=[r.zrX,r.zrY],this.trigger("mousedown",r)},mousemove:function(r){r=Qo(this.dom,r);var e=this.__mayPointerCapture;e&&(r.zrX!==e[0]||r.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",r)},mouseup:function(r){r=Qo(this.dom,r),this.__togglePointerCapture(!1),this.trigger("mouseup",r)},mouseout:function(r){r=Qo(this.dom,r);var e=r.toElement||r.relatedTarget;zJ(this,e)||(this.__pointerCapturing&&(r.zrEventControl="no_globalout"),this.trigger("mouseout",r))},wheel:function(r){B8=!0,r=Qo(this.dom,r),this.trigger("mousewheel",r)},mousewheel:function(r){B8||(r=Qo(this.dom,r),this.trigger("mousewheel",r))},touchstart:function(r){r=Qo(this.dom,r),tE(r),this.__lastTouchMoment=new Date,this.handler.processGesture(r,"start"),Fl.mousemove.call(this,r),Fl.mousedown.call(this,r)},touchmove:function(r){r=Qo(this.dom,r),tE(r),this.handler.processGesture(r,"change"),Fl.mousemove.call(this,r)},touchend:function(r){r=Qo(this.dom,r),tE(r),this.handler.processGesture(r,"end"),Fl.mouseup.call(this,r),+new Date-+this.__lastTouchMoment<g0e&&Fl.click.call(this,r)},pointerdown:function(r){Fl.mousedown.call(this,r)},pointermove:function(r){U3(r)||Fl.mousemove.call(this,r)},pointerup:function(r){Fl.mouseup.call(this,r)},pointerout:function(r){U3(r)||Fl.mouseout.call(this,r)}};X(["click","dblclick","contextmenu"],function(r){Fl[r]=function(e){e=Qo(this.dom,e),this.trigger(r,e)}});var H3={pointermove:function(r){U3(r)||H3.mousemove.call(this,r)},pointerup:function(r){H3.mouseup.call(this,r)},mousemove:function(r){this.trigger("mousemove",r)},mouseup:function(r){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",r),e&&(r.zrEventControl="only_globalout",this.trigger("mouseout",r))}};function y0e(r,e){var t=e.domHandlers;fr.pointerEventsSupported?X(eE.pointer,function(n){Z_(e,n,function(a){t[n].call(r,a)})}):(fr.touchEventsSupported&&X(eE.touch,function(n){Z_(e,n,function(a){t[n].call(r,a),p0e(e)})}),X(eE.mouse,function(n){Z_(e,n,function(a){a=Rk(a),e.touching||t[n].call(r,a)})}))}function x0e(r,e){fr.pointerEventsSupported?X(C8.pointer,t):fr.touchEventsSupported||X(C8.mouse,t);function t(n){function a(i){i=Rk(i),zJ(r,i.target)||(i=m0e(r,i),e.domHandlers[n].call(r,i))}Z_(e,n,a,{capture:!0})}}function Z_(r,e,t,n){r.mounted[e]=t,r.listenerOpts[e]=n,E3(r.domTarget,e,t,n)}function rE(r){var e=r.mounted;for(var t in e)e.hasOwnProperty(t)&&Lve(r.domTarget,t,e[t],r.listenerOpts[t]);r.mounted={}}var N8=function(){function r(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return r}(),b0e=function(r){Rn(e,r);function e(t,n){var a=r.call(this)||this;return a.__pointerCapturing=!1,a.dom=t,a.painterRoot=n,a._localHandlerScope=new N8(t,Fl),JI&&(a._globalHandlerScope=new N8(document,H3)),y0e(a,a._localHandlerScope),a}return e.prototype.dispose=function(){rE(this._localHandlerScope),JI&&rE(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,JI&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var n=this._globalHandlerScope;t?x0e(this,n):rE(n)}},e}(vl),GJ=1;fr.hasGlobalWindow&&(GJ=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var pC=GJ,Q3=.4,z3="#333",G3="#ccc",w0e="#eee",T8=wN,I8=5e-5;function Rf(r){return r>I8||r<-I8}var Lf=[],wm=[],nE=bo(),aE=Math.abs,rh=function(){function r(){}return r.prototype.getLocalTransform=function(e){return r.getLocalTransform(this,e)},r.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},r.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},r.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},r.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},r.prototype.needLocalTransform=function(){return Rf(this.rotation)||Rf(this.x)||Rf(this.y)||Rf(this.scaleX-1)||Rf(this.scaleY-1)||Rf(this.skewX)||Rf(this.skewY)},r.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),n=this.transform;if(!(t||e)){n&&(T8(n),this.invTransform=null);return}n=n||bo(),t?this.getLocalTransform(n):T8(n),e&&(t?dh(n,e,n):Lk(n,e)),this.transform=n,this._resolveGlobalScaleRatio(n)},r.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(Lf);var n=Lf[0]<0?-1:1,a=Lf[1]<0?-1:1,i=((Lf[0]-n)*t+n)/Lf[0]||0,s=((Lf[1]-a)*t+a)/Lf[1]||0;e[0]*=i,e[1]*=i,e[2]*=s,e[3]*=s}this.invTransform=this.invTransform||bo(),ey(this.invTransform,e)},r.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},r.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],a=Math.atan2(e[1],e[0]),i=Math.PI/2+a-Math.atan2(e[3],e[2]);n=Math.sqrt(n)*Math.cos(i),t=Math.sqrt(t),this.skewX=i,this.skewY=0,this.rotation=-a,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=n,this.originX=0,this.originY=0}},r.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||bo(),dh(wm,e.invTransform,t),t=wm);var n=this.originX,a=this.originY;(n||a)&&(nE[4]=n,nE[5]=a,dh(wm,t,nE),wm[4]-=n,wm[5]-=a,t=wm),this.setLocalTransform(t)}},r.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},r.prototype.transformCoordToLocal=function(e,t){var n=[e,t],a=this.invTransform;return a&&Ci(n,n,a),n},r.prototype.transformCoordToGlobal=function(e,t){var n=[e,t],a=this.transform;return a&&Ci(n,n,a),n},r.prototype.getLineScale=function(){var e=this.transform;return e&&aE(e[0]-1)>1e-10&&aE(e[3]-1)>1e-10?Math.sqrt(aE(e[0]*e[3]-e[2]*e[1])):1},r.prototype.copyTransform=function(e){VJ(this,e)},r.getLocalTransform=function(e,t){t=t||[];var n=e.originX||0,a=e.originY||0,i=e.scaleX,s=e.scaleY,o=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,h=e.y,d=e.skewX?Math.tan(e.skewX):0,A=e.skewY?Math.tan(-e.skewY):0;if(n||a||o||l){var g=n+o,p=a+l;t[4]=-g*i-d*p*s,t[5]=-p*s-A*g*i}else t[4]=t[5]=0;return t[0]=i,t[3]=s,t[1]=A*i,t[2]=d*s,c&&kp(t,t,c),t[4]+=n+u,t[5]+=a+h,t},r.initDefaultProps=function(){var e=r.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),r}(),iu=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function VJ(r,e){for(var t=0;t<iu.length;t++){var n=iu[t];r[n]=e[n]}}var E8={};function So(r,e){e=e||OA;var t=E8[e];t||(t=E8[e]=new Sw(500));var n=t.get(r);return n==null&&(n=UA.measureText(r,e).width,t.put(r,n)),n}function D8(r,e,t,n){var a=So(r,e),i=_N(e),s=Gx(0,a,t),o=rv(0,i,n),l=new Zt(s,o,a,i);return l}function _w(r,e,t,n){var a=((r||"")+"").split(`
`),i=a.length;if(i===1)return D8(a[0],e,t,n);for(var s=new Zt(0,0,0,0),o=0;o<a.length;o++){var l=D8(a[o],e,t,n);o===0?s.copy(l):s.union(l)}return s}function Gx(r,e,t){return t==="right"?r-=e:t==="center"&&(r-=e/2),r}function rv(r,e,t){return t==="middle"?r-=e/2:t==="bottom"&&(r-=e),r}function _N(r){return So("国",r)}function rc(r,e){return typeof r=="string"?r.lastIndexOf("%")>=0?parseFloat(r)/100*e:parseFloat(r):r}function mC(r,e,t){var n=e.position||"inside",a=e.distance!=null?e.distance:5,i=t.height,s=t.width,o=i/2,l=t.x,c=t.y,u="left",h="top";if(n instanceof Array)l+=rc(n[0],t.width),c+=rc(n[1],t.height),u=null,h=null;else switch(n){case"left":l-=a,c+=o,u="right",h="middle";break;case"right":l+=a+s,c+=o,h="middle";break;case"top":l+=s/2,c-=a,u="center",h="bottom";break;case"bottom":l+=s/2,c+=i+a,u="center";break;case"inside":l+=s/2,c+=o,u="center",h="middle";break;case"insideLeft":l+=a,c+=o,h="middle";break;case"insideRight":l+=s-a,c+=o,u="right",h="middle";break;case"insideTop":l+=s/2,c+=a,u="center";break;case"insideBottom":l+=s/2,c+=i-a,u="center",h="bottom";break;case"insideTopLeft":l+=a,c+=a;break;case"insideTopRight":l+=s-a,c+=a,u="right";break;case"insideBottomLeft":l+=a,c+=i-a,h="bottom";break;case"insideBottomRight":l+=s-a,c+=i-a,u="right",h="bottom";break}return r=r||{},r.x=l,r.y=c,r.align=u,r.verticalAlign=h,r}var iE="__zr_normal__",sE=iu.concat(["ignore"]),S0e=nu(iu,function(r,e){return r[e]=!0,r},{ignore:!1}),Sm={},_0e=new Zt(0,0,0,0),CN=function(){function r(e){this.id=yJ(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return r.prototype._init=function(e){this.attr(e)},r.prototype.drift=function(e,t,n){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var a=this.transform;a||(a=this.transform=[1,0,0,1,0,0]),a[4]+=e,a[5]+=t,this.decomposeTransform(),this.markRedraw()},r.prototype.beforeUpdate=function(){},r.prototype.afterUpdate=function(){},r.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},r.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var n=this.textConfig,a=n.local,i=t.innerTransformable,s=void 0,o=void 0,l=!1;i.parent=a?this:null;var c=!1;if(i.copyTransform(t),n.position!=null){var u=_0e;n.layoutRect?u.copy(n.layoutRect):u.copy(this.getBoundingRect()),a||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Sm,n,u):mC(Sm,n,u),i.x=Sm.x,i.y=Sm.y,s=Sm.align,o=Sm.verticalAlign;var h=n.origin;if(h&&n.rotation!=null){var d=void 0,A=void 0;h==="center"?(d=u.width*.5,A=u.height*.5):(d=rc(h[0],u.width),A=rc(h[1],u.height)),c=!0,i.originX=-i.x+d+(a?0:u.x),i.originY=-i.y+A+(a?0:u.y)}}n.rotation!=null&&(i.rotation=n.rotation);var g=n.offset;g&&(i.x+=g[0],i.y+=g[1],c||(i.originX=-g[0],i.originY=-g[1]));var p=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,y=void 0,x=void 0;p&&this.canBeInsideText()?(m=n.insideFill,y=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(m),x=!0)):(m=n.outsideFill,y=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(m),x=!0)),m=m||"#000",(m!==v.fill||y!==v.stroke||x!==v.autoStroke||s!==v.align||o!==v.verticalAlign)&&(l=!0,v.fill=m,v.stroke=y,v.autoStroke=x,v.align=s,v.verticalAlign=o,t.setDefaultTextStyle(v)),t.__dirty|=uo,l&&t.dirtyStyle(!0)}},r.prototype.canBeInsideText=function(){return!0},r.prototype.getInsideTextFill=function(){return"#fff"},r.prototype.getInsideTextStroke=function(e){return"#000"},r.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?G3:z3},r.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),n=typeof t=="string"&&wo(t);n||(n=[255,255,255,1]);for(var a=n[3],i=this.__zr.isDarkMode(),s=0;s<3;s++)n[s]=n[s]*a+(i?0:255)*(1-a);return n[3]=1,Ah(n,"rgba")},r.prototype.traverse=function(e,t){},r.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},He(this.extra,t)):this[e]=t},r.prototype.hide=function(){this.ignore=!0,this.markRedraw()},r.prototype.show=function(){this.ignore=!1,this.markRedraw()},r.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(Pt(e))for(var n=e,a=pr(n),i=0;i<a.length;i++){var s=a[i];this.attrKV(s,e[s])}return this.markRedraw(),this},r.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,n=0;n<this.animators.length;n++){var a=this.animators[n],i=a.__fromStateTransition;if(!(a.getLoop()||i&&i!==iE)){var s=a.targetName,o=s?t[s]:t;a.saveTo(o)}}},r.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,sE)},r.prototype._savePrimaryToNormal=function(e,t,n){for(var a=0;a<n.length;a++){var i=n[a];e[i]!=null&&!(i in t)&&(t[i]=this[i])}},r.prototype.hasState=function(){return this.currentStates.length>0},r.prototype.getState=function(e){return this.states[e]},r.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},r.prototype.clearStates=function(e){this.useState(iE,!1,e)},r.prototype.useState=function(e,t,n,a){var i=e===iE,s=this.hasState();if(!(!s&&i)){var o=this.currentStates,l=this.stateTransition;if(!(rr(o,e)>=0&&(t||o.length===1))){var c;if(this.stateProxy&&!i&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!i){Ik("State "+e+" not exists.");return}i||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||a);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,t,!n&&!this.__inHover&&l&&l.duration>0,l);var h=this._textContent,d=this._textGuide;return h&&h.useState(e,t,n,u),d&&d.useState(e,t,n,u),i?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~uo),c}}},r.prototype.useStates=function(e,t,n){if(!e.length)this.clearStates();else{var a=[],i=this.currentStates,s=e.length,o=s===i.length;if(o){for(var l=0;l<s;l++)if(e[l]!==i[l]){o=!1;break}}if(o)return;for(var l=0;l<s;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&a.push(u)}var h=a[s-1],d=!!(h&&h.hoverLayer||n);d&&this._toggleHoverLayerFlag(!0);var A=this._mergeStates(a),g=this.stateTransition;this.saveCurrentToNormalState(A),this._applyStateObj(e.join(","),A,this._normalState,!1,!t&&!this.__inHover&&g&&g.duration>0,g);var p=this._textContent,v=this._textGuide;p&&p.useStates(e,t,d),v&&v.useStates(e,t,d),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~uo)}},r.prototype.isSilent=function(){for(var e=this.silent,t=this.parent;!e&&t;){if(t.silent){e=!0;break}t=t.parent}return e},r.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},r.prototype.removeState=function(e){var t=rr(this.currentStates,e);if(t>=0){var n=this.currentStates.slice();n.splice(t,1),this.useStates(n)}},r.prototype.replaceState=function(e,t,n){var a=this.currentStates.slice(),i=rr(a,e),s=rr(a,t)>=0;i>=0?s?a.splice(i,1):a[i]=t:n&&!s&&a.push(t),this.useStates(a)},r.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},r.prototype._mergeStates=function(e){for(var t={},n,a=0;a<e.length;a++){var i=e[a];He(t,i),i.textConfig&&(n=n||{},He(n,i.textConfig))}return n&&(t.textConfig=n),t},r.prototype._applyStateObj=function(e,t,n,a,i,s){var o=!(t&&a);t&&t.textConfig?(this.textConfig=He({},a?this.textConfig:n.textConfig),He(this.textConfig,t.textConfig)):o&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},c=!1,u=0;u<sE.length;u++){var h=sE[u],d=i&&S0e[h];t&&t[h]!=null?d?(c=!0,l[h]=t[h]):this[h]=t[h]:o&&n[h]!=null&&(d?(c=!0,l[h]=n[h]):this[h]=n[h])}if(!i)for(var u=0;u<this.animators.length;u++){var A=this.animators[u],g=A.targetName;A.getLoop()||A.__changeFinalValue(g?(t||n)[g]:t||n)}c&&this._transitionState(e,l,s)},r.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},r.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},r.prototype.getClipPath=function(){return this._clipPath},r.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},r.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},r.prototype.getTextContent=function(){return this._textContent},r.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new rh,this._attachComponent(e),this._textContent=e,this.markRedraw())},r.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),He(this.textConfig,e),this.markRedraw()},r.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},r.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},r.prototype.getTextGuideLine=function(){return this._textGuide},r.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},r.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},r.prototype.markRedraw=function(){this.__dirty|=uo;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},r.prototype.dirty=function(){this.markRedraw()},r.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,n=this._textGuide;t&&(t.__inHover=e),n&&(n.__inHover=e)},r.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},r.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},r.prototype.animate=function(e,t,n){var a=e?this[e]:this,i=new jk(a,t,n);return e&&(i.targetName=e),this.addAnimator(i,e),i},r.prototype.addAnimator=function(e,t){var n=this.__zr,a=this;e.during(function(){a.updateDuringAnimation(t)}).done(function(){var i=a.animators,s=rr(i,e);s>=0&&i.splice(s,1)}),this.animators.push(e),n&&n.animation.addAnimator(e),n&&n.wakeUp()},r.prototype.updateDuringAnimation=function(e){this.markRedraw()},r.prototype.stopAnimation=function(e,t){for(var n=this.animators,a=n.length,i=[],s=0;s<a;s++){var o=n[s];!e||e===o.scope?o.stop(t):i.push(o)}return this.animators=i,this},r.prototype.animateTo=function(e,t,n){oE(this,e,t,n)},r.prototype.animateFrom=function(e,t,n){oE(this,e,t,n,!0)},r.prototype._transitionState=function(e,t,n,a){for(var i=oE(this,t,n,a),s=0;s<i.length;s++)i[s].__fromStateTransition=e},r.prototype.getBoundingRect=function(){return null},r.prototype.getPaintRect=function(){return null},r.initDefaultProps=function(){var e=r.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=uo;function t(n,a,i,s){Object.defineProperty(e,n,{get:function(){if(!this[a]){var l=this[a]=[];o(this,l)}return this[a]},set:function(l){this[i]=l[0],this[s]=l[1],this[a]=l,o(this,l)}});function o(l,c){Object.defineProperty(c,0,{get:function(){return l[i]},set:function(u){l[i]=u}}),Object.defineProperty(c,1,{get:function(){return l[s]},set:function(u){l[s]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),r}();Ia(CN,vl);Ia(CN,rh);function oE(r,e,t,n,a){t=t||{};var i=[];$J(r,"",r,e,t,n,i,a);var s=i.length,o=!1,l=t.done,c=t.aborted,u=function(){o=!0,s--,s<=0&&(o?l&&l():c&&c())},h=function(){s--,s<=0&&(o?l&&l():c&&c())};s||l&&l(),i.length>0&&t.during&&i[0].during(function(g,p){t.during(p)});for(var d=0;d<i.length;d++){var A=i[d];u&&A.done(u),h&&A.aborted(h),t.force&&A.duration(t.duration),A.start(t.easing)}return i}function lE(r,e,t){for(var n=0;n<t;n++)r[n]=e[n]}function C0e(r){return Ki(r[0])}function B0e(r,e,t){if(Ki(e[t]))if(Ki(r[t])||(r[t]=[]),zs(e[t])){var n=e[t].length;r[t].length!==n&&(r[t]=new e[t].constructor(n),lE(r[t],e[t],n))}else{var a=e[t],i=r[t],s=a.length;if(C0e(a))for(var o=a[0].length,l=0;l<s;l++)i[l]?lE(i[l],a[l],o):i[l]=Array.prototype.slice.call(a[l]);else lE(i,a,s);i.length=a.length}else r[t]=e[t]}function N0e(r,e){return r===e||Ki(r)&&Ki(e)&&T0e(r,e)}function T0e(r,e){var t=r.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function $J(r,e,t,n,a,i,s,o){for(var l=pr(n),c=a.duration,u=a.delay,h=a.additive,d=a.setToFinal,A=!Pt(i),g=r.animators,p=[],v=0;v<l.length;v++){var m=l[v],y=n[m];if(y!=null&&t[m]!=null&&(A||i[m]))if(Pt(y)&&!Ki(y)&&!xN(y)){if(e){o||(t[m]=y,r.updateDuringAnimation(e));continue}$J(r,m,t[m],y,a,i&&i[m],s,o)}else p.push(m);else o||(t[m]=y,r.updateDuringAnimation(e),p.push(m))}var x=p.length;if(!h&&x)for(var b=0;b<g.length;b++){var S=g[b];if(S.targetName===e){var _=S.stopTracks(p);if(_){var C=rr(g,S);g.splice(C,1)}}}if(a.force||(p=Ur(p,function(T){return!N0e(n[T],t[T])}),x=p.length),x>0||a.force&&!s.length){var w=void 0,B=void 0,D=void 0;if(o){B={},d&&(w={});for(var b=0;b<x;b++){var m=p[b];B[m]=t[m],d?w[m]=n[m]:t[m]=n[m]}}else if(d){D={};for(var b=0;b<x;b++){var m=p[b];D[m]=C1(t[m]),B0e(t,n,m)}}var S=new jk(t,!1,!1,h?Ur(g,function(E){return E.targetName===e}):null);S.targetName=e,a.scope&&(S.scope=a.scope),d&&w&&S.whenWithKeys(0,w,p),D&&S.whenWithKeys(0,D,p),S.whenWithKeys(c??500,o?B:n,p).delay(u||0),r.addAnimator(S,e),s.push(S)}}var Ht=function(r){Rn(e,r);function e(t){var n=r.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(t),n}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var n=this._children,a=0;a<n.length;a++)if(n[a].name===t)return n[a]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,n){if(t&&t!==this&&t.parent!==this&&n&&n.parent===this){var a=this._children,i=a.indexOf(n);i>=0&&(a.splice(i,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,n){var a=rr(this._children,t);return a>=0&&this.replaceAt(n,a),this},e.prototype.replaceAt=function(t,n){var a=this._children,i=a[n];if(t&&t!==this&&t.parent!==this&&t!==i){a[n]=t,i.parent=null;var s=this.__zr;s&&i.removeSelfFromZr(s),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var n=this.__zr;n&&n!==t.__zr&&t.addSelfToZr(n),n&&n.refresh()},e.prototype.remove=function(t){var n=this.__zr,a=this._children,i=rr(a,t);return i<0?this:(a.splice(i,1),t.parent=null,n&&t.removeSelfFromZr(n),n&&n.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,n=this.__zr,a=0;a<t.length;a++){var i=t[a];n&&i.removeSelfFromZr(n),i.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,n){for(var a=this._children,i=0;i<a.length;i++){var s=a[i];t.call(n,s,i)}return this},e.prototype.traverse=function(t,n){for(var a=0;a<this._children.length;a++){var i=this._children[a],s=t.call(n,i);i.isGroup&&!s&&i.traverse(t,n)}return this},e.prototype.addSelfToZr=function(t){r.prototype.addSelfToZr.call(this,t);for(var n=0;n<this._children.length;n++){var a=this._children[n];a.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){r.prototype.removeSelfFromZr.call(this,t);for(var n=0;n<this._children.length;n++){var a=this._children[n];a.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var n=new Zt(0,0,0,0),a=t||this._children,i=[],s=null,o=0;o<a.length;o++){var l=a[o];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(i);u?(Zt.applyTransform(n,c,u),s=s||n.clone(),s.union(n)):(s=s||c.clone(),s.union(c))}}return s||n},e}(CN);Ht.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var J_={},KJ={};function I0e(r){delete KJ[r]}function E0e(r){if(!r)return!1;if(typeof r=="string")return fC(r,1)<Q3;if(r.colorStops){for(var e=r.colorStops,t=0,n=e.length,a=0;a<n;a++)t+=fC(e[a].color,1);return t/=n,t<Q3}return!1}var D0e=function(){function r(e,t,n){var a=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=t,this.id=e;var i=new $ve,s=n.renderer||"canvas";J_[s]||(s=pr(J_)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var o=new J_[s](t,i,n,e),l=n.ssr||o.ssrOnly;this.storage=i,this.painter=o;var c=!fr.node&&!fr.worker&&!l?new b0e(o.getViewportRoot(),o.root):null,u=n.useCoarsePointer,h=u==null||u==="auto"?fr.touchEventsSupported:!!u,d=44,A;h&&(A=$t(n.pointerSize,d)),this.handler=new CJ(i,o,c,o.root,A),this.animation=new f0e({stage:{update:l?null:function(){return a._flush(!0)}}}),l||this.animation.start()}return r.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},r.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},r.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},r.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=E0e(e))},r.prototype.getBackgroundColor=function(){return this._backgroundColor},r.prototype.setDarkMode=function(e){this._darkMode=e},r.prototype.isDarkMode=function(){return this._darkMode},r.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},r.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},r.prototype.flush=function(){this._disposed||this._flush(!1)},r.prototype._flush=function(e){var t,n=wv();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var a=wv();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:a-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},r.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},r.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},r.prototype.refreshHover=function(){this._needsRefreshHover=!0},r.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},r.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},r.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},r.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},r.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},r.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},r.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},r.prototype.on=function(e,t,n){return this._disposed||this.handler.on(e,t,n),this},r.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},r.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},r.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Ht&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},r.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,I0e(this.id))},r}();function M8(r,e){var t=new D0e(yJ(),r,e);return KJ[t.id]=t,t}function M0e(r,e){J_[r]=e}var V3;function R0e(r){if(typeof V3=="function")return V3(r)}function L0e(r){V3=r}var R8=1e-4,WJ=20;function P0e(r){return r.replace(/^\s+|\s+$/g,"")}function Hr(r,e,t,n){var a=e[0],i=e[1],s=t[0],o=t[1],l=i-a,c=o-s;if(l===0)return c===0?s:(s+o)/2;if(n)if(l>0){if(r<=a)return s;if(r>=i)return o}else{if(r>=a)return s;if(r<=i)return o}else{if(r===a)return s;if(r===i)return o}return(r-a)/l*c+s}function ot(r,e){switch(r){case"center":case"middle":r="50%";break;case"left":case"top":r="0%";break;case"right":case"bottom":r="100%";break}return dt(r)?P0e(r).match(/%$/)?parseFloat(r)/100*e:parseFloat(r):r==null?NaN:+r}function aa(r,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),WJ),r=(+r).toFixed(e),t?r:+r}function ll(r){return r.sort(function(e,t){return e-t}),r}function Qc(r){if(r=+r,isNaN(r))return 0;if(r>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(r*e)/e===r)return t}return k0e(r)}function k0e(r){var e=r.toString().toLowerCase(),t=e.indexOf("e"),n=t>0?+e.slice(t+1):0,a=t>0?t:e.length,i=e.indexOf("."),s=i<0?0:a-1-i;return Math.max(0,s-n)}function qJ(r,e){var t=Math.log,n=Math.LN10,a=Math.floor(t(r[1]-r[0])/n),i=Math.round(t(Math.abs(e[1]-e[0]))/n),s=Math.min(Math.max(-a+i,0),20);return isFinite(s)?s:20}function F0e(r,e){var t=nu(r,function(A,g){return A+(isNaN(g)?0:g)},0);if(t===0)return[];for(var n=Math.pow(10,e),a=We(r,function(A){return(isNaN(A)?0:A)/t*n*100}),i=n*100,s=We(a,function(A){return Math.floor(A)}),o=nu(s,function(A,g){return A+g},0),l=We(a,function(A,g){return A-s[g]});o<i;){for(var c=Number.NEGATIVE_INFINITY,u=null,h=0,d=l.length;h<d;++h)l[h]>c&&(c=l[h],u=h);++s[u],l[u]=0,++o}return We(s,function(A){return A/n})}function j0e(r,e){var t=Math.max(Qc(r),Qc(e)),n=r+e;return t>WJ?n:aa(n,t)}var L8=9007199254740991;function YJ(r){var e=Math.PI*2;return(r%e+e)%e}function bb(r){return r>-R8&&r<R8}var O0e=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function su(r){if(r instanceof Date)return r;if(dt(r)){var e=O0e.exec(r);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(r==null)return new Date(NaN);return new Date(Math.round(r))}function U0e(r){return Math.pow(10,Ok(r))}function Ok(r){if(r===0)return 0;var e=Math.floor(Math.log(r)/Math.LN10);return r/Math.pow(10,e)>=10&&e++,e}function XJ(r,e){var t=Ok(r),n=Math.pow(10,t),a=r/n,i;return a<1.5?i=1:a<2.5?i=2:a<4?i=3:a<7?i=5:i=10,r=i*n,t>=-20?+r.toFixed(t<0?-t:0):r}function cE(r,e){var t=(r.length-1)*e+1,n=Math.floor(t),a=+r[n-1],i=t-n;return i?a+i*(r[n]-a):a}function P8(r){r.sort(function(l,c){return o(l,c,0)?-1:1});for(var e=-1/0,t=1,n=0;n<r.length;){for(var a=r[n].interval,i=r[n].close,s=0;s<2;s++)a[s]<=e&&(a[s]=e,i[s]=s?1:1-t),e=a[s],t=i[s];a[0]===a[1]&&i[0]*i[1]!==1?r.splice(n,1):n++}return r;function o(l,c,u){return l.interval[u]<c.interval[u]||l.interval[u]===c.interval[u]&&(l.close[u]-c.close[u]===(u?-1:1)||!u&&o(l,c,1))}}function _h(r){var e=parseFloat(r);return e==r&&(e!==0||!dt(r)||r.indexOf("x")<=0)?e:NaN}function ZJ(r){return!isNaN(_h(r))}function JJ(){return Math.round(Math.random()*9)}function eee(r,e){return e===0?r:eee(e,r%e)}function k8(r,e){return r==null?e:e==null?r:r*e/eee(r,e)}function Or(r){throw new Error(r)}function F8(r,e,t){return(e-r)*t+r}var tee="series\0",ree="\0_ec_\0";function Xr(r){return r instanceof Array?r:r==null?[]:[r]}function mp(r,e,t){if(r){r[e]=r[e]||{},r.emphasis=r.emphasis||{},r.emphasis[e]=r.emphasis[e]||{};for(var n=0,a=t.length;n<a;n++){var i=t[n];!r.emphasis[e].hasOwnProperty(i)&&r[e].hasOwnProperty(i)&&(r.emphasis[e][i]=r[e][i])}}}var j8=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function ty(r){return Pt(r)&&!$e(r)&&!(r instanceof Date)?r.value:r}function H0e(r){return Pt(r)&&!(r instanceof Array)}function nee(r,e,t){var n=t==="normalMerge",a=t==="replaceMerge",i=t==="replaceAll";r=r||[],e=(e||[]).slice();var s=bt();X(e,function(l,c){if(!Pt(l)){e[c]=null;return}});var o=Q0e(r,s,t);return(n||a)&&z0e(o,r,s,e),n&&G0e(o,e),n||a?V0e(o,e,a):i&&$0e(o,e),K0e(o),o}function Q0e(r,e,t){var n=[];if(t==="replaceAll")return n;for(var a=0;a<r.length;a++){var i=r[a];i&&i.id!=null&&e.set(i.id,a),n.push({existing:t==="replaceMerge"||wb(i)?null:i,newOption:null,keyInfo:null,brandNew:null})}return n}function z0e(r,e,t,n){X(n,function(a,i){if(!(!a||a.id==null)){var s=B1(a.id),o=t.get(s);if(o!=null){var l=r[o];gs(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=a,l.existing=e[o],n[i]=null}}})}function G0e(r,e){X(e,function(t,n){if(!(!t||t.name==null))for(var a=0;a<r.length;a++){var i=r[a].existing;if(!r[a].newOption&&i&&(i.id==null||t.id==null)&&!wb(t)&&!wb(i)&&aee("name",i,t)){r[a].newOption=t,e[n]=null;return}}})}function V0e(r,e,t){X(e,function(n){if(n){for(var a,i=0;(a=r[i])&&(a.newOption||wb(a.existing)||a.existing&&n.id!=null&&!aee("id",n,a.existing));)i++;a?(a.newOption=n,a.brandNew=t):r.push({newOption:n,brandNew:t,existing:null,keyInfo:null}),i++}})}function $0e(r,e){X(e,function(t){r.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function K0e(r){var e=bt();X(r,function(t){var n=t.existing;n&&e.set(n.id,t)}),X(r,function(t){var n=t.newOption;gs(!n||n.id==null||!e.get(n.id)||e.get(n.id)===t,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&e.set(n.id,t),!t.keyInfo&&(t.keyInfo={})}),X(r,function(t,n){var a=t.existing,i=t.newOption,s=t.keyInfo;if(Pt(i)){if(s.name=i.name!=null?B1(i.name):a?a.name:tee+n,a)s.id=B1(a.id);else if(i.id!=null)s.id=B1(i.id);else{var o=0;do s.id="\0"+s.name+"\0"+o++;while(e.get(s.id))}e.set(s.id,t)}})}function aee(r,e,t){var n=Fa(e[r],null),a=Fa(t[r],null);return n!=null&&a!=null&&n===a}function B1(r){return Fa(r,"")}function Fa(r,e){return r==null?e:dt(r)?r:Br(r)||w3(r)?r+"":e}function Uk(r){var e=r.name;return!!(e&&e.indexOf(tee))}function wb(r){return r&&r.id!=null&&B1(r.id).indexOf(ree)===0}function W0e(r){return ree+r}function q0e(r,e,t){X(r,function(n){var a=n.newOption;Pt(a)&&(n.keyInfo.mainType=e,n.keyInfo.subType=Y0e(e,a,n.existing,t))})}function Y0e(r,e,t,n){var a=e.type?e.type:t?t.subType:n.determineSubType(r,e);return a}function X0e(r,e){var t={},n={};return a(r||[],t),a(e||[],n,t),[i(t),i(n)];function a(s,o,l){for(var c=0,u=s.length;c<u;c++){var h=Fa(s[c].seriesId,null);if(h==null)return;for(var d=Xr(s[c].dataIndex),A=l&&l[h],g=0,p=d.length;g<p;g++){var v=d[g];A&&A[v]?A[v]=null:(o[h]||(o[h]={}))[v]=1}}}function i(s,o){var l=[];for(var c in s)if(s.hasOwnProperty(c)&&s[c]!=null)if(o)l.push(+c);else{var u=i(s[c],!0);u.length&&l.push({seriesId:c,dataIndex:u})}return l}}function vp(r,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return $e(e.dataIndex)?We(e.dataIndex,function(t){return r.indexOfRawIndex(t)}):r.indexOfRawIndex(e.dataIndex);if(e.name!=null)return $e(e.name)?We(e.name,function(t){return r.indexOfName(t)}):r.indexOfName(e.name)}function wr(){var r="__ec_inner_"+Z0e++;return function(e){return e[r]||(e[r]={})}}var Z0e=JJ();function N1(r,e,t){var n=Hk(e,t),a=n.mainTypeSpecified,i=n.queryOptionMap,s=n.others,o=s,l=t?t.defaultMainType:null;return!a&&l&&i.set(l,{}),i.each(function(c,u){var h=Cw(r,u,c,{useDefault:l===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});o[u+"Models"]=h.models,o[u+"Model"]=h.models[0]}),o}function Hk(r,e){var t;if(dt(r)){var n={};n[r+"Index"]=0,t=n}else t=r;var a=bt(),i={},s=!1;return X(t,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){i[l]=o;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],h=(c[2]||"").toLowerCase();if(!(!u||!h||e&&e.includeMainTypes&&rr(e.includeMainTypes,u)<0)){s=s||!!u;var d=a.get(u)||a.set(u,{});d[h]=o}}),{mainTypeSpecified:s,queryOptionMap:a,others:i}}var Na={useDefault:!0,enableAll:!1,enableNone:!1},J0e={useDefault:!1,enableAll:!0,enableNone:!0};function Cw(r,e,t,n){n=n||Na;var a=t.index,i=t.id,s=t.name,o={models:null,specified:a!=null||i!=null||s!=null};if(!o.specified){var l=void 0;return o.models=n.useDefault&&(l=r.getComponent(e))?[l]:[],o}return a==="none"||a===!1?(gs(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(a==="all"&&(gs(n.enableAll,'`"all"` is not a valid value on index option.'),a=i=s=null),o.models=r.queryComponents({mainType:e,index:a,id:i,name:s}),o)}function iee(r,e,t){r.setAttribute?r.setAttribute(e,t):r[e]=t}function eye(r,e){return r.getAttribute?r.getAttribute(e):r[e]}function tye(r){return r==="auto"?fr.domSupported?"html":"richText":r||"html"}function $3(r,e){var t=bt(),n=[];return X(r,function(a){var i=e(a);(t.get(i)||(n.push(i),t.set(i,[]))).push(a)}),{keys:n,buckets:t}}function see(r,e,t,n,a){var i=e==null||e==="auto";if(n==null)return n;if(Br(n)){var s=F8(t||0,n,a);return aa(s,i?Math.max(Qc(t||0),Qc(n)):e)}else{if(dt(n))return a<1?t:n;for(var o=[],l=t,c=n,u=Math.max(l?l.length:0,c.length),h=0;h<u;++h){var d=r.getDimensionInfo(h);if(d&&d.type==="ordinal")o[h]=(a<1&&l?l:c)[h];else{var A=l&&l[h]?l[h]:0,g=c[h],s=F8(A,g,a);o[h]=aa(s,i?Math.max(Qc(A),Qc(g)):e)}}return o}}var rye=".",Pf="___EC__COMPONENT__CONTAINER___",oee="___EC__EXTENDED_CLASS___";function zc(r){var e={main:"",sub:""};if(r){var t=r.split(rye);e.main=t[0]||"",e.sub=t[1]||""}return e}function nye(r){gs(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r),'componentType "'+r+'" illegal')}function aye(r){return!!(r&&r[oee])}function Qk(r,e){r.$constructor=r,r.extend=function(t){var n=this,a;return iye(n)?a=function(i){Pe(s,i);function s(){return i.apply(this,arguments)||this}return s}(n):(a=function(){(t.$constructor||n).apply(this,arguments)},Ave(a,this)),He(a.prototype,t),a[oee]=!0,a.extend=this.extend,a.superCall=lye,a.superApply=cye,a.superClass=n,a}}function iye(r){return It(r)&&/^class\s/.test(Function.prototype.toString.call(r))}function lee(r,e){r.extend=e.extend}var sye=Math.round(Math.random()*10);function oye(r){var e=["__\0is_clz",sye++].join("_");r.prototype[e]=!0,r.isInstance=function(t){return!!(t&&t[e])}}function lye(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return this.superClass.prototype[e].apply(r,t)}function cye(r,e,t){return this.superClass.prototype[e].apply(r,t)}function BN(r){var e={};r.registerClass=function(n){var a=n.type||n.prototype.type;if(a){nye(a),n.prototype.type=a;var i=zc(a);if(!i.sub)e[i.main]=n;else if(i.sub!==Pf){var s=t(i);s[i.sub]=n}}return n},r.getClass=function(n,a,i){var s=e[n];if(s&&s[Pf]&&(s=a?s[a]:null),i&&!s)throw new Error(a?"Component "+n+"."+(a||"")+" is used but not imported.":n+".type should be specified.");return s},r.getClassesByMainType=function(n){var a=zc(n),i=[],s=e[a.main];return s&&s[Pf]?X(s,function(o,l){l!==Pf&&i.push(o)}):i.push(s),i},r.hasClass=function(n){var a=zc(n);return!!e[a.main]},r.getAllClassMainTypes=function(){var n=[];return X(e,function(a,i){n.push(i)}),n},r.hasSubTypes=function(n){var a=zc(n),i=e[a.main];return i&&i[Pf]};function t(n){var a=e[n.main];return(!a||!a[Pf])&&(a=e[n.main]={},a[Pf]=!0),a}}function yp(r,e){for(var t=0;t<r.length;t++)r[t][1]||(r[t][1]=r[t][0]);return e=e||!1,function(n,a,i){for(var s={},o=0;o<r.length;o++){var l=r[o][1];if(!(a&&rr(a,l)>=0||i&&rr(i,l)<0)){var c=n.getShallow(l,e);c!=null&&(s[r[o][0]]=c)}}return s}}var uye=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],hye=yp(uye),dye=function(){function r(){}return r.prototype.getAreaStyle=function(e,t){return hye(this,e,t)},r}(),K3=new Sw(50);function Aye(r){if(typeof r=="string"){var e=K3.get(r);return e&&e.image}else return r}function zk(r,e,t,n,a){if(r)if(typeof r=="string"){if(e&&e.__zrImageSrc===r||!t)return e;var i=K3.get(r),s={hostEl:t,cb:n,cbPayload:a};return i?(e=i.image,!NN(e)&&i.pending.push(s)):(e=UA.loadImage(r,O8,O8),e.__zrImageSrc=r,K3.put(r,e.__cachedImgObj={image:e,pending:[s]})),e}else return r;else return e}function O8(){var r=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<r.pending.length;e++){var t=r.pending[e],n=t.cb;n&&n(this,t.cbPayload),t.hostEl.dirty()}r.pending.length=0}function NN(r){return r&&r.width&&r.height}var uE=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function fye(r,e,t,n,a,i){if(!t){r.text="",r.isTruncated=!1;return}var s=(e+"").split(`
`);i=cee(t,n,a,i);for(var o=!1,l={},c=0,u=s.length;c<u;c++)uee(l,s[c],i),s[c]=l.textLine,o=o||l.isTruncated;r.text=s.join(`
`),r.isTruncated=o}function cee(r,e,t,n){n=n||{};var a=He({},n);a.font=e,t=$t(t,"..."),a.maxIterations=$t(n.maxIterations,2);var i=a.minChar=$t(n.minChar,0);a.cnCharWidth=So("国",e);var s=a.ascCharWidth=So("a",e);a.placeholder=$t(n.placeholder,"");for(var o=r=Math.max(0,r-1),l=0;l<i&&o>=s;l++)o-=s;var c=So(t,e);return c>o&&(t="",c=0),o=r-c,a.ellipsis=t,a.ellipsisWidth=c,a.contentWidth=o,a.containerWidth=r,a}function uee(r,e,t){var n=t.containerWidth,a=t.font,i=t.contentWidth;if(!n){r.textLine="",r.isTruncated=!1;return}var s=So(e,a);if(s<=n){r.textLine=e,r.isTruncated=!1;return}for(var o=0;;o++){if(s<=i||o>=t.maxIterations){e+=t.ellipsis;break}var l=o===0?gye(e,i,t.ascCharWidth,t.cnCharWidth):s>0?Math.floor(e.length*i/s):0;e=e.substr(0,l),s=So(e,a)}e===""&&(e=t.placeholder),r.textLine=e,r.isTruncated=!0}function gye(r,e,t,n){for(var a=0,i=0,s=r.length;i<s&&a<e;i++){var o=r.charCodeAt(i);a+=0<=o&&o<=127?t:n}return i}function pye(r,e){r!=null&&(r+="");var t=e.overflow,n=e.padding,a=e.font,i=t==="truncate",s=_N(a),o=$t(e.lineHeight,s),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=!1,h=e.width,d;h!=null&&(t==="break"||t==="breakAll")?d=r?hee(r,e.font,h,t==="breakAll",0).lines:[]:d=r?r.split(`
`):[];var A=d.length*o,g=$t(e.height,A);if(A>g&&c){var p=Math.floor(g/o);u=u||d.length>p,d=d.slice(0,p)}if(r&&i&&h!=null)for(var v=cee(h,a,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),m={},y=0;y<d.length;y++)uee(m,d[y],v),d[y]=m.textLine,u=u||m.isTruncated;for(var x=g,b=0,y=0;y<d.length;y++)b=Math.max(So(d[y],a),b);h==null&&(h=b);var S=b;return n&&(x+=n[0]+n[2],S+=n[1]+n[3],h+=n[1]+n[3]),l&&(S=h),{lines:d,height:g,outerWidth:S,outerHeight:x,lineHeight:o,calculatedLineHeight:s,contentWidth:b,contentHeight:A,width:h,isTruncated:u}}var mye=function(){function r(){}return r}(),U8=function(){function r(e){this.tokens=[],e&&(this.tokens=e)}return r}(),vye=function(){function r(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return r}();function yye(r,e){var t=new vye;if(r!=null&&(r+=""),!r)return t;for(var n=e.width,a=e.height,i=e.overflow,s=(i==="break"||i==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:i==="breakAll"}:null,o=uE.lastIndex=0,l;(l=uE.exec(r))!=null;){var c=l.index;c>o&&hE(t,r.substring(o,c),e,s),hE(t,l[2],e,s,l[1]),o=uE.lastIndex}o<r.length&&hE(t,r.substring(o,r.length),e,s);var u=[],h=0,d=0,A=e.padding,g=i==="truncate",p=e.lineOverflow==="truncate",v={};function m(te,ee,j){te.width=ee,te.lineHeight=j,h+=j,d=Math.max(d,ee)}e:for(var y=0;y<t.lines.length;y++){for(var x=t.lines[y],b=0,S=0,_=0;_<x.tokens.length;_++){var C=x.tokens[_],w=C.styleName&&e.rich[C.styleName]||{},B=C.textPadding=w.padding,D=B?B[1]+B[3]:0,T=C.font=w.font||e.font;C.contentHeight=_N(T);var E=$t(w.height,C.contentHeight);if(C.innerHeight=E,B&&(E+=B[0]+B[2]),C.height=E,C.lineHeight=Zc(w.lineHeight,e.lineHeight,E),C.align=w&&w.align||e.align,C.verticalAlign=w&&w.verticalAlign||"middle",p&&a!=null&&h+C.lineHeight>a){var R=t.lines.length;_>0?(x.tokens=x.tokens.slice(0,_),m(x,S,b),t.lines=t.lines.slice(0,y+1)):t.lines=t.lines.slice(0,y),t.isTruncated=t.isTruncated||t.lines.length<R;break e}var M=w.width,k=M==null||M==="auto";if(typeof M=="string"&&M.charAt(M.length-1)==="%")C.percentWidth=M,u.push(C),C.contentWidth=So(C.text,T);else{if(k){var O=w.backgroundColor,Q=O&&O.image;Q&&(Q=Aye(Q),NN(Q)&&(C.width=Math.max(C.width,Q.width*E/Q.height)))}var H=g&&n!=null?n-S:null;H!=null&&H<C.width?!k||H<D?(C.text="",C.width=C.contentWidth=0):(fye(v,C.text,H-D,T,e.ellipsis,{minChar:e.truncateMinChar}),C.text=v.text,t.isTruncated=t.isTruncated||v.isTruncated,C.width=C.contentWidth=So(C.text,T)):C.contentWidth=So(C.text,T)}C.width+=D,S+=C.width,w&&(b=Math.max(b,C.lineHeight))}m(x,S,b)}t.outerWidth=t.width=$t(n,d),t.outerHeight=t.height=$t(a,h),t.contentHeight=h,t.contentWidth=d,A&&(t.outerWidth+=A[1]+A[3],t.outerHeight+=A[0]+A[2]);for(var y=0;y<u.length;y++){var C=u[y],W=C.percentWidth;C.width=parseInt(W,10)/100*t.width}return t}function hE(r,e,t,n,a){var i=e==="",s=a&&t.rich[a]||{},o=r.lines,l=s.font||t.font,c=!1,u,h;if(n){var d=s.padding,A=d?d[1]+d[3]:0;if(s.width!=null&&s.width!=="auto"){var g=rc(s.width,n.width)+A;o.length>0&&g+n.accumWidth>n.width&&(u=e.split(`
`),c=!0),n.accumWidth=g}else{var p=hee(e,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=p.accumWidth+A,h=p.linesWidths,u=p.lines}}else u=e.split(`
`);for(var v=0;v<u.length;v++){var m=u[v],y=new mye;if(y.styleName=a,y.text=m,y.isLineHolder=!m&&!i,typeof s.width=="number"?y.width=s.width:y.width=h?h[v]:So(m,l),!v&&!c){var x=(o[o.length-1]||(o[0]=new U8)).tokens,b=x.length;b===1&&x[0].isLineHolder?x[0]=y:(m||!b||i)&&x.push(y)}else o.push(new U8([y]))}}function xye(r){var e=r.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var bye=nu(",&?/;] ".split(""),function(r,e){return r[e]=!0,r},{});function wye(r){return xye(r)?!!bye[r]:!0}function hee(r,e,t,n,a){for(var i=[],s=[],o="",l="",c=0,u=0,h=0;h<r.length;h++){var d=r.charAt(h);if(d===`
`){l&&(o+=l,u+=c),i.push(o),s.push(u),o="",l="",c=0,u=0;continue}var A=So(d,e),g=n?!1:!wye(d);if(i.length?u+A>t:a+u+A>t){u?(o||l)&&(g?(o||(o=l,l="",c=0,u=c),i.push(o),s.push(u-c),l+=d,c+=A,o="",u=c):(l&&(o+=l,l="",c=0),i.push(o),s.push(u),o=d,u=A)):g?(i.push(l),s.push(c),l=d,c=A):(i.push(d),s.push(A));continue}u+=A,g?(l+=d,c+=A):(l&&(o+=l,l="",c=0),o+=d)}return!i.length&&!o&&(o=r,l="",c=0),l&&(o+=l),o&&(i.push(o),s.push(u)),i.length===1&&(u+=a),{accumWidth:u,lines:i,linesWidths:s}}var W3="__zr_style_"+Math.round(Math.random()*10),Zg={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},TN={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Zg[W3]=!0;var H8=["z","z2","invisible"],Sye=["invisible"],gl=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype._init=function(t){for(var n=pr(t),a=0;a<n.length;a++){var i=n[a];i==="style"?this.useStyle(t[i]):r.prototype.attrKV.call(this,i,t[i])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,n,a,i){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&_ye(this,t,n)||s&&!s[0]&&!s[3])return!1;if(a&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(i&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,n){return this.rectContain(t,n)},e.prototype.traverse=function(t,n){t.call(n,this)},e.prototype.rectContain=function(t,n){var a=this.transformCoordToLocal(t,n),i=this.getBoundingRect();return i.contain(a[0],a[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,a=this.getBoundingRect(),i=this.style,s=i.shadowBlur||0,o=i.shadowOffsetX||0,l=i.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Zt(0,0,0,0)),n?Zt.applyTransform(t,a,n):t.copy(a),(s||o||l)&&(t.width+=s*2+Math.abs(o),t.height+=s*2+Math.abs(l),t.x=Math.min(t.x,t.x+o-s),t.y=Math.min(t.y,t.y+l-s));var c=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-c),t.y=Math.floor(t.y-c),t.width=Math.ceil(t.width+1+c*2),t.height=Math.ceil(t.height+1+c*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Zt(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,n){t!=="style"?r.prototype.attrKV.call(this,t,n):this.style?this.setStyle(n):this.useStyle(n)},e.prototype.setStyle=function(t,n){return typeof t=="string"?this.style[t]=n:He(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=Qx,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&Qx)},e.prototype.styleUpdated=function(){this.__dirty&=~Qx},e.prototype.createStyle=function(t){return bN(Zg,t)},e.prototype.useStyle=function(t){t[W3]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[W3]},e.prototype._innerSaveToNormal=function(t){r.prototype._innerSaveToNormal.call(this,t);var n=this._normalState;t.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,n,H8)},e.prototype._applyStateObj=function(t,n,a,i,s,o){r.prototype._applyStateObj.call(this,t,n,a,i,s,o);var l=!(n&&i),c;if(n&&n.style?s?i?c=n.style:(c=this._mergeStyle(this.createStyle(),a.style),this._mergeStyle(c,n.style)):(c=this._mergeStyle(this.createStyle(),i?this.style:a.style),this._mergeStyle(c,n.style)):l&&(c=a.style),c)if(s){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var h=pr(u),d=0;d<h.length;d++){var A=h[d];A in c&&(c[A]=c[A],this.style[A]=u[A])}for(var g=pr(c),d=0;d<g.length;d++){var A=g[d];this.style[A]=this.style[A]}this._transitionState(t,{style:c},o,this.getAnimationStyleProps())}else this.useStyle(c);for(var p=this.__inHover?Sye:H8,d=0;d<p.length;d++){var A=p[d];n&&n[A]!=null?this[A]=n[A]:l&&a[A]!=null&&(this[A]=a[A])}},e.prototype._mergeStates=function(t){for(var n=r.prototype._mergeStates.call(this,t),a,i=0;i<t.length;i++){var s=t[i];s.style&&(a=a||{},this._mergeStyle(a,s.style))}return a&&(n.style=a),n},e.prototype._mergeStyle=function(t,n){return He(t,n),t},e.prototype.getAnimationStyleProps=function(){return TN},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=uo|Qx}(),e}(CN),dE=new Zt(0,0,0,0),AE=new Zt(0,0,0,0);function _ye(r,e,t){return dE.copy(r.getBoundingRect()),r.transform&&dE.applyTransform(r.transform),AE.width=e,AE.height=t,!dE.intersect(AE)}var Ps=Math.min,ks=Math.max,fE=Math.sin,gE=Math.cos,kf=Math.PI*2,aS=Pp(),iS=Pp(),sS=Pp();function IN(r,e,t){if(r.length!==0){for(var n=r[0],a=n[0],i=n[0],s=n[1],o=n[1],l=1;l<r.length;l++)n=r[l],a=Ps(a,n[0]),i=ks(i,n[0]),s=Ps(s,n[1]),o=ks(o,n[1]);e[0]=a,e[1]=s,t[0]=i,t[1]=o}}function Q8(r,e,t,n,a,i){a[0]=Ps(r,t),a[1]=Ps(e,n),i[0]=ks(r,t),i[1]=ks(e,n)}var z8=[],G8=[];function Cye(r,e,t,n,a,i,s,o,l,c){var u=EJ,h=$a,d=u(r,t,a,s,z8);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var A=0;A<d;A++){var g=h(r,t,a,s,z8[A]);l[0]=Ps(g,l[0]),c[0]=ks(g,c[0])}d=u(e,n,i,o,G8);for(var A=0;A<d;A++){var p=h(e,n,i,o,G8[A]);l[1]=Ps(p,l[1]),c[1]=ks(p,c[1])}l[0]=Ps(r,l[0]),c[0]=ks(r,c[0]),l[0]=Ps(s,l[0]),c[0]=ks(s,c[0]),l[1]=Ps(e,l[1]),c[1]=ks(e,c[1]),l[1]=Ps(o,l[1]),c[1]=ks(o,c[1])}function Bye(r,e,t,n,a,i,s,o){var l=MJ,c=li,u=ks(Ps(l(r,t,a),1),0),h=ks(Ps(l(e,n,i),1),0),d=c(r,t,a,u),A=c(e,n,i,h);s[0]=Ps(r,a,d),s[1]=Ps(e,i,A),o[0]=ks(r,a,d),o[1]=ks(e,i,A)}function Nye(r,e,t,n,a,i,s,o,l){var c=rA,u=nA,h=Math.abs(a-i);if(h%kf<1e-4&&h>1e-4){o[0]=r-t,o[1]=e-n,l[0]=r+t,l[1]=e+n;return}if(aS[0]=gE(a)*t+r,aS[1]=fE(a)*n+e,iS[0]=gE(i)*t+r,iS[1]=fE(i)*n+e,c(o,aS,iS),u(l,aS,iS),a=a%kf,a<0&&(a=a+kf),i=i%kf,i<0&&(i=i+kf),a>i&&!s?i+=kf:a<i&&s&&(a+=kf),s){var d=i;i=a,a=d}for(var A=0;A<i;A+=Math.PI/2)A>a&&(sS[0]=gE(A)*t+r,sS[1]=fE(A)*n+e,c(o,sS,o),u(l,sS,l))}var ln={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ff=[],jf=[],wc=[],vd=[],Sc=[],_c=[],pE=Math.min,mE=Math.max,Of=Math.cos,Uf=Math.sin,ju=Math.abs,q3=Math.PI,Md=q3*2,vE=typeof Float32Array<"u",Xy=[];function yE(r){var e=Math.round(r/q3*1e8)/1e8;return e%2*q3}function Gk(r,e){var t=yE(r[0]);t<0&&(t+=Md);var n=t-r[0],a=r[1];a+=n,!e&&a-t>=Md?a=t+Md:e&&t-a>=Md?a=t-Md:!e&&t>a?a=t+(Md-yE(t-a)):e&&t<a&&(a=t-(Md-yE(a-t))),r[0]=t,r[1]=a}var ou=function(){function r(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return r.prototype.increaseVersion=function(){this._version++},r.prototype.getVersion=function(){return this._version},r.prototype.setScale=function(e,t,n){n=n||0,n>0&&(this._ux=ju(n/pC/e)||0,this._uy=ju(n/pC/t)||0)},r.prototype.setDPR=function(e){this.dpr=e},r.prototype.setContext=function(e){this._ctx=e},r.prototype.getContext=function(){return this._ctx},r.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},r.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},r.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(ln.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},r.prototype.lineTo=function(e,t){var n=ju(e-this._xi),a=ju(t-this._yi),i=n>this._ux||a>this._uy;if(this.addData(ln.L,e,t),this._ctx&&i&&this._ctx.lineTo(e,t),i)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var s=n*n+a*a;s>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=s)}return this},r.prototype.bezierCurveTo=function(e,t,n,a,i,s){return this._drawPendingPt(),this.addData(ln.C,e,t,n,a,i,s),this._ctx&&this._ctx.bezierCurveTo(e,t,n,a,i,s),this._xi=i,this._yi=s,this},r.prototype.quadraticCurveTo=function(e,t,n,a){return this._drawPendingPt(),this.addData(ln.Q,e,t,n,a),this._ctx&&this._ctx.quadraticCurveTo(e,t,n,a),this._xi=n,this._yi=a,this},r.prototype.arc=function(e,t,n,a,i,s){this._drawPendingPt(),Xy[0]=a,Xy[1]=i,Gk(Xy,s),a=Xy[0],i=Xy[1];var o=i-a;return this.addData(ln.A,e,t,n,n,a,o,0,s?0:1),this._ctx&&this._ctx.arc(e,t,n,a,i,s),this._xi=Of(i)*n+e,this._yi=Uf(i)*n+t,this},r.prototype.arcTo=function(e,t,n,a,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,n,a,i),this},r.prototype.rect=function(e,t,n,a){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,n,a),this.addData(ln.R,e,t,n,a),this},r.prototype.closePath=function(){this._drawPendingPt(),this.addData(ln.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&e.closePath(),this._xi=t,this._yi=n,this},r.prototype.fill=function(e){e&&e.fill(),this.toStatic()},r.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},r.prototype.len=function(){return this._len},r.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&vE&&(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},r.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,a=this._len,i=0;i<t;i++)n+=e[i].len();vE&&this.data instanceof Float32Array&&(this.data=new Float32Array(a+n));for(var i=0;i<t;i++)for(var s=e[i].data,o=0;o<s.length;o++)this.data[a++]=s[o];this._len=a},r.prototype.addData=function(e,t,n,a,i,s,o,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var h=0;h<arguments.length;h++)u[this._len++]=arguments[h]}},r.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},r.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},r.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,vE&&this._len>11&&(this.data=new Float32Array(e)))}},r.prototype.getBoundingRect=function(){wc[0]=wc[1]=Sc[0]=Sc[1]=Number.MAX_VALUE,vd[0]=vd[1]=_c[0]=_c[1]=-Number.MAX_VALUE;var e=this.data,t=0,n=0,a=0,i=0,s;for(s=0;s<this._len;){var o=e[s++],l=s===1;switch(l&&(t=e[s],n=e[s+1],a=t,i=n),o){case ln.M:t=a=e[s++],n=i=e[s++],Sc[0]=a,Sc[1]=i,_c[0]=a,_c[1]=i;break;case ln.L:Q8(t,n,e[s],e[s+1],Sc,_c),t=e[s++],n=e[s++];break;case ln.C:Cye(t,n,e[s++],e[s++],e[s++],e[s++],e[s],e[s+1],Sc,_c),t=e[s++],n=e[s++];break;case ln.Q:Bye(t,n,e[s++],e[s++],e[s],e[s+1],Sc,_c),t=e[s++],n=e[s++];break;case ln.A:var c=e[s++],u=e[s++],h=e[s++],d=e[s++],A=e[s++],g=e[s++]+A;s+=1;var p=!e[s++];l&&(a=Of(A)*h+c,i=Uf(A)*d+u),Nye(c,u,h,d,A,g,p,Sc,_c),t=Of(g)*h+c,n=Uf(g)*d+u;break;case ln.R:a=t=e[s++],i=n=e[s++];var v=e[s++],m=e[s++];Q8(a,i,a+v,i+m,Sc,_c);break;case ln.Z:t=a,n=i;break}rA(wc,wc,Sc),nA(vd,vd,_c)}return s===0&&(wc[0]=wc[1]=vd[0]=vd[1]=0),new Zt(wc[0],wc[1],vd[0]-wc[0],vd[1]-wc[1])},r.prototype._calculateLength=function(){var e=this.data,t=this._len,n=this._ux,a=this._uy,i=0,s=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,h=0,d=0;d<t;){var A=e[d++],g=d===1;g&&(i=e[d],s=e[d+1],o=i,l=s);var p=-1;switch(A){case ln.M:i=o=e[d++],s=l=e[d++];break;case ln.L:{var v=e[d++],m=e[d++],y=v-i,x=m-s;(ju(y)>n||ju(x)>a||d===t-1)&&(p=Math.sqrt(y*y+x*x),i=v,s=m);break}case ln.C:{var b=e[d++],S=e[d++],v=e[d++],m=e[d++],_=e[d++],C=e[d++];p=Kve(i,s,b,S,v,m,_,C,10),i=_,s=C;break}case ln.Q:{var b=e[d++],S=e[d++],v=e[d++],m=e[d++];p=qve(i,s,b,S,v,m,10),i=v,s=m;break}case ln.A:var w=e[d++],B=e[d++],D=e[d++],T=e[d++],E=e[d++],R=e[d++],M=R+E;d+=1,g&&(o=Of(E)*D+w,l=Uf(E)*T+B),p=mE(D,T)*pE(Md,Math.abs(R)),i=Of(M)*D+w,s=Uf(M)*T+B;break;case ln.R:{o=i=e[d++],l=s=e[d++];var k=e[d++],O=e[d++];p=k*2+O*2;break}case ln.Z:{var y=o-i,x=l-s;p=Math.sqrt(y*y+x*x),i=o,s=l;break}}p>=0&&(c[h++]=p,u+=p)}return this._pathLen=u,u},r.prototype.rebuildPath=function(e,t){var n=this.data,a=this._ux,i=this._uy,s=this._len,o,l,c,u,h,d,A=t<1,g,p,v=0,m=0,y,x=0,b,S;if(!(A&&(this._pathSegLen||this._calculateLength(),g=this._pathSegLen,p=this._pathLen,y=t*p,!y)))e:for(var _=0;_<s;){var C=n[_++],w=_===1;switch(w&&(c=n[_],u=n[_+1],o=c,l=u),C!==ln.L&&x>0&&(e.lineTo(b,S),x=0),C){case ln.M:o=c=n[_++],l=u=n[_++],e.moveTo(c,u);break;case ln.L:{h=n[_++],d=n[_++];var B=ju(h-c),D=ju(d-u);if(B>a||D>i){if(A){var T=g[m++];if(v+T>y){var E=(y-v)/T;e.lineTo(c*(1-E)+h*E,u*(1-E)+d*E);break e}v+=T}e.lineTo(h,d),c=h,u=d,x=0}else{var R=B*B+D*D;R>x&&(b=h,S=d,x=R)}break}case ln.C:{var M=n[_++],k=n[_++],O=n[_++],Q=n[_++],H=n[_++],W=n[_++];if(A){var T=g[m++];if(v+T>y){var E=(y-v)/T;HA(c,M,O,H,E,Ff),HA(u,k,Q,W,E,jf),e.bezierCurveTo(Ff[1],jf[1],Ff[2],jf[2],Ff[3],jf[3]);break e}v+=T}e.bezierCurveTo(M,k,O,Q,H,W),c=H,u=W;break}case ln.Q:{var M=n[_++],k=n[_++],O=n[_++],Q=n[_++];if(A){var T=g[m++];if(v+T>y){var E=(y-v)/T;vb(c,M,O,E,Ff),vb(u,k,Q,E,jf),e.quadraticCurveTo(Ff[1],jf[1],Ff[2],jf[2]);break e}v+=T}e.quadraticCurveTo(M,k,O,Q),c=O,u=Q;break}case ln.A:var te=n[_++],ee=n[_++],j=n[_++],G=n[_++],Y=n[_++],Z=n[_++],de=n[_++],he=!n[_++],fe=j>G?j:G,q=ju(j-G)>.001,ge=Y+Z,me=!1;if(A){var T=g[m++];v+T>y&&(ge=Y+Z*(y-v)/T,me=!0),v+=T}if(q&&e.ellipse?e.ellipse(te,ee,j,G,de,Y,ge,he):e.arc(te,ee,fe,Y,ge,he),me)break e;w&&(o=Of(Y)*j+te,l=Uf(Y)*G+ee),c=Of(ge)*j+te,u=Uf(ge)*G+ee;break;case ln.R:o=c=n[_],l=u=n[_+1],h=n[_++],d=n[_++];var we=n[_++],Me=n[_++];if(A){var T=g[m++];if(v+T>y){var z=y-v;e.moveTo(h,d),e.lineTo(h+pE(z,we),d),z-=we,z>0&&e.lineTo(h+we,d+pE(z,Me)),z-=Me,z>0&&e.lineTo(h+mE(we-z,0),d+Me),z-=we,z>0&&e.lineTo(h,d+mE(Me-z,0));break e}v+=T}e.rect(h,d,we,Me);break;case ln.Z:if(A){var T=g[m++];if(v+T>y){var E=(y-v)/T;e.lineTo(c*(1-E)+o*E,u*(1-E)+l*E);break e}v+=T}e.closePath(),c=o,u=l}}},r.prototype.clone=function(){var e=new r,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},r.CMD=ln,r.initDefaultProps=function(){var e=r.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),r}();function Ud(r,e,t,n,a,i,s){if(a===0)return!1;var o=a,l=0,c=r;if(s>e+o&&s>n+o||s<e-o&&s<n-o||i>r+o&&i>t+o||i<r-o&&i<t-o)return!1;if(r!==t)l=(e-n)/(r-t),c=(r*n-t*e)/(r-t);else return Math.abs(i-r)<=o/2;var u=l*i-s+c,h=u*u/(l*l+1);return h<=o/2*o/2}function Tye(r,e,t,n,a,i,s,o,l,c,u){if(l===0)return!1;var h=l;if(u>e+h&&u>n+h&&u>i+h&&u>o+h||u<e-h&&u<n-h&&u<i-h&&u<o-h||c>r+h&&c>t+h&&c>a+h&&c>s+h||c<r-h&&c<t-h&&c<a-h&&c<s-h)return!1;var d=DJ(r,e,t,n,a,i,s,o,c,u,null);return d<=h/2}function dee(r,e,t,n,a,i,s,o,l){if(s===0)return!1;var c=s;if(l>e+c&&l>n+c&&l>i+c||l<e-c&&l<n-c&&l<i-c||o>r+c&&o>t+c&&o>a+c||o<r-c&&o<t-c&&o<a-c)return!1;var u=RJ(r,e,t,n,a,i,o,l,null);return u<=c/2}var V8=Math.PI*2;function Ao(r){return r%=V8,r<0&&(r+=V8),r}var Zy=Math.PI*2;function Iye(r,e,t,n,a,i,s,o,l){if(s===0)return!1;var c=s;o-=r,l-=e;var u=Math.sqrt(o*o+l*l);if(u-c>t||u+c<t)return!1;if(Math.abs(n-a)%Zy<1e-4)return!0;if(i){var h=n;n=Ao(a),a=Ao(h)}else n=Ao(n),a=Ao(a);n>a&&(a+=Zy);var d=Math.atan2(l,o);return d<0&&(d+=Zy),d>=n&&d<=a||d+Zy>=n&&d+Zy<=a}function Ku(r,e,t,n,a,i){if(i>e&&i>n||i<e&&i<n||n===e)return 0;var s=(i-e)/(n-e),o=n<e?1:-1;(s===1||s===0)&&(o=n<e?.5:-.5);var l=s*(t-r)+r;return l===a?1/0:l>a?o:0}var yd=ou.CMD,Hf=Math.PI*2,Eye=1e-4;function Dye(r,e){return Math.abs(r-e)<Eye}var is=[-1,-1,-1],$o=[-1,-1];function Mye(){var r=$o[0];$o[0]=$o[1],$o[1]=r}function Rye(r,e,t,n,a,i,s,o,l,c){if(c>e&&c>n&&c>i&&c>o||c<e&&c<n&&c<i&&c<o)return 0;var u=dC(e,n,i,o,c,is);if(u===0)return 0;for(var h=0,d=-1,A=void 0,g=void 0,p=0;p<u;p++){var v=is[p],m=v===0||v===1?.5:1,y=$a(r,t,a,s,v);y<l||(d<0&&(d=EJ(e,n,i,o,$o),$o[1]<$o[0]&&d>1&&Mye(),A=$a(e,n,i,o,$o[0]),d>1&&(g=$a(e,n,i,o,$o[1]))),d===2?v<$o[0]?h+=A<e?m:-m:v<$o[1]?h+=g<A?m:-m:h+=o<g?m:-m:v<$o[0]?h+=A<e?m:-m:h+=o<A?m:-m)}return h}function Lye(r,e,t,n,a,i,s,o){if(o>e&&o>n&&o>i||o<e&&o<n&&o<i)return 0;var l=Wve(e,n,i,o,is);if(l===0)return 0;var c=MJ(e,n,i);if(c>=0&&c<=1){for(var u=0,h=li(e,n,i,c),d=0;d<l;d++){var A=is[d]===0||is[d]===1?.5:1,g=li(r,t,a,is[d]);g<s||(is[d]<c?u+=h<e?A:-A:u+=i<h?A:-A)}return u}else{var A=is[0]===0||is[0]===1?.5:1,g=li(r,t,a,is[0]);return g<s?0:i<e?A:-A}}function Pye(r,e,t,n,a,i,s,o){if(o-=e,o>t||o<-t)return 0;var l=Math.sqrt(t*t-o*o);is[0]=-l,is[1]=l;var c=Math.abs(n-a);if(c<1e-4)return 0;if(c>=Hf-1e-4){n=0,a=Hf;var u=i?1:-1;return s>=is[0]+r&&s<=is[1]+r?u:0}if(n>a){var h=n;n=a,a=h}n<0&&(n+=Hf,a+=Hf);for(var d=0,A=0;A<2;A++){var g=is[A];if(g+r>s){var p=Math.atan2(o,g),u=i?1:-1;p<0&&(p=Hf+p),(p>=n&&p<=a||p+Hf>=n&&p+Hf<=a)&&(p>Math.PI/2&&p<Math.PI*1.5&&(u=-u),d+=u)}}return d}function Aee(r,e,t,n,a){for(var i=r.data,s=r.len(),o=0,l=0,c=0,u=0,h=0,d,A,g=0;g<s;){var p=i[g++],v=g===1;switch(p===yd.M&&g>1&&(t||(o+=Ku(l,c,u,h,n,a))),v&&(l=i[g],c=i[g+1],u=l,h=c),p){case yd.M:u=i[g++],h=i[g++],l=u,c=h;break;case yd.L:if(t){if(Ud(l,c,i[g],i[g+1],e,n,a))return!0}else o+=Ku(l,c,i[g],i[g+1],n,a)||0;l=i[g++],c=i[g++];break;case yd.C:if(t){if(Tye(l,c,i[g++],i[g++],i[g++],i[g++],i[g],i[g+1],e,n,a))return!0}else o+=Rye(l,c,i[g++],i[g++],i[g++],i[g++],i[g],i[g+1],n,a)||0;l=i[g++],c=i[g++];break;case yd.Q:if(t){if(dee(l,c,i[g++],i[g++],i[g],i[g+1],e,n,a))return!0}else o+=Lye(l,c,i[g++],i[g++],i[g],i[g+1],n,a)||0;l=i[g++],c=i[g++];break;case yd.A:var m=i[g++],y=i[g++],x=i[g++],b=i[g++],S=i[g++],_=i[g++];g+=1;var C=!!(1-i[g++]);d=Math.cos(S)*x+m,A=Math.sin(S)*b+y,v?(u=d,h=A):o+=Ku(l,c,d,A,n,a);var w=(n-m)*b/x+m;if(t){if(Iye(m,y,b,S,S+_,C,e,w,a))return!0}else o+=Pye(m,y,b,S,S+_,C,w,a);l=Math.cos(S+_)*x+m,c=Math.sin(S+_)*b+y;break;case yd.R:u=l=i[g++],h=c=i[g++];var B=i[g++],D=i[g++];if(d=u+B,A=h+D,t){if(Ud(u,h,d,h,e,n,a)||Ud(d,h,d,A,e,n,a)||Ud(d,A,u,A,e,n,a)||Ud(u,A,u,h,e,n,a))return!0}else o+=Ku(d,h,d,A,n,a),o+=Ku(u,A,u,h,n,a);break;case yd.Z:if(t){if(Ud(l,c,u,h,e,n,a))return!0}else o+=Ku(l,c,u,h,n,a);l=u,c=h;break}}return!t&&!Dye(c,h)&&(o+=Ku(l,c,u,h,n,a)||0),o!==0}function kye(r,e,t){return Aee(r,0,!1,e,t)}function Fye(r,e,t,n){return Aee(r,e,!0,t,n)}var vC=Lt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Zg),jye={style:Lt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},TN.style)},xE=iu.concat(["invisible","culling","z","z2","zlevel","parent"]),hr=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.update=function(){var t=this;r.prototype.update.call(this);var n=this.style;if(n.decal){var a=this._decalEl=this._decalEl||new e;a.buildPath===e.prototype.buildPath&&(a.buildPath=function(l){t.buildPath(l,t.shape)}),a.silent=!0;var i=a.style;for(var s in n)i[s]!==n[s]&&(i[s]=n[s]);i.fill=n.fill?n.decal:null,i.decal=null,i.shadowColor=null,n.strokeFirst&&(i.stroke=null);for(var o=0;o<xE.length;++o)a[xE[o]]=this[xE[o]];a.__dirty|=uo}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var n=pr(t);this.shape=this.getDefaultShape();var a=this.getDefaultStyle();a&&this.useStyle(a);for(var i=0;i<n.length;i++){var s=n[i],o=t[s];s==="style"?this.style?He(this.style,o):this.useStyle(o):s==="shape"?He(this.shape,o):r.prototype.attrKV.call(this,s,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(dt(t)){var n=fC(t,0);return n>.5?z3:n>.2?w0e:G3}else if(t)return G3}return z3},e.prototype.getInsideTextStroke=function(t){var n=this.style.fill;if(dt(n)){var a=this.__zr,i=!!(a&&a.isDarkMode()),s=fC(t,0)<Q3;if(i===s)return n}},e.prototype.buildPath=function(t,n,a){},e.prototype.pathUpdated=function(){this.__dirty&=~tv},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new ou(!1)},e.prototype.hasStroke=function(){var t=this.style,n=t.stroke;return!(n==null||n==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,n=t.fill;return n!=null&&n!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,n=this.style,a=!t;if(a){var i=!1;this.path||(i=!0,this.createPathProxy());var s=this.path;(i||this.__dirty&tv)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),t=s.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||a){o.copy(t);var l=n.strokeNoScale?this.getLineScale():1,c=n.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(o.width+=c/l,o.height+=c/l,o.x-=c/l/2,o.y-=c/l/2)}return o}return t},e.prototype.contain=function(t,n){var a=this.transformCoordToLocal(t,n),i=this.getBoundingRect(),s=this.style;if(t=a[0],n=a[1],i.contain(t,n)){var o=this.path;if(this.hasStroke()){var l=s.lineWidth,c=s.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),Fye(o,l/c,t,n)))return!0}if(this.hasFill())return kye(o,t,n)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=tv,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,n){t==="shape"?this.setShape(n):r.prototype.attrKV.call(this,t,n)},e.prototype.setShape=function(t,n){var a=this.shape;return a||(a=this.shape={}),typeof t=="string"?a[t]=n:He(a,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&tv)},e.prototype.createStyle=function(t){return bN(vC,t)},e.prototype._innerSaveToNormal=function(t){r.prototype._innerSaveToNormal.call(this,t);var n=this._normalState;t.shape&&!n.shape&&(n.shape=He({},this.shape))},e.prototype._applyStateObj=function(t,n,a,i,s,o){r.prototype._applyStateObj.call(this,t,n,a,i,s,o);var l=!(n&&i),c;if(n&&n.shape?s?i?c=n.shape:(c=He({},a.shape),He(c,n.shape)):(c=He({},i?this.shape:a.shape),He(c,n.shape)):l&&(c=a.shape),c)if(s){this.shape=He({},this.shape);for(var u={},h=pr(c),d=0;d<h.length;d++){var A=h[d];typeof c[A]=="object"?this.shape[A]=c[A]:u[A]=c[A]}this._transitionState(t,{shape:u},o)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var n=r.prototype._mergeStates.call(this,t),a,i=0;i<t.length;i++){var s=t[i];s.shape&&(a=a||{},this._mergeStyle(a,s.shape))}return a&&(n.shape=a),n},e.prototype.getAnimationStyleProps=function(){return jye},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var n=function(i){Rn(s,i);function s(o){var l=i.call(this,o)||this;return t.init&&t.init.call(l,o),l}return s.prototype.getDefaultStyle=function(){return Ft(t.style)},s.prototype.getDefaultShape=function(){return Ft(t.shape)},s}(e);for(var a in t)typeof t[a]=="function"&&(n.prototype[a]=t[a]);return n},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=uo|Qx|tv}(),e}(gl),Oye=Lt({strokeFirst:!0,font:OA,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},vC),S0=function(r){Rn(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,n=t.stroke;return n!=null&&n!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,n=t.fill;return n!=null&&n!=="none"},e.prototype.createStyle=function(t){return bN(Oye,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var n=t.text;n!=null?n+="":n="";var a=_w(n,t.font,t.textAlign,t.textBaseline);if(a.x+=t.x||0,a.y+=t.y||0,this.hasStroke()){var i=t.lineWidth;a.x-=i/2,a.y-=i/2,a.width+=i,a.height+=i}this._rect=a}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(gl);S0.prototype.type="tspan";var Uye=Lt({x:0,y:0},Zg),Hye={style:Lt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},TN.style)};function Qye(r){return!!(r&&typeof r!="string"&&r.width&&r.height)}var fi=function(r){Rn(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return bN(Uye,t)},e.prototype._getSize=function(t){var n=this.style,a=n[t];if(a!=null)return a;var i=Qye(n.image)?n.image:this.__image;if(!i)return 0;var s=t==="width"?"height":"width",o=n[s];return o==null?i[t]:i[t]/i[s]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return Hye},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Zt(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(gl);fi.prototype.type="image";function zye(r,e){var t=e.x,n=e.y,a=e.width,i=e.height,s=e.r,o,l,c,u;a<0&&(t=t+a,a=-a),i<0&&(n=n+i,i=-i),typeof s=="number"?o=l=c=u=s:s instanceof Array?s.length===1?o=l=c=u=s[0]:s.length===2?(o=c=s[0],l=u=s[1]):s.length===3?(o=s[0],l=u=s[1],c=s[2]):(o=s[0],l=s[1],c=s[2],u=s[3]):o=l=c=u=0;var h;o+l>a&&(h=o+l,o*=a/h,l*=a/h),c+u>a&&(h=c+u,c*=a/h,u*=a/h),l+c>i&&(h=l+c,l*=i/h,c*=i/h),o+u>i&&(h=o+u,o*=i/h,u*=i/h),r.moveTo(t+o,n),r.lineTo(t+a-l,n),l!==0&&r.arc(t+a-l,n+l,l,-Math.PI/2,0),r.lineTo(t+a,n+i-c),c!==0&&r.arc(t+a-c,n+i-c,c,0,Math.PI/2),r.lineTo(t+u,n+i),u!==0&&r.arc(t+u,n+i-u,u,Math.PI/2,Math.PI),r.lineTo(t,n+o),o!==0&&r.arc(t+o,n+o,o,Math.PI,Math.PI*1.5)}var Sv=Math.round;function fee(r,e,t){if(e){var n=e.x1,a=e.x2,i=e.y1,s=e.y2;r.x1=n,r.x2=a,r.y1=i,r.y2=s;var o=t&&t.lineWidth;return o&&(Sv(n*2)===Sv(a*2)&&(r.x1=r.x2=Tg(n,o,!0)),Sv(i*2)===Sv(s*2)&&(r.y1=r.y2=Tg(i,o,!0))),r}}function gee(r,e,t){if(e){var n=e.x,a=e.y,i=e.width,s=e.height;r.x=n,r.y=a,r.width=i,r.height=s;var o=t&&t.lineWidth;return o&&(r.x=Tg(n,o,!0),r.y=Tg(a,o,!0),r.width=Math.max(Tg(n+i,o,!1)-r.x,i===0?0:1),r.height=Math.max(Tg(a+s,o,!1)-r.y,s===0?0:1)),r}}function Tg(r,e,t){if(!e)return r;var n=Sv(r*2);return(n+Sv(e))%2===0?n/2:(n+(t?1:-1))/2}var Gye=function(){function r(){this.x=0,this.y=0,this.width=0,this.height=0}return r}(),Vye={},br=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Gye},e.prototype.buildPath=function(t,n){var a,i,s,o;if(this.subPixelOptimize){var l=gee(Vye,n,this.style);a=l.x,i=l.y,s=l.width,o=l.height,l.r=n.r,n=l}else a=n.x,i=n.y,s=n.width,o=n.height;n.r?zye(t,n):t.rect(a,i,s,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(hr);br.prototype.type="rect";var $8={fill:"#000"},K8=2,$ye={style:Lt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},TN.style)},Cr=function(r){Rn(e,r);function e(t){var n=r.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=$8,n.attr(t),n}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){r.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var n=this._children[t];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):r.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var n=this.innerTransformable;return n?n.getLocalTransform(t):r.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),r.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,qye(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){r.prototype.addSelfToZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].__zr=t},e.prototype.removeSelfFromZr=function(t){r.prototype.removeSelfFromZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Zt(0,0,0,0),n=this._children,a=[],i=null,s=0;s<n.length;s++){var o=n[s],l=o.getBoundingRect(),c=o.getLocalTransform(a);c?(t.copy(l),t.applyTransform(c),i=i||t.clone(),i.union(t)):(i=i||l.clone(),i.union(l))}this._rect=i||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||$8},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,n){if(!n)return t;var a=n.rich,i=t.rich||a&&{};return He(t,n),a&&i?(this._mergeRich(i,a),t.rich=i):i&&(t.rich=i),t},e.prototype._mergeRich=function(t,n){for(var a=pr(n),i=0;i<a.length;i++){var s=a[i];t[s]=t[s]||{},He(t[s],n[s])}},e.prototype.getAnimationStyleProps=function(){return $ye},e.prototype._getOrCreateChild=function(t){var n=this._children[this._childCursor];return(!n||!(n instanceof t))&&(n=new t),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},e.prototype._updatePlainTexts=function(){var t=this.style,n=t.font||OA,a=t.padding,i=eH(t),s=pye(i,t),o=bE(t),l=!!t.backgroundColor,c=s.outerHeight,u=s.outerWidth,h=s.contentWidth,d=s.lines,A=s.lineHeight,g=this._defaultStyle;this.isTruncated=!!s.isTruncated;var p=t.x||0,v=t.y||0,m=t.align||g.align||"left",y=t.verticalAlign||g.verticalAlign||"top",x=p,b=rv(v,s.contentHeight,y);if(o||a){var S=Gx(p,u,m),_=rv(v,c,y);o&&this._renderBackground(t,t,S,_,u,c)}b+=A/2,a&&(x=J8(p,m,a),y==="top"?b+=a[0]:y==="bottom"&&(b-=a[2]));for(var C=0,w=!1,B=Z8("fill"in t?t.fill:(w=!0,g.fill)),D=X8("stroke"in t?t.stroke:!l&&(!g.autoStroke||w)?(C=K8,g.stroke):null),T=t.textShadowBlur>0,E=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),R=s.calculatedLineHeight,M=0;M<d.length;M++){var k=this._getOrCreateChild(S0),O=k.createStyle();k.useStyle(O),O.text=d[M],O.x=x,O.y=b,O.textAlign=m,O.textBaseline="middle",O.opacity=t.opacity,O.strokeFirst=!0,T&&(O.shadowBlur=t.textShadowBlur||0,O.shadowColor=t.textShadowColor||"transparent",O.shadowOffsetX=t.textShadowOffsetX||0,O.shadowOffsetY=t.textShadowOffsetY||0),O.stroke=D,O.fill=B,D&&(O.lineWidth=t.lineWidth||C,O.lineDash=t.lineDash,O.lineDashOffset=t.lineDashOffset||0),O.font=n,q8(O,t),b+=A,E&&k.setBoundingRect(new Zt(Gx(O.x,h,O.textAlign),rv(O.y,R,O.textBaseline),h,R))}},e.prototype._updateRichTexts=function(){var t=this.style,n=eH(t),a=yye(n,t),i=a.width,s=a.outerWidth,o=a.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,h=this._defaultStyle,d=t.align||h.align,A=t.verticalAlign||h.verticalAlign;this.isTruncated=!!a.isTruncated;var g=Gx(c,s,d),p=rv(u,o,A),v=g,m=p;l&&(v+=l[3],m+=l[0]);var y=v+i;bE(t)&&this._renderBackground(t,t,g,p,s,o);for(var x=!!t.backgroundColor,b=0;b<a.lines.length;b++){for(var S=a.lines[b],_=S.tokens,C=_.length,w=S.lineHeight,B=S.width,D=0,T=v,E=y,R=C-1,M=void 0;D<C&&(M=_[D],!M.align||M.align==="left");)this._placeToken(M,t,w,m,T,"left",x),B-=M.width,T+=M.width,D++;for(;R>=0&&(M=_[R],M.align==="right");)this._placeToken(M,t,w,m,E,"right",x),B-=M.width,E-=M.width,R--;for(T+=(i-(T-v)-(y-E)-B)/2;D<=R;)M=_[D],this._placeToken(M,t,w,m,T+M.width/2,"center",x),T+=M.width,D++;m+=w}},e.prototype._placeToken=function(t,n,a,i,s,o,l){var c=n.rich[t.styleName]||{};c.text=t.text;var u=t.verticalAlign,h=i+a/2;u==="top"?h=i+t.height/2:u==="bottom"&&(h=i+a-t.height/2);var d=!t.isLineHolder&&bE(c);d&&this._renderBackground(c,n,o==="right"?s-t.width:o==="center"?s-t.width/2:s,h-t.height/2,t.width,t.height);var A=!!c.backgroundColor,g=t.textPadding;g&&(s=J8(s,o,g),h-=t.height/2-g[0]-t.innerHeight/2);var p=this._getOrCreateChild(S0),v=p.createStyle();p.useStyle(v);var m=this._defaultStyle,y=!1,x=0,b=Z8("fill"in c?c.fill:"fill"in n?n.fill:(y=!0,m.fill)),S=X8("stroke"in c?c.stroke:"stroke"in n?n.stroke:!A&&!l&&(!m.autoStroke||y)?(x=K8,m.stroke):null),_=c.textShadowBlur>0||n.textShadowBlur>0;v.text=t.text,v.x=s,v.y=h,_&&(v.shadowBlur=c.textShadowBlur||n.textShadowBlur||0,v.shadowColor=c.textShadowColor||n.textShadowColor||"transparent",v.shadowOffsetX=c.textShadowOffsetX||n.textShadowOffsetX||0,v.shadowOffsetY=c.textShadowOffsetY||n.textShadowOffsetY||0),v.textAlign=o,v.textBaseline="middle",v.font=t.font||OA,v.opacity=Zc(c.opacity,n.opacity,1),q8(v,c),S&&(v.lineWidth=Zc(c.lineWidth,n.lineWidth,x),v.lineDash=$t(c.lineDash,n.lineDash),v.lineDashOffset=n.lineDashOffset||0,v.stroke=S),b&&(v.fill=b);var C=t.contentWidth,w=t.contentHeight;p.setBoundingRect(new Zt(Gx(v.x,C,v.textAlign),rv(v.y,w,v.textBaseline),C,w))},e.prototype._renderBackground=function(t,n,a,i,s,o){var l=t.backgroundColor,c=t.borderWidth,u=t.borderColor,h=l&&l.image,d=l&&!h,A=t.borderRadius,g=this,p,v;if(d||t.lineHeight||c&&u){p=this._getOrCreateChild(br),p.useStyle(p.createStyle()),p.style.fill=null;var m=p.shape;m.x=a,m.y=i,m.width=s,m.height=o,m.r=A,p.dirtyShape()}if(d){var y=p.style;y.fill=l||null,y.fillOpacity=$t(t.fillOpacity,1)}else if(h){v=this._getOrCreateChild(fi),v.onload=function(){g.dirtyStyle()};var x=v.style;x.image=l.image,x.x=a,x.y=i,x.width=s,x.height=o}if(c&&u){var y=p.style;y.lineWidth=c,y.stroke=u,y.strokeOpacity=$t(t.strokeOpacity,1),y.lineDash=t.borderDash,y.lineDashOffset=t.borderDashOffset||0,p.strokeContainThreshold=0,p.hasFill()&&p.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var b=(p||v).style;b.shadowBlur=t.shadowBlur||0,b.shadowColor=t.shadowColor||"transparent",b.shadowOffsetX=t.shadowOffsetX||0,b.shadowOffsetY=t.shadowOffsetY||0,b.opacity=Zc(t.opacity,n.opacity,1)},e.makeFont=function(t){var n="";return mee(t)&&(n=[t.fontStyle,t.fontWeight,pee(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),n&&Kl(n)||t.textFont||t.font},e}(gl),Kye={left:!0,right:1,center:1},Wye={top:1,bottom:1,middle:1},W8=["fontStyle","fontWeight","fontSize","fontFamily"];function pee(r){return typeof r=="string"&&(r.indexOf("px")!==-1||r.indexOf("rem")!==-1||r.indexOf("em")!==-1)?r:isNaN(+r)?Bk+"px":r+"px"}function q8(r,e){for(var t=0;t<W8.length;t++){var n=W8[t],a=e[n];a!=null&&(r[n]=a)}}function mee(r){return r.fontSize!=null||r.fontFamily||r.fontWeight}function qye(r){return Y8(r),X(r.rich,Y8),r}function Y8(r){if(r){r.font=Cr.makeFont(r);var e=r.align;e==="middle"&&(e="center"),r.align=e==null||Kye[e]?e:"left";var t=r.verticalAlign;t==="center"&&(t="middle"),r.verticalAlign=t==null||Wye[t]?t:"top";var n=r.padding;n&&(r.padding=Mk(r.padding))}}function X8(r,e){return r==null||e<=0||r==="transparent"||r==="none"?null:r.image||r.colorStops?"#000":r}function Z8(r){return r==null||r==="none"?null:r.image||r.colorStops?"#000":r}function J8(r,e,t){return e==="right"?r-t[1]:e==="center"?r+t[3]/2-t[1]/2:r+t[3]}function eH(r){var e=r.text;return e!=null&&(e+=""),e}function bE(r){return!!(r.backgroundColor||r.lineHeight||r.borderWidth&&r.borderColor)}var Qt=wr(),Y3=function(r,e,t,n){if(n){var a=Qt(n);a.dataIndex=t,a.dataType=e,a.seriesIndex=r,a.ssrType="chart",n.type==="group"&&n.traverse(function(i){var s=Qt(i);s.seriesIndex=r,s.dataIndex=t,s.dataType=e,s.ssrType="chart"})}},tH=1,rH={},vee=wr(),Vk=wr(),$k=0,Bw=1,EN=2,ps=["emphasis","blur","select"],Sb=["normal","emphasis","blur","select"],ry=10,Yye=9,Jg="highlight",e5="downplay",T1="select",t5="unselect",I1="toggleSelect";function _m(r){return r!=null&&r!=="none"}function DN(r,e,t){r.onHoverStateChange&&(r.hoverState||0)!==t&&r.onHoverStateChange(e),r.hoverState=t}function yee(r){DN(r,"emphasis",EN)}function xee(r){r.hoverState===EN&&DN(r,"normal",$k)}function Kk(r){DN(r,"blur",Bw)}function bee(r){r.hoverState===Bw&&DN(r,"normal",$k)}function Xye(r){r.selected=!0}function Zye(r){r.selected=!1}function nH(r,e,t){e(r,t)}function jh(r,e,t){nH(r,e,t),r.isGroup&&r.traverse(function(n){nH(n,e,t)})}function yC(r,e){switch(e){case"emphasis":r.hoverState=EN;break;case"normal":r.hoverState=$k;break;case"blur":r.hoverState=Bw;break;case"select":r.selected=!0}}function Jye(r,e,t,n){for(var a=r.style,i={},s=0;s<e.length;s++){var o=e[s],l=a[o];i[o]=l??(n&&n[o])}for(var s=0;s<r.animators.length;s++){var c=r.animators[s];c.__fromStateTransition&&c.__fromStateTransition.indexOf(t)<0&&c.targetName==="style"&&c.saveTo(i,e)}return i}function exe(r,e,t,n){var a=t&&rr(t,"select")>=0,i=!1;if(r instanceof hr){var s=vee(r),o=a&&s.selectFill||s.normalFill,l=a&&s.selectStroke||s.normalStroke;if(_m(o)||_m(l)){n=n||{};var c=n.style||{};c.fill==="inherit"?(i=!0,n=He({},n),c=He({},c),c.fill=o):!_m(c.fill)&&_m(o)?(i=!0,n=He({},n),c=He({},c),c.fill=P3(o)):!_m(c.stroke)&&_m(l)&&(i||(n=He({},n),c=He({},c)),c.stroke=P3(l)),n.style=c}}if(n&&n.z2==null){i||(n=He({},n));var u=r.z2EmphasisLift;n.z2=r.z2+(u??ry)}return n}function txe(r,e,t){if(t&&t.z2==null){t=He({},t);var n=r.z2SelectLift;t.z2=r.z2+(n??Yye)}return t}function rxe(r,e,t){var n=rr(r.currentStates,e)>=0,a=r.style.opacity,i=n?null:Jye(r,["opacity"],e,{opacity:1});t=t||{};var s=t.style||{};return s.opacity==null&&(t=He({},t),s=He({opacity:n?a:i.opacity*.1},s),t.style=s),t}function wE(r,e){var t=this.states[r];if(this.style){if(r==="emphasis")return exe(this,r,e,t);if(r==="blur")return rxe(this,r,t);if(r==="select")return txe(this,r,t)}return t}function xp(r){r.stateProxy=wE;var e=r.getTextContent(),t=r.getTextGuideLine();e&&(e.stateProxy=wE),t&&(t.stateProxy=wE)}function aH(r,e){!Cee(r,e)&&!r.__highByOuter&&jh(r,yee)}function iH(r,e){!Cee(r,e)&&!r.__highByOuter&&jh(r,xee)}function Ch(r,e){r.__highByOuter|=1<<(e||0),jh(r,yee)}function Bh(r,e){!(r.__highByOuter&=~(1<<(e||0)))&&jh(r,xee)}function wee(r){jh(r,Kk)}function Wk(r){jh(r,bee)}function See(r){jh(r,Xye)}function _ee(r){jh(r,Zye)}function Cee(r,e){return r.__highDownSilentOnTouch&&e.zrByTouch}function Bee(r){var e=r.getModel(),t=[],n=[];e.eachComponent(function(a,i){var s=Vk(i),o=a==="series",l=o?r.getViewOfSeriesModel(i):r.getViewOfComponentModel(i);!o&&n.push(l),s.isBlured&&(l.group.traverse(function(c){bee(c)}),o&&t.push(i)),s.isBlured=!1}),X(n,function(a){a&&a.toggleBlurSeries&&a.toggleBlurSeries(t,!1,e)})}function X3(r,e,t,n){var a=n.getModel();t=t||"coordinateSystem";function i(c,u){for(var h=0;h<u.length;h++){var d=c.getItemGraphicEl(u[h]);d&&Wk(d)}}if(r!=null&&!(!e||e==="none")){var s=a.getSeriesByIndex(r),o=s.coordinateSystem;o&&o.master&&(o=o.master);var l=[];a.eachSeries(function(c){var u=s===c,h=c.coordinateSystem;h&&h.master&&(h=h.master);var d=h&&o?h===o:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!d||e==="series"&&u)){var A=n.getViewOfSeriesModel(c);if(A.group.traverse(function(v){v.__highByOuter&&u&&e==="self"||Kk(v)}),Ki(e))i(c.getData(),e);else if(Pt(e))for(var g=pr(e),p=0;p<g.length;p++)i(c.getData(g[p]),e[g[p]]);l.push(c),Vk(c).isBlured=!0}}),a.eachComponent(function(c,u){if(c!=="series"){var h=n.getViewOfComponentModel(u);h&&h.toggleBlurSeries&&h.toggleBlurSeries(l,!0,a)}})}}function Z3(r,e,t){if(!(r==null||e==null)){var n=t.getModel().getComponent(r,e);if(n){Vk(n).isBlured=!0;var a=t.getViewOfComponentModel(n);!a||!a.focusBlurEnabled||a.group.traverse(function(i){Kk(i)})}}}function nxe(r,e,t){var n=r.seriesIndex,a=r.getData(e.dataType);if(a){var i=vp(a,e);i=($e(i)?i[0]:i)||0;var s=a.getItemGraphicEl(i);if(!s)for(var o=a.count(),l=0;!s&&l<o;)s=a.getItemGraphicEl(l++);if(s){var c=Qt(s);X3(n,c.focus,c.blurScope,t)}else{var u=r.get(["emphasis","focus"]),h=r.get(["emphasis","blurScope"]);u!=null&&X3(n,u,h,t)}}}function qk(r,e,t,n){var a={focusSelf:!1,dispatchers:null};if(r==null||r==="series"||e==null||t==null)return a;var i=n.getModel().getComponent(r,e);if(!i)return a;var s=n.getViewOfComponentModel(i);if(!s||!s.findHighDownDispatchers)return a;for(var o=s.findHighDownDispatchers(t),l,c=0;c<o.length;c++)if(Qt(o[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function axe(r,e,t){var n=Qt(r),a=qk(n.componentMainType,n.componentIndex,n.componentHighDownName,t),i=a.dispatchers,s=a.focusSelf;i?(s&&Z3(n.componentMainType,n.componentIndex,t),X(i,function(o){return aH(o,e)})):(X3(n.seriesIndex,n.focus,n.blurScope,t),n.focus==="self"&&Z3(n.componentMainType,n.componentIndex,t),aH(r,e))}function ixe(r,e,t){Bee(t);var n=Qt(r),a=qk(n.componentMainType,n.componentIndex,n.componentHighDownName,t).dispatchers;a?X(a,function(i){return iH(i,e)}):iH(r,e)}function sxe(r,e,t){if(eR(e)){var n=e.dataType,a=r.getData(n),i=vp(a,e);$e(i)||(i=[i]),r[e.type===I1?"toggleSelect":e.type===T1?"select":"unselect"](i,n)}}function sH(r){var e=r.getAllData();X(e,function(t){var n=t.data,a=t.type;n.eachItemGraphicEl(function(i,s){r.isSelected(s,a)?See(i):_ee(i)})})}function oxe(r){var e=[];return r.eachSeries(function(t){var n=t.getAllData();X(n,function(a){a.data;var i=a.type,s=t.getSelectedDataIndices();if(s.length>0){var o={dataIndex:s,seriesIndex:t.seriesIndex};i!=null&&(o.dataType=i),e.push(o)}})}),e}function ep(r,e,t){Ig(r,!0),jh(r,xp),J3(r,e,t)}function lxe(r){Ig(r,!1)}function qn(r,e,t,n){n?lxe(r):ep(r,e,t)}function J3(r,e,t){var n=Qt(r);e!=null?(n.focus=e,n.blurScope=t):n.focus&&(n.focus=null)}var oH=["emphasis","blur","select"],cxe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Bi(r,e,t,n){t=t||"itemStyle";for(var a=0;a<oH.length;a++){var i=oH[a],s=e.getModel([i,t]),o=r.ensureState(i);o.style=n?n(s):s[cxe[t]]()}}function Ig(r,e){var t=e===!1,n=r;r.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=r.highDownSilentOnTouch),(!t||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!t)}function _b(r){return!!(r&&r.__highDownDispatcher)}function uxe(r,e,t){var n=Qt(r);n.componentMainType=e.mainType,n.componentIndex=e.componentIndex,n.componentHighDownName=t}function hxe(r){var e=rH[r];return e==null&&tH<=32&&(e=rH[r]=tH++),e}function eR(r){var e=r.type;return e===T1||e===t5||e===I1}function lH(r){var e=r.type;return e===Jg||e===e5}function dxe(r){var e=vee(r);e.normalFill=r.style.fill,e.normalStroke=r.style.stroke;var t=r.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var Cm=ou.CMD,Axe=[[],[],[]],cH=Math.sqrt,fxe=Math.atan2;function Nee(r,e){if(e){var t=r.data,n=r.len(),a,i,s,o,l,c,u=Cm.M,h=Cm.C,d=Cm.L,A=Cm.R,g=Cm.A,p=Cm.Q;for(s=0,o=0;s<n;){switch(a=t[s++],o=s,i=0,a){case u:i=1;break;case d:i=1;break;case h:i=3;break;case p:i=2;break;case g:var v=e[4],m=e[5],y=cH(e[0]*e[0]+e[1]*e[1]),x=cH(e[2]*e[2]+e[3]*e[3]),b=fxe(-e[1]/x,e[0]/y);t[s]*=y,t[s++]+=v,t[s]*=x,t[s++]+=m,t[s++]*=y,t[s++]*=x,t[s++]+=b,t[s++]+=b,s+=2,o=s;break;case A:c[0]=t[s++],c[1]=t[s++],Ci(c,c,e),t[o++]=c[0],t[o++]=c[1],c[0]+=t[s++],c[1]+=t[s++],Ci(c,c,e),t[o++]=c[0],t[o++]=c[1]}for(l=0;l<i;l++){var S=Axe[l];S[0]=t[s++],S[1]=t[s++],Ci(S,S,e),t[o++]=S[0],t[o++]=S[1]}}r.increaseVersion()}}var SE=Math.sqrt,oS=Math.sin,lS=Math.cos,Jy=Math.PI;function uH(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function tR(r,e){return(r[0]*e[0]+r[1]*e[1])/(uH(r)*uH(e))}function hH(r,e){return(r[0]*e[1]<r[1]*e[0]?-1:1)*Math.acos(tR(r,e))}function dH(r,e,t,n,a,i,s,o,l,c,u){var h=l*(Jy/180),d=lS(h)*(r-t)/2+oS(h)*(e-n)/2,A=-1*oS(h)*(r-t)/2+lS(h)*(e-n)/2,g=d*d/(s*s)+A*A/(o*o);g>1&&(s*=SE(g),o*=SE(g));var p=(a===i?-1:1)*SE((s*s*(o*o)-s*s*(A*A)-o*o*(d*d))/(s*s*(A*A)+o*o*(d*d)))||0,v=p*s*A/o,m=p*-o*d/s,y=(r+t)/2+lS(h)*v-oS(h)*m,x=(e+n)/2+oS(h)*v+lS(h)*m,b=hH([1,0],[(d-v)/s,(A-m)/o]),S=[(d-v)/s,(A-m)/o],_=[(-1*d-v)/s,(-1*A-m)/o],C=hH(S,_);if(tR(S,_)<=-1&&(C=Jy),tR(S,_)>=1&&(C=0),C<0){var w=Math.round(C/Jy*1e6)/1e6;C=Jy*2+w%2*Jy}u.addData(c,y,x,s,o,b,C,h,i)}var gxe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,pxe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function mxe(r){var e=new ou;if(!r)return e;var t=0,n=0,a=t,i=n,s,o=ou.CMD,l=r.match(gxe);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],h=u.charAt(0),d=void 0,A=u.match(pxe)||[],g=A.length,p=0;p<g;p++)A[p]=parseFloat(A[p]);for(var v=0;v<g;){var m=void 0,y=void 0,x=void 0,b=void 0,S=void 0,_=void 0,C=void 0,w=t,B=n,D=void 0,T=void 0;switch(h){case"l":t+=A[v++],n+=A[v++],d=o.L,e.addData(d,t,n);break;case"L":t=A[v++],n=A[v++],d=o.L,e.addData(d,t,n);break;case"m":t+=A[v++],n+=A[v++],d=o.M,e.addData(d,t,n),a=t,i=n,h="l";break;case"M":t=A[v++],n=A[v++],d=o.M,e.addData(d,t,n),a=t,i=n,h="L";break;case"h":t+=A[v++],d=o.L,e.addData(d,t,n);break;case"H":t=A[v++],d=o.L,e.addData(d,t,n);break;case"v":n+=A[v++],d=o.L,e.addData(d,t,n);break;case"V":n=A[v++],d=o.L,e.addData(d,t,n);break;case"C":d=o.C,e.addData(d,A[v++],A[v++],A[v++],A[v++],A[v++],A[v++]),t=A[v-2],n=A[v-1];break;case"c":d=o.C,e.addData(d,A[v++]+t,A[v++]+n,A[v++]+t,A[v++]+n,A[v++]+t,A[v++]+n),t+=A[v-2],n+=A[v-1];break;case"S":m=t,y=n,D=e.len(),T=e.data,s===o.C&&(m+=t-T[D-4],y+=n-T[D-3]),d=o.C,w=A[v++],B=A[v++],t=A[v++],n=A[v++],e.addData(d,m,y,w,B,t,n);break;case"s":m=t,y=n,D=e.len(),T=e.data,s===o.C&&(m+=t-T[D-4],y+=n-T[D-3]),d=o.C,w=t+A[v++],B=n+A[v++],t+=A[v++],n+=A[v++],e.addData(d,m,y,w,B,t,n);break;case"Q":w=A[v++],B=A[v++],t=A[v++],n=A[v++],d=o.Q,e.addData(d,w,B,t,n);break;case"q":w=A[v++]+t,B=A[v++]+n,t+=A[v++],n+=A[v++],d=o.Q,e.addData(d,w,B,t,n);break;case"T":m=t,y=n,D=e.len(),T=e.data,s===o.Q&&(m+=t-T[D-4],y+=n-T[D-3]),t=A[v++],n=A[v++],d=o.Q,e.addData(d,m,y,t,n);break;case"t":m=t,y=n,D=e.len(),T=e.data,s===o.Q&&(m+=t-T[D-4],y+=n-T[D-3]),t+=A[v++],n+=A[v++],d=o.Q,e.addData(d,m,y,t,n);break;case"A":x=A[v++],b=A[v++],S=A[v++],_=A[v++],C=A[v++],w=t,B=n,t=A[v++],n=A[v++],d=o.A,dH(w,B,t,n,_,C,x,b,S,d,e);break;case"a":x=A[v++],b=A[v++],S=A[v++],_=A[v++],C=A[v++],w=t,B=n,t+=A[v++],n+=A[v++],d=o.A,dH(w,B,t,n,_,C,x,b,S,d,e);break}}(h==="z"||h==="Z")&&(d=o.Z,e.addData(d),t=a,n=i),s=d}return e.toStatic(),e}var Tee=function(r){Rn(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(hr);function Iee(r){return r.setData!=null}function Eee(r,e){var t=mxe(r),n=He({},e);return n.buildPath=function(a){if(Iee(a)){a.setData(t.data);var i=a.getContext();i&&a.rebuildPath(i,1)}else{var i=a;t.rebuildPath(i,1)}},n.applyTransform=function(a){Nee(t,a),this.dirtyShape()},n}function Dee(r,e){return new Tee(Eee(r,e))}function vxe(r,e){var t=Eee(r,e),n=function(a){Rn(i,a);function i(s){var o=a.call(this,s)||this;return o.applyTransform=t.applyTransform,o.buildPath=t.buildPath,o}return i}(Tee);return n}function yxe(r,e){for(var t=[],n=r.length,a=0;a<n;a++){var i=r[a];t.push(i.getUpdatedPathProxy(!0))}var s=new hr(e);return s.createPathProxy(),s.buildPath=function(o){if(Iee(o)){o.appendPath(t);var l=o.getContext();l&&o.rebuildPath(l,1)}},s}function Yk(r,e){e=e||{};var t=new hr;return r.shape&&t.setShape(r.shape),t.setStyle(r.style),e.bakeTransform?Nee(t.path,r.getComputedTransform()):e.toLocal?t.setLocalTransform(r.getComputedTransform()):t.copyTransform(r),t.buildPath=r.buildPath,t.applyTransform=t.applyTransform,t.z=r.z,t.z2=r.z2,t.zlevel=r.zlevel,t}var xxe=function(){function r(){this.cx=0,this.cy=0,this.r=0}return r}(),Oh=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new xxe},e.prototype.buildPath=function(t,n){t.moveTo(n.cx+n.r,n.cy),t.arc(n.cx,n.cy,n.r,0,Math.PI*2)},e}(hr);Oh.prototype.type="circle";var bxe=function(){function r(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return r}(),MN=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new bxe},e.prototype.buildPath=function(t,n){var a=.5522848,i=n.cx,s=n.cy,o=n.rx,l=n.ry,c=o*a,u=l*a;t.moveTo(i-o,s),t.bezierCurveTo(i-o,s-u,i-c,s-l,i,s-l),t.bezierCurveTo(i+c,s-l,i+o,s-u,i+o,s),t.bezierCurveTo(i+o,s+u,i+c,s+l,i,s+l),t.bezierCurveTo(i-c,s+l,i-o,s+u,i-o,s),t.closePath()},e}(hr);MN.prototype.type="ellipse";var Mee=Math.PI,_E=Mee*2,Qf=Math.sin,Bm=Math.cos,wxe=Math.acos,Mi=Math.atan2,AH=Math.abs,E1=Math.sqrt,Vx=Math.max,Cc=Math.min,Ll=1e-4;function Sxe(r,e,t,n,a,i,s,o){var l=t-r,c=n-e,u=s-a,h=o-i,d=h*l-u*c;if(!(d*d<Ll))return d=(u*(e-i)-h*(r-a))/d,[r+d*l,e+d*c]}function cS(r,e,t,n,a,i,s){var o=r-t,l=e-n,c=(s?i:-i)/E1(o*o+l*l),u=c*l,h=-c*o,d=r+u,A=e+h,g=t+u,p=n+h,v=(d+g)/2,m=(A+p)/2,y=g-d,x=p-A,b=y*y+x*x,S=a-i,_=d*p-g*A,C=(x<0?-1:1)*E1(Vx(0,S*S*b-_*_)),w=(_*x-y*C)/b,B=(-_*y-x*C)/b,D=(_*x+y*C)/b,T=(-_*y+x*C)/b,E=w-v,R=B-m,M=D-v,k=T-m;return E*E+R*R>M*M+k*k&&(w=D,B=T),{cx:w,cy:B,x0:-u,y0:-h,x1:w*(a/S-1),y1:B*(a/S-1)}}function _xe(r){var e;if($e(r)){var t=r.length;if(!t)return r;t===1?e=[r[0],r[0],0,0]:t===2?e=[r[0],r[0],r[1],r[1]]:t===3?e=r.concat(r[2]):e=r}else e=[r,r,r,r];return e}function Cxe(r,e){var t,n=Vx(e.r,0),a=Vx(e.r0||0,0),i=n>0,s=a>0;if(!(!i&&!s)){if(i||(n=a,a=0),a>n){var o=n;n=a,a=o}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,h=e.cy,d=!!e.clockwise,A=AH(c-l),g=A>_E&&A%_E;if(g>Ll&&(A=g),!(n>Ll))r.moveTo(u,h);else if(A>_E-Ll)r.moveTo(u+n*Bm(l),h+n*Qf(l)),r.arc(u,h,n,l,c,!d),a>Ll&&(r.moveTo(u+a*Bm(c),h+a*Qf(c)),r.arc(u,h,a,c,l,d));else{var p=void 0,v=void 0,m=void 0,y=void 0,x=void 0,b=void 0,S=void 0,_=void 0,C=void 0,w=void 0,B=void 0,D=void 0,T=void 0,E=void 0,R=void 0,M=void 0,k=n*Bm(l),O=n*Qf(l),Q=a*Bm(c),H=a*Qf(c),W=A>Ll;if(W){var te=e.cornerRadius;te&&(t=_xe(te),p=t[0],v=t[1],m=t[2],y=t[3]);var ee=AH(n-a)/2;if(x=Cc(ee,m),b=Cc(ee,y),S=Cc(ee,p),_=Cc(ee,v),B=C=Vx(x,b),D=w=Vx(S,_),(C>Ll||w>Ll)&&(T=n*Bm(c),E=n*Qf(c),R=a*Bm(l),M=a*Qf(l),A<Mee)){var j=Sxe(k,O,R,M,T,E,Q,H);if(j){var G=k-j[0],Y=O-j[1],Z=T-j[0],de=E-j[1],he=1/Qf(wxe((G*Z+Y*de)/(E1(G*G+Y*Y)*E1(Z*Z+de*de)))/2),fe=E1(j[0]*j[0]+j[1]*j[1]);B=Cc(C,(n-fe)/(he+1)),D=Cc(w,(a-fe)/(he-1))}}}if(!W)r.moveTo(u+k,h+O);else if(B>Ll){var q=Cc(m,B),ge=Cc(y,B),me=cS(R,M,k,O,n,q,d),we=cS(T,E,Q,H,n,ge,d);r.moveTo(u+me.cx+me.x0,h+me.cy+me.y0),B<C&&q===ge?r.arc(u+me.cx,h+me.cy,B,Mi(me.y0,me.x0),Mi(we.y0,we.x0),!d):(q>0&&r.arc(u+me.cx,h+me.cy,q,Mi(me.y0,me.x0),Mi(me.y1,me.x1),!d),r.arc(u,h,n,Mi(me.cy+me.y1,me.cx+me.x1),Mi(we.cy+we.y1,we.cx+we.x1),!d),ge>0&&r.arc(u+we.cx,h+we.cy,ge,Mi(we.y1,we.x1),Mi(we.y0,we.x0),!d))}else r.moveTo(u+k,h+O),r.arc(u,h,n,l,c,!d);if(!(a>Ll)||!W)r.lineTo(u+Q,h+H);else if(D>Ll){var q=Cc(p,D),ge=Cc(v,D),me=cS(Q,H,T,E,a,-ge,d),we=cS(k,O,R,M,a,-q,d);r.lineTo(u+me.cx+me.x0,h+me.cy+me.y0),D<w&&q===ge?r.arc(u+me.cx,h+me.cy,D,Mi(me.y0,me.x0),Mi(we.y0,we.x0),!d):(ge>0&&r.arc(u+me.cx,h+me.cy,ge,Mi(me.y0,me.x0),Mi(me.y1,me.x1),!d),r.arc(u,h,a,Mi(me.cy+me.y1,me.cx+me.x1),Mi(we.cy+we.y1,we.cx+we.x1),d),q>0&&r.arc(u+we.cx,h+we.cy,q,Mi(we.y1,we.x1),Mi(we.y0,we.x0),!d))}else r.lineTo(u+Q,h+H),r.arc(u,h,a,c,l,d)}r.closePath()}}}var Bxe=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return r}(),ms=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Bxe},e.prototype.buildPath=function(t,n){Cxe(t,n)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(hr);ms.prototype.type="sector";var Nxe=function(){function r(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return r}(),Nw=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Nxe},e.prototype.buildPath=function(t,n){var a=n.cx,i=n.cy,s=Math.PI*2;t.moveTo(a+n.r,i),t.arc(a,i,n.r,0,s,!1),t.moveTo(a+n.r0,i),t.arc(a,i,n.r0,0,s,!0)},e}(hr);Nw.prototype.type="ring";function Txe(r,e,t,n){var a=[],i=[],s=[],o=[],l,c,u,h;if(n){u=[1/0,1/0],h=[-1/0,-1/0];for(var d=0,A=r.length;d<A;d++)rA(u,u,r[d]),nA(h,h,r[d]);rA(u,u,n[0]),nA(h,h,n[1])}for(var d=0,A=r.length;d<A;d++){var g=r[d];if(t)l=r[d?d-1:A-1],c=r[(d+1)%A];else if(d===0||d===A-1){a.push(hh(r[d]));continue}else l=r[d-1],c=r[d+1];Ng(i,c,l),K_(i,i,e);var p=B3(g,l),v=B3(g,c),m=p+v;m!==0&&(p/=m,v/=m),K_(s,i,-p),K_(o,i,v);var y=s8([],g,s),x=s8([],g,o);n&&(nA(y,y,u),rA(y,y,h),nA(x,x,u),rA(x,x,h)),a.push(y),a.push(x)}return t&&a.push(a.shift()),a}function Ree(r,e,t){var n=e.smooth,a=e.points;if(a&&a.length>=2){if(n){var i=Txe(a,n,t,e.smoothConstraint);r.moveTo(a[0][0],a[0][1]);for(var s=a.length,o=0;o<(t?s:s-1);o++){var l=i[o*2],c=i[o*2+1],u=a[(o+1)%s];r.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{r.moveTo(a[0][0],a[0][1]);for(var o=1,h=a.length;o<h;o++)r.lineTo(a[o][0],a[o][1])}t&&r.closePath()}}var Ixe=function(){function r(){this.points=null,this.smooth=0,this.smoothConstraint=null}return r}(),vs=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Ixe},e.prototype.buildPath=function(t,n){Ree(t,n,!0)},e}(hr);vs.prototype.type="polygon";var Exe=function(){function r(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return r}(),ws=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Exe},e.prototype.buildPath=function(t,n){Ree(t,n,!1)},e}(hr);ws.prototype.type="polyline";var Dxe={},Mxe=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}(),Ya=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Mxe},e.prototype.buildPath=function(t,n){var a,i,s,o;if(this.subPixelOptimize){var l=fee(Dxe,n,this.style);a=l.x1,i=l.y1,s=l.x2,o=l.y2}else a=n.x1,i=n.y1,s=n.x2,o=n.y2;var c=n.percent;c!==0&&(t.moveTo(a,i),c<1&&(s=a*(1-c)+s*c,o=i*(1-c)+o*c),t.lineTo(s,o))},e.prototype.pointAt=function(t){var n=this.shape;return[n.x1*(1-t)+n.x2*t,n.y1*(1-t)+n.y2*t]},e}(hr);Ya.prototype.type="line";var Ts=[],Rxe=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return r}();function fH(r,e,t){var n=r.cpx2,a=r.cpy2;return n!=null||a!=null?[(t?v8:$a)(r.x1,r.cpx1,r.cpx2,r.x2,e),(t?v8:$a)(r.y1,r.cpy1,r.cpy2,r.y2,e)]:[(t?D3:li)(r.x1,r.cpx1,r.x2,e),(t?D3:li)(r.y1,r.cpy1,r.y2,e)]}var Tw=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Rxe},e.prototype.buildPath=function(t,n){var a=n.x1,i=n.y1,s=n.x2,o=n.y2,l=n.cpx1,c=n.cpy1,u=n.cpx2,h=n.cpy2,d=n.percent;d!==0&&(t.moveTo(a,i),u==null||h==null?(d<1&&(vb(a,l,s,d,Ts),l=Ts[1],s=Ts[2],vb(i,c,o,d,Ts),c=Ts[1],o=Ts[2]),t.quadraticCurveTo(l,c,s,o)):(d<1&&(HA(a,l,u,s,d,Ts),l=Ts[1],u=Ts[2],s=Ts[3],HA(i,c,h,o,d,Ts),c=Ts[1],h=Ts[2],o=Ts[3]),t.bezierCurveTo(l,c,u,h,s,o)))},e.prototype.pointAt=function(t){return fH(this.shape,t,!1)},e.prototype.tangentAt=function(t){var n=fH(this.shape,t,!0);return J0(n,n)},e}(hr);Tw.prototype.type="bezier-curve";var Lxe=function(){function r(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),RN=function(r){Rn(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Lxe},e.prototype.buildPath=function(t,n){var a=n.cx,i=n.cy,s=Math.max(n.r,0),o=n.startAngle,l=n.endAngle,c=n.clockwise,u=Math.cos(o),h=Math.sin(o);t.moveTo(u*s+a,h*s+i),t.arc(a,i,s,o,l,!c)},e}(hr);RN.prototype.type="arc";var Xk=function(r){Rn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,n=this.shapeChanged(),a=0;a<t.length;a++)n=n||t[a].shapeChanged();n&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],n=this.getGlobalScale(),a=0;a<t.length;a++)t[a].path||t[a].createPathProxy(),t[a].path.setScale(n[0],n[1],t[a].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,n){for(var a=n.paths||[],i=0;i<a.length;i++)a[i].buildPath(t,a[i].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],n=0;n<t.length;n++)t[n].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),hr.prototype.getBoundingRect.call(this)},e}(hr),Lee=function(){function r(e){this.colorStops=e||[]}return r.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},r}(),Iw=function(r){Rn(e,r);function e(t,n,a,i,s,o){var l=r.call(this,s)||this;return l.x=t??0,l.y=n??0,l.x2=a??1,l.y2=i??0,l.type="linear",l.global=o||!1,l}return e}(Lee),Pee=function(r){Rn(e,r);function e(t,n,a,i,s){var o=r.call(this,i)||this;return o.x=t??.5,o.y=n??.5,o.r=a??.5,o.type="radial",o.global=s||!1,o}return e}(Lee),zf=[0,0],Gf=[0,0],uS=new Xt,hS=new Xt,xC=function(){function r(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Xt;for(var n=0;n<2;n++)this._axes[n]=new Xt;e&&this.fromBoundingRect(e,t)}return r.prototype.fromBoundingRect=function(e,t){var n=this._corners,a=this._axes,i=e.x,s=e.y,o=i+e.width,l=s+e.height;if(n[0].set(i,s),n[1].set(o,s),n[2].set(o,l),n[3].set(i,l),t)for(var c=0;c<4;c++)n[c].transform(t);Xt.sub(a[0],n[1],n[0]),Xt.sub(a[1],n[3],n[0]),a[0].normalize(),a[1].normalize();for(var c=0;c<2;c++)this._origin[c]=a[c].dot(n[0])},r.prototype.intersect=function(e,t){var n=!0,a=!t;return uS.set(1/0,1/0),hS.set(0,0),!this._intersectCheckOneSide(this,e,uS,hS,a,1)&&(n=!1,a)||!this._intersectCheckOneSide(e,this,uS,hS,a,-1)&&(n=!1,a)||a||Xt.copy(t,n?uS:hS),n},r.prototype._intersectCheckOneSide=function(e,t,n,a,i,s){for(var o=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,zf),this._getProjMinMaxOnAxis(l,t._corners,Gf),zf[1]<Gf[0]||zf[0]>Gf[1]){if(o=!1,i)return o;var u=Math.abs(Gf[0]-zf[1]),h=Math.abs(zf[0]-Gf[1]);Math.min(u,h)>a.len()&&(u<h?Xt.scale(a,c,-u*s):Xt.scale(a,c,h*s))}else if(n){var u=Math.abs(Gf[0]-zf[1]),h=Math.abs(zf[0]-Gf[1]);Math.min(u,h)<n.len()&&(u<h?Xt.scale(n,c,u*s):Xt.scale(n,c,-h*s))}}return o},r.prototype._getProjMinMaxOnAxis=function(e,t,n){for(var a=this._axes[e],i=this._origin,s=t[0].dot(a)+i[e],o=s,l=s,c=1;c<t.length;c++){var u=t[c].dot(a)+i[e];o=Math.min(u,o),l=Math.max(u,l)}n[0]=o,n[1]=l},r}(),Pxe=[],kxe=function(r){Rn(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,n){t.call(n,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,n){n?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,n){n=n||!1;for(var a=0;a<t.length;a++)this.addDisplayable(t[a],n)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var n=this._cursor;n<this._displayables.length;n++)t&&t(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)t&&t(this._temporaryDisplayables[n])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var n=this._displayables[t];n.parent=this,n.update(),n.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var n=this._temporaryDisplayables[t];n.parent=this,n.update(),n.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Zt(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var a=this._displayables[n],i=a.getBoundingRect().clone();a.needLocalTransform()&&i.applyTransform(a.getLocalTransform(Pxe)),t.union(i)}this._rect=t}return this._rect},e.prototype.contain=function(t,n){var a=this.transformCoordToLocal(t,n),i=this.getBoundingRect();if(i.contain(a[0],a[1]))for(var s=0;s<this._displayables.length;s++){var o=this._displayables[s];if(o.contain(t,n))return!0}return!1},e}(gl),kee=wr();function ny(r,e,t,n,a){var i;if(e&&e.ecModel){var s=e.ecModel.getUpdatePayload();i=s&&s.animation}var o=e&&e.isAnimationEnabled(),l=r==="update";if(o){var c=void 0,u=void 0,h=void 0;n?(c=$t(n.duration,200),u=$t(n.easing,"cubicOut"),h=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),h=e.getShallow(l?"animationDelayUpdate":"animationDelay")),i&&(i.duration!=null&&(c=i.duration),i.easing!=null&&(u=i.easing),i.delay!=null&&(h=i.delay)),It(h)&&(h=h(t,a)),It(c)&&(c=c(t));var d={duration:c||0,delay:h,easing:u};return d}else return null}function Zk(r,e,t,n,a,i,s){var o=!1,l;It(a)?(s=i,i=a,a=null):Pt(a)&&(i=a.cb,s=a.during,o=a.isFrom,l=a.removeOpt,a=a.dataIndex);var c=r==="leave";c||e.stopAnimation("leave");var u=ny(r,n,a,c?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(e,a):null);if(u&&u.duration>0){var h=u.duration,d=u.delay,A=u.easing,g={duration:h,delay:d||0,easing:A,done:i,force:!!i||!!s,setToFinal:!c,scope:r,during:s};o?e.animateFrom(t,g):e.animateTo(t,g)}else e.stopAnimation(),!o&&e.attr(t),s&&s(1),i&&i()}function Er(r,e,t,n,a,i){Zk("update",r,e,t,n,a,i)}function jn(r,e,t,n,a,i){Zk("enter",r,e,t,n,a,i)}function Hv(r){if(!r.__zr)return!0;for(var e=0;e<r.animators.length;e++){var t=r.animators[e];if(t.scope==="leave")return!0}return!1}function QA(r,e,t,n,a,i){Hv(r)||Zk("leave",r,e,t,n,a,i)}function gH(r,e,t,n){r.removeTextContent(),r.removeTextGuideLine(),QA(r,{style:{opacity:0}},e,t,n)}function Cb(r,e,t){function n(){r.parent&&r.parent.remove(r)}r.isGroup?r.traverse(function(a){a.isGroup||gH(a,e,t,n)}):gH(r,e,t,n)}function nc(r){kee(r).oldStyle=r.style}function Fxe(r){return kee(r).oldStyle}var bC=Math.max,wC=Math.min,rR={};function jxe(r){return hr.extend(r)}var Oxe=vxe;function Uxe(r,e){return Oxe(r,e)}function oc(r,e){rR[r]=e}function Jk(r){if(rR.hasOwnProperty(r))return rR[r]}function LN(r,e,t,n){var a=Dee(r,e);return t&&(n==="center"&&(t=jee(t,a.getBoundingRect())),Oee(a,t)),a}function Fee(r,e,t){var n=new fi({style:{image:r,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(a){if(t==="center"){var i={width:a.width,height:a.height};n.setStyle(jee(e,i))}}});return n}function jee(r,e){var t=e.width/e.height,n=r.height*t,a;n<=r.width?a=r.height:(n=r.width,a=n/t);var i=r.x+r.width/2,s=r.y+r.height/2;return{x:i-n/2,y:s-a/2,width:n,height:a}}var rl=yxe;function Oee(r,e){if(r.applyTransform){var t=r.getBoundingRect(),n=t.calculateTransform(e);r.applyTransform(n)}}function _0(r,e){return fee(r,r,{lineWidth:e}),r}function Hxe(r){return gee(r.shape,r.shape,r.style),r}var r5=Tg;function tp(r,e){for(var t=wN([]);r&&r!==e;)dh(t,r.getLocalTransform(),t),r=r.parent;return t}function ec(r,e,t){return e&&!Ki(e)&&(e=rh.getLocalTransform(e)),t&&(e=ey([],e)),Ci([],r,e)}function PN(r,e,t){var n=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),a=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),i=[r==="left"?-n:r==="right"?n:0,r==="top"?-a:r==="bottom"?a:0];return i=ec(i,e,t),Math.abs(i[0])>Math.abs(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function pH(r){return!r.isGroup}function Qxe(r){return r.shape!=null}function Ew(r,e,t){if(!r||!e)return;function n(s){var o={};return s.traverse(function(l){pH(l)&&l.anid&&(o[l.anid]=l)}),o}function a(s){var o={x:s.x,y:s.y,rotation:s.rotation};return Qxe(s)&&(o.shape=He({},s.shape)),o}var i=n(r);e.traverse(function(s){if(pH(s)&&s.anid){var o=i[s.anid];if(o){var l=a(s);s.attr(a(o)),Er(s,l,t,Qt(s).dataIndex)}}})}function Uee(r,e){return We(r,function(t){var n=t[0];n=bC(n,e.x),n=wC(n,e.x+e.width);var a=t[1];return a=bC(a,e.y),a=wC(a,e.y+e.height),[n,a]})}function zxe(r,e){var t=bC(r.x,e.x),n=wC(r.x+r.width,e.x+e.width),a=bC(r.y,e.y),i=wC(r.y+r.height,e.y+e.height);if(n>=t&&i>=a)return{x:t,y:a,width:n-t,height:i-a}}function Dw(r,e,t){var n=He({rectHover:!0},e),a=n.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},r)return r.indexOf("image://")===0?(a.image=r.slice(8),Lt(a,t),new fi(n)):LN(r.replace("path://",""),n,t,"center")}function $x(r,e,t,n,a){for(var i=0,s=a[a.length-1];i<a.length;i++){var o=a[i];if(Hee(r,e,t,n,o[0],o[1],s[0],s[1]))return!0;s=o}}function Hee(r,e,t,n,a,i,s,o){var l=t-r,c=n-e,u=s-a,h=o-i,d=CE(u,h,l,c);if(Gxe(d))return!1;var A=r-a,g=e-i,p=CE(A,g,l,c)/d;if(p<0||p>1)return!1;var v=CE(A,g,u,h)/d;return!(v<0||v>1)}function CE(r,e,t,n){return r*n-t*e}function Gxe(r){return r<=1e-6&&r>=-1e-6}function Fp(r){var e=r.itemTooltipOption,t=r.componentModel,n=r.itemName,a=dt(e)?{formatter:e}:e,i=t.mainType,s=t.componentIndex,o={componentType:i,name:n,$vars:["name"]};o[i+"Index"]=s;var l=r.formatterParamsExtra;l&&X(pr(l),function(u){vt(o,u)||(o[u]=l[u],o.$vars.push(u))});var c=Qt(r.el);c.componentMainType=i,c.componentIndex=s,c.tooltipConfig={name:n,option:Lt({content:n,encodeHTMLContent:!0,formatterParams:o},a)}}function mH(r,e){var t;r.isGroup&&(t=e(r)),t||r.traverse(e)}function nf(r,e){if(r)if($e(r))for(var t=0;t<r.length;t++)mH(r[t],e);else mH(r,e)}oc("circle",Oh);oc("ellipse",MN);oc("sector",ms);oc("ring",Nw);oc("polygon",vs);oc("polyline",ws);oc("rect",br);oc("line",Ya);oc("bezierCurve",Tw);oc("arc",RN);const jp=Object.freeze(Object.defineProperty({__proto__:null,Arc:RN,BezierCurve:Tw,BoundingRect:Zt,Circle:Oh,CompoundPath:Xk,Ellipse:MN,Group:Ht,Image:fi,IncrementalDisplayable:kxe,Line:Ya,LinearGradient:Iw,OrientedBoundingRect:xC,Path:hr,Point:Xt,Polygon:vs,Polyline:ws,RadialGradient:Pee,Rect:br,Ring:Nw,Sector:ms,Text:Cr,applyTransform:ec,clipPointsByRect:Uee,clipRectByRect:zxe,createIcon:Dw,extendPath:Uxe,extendShape:jxe,getShapeClass:Jk,getTransform:tp,groupTransition:Ew,initProps:jn,isElementRemoved:Hv,lineLineIntersect:Hee,linePolygonIntersect:$x,makeImage:Fee,makePath:LN,mergePath:rl,registerShape:oc,removeElement:QA,removeElementWithFadeOut:Cb,resizePath:Oee,setTooltipConfig:Fp,subPixelOptimize:r5,subPixelOptimizeLine:_0,subPixelOptimizeRect:Hxe,transformDirection:PN,traverseElements:nf,updateProps:Er},Symbol.toStringTag,{value:"Module"}));var kN={};function Qee(r,e){for(var t=0;t<ps.length;t++){var n=ps[t],a=e[n],i=r.ensureState(n);i.style=i.style||{},i.style.text=a}var s=r.currentStates.slice();r.clearStates(!0),r.setStyle({text:e.normal}),r.useStates(s,!0)}function nR(r,e,t){var n=r.labelFetcher,a=r.labelDataIndex,i=r.labelDimIndex,s=e.normal,o;n&&(o=n.getFormattedLabel(a,"normal",null,i,s&&s.get("formatter"),t!=null?{interpolatedValue:t}:null)),o==null&&(o=It(r.defaultText)?r.defaultText(a,r,t):r.defaultText);for(var l={normal:o},c=0;c<ps.length;c++){var u=ps[c],h=e[u];l[u]=$t(n?n.getFormattedLabel(a,u,null,i,h&&h.get("formatter")):null,o)}return l}function Ni(r,e,t,n){t=t||kN;for(var a=r instanceof Cr,i=!1,s=0;s<Sb.length;s++){var o=e[Sb[s]];if(o&&o.getShallow("show")){i=!0;break}}var l=a?r:r.getTextContent();if(i){a||(l||(l=new Cr,r.setTextContent(l)),r.stateProxy&&(l.stateProxy=r.stateProxy));var c=nR(t,e),u=e.normal,h=!!u.getShallow("show"),d=bn(u,n&&n.normal,t,!1,!a);d.text=c.normal,a||r.setTextConfig(SC(u,t,!1));for(var s=0;s<ps.length;s++){var A=ps[s],o=e[A];if(o){var g=l.ensureState(A),p=!!$t(o.getShallow("show"),h);if(p!==h&&(g.ignore=!p),g.style=bn(o,n&&n[A],t,!0,!a),g.style.text=c[A],!a){var v=r.ensureState(A);v.textConfig=SC(o,t,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!h,l.useStyle(d),l.dirty(),t.enableTextSetter&&(ay(l).setLabelText=function(m){var y=nR(t,e,m);Qee(l,y)})}else l&&(l.ignore=!0);r.dirty()}function ei(r,e){e=e||"label";for(var t={normal:r.getModel(e)},n=0;n<ps.length;n++){var a=ps[n];t[a]=r.getModel([a,e])}return t}function bn(r,e,t,n,a){var i={};return Vxe(i,r,t,n,a),e&&He(i,e),i}function SC(r,e,t){e=e||{};var n={},a,i=r.getShallow("rotate"),s=$t(r.getShallow("distance"),t?null:5),o=r.getShallow("offset");return a=r.getShallow("position")||(t?null:"inside"),a==="outside"&&(a=e.defaultOutsidePosition||"top"),a!=null&&(n.position=a),o!=null&&(n.offset=o),i!=null&&(i*=Math.PI/180,n.rotation=i),s!=null&&(n.distance=s),n.outsideFill=r.get("color")==="inherit"?e.inheritColor||null:"auto",n}function Vxe(r,e,t,n,a){t=t||kN;var i=e.ecModel,s=i&&i.option.textStyle,o=$xe(e),l;if(o){l={};for(var c in o)if(o.hasOwnProperty(c)){var u=e.getModel(["rich",c]);bH(l[c]={},u,s,t,n,a,!1,!0)}}l&&(r.rich=l);var h=e.get("overflow");h&&(r.overflow=h);var d=e.get("minMargin");d!=null&&(r.margin=d),bH(r,e,s,t,n,a,!0,!1)}function $xe(r){for(var e;r&&r!==r.ecModel;){var t=(r.option||kN).rich;if(t){e=e||{};for(var n=pr(t),a=0;a<n.length;a++){var i=n[a];e[i]=1}}r=r.parentModel}return e}var vH=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],yH=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],xH=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function bH(r,e,t,n,a,i,s,o){t=!a&&t||kN;var l=n&&n.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),h=$t(e.getShallow("opacity"),t.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),i||(c=c||t.color,u=u||t.textBorderColor),c!=null&&(r.fill=c),u!=null&&(r.stroke=u);var d=$t(e.getShallow("textBorderWidth"),t.textBorderWidth);d!=null&&(r.lineWidth=d);var A=$t(e.getShallow("textBorderType"),t.textBorderType);A!=null&&(r.lineDash=A);var g=$t(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);g!=null&&(r.lineDashOffset=g),!a&&h==null&&!o&&(h=n&&n.defaultOpacity),h!=null&&(r.opacity=h),!a&&!i&&r.fill==null&&n.inheritColor&&(r.fill=n.inheritColor);for(var p=0;p<vH.length;p++){var v=vH[p],m=$t(e.getShallow(v),t[v]);m!=null&&(r[v]=m)}for(var p=0;p<yH.length;p++){var v=yH[p],m=e.getShallow(v);m!=null&&(r[v]=m)}if(r.verticalAlign==null){var y=e.getShallow("baseline");y!=null&&(r.verticalAlign=y)}if(!s||!n.disableBox){for(var p=0;p<xH.length;p++){var v=xH[p],m=e.getShallow(v);m!=null&&(r[v]=m)}var x=e.getShallow("borderType");x!=null&&(r.borderDash=x),(r.backgroundColor==="auto"||r.backgroundColor==="inherit")&&l&&(r.backgroundColor=l),(r.borderColor==="auto"||r.borderColor==="inherit")&&l&&(r.borderColor=l)}}function eF(r,e){var t=e&&e.getModel("textStyle");return Kl([r.fontStyle||t&&t.getShallow("fontStyle")||"",r.fontWeight||t&&t.getShallow("fontWeight")||"",(r.fontSize||t&&t.getShallow("fontSize")||12)+"px",r.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var ay=wr();function zee(r,e,t,n){if(r){var a=ay(r);a.prevValue=a.value,a.value=t;var i=e.normal;a.valueAnimation=i.get("valueAnimation"),a.valueAnimation&&(a.precision=i.get("precision"),a.defaultInterpolatedText=n,a.statesModels=e)}}function Gee(r,e,t,n,a){var i=ay(r);if(!i.valueAnimation||i.prevValue===i.value)return;var s=i.defaultInterpolatedText,o=$t(i.interpolatedValue,i.prevValue),l=i.value;function c(u){var h=see(t,i.precision,o,l,u);i.interpolatedValue=u===1?null:h;var d=nR({labelDataIndex:e,labelFetcher:a,defaultText:s?s(h):h+""},i.statesModels,h);Qee(r,d)}r.percent=0,(i.prevValue==null?jn:Er)(r,{percent:1},n,e,null,c)}var Kxe=["textStyle","color"],BE=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],NE=new Cr,Wxe=function(){function r(){}return r.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Kxe):null)},r.prototype.getFont=function(){return eF({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},r.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<BE.length;n++)t[BE[n]]=this.getShallow(BE[n]);return NE.useStyle(t),NE.update(),NE.getBoundingRect()},r}(),Vee=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],qxe=yp(Vee),Yxe=function(){function r(){}return r.prototype.getLineStyle=function(e){return qxe(this,e)},r}(),$ee=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Xxe=yp($ee),Zxe=function(){function r(){}return r.prototype.getItemStyle=function(e,t){return Xxe(this,e,t)},r}(),Qr=function(){function r(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}return r.prototype.init=function(e,t,n){},r.prototype.mergeOption=function(e,t){qt(this.option,e,!0)},r.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},r.prototype.getShallow=function(e,t){var n=this.option,a=n==null?n:n[e];if(a==null&&!t){var i=this.parentModel;i&&(a=i.getShallow(e))}return a},r.prototype.getModel=function(e,t){var n=e!=null,a=n?this.parsePath(e):null,i=n?this._doGet(a):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(a)),new r(i,t,this.ecModel)},r.prototype.isEmpty=function(){return this.option==null},r.prototype.restoreData=function(){},r.prototype.clone=function(){var e=this.constructor;return new e(Ft(this.option))},r.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},r.prototype.resolveParentPath=function(e){return e},r.prototype.isAnimationEnabled=function(){if(!fr.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},r.prototype._doGet=function(e,t){var n=this.option;if(!e)return n;for(var a=0;a<e.length&&!(e[a]&&(n=n&&typeof n=="object"?n[e[a]]:null,n==null));a++);return n==null&&t&&(n=t._doGet(this.resolveParentPath(e),t.parentModel)),n},r}();Qk(Qr);oye(Qr);Ia(Qr,Yxe);Ia(Qr,Zxe);Ia(Qr,dye);Ia(Qr,Wxe);var Jxe=Math.round(Math.random()*10);function iy(r){return[r||"",Jxe++].join("_")}function e1e(r){var e={};r.registerSubTypeDefaulter=function(t,n){var a=zc(t);e[a.main]=n},r.determineSubType=function(t,n){var a=n.type;if(!a){var i=zc(t).main;r.hasSubTypes(t)&&e[i]&&(a=e[i](n))}return a}}function t1e(r,e){r.topologicalTravel=function(i,s,o,l){if(!i.length)return;var c=t(s),u=c.graph,h=c.noEntryList,d={};for(X(i,function(y){d[y]=!0});h.length;){var A=h.pop(),g=u[A],p=!!d[A];p&&(o.call(l,A,g.originalDeps.slice()),delete d[A]),X(g.successor,p?m:v)}X(d,function(){var y="";throw new Error(y)});function v(y){u[y].entryCount--,u[y].entryCount===0&&h.push(y)}function m(y){d[y]=!0,v(y)}};function t(i){var s={},o=[];return X(i,function(l){var c=n(s,l),u=c.originalDeps=e(l),h=a(u,i);c.entryCount=h.length,c.entryCount===0&&o.push(l),X(h,function(d){rr(c.predecessor,d)<0&&c.predecessor.push(d);var A=n(s,d);rr(A.successor,d)<0&&A.successor.push(l)})}),{graph:s,noEntryList:o}}function n(i,s){return i[s]||(i[s]={predecessor:[],successor:[]}),i[s]}function a(i,s){var o=[];return X(i,function(l){rr(s,l)>=0&&o.push(l)}),o}}function af(r,e){return qt(qt({},r,!0),e,!0)}const r1e={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},n1e={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var _C="ZH",tF="EN",Qv=tF,n5={},rF={},Kee=fr.domSupported?function(){var r=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Qv).toUpperCase();return r.indexOf(_C)>-1?_C:Qv}():Qv;function Wee(r,e){r=r.toUpperCase(),rF[r]=new Qr(e),n5[r]=e}function a1e(r){if(dt(r)){var e=n5[r.toUpperCase()]||{};return r===_C||r===tF?Ft(e):qt(Ft(e),Ft(n5[Qv]),!1)}else return qt(Ft(r),Ft(n5[Qv]),!1)}function aR(r){return rF[r]}function i1e(){return rF[Qv]}Wee(tF,r1e);Wee(_C,n1e);var nF=1e3,aF=nF*60,D1=aF*60,nl=D1*24,wH=nl*365,Kx={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},dS="{yyyy}-{MM}-{dd}",SH={year:"{yyyy}",month:"{yyyy}-{MM}",day:dS,hour:dS+" "+Kx.hour,minute:dS+" "+Kx.minute,second:dS+" "+Kx.second,millisecond:Kx.none},TE=["year","month","day","hour","minute","second","millisecond"],qee=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function xd(r,e){return r+="","0000".substr(0,e-r.length)+r}function zv(r){switch(r){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return r}}function s1e(r){return r===zv(r)}function o1e(r){switch(r){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function FN(r,e,t,n){var a=su(r),i=a[iF(t)](),s=a[Gv(t)]()+1,o=Math.floor((s-1)/3)+1,l=a[jN(t)](),c=a["get"+(t?"UTC":"")+"Day"](),u=a[Bb(t)](),h=(u-1)%12+1,d=a[ON(t)](),A=a[UN(t)](),g=a[HN(t)](),p=u>=12?"pm":"am",v=p.toUpperCase(),m=n instanceof Qr?n:aR(n||Kee)||i1e(),y=m.getModel("time"),x=y.get("month"),b=y.get("monthAbbr"),S=y.get("dayOfWeek"),_=y.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,p+"").replace(/{A}/g,v+"").replace(/{yyyy}/g,i+"").replace(/{yy}/g,xd(i%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,x[s-1]).replace(/{MMM}/g,b[s-1]).replace(/{MM}/g,xd(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,xd(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,S[c]).replace(/{ee}/g,_[c]).replace(/{e}/g,c+"").replace(/{HH}/g,xd(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,xd(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,xd(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,xd(A,2)).replace(/{s}/g,A+"").replace(/{SSS}/g,xd(g,3)).replace(/{S}/g,g+"")}function l1e(r,e,t,n,a){var i=null;if(dt(t))i=t;else if(It(t))i=t(r.value,e,{level:r.level});else{var s=He({},Kx);if(r.level>0)for(var o=0;o<TE.length;++o)s[TE[o]]="{primary|"+s[TE[o]]+"}";var l=t?t.inherit===!1?t:Lt(t,s):s,c=Yee(r.value,a);if(l[c])i=l[c];else if(l.inherit){for(var u=qee.indexOf(c),o=u-1;o>=0;--o)if(l[c]){i=l[c];break}i=i||s.none}if($e(i)){var h=r.level==null?0:r.level>=0?r.level:i.length+r.level;h=Math.min(h,i.length-1),i=i[h]}}return FN(new Date(r.value),i,a,n)}function Yee(r,e){var t=su(r),n=t[Gv(e)]()+1,a=t[jN(e)](),i=t[Bb(e)](),s=t[ON(e)](),o=t[UN(e)](),l=t[HN(e)](),c=l===0,u=c&&o===0,h=u&&s===0,d=h&&i===0,A=d&&a===1,g=A&&n===1;return g?"year":A?"month":d?"day":h?"hour":u?"minute":c?"second":"millisecond"}function _H(r,e,t){var n=Br(r)?su(r):r;switch(e=e||Yee(r,t),e){case"year":return n[iF(t)]();case"half-year":return n[Gv(t)]()>=6?1:0;case"quarter":return Math.floor((n[Gv(t)]()+1)/4);case"month":return n[Gv(t)]();case"day":return n[jN(t)]();case"half-day":return n[Bb(t)]()/24;case"hour":return n[Bb(t)]();case"minute":return n[ON(t)]();case"second":return n[UN(t)]();case"millisecond":return n[HN(t)]()}}function iF(r){return r?"getUTCFullYear":"getFullYear"}function Gv(r){return r?"getUTCMonth":"getMonth"}function jN(r){return r?"getUTCDate":"getDate"}function Bb(r){return r?"getUTCHours":"getHours"}function ON(r){return r?"getUTCMinutes":"getMinutes"}function UN(r){return r?"getUTCSeconds":"getSeconds"}function HN(r){return r?"getUTCMilliseconds":"getMilliseconds"}function c1e(r){return r?"setUTCFullYear":"setFullYear"}function Xee(r){return r?"setUTCMonth":"setMonth"}function Zee(r){return r?"setUTCDate":"setDate"}function Jee(r){return r?"setUTCHours":"setHours"}function ete(r){return r?"setUTCMinutes":"setMinutes"}function tte(r){return r?"setUTCSeconds":"setSeconds"}function rte(r){return r?"setUTCMilliseconds":"setMilliseconds"}function nte(r){if(!ZJ(r))return dt(r)?r:"-";var e=(r+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function ate(r,e){return r=(r||"").toLowerCase().replace(/-(.)/g,function(t,n){return n.toUpperCase()}),e&&r&&(r=r.charAt(0).toUpperCase()+r.slice(1)),r}var sy=Mk;function iR(r,e,t){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function a(u){return u&&Kl(u)?u:"-"}function i(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var s=e==="time",o=r instanceof Date;if(s||o){var l=s?su(r):r;if(isNaN(+l)){if(o)return"-"}else return FN(l,n,t)}if(e==="ordinal")return w3(r)?a(r):Br(r)&&i(r)?r+"":"-";var c=_h(r);return i(c)?nte(c):w3(r)?a(r):typeof r=="boolean"?r+"":"-"}var CH=["a","b","c","d","e","f","g"],IE=function(r,e){return"{"+r+(e??"")+"}"};function ite(r,e,t){$e(e)||(e=[e]);var n=e.length;if(!n)return"";for(var a=e[0].$vars||[],i=0;i<a.length;i++){var s=CH[i];r=r.replace(IE(s),IE(s,0))}for(var o=0;o<n;o++)for(var l=0;l<a.length;l++){var c=e[o][a[l]];r=r.replace(IE(CH[l],o),t?cs(c):c)}return r}function u1e(r,e,t){return X(e,function(n,a){r=r.replace("{"+a+"}",n)}),r}function h1e(r,e){var t=dt(r)?{color:r,extraCssText:e}:r||{},n=t.color,a=t.type;e=t.extraCssText;var i=t.renderMode||"html";if(!n)return"";if(i==="html")return a==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+cs(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+cs(n)+";"+(e||"")+'"></span>';var s=t.markerId||"markerX";return{renderMode:i,content:"{"+s+"|}  ",style:a==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function bp(r,e){return e=e||"transparent",dt(r)?r:Pt(r)&&r.colorStops&&(r.colorStops[0]||{}).color||e}function CC(r,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=r}else window.open(r,e)}var a5=X,ste=["left","right","top","bottom","width","height"],Eg=[["width","left","right"],["height","top","bottom"]];function sF(r,e,t,n,a){var i=0,s=0;n==null&&(n=1/0),a==null&&(a=1/0);var o=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),h=e.childAt(c+1),d=h&&h.getBoundingRect(),A,g;if(r==="horizontal"){var p=u.width+(d?-d.x+u.x:0);A=i+p,A>n||l.newline?(i=0,A=p,s+=o+t,o=u.height):o=Math.max(o,u.height)}else{var v=u.height+(d?-d.y+u.y:0);g=s+v,g>a||l.newline?(i+=o+t,s=0,g=v,o=u.width):o=Math.max(o,u.width)}l.newline||(l.x=i,l.y=s,l.markRedraw(),r==="horizontal"?i=A+t:s=g+t)})}var rp=sF;Wt(sF,"vertical");Wt(sF,"horizontal");function d1e(r,e,t){var n=e.width,a=e.height,i=ot(r.left,n),s=ot(r.top,a),o=ot(r.right,n),l=ot(r.bottom,a);return(isNaN(i)||isNaN(parseFloat(r.left)))&&(i=0),(isNaN(o)||isNaN(parseFloat(r.right)))&&(o=n),(isNaN(s)||isNaN(parseFloat(r.top)))&&(s=0),(isNaN(l)||isNaN(parseFloat(r.bottom)))&&(l=a),t=sy(t||0),{width:Math.max(o-i-t[1]-t[3],0),height:Math.max(l-s-t[0]-t[2],0)}}function Ua(r,e,t){t=sy(t||0);var n=e.width,a=e.height,i=ot(r.left,n),s=ot(r.top,a),o=ot(r.right,n),l=ot(r.bottom,a),c=ot(r.width,n),u=ot(r.height,a),h=t[2]+t[0],d=t[1]+t[3],A=r.aspect;switch(isNaN(c)&&(c=n-o-d-i),isNaN(u)&&(u=a-l-h-s),A!=null&&(isNaN(c)&&isNaN(u)&&(A>n/a?c=n*.8:u=a*.8),isNaN(c)&&(c=A*u),isNaN(u)&&(u=c/A)),isNaN(i)&&(i=n-o-c-d),isNaN(s)&&(s=a-l-u-h),r.left||r.right){case"center":i=n/2-c/2-t[3];break;case"right":i=n-c-d;break}switch(r.top||r.bottom){case"middle":case"center":s=a/2-u/2-t[0];break;case"bottom":s=a-u-h;break}i=i||0,s=s||0,isNaN(c)&&(c=n-d-i-(o||0)),isNaN(u)&&(u=a-h-s-(l||0));var g=new Zt(i+t[3],s+t[0],c,u);return g.margin=t,g}function QN(r,e,t,n,a,i){var s=!a||!a.hv||a.hv[0],o=!a||!a.hv||a.hv[1],l=a&&a.boundingMode||"all";if(i=i||r,i.x=r.x,i.y=r.y,!s&&!o)return!1;var c;if(l==="raw")c=r.type==="group"?new Zt(0,0,+e.width||0,+e.height||0):r.getBoundingRect();else if(c=r.getBoundingRect(),r.needLocalTransform()){var u=r.getLocalTransform();c=c.clone(),c.applyTransform(u)}var h=Ua(Lt({width:c.width,height:c.height},e),t,n),d=s?h.x-c.x:0,A=o?h.y-c.y:0;return l==="raw"?(i.x=d,i.y=A):(i.x+=d,i.y+=A),i===r&&r.markRedraw(),!0}function A1e(r,e){return r[Eg[e][0]]!=null||r[Eg[e][1]]!=null&&r[Eg[e][2]]!=null}function Nb(r){var e=r.layoutMode||r.constructor.layoutMode;return Pt(e)?e:e?{type:e}:null}function zA(r,e,t){var n=t&&t.ignoreSize;!$e(n)&&(n=[n,n]);var a=s(Eg[0],0),i=s(Eg[1],1);c(Eg[0],r,a),c(Eg[1],r,i);function s(u,h){var d={},A=0,g={},p=0,v=2;if(a5(u,function(x){g[x]=r[x]}),a5(u,function(x){o(e,x)&&(d[x]=g[x]=e[x]),l(d,x)&&A++,l(g,x)&&p++}),n[h])return l(e,u[1])?g[u[2]]=null:l(e,u[2])&&(g[u[1]]=null),g;if(p===v||!A)return g;if(A>=v)return d;for(var m=0;m<u.length;m++){var y=u[m];if(!o(d,y)&&o(r,y)){d[y]=r[y];break}}return d}function o(u,h){return u.hasOwnProperty(h)}function l(u,h){return u[h]!=null&&u[h]!=="auto"}function c(u,h,d){a5(u,function(A){h[A]=d[A]})}}function oy(r){return ote({},r)}function ote(r,e){return e&&r&&a5(ste,function(t){e.hasOwnProperty(t)&&(r[t]=e[t])}),r}var f1e=wr(),gr=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this,t,n,a)||this;return i.uid=iy("ec_cpt_model"),i}return e.prototype.init=function(t,n,a){this.mergeDefaultAndTheme(t,a)},e.prototype.mergeDefaultAndTheme=function(t,n){var a=Nb(this),i=a?oy(t):{},s=n.getTheme();qt(t,s.get(this.mainType)),qt(t,this.getDefaultOption()),a&&zA(t,i,a)},e.prototype.mergeOption=function(t,n){qt(this.option,t,!0);var a=Nb(this);a&&zA(this.option,t,a)},e.prototype.optionUpdated=function(t,n){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!aye(t))return t.defaultOption;var n=f1e(this);if(!n.defaultOption){for(var a=[],i=t;i;){var s=i.prototype.defaultOption;s&&a.push(s),i=i.superClass}for(var o={},l=a.length-1;l>=0;l--)o=qt(o,a[l],!0);n.defaultOption=o}return n.defaultOption},e.prototype.getReferringComponents=function(t,n){var a=t+"Index",i=t+"Id";return Cw(this.ecModel,t,{index:this.get(a,!0),id:this.get(i,!0)},n)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(Qr);lee(gr,Qr);BN(gr);e1e(gr);t1e(gr,g1e);function g1e(r){var e=[];return X(gr.getClassesByMainType(r),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=We(e,function(t){return zc(t).main}),r!=="dataset"&&rr(e,"dataset")<=0&&e.unshift("dataset"),e}var lte="";typeof navigator<"u"&&(lte=navigator.platform||"");var Nm="rgba(0, 0, 0, 0.2)";const p1e={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Nm,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Nm,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Nm,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Nm,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Nm,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Nm,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:lte.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var cte=bt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),yl="original",Wi="arrayRows",xl="objectRows",hu="keyedColumns",TA="typedArray",ute="unknown",Jc="column",ly="row",yi={Must:1,Might:2,Not:3},hte=wr();function m1e(r){hte(r).datasetMap=bt()}function dte(r,e,t){var n={},a=lF(e);if(!a||!r)return n;var i=[],s=[],o=e.ecModel,l=hte(o).datasetMap,c=a.uid+"_"+t.seriesLayoutBy,u,h;r=r.slice(),X(r,function(p,v){var m=Pt(p)?p:r[v]={name:p};m.type==="ordinal"&&u==null&&(u=v,h=g(m)),n[m.name]=[]});var d=l.get(c)||l.set(c,{categoryWayDim:h,valueWayDim:0});X(r,function(p,v){var m=p.name,y=g(p);if(u==null){var x=d.valueWayDim;A(n[m],x,y),A(s,x,y),d.valueWayDim+=y}else if(u===v)A(n[m],0,y),A(i,0,y);else{var x=d.categoryWayDim;A(n[m],x,y),A(s,x,y),d.categoryWayDim+=y}});function A(p,v,m){for(var y=0;y<m;y++)p.push(v+y)}function g(p){var v=p.dimsDef;return v?v.length:1}return i.length&&(n.itemName=i),s.length&&(n.seriesName=s),n}function oF(r,e,t){var n={},a=lF(r);if(!a)return n;var i=e.sourceFormat,s=e.dimensionsDefine,o;(i===xl||i===hu)&&X(s,function(u,h){(Pt(u)?u.name:u)==="name"&&(o=h)});var l=function(){for(var u={},h={},d=[],A=0,g=Math.min(5,t);A<g;A++){var p=fte(e.data,i,e.seriesLayoutBy,s,e.startIndex,A);d.push(p);var v=p===yi.Not;if(v&&u.v==null&&A!==o&&(u.v=A),(u.n==null||u.n===u.v||!v&&d[u.n]===yi.Not)&&(u.n=A),m(u)&&d[u.n]!==yi.Not)return u;v||(p===yi.Might&&h.v==null&&A!==o&&(h.v=A),(h.n==null||h.n===h.v)&&(h.n=A))}function m(y){return y.v!=null&&y.n!=null}return m(u)?u:m(h)?h:null}();if(l){n.value=[l.v];var c=o??l.n;n.itemName=[c],n.seriesName=[c]}return n}function lF(r){var e=r.get("data",!0);if(!e)return Cw(r.ecModel,"dataset",{index:r.get("datasetIndex",!0),id:r.get("datasetId",!0)},Na).models[0]}function v1e(r){return!r.get("transform",!0)&&!r.get("fromTransformResult",!0)?[]:Cw(r.ecModel,"dataset",{index:r.get("fromDatasetIndex",!0),id:r.get("fromDatasetId",!0)},Na).models}function Ate(r,e){return fte(r.data,r.sourceFormat,r.seriesLayoutBy,r.dimensionsDefine,r.startIndex,e)}function fte(r,e,t,n,a,i){var s,o=5;if(zs(r))return yi.Not;var l,c;if(n){var u=n[i];Pt(u)?(l=u.name,c=u.type):dt(u)&&(l=u)}if(c!=null)return c==="ordinal"?yi.Must:yi.Not;if(e===Wi){var h=r;if(t===ly){for(var d=h[i],A=0;A<(d||[]).length&&A<o;A++)if((s=b(d[a+A]))!=null)return s}else for(var A=0;A<h.length&&A<o;A++){var g=h[a+A];if(g&&(s=b(g[i]))!=null)return s}}else if(e===xl){var p=r;if(!l)return yi.Not;for(var A=0;A<p.length&&A<o;A++){var v=p[A];if(v&&(s=b(v[l]))!=null)return s}}else if(e===hu){var m=r;if(!l)return yi.Not;var d=m[l];if(!d||zs(d))return yi.Not;for(var A=0;A<d.length&&A<o;A++)if((s=b(d[A]))!=null)return s}else if(e===yl)for(var y=r,A=0;A<y.length&&A<o;A++){var v=y[A],x=ty(v);if(!$e(x))return yi.Not;if((s=b(x[i]))!=null)return s}function b(S){var _=dt(S);if(S!=null&&Number.isFinite(Number(S))&&S!=="")return _?yi.Might:yi.Not;if(_&&S!=="-")return yi.Must}return yi.Not}var sR=bt();function y1e(r,e){gs(sR.get(r)==null&&e),sR.set(r,e)}function x1e(r,e,t){var n=sR.get(e);if(!n)return t;var a=n(r);return a?t.concat(a):t}var BH=wr(),b1e=wr(),cF=function(){function r(){}return r.prototype.getColorFromPalette=function(e,t,n){var a=Xr(this.get("color",!0)),i=this.get("colorLayer",!0);return gte(this,BH,a,i,e,t,n)},r.prototype.clearColorPalette=function(){S1e(this,BH)},r}();function oR(r,e,t,n){var a=Xr(r.get(["aria","decal","decals"]));return gte(r,b1e,a,null,e,t,n)}function w1e(r,e){for(var t=r.length,n=0;n<t;n++)if(r[n].length>e)return r[n];return r[t-1]}function gte(r,e,t,n,a,i,s){i=i||r;var o=e(i),l=o.paletteIdx||0,c=o.paletteNameMap=o.paletteNameMap||{};if(c.hasOwnProperty(a))return c[a];var u=s==null||!n?t:w1e(n,s);if(u=u||t,!(!u||!u.length)){var h=u[l];return a&&(c[a]=h),o.paletteIdx=(l+1)%u.length,h}}function S1e(r,e){e(r).paletteIdx=0,e(r).paletteNameMap={}}var AS,ex,NH,TH="\0_ec_inner",_1e=1,uF=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(t,n,a,i,s,o){i=i||{},this.option=null,this._theme=new Qr(i),this._locale=new Qr(s),this._optionManager=o},e.prototype.setOption=function(t,n,a){var i=DH(n);this._optionManager.setOption(t,a,i),this._resetOption(null,i)},e.prototype.resetOption=function(t,n){return this._resetOption(t,DH(n))},e.prototype._resetOption=function(t,n){var a=!1,i=this._optionManager;if(!t||t==="recreate"){var s=i.mountOption(t==="recreate");!this.option||t==="recreate"?NH(this,s):(this.restoreData(),this._mergeOption(s,n)),a=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var o=i.getTimelineOption(this);o&&(a=!0,this._mergeOption(o,n))}if(!t||t==="recreate"||t==="media"){var l=i.getMediaOption(this);l.length&&X(l,function(c){a=!0,this._mergeOption(c,n)},this)}return a},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,n){var a=this.option,i=this._componentsMap,s=this._componentsCount,o=[],l=bt(),c=n&&n.replaceMergeMainTypeMap;m1e(this),X(t,function(h,d){h!=null&&(gr.hasClass(d)?d&&(o.push(d),l.set(d,!0)):a[d]=a[d]==null?Ft(h):qt(a[d],h,!0))}),c&&c.each(function(h,d){gr.hasClass(d)&&!l.get(d)&&(o.push(d),l.set(d,!0))}),gr.topologicalTravel(o,gr.getAllClassMainTypes(),u,this);function u(h){var d=x1e(this,h,Xr(t[h])),A=i.get(h),g=A?c&&c.get(h)?"replaceMerge":"normalMerge":"replaceAll",p=nee(A,d,g);q0e(p,h,gr),a[h]=null,i.set(h,null),s.set(h,0);var v=[],m=[],y=0,x;X(p,function(b,S){var _=b.existing,C=b.newOption;if(!C)_&&(_.mergeOption({},this),_.optionUpdated({},!1));else{var w=h==="series",B=gr.getClass(h,b.keyInfo.subType,!w);if(!B)return;if(h==="tooltip"){if(x)return;x=!0}if(_&&_.constructor===B)_.name=b.keyInfo.name,_.mergeOption(C,this),_.optionUpdated(C,!1);else{var D=He({componentIndex:S},b.keyInfo);_=new B(C,this,this,D),He(_,D),b.brandNew&&(_.__requireNewView=!0),_.init(C,this,this),_.optionUpdated(null,!0)}}_?(v.push(_.option),m.push(_),y++):(v.push(void 0),m.push(void 0))},this),a[h]=v,i.set(h,m),s.set(h,y),h==="series"&&AS(this)}this._seriesIndices||AS(this)},e.prototype.getOption=function(){var t=Ft(this.option);return X(t,function(n,a){if(gr.hasClass(a)){for(var i=Xr(n),s=i.length,o=!1,l=s-1;l>=0;l--)i[l]&&!wb(i[l])?o=!0:(i[l]=null,!o&&s--);i.length=s,t[a]=i}}),delete t[TH],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,n){var a=this._componentsMap.get(t);if(a){var i=a[n||0];if(i)return i;if(n==null){for(var s=0;s<a.length;s++)if(a[s])return a[s]}}},e.prototype.queryComponents=function(t){var n=t.mainType;if(!n)return[];var a=t.index,i=t.id,s=t.name,o=this._componentsMap.get(n);if(!o||!o.length)return[];var l;return a!=null?(l=[],X(Xr(a),function(c){o[c]&&l.push(o[c])})):i!=null?l=IH("id",i,o):s!=null?l=IH("name",s,o):l=Ur(o,function(c){return!!c}),EH(l,t)},e.prototype.findComponents=function(t){var n=t.query,a=t.mainType,i=o(n),s=i?this.queryComponents(i):Ur(this._componentsMap.get(a),function(c){return!!c});return l(EH(s,t));function o(c){var u=a+"Index",h=a+"Id",d=a+"Name";return c&&(c[u]!=null||c[h]!=null||c[d]!=null)?{mainType:a,index:c[u],id:c[h],name:c[d]}:null}function l(c){return t.filter?Ur(c,t.filter):c}},e.prototype.eachComponent=function(t,n,a){var i=this._componentsMap;if(It(t)){var s=n,o=t;i.each(function(h,d){for(var A=0;h&&A<h.length;A++){var g=h[A];g&&o.call(s,d,g,g.componentIndex)}})}else for(var l=dt(t)?i.get(t):Pt(t)?this.findComponents(t):null,c=0;l&&c<l.length;c++){var u=l[c];u&&n.call(a,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var n=Fa(t,null);return Ur(this._componentsMap.get("series"),function(a){return!!a&&n!=null&&a.name===n})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Ur(this._componentsMap.get("series"),function(n){return!!n&&n.subType===t})},e.prototype.getSeries=function(){return Ur(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,n){ex(this),X(this._seriesIndices,function(a){var i=this._componentsMap.get("series")[a];t.call(n,i,a)},this)},e.prototype.eachRawSeries=function(t,n){X(this._componentsMap.get("series"),function(a){a&&t.call(n,a,a.componentIndex)})},e.prototype.eachSeriesByType=function(t,n,a){ex(this),X(this._seriesIndices,function(i){var s=this._componentsMap.get("series")[i];s.subType===t&&n.call(a,s,i)},this)},e.prototype.eachRawSeriesByType=function(t,n,a){return X(this.getSeriesByType(t),n,a)},e.prototype.isSeriesFiltered=function(t){return ex(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,n){ex(this);var a=[];X(this._seriesIndices,function(i){var s=this._componentsMap.get("series")[i];t.call(n,s,i)&&a.push(i)},this),this._seriesIndices=a,this._seriesIndicesMap=bt(a)},e.prototype.restoreData=function(t){AS(this);var n=this._componentsMap,a=[];n.each(function(i,s){gr.hasClass(s)&&a.push(s)}),gr.topologicalTravel(a,gr.getAllClassMainTypes(),function(i){X(n.get(i),function(s){s&&(i!=="series"||!C1e(s,t))&&s.restoreData()})})},e.internalField=function(){AS=function(t){var n=t._seriesIndices=[];X(t._componentsMap.get("series"),function(a){a&&n.push(a.componentIndex)}),t._seriesIndicesMap=bt(n)},ex=function(t){},NH=function(t,n){t.option={},t.option[TH]=_1e,t._componentsMap=bt({series:[]}),t._componentsCount=bt();var a=n.aria;Pt(a)&&a.enabled==null&&(a.enabled=!0),B1e(n,t._theme.option),qt(n,p1e,!1),t._mergeOption(n,null)}}(),e}(Qr);function C1e(r,e){if(e){var t=e.seriesIndex,n=e.seriesId,a=e.seriesName;return t!=null&&r.componentIndex!==t||n!=null&&r.id!==n||a!=null&&r.name!==a}}function B1e(r,e){var t=r.color&&!r.colorLayer;X(e,function(n,a){a==="colorLayer"&&t||gr.hasClass(a)||(typeof n=="object"?r[a]=r[a]?qt(r[a],n,!1):Ft(n):r[a]==null&&(r[a]=n))})}function IH(r,e,t){if($e(e)){var n=bt();return X(e,function(i){if(i!=null){var s=Fa(i,null);s!=null&&n.set(i,!0)}}),Ur(t,function(i){return i&&n.get(i[r])})}else{var a=Fa(e,null);return Ur(t,function(i){return i&&a!=null&&i[r]===a})}}function EH(r,e){return e.hasOwnProperty("subType")?Ur(r,function(t){return t&&t.subType===e.subType}):r}function DH(r){var e=bt();return r&&X(Xr(r.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}Ia(uF,cF);var N1e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],pte=function(){function r(e){X(N1e,function(t){this[t]=ft(e[t],e)},this)}return r}(),EE={},Mw=function(){function r(){this._coordinateSystems=[]}return r.prototype.create=function(e,t){var n=[];X(EE,function(a,i){var s=a.create(e,t);n=n.concat(s||[])}),this._coordinateSystems=n},r.prototype.update=function(e,t){X(this._coordinateSystems,function(n){n.update&&n.update(e,t)})},r.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},r.register=function(e,t){EE[e]=t},r.get=function(e){return EE[e]},r}(),T1e=/^(min|max)?(.+)$/,I1e=function(){function r(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return r.prototype.setOption=function(e,t,n){e&&(X(Xr(e.series),function(s){s&&s.data&&zs(s.data)&&cC(s.data)}),X(Xr(e.dataset),function(s){s&&s.source&&zs(s.source)&&cC(s.source)})),e=Ft(e);var a=this._optionBackup,i=E1e(e,t,!a);this._newBaseOption=i.baseOption,a?(i.timelineOptions.length&&(a.timelineOptions=i.timelineOptions),i.mediaList.length&&(a.mediaList=i.mediaList),i.mediaDefault&&(a.mediaDefault=i.mediaDefault)):this._optionBackup=i},r.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Ft(e?t.baseOption:this._newBaseOption)},r.prototype.getTimelineOption=function(e){var t,n=this._timelineOptions;if(n.length){var a=e.getComponent("timeline");a&&(t=Ft(n[a.getCurrentIndex()]))}return t},r.prototype.getMediaOption=function(e){var t=this._api.getWidth(),n=this._api.getHeight(),a=this._mediaList,i=this._mediaDefault,s=[],o=[];if(!a.length&&!i)return o;for(var l=0,c=a.length;l<c;l++)D1e(a[l].query,t,n)&&s.push(l);return!s.length&&i&&(s=[-1]),s.length&&!R1e(s,this._currentMediaIndices)&&(o=We(s,function(u){return Ft(u===-1?i.option:a[u].option)})),this._currentMediaIndices=s,o},r}();function E1e(r,e,t){var n=[],a,i,s=r.baseOption,o=r.timeline,l=r.options,c=r.media,u=!!r.media,h=!!(l||o||s&&s.timeline);s?(i=s,i.timeline||(i.timeline=o)):((h||u)&&(r.options=r.media=null),i=r),u&&$e(c)&&X(c,function(A){A&&A.option&&(A.query?n.push(A):a||(a=A))}),d(i),X(l,function(A){return d(A)}),X(n,function(A){return d(A.option)});function d(A){X(e,function(g){g(A,t)})}return{baseOption:i,timelineOptions:l||[],mediaDefault:a,mediaList:n}}function D1e(r,e,t){var n={width:e,height:t,aspectratio:e/t},a=!0;return X(r,function(i,s){var o=s.match(T1e);if(!(!o||!o[1]||!o[2])){var l=o[1],c=o[2].toLowerCase();M1e(n[c],i,l)||(a=!1)}}),a}function M1e(r,e,t){return t==="min"?r>=e:t==="max"?r<=e:r===e}function R1e(r,e){return r.join(",")===e.join(",")}var El=X,Tb=Pt,MH=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function DE(r){var e=r&&r.itemStyle;if(e)for(var t=0,n=MH.length;t<n;t++){var a=MH[t],i=e.normal,s=e.emphasis;i&&i[a]&&(r[a]=r[a]||{},r[a].normal?qt(r[a].normal,i[a]):r[a].normal=i[a],i[a]=null),s&&s[a]&&(r[a]=r[a]||{},r[a].emphasis?qt(r[a].emphasis,s[a]):r[a].emphasis=s[a],s[a]=null)}}function Hi(r,e,t){if(r&&r[e]&&(r[e].normal||r[e].emphasis)){var n=r[e].normal,a=r[e].emphasis;n&&(t?(r[e].normal=r[e].emphasis=null,Lt(r[e],n)):r[e]=n),a&&(r.emphasis=r.emphasis||{},r.emphasis[e]=a,a.focus&&(r.emphasis.focus=a.focus),a.blurScope&&(r.emphasis.blurScope=a.blurScope))}}function Wx(r){Hi(r,"itemStyle"),Hi(r,"lineStyle"),Hi(r,"areaStyle"),Hi(r,"label"),Hi(r,"labelLine"),Hi(r,"upperLabel"),Hi(r,"edgeLabel")}function ba(r,e){var t=Tb(r)&&r[e],n=Tb(t)&&t.textStyle;if(n)for(var a=0,i=j8.length;a<i;a++){var s=j8[a];n.hasOwnProperty(s)&&(t[s]=n[s])}}function zo(r){r&&(Wx(r),ba(r,"label"),r.emphasis&&ba(r.emphasis,"label"))}function L1e(r){if(Tb(r)){DE(r),Wx(r),ba(r,"label"),ba(r,"upperLabel"),ba(r,"edgeLabel"),r.emphasis&&(ba(r.emphasis,"label"),ba(r.emphasis,"upperLabel"),ba(r.emphasis,"edgeLabel"));var e=r.markPoint;e&&(DE(e),zo(e));var t=r.markLine;t&&(DE(t),zo(t));var n=r.markArea;n&&zo(n);var a=r.data;if(r.type==="graph"){a=a||r.nodes;var i=r.links||r.edges;if(i&&!zs(i))for(var s=0;s<i.length;s++)zo(i[s]);X(r.categories,function(c){Wx(c)})}if(a&&!zs(a))for(var s=0;s<a.length;s++)zo(a[s]);if(e=r.markPoint,e&&e.data)for(var o=e.data,s=0;s<o.length;s++)zo(o[s]);if(t=r.markLine,t&&t.data)for(var l=t.data,s=0;s<l.length;s++)$e(l[s])?(zo(l[s][0]),zo(l[s][1])):zo(l[s]);r.type==="gauge"?(ba(r,"axisLabel"),ba(r,"title"),ba(r,"detail")):r.type==="treemap"?(Hi(r.breadcrumb,"itemStyle"),X(r.levels,function(c){Wx(c)})):r.type==="tree"&&Wx(r.leaves)}}function Ou(r){return $e(r)?r:r?[r]:[]}function RH(r){return($e(r)?r[0]:r)||{}}function P1e(r,e){El(Ou(r.series),function(n){Tb(n)&&L1e(n)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),El(t,function(n){El(Ou(r[n]),function(a){a&&(ba(a,"axisLabel"),ba(a.axisPointer,"label"))})}),El(Ou(r.parallel),function(n){var a=n&&n.parallelAxisDefault;ba(a,"axisLabel"),ba(a&&a.axisPointer,"label")}),El(Ou(r.calendar),function(n){Hi(n,"itemStyle"),ba(n,"dayLabel"),ba(n,"monthLabel"),ba(n,"yearLabel")}),El(Ou(r.radar),function(n){ba(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),El(Ou(r.geo),function(n){Tb(n)&&(zo(n),El(Ou(n.regions),function(a){zo(a)}))}),El(Ou(r.timeline),function(n){zo(n),Hi(n,"label"),Hi(n,"itemStyle"),Hi(n,"controlStyle",!0);var a=n.data;$e(a)&&X(a,function(i){Pt(i)&&(Hi(i,"label"),Hi(i,"itemStyle"))})}),El(Ou(r.toolbox),function(n){Hi(n,"iconStyle"),El(n.feature,function(a){Hi(a,"iconStyle")})}),ba(RH(r.axisPointer),"label"),ba(RH(r.tooltip).axisPointer,"label")}function k1e(r,e){for(var t=e.split(","),n=r,a=0;a<t.length&&(n=n&&n[t[a]],n!=null);a++);return n}function F1e(r,e,t,n){for(var a=e.split(","),i=r,s,o=0;o<a.length-1;o++)s=a[o],i[s]==null&&(i[s]={}),i=i[s];i[a[o]]==null&&(i[a[o]]=t)}function LH(r){r&&X(j1e,function(e){e[0]in r&&!(e[1]in r)&&(r[e[1]]=r[e[0]])})}var j1e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],O1e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],ME=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function tx(r){var e=r&&r.itemStyle;if(e)for(var t=0;t<ME.length;t++){var n=ME[t][1],a=ME[t][0];e[n]!=null&&(e[a]=e[n])}}function PH(r){r&&r.alignTo==="edge"&&r.margin!=null&&r.edgeDistance==null&&(r.edgeDistance=r.margin)}function kH(r){r&&r.downplay&&!r.blur&&(r.blur=r.downplay)}function U1e(r){r&&r.focusNodeAdjacency!=null&&(r.emphasis=r.emphasis||{},r.emphasis.focus==null&&(r.emphasis.focus="adjacency"))}function mte(r,e){if(r)for(var t=0;t<r.length;t++)e(r[t]),r[t]&&mte(r[t].children,e)}function vte(r,e){P1e(r,e),r.series=Xr(r.series),X(r.series,function(t){if(Pt(t)){var n=t.type;if(n==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(n==="pie"||n==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),PH(t.label);var a=t.data;if(a&&!zs(a))for(var i=0;i<a.length;i++)PH(a[i]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(n==="gauge"){var s=k1e(t,"pointer.color");s!=null&&F1e(t,"itemStyle.color",s)}else if(n==="bar"){tx(t),tx(t.backgroundStyle),tx(t.emphasis);var a=t.data;if(a&&!zs(a))for(var i=0;i<a.length;i++)typeof a[i]=="object"&&(tx(a[i]),tx(a[i]&&a[i].emphasis))}else if(n==="sunburst"){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),kH(t),mte(t.data,kH)}else n==="graph"||n==="sankey"?U1e(t):n==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Lt(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),LH(t)}}),r.dataRange&&(r.visualMap=r.dataRange),X(O1e,function(t){var n=r[t];n&&($e(n)||(n=[n]),X(n,function(a){LH(a)}))})}function H1e(r){var e=bt();r.eachSeries(function(t){var n=t.get("stack");if(n){var a=e.get(n)||e.set(n,[]),i=t.getData(),s={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:t};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;a.length&&i.setCalculationInfo("stackedOnSeries",a[a.length-1].seriesModel),a.push(s)}}),e.each(Q1e)}function Q1e(r){X(r,function(e,t){var n=[],a=[NaN,NaN],i=[e.stackResultDimension,e.stackedOverDimension],s=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";s.modify(i,function(c,u,h){var d=s.get(e.stackedDimension,h);if(isNaN(d))return a;var A,g;o?g=s.getRawIndex(h):A=s.get(e.stackedByDimension,h);for(var p=NaN,v=t-1;v>=0;v--){var m=r[v];if(o||(g=m.data.rawIndexOf(m.stackedByDimension,A)),g>=0){var y=m.data.getByRawIndex(m.stackResultDimension,g);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&d>=0&&y>0||l==="samesign"&&d<=0&&y<0){d=j0e(d,y),p=y;break}}}return n[0]=d,n[1]=p,n})})}var zN=function(){function r(e){this.data=e.data||(e.sourceFormat===hu?{}:[]),this.sourceFormat=e.sourceFormat||ute,this.seriesLayoutBy=e.seriesLayoutBy||Jc,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var n=0;n<t.length;n++){var a=t[n];a.type==null&&Ate(this,n)===yi.Must&&(a.type="ordinal")}}return r}();function hF(r){return r instanceof zN}function lR(r,e,t){t=t||yte(r);var n=e.seriesLayoutBy,a=G1e(r,t,n,e.sourceHeader,e.dimensions),i=new zN({data:r,sourceFormat:t,seriesLayoutBy:n,dimensionsDefine:a.dimensionsDefine,startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount,metaRawOption:Ft(e)});return i}function dF(r){return new zN({data:r,sourceFormat:zs(r)?TA:yl})}function z1e(r){return new zN({data:r.data,sourceFormat:r.sourceFormat,seriesLayoutBy:r.seriesLayoutBy,dimensionsDefine:Ft(r.dimensionsDefine),startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount})}function yte(r){var e=ute;if(zs(r))e=TA;else if($e(r)){r.length===0&&(e=Wi);for(var t=0,n=r.length;t<n;t++){var a=r[t];if(a!=null){if($e(a)||zs(a)){e=Wi;break}else if(Pt(a)){e=xl;break}}}}else if(Pt(r)){for(var i in r)if(vt(r,i)&&Ki(r[i])){e=hu;break}}return e}function G1e(r,e,t,n,a){var i,s;if(!r)return{dimensionsDefine:FH(a),startIndex:s,dimensionsDetectedCount:i};if(e===Wi){var o=r;n==="auto"||n==null?jH(function(c){c!=null&&c!=="-"&&(dt(c)?s==null&&(s=1):s=0)},t,o,10):s=Br(n)?n:n?1:0,!a&&s===1&&(a=[],jH(function(c,u){a[u]=c!=null?c+"":""},t,o,1/0)),i=a?a.length:t===ly?o.length:o[0]?o[0].length:null}else if(e===xl)a||(a=V1e(r));else if(e===hu)a||(a=[],X(r,function(c,u){a.push(u)}));else if(e===yl){var l=ty(r[0]);i=$e(l)&&l.length||1}return{startIndex:s,dimensionsDefine:FH(a),dimensionsDetectedCount:i}}function V1e(r){for(var e=0,t;e<r.length&&!(t=r[e++]););if(t)return pr(t)}function FH(r){if(r){var e=bt();return We(r,function(t,n){t=Pt(t)?t:{name:t};var a={name:t.name,displayName:t.displayName,type:t.type};if(a.name==null)return a;a.name+="",a.displayName==null&&(a.displayName=a.name);var i=e.get(a.name);return i?a.name+="-"+i.count++:e.set(a.name,{count:1}),a})}}function jH(r,e,t,n){if(e===ly)for(var a=0;a<t.length&&a<n;a++)r(t[a]?t[a][0]:null,a);else for(var i=t[0]||[],a=0;a<i.length&&a<n;a++)r(i[a],a)}function xte(r){var e=r.sourceFormat;return e===xl||e===hu}var Vf,$f,Kf,OH,UH,bte=function(){function r(e,t){var n=hF(e)?e:dF(e);this._source=n;var a=this._data=n.data;n.sourceFormat===TA&&(this._offset=0,this._dimSize=t,this._data=a),UH(this,a,n)}return r.prototype.getSource=function(){return this._source},r.prototype.count=function(){return 0},r.prototype.getItem=function(e,t){},r.prototype.appendData=function(e){},r.prototype.clean=function(){},r.protoInitialize=function(){var e=r.prototype;e.pure=!1,e.persistent=!0}(),r.internalField=function(){var e;UH=function(s,o,l){var c=l.sourceFormat,u=l.seriesLayoutBy,h=l.startIndex,d=l.dimensionsDefine,A=OH[AF(c,u)];if(He(s,A),c===TA)s.getItem=t,s.count=a,s.fillStorage=n;else{var g=wte(c,u);s.getItem=ft(g,null,o,h,d);var p=Ste(c,u);s.count=ft(p,null,o,h,d)}};var t=function(s,o){s=s-this._offset,o=o||[];for(var l=this._data,c=this._dimSize,u=c*s,h=0;h<c;h++)o[h]=l[u+h];return o},n=function(s,o,l,c){for(var u=this._data,h=this._dimSize,d=0;d<h;d++){for(var A=c[d],g=A[0]==null?1/0:A[0],p=A[1]==null?-1/0:A[1],v=o-s,m=l[d],y=0;y<v;y++){var x=u[y*h+d];m[s+y]=x,x<g&&(g=x),x>p&&(p=x)}A[0]=g,A[1]=p}},a=function(){return this._data?this._data.length/this._dimSize:0};OH=(e={},e[Wi+"_"+Jc]={pure:!0,appendData:i},e[Wi+"_"+ly]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[xl]={pure:!0,appendData:i},e[hu]={pure:!0,appendData:function(s){var o=this._data;X(s,function(l,c){for(var u=o[c]||(o[c]=[]),h=0;h<(l||[]).length;h++)u.push(l[h])})}},e[yl]={appendData:i},e[TA]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},e);function i(s){for(var o=0;o<s.length;o++)this._data.push(s[o])}}(),r}(),HH=function(r,e,t,n){return r[n]},$1e=(Vf={},Vf[Wi+"_"+Jc]=function(r,e,t,n){return r[n+e]},Vf[Wi+"_"+ly]=function(r,e,t,n,a){n+=e;for(var i=a||[],s=r,o=0;o<s.length;o++){var l=s[o];i[o]=l?l[n]:null}return i},Vf[xl]=HH,Vf[hu]=function(r,e,t,n,a){for(var i=a||[],s=0;s<t.length;s++){var o=t[s].name,l=r[o];i[s]=l?l[n]:null}return i},Vf[yl]=HH,Vf);function wte(r,e){var t=$1e[AF(r,e)];return t}var QH=function(r,e,t){return r.length},K1e=($f={},$f[Wi+"_"+Jc]=function(r,e,t){return Math.max(0,r.length-e)},$f[Wi+"_"+ly]=function(r,e,t){var n=r[0];return n?Math.max(0,n.length-e):0},$f[xl]=QH,$f[hu]=function(r,e,t){var n=t[0].name,a=r[n];return a?a.length:0},$f[yl]=QH,$f);function Ste(r,e){var t=K1e[AF(r,e)];return t}var RE=function(r,e,t){return r[e]},W1e=(Kf={},Kf[Wi]=RE,Kf[xl]=function(r,e,t){return r[t]},Kf[hu]=RE,Kf[yl]=function(r,e,t){var n=ty(r);return n instanceof Array?n[e]:n},Kf[TA]=RE,Kf);function _te(r){var e=W1e[r];return e}function AF(r,e){return r===Wi?r+"_"+e:r}function C0(r,e,t){if(r){var n=r.getRawDataItem(e);if(n!=null){var a=r.getStore(),i=a.getSource().sourceFormat;if(t!=null){var s=r.getDimensionIndex(t),o=a.getDimensionProperty(s);return _te(i)(n,s,o)}else{var l=n;return i===yl&&(l=ty(n)),l}}}}var q1e=/\{@(.+?)\}/g,GN=function(){function r(){}return r.prototype.getDataParams=function(e,t){var n=this.getData(t),a=this.getRawValue(e,t),i=n.getRawIndex(e),s=n.getName(e),o=n.getRawDataItem(e),l=n.getItemVisual(e,"style"),c=l&&l[n.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,h=this.mainType,d=h==="series",A=n.userOutput&&n.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:s,dataIndex:i,data:o,dataType:t,value:a,color:c,borderColor:u,dimensionNames:A?A.fullDimensions:null,encode:A?A.encode:null,$vars:["seriesName","name","value"]}},r.prototype.getFormattedLabel=function(e,t,n,a,i,s){t=t||"normal";var o=this.getData(n),l=this.getDataParams(e,n);if(s&&(l.value=s.interpolatedValue),a!=null&&$e(l.value)&&(l.value=l.value[a]),!i){var c=o.getItemModel(e);i=c.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(It(i))return l.status=t,l.dimensionIndex=a,i(l);if(dt(i)){var u=ite(i,l);return u.replace(q1e,function(h,d){var A=d.length,g=d;g.charAt(0)==="["&&g.charAt(A-1)==="]"&&(g=+g.slice(1,A-1));var p=C0(o,e,g);if(s&&$e(s.interpolatedValue)){var v=o.getDimensionIndex(g);v>=0&&(p=s.interpolatedValue[v])}return p!=null?p+"":""})}},r.prototype.getRawValue=function(e,t){return C0(this.getData(t),e)},r.prototype.formatTooltip=function(e,t,n){},r}();function zH(r){var e,t;return Pt(r)?r.type&&(t=r):e=r,{text:e,frag:t}}function M1(r){return new Y1e(r)}var Y1e=function(){function r(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return r.prototype.perform=function(e){var t=this._upstream,n=e&&e.skip;if(this._dirty&&t){var a=this.context;a.data=a.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var i;this._plan&&!n&&(i=this._plan(this.context));var s=u(this._modBy),o=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(s!==l||o!==c)&&(i="reset");function u(y){return!(y>=1)&&(y=1),y}var h;(this._dirty||i==="reset")&&(this._dirty=!1,h=this._doReset(n)),this._modBy=l,this._modDataCount=c;var d=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var A=this._dueIndex,g=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!n&&(h||A<g)){var p=this._progress;if($e(p))for(var v=0;v<p.length;v++)this._doProgress(p[v],A,g,l,c);else this._doProgress(p,A,g,l,c)}this._dueIndex=g;var m=this._settedOutputEnd!=null?this._settedOutputEnd:g;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},r.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},r.prototype._doProgress=function(e,t,n,a,i){GH.reset(t,n,a,i),this._callingProgress=e,this._callingProgress({start:t,end:n,count:n-t,next:GH.next},this.context)},r.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,n;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(n=t.forceFirstProgress,t=t.progress),$e(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var a=this._downstream;return a&&a.dirty(),n},r.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},r.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},r.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},r.prototype.getUpstream=function(){return this._upstream},r.prototype.getDownstream=function(){return this._downstream},r.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},r}(),GH=function(){var r,e,t,n,a,i={reset:function(l,c,u,h){e=l,r=c,t=u,n=h,a=Math.ceil(n/t),i.next=t>1&&n>0?o:s}};return i;function s(){return e<r?e++:null}function o(){var l=e%a*t+Math.ceil(e/a),c=e>=r?null:l<n?l:e;return e++,c}}();function IA(r,e){var t=e&&e.type;return t==="ordinal"?r:(t==="time"&&!Br(r)&&r!=null&&r!=="-"&&(r=+su(r)),r==null||r===""?NaN:Number(r))}var X1e=bt({number:function(r){return parseFloat(r)},time:function(r){return+su(r)},trim:function(r){return dt(r)?Kl(r):r}});function Cte(r){return X1e.get(r)}var Bte={lt:function(r,e){return r<e},lte:function(r,e){return r<=e},gt:function(r,e){return r>e},gte:function(r,e){return r>=e}},Z1e=function(){function r(e,t){if(!Br(t)){var n="";Or(n)}this._opFn=Bte[e],this._rvalFloat=_h(t)}return r.prototype.evaluate=function(e){return Br(e)?this._opFn(e,this._rvalFloat):this._opFn(_h(e),this._rvalFloat)},r}(),Nte=function(){function r(e,t){var n=e==="desc";this._resultLT=n?1:-1,t==null&&(t=n?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return r.prototype.evaluate=function(e,t){var n=Br(e)?e:_h(e),a=Br(t)?t:_h(t),i=isNaN(n),s=isNaN(a);if(i&&(n=this._incomparable),s&&(a=this._incomparable),i&&s){var o=dt(e),l=dt(t);o&&(n=l?e:0),l&&(a=o?t:0)}return n<a?this._resultLT:n>a?-this._resultLT:0},r}(),J1e=function(){function r(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=_h(t)}return r.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var n=typeof e;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(t=_h(e)===this._rvalFloat)}return this._isEQ?t:!t},r}();function ebe(r,e){return r==="eq"||r==="ne"?new J1e(r==="eq",e):vt(Bte,r)?new Z1e(r,e):null}var tbe=function(){function r(){}return r.prototype.getRawData=function(){throw new Error("not supported")},r.prototype.getRawDataItem=function(e){throw new Error("not supported")},r.prototype.cloneRawData=function(){},r.prototype.getDimensionInfo=function(e){},r.prototype.cloneAllDimensionInfo=function(){},r.prototype.count=function(){},r.prototype.retrieveValue=function(e,t){},r.prototype.retrieveValueFromItem=function(e,t){},r.prototype.convertValue=function(e,t){return IA(e,t)},r}();function rbe(r,e){var t=new tbe,n=r.data,a=t.sourceFormat=r.sourceFormat,i=r.startIndex,s="";r.seriesLayoutBy!==Jc&&Or(s);var o=[],l={},c=r.dimensionsDefine;if(c)X(c,function(p,v){var m=p.name,y={index:v,name:m,displayName:p.displayName};if(o.push(y),m!=null){var x="";vt(l,m)&&Or(x),l[m]=y}});else for(var u=0;u<r.dimensionsDetectedCount;u++)o.push({index:u});var h=wte(a,Jc);e.__isBuiltIn&&(t.getRawDataItem=function(p){return h(n,i,o,p)},t.getRawData=ft(nbe,null,r)),t.cloneRawData=ft(abe,null,r);var d=Ste(a,Jc);t.count=ft(d,null,n,i,o);var A=_te(a);t.retrieveValue=function(p,v){var m=h(n,i,o,p);return g(m,v)};var g=t.retrieveValueFromItem=function(p,v){if(p!=null){var m=o[v];if(m)return A(p,v,m.name)}};return t.getDimensionInfo=ft(ibe,null,o,l),t.cloneAllDimensionInfo=ft(sbe,null,o),t}function nbe(r){var e=r.sourceFormat;if(!fF(e)){var t="";Or(t)}return r.data}function abe(r){var e=r.sourceFormat,t=r.data;if(!fF(e)){var n="";Or(n)}if(e===Wi){for(var a=[],i=0,s=t.length;i<s;i++)a.push(t[i].slice());return a}else if(e===xl){for(var a=[],i=0,s=t.length;i<s;i++)a.push(He({},t[i]));return a}}function ibe(r,e,t){if(t!=null){if(Br(t)||!isNaN(t)&&!vt(e,t))return r[t];if(vt(e,t))return e[t]}}function sbe(r){return Ft(r)}var Tte=bt();function obe(r){r=Ft(r);var e=r.type,t="";e||Or(t);var n=e.split(":");n.length!==2&&Or(t);var a=!1;n[0]==="echarts"&&(e=n[1],a=!0),r.__isBuiltIn=a,Tte.set(e,r)}function lbe(r,e,t){var n=Xr(r),a=n.length,i="";a||Or(i);for(var s=0,o=a;s<o;s++){var l=n[s];e=cbe(l,e),s!==o-1&&(e.length=Math.max(e.length,1))}return e}function cbe(r,e,t,n){var a="";e.length||Or(a),Pt(r)||Or(a);var i=r.type,s=Tte.get(i);s||Or(a);var o=We(e,function(c){return rbe(c,s)}),l=Xr(s.transform({upstream:o[0],upstreamList:o,config:Ft(r.config)}));return We(l,function(c,u){var h="";Pt(c)||Or(h),c.data||Or(h);var d=yte(c.data);fF(d)||Or(h);var A,g=e[0];if(g&&u===0&&!c.dimensions){var p=g.startIndex;p&&(c.data=g.data.slice(0,p).concat(c.data)),A={seriesLayoutBy:Jc,sourceHeader:p,dimensions:g.metaRawOption.dimensions}}else A={seriesLayoutBy:Jc,sourceHeader:0,dimensions:c.dimensions};return lR(c.data,A,null)})}function fF(r){return r===Wi||r===xl}var VN="undefined",ube=typeof Uint32Array===VN?Array:Uint32Array,hbe=typeof Uint16Array===VN?Array:Uint16Array,Ite=typeof Int32Array===VN?Array:Int32Array,VH=typeof Float64Array===VN?Array:Float64Array,Ete={float:VH,int:Ite,ordinal:Array,number:Array,time:VH},LE;function Tm(r){return r>65535?ube:hbe}function Im(){return[1/0,-1/0]}function dbe(r){var e=r.constructor;return e===Array?r.slice():new e(r)}function $H(r,e,t,n,a){var i=Ete[t||"float"];if(a){var s=r[e],o=s&&s.length;if(o!==n){for(var l=new i(n),c=0;c<o;c++)l[c]=s[c];r[e]=l}}else r[e]=new i(n)}var cR=function(){function r(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=bt()}return r.prototype.initData=function(e,t,n){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var a=e.getSource(),i=this.defaultDimValueGetter=LE[a.sourceFormat];this._dimValueGetter=n||i,this._rawExtent=[],xte(a),this._dimensions=We(t,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,e.count())},r.prototype.getProvider=function(){return this._provider},r.prototype.getSource=function(){return this._provider.getSource()},r.prototype.ensureCalculationDimension=function(e,t){var n=this._calcDimNameToIdx,a=this._dimensions,i=n.get(e);if(i!=null){if(a[i].type===t)return i}else i=a.length;return a[i]={type:t},n.set(e,i),this._chunks[i]=new Ete[t||"float"](this._rawCount),this._rawExtent[i]=Im(),i},r.prototype.collectOrdinalMeta=function(e,t){var n=this._chunks[e],a=this._dimensions[e],i=this._rawExtent,s=a.ordinalOffset||0,o=n.length;s===0&&(i[e]=Im());for(var l=i[e],c=s;c<o;c++){var u=n[c]=t.parseAndCollect(n[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}a.ordinalMeta=t,a.ordinalOffset=o,a.type="ordinal"},r.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],n=t.ordinalMeta;return n},r.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},r.prototype.appendData=function(e){var t=this._provider,n=this.count();t.appendData(e);var a=t.count();return t.persistent||(a+=n),n<a&&this._initDataFromProvider(n,a,!0),[n,a]},r.prototype.appendValues=function(e,t){for(var n=this._chunks,a=this._dimensions,i=a.length,s=this._rawExtent,o=this.count(),l=o+Math.max(e.length,t||0),c=0;c<i;c++){var u=a[c];$H(n,c,u.type,l,!0)}for(var h=[],d=o;d<l;d++)for(var A=d-o,g=0;g<i;g++){var u=a[g],p=LE.arrayRows.call(this,e[A]||h,u.property,A,g);n[g][d]=p;var v=s[g];p<v[0]&&(v[0]=p),p>v[1]&&(v[1]=p)}return this._rawCount=this._count=l,{start:o,end:l}},r.prototype._initDataFromProvider=function(e,t,n){for(var a=this._provider,i=this._chunks,s=this._dimensions,o=s.length,l=this._rawExtent,c=We(s,function(y){return y.property}),u=0;u<o;u++){var h=s[u];l[u]||(l[u]=Im()),$H(i,u,h.type,t,n)}if(a.fillStorage)a.fillStorage(e,t,i,l);else for(var d=[],A=e;A<t;A++){d=a.getItem(A,d);for(var g=0;g<o;g++){var p=i[g],v=this._dimValueGetter(d,c[g],A,g);p[A]=v;var m=l[g];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}!a.persistent&&a.clean&&a.clean(),this._rawCount=this._count=t,this._extent=[]},r.prototype.count=function(){return this._count},r.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var n=this._chunks[e];return n?n[this.getRawIndex(t)]:NaN},r.prototype.getValues=function(e,t){var n=[],a=[];if(t==null){t=e,e=[];for(var i=0;i<this._dimensions.length;i++)a.push(i)}else a=e;for(var i=0,s=a.length;i<s;i++)n.push(this.get(a[i],t));return n},r.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var n=this._chunks[e];return n?n[t]:NaN},r.prototype.getSum=function(e){var t=this._chunks[e],n=0;if(t)for(var a=0,i=this.count();a<i;a++){var s=this.get(e,a);isNaN(s)||(n+=s)}return n},r.prototype.getMedian=function(e){var t=[];this.each([e],function(i){isNaN(i)||t.push(i)});var n=t.sort(function(i,s){return i-s}),a=this.count();return a===0?0:a%2===1?n[(a-1)/2]:(n[a/2]+n[a/2-1])/2},r.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(n!=null&&n<this._count&&n===e)return e;for(var a=0,i=this._count-1;a<=i;){var s=(a+i)/2|0;if(t[s]<e)a=s+1;else if(t[s]>e)i=s-1;else return s}return-1},r.prototype.indicesOfNearest=function(e,t,n){var a=this._chunks,i=a[e],s=[];if(!i)return s;n==null&&(n=1/0);for(var o=1/0,l=-1,c=0,u=0,h=this.count();u<h;u++){var d=this.getRawIndex(u),A=t-i[d],g=Math.abs(A);g<=n&&((g<o||g===o&&A>=0&&l<0)&&(o=g,l=A,c=0),A===l&&(s[c++]=u))}return s.length=c,s},r.prototype.getIndices=function(){var e,t=this._indices;if(t){var n=t.constructor,a=this._count;if(n===Array){e=new n(a);for(var i=0;i<a;i++)e[i]=t[i]}else e=new n(t.buffer,0,a)}else{var n=Tm(this._rawCount);e=new n(this.count());for(var i=0;i<e.length;i++)e[i]=i}return e},r.prototype.filter=function(e,t){if(!this._count)return this;for(var n=this.clone(),a=n.count(),i=Tm(n._rawCount),s=new i(a),o=[],l=e.length,c=0,u=e[0],h=n._chunks,d=0;d<a;d++){var A=void 0,g=n.getRawIndex(d);if(l===0)A=t(d);else if(l===1){var p=h[u][g];A=t(p,d)}else{for(var v=0;v<l;v++)o[v]=h[e[v]][g];o[v]=d,A=t.apply(null,o)}A&&(s[c++]=g)}return c<a&&(n._indices=s),n._count=c,n._extent=[],n._updateGetRawIdx(),n},r.prototype.selectRange=function(e){var t=this.clone(),n=t._count;if(!n)return this;var a=pr(e),i=a.length;if(!i)return this;var s=t.count(),o=Tm(t._rawCount),l=new o(s),c=0,u=a[0],h=e[u][0],d=e[u][1],A=t._chunks,g=!1;if(!t._indices){var p=0;if(i===1){for(var v=A[a[0]],m=0;m<n;m++){var y=v[m];(y>=h&&y<=d||isNaN(y))&&(l[c++]=p),p++}g=!0}else if(i===2){for(var v=A[a[0]],x=A[a[1]],b=e[a[1]][0],S=e[a[1]][1],m=0;m<n;m++){var y=v[m],_=x[m];(y>=h&&y<=d||isNaN(y))&&(_>=b&&_<=S||isNaN(_))&&(l[c++]=p),p++}g=!0}}if(!g)if(i===1)for(var m=0;m<s;m++){var C=t.getRawIndex(m),y=A[a[0]][C];(y>=h&&y<=d||isNaN(y))&&(l[c++]=C)}else for(var m=0;m<s;m++){for(var w=!0,C=t.getRawIndex(m),B=0;B<i;B++){var D=a[B],y=A[D][C];(y<e[D][0]||y>e[D][1])&&(w=!1)}w&&(l[c++]=t.getRawIndex(m))}return c<s&&(t._indices=l),t._count=c,t._extent=[],t._updateGetRawIdx(),t},r.prototype.map=function(e,t){var n=this.clone(e);return this._updateDims(n,e,t),n},r.prototype.modify=function(e,t){this._updateDims(this,e,t)},r.prototype._updateDims=function(e,t,n){for(var a=e._chunks,i=[],s=t.length,o=e.count(),l=[],c=e._rawExtent,u=0;u<t.length;u++)c[t[u]]=Im();for(var h=0;h<o;h++){for(var d=e.getRawIndex(h),A=0;A<s;A++)l[A]=a[t[A]][d];l[s]=h;var g=n&&n.apply(null,l);if(g!=null){typeof g!="object"&&(i[0]=g,g=i);for(var u=0;u<g.length;u++){var p=t[u],v=g[u],m=c[p],y=a[p];y&&(y[d]=v),v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}}}},r.prototype.lttbDownSample=function(e,t){var n=this.clone([e],!0),a=n._chunks,i=a[e],s=this.count(),o=0,l=Math.floor(1/t),c=this.getRawIndex(0),u,h,d,A=new(Tm(this._rawCount))(Math.min((Math.ceil(s/l)+2)*2,s));A[o++]=c;for(var g=1;g<s-1;g+=l){for(var p=Math.min(g+l,s-1),v=Math.min(g+l*2,s),m=(v+p)/2,y=0,x=p;x<v;x++){var b=this.getRawIndex(x),S=i[b];isNaN(S)||(y+=S)}y/=v-p;var _=g,C=Math.min(g+l,s),w=g-1,B=i[c];u=-1,d=_;for(var D=-1,T=0,x=_;x<C;x++){var b=this.getRawIndex(x),S=i[b];if(isNaN(S)){T++,D<0&&(D=b);continue}h=Math.abs((w-m)*(S-B)-(w-x)*(y-B)),h>u&&(u=h,d=b)}T>0&&T<C-_&&(A[o++]=Math.min(D,d),d=Math.max(D,d)),A[o++]=d,c=d}return A[o++]=this.getRawIndex(s-1),n._count=o,n._indices=A,n.getRawIndex=this._getRawIdx,n},r.prototype.minmaxDownSample=function(e,t){for(var n=this.clone([e],!0),a=n._chunks,i=Math.floor(1/t),s=a[e],o=this.count(),l=new(Tm(this._rawCount))(Math.ceil(o/i)*2),c=0,u=0;u<o;u+=i){var h=u,d=s[this.getRawIndex(h)],A=u,g=s[this.getRawIndex(A)],p=i;u+i>o&&(p=o-u);for(var v=0;v<p;v++){var m=this.getRawIndex(u+v),y=s[m];y<d&&(d=y,h=u+v),y>g&&(g=y,A=u+v)}var x=this.getRawIndex(h),b=this.getRawIndex(A);h<A?(l[c++]=x,l[c++]=b):(l[c++]=b,l[c++]=x)}return n._count=c,n._indices=l,n._updateGetRawIdx(),n},r.prototype.downSample=function(e,t,n,a){for(var i=this.clone([e],!0),s=i._chunks,o=[],l=Math.floor(1/t),c=s[e],u=this.count(),h=i._rawExtent[e]=Im(),d=new(Tm(this._rawCount))(Math.ceil(u/l)),A=0,g=0;g<u;g+=l){l>u-g&&(l=u-g,o.length=l);for(var p=0;p<l;p++){var v=this.getRawIndex(g+p);o[p]=c[v]}var m=n(o),y=this.getRawIndex(Math.min(g+a(o,m)||0,u-1));c[y]=m,m<h[0]&&(h[0]=m),m>h[1]&&(h[1]=m),d[A++]=y}return i._count=A,i._indices=d,i._updateGetRawIdx(),i},r.prototype.each=function(e,t){if(this._count)for(var n=e.length,a=this._chunks,i=0,s=this.count();i<s;i++){var o=this.getRawIndex(i);switch(n){case 0:t(i);break;case 1:t(a[e[0]][o],i);break;case 2:t(a[e[0]][o],a[e[1]][o],i);break;default:for(var l=0,c=[];l<n;l++)c[l]=a[e[l]][o];c[l]=i,t.apply(null,c)}}},r.prototype.getDataExtent=function(e){var t=this._chunks[e],n=Im();if(!t)return n;var a=this.count(),i=!this._indices,s;if(i)return this._rawExtent[e].slice();if(s=this._extent[e],s)return s.slice();s=n;for(var o=s[0],l=s[1],c=0;c<a;c++){var u=this.getRawIndex(c),h=t[u];h<o&&(o=h),h>l&&(l=h)}return s=[o,l],this._extent[e]=s,s},r.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var n=[],a=this._chunks,i=0;i<a.length;i++)n.push(a[i][t]);return n},r.prototype.clone=function(e,t){var n=new r,a=this._chunks,i=e&&nu(e,function(o,l){return o[l]=!0,o},{});if(i)for(var s=0;s<a.length;s++)n._chunks[s]=i[s]?dbe(a[s]):a[s];else n._chunks=a;return this._copyCommonProps(n),t||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},r.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Ft(this._extent),e._rawExtent=Ft(this._rawExtent)},r.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var n=this._indices.length;t=new e(n);for(var a=0;a<n;a++)t[a]=this._indices[a]}else t=new e(this._indices);return t}return null},r.prototype._getRawIdxIdentity=function(e){return e},r.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},r.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},r.internalField=function(){function e(t,n,a,i){return IA(t[i],this._dimensions[i])}LE={arrayRows:e,objectRows:function(t,n,a,i){return IA(t[n],this._dimensions[i])},keyedColumns:e,original:function(t,n,a,i){var s=t&&(t.value==null?t:t.value);return IA(s instanceof Array?s[i]:s,this._dimensions[i])},typedArray:function(t,n,a,i){return t[i]}}}(),r}(),Dte=function(){function r(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return r.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},r.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},r.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},r.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},r.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),n=!!t.length,a,i;if(fS(e)){var s=e,o=void 0,l=void 0,c=void 0;if(n){var u=t[0];u.prepareSource(),c=u.getSource(),o=c.data,l=c.sourceFormat,i=[u._getVersionSign()]}else o=s.get("data",!0),l=zs(o)?TA:yl,i=[];var h=this._getSourceMetaRawOption()||{},d=c&&c.metaRawOption||{},A=$t(h.seriesLayoutBy,d.seriesLayoutBy)||null,g=$t(h.sourceHeader,d.sourceHeader),p=$t(h.dimensions,d.dimensions),v=A!==d.seriesLayoutBy||!!g!=!!d.sourceHeader||p;a=v?[lR(o,{seriesLayoutBy:A,sourceHeader:g,dimensions:p},l)]:[]}else{var m=e;if(n){var y=this._applyTransform(t);a=y.sourceList,i=y.upstreamSignList}else{var x=m.get("source",!0);a=[lR(x,this._getSourceMetaRawOption(),null)],i=[]}}this._setLocalSource(a,i)},r.prototype._applyTransform=function(e){var t=this._sourceHost,n=t.get("transform",!0),a=t.get("fromTransformResult",!0);if(a!=null){var i="";e.length!==1&&WH(i)}var s,o=[],l=[];return X(e,function(c){c.prepareSource();var u=c.getSource(a||0),h="";a!=null&&!u&&WH(h),o.push(u),l.push(c._getVersionSign())}),n?s=lbe(n,o,{datasetIndex:t.componentIndex}):a!=null&&(s=[z1e(o[0])]),{sourceList:s,upstreamSignList:l}},r.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var n=e[t];if(n._isDirty()||this._upstreamSignList[t]!==n._getVersionSign())return!0}},r.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(e)}return t},r.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},r.prototype._innerGetDataStore=function(e,t,n){var a=0,i=this._storeList,s=i[a];s||(s=i[a]={});var o=s[n];if(!o){var l=this._getUpstreamSourceManagers()[0];fS(this._sourceHost)&&l?o=l._innerGetDataStore(e,t,n):(o=new cR,o.initData(new bte(t,e.length),e)),s[n]=o}return o},r.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(fS(e)){var t=lF(e);return t?[t.getSourceManager()]:[]}else return We(v1e(e),function(n){return n.getSourceManager()})},r.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,n,a;if(fS(e))t=e.get("seriesLayoutBy",!0),n=e.get("sourceHeader",!0),a=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=e;t=i.get("seriesLayoutBy",!0),n=i.get("sourceHeader",!0),a=i.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:n,dimensions:a}},r}();function KH(r){var e=r.option.transform;e&&cC(r.option.transform)}function fS(r){return r.mainType==="series"}function WH(r){throw new Error(r)}var Abe="line-height:1";function Mte(r){var e=r.lineHeight;return e==null?Abe:"line-height:"+cs(e+"")+"px"}function Rte(r,e){var t=r.color||"#6e7079",n=r.fontSize||12,a=r.fontWeight||"400",i=r.color||"#464646",s=r.fontSize||14,o=r.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+cs(n+"")+"px;color:"+cs(t)+";font-weight:"+cs(a+""),valueStyle:"font-size:"+cs(s+"")+"px;color:"+cs(i)+";font-weight:"+cs(o+"")}:{nameStyle:{fontSize:n,fill:t,fontWeight:a},valueStyle:{fontSize:s,fill:i,fontWeight:o}}}var fbe=[0,10,20,30],gbe=["",`
`,`

`,`


`];function ti(r,e){return e.type=r,e}function uR(r){return r.type==="section"}function Lte(r){return uR(r)?pbe:mbe}function Pte(r){if(uR(r)){var e=0,t=r.blocks.length,n=t>1||t>0&&!r.noHeader;return X(r.blocks,function(a){var i=Pte(a);i>=e&&(e=i+ +(n&&(!i||uR(a)&&!a.noHeader)))}),e}return 0}function pbe(r,e,t,n){var a=e.noHeader,i=vbe(Pte(e)),s=[],o=e.blocks||[];gs(!o||$e(o)),o=o||[];var l=r.orderMode;if(e.sortBlocks&&l){o=o.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(vt(c,l)){var u=new Nte(c[l],null);o.sort(function(p,v){return u.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&o.reverse()}X(o,function(p,v){var m=e.valueFormatter,y=Lte(p)(m?He(He({},r),{valueFormatter:m}):r,p,v>0?i.html:0,n);y!=null&&s.push(y)});var h=r.renderMode==="richText"?s.join(i.richText):hR(n,s.join(""),a?t:i.html);if(a)return h;var d=iR(e.header,"ordinal",r.useUTC),A=Rte(n,r.renderMode).nameStyle,g=Mte(n);return r.renderMode==="richText"?kte(r,d,A)+i.richText+h:hR(n,'<div style="'+A+";"+g+';">'+cs(d)+"</div>"+h,t)}function mbe(r,e,t,n){var a=r.renderMode,i=e.noName,s=e.noValue,o=!e.markerType,l=e.name,c=r.useUTC,u=e.valueFormatter||r.valueFormatter||function(b){return b=$e(b)?b:[b],We(b,function(S,_){return iR(S,$e(A)?A[_]:A,c)})};if(!(i&&s)){var h=o?"":r.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",a),d=i?"":iR(l,"ordinal",c),A=e.valueType,g=s?[]:u(e.value,e.dataIndex),p=!o||!i,v=!o&&i,m=Rte(n,a),y=m.nameStyle,x=m.valueStyle;return a==="richText"?(o?"":h)+(i?"":kte(r,d,y))+(s?"":bbe(r,g,p,v,x)):hR(n,(o?"":h)+(i?"":ybe(d,!o,y))+(s?"":xbe(g,p,v,x)),t)}}function qH(r,e,t,n,a,i){if(r){var s=Lte(r),o={useUTC:a,renderMode:t,orderMode:n,markupStyleCreator:e,valueFormatter:r.valueFormatter};return s(o,r,0,i)}}function vbe(r){return{html:fbe[r],richText:gbe[r]}}function hR(r,e,t){var n='<div style="clear:both"></div>',a="margin: "+t+"px 0 0",i=Mte(r);return'<div style="'+a+";"+i+';">'+e+n+"</div>"}function ybe(r,e,t){var n=e?"margin-left:2px":"";return'<span style="'+t+";"+n+'">'+cs(r)+"</span>"}function xbe(r,e,t,n){var a=t?"10px":"20px",i=e?"float:right;margin-left:"+a:"";return r=$e(r)?r:[r],'<span style="'+i+";"+n+'">'+We(r,function(s){return cs(s)}).join("&nbsp;&nbsp;")+"</span>"}function kte(r,e,t){return r.markupStyleCreator.wrapRichTextStyle(e,t)}function bbe(r,e,t,n,a){var i=[a],s=n?10:20;return t&&i.push({padding:[0,0,0,s],align:"right"}),r.markupStyleCreator.wrapRichTextStyle($e(e)?e.join("  "):e,i)}function Fte(r,e){var t=r.getData().getItemVisual(e,"style"),n=t[r.visualDrawType];return bp(n)}function jte(r,e){var t=r.get("padding");return t??(e==="richText"?[8,10]:10)}var PE=function(){function r(){this.richTextStyles={},this._nextStyleNameId=JJ()}return r.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},r.prototype.makeTooltipMarker=function(e,t,n){var a=n==="richText"?this._generateStyleName():null,i=h1e({color:t,type:e,renderMode:n,markerId:a});return dt(i)?i:(this.richTextStyles[a]=i.style,i.content)},r.prototype.wrapRichTextStyle=function(e,t){var n={};$e(t)?X(t,function(i){return He(n,i)}):He(n,t);var a=this._generateStyleName();return this.richTextStyles[a]=n,"{"+a+"|"+e+"}"},r}();function Ote(r){var e=r.series,t=r.dataIndex,n=r.multipleSeries,a=e.getData(),i=a.mapDimensionsAll("defaultedTooltip"),s=i.length,o=e.getRawValue(t),l=$e(o),c=Fte(e,t),u,h,d,A;if(s>1||l&&!s){var g=wbe(o,e,t,i,c);u=g.inlineValues,h=g.inlineValueTypes,d=g.blocks,A=g.inlineValues[0]}else if(s){var p=a.getDimensionInfo(i[0]);A=u=C0(a,t,i[0]),h=p.type}else A=u=l?o[0]:o;var v=Uk(e),m=v&&e.name||"",y=a.getName(t),x=n?m:y;return ti("section",{header:m,noHeader:n||!v,sortParam:A,blocks:[ti("nameValue",{markerType:"item",markerColor:c,name:x,noName:!Kl(x),value:u,valueType:h,dataIndex:t})].concat(d||[])})}function wbe(r,e,t,n,a){var i=e.getData(),s=nu(r,function(h,d,A){var g=i.getDimensionInfo(A);return h=h||g&&g.tooltip!==!1&&g.displayName!=null},!1),o=[],l=[],c=[];n.length?X(n,function(h){u(C0(i,t,h),h)}):X(r,u);function u(h,d){var A=i.getDimensionInfo(d);!A||A.otherDims.tooltip===!1||(s?c.push(ti("nameValue",{markerType:"subItem",markerColor:a,name:A.displayName,value:h,valueType:A.type})):(o.push(h),l.push(A.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:c}}var bd=wr();function gS(r,e){return r.getName(e)||r.getId(e)}var i5="__universalTransitionEnabled",Sn=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,n,a){this.seriesIndex=this.componentIndex,this.dataTask=M1({count:_be,reset:Cbe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,a);var i=bd(this).sourceManager=new Dte(this);i.prepareSource();var s=this.getInitialData(t,a);XH(s,this),this.dataTask.context.data=s,bd(this).dataBeforeProcessed=s,YH(this),this._initSelectedMapFromData(s)},e.prototype.mergeDefaultAndTheme=function(t,n){var a=Nb(this),i=a?oy(t):{},s=this.subType;gr.hasClass(s)&&(s+="Series"),qt(t,n.getTheme().get(this.subType)),qt(t,this.getDefaultOption()),mp(t,"label",["show"]),this.fillDataTextStyle(t.data),a&&zA(t,i,a)},e.prototype.mergeOption=function(t,n){t=qt(this.option,t,!0),this.fillDataTextStyle(t.data);var a=Nb(this);a&&zA(this.option,t,a);var i=bd(this).sourceManager;i.dirty(),i.prepareSource();var s=this.getInitialData(t,n);XH(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,bd(this).dataBeforeProcessed=s,YH(this),this._initSelectedMapFromData(s)},e.prototype.fillDataTextStyle=function(t){if(t&&!zs(t))for(var n=["show"],a=0;a<t.length;a++)t[a]&&t[a].label&&mp(t[a],"label",n)},e.prototype.getInitialData=function(t,n){},e.prototype.appendData=function(t){var n=this.getRawData();n.appendData(t.data)},e.prototype.getData=function(t){var n=dR(this);if(n){var a=n.context.data;return t==null||!a.getLinkedData?a:a.getLinkedData(t)}else return bd(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var n=dR(this);if(n){var a=n.context;a.outputData=t,n!==this.dataTask&&(a.data=t)}bd(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return bt(t)},e.prototype.getSourceManager=function(){return bd(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return bd(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,n,a){return Ote({series:this,dataIndex:t,multipleSeries:n})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(fr.node&&!(t&&t.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,n,a){var i=this.ecModel,s=cF.prototype.getColorFromPalette.call(this,t,n,a);return s||(s=i.getColorFromPalette(t,n,a)),s},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,n){this._innerSelect(this.getData(n),t)},e.prototype.unselect=function(t,n){var a=this.option.selectedMap;if(a){var i=this.option.selectedMode,s=this.getData(n);if(i==="series"||a==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var l=t[o],c=gS(s,l);a[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(t,n){for(var a=[],i=0;i<t.length;i++)a[0]=t[i],this.isSelected(t[i],n)?this.unselect(a,n):this.select(a,n)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,n=pr(t),a=[],i=0;i<n.length;i++){var s=t[n[i]];s>=0&&a.push(s)}return a},e.prototype.isSelected=function(t,n){var a=this.option.selectedMap;if(!a)return!1;var i=this.getData(n);return(a==="all"||a[gS(i,t)])&&!i.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[i5])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,n){var a,i,s=this.option,o=s.selectedMode,l=n.length;if(!(!o||!l)){if(o==="series")s.selectedMap="all";else if(o==="multiple"){Pt(s.selectedMap)||(s.selectedMap={});for(var c=s.selectedMap,u=0;u<l;u++){var h=n[u],d=gS(t,h);c[d]=!0,this._selectedDataIndicesMap[d]=t.getRawIndex(h)}}else if(o==="single"||o===!0){var A=n[l-1],d=gS(t,A);s.selectedMap=(a={},a[d]=!0,a),this._selectedDataIndicesMap=(i={},i[d]=t.getRawIndex(A),i)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var n=[];t.hasItemOption&&t.each(function(a){var i=t.getRawDataItem(a);i&&i.selected&&n.push(a)}),n.length>0&&this._innerSelect(t,n)}},e.registerClass=function(t){return gr.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(gr);Ia(Sn,GN);Ia(Sn,cF);lee(Sn,gr);function YH(r){var e=r.name;Uk(r)||(r.name=Sbe(r)||e)}function Sbe(r){var e=r.getRawData(),t=e.mapDimensionsAll("seriesName"),n=[];return X(t,function(a){var i=e.getDimensionInfo(a);i.displayName&&n.push(i.displayName)}),n.join(" ")}function _be(r){return r.model.getRawData().count()}function Cbe(r){var e=r.model;return e.setData(e.getRawData().cloneShallow()),Bbe}function Bbe(r,e){e.outputData&&r.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function XH(r,e){X(mb(r.CHANGABLE_METHODS,r.DOWNSAMPLE_METHODS),function(t){r.wrapMethod(t,Wt(Nbe,e))})}function Nbe(r,e){var t=dR(r);return t&&t.setOutputEnd((e||this).count()),e}function dR(r){var e=(r.ecModel||{}).scheduler,t=e&&e.getPipeline(r.uid);if(t){var n=t.currentTask;if(n){var a=n.agentStubMap;a&&(n=a.get(r.uid))}return n}}var Gn=function(){function r(){this.group=new Ht,this.uid=iy("viewComponent")}return r.prototype.init=function(e,t){},r.prototype.render=function(e,t,n,a){},r.prototype.dispose=function(e,t){},r.prototype.updateView=function(e,t,n,a){},r.prototype.updateLayout=function(e,t,n,a){},r.prototype.updateVisual=function(e,t,n,a){},r.prototype.toggleBlurSeries=function(e,t,n){},r.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},r}();Qk(Gn);BN(Gn);function cy(){var r=wr();return function(e){var t=r(e),n=e.pipelineContext,a=!!t.large,i=!!t.progressiveRender,s=t.large=!!(n&&n.large),o=t.progressiveRender=!!(n&&n.progressiveRender);return(a!==s||i!==o)&&"reset"}}var Ute=wr(),Tbe=cy(),nn=function(){function r(){this.group=new Ht,this.uid=iy("viewChart"),this.renderTask=M1({plan:Ibe,reset:Ebe}),this.renderTask.context={view:this}}return r.prototype.init=function(e,t){},r.prototype.render=function(e,t,n,a){},r.prototype.highlight=function(e,t,n,a){var i=e.getData(a&&a.dataType);i&&JH(i,a,"emphasis")},r.prototype.downplay=function(e,t,n,a){var i=e.getData(a&&a.dataType);i&&JH(i,a,"normal")},r.prototype.remove=function(e,t){this.group.removeAll()},r.prototype.dispose=function(e,t){},r.prototype.updateView=function(e,t,n,a){this.render(e,t,n,a)},r.prototype.updateLayout=function(e,t,n,a){this.render(e,t,n,a)},r.prototype.updateVisual=function(e,t,n,a){this.render(e,t,n,a)},r.prototype.eachRendered=function(e){nf(this.group,e)},r.markUpdateMethod=function(e,t){Ute(e).updateMethod=t},r.protoInitialize=function(){var e=r.prototype;e.type="chart"}(),r}();function ZH(r,e,t){r&&_b(r)&&(e==="emphasis"?Ch:Bh)(r,t)}function JH(r,e,t){var n=vp(r,e),a=e&&e.highlightKey!=null?hxe(e.highlightKey):null;n!=null?X(Xr(n),function(i){ZH(r.getItemGraphicEl(i),t,a)}):r.eachItemGraphicEl(function(i){ZH(i,t,a)})}Qk(nn);BN(nn);function Ibe(r){return Tbe(r.model)}function Ebe(r){var e=r.model,t=r.ecModel,n=r.api,a=r.payload,i=e.pipelineContext.progressiveRender,s=r.view,o=a&&Ute(a).updateMethod,l=i?"incrementalPrepareRender":o&&s[o]?o:"render";return l!=="render"&&s[l](e,t,n,a),Dbe[l]}var Dbe={incrementalPrepareRender:{progress:function(r,e){e.view.incrementalRender(r,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(r,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},BC="\0__throttleOriginMethod",eQ="\0__throttleRate",tQ="\0__throttleType";function gF(r,e,t){var n,a=0,i=0,s=null,o,l,c,u;e=e||0;function h(){i=new Date().getTime(),s=null,r.apply(l,c||[])}var d=function(){for(var A=[],g=0;g<arguments.length;g++)A[g]=arguments[g];n=new Date().getTime(),l=this,c=A;var p=u||e,v=u||t;u=null,o=n-(v?a:i)-p,clearTimeout(s),v?s=setTimeout(h,p):o>=0?h():s=setTimeout(h,-o),a=n};return d.clear=function(){s&&(clearTimeout(s),s=null)},d.debounceNextCall=function(A){u=A},d}function uy(r,e,t,n){var a=r[e];if(a){var i=a[BC]||a,s=a[tQ],o=a[eQ];if(o!==t||s!==n){if(t==null||!n)return r[e]=i;a=r[e]=gF(i,t,n==="debounce"),a[BC]=i,a[tQ]=n,a[eQ]=t}return a}}function Ib(r,e){var t=r[e];t&&t[BC]&&(t.clear&&t.clear(),r[e]=t[BC])}var rQ=wr(),nQ={itemStyle:yp($ee,!0),lineStyle:yp(Vee,!0)},Mbe={lineStyle:"stroke",itemStyle:"fill"};function Hte(r,e){var t=r.visualStyleMapper||nQ[e];return t||(console.warn("Unknown style type '"+e+"'."),nQ.itemStyle)}function Qte(r,e){var t=r.visualDrawType||Mbe[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var Rbe={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,e){var t=r.getData(),n=r.visualStyleAccessPath||"itemStyle",a=r.getModel(n),i=Hte(r,n),s=i(a),o=a.getShallow("decal");o&&(t.setVisual("decal",o),o.dirty=!0);var l=Qte(r,n),c=s[l],u=It(c)?c:null,h=s.fill==="auto"||s.stroke==="auto";if(!s[l]||u||h){var d=r.getColorFromPalette(r.name,null,e.getSeriesCount());s[l]||(s[l]=d,t.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||It(s.fill)?d:s.fill,s.stroke=s.stroke==="auto"||It(s.stroke)?d:s.stroke}if(t.setVisual("style",s),t.setVisual("drawType",l),!e.isSeriesFiltered(r)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(A,g){var p=r.getDataParams(g),v=He({},s);v[l]=u(p),A.setItemVisual(g,"style",v)}}}},rx=new Qr,Lbe={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,e){if(!(r.ignoreStyleOnData||e.isSeriesFiltered(r))){var t=r.getData(),n=r.visualStyleAccessPath||"itemStyle",a=Hte(r,n),i=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(s,o){var l=s.getRawDataItem(o);if(l&&l[n]){rx.option=l[n];var c=a(rx),u=s.ensureUniqueItemVisual(o,"style");He(u,c),rx.option.decal&&(s.setItemVisual(o,"decal",rx.option.decal),rx.option.decal.dirty=!0),i in c&&s.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},Pbe={performRawSeries:!0,overallReset:function(r){var e=bt();r.eachSeries(function(t){var n=t.getColorBy();if(!t.isColorBySeries()){var a=t.type+"-"+n,i=e.get(a);i||(i={},e.set(a,i)),rQ(t).scope=i}}),r.eachSeries(function(t){if(!(t.isColorBySeries()||r.isSeriesFiltered(t))){var n=t.getRawData(),a={},i=t.getData(),s=rQ(t).scope,o=t.visualStyleAccessPath||"itemStyle",l=Qte(t,o);i.each(function(c){var u=i.getRawIndex(c);a[u]=c}),n.each(function(c){var u=a[c],h=i.getItemVisual(u,"colorFromPalette");if(h){var d=i.ensureUniqueItemVisual(u,"style"),A=n.getName(c)||c+"",g=n.count();d[l]=t.getColorFromPalette(A,s,g)}})}})}},pS=Math.PI;function kbe(r,e){e=e||{},Lt(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new Ht,n=new br({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(n);var a=new Cr({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),i=new br({style:{fill:"none"},textContent:a,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(i);var s;return e.showSpinner&&(s=new RN({shape:{startAngle:-pS/2,endAngle:-pS/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:pS*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:pS*3/2}).delay(300).start("circularInOut"),t.add(s)),t.resize=function(){var o=a.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(r.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),u=r.getHeight()/2;e.showSpinner&&s.setShape({cx:c,cy:u}),i.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:r.getWidth(),height:r.getHeight()})},t.resize(),t}var zte=function(){function r(e,t,n,a){this._stageTaskMap=bt(),this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),a=this._visualHandlers=a.slice(),this._allHandlers=n.concat(a)}return r.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(n){var a=n.overallTask;a&&a.dirty()})},r.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),a=n.context,i=!t&&n.progressiveEnabled&&(!a||a.progressiveRender)&&e.__idxInPipeline>n.blockIndex,s=i?n.step:null,o=a&&a.modDataCount,l=o!=null?Math.ceil(o/s):null;return{step:s,modBy:l,modDataCount:o}}},r.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},r.prototype.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),a=e.getData(),i=a.count(),s=n.progressiveEnabled&&t.incrementalPrepareRender&&i>=n.threshold,o=e.get("large")&&i>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?i:null;e.pipelineContext=n.context={progressiveRender:s,modDataCount:l,large:o}},r.prototype.restorePipelines=function(e){var t=this,n=t._pipelineMap=bt();e.eachSeries(function(a){var i=a.getProgressive(),s=a.uid;n.set(s,{id:s,head:null,tail:null,threshold:a.getProgressiveThreshold(),progressiveEnabled:i&&!(a.preventIncremental&&a.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),t._pipe(a,a.dataTask)})},r.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),n=this.api;X(this._allHandlers,function(a){var i=e.get(a.uid)||e.set(a.uid,{}),s="";gs(!(a.reset&&a.overallReset),s),a.reset&&this._createSeriesStageTask(a,i,t,n),a.overallReset&&this._createOverallStageTask(a,i,t,n)},this)},r.prototype.prepareView=function(e,t,n,a){var i=e.renderTask,s=i.context;s.model=t,s.ecModel=n,s.api=a,i.__block=!e.incrementalPrepareRender,this._pipe(t,i)},r.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},r.prototype.performVisualTasks=function(e,t,n){this._performStageTasks(this._visualHandlers,e,t,n)},r.prototype._performStageTasks=function(e,t,n,a){a=a||{};var i=!1,s=this;X(e,function(l,c){if(!(a.visualType&&a.visualType!==l.visualType)){var u=s._stageTaskMap.get(l.uid),h=u.seriesTaskMap,d=u.overallTask;if(d){var A,g=d.agentStubMap;g.each(function(v){o(a,v)&&(v.dirty(),A=!0)}),A&&d.dirty(),s.updatePayload(d,n);var p=s.getPerformArgs(d,a.block);g.each(function(v){v.perform(p)}),d.perform(p)&&(i=!0)}else h&&h.each(function(v,m){o(a,v)&&v.dirty();var y=s.getPerformArgs(v,a.block);y.skip=!l.performRawSeries&&t.isSeriesFiltered(v.context.model),s.updatePayload(v,n),v.perform(y)&&(i=!0)})}});function o(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=i||this.unfinished},r.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(n){t=n.dataTask.perform()||t}),this.unfinished=t||this.unfinished},r.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},r.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},r.prototype._createSeriesStageTask=function(e,t,n,a){var i=this,s=t.seriesTaskMap,o=t.seriesTaskMap=bt(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?n.eachRawSeries(u):l?n.eachRawSeriesByType(l,u):c&&c(n,a).each(u);function u(h){var d=h.uid,A=o.set(d,s&&s.get(d)||M1({plan:Hbe,reset:Qbe,count:Gbe}));A.context={model:h,ecModel:n,api:a,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:i},i._pipe(h,A)}},r.prototype._createOverallStageTask=function(e,t,n,a){var i=this,s=t.overallTask=t.overallTask||M1({reset:Fbe});s.context={ecModel:n,api:a,overallReset:e.overallReset,scheduler:i};var o=s.agentStubMap,l=s.agentStubMap=bt(),c=e.seriesType,u=e.getTargetSeries,h=!0,d=!1,A="";gs(!e.createOnAllSeries,A),c?n.eachRawSeriesByType(c,g):u?u(n,a).each(g):(h=!1,X(n.getSeries(),g));function g(p){var v=p.uid,m=l.set(v,o&&o.get(v)||(d=!0,M1({reset:jbe,onDirty:Ube})));m.context={model:p,overallProgress:h},m.agent=s,m.__block=h,i._pipe(p,m)}d&&s.dirty()},r.prototype._pipe=function(e,t){var n=e.uid,a=this._pipelineMap.get(n);!a.head&&(a.head=t),a.tail&&a.tail.pipe(t),a.tail=t,t.__idxInPipeline=a.count++,t.__pipeline=a},r.wrapStageHandler=function(e,t){return It(e)&&(e={overallReset:e,seriesType:Vbe(e)}),e.uid=iy("stageHandler"),t&&(e.visualType=t),e},r}();function Fbe(r){r.overallReset(r.ecModel,r.api,r.payload)}function jbe(r){return r.overallProgress&&Obe}function Obe(){this.agent.dirty(),this.getDownstream().dirty()}function Ube(){this.agent&&this.agent.dirty()}function Hbe(r){return r.plan?r.plan(r.model,r.ecModel,r.api,r.payload):null}function Qbe(r){r.useClearVisual&&r.data.clearAllVisual();var e=r.resetDefines=Xr(r.reset(r.model,r.ecModel,r.api,r.payload));return e.length>1?We(e,function(t,n){return Gte(n)}):zbe}var zbe=Gte(0);function Gte(r){return function(e,t){var n=t.data,a=t.resetDefines[r];if(a&&a.dataEach)for(var i=e.start;i<e.end;i++)a.dataEach(n,i);else a&&a.progress&&a.progress(e,n)}}function Gbe(r){return r.data.count()}function Vbe(r){NC=null;try{r(Eb,Vte)}catch{}return NC}var Eb={},Vte={},NC;$te(Eb,uF);$te(Vte,pte);Eb.eachSeriesByType=Eb.eachRawSeriesByType=function(r){NC=r};Eb.eachComponent=function(r){r.mainType==="series"&&r.subType&&(NC=r.subType)};function $te(r,e){for(var t in e.prototype)r[t]=Aa}var aQ=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const $be={color:aQ,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],aQ]};var Oi="#B9B8CE",iQ="#100C2A",mS=function(){return{axisLine:{lineStyle:{color:Oi}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},sQ=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Kte={darkMode:!0,color:sQ,backgroundColor:iQ,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Oi},pageTextStyle:{color:Oi}},textStyle:{color:Oi},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Oi}},dataZoom:{borderColor:"#71708A",textStyle:{color:Oi},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Oi}},timeline:{lineStyle:{color:Oi},label:{color:Oi},controlStyle:{color:Oi,borderColor:Oi}},calendar:{itemStyle:{color:iQ},dayLabel:{color:Oi},monthLabel:{color:Oi},yearLabel:{color:Oi}},timeAxis:mS(),logAxis:mS(),valueAxis:mS(),categoryAxis:mS(),line:{symbol:"circle"},graph:{color:sQ},gauge:{title:{color:Oi},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Oi},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Kte.categoryAxis.splitLine.show=!1;var Kbe=function(){function r(){}return r.prototype.normalizeQuery=function(e){var t={},n={},a={};if(dt(e)){var i=zc(e);t.mainType=i.main||null,t.subType=i.sub||null}else{var s=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};X(e,function(l,c){for(var u=!1,h=0;h<s.length;h++){var d=s[h],A=c.lastIndexOf(d);if(A>0&&A===c.length-d.length){var g=c.slice(0,A);g!=="data"&&(t.mainType=g,t[d.toLowerCase()]=l,u=!0)}}o.hasOwnProperty(c)&&(n[c]=l,u=!0),u||(a[c]=l)})}return{cptQuery:t,dataQuery:n,otherQuery:a}},r.prototype.filter=function(e,t){var n=this.eventInfo;if(!n)return!0;var a=n.targetEl,i=n.packedEvent,s=n.model,o=n.view;if(!s||!o)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,s,"mainType")&&u(l,s,"subType")&&u(l,s,"index","componentIndex")&&u(l,s,"name")&&u(l,s,"id")&&u(c,i,"name")&&u(c,i,"dataIndex")&&u(c,i,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,a,i));function u(h,d,A,g){return h[A]==null||d[g||A]===h[A]}},r.prototype.afterTrigger=function(){this.eventInfo=null},r}(),AR=["symbol","symbolSize","symbolRotate","symbolOffset"],oQ=AR.concat(["symbolKeepAspect"]),Wbe={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,e){var t=r.getData();if(r.legendIcon&&t.setVisual("legendIcon",r.legendIcon),!r.hasSymbolVisual)return;for(var n={},a={},i=!1,s=0;s<AR.length;s++){var o=AR[s],l=r.get(o);It(l)?(i=!0,a[o]=l):n[o]=l}if(n.symbol=n.symbol||r.defaultSymbol,t.setVisual(He({legendIcon:r.legendIcon||n.symbol,symbolKeepAspect:r.get("symbolKeepAspect")},n)),e.isSeriesFiltered(r))return;var c=pr(a);function u(h,d){for(var A=r.getRawValue(d),g=r.getDataParams(d),p=0;p<c.length;p++){var v=c[p];h.setItemVisual(d,v,a[v](A,g))}}return{dataEach:i?u:null}}},qbe={createOnAllSeries:!0,performRawSeries:!0,reset:function(r,e){if(!r.hasSymbolVisual||e.isSeriesFiltered(r))return;var t=r.getData();function n(a,i){for(var s=a.getItemModel(i),o=0;o<oQ.length;o++){var l=oQ[o],c=s.getShallow(l,!0);c!=null&&a.setItemVisual(i,l,c)}}return{dataEach:t.hasItemOption?n:null}}};function pF(r,e,t){switch(t){case"color":var n=r.getItemVisual(e,"style");return n[r.getVisual("drawType")];case"opacity":return r.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getItemVisual(e,t)}}function Rw(r,e){switch(e){case"color":var t=r.getVisual("style");return t[r.getVisual("drawType")];case"opacity":return r.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return r.getVisual(e)}}function Wte(r,e,t,n){switch(t){case"color":var a=r.ensureUniqueItemVisual(e,"style");a[r.getVisual("drawType")]=n,r.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":r.ensureUniqueItemVisual(e,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":r.setItemVisual(e,t,n);break}}function qte(r,e){function t(n,a){var i=[];return n.eachComponent({mainType:"series",subType:r,query:a},function(s){i.push(s.seriesIndex)}),i}X([[r+"ToggleSelect","toggleSelect"],[r+"Select","select"],[r+"UnSelect","unselect"]],function(n){e(n[0],function(a,i,s){a=He({},a),s.dispatchAction(He(a,{type:n[1],seriesIndex:t(i,a)}))})})}function Em(r,e,t,n,a){var i=r+e;t.isSilent(i)||n.eachComponent({mainType:"series",subType:"pie"},function(s){for(var o=s.seriesIndex,l=s.option.selectedMap,c=a.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===o){var h=s.getData(),d=vp(h,a.fromActionPayload);t.trigger(i,{type:i,seriesId:s.id,name:$e(d)?h.getName(d[0]):h.getName(d),selected:dt(l)?l:He({},l)})}})}function Ybe(r,e,t){r.on("selectchanged",function(n){var a=t.getModel();n.isFromClick?(Em("map","selectchanged",e,a,n),Em("pie","selectchanged",e,a,n)):n.fromAction==="select"?(Em("map","selected",e,a,n),Em("pie","selected",e,a,n)):n.fromAction==="unselect"&&(Em("map","unselected",e,a,n),Em("pie","unselected",e,a,n))})}function Dg(r,e,t){for(var n;r&&!(e(r)&&(n=r,t));)r=r.__hostTarget||r.parent;return n}var Xbe=Math.round(Math.random()*9),Zbe=typeof Object.defineProperty=="function",Jbe=function(){function r(){this._id="__ec_inner_"+Xbe++}return r.prototype.get=function(e){return this._guard(e)[this._id]},r.prototype.set=function(e,t){var n=this._guard(e);return Zbe?Object.defineProperty(n,this._id,{value:t,enumerable:!1,configurable:!0}):n[this._id]=t,this},r.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},r.prototype.has=function(e){return!!this._guard(e)[this._id]},r.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},r}(),ewe=hr.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,e){var t=e.cx,n=e.cy,a=e.width/2,i=e.height/2;r.moveTo(t,n-i),r.lineTo(t+a,n+i),r.lineTo(t-a,n+i),r.closePath()}}),twe=hr.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(r,e){var t=e.cx,n=e.cy,a=e.width/2,i=e.height/2;r.moveTo(t,n-i),r.lineTo(t+a,n),r.lineTo(t,n+i),r.lineTo(t-a,n),r.closePath()}}),rwe=hr.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,e){var t=e.x,n=e.y,a=e.width/5*3,i=Math.max(a,e.height),s=a/2,o=s*s/(i-s),l=n-i+s+o,c=Math.asin(o/s),u=Math.cos(c)*s,h=Math.sin(c),d=Math.cos(c),A=s*.6,g=s*.7;r.moveTo(t-u,l+o),r.arc(t,l,s,Math.PI-c,Math.PI*2+c),r.bezierCurveTo(t+u-h*A,l+o+d*A,t,n-g,t,n),r.bezierCurveTo(t,n-g,t-u+h*A,l+o+d*A,t-u,l+o),r.closePath()}}),nwe=hr.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(r,e){var t=e.height,n=e.width,a=e.x,i=e.y,s=n/3*2;r.moveTo(a,i),r.lineTo(a+s,i+t),r.lineTo(a,i+t/4*3),r.lineTo(a-s,i+t),r.lineTo(a,i),r.closePath()}}),awe={line:Ya,rect:br,roundRect:br,square:br,circle:Oh,diamond:twe,pin:rwe,arrow:nwe,triangle:ewe},iwe={line:function(r,e,t,n,a){a.x1=r,a.y1=e+n/2,a.x2=r+t,a.y2=e+n/2},rect:function(r,e,t,n,a){a.x=r,a.y=e,a.width=t,a.height=n},roundRect:function(r,e,t,n,a){a.x=r,a.y=e,a.width=t,a.height=n,a.r=Math.min(t,n)/4},square:function(r,e,t,n,a){var i=Math.min(t,n);a.x=r,a.y=e,a.width=i,a.height=i},circle:function(r,e,t,n,a){a.cx=r+t/2,a.cy=e+n/2,a.r=Math.min(t,n)/2},diamond:function(r,e,t,n,a){a.cx=r+t/2,a.cy=e+n/2,a.width=t,a.height=n},pin:function(r,e,t,n,a){a.x=r+t/2,a.y=e+n/2,a.width=t,a.height=n},arrow:function(r,e,t,n,a){a.x=r+t/2,a.y=e+n/2,a.width=t,a.height=n},triangle:function(r,e,t,n,a){a.cx=r+t/2,a.cy=e+n/2,a.width=t,a.height=n}},TC={};X(awe,function(r,e){TC[e]=new r});var swe=hr.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(r,e,t){var n=mC(r,e,t),a=this.shape;return a&&a.symbolType==="pin"&&e.position==="inside"&&(n.y=t.y+t.height*.4),n},buildPath:function(r,e,t){var n=e.symbolType;if(n!=="none"){var a=TC[n];a||(n="rect",a=TC[n]),iwe[n](e.x,e.y,e.width,e.height,a.shape),a.buildPath(r,a.shape,t)}}});function owe(r,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=r,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=r:t.fill=r,this.markRedraw()}}function Ta(r,e,t,n,a,i,s){var o=r.indexOf("empty")===0;o&&(r=r.substr(5,1).toLowerCase()+r.substr(6));var l;return r.indexOf("image://")===0?l=Fee(r.slice(8),new Zt(e,t,n,a),s?"center":"cover"):r.indexOf("path://")===0?l=LN(r.slice(7),{},new Zt(e,t,n,a),s?"center":"cover"):l=new swe({shape:{symbolType:r,x:e,y:t,width:n,height:a}}),l.__isEmptyBrush=o,l.setColor=owe,i&&l.setColor(i),l}function hy(r){return $e(r)||(r=[+r,+r]),[r[0]||0,r[1]||0]}function Op(r,e){if(r!=null)return $e(r)||(r=[r,r]),[ot(r[0],e[0])||0,ot($t(r[1],r[0]),e[1])||0]}function Mg(r){return isFinite(r)}function lwe(r,e,t){var n=e.x==null?0:e.x,a=e.x2==null?1:e.x2,i=e.y==null?0:e.y,s=e.y2==null?0:e.y2;e.global||(n=n*t.width+t.x,a=a*t.width+t.x,i=i*t.height+t.y,s=s*t.height+t.y),n=Mg(n)?n:0,a=Mg(a)?a:1,i=Mg(i)?i:0,s=Mg(s)?s:0;var o=r.createLinearGradient(n,i,a,s);return o}function cwe(r,e,t){var n=t.width,a=t.height,i=Math.min(n,a),s=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(s=s*n+t.x,o=o*a+t.y,l=l*i),s=Mg(s)?s:.5,o=Mg(o)?o:.5,l=l>=0&&Mg(l)?l:.5;var c=r.createRadialGradient(s,o,0,s,o,l);return c}function fR(r,e,t){for(var n=e.type==="radial"?cwe(r,e,t):lwe(r,e,t),a=e.colorStops,i=0;i<a.length;i++)n.addColorStop(a[i].offset,a[i].color);return n}function uwe(r,e){if(r===e||!r&&!e)return!1;if(!r||!e||r.length!==e.length)return!0;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!0;return!1}function vS(r){return parseInt(r,10)}function _v(r,e,t){var n=["width","height"][e],a=["clientWidth","clientHeight"][e],i=["paddingLeft","paddingTop"][e],s=["paddingRight","paddingBottom"][e];if(t[n]!=null&&t[n]!=="auto")return parseFloat(t[n]);var o=document.defaultView.getComputedStyle(r);return(r[a]||vS(o[n])||vS(r.style[n]))-(vS(o[i])||0)-(vS(o[s])||0)|0}function hwe(r,e){return!r||r==="solid"||!(e>0)?null:r==="dashed"?[4*e,2*e]:r==="dotted"?[e]:Br(r)?[r]:$e(r)?r:null}function mF(r){var e=r.style,t=e.lineDash&&e.lineWidth>0&&hwe(e.lineDash,e.lineWidth),n=e.lineDashOffset;if(t){var a=e.strokeNoScale&&r.getLineScale?r.getLineScale():1;a&&a!==1&&(t=We(t,function(i){return i/a}),n/=a)}return[t,n]}var dwe=new ou(!0);function IC(r){var e=r.stroke;return!(e==null||e==="none"||!(r.lineWidth>0))}function lQ(r){return typeof r=="string"&&r!=="none"}function EC(r){var e=r.fill;return e!=null&&e!=="none"}function cQ(r,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=r.globalAlpha;r.globalAlpha=e.fillOpacity*e.opacity,r.fill(),r.globalAlpha=t}else r.fill()}function uQ(r,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=r.globalAlpha;r.globalAlpha=e.strokeOpacity*e.opacity,r.stroke(),r.globalAlpha=t}else r.stroke()}function gR(r,e,t){var n=zk(e.image,e.__image,t);if(NN(n)){var a=r.createPattern(n,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&a&&a.setTransform){var i=new DOMMatrix;i.translateSelf(e.x||0,e.y||0),i.rotateSelf(0,0,(e.rotation||0)*$_),i.scaleSelf(e.scaleX||1,e.scaleY||1),a.setTransform(i)}return a}}function Awe(r,e,t,n){var a,i=IC(t),s=EC(t),o=t.strokePercent,l=o<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||dwe,h=e.__dirty;if(!n){var d=t.fill,A=t.stroke,g=s&&!!d.colorStops,p=i&&!!A.colorStops,v=s&&!!d.image,m=i&&!!A.image,y=void 0,x=void 0,b=void 0,S=void 0,_=void 0;(g||p)&&(_=e.getBoundingRect()),g&&(y=h?fR(r,d,_):e.__canvasFillGradient,e.__canvasFillGradient=y),p&&(x=h?fR(r,A,_):e.__canvasStrokeGradient,e.__canvasStrokeGradient=x),v&&(b=h||!e.__canvasFillPattern?gR(r,d,e):e.__canvasFillPattern,e.__canvasFillPattern=b),m&&(S=h||!e.__canvasStrokePattern?gR(r,A,e):e.__canvasStrokePattern,e.__canvasStrokePattern=b),g?r.fillStyle=y:v&&(b?r.fillStyle=b:s=!1),p?r.strokeStyle=x:m&&(S?r.strokeStyle=S:i=!1)}var C=e.getGlobalScale();u.setScale(C[0],C[1],e.segmentIgnoreThreshold);var w,B;r.setLineDash&&t.lineDash&&(a=mF(e),w=a[0],B=a[1]);var D=!0;(c||h&tv)&&(u.setDPR(r.dpr),l?u.setContext(null):(u.setContext(r),D=!1),u.reset(),e.buildPath(u,e.shape,n),u.toStatic(),e.pathUpdated()),D&&u.rebuildPath(r,l?o:1),w&&(r.setLineDash(w),r.lineDashOffset=B),n||(t.strokeFirst?(i&&uQ(r,t),s&&cQ(r,t)):(s&&cQ(r,t),i&&uQ(r,t))),w&&r.setLineDash([])}function fwe(r,e,t){var n=e.__image=zk(t.image,e.__image,e,e.onload);if(!(!n||!NN(n))){var a=t.x||0,i=t.y||0,s=e.getWidth(),o=e.getHeight(),l=n.width/n.height;if(s==null&&o!=null?s=o*l:o==null&&s!=null?o=s/l:s==null&&o==null&&(s=n.width,o=n.height),t.sWidth&&t.sHeight){var c=t.sx||0,u=t.sy||0;r.drawImage(n,c,u,t.sWidth,t.sHeight,a,i,s,o)}else if(t.sx&&t.sy){var c=t.sx,u=t.sy,h=s-c,d=o-u;r.drawImage(n,c,u,h,d,a,i,s,o)}else r.drawImage(n,a,i,s,o)}}function gwe(r,e,t){var n,a=t.text;if(a!=null&&(a+=""),a){r.font=t.font||OA,r.textAlign=t.textAlign,r.textBaseline=t.textBaseline;var i=void 0,s=void 0;r.setLineDash&&t.lineDash&&(n=mF(e),i=n[0],s=n[1]),i&&(r.setLineDash(i),r.lineDashOffset=s),t.strokeFirst?(IC(t)&&r.strokeText(a,t.x,t.y),EC(t)&&r.fillText(a,t.x,t.y)):(EC(t)&&r.fillText(a,t.x,t.y),IC(t)&&r.strokeText(a,t.x,t.y)),i&&r.setLineDash([])}}var hQ=["shadowBlur","shadowOffsetX","shadowOffsetY"],dQ=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Yte(r,e,t,n,a){var i=!1;if(!n&&(t=t||{},e===t))return!1;if(n||e.opacity!==t.opacity){Fs(r,a),i=!0;var s=Math.max(Math.min(e.opacity,1),0);r.globalAlpha=isNaN(s)?Zg.opacity:s}(n||e.blend!==t.blend)&&(i||(Fs(r,a),i=!0),r.globalCompositeOperation=e.blend||Zg.blend);for(var o=0;o<hQ.length;o++){var l=hQ[o];(n||e[l]!==t[l])&&(i||(Fs(r,a),i=!0),r[l]=r.dpr*(e[l]||0))}return(n||e.shadowColor!==t.shadowColor)&&(i||(Fs(r,a),i=!0),r.shadowColor=e.shadowColor||Zg.shadowColor),i}function AQ(r,e,t,n,a){var i=Db(e,a.inHover),s=n?null:t&&Db(t,a.inHover)||{};if(i===s)return!1;var o=Yte(r,i,s,n,a);if((n||i.fill!==s.fill)&&(o||(Fs(r,a),o=!0),lQ(i.fill)&&(r.fillStyle=i.fill)),(n||i.stroke!==s.stroke)&&(o||(Fs(r,a),o=!0),lQ(i.stroke)&&(r.strokeStyle=i.stroke)),(n||i.opacity!==s.opacity)&&(o||(Fs(r,a),o=!0),r.globalAlpha=i.opacity==null?1:i.opacity),e.hasStroke()){var l=i.lineWidth,c=l/(i.strokeNoScale&&e.getLineScale?e.getLineScale():1);r.lineWidth!==c&&(o||(Fs(r,a),o=!0),r.lineWidth=c)}for(var u=0;u<dQ.length;u++){var h=dQ[u],d=h[0];(n||i[d]!==s[d])&&(o||(Fs(r,a),o=!0),r[d]=i[d]||h[1])}return o}function pwe(r,e,t,n,a){return Yte(r,Db(e,a.inHover),t&&Db(t,a.inHover),n,a)}function Xte(r,e){var t=e.transform,n=r.dpr||1;t?r.setTransform(n*t[0],n*t[1],n*t[2],n*t[3],n*t[4],n*t[5]):r.setTransform(n,0,0,n,0,0)}function mwe(r,e,t){for(var n=!1,a=0;a<r.length;a++){var i=r[a];n=n||i.isZeroArea(),Xte(e,i),e.beginPath(),i.buildPath(e,i.shape),e.clip()}t.allClipped=n}function vwe(r,e){return r&&e?r[0]!==e[0]||r[1]!==e[1]||r[2]!==e[2]||r[3]!==e[3]||r[4]!==e[4]||r[5]!==e[5]:!(!r&&!e)}var fQ=1,gQ=2,pQ=3,mQ=4;function ywe(r){var e=EC(r),t=IC(r);return!(r.lineDash||!(+e^+t)||e&&typeof r.fill!="string"||t&&typeof r.stroke!="string"||r.strokePercent<1||r.strokeOpacity<1||r.fillOpacity<1)}function Fs(r,e){e.batchFill&&r.fill(),e.batchStroke&&r.stroke(),e.batchFill="",e.batchStroke=""}function Db(r,e){return e&&r.__hoverStyle||r.style}function Zte(r,e){Rg(r,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Rg(r,e,t,n){var a=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~uo,e.__isRendered=!1;return}var i=e.__clipPaths,s=t.prevElClipPaths,o=!1,l=!1;if((!s||uwe(i,s))&&(s&&s.length&&(Fs(r,t),r.restore(),l=o=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),i&&i.length&&(Fs(r,t),r.save(),mwe(i,r,t),o=!0),t.prevElClipPaths=i),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=t.prevEl;c||(l=o=!0);var u=e instanceof hr&&e.autoBatch&&ywe(e.style);o||vwe(a,c.transform)?(Fs(r,t),Xte(r,e)):u||Fs(r,t);var h=Db(e,t.inHover);e instanceof hr?(t.lastDrawType!==fQ&&(l=!0,t.lastDrawType=fQ),AQ(r,e,c,l,t),(!u||!t.batchFill&&!t.batchStroke)&&r.beginPath(),Awe(r,e,h,u),u&&(t.batchFill=h.fill||"",t.batchStroke=h.stroke||"")):e instanceof S0?(t.lastDrawType!==pQ&&(l=!0,t.lastDrawType=pQ),AQ(r,e,c,l,t),gwe(r,e,h)):e instanceof fi?(t.lastDrawType!==gQ&&(l=!0,t.lastDrawType=gQ),pwe(r,e,c,l,t),fwe(r,e,h)):e.getTemporalDisplayables&&(t.lastDrawType!==mQ&&(l=!0,t.lastDrawType=mQ),xwe(r,e,t)),u&&n&&Fs(r,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function xwe(r,e,t){var n=e.getDisplayables(),a=e.getTemporalDisplayables();r.save();var i={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},s,o;for(s=e.getCursor(),o=n.length;s<o;s++){var l=n[s];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Rg(r,l,i,s===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),i.prevEl=l}for(var c=0,u=a.length;c<u;c++){var l=a[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Rg(r,l,i,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),i.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,r.restore()}var kE=new Jbe,vQ=new Sw(100),yQ=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function B0(r,e){if(r==="none")return null;var t=e.getDevicePixelRatio(),n=e.getZr(),a=n.painter.type==="svg";r.dirty&&kE.delete(r);var i=kE.get(r);if(i)return i;var s=Lt(r,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=s.rotation,o.scaleX=o.scaleY=a?1:1/t,kE.set(r,o),r.dirty=!1,o;function l(c){for(var u=[t],h=!0,d=0;d<yQ.length;++d){var A=s[yQ[d]];if(A!=null&&!$e(A)&&!dt(A)&&!Br(A)&&typeof A!="boolean"){h=!1;break}u.push(A)}var g;if(h){g=u.join(",")+(a?"-svg":"");var p=vQ.get(g);p&&(a?c.svgElement=p:c.image=p)}var v=ere(s.dashArrayX),m=bwe(s.dashArrayY),y=Jte(s.symbol),x=wwe(v),b=tre(m),S=!a&&UA.createCanvas(),_=a&&{tag:"g",attrs:{},key:"dcl",children:[]},C=B(),w;S&&(S.width=C.width*t,S.height=C.height*t,w=S.getContext("2d")),D(),h&&vQ.put(g,S||_),c.image=S,c.svgElement=_,c.svgWidth=C.width,c.svgHeight=C.height;function B(){for(var T=1,E=0,R=x.length;E<R;++E)T=k8(T,x[E]);for(var M=1,E=0,R=y.length;E<R;++E)M=k8(M,y[E].length);T*=M;var k=b*x.length*y.length;return{width:Math.max(1,Math.min(T,s.maxTileWidth)),height:Math.max(1,Math.min(k,s.maxTileHeight))}}function D(){w&&(w.clearRect(0,0,S.width,S.height),s.backgroundColor&&(w.fillStyle=s.backgroundColor,w.fillRect(0,0,S.width,S.height)));for(var T=0,E=0;E<m.length;++E)T+=m[E];if(T<=0)return;for(var R=-b,M=0,k=0,O=0;R<C.height;){if(M%2===0){for(var Q=k/2%y.length,H=0,W=0,te=0;H<C.width*2;){for(var ee=0,E=0;E<v[O].length;++E)ee+=v[O][E];if(ee<=0)break;if(W%2===0){var j=(1-s.symbolSize)*.5,G=H+v[O][W]*j,Y=R+m[M]*j,Z=v[O][W]*s.symbolSize,de=m[M]*s.symbolSize,he=te/2%y[Q].length;fe(G,Y,Z,de,y[Q][he])}H+=v[O][W],++te,++W,W===v[O].length&&(W=0)}++O,O===v.length&&(O=0)}R+=m[M],++k,++M,M===m.length&&(M=0)}function fe(q,ge,me,we,Me){var z=a?1:t,pe=Ta(Me,q*z,ge*z,me*z,we*z,s.color,s.symbolKeepAspect);if(a){var J=n.painter.renderOneToVNode(pe);J&&_.children.push(J)}else Zte(w,pe)}}}}function Jte(r){if(!r||r.length===0)return[["rect"]];if(dt(r))return[[r]];for(var e=!0,t=0;t<r.length;++t)if(!dt(r[t])){e=!1;break}if(e)return Jte([r]);for(var n=[],t=0;t<r.length;++t)dt(r[t])?n.push([r[t]]):n.push(r[t]);return n}function ere(r){if(!r||r.length===0)return[[0,0]];if(Br(r)){var e=Math.ceil(r);return[[e,e]]}for(var t=!0,n=0;n<r.length;++n)if(!Br(r[n])){t=!1;break}if(t)return ere([r]);for(var a=[],n=0;n<r.length;++n)if(Br(r[n])){var e=Math.ceil(r[n]);a.push([e,e])}else{var e=We(r[n],function(o){return Math.ceil(o)});e.length%2===1?a.push(e.concat(e)):a.push(e)}return a}function bwe(r){if(!r||typeof r=="object"&&r.length===0)return[0,0];if(Br(r)){var e=Math.ceil(r);return[e,e]}var t=We(r,function(n){return Math.ceil(n)});return r.length%2?t.concat(t):t}function wwe(r){return We(r,function(e){return tre(e)})}function tre(r){for(var e=0,t=0;t<r.length;++t)e+=r[t];return r.length%2===1?e*2:e}function Swe(r,e){r.eachRawSeries(function(t){if(!r.isSeriesFiltered(t)){var n=t.getData();n.hasItemVisual()&&n.each(function(s){var o=n.getItemVisual(s,"decal");if(o){var l=n.ensureUniqueItemVisual(s,"style");l.decal=B0(o,e)}});var a=n.getVisual("decal");if(a){var i=n.getVisual("style");i.decal=B0(a,e)}}})}var jl=new vl,rre={};function _we(r,e){rre[r]=e}function Cwe(r){return rre[r]}var Bwe=1,Nwe=800,Twe=900,Iwe=1e3,Ewe=2e3,Dwe=5e3,nre=1e3,Mwe=1100,vF=2e3,are=3e3,Rwe=4e3,$N=4500,Lwe=4600,Pwe=5e3,kwe=6e3,ire=7e3,Fwe={PROCESSOR:{FILTER:Iwe,SERIES_FILTER:Nwe,STATISTIC:Dwe},VISUAL:{LAYOUT:nre,PROGRESSIVE_LAYOUT:Mwe,GLOBAL:vF,CHART:are,POST_CHART_LAYOUT:Lwe,COMPONENT:Rwe,BRUSH:Pwe,CHART_ITEM:$N,ARIA:kwe,DECAL:ire}},Ri="__flagInMainProcess",Is="__pendingUpdate",FE="__needsUpdateStatus",xQ=/^[a-zA-Z0-9_]+$/,jE="__connectUpdateStatus",bQ=0,jwe=1,Owe=2;function sre(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return lre(this,r,e)}}function ore(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return lre(this,r,e)}}function lre(r,e,t){return t[0]=t[0]&&t[0].toLowerCase(),vl.prototype[e].apply(r,t)}var cre=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(vl),ure=cre.prototype;ure.on=ore("on");ure.off=ore("off");var Dm,OE,yS,wd,UE,HE,QE,nx,ax,wQ,SQ,zE,_Q,xS,CQ,hre,Fo,BQ,dre=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this,new Kbe)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],a=a||{},dt(n)&&(n=Are[n]),i._dom=t;var s="canvas",o="auto",l=!1;a.ssr&&L0e(function(d){var A=Qt(d),g=A.dataIndex;if(g!=null){var p=bt();return p.set("series_index",A.seriesIndex),p.set("data_index",g),A.ssrType&&p.set("ssr_type",A.ssrType),p}});var c=i._zr=M8(t,{renderer:a.renderer||s,devicePixelRatio:a.devicePixelRatio,width:a.width,height:a.height,ssr:a.ssr,useDirtyRect:$t(a.useDirtyRect,l),useCoarsePointer:$t(a.useCoarsePointer,o),pointerSize:a.pointerSize});i._ssr=a.ssr,i._throttledZrFlush=gF(ft(c.flush,c),17),n=Ft(n),n&&vte(n,!0),i._theme=n,i._locale=a1e(a.locale||Kee),i._coordSysMgr=new Mw;var u=i._api=CQ(i);function h(d,A){return d.__prio-A.__prio}return q_(MC,h),q_(pR,h),i._scheduler=new zte(i,u,pR,MC),i._messageCenter=new cre,i._initEvents(),i.resize=ft(i.resize,i),c.animation.on("frame",i._onframe,i),wQ(c,i),SQ(c,i),cC(i),i}return e.prototype._onframe=function(){if(!this._disposed){BQ(this);var t=this._scheduler;if(this[Is]){var n=this[Is].silent;this[Ri]=!0;try{Dm(this),wd.update.call(this,null,this[Is].updateParams)}catch(l){throw this[Ri]=!1,this[Is]=null,l}this._zr.flush(),this[Ri]=!1,this[Is]=null,nx.call(this,n),ax.call(this,n)}else if(t.unfinished){var a=Bwe,i=this._model,s=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),HE(this,i),t.performVisualTasks(i),xS(this,this._model,s,"remain",{}),a-=+new Date-o}while(a>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,n,a){if(!this[Ri]){if(this._disposed){this.id;return}var i,s,o;if(Pt(n)&&(a=n.lazyUpdate,i=n.silent,s=n.replaceMerge,o=n.transition,n=n.notMerge),this[Ri]=!0,!this._model||n){var l=new I1e(this._api),c=this._theme,u=this._model=new uF;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(t,{replaceMerge:s},mR);var h={seriesTransition:o,optionChanged:!0};if(a)this[Is]={silent:i,updateParams:h},this[Ri]=!1,this.getZr().wakeUp();else{try{Dm(this),wd.update.call(this,null,h)}catch(d){throw this[Is]=null,this[Ri]=!1,d}this._ssr||this._zr.flush(),this[Is]=null,this[Ri]=!1,nx.call(this,i),ax.call(this,i)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||fr.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var n=this._zr.painter;return n.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(fr.svgSupported){var t=this._zr,n=t.storage.getDisplayList();return X(n,function(a){a.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var n=t.excludeComponents,a=this._model,i=[],s=this;X(n,function(l){a.eachComponent({mainType:l},function(c){var u=s._componentsMap[c.__viewId];u.group.ignore||(i.push(u),u.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return X(i,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var n=t.type==="svg",a=this.group,i=Math.min,s=Math.max,o=1/0;if(NQ[a]){var l=o,c=o,u=-o,h=-o,d=[],A=t&&t.pixelRatio||this.getDevicePixelRatio();X(L1,function(x,b){if(x.group===a){var S=n?x.getZr().painter.getSvgDom().innerHTML:x.renderToCanvas(Ft(t)),_=x.getDom().getBoundingClientRect();l=i(_.left,l),c=i(_.top,c),u=s(_.right,u),h=s(_.bottom,h),d.push({dom:S,left:_.left,top:_.top})}}),l*=A,c*=A,u*=A,h*=A;var g=u-l,p=h-c,v=UA.createCanvas(),m=M8(v,{renderer:n?"svg":"canvas"});if(m.resize({width:g,height:p}),n){var y="";return X(d,function(x){var b=x.left-l,S=x.top-c;y+='<g transform="translate('+b+","+S+')">'+x.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=y,t.connectedBackgroundColor&&m.painter.setBackgroundColor(t.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return t.connectedBackgroundColor&&m.add(new br({shape:{x:0,y:0,width:g,height:p},style:{fill:t.connectedBackgroundColor}})),X(d,function(x){var b=new fi({style:{x:x.left*A-l,y:x.top*A-c,image:x.dom}});m.add(b)}),m.refreshImmediately(),v.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,n){return UE(this,"convertToPixel",t,n)},e.prototype.convertFromPixel=function(t,n){return UE(this,"convertFromPixel",t,n)},e.prototype.containPixel=function(t,n){if(this._disposed){this.id;return}var a=this._model,i,s=N1(a,t);return X(s,function(o,l){l.indexOf("Models")>=0&&X(o,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)i=i||!!u.containPoint(n);else if(l==="seriesModels"){var h=this._chartsMap[c.__viewId];h&&h.containPoint&&(i=i||h.containPoint(n,c))}},this)},this),!!i},e.prototype.getVisual=function(t,n){var a=this._model,i=N1(a,t,{defaultMainType:"series"}),s=i.seriesModel,o=s.getData(),l=i.hasOwnProperty("dataIndexInside")?i.dataIndexInside:i.hasOwnProperty("dataIndex")?o.indexOfRawIndex(i.dataIndex):null;return l!=null?pF(o,l,n):Rw(o,n)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;X(Uwe,function(n){var a=function(i){var s=t.getModel(),o=i.target,l,c=n==="globalout";if(c?l={}:o&&Dg(o,function(g){var p=Qt(g);if(p&&p.dataIndex!=null){var v=p.dataModel||s.getSeriesByIndex(p.seriesIndex);return l=v&&v.getDataParams(p.dataIndex,p.dataType,o)||{},!0}else if(p.eventData)return l=He({},p.eventData),!0},!0),l){var u=l.componentType,h=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",h=l.seriesIndex);var d=u&&h!=null&&s.getComponent(u,h),A=d&&t[d.mainType==="series"?"_chartsMap":"_componentsMap"][d.__viewId];l.event=i,l.type=n,t._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:d,view:A},t.trigger(n,l)}};a.zrEventfulCallAtLast=!0,t._zr.on(n,a,t)}),X(R1,function(n,a){t._messageCenter.on(a,function(i){this.trigger(a,i)},t)}),X(["selectchanged"],function(n){t._messageCenter.on(n,function(a){this.trigger(n,a)},t)}),Ybe(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&iee(this.getDom(),xF,"");var n=this,a=n._api,i=n._model;X(n._componentsViews,function(s){s.dispose(i,a)}),X(n._chartsViews,function(s){s.dispose(i,a)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete L1[n.id]},e.prototype.resize=function(t){if(!this[Ri]){if(this._disposed){this.id;return}this._zr.resize(t);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var a=n.resetOption("media"),i=t&&t.silent;this[Is]&&(i==null&&(i=this[Is].silent),a=!0,this[Is]=null),this[Ri]=!0;try{a&&Dm(this),wd.update.call(this,{type:"resize",animation:He({duration:0},t&&t.animation)})}catch(s){throw this[Ri]=!1,s}this[Ri]=!1,nx.call(this,i),ax.call(this,i)}}},e.prototype.showLoading=function(t,n){if(this._disposed){this.id;return}if(Pt(t)&&(n=t,t=""),t=t||"default",this.hideLoading(),!!vR[t]){var a=vR[t](this._api,n),i=this._zr;this._loadingFX=a,i.add(a)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var n=He({},t);return n.type=R1[t.type],n},e.prototype.dispatchAction=function(t,n){if(this._disposed){this.id;return}if(Pt(n)||(n={silent:!!n}),!!DC[t.type]&&this._model){if(this[Ri]){this._pendingActions.push(t);return}var a=n.silent;QE.call(this,t,a);var i=n.flush;i?this._zr.flush():i!==!1&&fr.browser.weChat&&this._throttledZrFlush(),nx.call(this,a),ax.call(this,a)}},e.prototype.updateLabelLayout=function(){jl.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var n=t.seriesIndex,a=this.getModel(),i=a.getSeriesByIndex(n);i.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Dm=function(h){var d=h._scheduler;d.restorePipelines(h._model),d.prepareStageTasks(),OE(h,!0),OE(h,!1),d.plan()},OE=function(h,d){for(var A=h._model,g=h._scheduler,p=d?h._componentsViews:h._chartsViews,v=d?h._componentsMap:h._chartsMap,m=h._zr,y=h._api,x=0;x<p.length;x++)p[x].__alive=!1;d?A.eachComponent(function(_,C){_!=="series"&&b(C)}):A.eachSeries(b);function b(_){var C=_.__requireNewView;_.__requireNewView=!1;var w="_ec_"+_.id+"_"+_.type,B=!C&&v[w];if(!B){var D=zc(_.type),T=d?Gn.getClass(D.main,D.sub):nn.getClass(D.sub);B=new T,B.init(A,y),v[w]=B,p.push(B),m.add(B.group)}_.__viewId=B.__id=w,B.__alive=!0,B.__model=_,B.group.__ecComponentInfo={mainType:_.mainType,index:_.componentIndex},!d&&g.prepareView(B,_,A,y)}for(var x=0;x<p.length;){var S=p[x];S.__alive?x++:(!d&&S.renderTask.dispose(),m.remove(S.group),S.dispose(A,y),p.splice(x,1),v[S.__id]===S&&delete v[S.__id],S.__id=S.group.__ecComponentInfo=null)}},yS=function(h,d,A,g,p){var v=h._model;if(v.setUpdatePayload(A),!g){X([].concat(h._componentsViews).concat(h._chartsViews),S);return}var m={};m[g+"Id"]=A[g+"Id"],m[g+"Index"]=A[g+"Index"],m[g+"Name"]=A[g+"Name"];var y={mainType:g,query:m};p&&(y.subType=p);var x=A.excludeSeriesId,b;x!=null&&(b=bt(),X(Xr(x),function(_){var C=Fa(_,null);C!=null&&b.set(C,!0)})),v&&v.eachComponent(y,function(_){var C=b&&b.get(_.id)!=null;if(!C)if(lH(A))if(_ instanceof Sn)A.type===Jg&&!A.notBlur&&!_.get(["emphasis","disabled"])&&nxe(_,A,h._api);else{var w=qk(_.mainType,_.componentIndex,A.name,h._api),B=w.focusSelf,D=w.dispatchers;A.type===Jg&&B&&!A.notBlur&&Z3(_.mainType,_.componentIndex,h._api),D&&X(D,function(T){A.type===Jg?Ch(T):Bh(T)})}else eR(A)&&_ instanceof Sn&&(sxe(_,A,h._api),sH(_),Fo(h))},h),v&&v.eachComponent(y,function(_){var C=b&&b.get(_.id)!=null;C||S(h[g==="series"?"_chartsMap":"_componentsMap"][_.__viewId])},h);function S(_){_&&_.__alive&&_[d]&&_[d](_.__model,v,h._api,A)}},wd={prepareAndUpdate:function(h){Dm(this),wd.update.call(this,h,{optionChanged:h.newOption!=null})},update:function(h,d){var A=this._model,g=this._api,p=this._zr,v=this._coordSysMgr,m=this._scheduler;if(A){A.setUpdatePayload(h),m.restoreData(A,h),m.performSeriesTasks(A),v.create(A,g),m.performDataProcessorTasks(A,h),HE(this,A),v.update(A,g),t(A),m.performVisualTasks(A,h),zE(this,A,g,h,d);var y=A.get("backgroundColor")||"transparent",x=A.get("darkMode");p.setBackgroundColor(y),x!=null&&x!=="auto"&&p.setDarkMode(x),jl.trigger("afterupdate",A,g)}},updateTransform:function(h){var d=this,A=this._model,g=this._api;if(A){A.setUpdatePayload(h);var p=[];A.eachComponent(function(m,y){if(m!=="series"){var x=d.getViewOfComponentModel(y);if(x&&x.__alive)if(x.updateTransform){var b=x.updateTransform(y,A,g,h);b&&b.update&&p.push(x)}else p.push(x)}});var v=bt();A.eachSeries(function(m){var y=d._chartsMap[m.__viewId];if(y.updateTransform){var x=y.updateTransform(m,A,g,h);x&&x.update&&v.set(m.uid,1)}else v.set(m.uid,1)}),t(A),this._scheduler.performVisualTasks(A,h,{setDirty:!0,dirtyMap:v}),xS(this,A,g,h,{},v),jl.trigger("afterupdate",A,g)}},updateView:function(h){var d=this._model;d&&(d.setUpdatePayload(h),nn.markUpdateMethod(h,"updateView"),t(d),this._scheduler.performVisualTasks(d,h,{setDirty:!0}),zE(this,d,this._api,h,{}),jl.trigger("afterupdate",d,this._api))},updateVisual:function(h){var d=this,A=this._model;A&&(A.setUpdatePayload(h),A.eachSeries(function(g){g.getData().clearAllVisual()}),nn.markUpdateMethod(h,"updateVisual"),t(A),this._scheduler.performVisualTasks(A,h,{visualType:"visual",setDirty:!0}),A.eachComponent(function(g,p){if(g!=="series"){var v=d.getViewOfComponentModel(p);v&&v.__alive&&v.updateVisual(p,A,d._api,h)}}),A.eachSeries(function(g){var p=d._chartsMap[g.__viewId];p.updateVisual(g,A,d._api,h)}),jl.trigger("afterupdate",A,this._api))},updateLayout:function(h){wd.update.call(this,h)}},UE=function(h,d,A,g){if(h._disposed){h.id;return}for(var p=h._model,v=h._coordSysMgr.getCoordinateSystems(),m,y=N1(p,A),x=0;x<v.length;x++){var b=v[x];if(b[d]&&(m=b[d](p,y,g))!=null)return m}},HE=function(h,d){var A=h._chartsMap,g=h._scheduler;d.eachSeries(function(p){g.updateStreamModes(p,A[p.__viewId])})},QE=function(h,d){var A=this,g=this.getModel(),p=h.type,v=h.escapeConnect,m=DC[p],y=m.actionInfo,x=(y.update||"update").split(":"),b=x.pop(),S=x[0]!=null&&zc(x[0]);this[Ri]=!0;var _=[h],C=!1;h.batch&&(C=!0,_=We(h.batch,function(M){return M=Lt(He({},M),h),M.batch=null,M}));var w=[],B,D=eR(h),T=lH(h);if(T&&Bee(this._api),X(_,function(M){if(B=m.action(M,A._model,A._api),B=B||He({},M),B.type=y.event||B.type,w.push(B),T){var k=Hk(h),O=k.queryOptionMap,Q=k.mainTypeSpecified,H=Q?O.keys()[0]:"series";yS(A,b,M,H),Fo(A)}else D?(yS(A,b,M,"series"),Fo(A)):S&&yS(A,b,M,S.main,S.sub)}),b!=="none"&&!T&&!D&&!S)try{this[Is]?(Dm(this),wd.update.call(this,h),this[Is]=null):wd[b].call(this,h)}catch(M){throw this[Ri]=!1,M}if(C?B={type:y.event||p,escapeConnect:v,batch:w}:B=w[0],this[Ri]=!1,!d){var E=this._messageCenter;if(E.trigger(B.type,B),D){var R={type:"selectchanged",escapeConnect:v,selected:oxe(g),isFromClick:h.isFromClick||!1,fromAction:h.type,fromActionPayload:h};E.trigger(R.type,R)}}},nx=function(h){for(var d=this._pendingActions;d.length;){var A=d.shift();QE.call(this,A,h)}},ax=function(h){!h&&this.trigger("updated")},wQ=function(h,d){h.on("rendered",function(A){d.trigger("rendered",A),h.animation.isFinished()&&!d[Is]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},SQ=function(h,d){h.on("mouseover",function(A){var g=A.target,p=Dg(g,_b);p&&(axe(p,A,d._api),Fo(d))}).on("mouseout",function(A){var g=A.target,p=Dg(g,_b);p&&(ixe(p,A,d._api),Fo(d))}).on("click",function(A){var g=A.target,p=Dg(g,function(y){return Qt(y).dataIndex!=null},!0);if(p){var v=p.selected?"unselect":"select",m=Qt(p);d._api.dispatchAction({type:v,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function t(h){h.clearColorPalette(),h.eachSeries(function(d){d.clearColorPalette()})}function n(h){var d=[],A=[],g=!1;if(h.eachComponent(function(y,x){var b=x.get("zlevel")||0,S=x.get("z")||0,_=x.getZLevelKey();g=g||!!_,(y==="series"?A:d).push({zlevel:b,z:S,idx:x.componentIndex,type:y,key:_})}),g){var p=d.concat(A),v,m;q_(p,function(y,x){return y.zlevel===x.zlevel?y.z-x.z:y.zlevel-x.zlevel}),X(p,function(y){var x=h.getComponent(y.type,y.idx),b=y.zlevel,S=y.key;v!=null&&(b=Math.max(v,b)),S?(b===v&&S!==m&&b++,m=S):m&&(b===v&&b++,m=""),v=b,x.setZLevel(b)})}}zE=function(h,d,A,g,p){n(d),_Q(h,d,A,g,p),X(h._chartsViews,function(v){v.__alive=!1}),xS(h,d,A,g,p),X(h._chartsViews,function(v){v.__alive||v.remove(d,A)})},_Q=function(h,d,A,g,p,v){X(v||h._componentsViews,function(m){var y=m.__model;c(y,m),m.render(y,d,A,g),o(y,m),u(y,m)})},xS=function(h,d,A,g,p,v){var m=h._scheduler;p=He(p||{},{updatedSeries:d.getSeries()}),jl.trigger("series:beforeupdate",d,A,p);var y=!1;d.eachSeries(function(x){var b=h._chartsMap[x.__viewId];b.__alive=!0;var S=b.renderTask;m.updatePayload(S,g),c(x,b),v&&v.get(x.uid)&&S.dirty(),S.perform(m.getPerformArgs(S))&&(y=!0),b.group.silent=!!x.get("silent"),s(x,b),sH(x)}),m.unfinished=y||m.unfinished,jl.trigger("series:layoutlabels",d,A,p),jl.trigger("series:transition",d,A,p),d.eachSeries(function(x){var b=h._chartsMap[x.__viewId];o(x,b),u(x,b)}),i(h,d),jl.trigger("series:afterupdate",d,A,p)},Fo=function(h){h[FE]=!0,h.getZr().wakeUp()},BQ=function(h){h[FE]&&(h.getZr().storage.traverse(function(d){Hv(d)||a(d)}),h[FE]=!1)};function a(h){for(var d=[],A=h.currentStates,g=0;g<A.length;g++){var p=A[g];p==="emphasis"||p==="blur"||p==="select"||d.push(p)}h.selected&&h.states.select&&d.push("select"),h.hoverState===EN&&h.states.emphasis?d.push("emphasis"):h.hoverState===Bw&&h.states.blur&&d.push("blur"),h.useStates(d)}function i(h,d){var A=h._zr,g=A.storage,p=0;g.traverse(function(v){v.isGroup||p++}),p>d.get("hoverLayerThreshold")&&!fr.node&&!fr.worker&&d.eachSeries(function(v){if(!v.preventUsingHoverLayer){var m=h._chartsMap[v.__viewId];m.__alive&&m.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function s(h,d){var A=h.get("blendMode")||null;d.eachRendered(function(g){g.isGroup||(g.style.blend=A)})}function o(h,d){if(!h.preventAutoZ){var A=h.get("z")||0,g=h.get("zlevel")||0;d.eachRendered(function(p){return l(p,A,g,-1/0),!0})}}function l(h,d,A,g){var p=h.getTextContent(),v=h.getTextGuideLine(),m=h.isGroup;if(m)for(var y=h.childrenRef(),x=0;x<y.length;x++)g=Math.max(l(y[x],d,A,g),g);else h.z=d,h.zlevel=A,g=Math.max(h.z2,g);if(p&&(p.z=d,p.zlevel=A,isFinite(g)&&(p.z2=g+2)),v){var b=h.textGuideLineConfig;v.z=d,v.zlevel=A,isFinite(g)&&(v.z2=g+(b&&b.showAbove?1:-1))}return g}function c(h,d){d.eachRendered(function(A){if(!Hv(A)){var g=A.getTextContent(),p=A.getTextGuideLine();A.stateTransition&&(A.stateTransition=null),g&&g.stateTransition&&(g.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),A.hasState()?(A.prevStates=A.currentStates,A.clearStates()):A.prevStates&&(A.prevStates=null)}})}function u(h,d){var A=h.getModel("stateAnimation"),g=h.isAnimationEnabled(),p=A.get("duration"),v=p>0?{duration:p,delay:A.get("delay"),easing:A.get("easing")}:null;d.eachRendered(function(m){if(m.states&&m.states.emphasis){if(Hv(m))return;if(m instanceof hr&&dxe(m),m.__dirty){var y=m.prevStates;y&&m.useStates(y)}if(g){m.stateTransition=v;var x=m.getTextContent(),b=m.getTextGuideLine();x&&(x.stateTransition=v),b&&(b.stateTransition=v)}m.__dirty&&a(m)}})}CQ=function(h){return new(function(d){Pe(A,d);function A(){return d!==null&&d.apply(this,arguments)||this}return A.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},A.prototype.getComponentByElement=function(g){for(;g;){var p=g.__ecComponentInfo;if(p!=null)return h._model.getComponent(p.mainType,p.index);g=g.parent}},A.prototype.enterEmphasis=function(g,p){Ch(g,p),Fo(h)},A.prototype.leaveEmphasis=function(g,p){Bh(g,p),Fo(h)},A.prototype.enterBlur=function(g){wee(g),Fo(h)},A.prototype.leaveBlur=function(g){Wk(g),Fo(h)},A.prototype.enterSelect=function(g){See(g),Fo(h)},A.prototype.leaveSelect=function(g){_ee(g),Fo(h)},A.prototype.getModel=function(){return h.getModel()},A.prototype.getViewOfComponentModel=function(g){return h.getViewOfComponentModel(g)},A.prototype.getViewOfSeriesModel=function(g){return h.getViewOfSeriesModel(g)},A}(pte))(h)},hre=function(h){function d(A,g){for(var p=0;p<A.length;p++){var v=A[p];v[jE]=g}}X(R1,function(A,g){h._messageCenter.on(g,function(p){if(NQ[h.group]&&h[jE]!==bQ){if(p&&p.escapeConnect)return;var v=h.makeActionFromEvent(p),m=[];X(L1,function(y){y!==h&&y.group===h.group&&m.push(y)}),d(m,bQ),X(m,function(y){y[jE]!==jwe&&y.dispatchAction(v)}),d(m,Owe)}})})}}(),e}(vl),yF=dre.prototype;yF.on=sre("on");yF.off=sre("off");yF.one=function(r,e,t){var n=this;function a(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];e&&e.apply&&e.apply(this,i),n.off(r,a)}this.on.call(this,r,a,t)};var Uwe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var DC={},R1={},pR=[],mR=[],MC=[],Are={},vR={},L1={},NQ={},Hwe=+new Date-0,xF="_echarts_instance_";function dy(r,e,t){{var n=Qwe(r);if(n)return n}var a=new dre(r,e,t);return a.id="ec_"+Hwe++,L1[a.id]=a,iee(r,xF,a.id),hre(a),jl.trigger("afterinit",a),a}function Qwe(r){return L1[eye(r,xF)]}function fre(r,e){Are[r]=e}function gre(r){rr(mR,r)<0&&mR.push(r)}function pre(r,e){wF(pR,r,e,Ewe)}function zwe(r){bF("afterinit",r)}function Gwe(r){bF("afterupdate",r)}function bF(r,e){jl.on(r,e)}function du(r,e,t){It(e)&&(t=e,e="");var n=Pt(r)?r.type:[r,r={event:e}][0];r.event=(r.event||n).toLowerCase(),e=r.event,!R1[e]&&(gs(xQ.test(n)&&xQ.test(e)),DC[n]||(DC[n]={action:t,actionInfo:r}),R1[e]=n)}function Vwe(r,e){Mw.register(r,e)}function $we(r,e){wF(MC,r,e,nre,"layout")}function Up(r,e){wF(MC,r,e,are,"visual")}var TQ=[];function wF(r,e,t,n,a){if((It(e)||Pt(e))&&(t=e,e=n),!(rr(TQ,t)>=0)){TQ.push(t);var i=zte.wrapStageHandler(t,a);i.__prio=e,i.__raw=t,r.push(i)}}function mre(r,e){vR[r]=e}function Kwe(r,e,t){var n=Cwe("registerMap");n&&n(r,e,t)}var Wwe=obe;Up(vF,Rbe);Up($N,Lbe);Up($N,Pbe);Up(vF,Wbe);Up($N,qbe);Up(ire,Swe);gre(vte);pre(Twe,H1e);mre("default",kbe);du({type:Jg,event:Jg,update:Jg},Aa);du({type:e5,event:e5,update:e5},Aa);du({type:T1,event:T1,update:T1},Aa);du({type:t5,event:t5,update:t5},Aa);du({type:I1,event:I1,update:I1},Aa);fre("light",$be);fre("dark",Kte);var IQ=[],qwe={registerPreprocessor:gre,registerProcessor:pre,registerPostInit:zwe,registerPostUpdate:Gwe,registerUpdateLifecycle:bF,registerAction:du,registerCoordinateSystem:Vwe,registerLayout:$we,registerVisual:Up,registerTransform:Wwe,registerLoading:mre,registerMap:Kwe,registerImpl:_we,PRIORITY:Fwe,ComponentModel:gr,ComponentView:Gn,SeriesModel:Sn,ChartView:nn,registerComponentModel:function(r){gr.registerClass(r)},registerComponentView:function(r){Gn.registerClass(r)},registerSeriesModel:function(r){Sn.registerClass(r)},registerChartView:function(r){nn.registerClass(r)},registerSubTypeDefaulter:function(r,e){gr.registerSubTypeDefaulter(r,e)},registerPainter:function(r,e){M0e(r,e)}};function sr(r){if($e(r)){X(r,function(e){sr(e)});return}rr(IQ,r)>=0||(IQ.push(r),It(r)&&(r={install:r}),r.install(qwe))}function ix(r){return r==null?0:r.length||1}function EQ(r){return r}var Nh=function(){function r(e,t,n,a,i,s){this._old=e,this._new=t,this._oldKeyGetter=n||EQ,this._newKeyGetter=a||EQ,this.context=i,this._diffModeMultiple=s==="multiple"}return r.prototype.add=function(e){return this._add=e,this},r.prototype.update=function(e){return this._update=e,this},r.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},r.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},r.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},r.prototype.remove=function(e){return this._remove=e,this},r.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},r.prototype._executeOneToOne=function(){var e=this._old,t=this._new,n={},a=new Array(e.length),i=new Array(t.length);this._initIndexMap(e,null,a,"_oldKeyGetter"),this._initIndexMap(t,n,i,"_newKeyGetter");for(var s=0;s<e.length;s++){var o=a[s],l=n[o],c=ix(l);if(c>1){var u=l.shift();l.length===1&&(n[o]=l[0]),this._update&&this._update(u,s)}else c===1?(n[o]=null,this._update&&this._update(l,s)):this._remove&&this._remove(s)}this._performRestAdd(i,n)},r.prototype._executeMultiple=function(){var e=this._old,t=this._new,n={},a={},i=[],s=[];this._initIndexMap(e,n,i,"_oldKeyGetter"),this._initIndexMap(t,a,s,"_newKeyGetter");for(var o=0;o<i.length;o++){var l=i[o],c=n[l],u=a[l],h=ix(c),d=ix(u);if(h>1&&d===1)this._updateManyToOne&&this._updateManyToOne(u,c),a[l]=null;else if(h===1&&d>1)this._updateOneToMany&&this._updateOneToMany(u,c),a[l]=null;else if(h===1&&d===1)this._update&&this._update(u,c),a[l]=null;else if(h>1&&d>1)this._updateManyToMany&&this._updateManyToMany(u,c),a[l]=null;else if(h>1)for(var A=0;A<h;A++)this._remove&&this._remove(c[A]);else this._remove&&this._remove(c)}this._performRestAdd(s,a)},r.prototype._performRestAdd=function(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=t[a],s=ix(i);if(s>1)for(var o=0;o<s;o++)this._add&&this._add(i[o]);else s===1&&this._add&&this._add(i);t[a]=null}},r.prototype._initIndexMap=function(e,t,n,a){for(var i=this._diffModeMultiple,s=0;s<e.length;s++){var o="_ec_"+this[a](e[s],s);if(i||(n[s]=o),!!t){var l=t[o],c=ix(l);c===0?(t[o]=s,i&&n.push(o)):c===1?t[o]=[l,s]:l.push(s)}}},r}(),Ywe=function(){function r(e,t){this._encode=e,this._schema=t}return r.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},r.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},r}();function Xwe(r,e){var t={},n=t.encode={},a=bt(),i=[],s=[],o={};X(r.dimensions,function(d){var A=r.getDimensionInfo(d),g=A.coordDim;if(g){var p=A.coordDimIndex;GE(n,g)[p]=d,A.isExtraCoord||(a.set(g,1),Zwe(A.type)&&(i[0]=d),GE(o,g)[p]=r.getDimensionIndex(A.name)),A.defaultTooltip&&s.push(d)}cte.each(function(v,m){var y=GE(n,m),x=A.otherDims[m];x!=null&&x!==!1&&(y[x]=A.name)})});var l=[],c={};a.each(function(d,A){var g=n[A];c[A]=g[0],l=l.concat(g)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=We(l,function(d){return r.getDimensionInfo(d).storeDimIndex}),t.encodeFirstDimNotExtra=c;var u=n.label;u&&u.length&&(i=u.slice());var h=n.tooltip;return h&&h.length?s=h.slice():s.length||(s=i.slice()),n.defaultedLabel=i,n.defaultedTooltip=s,t.userOutput=new Ywe(o,e),t}function GE(r,e){return r.hasOwnProperty(e)||(r[e]=[]),r[e]}function RC(r){return r==="category"?"ordinal":r==="time"?"time":"float"}function Zwe(r){return!(r==="ordinal"||r==="time")}var s5=function(){function r(e){this.otherDims={},e!=null&&He(this,e)}return r}(),Jwe=wr(),e2e={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},vre=function(){function r(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return r.prototype.isDimensionOmitted=function(){return this._dimOmitted},r.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=bre(this.source)))},r.prototype.getSourceDimensionIndex=function(e){return $t(this._dimNameMap.get(e),-1)},r.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},r.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=xte(this.source),n=!wre(e),a="",i=[],s=0,o=0;s<e;s++){var l=void 0,c=void 0,u=void 0,h=this.dimensions[o];if(h&&h.storeDimIndex===s)l=t?h.name:null,c=h.type,u=h.ordinalMeta,o++;else{var d=this.getSourceDimension(s);d&&(l=t?d.name:null,c=d.type)}i.push({property:l,type:c,ordinalMeta:u}),t&&l!=null&&(!h||!h.isCalculationCoord)&&(a+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),a+="$",a+=e2e[c]||"f",u&&(a+=u.uid),a+="$"}var A=this.source,g=[A.seriesLayoutBy,A.startIndex,a].join("$$");return{dimensions:i,hash:g}},r.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,n=0;t<this._fullDimCount;t++){var a=void 0,i=this.dimensions[n];if(i&&i.storeDimIndex===t)i.isCalculationCoord||(a=i.name),n++;else{var s=this.getSourceDimension(t);s&&(a=s.name)}e.push(a)}return e},r.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},r}();function yre(r){return r instanceof vre}function xre(r){for(var e=bt(),t=0;t<(r||[]).length;t++){var n=r[t],a=Pt(n)?n.name:n;a!=null&&e.get(a)==null&&e.set(a,t)}return e}function bre(r){var e=Jwe(r);return e.dimNameMap||(e.dimNameMap=xre(r.dimensionsDefine))}function wre(r){return r>30}var sx=Pt,Sd=We,t2e=typeof Int32Array>"u"?Array:Int32Array,r2e="e\0\0",DQ=-1,n2e=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],a2e=["_approximateExtent"],MQ,bS,ox,lx,VE,cx,$E,As=function(){function r(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var n,a=!1;yre(e)?(n=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(a=!0,n=e),n=n||["x","y"];for(var i={},s=[],o={},l=!1,c={},u=0;u<n.length;u++){var h=n[u],d=dt(h)?new s5({name:h}):h instanceof s5?h:new s5(h),A=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=A,d.coordDimIndex=0);var g=d.otherDims=d.otherDims||{};s.push(A),i[A]=d,c[A]!=null&&(l=!0),d.createInvertedIndices&&(o[A]=[]),g.itemName===0&&(this._nameDimIdx=u),g.itemId===0&&(this._idDimIdx=u),a&&(d.storeDimIndex=u)}if(this.dimensions=s,this._dimInfos=i,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var p=this._dimIdxToName=bt();X(s,function(v){p.set(i[v].storeDimIndex,v)})}}return r.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var n=this._dimIdxToName.get(t);if(n!=null)return n;var a=this._schema.getSourceDimension(t);if(a)return a.name},r.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var n=this._getDimInfo(e);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},r.prototype._recognizeDimIndex=function(e){if(Br(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},r.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},r.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},r.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(n){return t.hasOwnProperty(n)?t[n]:void 0}:function(n){return t[n]}},r.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},r.prototype.mapDimension=function(e,t){var n=this._dimSummary;if(t==null)return n.encodeFirstDimNotExtra[e];var a=n.encode[e];return a?a[t]:null},r.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,n=t.encode[e];return(n||[]).slice()},r.prototype.getStore=function(){return this._store},r.prototype.initData=function(e,t,n){var a=this,i;if(e instanceof cR&&(i=e),!i){var s=this.dimensions,o=hF(e)||Ki(e)?new bte(e,s.length):e;i=new cR;var l=Sd(s,function(c){return{type:a._dimInfos[c].type,property:c}});i.initData(o,l,n)}this._store=i,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=Xwe(this,this._schema),this.userOutput=this._dimSummary.userOutput},r.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},r.prototype.appendValues=function(e,t){var n=this._store.appendValues(e,t&&t.length),a=n.start,i=n.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=a;o<i;o++){var l=o-a;this._nameList[o]=t[l],s&&$E(this,o)}},r.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,n=0;n<t.length;n++){var a=this._dimInfos[t[n]];a.ordinalMeta&&e.collectOrdinalMeta(a.storeDimIndex,a.ordinalMeta)}},r.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==TA&&!e.fillStorage},r.prototype._doInit=function(e,t){if(!(e>=t)){var n=this._store,a=n.getProvider();this._updateOrdinalMeta();var i=this._nameList,s=this._idList,o=a.getSource().sourceFormat,l=o===yl;if(l&&!a.pure)for(var c=[],u=e;u<t;u++){var h=a.getItem(u,c);if(!this.hasItemOption&&H0e(h)&&(this.hasItemOption=!0),h){var d=h.name;i[u]==null&&d!=null&&(i[u]=Fa(d,null));var A=h.id;s[u]==null&&A!=null&&(s[u]=Fa(A,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)$E(this,u);MQ(this)}},r.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},r.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},r.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},r.prototype.setCalculationInfo=function(e,t){sx(e)?He(this._calculationInfo,e):this._calculationInfo[e]=t},r.prototype.getName=function(e){var t=this.getRawIndex(e),n=this._nameList[t];return n==null&&this._nameDimIdx!=null&&(n=ox(this,this._nameDimIdx,t)),n==null&&(n=""),n},r.prototype._getCategory=function(e,t){var n=this._store.get(e,t),a=this._store.getOrdinalMeta(e);return a?a.categories[n]:n},r.prototype.getId=function(e){return bS(this,this.getRawIndex(e))},r.prototype.count=function(){return this._store.count()},r.prototype.get=function(e,t){var n=this._store,a=this._dimInfos[e];if(a)return n.get(a.storeDimIndex,t)},r.prototype.getByRawIndex=function(e,t){var n=this._store,a=this._dimInfos[e];if(a)return n.getByRawIndex(a.storeDimIndex,t)},r.prototype.getIndices=function(){return this._store.getIndices()},r.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},r.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},r.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},r.prototype.getValues=function(e,t){var n=this,a=this._store;return $e(e)?a.getValues(Sd(e,function(i){return n._getStoreDimIndex(i)}),t):a.getValues(e)},r.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,n=0,a=t.length;n<a;n++)if(isNaN(this._store.get(t[n],e)))return!1;return!0},r.prototype.indexOfName=function(e){for(var t=0,n=this._store.count();t<n;t++)if(this.getName(t)===e)return t;return-1},r.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},r.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},r.prototype.rawIndexOf=function(e,t){var n=e&&this._invertedIndicesMap[e],a=n&&n[t];return a==null||isNaN(a)?DQ:a},r.prototype.indicesOfNearest=function(e,t,n){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,n)},r.prototype.each=function(e,t,n){It(e)&&(n=t,t=e,e=[]);var a=n||this,i=Sd(lx(e),this._getStoreDimIndex,this);this._store.each(i,a?ft(t,a):t)},r.prototype.filterSelf=function(e,t,n){It(e)&&(n=t,t=e,e=[]);var a=n||this,i=Sd(lx(e),this._getStoreDimIndex,this);return this._store=this._store.filter(i,a?ft(t,a):t),this},r.prototype.selectRange=function(e){var t=this,n={},a=pr(e);return X(a,function(i){var s=t._getStoreDimIndex(i);n[s]=e[i]}),this._store=this._store.selectRange(n),this},r.prototype.mapArray=function(e,t,n){It(e)&&(n=t,t=e,e=[]),n=n||this;var a=[];return this.each(e,function(){a.push(t&&t.apply(this,arguments))},n),a},r.prototype.map=function(e,t,n,a){var i=n||a||this,s=Sd(lx(e),this._getStoreDimIndex,this),o=cx(this);return o._store=this._store.map(s,i?ft(t,i):t),o},r.prototype.modify=function(e,t,n,a){var i=n||a||this,s=Sd(lx(e),this._getStoreDimIndex,this);this._store.modify(s,i?ft(t,i):t)},r.prototype.downSample=function(e,t,n,a){var i=cx(this);return i._store=this._store.downSample(this._getStoreDimIndex(e),t,n,a),i},r.prototype.minmaxDownSample=function(e,t){var n=cx(this);return n._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),n},r.prototype.lttbDownSample=function(e,t){var n=cx(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),n},r.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},r.prototype.getItemModel=function(e){var t=this.hostModel,n=this.getRawDataItem(e);return new Qr(n,t,t&&t.ecModel)},r.prototype.diff=function(e){var t=this;return new Nh(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(n){return bS(e,n)},function(n){return bS(t,n)})},r.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},r.prototype.setVisual=function(e,t){this._visual=this._visual||{},sx(e)?He(this._visual,e):this._visual[e]=t},r.prototype.getItemVisual=function(e,t){var n=this._itemVisuals[e],a=n&&n[t];return a??this.getVisual(t)},r.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},r.prototype.ensureUniqueItemVisual=function(e,t){var n=this._itemVisuals,a=n[e];a||(a=n[e]={});var i=a[t];return i==null&&(i=this.getVisual(t),$e(i)?i=i.slice():sx(i)&&(i=He({},i)),a[t]=i),i},r.prototype.setItemVisual=function(e,t,n){var a=this._itemVisuals[e]||{};this._itemVisuals[e]=a,sx(t)?He(a,t):a[t]=n},r.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},r.prototype.setLayout=function(e,t){sx(e)?He(this._layout,e):this._layout[e]=t},r.prototype.getLayout=function(e){return this._layout[e]},r.prototype.getItemLayout=function(e){return this._itemLayouts[e]},r.prototype.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?He(this._itemLayouts[e]||{},t):t},r.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},r.prototype.setItemGraphicEl=function(e,t){var n=this.hostModel&&this.hostModel.seriesIndex;Y3(n,this.dataType,e,t),this._graphicEls[e]=t},r.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},r.prototype.eachItemGraphicEl=function(e,t){X(this._graphicEls,function(n,a){n&&e&&e.call(t,n,a)})},r.prototype.cloneShallow=function(e){return e||(e=new r(this._schema?this._schema:Sd(this.dimensions,this._getDimInfo,this),this.hostModel)),VE(e,this),e._store=this._store,e},r.prototype.wrapMethod=function(e,t){var n=this[e];It(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var a=n.apply(this,arguments);return t.apply(this,[a].concat(Dk(arguments)))})},r.internalField=function(){MQ=function(e){var t=e._invertedIndicesMap;X(t,function(n,a){var i=e._dimInfos[a],s=i.ordinalMeta,o=e._store;if(s){n=t[a]=new t2e(s.categories.length);for(var l=0;l<n.length;l++)n[l]=DQ;for(var l=0;l<o.count();l++)n[o.get(i.storeDimIndex,l)]=l}})},ox=function(e,t,n){return Fa(e._getCategory(t,n),null)},bS=function(e,t){var n=e._idList[t];return n==null&&e._idDimIdx!=null&&(n=ox(e,e._idDimIdx,t)),n==null&&(n=r2e+t),n},lx=function(e){return $e(e)||(e=e!=null?[e]:[]),e},cx=function(e){var t=new r(e._schema?e._schema:Sd(e.dimensions,e._getDimInfo,e),e.hostModel);return VE(t,e),t},VE=function(e,t){X(n2e.concat(t.__wrappedMethods||[]),function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e.__wrappedMethods=t.__wrappedMethods,X(a2e,function(n){e[n]=Ft(t[n])}),e._calculationInfo=He({},t._calculationInfo)},$E=function(e,t){var n=e._nameList,a=e._idList,i=e._nameDimIdx,s=e._idDimIdx,o=n[t],l=a[t];if(o==null&&i!=null&&(n[t]=o=ox(e,i,t)),l==null&&s!=null&&(a[t]=l=ox(e,s,t)),l==null&&o!=null){var c=e._nameRepeatCount,u=c[o]=(c[o]||0)+1;l=o,u>1&&(l+="__ec__"+u),a[t]=l}}}(),r}();function Lw(r,e){hF(r)||(r=dF(r)),e=e||{};var t=e.coordDimensions||[],n=e.dimensionsDefine||r.dimensionsDefine||[],a=bt(),i=[],s=s2e(r,t,n,e.dimensionsCount),o=e.canOmitUnusedDimensions&&wre(s),l=n===r.dimensionsDefine,c=l?bre(r):xre(n),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(r,s));for(var h=bt(u),d=new Ite(s),A=0;A<d.length;A++)d[A]=-1;function g(B){var D=d[B];if(D<0){var T=n[B],E=Pt(T)?T:{name:T},R=new s5,M=E.name;M!=null&&c.get(M)!=null&&(R.name=R.displayName=M),E.type!=null&&(R.type=E.type),E.displayName!=null&&(R.displayName=E.displayName);var k=i.length;return d[B]=k,R.storeDimIndex=B,i.push(R),R}return i[D]}if(!o)for(var A=0;A<s;A++)g(A);h.each(function(B,D){var T=Xr(B).slice();if(T.length===1&&!dt(T[0])&&T[0]<0){h.set(D,!1);return}var E=h.set(D,[]);X(T,function(R,M){var k=dt(R)?c.get(R):R;k!=null&&k<s&&(E[M]=k,v(g(k),D,M))})});var p=0;X(t,function(B){var D,T,E,R;if(dt(B))D=B,R={};else{R=B,D=R.name;var M=R.ordinalMeta;R.ordinalMeta=null,R=He({},R),R.ordinalMeta=M,T=R.dimsDef,E=R.otherDims,R.name=R.coordDim=R.coordDimIndex=R.dimsDef=R.otherDims=null}var k=h.get(D);if(k!==!1){if(k=Xr(k),!k.length)for(var O=0;O<(T&&T.length||1);O++){for(;p<s&&g(p).coordDim!=null;)p++;p<s&&k.push(p++)}X(k,function(Q,H){var W=g(Q);if(l&&R.type!=null&&(W.type=R.type),v(Lt(W,R),D,H),W.name==null&&T){var te=T[H];!Pt(te)&&(te={name:te}),W.name=W.displayName=te.name,W.defaultTooltip=te.defaultTooltip}E&&Lt(W.otherDims,E)})}});function v(B,D,T){cte.get(D)!=null?B.otherDims[D]=T:(B.coordDim=D,B.coordDimIndex=T,a.set(D,!0))}var m=e.generateCoord,y=e.generateCoordCount,x=y!=null;y=m?y||1:0;var b=m||"value";function S(B){B.name==null&&(B.name=B.coordDim)}if(o)X(i,function(B){S(B)}),i.sort(function(B,D){return B.storeDimIndex-D.storeDimIndex});else for(var _=0;_<s;_++){var C=g(_),w=C.coordDim;w==null&&(C.coordDim=o2e(b,a,x),C.coordDimIndex=0,(!m||y<=0)&&(C.isExtraCoord=!0),y--),S(C),C.type==null&&(Ate(r,_)===yi.Must||C.isExtraCoord&&(C.otherDims.itemName!=null||C.otherDims.seriesName!=null))&&(C.type="ordinal")}return i2e(i),new vre({source:r,dimensions:i,fullDimensionCount:s,dimensionOmitted:o})}function i2e(r){for(var e=bt(),t=0;t<r.length;t++){var n=r[t],a=n.name,i=e.get(a)||0;i>0&&(n.name=a+(i-1)),i++,e.set(a,i)}}function s2e(r,e,t,n){var a=Math.max(r.dimensionsDetectedCount||1,e.length,t.length,n||0);return X(e,function(i){var s;Pt(i)&&(s=i.dimsDef)&&(a=Math.max(a,s.length))}),a}function o2e(r,e,t){if(t||e.hasKey(r)){for(var n=0;e.hasKey(r+n);)n++;r+=n}return e.set(r,!0),r}var l2e=function(){function r(e){this.coordSysDims=[],this.axisMap=bt(),this.categoryAxisMap=bt(),this.coordSysName=e}return r}();function c2e(r){var e=r.get("coordinateSystem"),t=new l2e(e),n=u2e[e];if(n)return n(r,t,t.axisMap,t.categoryAxisMap),t}var u2e={cartesian2d:function(r,e,t,n){var a=r.getReferringComponents("xAxis",Na).models[0],i=r.getReferringComponents("yAxis",Na).models[0];e.coordSysDims=["x","y"],t.set("x",a),t.set("y",i),Mm(a)&&(n.set("x",a),e.firstCategoryDimIndex=0),Mm(i)&&(n.set("y",i),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(r,e,t,n){var a=r.getReferringComponents("singleAxis",Na).models[0];e.coordSysDims=["single"],t.set("single",a),Mm(a)&&(n.set("single",a),e.firstCategoryDimIndex=0)},polar:function(r,e,t,n){var a=r.getReferringComponents("polar",Na).models[0],i=a.findAxisModel("radiusAxis"),s=a.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",i),t.set("angle",s),Mm(i)&&(n.set("radius",i),e.firstCategoryDimIndex=0),Mm(s)&&(n.set("angle",s),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(r,e,t,n){e.coordSysDims=["lng","lat"]},parallel:function(r,e,t,n){var a=r.ecModel,i=a.getComponent("parallel",r.get("parallelIndex")),s=e.coordSysDims=i.dimensions.slice();X(i.parallelAxisIndex,function(o,l){var c=a.getComponent("parallelAxis",o),u=s[l];t.set(u,c),Mm(c)&&(n.set(u,c),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})}};function Mm(r){return r.get("type")==="category"}function h2e(r,e,t){t=t||{};var n=t.byIndex,a=t.stackedCoordDimension,i,s,o;d2e(e)?i=e:(s=e.schema,i=s.dimensions,o=e.store);var l=!!(r&&r.get("stack")),c,u,h,d;if(X(i,function(y,x){dt(y)&&(i[x]=y={name:y}),l&&!y.isExtraCoord&&(!n&&!c&&y.ordinalMeta&&(c=y),!u&&y.type!=="ordinal"&&y.type!=="time"&&(!a||a===y.coordDim)&&(u=y))}),u&&!n&&!c&&(n=!0),u){h="__\0ecstackresult_"+r.id,d="__\0ecstackedover_"+r.id,c&&(c.createInvertedIndices=!0);var A=u.coordDim,g=u.type,p=0;X(i,function(y){y.coordDim===A&&p++});var v={name:h,coordDim:A,coordDimIndex:p,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},m={name:d,coordDim:d,coordDimIndex:p+1,type:g,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};s?(o&&(v.storeDimIndex=o.ensureCalculationDimension(d,g),m.storeDimIndex=o.ensureCalculationDimension(h,g)),s.appendCalculationDimension(v),s.appendCalculationDimension(m)):(i.push(v),i.push(m))}return{stackedDimension:u&&u.name,stackedByDimension:c&&c.name,isStackedByIndex:n,stackedOverDimension:d,stackResultDimension:h}}function d2e(r){return!yre(r.schema)}function GA(r,e){return!!e&&e===r.getCalculationInfo("stackedDimension")}function Sre(r,e){return GA(r,e)?r.getCalculationInfo("stackResultDimension"):e}function A2e(r,e){var t=r.get("coordinateSystem"),n=Mw.get(t),a;return e&&e.coordSysDims&&(a=We(e.coordSysDims,function(i){var s={name:i},o=e.axisMap.get(i);if(o){var l=o.get("type");s.type=RC(l)}return s})),a||(a=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),a}function f2e(r,e,t){var n,a;return t&&X(r,function(i,s){var o=i.coordDim,l=t.categoryAxisMap.get(o);l&&(n==null&&(n=s),i.ordinalMeta=l.getOrdinalMeta(),e&&(i.createInvertedIndices=!0)),i.otherDims.itemName!=null&&(a=!0)}),!a&&n!=null&&(r[n].otherDims.itemName=0),n}function Uh(r,e,t){t=t||{};var n=e.getSourceManager(),a,i=!1;r?(i=!0,a=dF(r)):(a=n.getSource(),i=a.sourceFormat===yl);var s=c2e(e),o=A2e(e,s),l=t.useEncodeDefaulter,c=It(l)?l:l?Wt(dte,o,e):null,u={coordDimensions:o,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!i},h=Lw(a,u),d=f2e(h.dimensions,t.createInvertedIndices,s),A=i?null:n.getSharedDataStore(h),g=h2e(e,{schema:h,store:A}),p=new As(h,e);p.setCalculationInfo(g);var v=d!=null&&g2e(a)?function(m,y,x,b){return b===d?x:this.defaultDimValueGetter(m,y,x,b)}:null;return p.hasItemOption=!1,p.initData(i?a:A,null,v),p}function g2e(r){if(r.sourceFormat===yl){var e=p2e(r.data||[]);return!$e(ty(e))}}function p2e(r){for(var e=0;e<r.length&&r[e]==null;)e++;return r[e]}var Au=function(){function r(e){this._setting=e||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(e){return this._setting[e]},r.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},r.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},r.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(e){this._isBlank=e},r}();BN(Au);var m2e=0,yR=function(){function r(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++m2e}return r.createByAxisModel=function(e){var t=e.option,n=t.data,a=n&&We(n,v2e);return new r({categories:a,needCollect:!a,deduplication:t.dedplication!==!1})},r.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},r.prototype.parseAndCollect=function(e){var t,n=this._needCollect;if(!dt(e)&&!n)return e;if(n&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var a=this._getOrCreateMap();return t=a.get(e),t==null&&(n?(t=this.categories.length,this.categories[t]=e,a.set(e,t)):t=NaN),t},r.prototype._getOrCreateMap=function(){return this._map||(this._map=bt(this.categories))},r}();function v2e(r){return Pt(r)&&r.value!=null?r.value:r+""}function xR(r){return r.type==="interval"||r.type==="log"}function y2e(r,e,t,n){var a={},i=r[1]-r[0],s=a.interval=XJ(i/e);t!=null&&s<t&&(s=a.interval=t),n!=null&&s>n&&(s=a.interval=n);var o=a.intervalPrecision=_re(s),l=a.niceTickExtent=[aa(Math.ceil(r[0]/s)*s,o),aa(Math.floor(r[1]/s)*s,o)];return x2e(l,r),a}function KE(r){var e=Math.pow(10,Ok(r)),t=r/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,aa(t*e)}function _re(r){return Qc(r)+2}function RQ(r,e,t){r[e]=Math.max(Math.min(r[e],t[1]),t[0])}function x2e(r,e){!isFinite(r[0])&&(r[0]=e[0]),!isFinite(r[1])&&(r[1]=e[1]),RQ(r,0,e),RQ(r,1,e),r[0]>r[1]&&(r[0]=r[1])}function KN(r,e){return r>=e[0]&&r<=e[1]}function WN(r,e){return e[1]===e[0]?.5:(r-e[0])/(e[1]-e[0])}function qN(r,e){return r*(e[1]-e[0])+e[0]}var YN=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;n.type="ordinal";var a=n.getSetting("ordinalMeta");return a||(a=new yR({})),$e(a)&&(a=new yR({categories:We(a,function(i){return Pt(i)?i.value:i})})),n._ordinalMeta=a,n._extent=n.getSetting("extent")||[0,a.categories.length-1],n}return e.prototype.parse=function(t){return t==null?NaN:dt(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),KN(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),WN(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(qN(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],n=this._extent,a=n[0];a<=n[1];)t.push({value:a}),a++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=t.ordinalNumbers,a=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],s=0,o=this._ordinalMeta.categories.length,l=Math.min(o,n.length);s<l;++s){var c=n[s];a[s]=c,i[c]=s}for(var u=0;s<o;++s){for(;i[u]!=null;)u++;a.push(u),i[u]=s}},e.prototype._getTickNumber=function(t){var n=this._ticksByOrdinalNumber;return n&&t>=0&&t<n.length?n[t]:t},e.prototype.getRawOrdinalNumber=function(t){var n=this._ordinalNumbersByTick;return n&&t>=0&&t<n.length?n[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var n=this.getRawOrdinalNumber(t.value),a=this._ordinalMeta.categories[n];return a==null?"":a+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,n){this.unionExtent(t.getApproximateExtent(n))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(Au);Au.registerClass(YN);var Wf=aa,Th=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return KN(t,this._extent)},e.prototype.normalize=function(t){return WN(t,this._extent)},e.prototype.scale=function(t){return qN(t,this._extent)},e.prototype.setExtent=function(t,n){var a=this._extent;isNaN(t)||(a[0]=parseFloat(t)),isNaN(n)||(a[1]=parseFloat(n))},e.prototype.unionExtent=function(t){var n=this._extent;t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1]),this.setExtent(n[0],n[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=_re(t)},e.prototype.getTicks=function(t){var n=this._interval,a=this._extent,i=this._niceExtent,s=this._intervalPrecision,o=[];if(!n)return o;var l=1e4;a[0]<i[0]&&(t?o.push({value:Wf(i[0]-n,s)}):o.push({value:a[0]}));for(var c=i[0];c<=i[1]&&(o.push({value:c}),c=Wf(c+n,s),c!==o[o.length-1].value);)if(o.length>l)return[];var u=o.length?o[o.length-1].value:i[1];return a[1]>u&&(t?o.push({value:Wf(u+n,s)}):o.push({value:a[1]})),o},e.prototype.getMinorTicks=function(t){for(var n=this.getTicks(!0),a=[],i=this.getExtent(),s=1;s<n.length;s++){for(var o=n[s],l=n[s-1],c=0,u=[],h=o.value-l.value,d=h/t;c<t-1;){var A=Wf(l.value+(c+1)*d);A>i[0]&&A<i[1]&&u.push(A),c++}a.push(u)}return a},e.prototype.getLabel=function(t,n){if(t==null)return"";var a=n&&n.precision;a==null?a=Qc(t.value)||0:a==="auto"&&(a=this._intervalPrecision);var i=Wf(t.value,a,!0);return nte(i)},e.prototype.calcNiceTicks=function(t,n,a){t=t||5;var i=this._extent,s=i[1]-i[0];if(isFinite(s)){s<0&&(s=-s,i.reverse());var o=y2e(i,t,n,a);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var a=Math.abs(n[0]);t.fixMax||(n[1]+=a/2),n[0]-=a/2}else n[1]=1;var i=n[1]-n[0];isFinite(i)||(n[0]=0,n[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var s=this._interval;t.fixMin||(n[0]=Wf(Math.floor(n[0]/s)*s)),t.fixMax||(n[1]=Wf(Math.ceil(n[1]/s)*s))},e.prototype.setNiceExtent=function(t,n){this._niceExtent=[t,n]},e.type="interval",e}(Au);Au.registerClass(Th);var Cre=typeof Float32Array<"u",b2e=Cre?Float32Array:Array;function Gc(r){return $e(r)?Cre?new Float32Array(r):r:new b2e(r)}var bR="__ec_stack_";function Bre(r){return r.get("stack")||bR+r.seriesIndex}function SF(r){return r.dim+r.index}function w2e(r){var e=[],t=r.axis,n="axis0";if(t.type==="category"){for(var a=t.getBandWidth(),i=0;i<r.count;i++)e.push(Lt({bandWidth:a,axisKey:n,stackId:bR+i},r));for(var s=Ire(e),o=[],i=0;i<r.count;i++){var l=s[n][bR+i];l.offsetCenter=l.offset+l.width/2,o.push(l)}return o}}function Nre(r,e){var t=[];return e.eachSeriesByType(r,function(n){Mre(n)&&t.push(n)}),t}function S2e(r){var e={};X(r,function(l){var c=l.coordinateSystem,u=c.getBaseAxis();if(!(u.type!=="time"&&u.type!=="value"))for(var h=l.getData(),d=u.dim+"_"+u.index,A=h.getDimensionIndex(h.mapDimension(u.dim)),g=h.getStore(),p=0,v=g.count();p<v;++p){var m=g.get(A,p);e[d]?e[d].push(m):e[d]=[m]}});var t={};for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];if(a){a.sort(function(l,c){return l-c});for(var i=null,s=1;s<a.length;++s){var o=a[s]-a[s-1];o>0&&(i=i===null?o:Math.min(i,o))}t[n]=i}}return t}function Tre(r){var e=S2e(r),t=[];return X(r,function(n){var a=n.coordinateSystem,i=a.getBaseAxis(),s=i.getExtent(),o;if(i.type==="category")o=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var l=i.dim+"_"+i.index,c=e[l],u=Math.abs(s[1]-s[0]),h=i.scale.getExtent(),d=Math.abs(h[1]-h[0]);o=c?u/d*c:u}else{var A=n.getData();o=Math.abs(s[1]-s[0])/A.count()}var g=ot(n.get("barWidth"),o),p=ot(n.get("barMaxWidth"),o),v=ot(n.get("barMinWidth")||(Rre(n)?.5:1),o),m=n.get("barGap"),y=n.get("barCategoryGap");t.push({bandWidth:o,barWidth:g,barMaxWidth:p,barMinWidth:v,barGap:m,barCategoryGap:y,axisKey:SF(i),stackId:Bre(n)})}),Ire(t)}function Ire(r){var e={};X(r,function(n,a){var i=n.axisKey,s=n.bandWidth,o=e[i]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=o.stacks;e[i]=o;var c=n.stackId;l[c]||o.autoWidthCount++,l[c]=l[c]||{width:0,maxWidth:0};var u=n.barWidth;u&&!l[c].width&&(l[c].width=u,u=Math.min(o.remainedWidth,u),o.remainedWidth-=u);var h=n.barMaxWidth;h&&(l[c].maxWidth=h);var d=n.barMinWidth;d&&(l[c].minWidth=d);var A=n.barGap;A!=null&&(o.gap=A);var g=n.barCategoryGap;g!=null&&(o.categoryGap=g)});var t={};return X(e,function(n,a){t[a]={};var i=n.stacks,s=n.bandWidth,o=n.categoryGap;if(o==null){var l=pr(i).length;o=Math.max(35-l*4,15)+"%"}var c=ot(o,s),u=ot(n.gap,1),h=n.remainedWidth,d=n.autoWidthCount,A=(h-c)/(d+(d-1)*u);A=Math.max(A,0),X(i,function(m){var y=m.maxWidth,x=m.minWidth;if(m.width){var b=m.width;y&&(b=Math.min(b,y)),x&&(b=Math.max(b,x)),m.width=b,h-=b+u*b,d--}else{var b=A;y&&y<b&&(b=Math.min(y,h)),x&&x>b&&(b=x),b!==A&&(m.width=b,h-=b+u*b,d--)}}),A=(h-c)/(d+(d-1)*u),A=Math.max(A,0);var g=0,p;X(i,function(m,y){m.width||(m.width=A),p=m,g+=m.width*(1+u)}),p&&(g-=p.width*u);var v=-g/2;X(i,function(m,y){t[a][y]=t[a][y]||{bandWidth:s,offset:v,width:m.width},v+=m.width*(1+u)})}),t}function _2e(r,e,t){if(r&&e){var n=r[SF(e)];return n}}function Ere(r,e){var t=Nre(r,e),n=Tre(t);X(t,function(a){var i=a.getData(),s=a.coordinateSystem,o=s.getBaseAxis(),l=Bre(a),c=n[SF(o)][l],u=c.offset,h=c.width;i.setLayout({bandWidth:c.bandWidth,offset:u,size:h})})}function Dre(r){return{seriesType:r,plan:cy(),reset:function(e){if(Mre(e)){var t=e.getData(),n=e.coordinateSystem,a=n.getBaseAxis(),i=n.getOtherAxis(a),s=t.getDimensionIndex(t.mapDimension(i.dim)),o=t.getDimensionIndex(t.mapDimension(a.dim)),l=e.get("showBackground",!0),c=t.mapDimension(i.dim),u=t.getCalculationInfo("stackResultDimension"),h=GA(t,c)&&!!t.getCalculationInfo("stackedOnSeries"),d=i.isHorizontal(),A=C2e(a,i),g=Rre(e),p=e.get("barMinHeight")||0,v=u&&t.getDimensionIndex(u),m=t.getLayout("size"),y=t.getLayout("offset");return{progress:function(x,b){for(var S=x.count,_=g&&Gc(S*3),C=g&&l&&Gc(S*3),w=g&&Gc(S),B=n.master.getRect(),D=d?B.width:B.height,T,E=b.getStore(),R=0;(T=x.next())!=null;){var M=E.get(h?v:s,T),k=E.get(o,T),O=A,Q=void 0;h&&(Q=+M-E.get(s,T));var H=void 0,W=void 0,te=void 0,ee=void 0;if(d){var j=n.dataToPoint([M,k]);if(h){var G=n.dataToPoint([Q,k]);O=G[0]}H=O,W=j[1]+y,te=j[0]-O,ee=m,Math.abs(te)<p&&(te=(te<0?-1:1)*p)}else{var j=n.dataToPoint([k,M]);if(h){var G=n.dataToPoint([k,Q]);O=G[1]}H=j[0]+y,W=O,te=m,ee=j[1]-O,Math.abs(ee)<p&&(ee=(ee<=0?-1:1)*p)}g?(_[R]=H,_[R+1]=W,_[R+2]=d?te:ee,C&&(C[R]=d?B.x:H,C[R+1]=d?W:B.y,C[R+2]=D),w[T]=T):b.setItemLayout(T,{x:H,y:W,width:te,height:ee}),R+=3}g&&b.setLayout({largePoints:_,largeDataIndices:w,largeBackgroundPoints:C,valueAxisHorizontal:d})}}}}}}function Mre(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function Rre(r){return r.pipelineContext&&r.pipelineContext.large}function C2e(r,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var B2e=function(r,e,t,n){for(;t<n;){var a=t+n>>>1;r[a][1]<e?t=a+1:n=a}return t},_F=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="time",n}return e.prototype.getLabel=function(t){var n=this.getSetting("useUTC");return FN(t.value,SH[o1e(zv(this._minLevelUnit))]||SH.second,n,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,n,a){var i=this.getSetting("useUTC"),s=this.getSetting("locale");return l1e(t,n,a,s,i)},e.prototype.getTicks=function(){var t=this._interval,n=this._extent,a=[];if(!t)return a;a.push({value:n[0],level:0});var i=this.getSetting("useUTC"),s=R2e(this._minLevelUnit,this._approxInterval,i,n);return a=a.concat(s),a.push({value:n[1],level:0}),a},e.prototype.calcNiceExtent=function(t){var n=this._extent;if(n[0]===n[1]&&(n[0]-=nl,n[1]+=nl),n[1]===-1/0&&n[0]===1/0){var a=new Date;n[1]=+new Date(a.getFullYear(),a.getMonth(),a.getDate()),n[0]=n[1]-nl}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,n,a){t=t||10;var i=this._extent,s=i[1]-i[0];this._approxInterval=s/t,n!=null&&this._approxInterval<n&&(this._approxInterval=n),a!=null&&this._approxInterval>a&&(this._approxInterval=a);var o=wS.length,l=Math.min(B2e(wS,this._approxInterval,0,o),o-1);this._interval=wS[l][1],this._minLevelUnit=wS[Math.max(l-1,0)][0]},e.prototype.parse=function(t){return Br(t)?t:+su(t)},e.prototype.contain=function(t){return KN(this.parse(t),this._extent)},e.prototype.normalize=function(t){return WN(this.parse(t),this._extent)},e.prototype.scale=function(t){return qN(t,this._extent)},e.type="time",e}(Th),wS=[["second",nF],["minute",aF],["hour",D1],["quarter-day",D1*6],["half-day",D1*12],["day",nl*1.2],["half-week",nl*3.5],["week",nl*7],["month",nl*31],["quarter",nl*95],["half-year",wH/2],["year",wH]];function N2e(r,e,t,n){var a=su(e),i=su(t),s=function(g){return _H(a,g,n)===_H(i,g,n)},o=function(){return s("year")},l=function(){return o()&&s("month")},c=function(){return l()&&s("day")},u=function(){return c()&&s("hour")},h=function(){return u()&&s("minute")},d=function(){return h()&&s("second")},A=function(){return d()&&s("millisecond")};switch(r){case"year":return o();case"month":return l();case"day":return c();case"hour":return u();case"minute":return h();case"second":return d();case"millisecond":return A()}}function T2e(r,e){return r/=nl,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function I2e(r){var e=30*nl;return r/=e,r>6?6:r>3?3:r>2?2:1}function E2e(r){return r/=D1,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function LQ(r,e){return r/=e?aF:nF,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function D2e(r){return XJ(r)}function M2e(r,e,t){var n=new Date(r);switch(zv(e)){case"year":case"month":n[Xee(t)](0);case"day":n[Zee(t)](1);case"hour":n[Jee(t)](0);case"minute":n[ete(t)](0);case"second":n[tte(t)](0),n[rte(t)](0)}return n.getTime()}function R2e(r,e,t,n){var a=1e4,i=qee,s=0;function o(D,T,E,R,M,k,O){for(var Q=new Date(T),H=T,W=Q[R]();H<E&&H<=n[1];)O.push({value:H}),W+=D,Q[M](W),H=Q.getTime();O.push({value:H,notAdd:!0})}function l(D,T,E){var R=[],M=!T.length;if(!N2e(zv(D),n[0],n[1],t)){M&&(T=[{value:M2e(new Date(n[0]),D,t)},{value:n[1]}]);for(var k=0;k<T.length-1;k++){var O=T[k].value,Q=T[k+1].value;if(O!==Q){var H=void 0,W=void 0,te=void 0,ee=!1;switch(D){case"year":H=Math.max(1,Math.round(e/nl/365)),W=iF(t),te=c1e(t);break;case"half-year":case"quarter":case"month":H=I2e(e),W=Gv(t),te=Xee(t);break;case"week":case"half-week":case"day":H=T2e(e),W=jN(t),te=Zee(t),ee=!0;break;case"half-day":case"quarter-day":case"hour":H=E2e(e),W=Bb(t),te=Jee(t);break;case"minute":H=LQ(e,!0),W=ON(t),te=ete(t);break;case"second":H=LQ(e,!1),W=UN(t),te=tte(t);break;case"millisecond":H=D2e(e),W=HN(t),te=rte(t);break}o(H,O,Q,W,te,ee,R),D==="year"&&E.length>1&&k===0&&E.unshift({value:E[0].value-H})}}for(var k=0;k<R.length;k++)E.push(R[k]);return R}}for(var c=[],u=[],h=0,d=0,A=0;A<i.length&&s++<a;++A){var g=zv(i[A]);if(s1e(i[A])){l(i[A],c[c.length-1]||[],u);var p=i[A+1]?zv(i[A+1]):null;if(g!==p){if(u.length){d=h,u.sort(function(D,T){return D.value-T.value});for(var v=[],m=0;m<u.length;++m){var y=u[m].value;(m===0||u[m-1].value!==y)&&(v.push(u[m]),y>=n[0]&&y<=n[1]&&h++)}var x=(n[1]-n[0])/e;if(h>x*1.5&&d>x/1.5||(c.push(v),h>x||r===i[A]))break}u=[]}}}for(var b=Ur(We(c,function(D){return Ur(D,function(T){return T.value>=n[0]&&T.value<=n[1]&&!T.notAdd})}),function(D){return D.length>0}),S=[],_=b.length-1,A=0;A<b.length;++A)for(var C=b[A],w=0;w<C.length;++w)S.push({value:C[w].value,level:_-A});S.sort(function(D,T){return D.value-T.value});for(var B=[],A=0;A<S.length;++A)(A===0||S[A].value!==S[A-1].value)&&B.push(S[A]);return B}Au.registerClass(_F);var PQ=Au.prototype,P1=Th.prototype,L2e=aa,P2e=Math.floor,k2e=Math.ceil,SS=Math.pow,Dl=Math.log,CF=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Th,t._interval=0,t}return e.prototype.getTicks=function(t){var n=this._originalScale,a=this._extent,i=n.getExtent(),s=P1.getTicks.call(this,t);return We(s,function(o){var l=o.value,c=aa(SS(this.base,l));return c=l===a[0]&&this._fixMin?_S(c,i[0]):c,c=l===a[1]&&this._fixMax?_S(c,i[1]):c,{value:c}},this)},e.prototype.setExtent=function(t,n){var a=Dl(this.base);t=Dl(Math.max(0,t))/a,n=Dl(Math.max(0,n))/a,P1.setExtent.call(this,t,n)},e.prototype.getExtent=function(){var t=this.base,n=PQ.getExtent.call(this);n[0]=SS(t,n[0]),n[1]=SS(t,n[1]);var a=this._originalScale,i=a.getExtent();return this._fixMin&&(n[0]=_S(n[0],i[0])),this._fixMax&&(n[1]=_S(n[1],i[1])),n},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var n=this.base;t[0]=Dl(t[0])/Dl(n),t[1]=Dl(t[1])/Dl(n),PQ.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,n){this.unionExtent(t.getApproximateExtent(n))},e.prototype.calcNiceTicks=function(t){t=t||10;var n=this._extent,a=n[1]-n[0];if(!(a===1/0||a<=0)){var i=U0e(a),s=t/a*i;for(s<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var o=[aa(k2e(n[0]/i)*i),aa(P2e(n[1]/i)*i)];this._interval=i,this._niceExtent=o}},e.prototype.calcNiceExtent=function(t){P1.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=Dl(t)/Dl(this.base),KN(t,this._extent)},e.prototype.normalize=function(t){return t=Dl(t)/Dl(this.base),WN(t,this._extent)},e.prototype.scale=function(t){return t=qN(t,this._extent),SS(this.base,t)},e.type="log",e}(Au),Lre=CF.prototype;Lre.getMinorTicks=P1.getMinorTicks;Lre.getLabel=P1.getLabel;function _S(r,e){return L2e(r,Qc(e))}Au.registerClass(CF);var F2e=function(){function r(e,t,n){this._prepareParams(e,t,n)}return r.prototype._prepareParams=function(e,t,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var a=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=t.get("min",!0);i==null&&(i=t.get("startValue",!0));var s=this._modelMinRaw=i;It(s)?this._modelMinNum=CS(e,s({min:n[0],max:n[1]})):s!=="dataMin"&&(this._modelMinNum=CS(e,s));var o=this._modelMaxRaw=t.get("max",!0);if(It(o)?this._modelMaxNum=CS(e,o({min:n[0],max:n[1]})):o!=="dataMax"&&(this._modelMaxNum=CS(e,o)),a)this._axisDataLen=t.getCategories().length;else{var l=t.get("boundaryGap"),c=$e(l)?l:[l||0,l||0];typeof c[0]=="boolean"||typeof c[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[rc(c[0],1),rc(c[1],1)]}},r.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,n=this._dataMax,a=this._axisDataLen,i=this._boundaryGapInner,s=e?null:n-t||Math.abs(t),o=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,c=o!=null,u=l!=null;o==null&&(o=e?a?0:NaN:t-i[0]*s),l==null&&(l=e?a?a-1:NaN:n+i[1]*s),(o==null||!isFinite(o))&&(o=NaN),(l==null||!isFinite(l))&&(l=NaN);var h=pb(o)||pb(l)||e&&!a;this._needCrossZero&&(o>0&&l>0&&!c&&(o=0),o<0&&l<0&&!u&&(l=0));var d=this._determinedMin,A=this._determinedMax;return d!=null&&(o=d,c=!0),A!=null&&(l=A,u=!0),{min:o,max:l,minFixed:c,maxFixed:u,isBlank:h}},r.prototype.modifyDataMinMax=function(e,t){this[O2e[e]]=t},r.prototype.setDeterminedMinMax=function(e,t){var n=j2e[e];this[n]=t},r.prototype.freeze=function(){this.frozen=!0},r}(),j2e={min:"_determinedMin",max:"_determinedMax"},O2e={min:"_dataMin",max:"_dataMax"};function Pre(r,e,t){var n=r.rawExtentInfo;return n||(n=new F2e(r,e,t),r.rawExtentInfo=n,n)}function CS(r,e){return e==null?null:pb(e)?NaN:r.parse(e)}function kre(r,e){var t=r.type,n=Pre(r,e,r.getExtent()).calculate();r.setBlank(n.isBlank);var a=n.min,i=n.max,s=e.ecModel;if(s&&t==="time"){var o=Nre("bar",s),l=!1;if(X(o,function(h){l=l||h.getBaseAxis()===e.axis}),l){var c=Tre(o),u=U2e(a,i,e,c);a=u.min,i=u.max}}return{extent:[a,i],fixMin:n.minFixed,fixMax:n.maxFixed}}function U2e(r,e,t,n){var a=t.axis.getExtent(),i=Math.abs(a[1]-a[0]),s=_2e(n,t.axis);if(s===void 0)return{min:r,max:e};var o=1/0;X(s,function(A){o=Math.min(A.offset,o)});var l=-1/0;X(s,function(A){l=Math.max(A.offset+A.width,l)}),o=Math.abs(o),l=Math.abs(l);var c=o+l,u=e-r,h=1-(o+l)/i,d=u/h-u;return e+=d*(l/c),r-=d*(o/c),{min:r,max:e}}function N0(r,e){var t=e,n=kre(r,t),a=n.extent,i=t.get("splitNumber");r instanceof CF&&(r.base=t.get("logBase"));var s=r.type,o=t.get("interval"),l=s==="interval"||s==="time";r.setExtent(a[0],a[1]),r.calcNiceExtent({splitNumber:i,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),o!=null&&r.setInterval&&r.setInterval(o)}function XN(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new YN({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new _F({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(Au.getClass(e)||Th)}}function H2e(r){var e=r.scale.getExtent(),t=e[0],n=e[1];return!(t>0&&n>0||t<0&&n<0)}function Ay(r){var e=r.getLabelModel().get("formatter"),t=r.type==="category"?r.scale.getExtent()[0]:null;return r.scale.type==="time"?function(n){return function(a,i){return r.scale.getFormattedLabel(a,i,n)}}(e):dt(e)?function(n){return function(a){var i=r.scale.getLabel(a),s=n.replace("{value}",i??"");return s}}(e):It(e)?function(n){return function(a,i){return t!=null&&(i=a.value-t),n(BF(r,a),i,a.level!=null?{level:a.level}:null)}}(e):function(n){return r.scale.getLabel(n)}}function BF(r,e){return r.type==="category"?r.scale.getLabel(e):e.value}function Q2e(r){var e=r.model,t=r.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var n,a,i=t.getExtent();t instanceof YN?a=t.count():(n=t.getTicks(),a=n.length);var s=r.getLabelModel(),o=Ay(r),l,c=1;a>40&&(c=Math.ceil(a/40));for(var u=0;u<a;u+=c){var h=n?n[u]:{value:i[0]+u},d=o(h,u),A=s.getTextRect(d),g=z2e(A,s.get("rotate")||0);l?l.union(g):l=g}return l}}function z2e(r,e){var t=e*Math.PI/180,n=r.width,a=r.height,i=n*Math.abs(Math.cos(t))+Math.abs(a*Math.sin(t)),s=n*Math.abs(Math.sin(t))+Math.abs(a*Math.cos(t)),o=new Zt(r.x,r.y,i,s);return o}function NF(r){var e=r.get("interval");return e??"auto"}function Fre(r){return r.type==="category"&&NF(r.getLabelModel())===0}function LC(r,e){var t={};return X(r.mapDimensionsAll(e),function(n){t[Sre(r,n)]=!0}),pr(t)}function G2e(r,e,t){e&&X(LC(e,t),function(n){var a=e.getApproximateExtent(n);a[0]<r[0]&&(r[0]=a[0]),a[1]>r[1]&&(r[1]=a[1])})}var Pw=function(){function r(){}return r.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},r.prototype.getCoordSysModel=function(){},r}(),V2e=1e-8;function kQ(r,e){return Math.abs(r-e)<V2e}function fg(r,e,t){var n=0,a=r[0];if(!a)return!1;for(var i=1;i<r.length;i++){var s=r[i];n+=Ku(a[0],a[1],s[0],s[1],e,t),a=s}var o=r[0];return(!kQ(a[0],o[0])||!kQ(a[1],o[1]))&&(n+=Ku(a[0],a[1],o[0],o[1],e,t)),n!==0}var $2e=[];function WE(r,e){for(var t=0;t<r.length;t++)Ci(r[t],r[t],e)}function FQ(r,e,t,n){for(var a=0;a<r.length;a++){var i=r[a];n&&(i=n.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(rA(e,e,i),nA(t,t,i))}}function K2e(r){for(var e=0,t=0,n=0,a=r.length,i=r[a-1][0],s=r[a-1][1],o=0;o<a;o++){var l=r[o][0],c=r[o][1],u=i*c-l*s;e+=u,t+=(i+l)*u,n+=(s+c)*u,i=l,s=c}return e?[t/e/3,n/e/3,e]:[r[0][0]||0,r[0][1]||0]}var jre=function(){function r(e){this.name=e}return r.prototype.setCenter=function(e){this._center=e},r.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},r}(),jQ=function(){function r(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return r}(),OQ=function(){function r(e){this.type="linestring",this.points=e}return r}(),Ore=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.type="geoJSON",i.geometries=n,i._center=a&&[a[0],a[1]],i}return e.prototype.calcCenter=function(){for(var t=this.geometries,n,a=0,i=0;i<t.length;i++){var s=t[i],o=s.exterior,l=o&&o.length;l>a&&(n=s,a=l)}if(n)return K2e(n.exterior);var c=this.getBoundingRect();return[c.x+c.width/2,c.y+c.height/2]},e.prototype.getBoundingRect=function(t){var n=this._rect;if(n&&!t)return n;var a=[1/0,1/0],i=[-1/0,-1/0],s=this.geometries;return X(s,function(o){o.type==="polygon"?FQ(o.exterior,a,i,t):X(o.points,function(l){FQ(l,a,i,t)})}),isFinite(a[0])&&isFinite(a[1])&&isFinite(i[0])&&isFinite(i[1])||(a[0]=a[1]=i[0]=i[1]=0),n=new Zt(a[0],a[1],i[0]-a[0],i[1]-a[1]),t||(this._rect=n),n},e.prototype.contain=function(t){var n=this.getBoundingRect(),a=this.geometries;if(!n.contain(t[0],t[1]))return!1;e:for(var i=0,s=a.length;i<s;i++){var o=a[i];if(o.type==="polygon"){var l=o.exterior,c=o.interiors;if(fg(l,t[0],t[1])){for(var u=0;u<(c?c.length:0);u++)if(fg(c[u],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,n,a,i){var s=this.getBoundingRect(),o=s.width/s.height;a?i||(i=a/o):a=o*i;for(var l=new Zt(t,n,a,i),c=s.calculateTransform(l),u=this.geometries,h=0;h<u.length;h++){var d=u[h];d.type==="polygon"?(WE(d.exterior,c),X(d.interiors,function(A){WE(A,c)})):X(d.points,function(A){WE(A,c)})}s=this._rect,s.copy(l),this._center=[s.x+s.width/2,s.y+s.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var n=new e(t,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},e}(jre),W2e=function(r){Pe(e,r);function e(t,n){var a=r.call(this,t)||this;return a.type="geoSVG",a._elOnlyForCalculate=n,a}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,n=t.getBoundingRect(),a=[n.x+n.width/2,n.y+n.height/2],i=wN($2e),s=t;s&&!s.isGeoSVGGraphicRoot;)dh(i,s.getLocalTransform(),i),s=s.parent;return ey(i,i),Ci(a,a,i),a},e}(jre);function q2e(r){if(!r.UTF8Encoding)return r;var e=r,t=e.UTF8Scale;t==null&&(t=1024);var n=e.features;return X(n,function(a){var i=a.geometry,s=i.encodeOffsets,o=i.coordinates;if(s)switch(i.type){case"LineString":i.coordinates=Ure(o,s,t);break;case"Polygon":qE(o,s,t);break;case"MultiLineString":qE(o,s,t);break;case"MultiPolygon":X(o,function(l,c){return qE(l,s[c],t)})}}),e.UTF8Encoding=!1,e}function qE(r,e,t){for(var n=0;n<r.length;n++)r[n]=Ure(r[n],e[n],t)}function Ure(r,e,t){for(var n=[],a=e[0],i=e[1],s=0;s<r.length;s+=2){var o=r.charCodeAt(s)-64,l=r.charCodeAt(s+1)-64;o=o>>1^-(o&1),l=l>>1^-(l&1),o+=a,l+=i,a=o,i=l,n.push([o/t,l/t])}return n}function Y2e(r,e){return r=q2e(r),We(Ur(r.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var n=t.properties,a=t.geometry,i=[];switch(a.type){case"Polygon":var s=a.coordinates;i.push(new jQ(s[0],s.slice(1)));break;case"MultiPolygon":X(a.coordinates,function(l){l[0]&&i.push(new jQ(l[0],l.slice(1)))});break;case"LineString":i.push(new OQ([a.coordinates]));break;case"MultiLineString":i.push(new OQ(a.coordinates))}var o=new Ore(n[e||"name"],i,n.cp);return o.properties=n,o})}var Mb=wr();function Hre(r,e){var t=We(e,function(n){return r.scale.parse(n)});return r.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function X2e(r){var e=r.getLabelModel().get("customValues");if(e){var t=Ay(r),n=r.scale.getExtent(),a=Hre(r,e),i=Ur(a,function(s){return s>=n[0]&&s<=n[1]});return{labels:We(i,function(s){var o={value:s};return{formattedLabel:t(o),rawLabel:r.scale.getLabel(o),tickValue:s}})}}return r.type==="category"?J2e(r):tSe(r)}function Z2e(r,e){var t=r.getTickModel().get("customValues");if(t){var n=r.scale.getExtent(),a=Hre(r,t);return{ticks:Ur(a,function(i){return i>=n[0]&&i<=n[1]})}}return r.type==="category"?eSe(r,e):{ticks:We(r.scale.getTicks(),function(i){return i.value})}}function J2e(r){var e=r.getLabelModel(),t=Qre(r,e);return!e.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function Qre(r,e){var t=zre(r,"labels"),n=NF(e),a=Gre(t,n);if(a)return a;var i,s;return It(n)?i=Kre(r,n):(s=n==="auto"?rSe(r):n,i=$re(r,s)),Vre(t,n,{labels:i,labelCategoryInterval:s})}function eSe(r,e){var t=zre(r,"ticks"),n=NF(e),a=Gre(t,n);if(a)return a;var i,s;if((!e.get("show")||r.scale.isBlank())&&(i=[]),It(n))i=Kre(r,n,!0);else if(n==="auto"){var o=Qre(r,r.getLabelModel());s=o.labelCategoryInterval,i=We(o.labels,function(l){return l.tickValue})}else s=n,i=$re(r,s,!0);return Vre(t,n,{ticks:i,tickCategoryInterval:s})}function tSe(r){var e=r.scale.getTicks(),t=Ay(r);return{labels:We(e,function(n,a){return{level:n.level,formattedLabel:t(n,a),rawLabel:r.scale.getLabel(n),tickValue:n.value}})}}function zre(r,e){return Mb(r)[e]||(Mb(r)[e]=[])}function Gre(r,e){for(var t=0;t<r.length;t++)if(r[t].key===e)return r[t].value}function Vre(r,e,t){return r.push({key:e,value:t}),t}function rSe(r){var e=Mb(r).autoInterval;return e??(Mb(r).autoInterval=r.calculateCategoryInterval())}function nSe(r){var e=aSe(r),t=Ay(r),n=(e.axisRotate-e.labelRotate)/180*Math.PI,a=r.scale,i=a.getExtent(),s=a.count();if(i[1]-i[0]<1)return 0;var o=1;s>40&&(o=Math.max(1,Math.floor(s/40)));for(var l=i[0],c=r.dataToCoord(l+1)-r.dataToCoord(l),u=Math.abs(c*Math.cos(n)),h=Math.abs(c*Math.sin(n)),d=0,A=0;l<=i[1];l+=o){var g=0,p=0,v=_w(t({value:l}),e.font,"center","top");g=v.width*1.3,p=v.height*1.3,d=Math.max(d,g,7),A=Math.max(A,p,7)}var m=d/u,y=A/h;isNaN(m)&&(m=1/0),isNaN(y)&&(y=1/0);var x=Math.max(0,Math.floor(Math.min(m,y))),b=Mb(r.model),S=r.getExtent(),_=b.lastAutoInterval,C=b.lastTickCount;return _!=null&&C!=null&&Math.abs(_-x)<=1&&Math.abs(C-s)<=1&&_>x&&b.axisExtent0===S[0]&&b.axisExtent1===S[1]?x=_:(b.lastTickCount=s,b.lastAutoInterval=x,b.axisExtent0=S[0],b.axisExtent1=S[1]),x}function aSe(r){var e=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function $re(r,e,t){var n=Ay(r),a=r.scale,i=a.getExtent(),s=r.getLabelModel(),o=[],l=Math.max((e||0)+1,1),c=i[0],u=a.count();c!==0&&l>1&&u/l>2&&(c=Math.round(Math.ceil(c/l)*l));var h=Fre(r),d=s.get("showMinLabel")||h,A=s.get("showMaxLabel")||h;d&&c!==i[0]&&p(i[0]);for(var g=c;g<=i[1];g+=l)p(g);A&&g-l!==i[1]&&p(i[1]);function p(v){var m={value:v};o.push(t?v:{formattedLabel:n(m),rawLabel:a.getLabel(m),tickValue:v})}return o}function Kre(r,e,t){var n=r.scale,a=Ay(r),i=[];return X(n.getTicks(),function(s){var o=n.getLabel(s),l=s.value;e(s.value,o)&&i.push(t?l:{formattedLabel:a(s),rawLabel:o,tickValue:l})}),i}var UQ=[0,1],lc=function(){function r(e,t,n){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=n||[0,0]}return r.prototype.contain=function(e){var t=this._extent,n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]);return e>=n&&e<=a},r.prototype.containData=function(e){return this.scale.contain(e)},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(e){return qJ(e||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(e,t){var n=this._extent;n[0]=e,n[1]=t},r.prototype.dataToCoord=function(e,t){var n=this._extent,a=this.scale;return e=a.normalize(e),this.onBand&&a.type==="ordinal"&&(n=n.slice(),HQ(n,a.count())),Hr(e,UQ,n,t)},r.prototype.coordToData=function(e,t){var n=this._extent,a=this.scale;this.onBand&&a.type==="ordinal"&&(n=n.slice(),HQ(n,a.count()));var i=Hr(e,n,UQ,t);return this.scale.scale(i)},r.prototype.pointToData=function(e,t){},r.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),n=Z2e(this,t),a=n.ticks,i=We(a,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),s=t.get("alignWithLabel");return iSe(this,i,s,e.clamp),i},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var n=this.scale.getMinorTicks(t),a=We(n,function(i){return We(i,function(s){return{coord:this.dataToCoord(s),tickValue:s}},this)},this);return a},r.prototype.getViewLabels=function(){return X2e(this).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);n===0&&(n=1);var a=Math.abs(e[1]-e[0]);return Math.abs(a)/n},r.prototype.calculateCategoryInterval=function(){return nSe(this)},r}();function HQ(r,e){var t=r[1]-r[0],n=e,a=t/n/2;r[0]+=a,r[1]-=a}function iSe(r,e,t,n){var a=e.length;if(!r.onBand||t||!a)return;var i=r.getExtent(),s,o;if(a===1)e[0].coord=i[0],s=e[1]={coord:i[1],tickValue:e[0].tickValue};else{var l=e[a-1].tickValue-e[0].tickValue,c=(e[a-1].coord-e[0].coord)/l;X(e,function(A){A.coord-=c/2});var u=r.scale.getExtent();o=1+u[1]-e[a-1].tickValue,s={coord:e[a-1].coord+c*o,tickValue:u[1]+1},e.push(s)}var h=i[0]>i[1];d(e[0].coord,i[0])&&(n?e[0].coord=i[0]:e.shift()),n&&d(i[0],e[0].coord)&&e.unshift({coord:i[0]}),d(i[1],s.coord)&&(n?s.coord=i[1]:e.pop()),n&&d(s.coord,i[1])&&e.push({coord:i[1]});function d(A,g){return A=aa(A),g=aa(g),h?A>g:A<g}}var ux=Math.PI*2,qf=ou.CMD,sSe=["top","right","bottom","left"];function oSe(r,e,t,n,a){var i=t.width,s=t.height;switch(r){case"top":n.set(t.x+i/2,t.y-e),a.set(0,-1);break;case"bottom":n.set(t.x+i/2,t.y+s+e),a.set(0,1);break;case"left":n.set(t.x-e,t.y+s/2),a.set(-1,0);break;case"right":n.set(t.x+i+e,t.y+s/2),a.set(1,0);break}}function lSe(r,e,t,n,a,i,s,o,l){s-=r,o-=e;var c=Math.sqrt(s*s+o*o);s/=c,o/=c;var u=s*t+r,h=o*t+e;if(Math.abs(n-a)%ux<1e-4)return l[0]=u,l[1]=h,c-t;if(i){var d=n;n=Ao(a),a=Ao(d)}else n=Ao(n),a=Ao(a);n>a&&(a+=ux);var A=Math.atan2(o,s);if(A<0&&(A+=ux),A>=n&&A<=a||A+ux>=n&&A+ux<=a)return l[0]=u,l[1]=h,c-t;var g=t*Math.cos(n)+r,p=t*Math.sin(n)+e,v=t*Math.cos(a)+r,m=t*Math.sin(a)+e,y=(g-s)*(g-s)+(p-o)*(p-o),x=(v-s)*(v-s)+(m-o)*(m-o);return y<x?(l[0]=g,l[1]=p,Math.sqrt(y)):(l[0]=v,l[1]=m,Math.sqrt(x))}function PC(r,e,t,n,a,i,s,o){var l=a-r,c=i-e,u=t-r,h=n-e,d=Math.sqrt(u*u+h*h);u/=d,h/=d;var A=l*u+c*h,g=A/d;o&&(g=Math.min(Math.max(g,0),1)),g*=d;var p=s[0]=r+g*u,v=s[1]=e+g*h;return Math.sqrt((p-a)*(p-a)+(v-i)*(v-i))}function Wre(r,e,t,n,a,i,s){t<0&&(r=r+t,t=-t),n<0&&(e=e+n,n=-n);var o=r+t,l=e+n,c=s[0]=Math.min(Math.max(a,r),o),u=s[1]=Math.min(Math.max(i,e),l);return Math.sqrt((c-a)*(c-a)+(u-i)*(u-i))}var Ul=[];function cSe(r,e,t){var n=Wre(e.x,e.y,e.width,e.height,r.x,r.y,Ul);return t.set(Ul[0],Ul[1]),n}function uSe(r,e,t){for(var n=0,a=0,i=0,s=0,o,l,c=1/0,u=e.data,h=r.x,d=r.y,A=0;A<u.length;){var g=u[A++];A===1&&(n=u[A],a=u[A+1],i=n,s=a);var p=c;switch(g){case qf.M:i=u[A++],s=u[A++],n=i,a=s;break;case qf.L:p=PC(n,a,u[A],u[A+1],h,d,Ul,!0),n=u[A++],a=u[A++];break;case qf.C:p=DJ(n,a,u[A++],u[A++],u[A++],u[A++],u[A],u[A+1],h,d,Ul),n=u[A++],a=u[A++];break;case qf.Q:p=RJ(n,a,u[A++],u[A++],u[A],u[A+1],h,d,Ul),n=u[A++],a=u[A++];break;case qf.A:var v=u[A++],m=u[A++],y=u[A++],x=u[A++],b=u[A++],S=u[A++];A+=1;var _=!!(1-u[A++]);o=Math.cos(b)*y+v,l=Math.sin(b)*x+m,A<=1&&(i=o,s=l);var C=(h-v)*x/y+v;p=lSe(v,m,x,b,b+S,_,C,d,Ul),n=Math.cos(b+S)*y+v,a=Math.sin(b+S)*x+m;break;case qf.R:i=n=u[A++],s=a=u[A++];var w=u[A++],B=u[A++];p=Wre(i,s,w,B,h,d,Ul);break;case qf.Z:p=PC(n,a,i,s,h,d,Ul,!0),n=i,a=s;break}p<c&&(c=p,t.set(Ul[0],Ul[1]))}return c}var Wl=new Xt,vn=new Xt,ca=new Xt,Vc=new Xt,jc=new Xt;function QQ(r,e){if(r){var t=r.getTextGuideLine(),n=r.getTextContent();if(n&&t){var a=r.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],s=a.candidates||sSe,o=n.getBoundingRect().clone();o.applyTransform(n.getComputedTransform());var l=1/0,c=a.anchor,u=r.getComputedTransform(),h=u&&ey([],u),d=e.get("length2")||0;c&&ca.copy(c);for(var A=0;A<s.length;A++){var g=s[A];oSe(g,0,o,Wl,Vc),Xt.scaleAndAdd(vn,Wl,Vc,d),vn.transform(h);var p=r.getBoundingRect(),v=c?c.distance(vn):r instanceof hr?uSe(vn,r.path,ca):cSe(vn,p,ca);v<l&&(l=v,vn.transform(u),ca.transform(u),ca.toArray(i[0]),vn.toArray(i[1]),Wl.toArray(i[2]))}qre(i,e.get("minTurnAngle")),t.setShape({points:i})}}}var kC=[],ss=new Xt;function qre(r,e){if(e<=180&&e>0){e=e/180*Math.PI,Wl.fromArray(r[0]),vn.fromArray(r[1]),ca.fromArray(r[2]),Xt.sub(Vc,Wl,vn),Xt.sub(jc,ca,vn);var t=Vc.len(),n=jc.len();if(!(t<.001||n<.001)){Vc.scale(1/t),jc.scale(1/n);var a=Vc.dot(jc),i=Math.cos(e);if(i<a){var s=PC(vn.x,vn.y,ca.x,ca.y,Wl.x,Wl.y,kC,!1);ss.fromArray(kC),ss.scaleAndAdd(jc,s/Math.tan(Math.PI-e));var o=ca.x!==vn.x?(ss.x-vn.x)/(ca.x-vn.x):(ss.y-vn.y)/(ca.y-vn.y);if(isNaN(o))return;o<0?Xt.copy(ss,vn):o>1&&Xt.copy(ss,ca),ss.toArray(r[1])}}}}function hSe(r,e,t){if(t<=180&&t>0){t=t/180*Math.PI,Wl.fromArray(r[0]),vn.fromArray(r[1]),ca.fromArray(r[2]),Xt.sub(Vc,vn,Wl),Xt.sub(jc,ca,vn);var n=Vc.len(),a=jc.len();if(!(n<.001||a<.001)){Vc.scale(1/n),jc.scale(1/a);var i=Vc.dot(e),s=Math.cos(t);if(i<s){var o=PC(vn.x,vn.y,ca.x,ca.y,Wl.x,Wl.y,kC,!1);ss.fromArray(kC);var l=Math.PI/2,c=Math.acos(jc.dot(e)),u=l+c-t;if(u>=l)Xt.copy(ss,ca);else{ss.scaleAndAdd(jc,o/Math.tan(Math.PI/2-u));var h=ca.x!==vn.x?(ss.x-vn.x)/(ca.x-vn.x):(ss.y-vn.y)/(ca.y-vn.y);if(isNaN(h))return;h<0?Xt.copy(ss,vn):h>1&&Xt.copy(ss,ca)}ss.toArray(r[1])}}}}function YE(r,e,t,n){var a=t==="normal",i=a?r:r.ensureState(t);i.ignore=e;var s=n.get("smooth");s&&s===!0&&(s=.3),i.shape=i.shape||{},s>0&&(i.shape.smooth=s);var o=n.getModel("lineStyle").getLineStyle();a?r.useStyle(o):i.style=o}function dSe(r,e){var t=e.smooth,n=e.points;if(n)if(r.moveTo(n[0][0],n[0][1]),t>0&&n.length>=3){var a=tA(n[0],n[1]),i=tA(n[1],n[2]);if(!a||!i){r.lineTo(n[1][0],n[1][1]),r.lineTo(n[2][0],n[2][1]);return}var s=Math.min(a,i)*t,o=W_([],n[1],n[0],s/a),l=W_([],n[1],n[2],s/i),c=W_([],o,l,.5);r.bezierCurveTo(o[0],o[1],o[0],o[1],c[0],c[1]),r.bezierCurveTo(l[0],l[1],l[0],l[1],n[2][0],n[2][1])}else for(var u=1;u<n.length;u++)r.lineTo(n[u][0],n[u][1])}function TF(r,e,t){var n=r.getTextGuideLine(),a=r.getTextContent();if(!a){n&&r.removeTextGuideLine();return}for(var i=e.normal,s=i.get("show"),o=a.ignore,l=0;l<Sb.length;l++){var c=Sb[l],u=e[c],h=c==="normal";if(u){var d=u.get("show"),A=h?o:$t(a.states[c]&&a.states[c].ignore,o);if(A||!$t(d,s)){var g=h?n:n&&n.states[c];g&&(g.ignore=!0),n&&YE(n,!0,c,u);continue}n||(n=new ws,r.setTextGuideLine(n),!h&&(o||!s)&&YE(n,!0,"normal",e.normal),r.stateProxy&&(n.stateProxy=r.stateProxy)),YE(n,!1,c,u)}}if(n){Lt(n.style,t),n.style.fill=null;var p=i.get("showAbove"),v=r.textGuideLineConfig=r.textGuideLineConfig||{};v.showAbove=p||!1,n.buildPath=dSe}}function IF(r,e){e=e||"labelLine";for(var t={normal:r.getModel(e)},n=0;n<ps.length;n++){var a=ps[n];t[a]=r.getModel([a,e])}return t}function Yre(r){for(var e=[],t=0;t<r.length;t++){var n=r[t];if(!n.defaultAttr.ignore){var a=n.label,i=a.getComputedTransform(),s=a.getBoundingRect(),o=!i||i[1]<1e-5&&i[2]<1e-5,l=a.style.margin||0,c=s.clone();c.applyTransform(i),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=o?new xC(s,i):null;e.push({label:a,labelLine:n.labelLine,rect:c,localRect:s,obb:u,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:o,transform:i})}}return e}function Xre(r,e,t,n,a,i){var s=r.length;if(s<2)return;r.sort(function(_,C){return _.rect[e]-C.rect[e]});for(var o=0,l,c=!1,u=0;u<s;u++){var h=r[u],d=h.rect;l=d[e]-o,l<0&&(d[e]-=l,h.label[e]-=l,c=!0),o=d[e]+d[t]}var A=r[0],g=r[s-1],p,v;m(),p<0&&b(-p,.8),v<0&&b(v,.8),m(),y(p,v,1),y(v,p,-1),m(),p<0&&S(-p),v<0&&S(v);function m(){p=A.rect[e]-n,v=a-g.rect[e]-g.rect[t]}function y(_,C,w){if(_<0){var B=Math.min(C,-_);if(B>0){x(B*w,0,s);var D=B+_;D<0&&b(-D*w,1)}else b(-_*w,1)}}function x(_,C,w){_!==0&&(c=!0);for(var B=C;B<w;B++){var D=r[B],T=D.rect;T[e]+=_,D.label[e]+=_}}function b(_,C){for(var w=[],B=0,D=1;D<s;D++){var T=r[D-1].rect,E=Math.max(r[D].rect[e]-T[e]-T[t],0);w.push(E),B+=E}if(B){var R=Math.min(Math.abs(_)/B,C);if(_>0)for(var D=0;D<s-1;D++){var M=w[D]*R;x(M,0,D+1)}else for(var D=s-1;D>0;D--){var M=w[D-1]*R;x(-M,D,s)}}}function S(_){var C=_<0?-1:1;_=Math.abs(_);for(var w=Math.ceil(_/(s-1)),B=0;B<s-1;B++)if(C>0?x(w,0,B+1):x(-w,s-B-1,s),_-=w,_<=0)return}return c}function ASe(r,e,t,n){return Xre(r,"x","width",e,t)}function Zre(r,e,t,n){return Xre(r,"y","height",e,t)}function Jre(r){var e=[];r.sort(function(p,v){return v.priority-p.priority});var t=new Zt(0,0,0,0);function n(p){if(!p.ignore){var v=p.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}p.ignore=!0}for(var a=0;a<r.length;a++){var i=r[a],s=i.axisAligned,o=i.localRect,l=i.transform,c=i.label,u=i.labelLine;t.copy(i.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var h=i.obb,d=!1,A=0;A<e.length;A++){var g=e[A];if(t.intersect(g.rect)){if(s&&g.axisAligned){d=!0;break}if(g.obb||(g.obb=new xC(g.localRect,g.transform)),h||(h=new xC(o,l)),h.intersect(g.obb)){d=!0;break}}}d?(n(c),u&&n(u)):(c.attr("ignore",i.defaultAttr.ignore),u&&u.attr("ignore",i.defaultAttr.labelGuideIgnore),e.push(i))}}function fSe(r){if(r){for(var e=[],t=0;t<r.length;t++)e.push(r[t].slice());return e}}function gSe(r,e){var t=r.label,n=e&&e.getTextGuideLine();return{dataIndex:r.dataIndex,dataType:r.dataType,seriesIndex:r.seriesModel.seriesIndex,text:r.label.style.text,rect:r.hostRect,labelRect:r.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:fSe(n&&n.shape.points)}}var zQ=["align","verticalAlign","width","height","fontSize"],es=new rh,XE=wr(),pSe=wr();function BS(r,e,t){for(var n=0;n<t.length;n++){var a=t[n];e[a]!=null&&(r[a]=e[a])}}var NS=["x","y","rotation"],mSe=function(){function r(){this._labelList=[],this._chartViewList=[]}return r.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},r.prototype._addLabel=function(e,t,n,a,i){var s=a.style,o=a.__hostTarget,l=o.textConfig||{},c=a.getComputedTransform(),u=a.getBoundingRect().plain();Zt.applyTransform(u,u,c),c?es.setLocalTransform(c):(es.x=es.y=es.rotation=es.originX=es.originY=0,es.scaleX=es.scaleY=1),es.rotation=Ao(es.rotation);var h=a.__hostTarget,d;if(h){d=h.getBoundingRect().plain();var A=h.getComputedTransform();Zt.applyTransform(d,d,A)}var g=d&&h.getTextGuideLine();this._labelList.push({label:a,labelLine:g,seriesModel:n,dataIndex:e,dataType:t,layoutOption:i,computedLayoutOption:null,rect:u,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:a.ignore,labelGuideIgnore:g&&g.ignore,x:es.x,y:es.y,scaleX:es.scaleX,scaleY:es.scaleY,rotation:es.rotation,style:{x:s.x,y:s.y,align:s.align,verticalAlign:s.verticalAlign,width:s.width,height:s.height,fontSize:s.fontSize},cursor:a.cursor,attachedPos:l.position,attachedRot:l.rotation}})},r.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,a=n.get("labelLayout");(It(a)||pr(a).length)&&e.group.traverse(function(i){if(i.ignore)return!0;var s=i.getTextContent(),o=Qt(i);s&&!s.disableLabelLayout&&t._addLabel(o.dataIndex,o.dataType,n,s,a)})},r.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),n=e.getHeight();function a(x,b){return function(){QQ(x,b)}}for(var i=0;i<this._labelList.length;i++){var s=this._labelList[i],o=s.label,l=o.__hostTarget,c=s.defaultAttr,u=void 0;It(s.layoutOption)?u=s.layoutOption(gSe(s,l)):u=s.layoutOption,u=u||{},s.computedLayoutOption=u;var h=Math.PI/180;l&&l.setTextConfig({local:!1,position:u.x!=null||u.y!=null?null:c.attachedPos,rotation:u.rotate!=null?u.rotate*h:c.attachedRot,offset:[u.dx||0,u.dy||0]});var d=!1;if(u.x!=null?(o.x=ot(u.x,t),o.setStyle("x",0),d=!0):(o.x=c.x,o.setStyle("x",c.style.x)),u.y!=null?(o.y=ot(u.y,n),o.setStyle("y",0),d=!0):(o.y=c.y,o.setStyle("y",c.style.y)),u.labelLinePoints){var A=l.getTextGuideLine();A&&(A.setShape({points:u.labelLinePoints}),d=!1)}var g=XE(o);g.needsUpdateLabelLine=d,o.rotation=u.rotate!=null?u.rotate*h:c.rotation,o.scaleX=c.scaleX,o.scaleY=c.scaleY;for(var p=0;p<zQ.length;p++){var v=zQ[p];o.setStyle(v,u[v]!=null?u[v]:c.style[v])}if(u.draggable){if(o.draggable=!0,o.cursor="move",l){var m=s.seriesModel;if(s.dataIndex!=null){var y=s.seriesModel.getData(s.dataType);m=y.getItemModel(s.dataIndex)}o.on("drag",a(l,m.getModel("labelLine")))}}else o.off("drag"),o.cursor=c.cursor}},r.prototype.layout=function(e){var t=e.getWidth(),n=e.getHeight(),a=Yre(this._labelList),i=Ur(a,function(l){return l.layoutOption.moveOverlap==="shiftX"}),s=Ur(a,function(l){return l.layoutOption.moveOverlap==="shiftY"});ASe(i,0,t),Zre(s,0,n);var o=Ur(a,function(l){return l.layoutOption.hideOverlap});Jre(o)},r.prototype.processLabelsOverall=function(){var e=this;X(this._chartViewList,function(t){var n=t.__model,a=t.ignoreLabelLineUpdate,i=n.isAnimationEnabled();t.group.traverse(function(s){if(s.ignore&&!s.forceLabelAnimation)return!0;var o=!a,l=s.getTextContent();!o&&l&&(o=XE(l).needsUpdateLabelLine),o&&e._updateLabelLine(s,n),i&&e._animateLabels(s,n)})})},r.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),a=Qt(e),i=a.dataIndex;if(n&&i!=null){var s=t.getData(a.dataType),o=s.getItemModel(i),l={},c=s.getItemVisual(i,"style");if(c){var u=s.getVisual("drawType");l.stroke=c[u]}var h=o.getModel("labelLine");TF(e,IF(o),l),QQ(e,h)}},r.prototype._animateLabels=function(e,t){var n=e.getTextContent(),a=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!Hv(e))){var i=XE(n),s=i.oldLayout,o=Qt(e),l=o.dataIndex,c={x:n.x,y:n.y,rotation:n.rotation},u=t.getData(o.dataType);if(s){n.attr(s);var d=e.prevStates;d&&(rr(d,"select")>=0&&n.attr(i.oldLayoutSelect),rr(d,"emphasis")>=0&&n.attr(i.oldLayoutEmphasis)),Er(n,c,t,l)}else if(n.attr(c),!ay(n).valueAnimation){var h=$t(n.style.opacity,1);n.style.opacity=0,jn(n,{style:{opacity:h}},t,l)}if(i.oldLayout=c,n.states.select){var A=i.oldLayoutSelect={};BS(A,c,NS),BS(A,n.states.select,NS)}if(n.states.emphasis){var g=i.oldLayoutEmphasis={};BS(g,c,NS),BS(g,n.states.emphasis,NS)}Gee(n,l,u,t,t)}if(a&&!a.ignore&&!a.invisible){var i=pSe(a),s=i.oldLayout,p={points:a.shape.points};s?(a.attr({shape:s}),Er(a,{shape:p},t)):(a.setShape(p),a.style.strokePercent=0,jn(a,{style:{strokePercent:1}},t)),i.oldLayout=p}},r}(),ZE=wr();function vSe(r){r.registerUpdateLifecycle("series:beforeupdate",function(e,t,n){var a=ZE(t).labelManager;a||(a=ZE(t).labelManager=new mSe),a.clearLabels()}),r.registerUpdateLifecycle("series:layoutlabels",function(e,t,n){var a=ZE(t).labelManager;n.updatedSeries.forEach(function(i){a.addLabelsOfSeries(t.getViewOfSeriesModel(i))}),a.updateLayoutConfig(t),a.layout(t),a.processLabelsOverall()})}var JE=Math.sin,e4=Math.cos,ene=Math.PI,Yf=Math.PI*2,ySe=180/ene,tne=function(){function r(){}return r.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},r.prototype.moveTo=function(e,t){this._add("M",e,t)},r.prototype.lineTo=function(e,t){this._add("L",e,t)},r.prototype.bezierCurveTo=function(e,t,n,a,i,s){this._add("C",e,t,n,a,i,s)},r.prototype.quadraticCurveTo=function(e,t,n,a){this._add("Q",e,t,n,a)},r.prototype.arc=function(e,t,n,a,i,s){this.ellipse(e,t,n,n,0,a,i,s)},r.prototype.ellipse=function(e,t,n,a,i,s,o,l){var c=o-s,u=!l,h=Math.abs(c),d=sA(h-Yf)||(u?c>=Yf:-c>=Yf),A=c>0?c%Yf:c%Yf+Yf,g=!1;d?g=!0:sA(h)?g=!1:g=A>=ene==!!u;var p=e+n*e4(s),v=t+a*JE(s);this._start&&this._add("M",p,v);var m=Math.round(i*ySe);if(d){var y=1/this._p,x=(u?1:-1)*(Yf-y);this._add("A",n,a,m,1,+u,e+n*e4(s+x),t+a*JE(s+x)),y>.01&&this._add("A",n,a,m,0,+u,p,v)}else{var b=e+n*e4(o),S=t+a*JE(o);this._add("A",n,a,m,+g,+u,b,S)}},r.prototype.rect=function(e,t,n,a){this._add("M",e,t),this._add("l",n,0),this._add("l",0,a),this._add("l",-n,0),this._add("Z")},r.prototype.closePath=function(){this._d.length>0&&this._add("Z")},r.prototype._add=function(e,t,n,a,i,s,o,l,c){for(var u=[],h=this._p,d=1;d<arguments.length;d++){var A=arguments[d];if(isNaN(A)){this._invalid=!0;return}u.push(Math.round(A*h)/h)}this._d.push(e+u.join(" ")),this._start=e==="Z"},r.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},r.prototype.getStr=function(){return this._str},r}(),EF="none",xSe=Math.round;function bSe(r){var e=r.fill;return e!=null&&e!==EF}function wSe(r){var e=r.stroke;return e!=null&&e!==EF}var wR=["lineCap","miterLimit","lineJoin"],SSe=We(wR,function(r){return"stroke-"+r.toLowerCase()});function _Se(r,e,t,n){var a=e.opacity==null?1:e.opacity;if(t instanceof fi){r("opacity",a);return}if(bSe(e)){var i=xb(e.fill);r("fill",i.color);var s=e.fillOpacity!=null?e.fillOpacity*i.opacity*a:i.opacity*a;s<1&&r("fill-opacity",s)}else r("fill",EF);if(wSe(e)){var o=xb(e.stroke);r("stroke",o.color);var l=e.strokeNoScale?t.getLineScale():1,c=l?(e.lineWidth||0)/l:0,u=e.strokeOpacity!=null?e.strokeOpacity*o.opacity*a:o.opacity*a,h=e.strokeFirst;if(c!==1&&r("stroke-width",c),h&&r("paint-order",h?"stroke":"fill"),u<1&&r("stroke-opacity",u),e.lineDash){var d=mF(t),A=d[0],g=d[1];A&&(g=xSe(g||0),r("stroke-dasharray",A.join(",")),(g||n)&&r("stroke-dashoffset",g))}for(var p=0;p<wR.length;p++){var v=wR[p];if(e[v]!==vC[v]){var m=e[v]||vC[v];m&&r(SSe[p],m)}}}}var rne="http://www.w3.org/2000/svg",nne="http://www.w3.org/1999/xlink",CSe="http://www.w3.org/2000/xmlns/",BSe="http://www.w3.org/XML/1998/namespace",GQ="ecmeta_";function ane(r){return document.createElementNS(rne,r)}function Xa(r,e,t,n,a){return{tag:r,attrs:t||{},children:n,text:a,key:e}}function NSe(r,e){var t=[];if(e)for(var n in e){var a=e[n],i=n;a!==!1&&(a!==!0&&a!=null&&(i+='="'+a+'"'),t.push(i))}return"<"+r+" "+t.join(" ")+">"}function TSe(r){return"</"+r+">"}function DF(r,e){e=e||{};var t=e.newline?`
`:"";function n(a){var i=a.children,s=a.tag,o=a.attrs,l=a.text;return NSe(s,o)+(s!=="style"?cs(l):l||"")+(i?""+t+We(i,function(c){return n(c)}).join(t)+t:"")+TSe(s)}return n(r)}function ISe(r,e,t){t=t||{};var n=t.newline?`
`:"",a=" {"+n,i=n+"}",s=We(pr(r),function(l){return l+a+We(pr(r[l]),function(c){return c+":"+r[l][c]+";"}).join(n)+i}).join(n),o=We(pr(e),function(l){return"@keyframes "+l+a+We(pr(e[l]),function(c){return c+a+We(pr(e[l][c]),function(u){var h=e[l][c][u];return u==="d"&&(h='path("'+h+'")'),u+":"+h+";"}).join(n)+i}).join(n)+i}).join(n);return!s&&!o?"":["<![CDATA[",s,o,"]]>"].join(n)}function SR(r){return{zrId:r,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function VQ(r,e,t,n){return Xa("svg","root",{width:r,height:e,xmlns:rne,"xmlns:xlink":nne,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+r+" "+e:!1},t)}var ESe=0;function ine(){return ESe++}var $Q={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},ig="transform-origin";function DSe(r,e,t){var n=He({},r.shape);He(n,e),r.buildPath(t,n);var a=new tne;return a.reset(UJ(r)),t.rebuildPath(a,1),a.generateStr(),a.getStr()}function MSe(r,e){var t=e.originX,n=e.originY;(t||n)&&(r[ig]=t+"px "+n+"px")}var RSe={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function sne(r,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=r,t}function LSe(r,e,t){var n=r.shape.paths,a={},i,s;if(X(n,function(l){var c=SR(t.zrId);c.animation=!0,ZN(l,{},c,!0);var u=c.cssAnims,h=c.cssNodes,d=pr(u),A=d.length;if(A){s=d[A-1];var g=u[s];for(var p in g){var v=g[p];a[p]=a[p]||{d:""},a[p].d+=v.d||""}for(var m in h){var y=h[m].animation;y.indexOf(s)>=0&&(i=y)}}}),!!i){e.d=!1;var o=sne(a,t);return i.replace(s,o)}}function KQ(r){return dt(r)?$Q[r]?"cubic-bezier("+$Q[r]+")":kk(r)?r:"":""}function ZN(r,e,t,n){var a=r.animators,i=a.length,s=[];if(r instanceof Xk){var o=LSe(r,e,t);if(o)s.push(o);else if(!i)return}else if(!i)return;for(var l={},c=0;c<i;c++){var u=a[c],h=[u.getMaxTime()/1e3+"s"],d=KQ(u.getClip().easing),A=u.getDelay();d?h.push(d):h.push("linear"),A&&h.push(A/1e3+"s"),u.getLoop()&&h.push("infinite");var g=h.join(" ");l[g]=l[g]||[g,[]],l[g][1].push(u)}function p(y){var x=y[1],b=x.length,S={},_={},C={},w="animation-timing-function";function B(fe,q,ge){for(var me=fe.getTracks(),we=fe.getMaxTime(),Me=0;Me<me.length;Me++){var z=me[Me];if(z.needsAnimate()){var pe=z.keyframes,J=z.propName;if(ge&&(J=ge(J)),J)for(var oe=0;oe<pe.length;oe++){var ae=pe[oe],ue=Math.round(ae.time/we*100)+"%",be=KQ(ae.easing),_e=ae.rawValue;(dt(_e)||Br(_e))&&(q[ue]=q[ue]||{},q[ue][J]=ae.rawValue,be&&(q[ue][w]=be))}}}}for(var D=0;D<b;D++){var T=x[D],E=T.targetName;E?E==="shape"&&B(T,_):!n&&B(T,S)}for(var R in S){var M={};VJ(M,r),He(M,S[R]);var k=HJ(M),O=S[R][w];C[R]=k?{transform:k}:{},MSe(C[R],M),O&&(C[R][w]=O)}var Q,H=!0;for(var R in _){C[R]=C[R]||{};var W=!Q,O=_[R][w];W&&(Q=new ou);var te=Q.len();Q.reset(),C[R].d=DSe(r,_[R],Q);var ee=Q.len();if(!W&&te!==ee){H=!1;break}O&&(C[R][w]=O)}if(!H)for(var R in C)delete C[R].d;if(!n)for(var D=0;D<b;D++){var T=x[D],E=T.targetName;E==="style"&&B(T,C,function(me){return RSe[me]})}for(var j=pr(C),G=!0,Y,D=1;D<j.length;D++){var Z=j[D-1],de=j[D];if(C[Z][ig]!==C[de][ig]){G=!1;break}Y=C[Z][ig]}if(G&&Y){for(var R in C)C[R][ig]&&delete C[R][ig];e[ig]=Y}if(Ur(j,function(fe){return pr(C[fe]).length>0}).length){var he=sne(C,t);return he+" "+y[0]+" both"}}for(var v in l){var o=p(l[v]);o&&s.push(o)}if(s.length){var m=t.zrId+"-cls-"+ine();t.cssNodes["."+m]={animation:s.join(",")},e.class=m}}function PSe(r,e,t){if(!r.ignore)if(r.isSilent()){var n={"pointer-events":"none"};WQ(n,e,t)}else{var a=r.states.emphasis&&r.states.emphasis.style?r.states.emphasis.style:{},i=a.fill;if(!i){var s=r.style&&r.style.fill,o=r.states.select&&r.states.select.style&&r.states.select.style.fill,l=r.currentStates.indexOf("select")>=0&&o||s;l&&(i=P3(l))}var c=a.lineWidth;if(c){var u=!a.strokeNoScale&&r.transform?r.transform[0]:1;c=c/u}var n={cursor:"pointer"};i&&(n.fill=i),a.stroke&&(n.stroke=a.stroke),c&&(n["stroke-width"]=c),WQ(n,e,t)}}function WQ(r,e,t,n){var a=JSON.stringify(r),i=t.cssStyleCache[a];i||(i=t.zrId+"-cls-"+ine(),t.cssStyleCache[a]=i,t.cssNodes["."+i+":hover"]=r),e.class=e.class?e.class+" "+i:i}var Rb=Math.round;function one(r){return r&&dt(r.src)}function lne(r){return r&&It(r.toDataURL)}function MF(r,e,t,n){_Se(function(a,i){var s=a==="fill"||a==="stroke";s&&OJ(i)?une(e,r,a,n):s&&Fk(i)?hne(t,r,a,n):r[a]=i,s&&n.ssr&&i==="none"&&(r["pointer-events"]="visible")},e,t,!1),QSe(t,r,n)}function RF(r,e){var t=R0e(e);t&&(t.each(function(n,a){n!=null&&(r[(GQ+a).toLowerCase()]=n+"")}),e.isSilent()&&(r[GQ+"silent"]="true"))}function qQ(r){return sA(r[0]-1)&&sA(r[1])&&sA(r[2])&&sA(r[3]-1)}function kSe(r){return sA(r[4])&&sA(r[5])}function LF(r,e,t){if(e&&!(kSe(e)&&qQ(e))){var n=1e4;r.transform=qQ(e)?"translate("+Rb(e[4]*n)/n+" "+Rb(e[5]*n)/n+")":r0e(e)}}function YQ(r,e,t){for(var n=r.points,a=[],i=0;i<n.length;i++)a.push(Rb(n[i][0]*t)/t),a.push(Rb(n[i][1]*t)/t);e.points=a.join(" ")}function XQ(r){return!r.smooth}function FSe(r){var e=We(r,function(t){return typeof t=="string"?[t,t]:t});return function(t,n,a){for(var i=0;i<e.length;i++){var s=e[i],o=t[s[0]];o!=null&&(n[s[1]]=Rb(o*a)/a)}}}var jSe={circle:[FSe(["cx","cy","r"])],polyline:[YQ,XQ],polygon:[YQ,XQ]};function OSe(r){for(var e=r.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function cne(r,e){var t=r.style,n=r.shape,a=jSe[r.type],i={},s=e.animation,o="path",l=r.style.strokePercent,c=e.compress&&UJ(r)||4;if(a&&!e.willUpdate&&!(a[1]&&!a[1](n))&&!(s&&OSe(r))&&!(l<1)){o=r.type;var u=Math.pow(10,c);a[0](n,i,u)}else{var h=!r.path||r.shapeChanged();r.path||r.createPathProxy();var d=r.path;h&&(d.beginPath(),r.buildPath(d,r.shape),r.pathUpdated());var A=d.getVersion(),g=r,p=g.__svgPathBuilder;(g.__svgPathVersion!==A||!p||l!==g.__svgPathStrokePercent)&&(p||(p=g.__svgPathBuilder=new tne),p.reset(c),d.rebuildPath(p,l),p.generateStr(),g.__svgPathVersion=A,g.__svgPathStrokePercent=l),i.d=p.getStr()}return LF(i,r.transform),MF(i,t,r,e),RF(i,r),e.animation&&ZN(r,i,e),e.emphasis&&PSe(r,i,e),Xa(o,r.id+"",i)}function USe(r,e){var t=r.style,n=t.image;if(n&&!dt(n)&&(one(n)?n=n.src:lne(n)&&(n=n.toDataURL())),!!n){var a=t.x||0,i=t.y||0,s=t.width,o=t.height,l={href:n,width:s,height:o};return a&&(l.x=a),i&&(l.y=i),LF(l,r.transform),MF(l,t,r,e),RF(l,r),e.animation&&ZN(r,l,e),Xa("image",r.id+"",l)}}function HSe(r,e){var t=r.style,n=t.text;if(n!=null&&(n+=""),!(!n||isNaN(t.x)||isNaN(t.y))){var a=t.font||OA,i=t.x||0,s=a0e(t.y||0,_N(a),t.textBaseline),o=n0e[t.textAlign]||t.textAlign,l={"dominant-baseline":"central","text-anchor":o};if(mee(t)){var c="",u=t.fontStyle,h=pee(t.fontSize);if(!parseFloat(h))return;var d=t.fontFamily||pJ,A=t.fontWeight;c+="font-size:"+h+";font-family:"+d+";",u&&u!=="normal"&&(c+="font-style:"+u+";"),A&&A!=="normal"&&(c+="font-weight:"+A+";"),l.style=c}else l.style="font: "+a;return n.match(/\s/)&&(l["xml:space"]="preserve"),i&&(l.x=i),s&&(l.y=s),LF(l,r.transform),MF(l,t,r,e),RF(l,r),e.animation&&ZN(r,l,e),Xa("text",r.id+"",l,void 0,n)}}function ZQ(r,e){if(r instanceof hr)return cne(r,e);if(r instanceof fi)return USe(r,e);if(r instanceof S0)return HSe(r,e)}function QSe(r,e,t){var n=r.style;if(i0e(n)){var a=s0e(r),i=t.shadowCache,s=i[a];if(!s){var o=r.getGlobalScale(),l=o[0],c=o[1];if(!l||!c)return;var u=n.shadowOffsetX||0,h=n.shadowOffsetY||0,d=n.shadowBlur,A=xb(n.shadowColor),g=A.opacity,p=A.color,v=d/2/l,m=d/2/c,y=v+" "+m;s=t.zrId+"-s"+t.shadowIdx++,t.defs[s]=Xa("filter",s,{id:s,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Xa("feDropShadow","",{dx:u/l,dy:h/c,stdDeviation:y,"flood-color":p,"flood-opacity":g})]),i[a]=s}e.filter=SN(s)}}function une(r,e,t,n){var a=r[t],i,s={gradientUnits:a.global?"userSpaceOnUse":"objectBoundingBox"};if(FJ(a))i="linearGradient",s.x1=a.x,s.y1=a.y,s.x2=a.x2,s.y2=a.y2;else if(jJ(a))i="radialGradient",s.cx=$t(a.x,.5),s.cy=$t(a.y,.5),s.r=$t(a.r,.5);else return;for(var o=a.colorStops,l=[],c=0,u=o.length;c<u;++c){var h=k3(o[c].offset)*100+"%",d=o[c].color,A=xb(d),g=A.color,p=A.opacity,v={offset:h};v["stop-color"]=g,p<1&&(v["stop-opacity"]=p),l.push(Xa("stop",c+"",v))}var m=Xa(i,"",s,l),y=DF(m),x=n.gradientCache,b=x[y];b||(b=n.zrId+"-g"+n.gradientIdx++,x[y]=b,s.id=b,n.defs[b]=Xa(i,b,s,l)),e[t]=SN(b)}function hne(r,e,t,n){var a=r.style[t],i=r.getBoundingRect(),s={},o=a.repeat,l=o==="no-repeat",c=o==="repeat-x",u=o==="repeat-y",h;if(kJ(a)){var d=a.imageWidth,A=a.imageHeight,g=void 0,p=a.image;if(dt(p)?g=p:one(p)?g=p.src:lne(p)&&(g=p.toDataURL()),typeof Image>"u"){var v="Image width/height must been given explictly in svg-ssr renderer.";gs(d,v),gs(A,v)}else if(d==null||A==null){var m=function(D,T){if(D){var E=D.elm,R=d||T.width,M=A||T.height;D.tag==="pattern"&&(c?(M=1,R/=i.width):u&&(R=1,M/=i.height)),D.attrs.width=R,D.attrs.height=M,E&&(E.setAttribute("width",R),E.setAttribute("height",M))}},y=zk(g,null,r,function(D){l||m(_,D),m(h,D)});y&&y.width&&y.height&&(d=d||y.width,A=A||y.height)}h=Xa("image","img",{href:g,width:d,height:A}),s.width=d,s.height=A}else a.svgElement&&(h=Ft(a.svgElement),s.width=a.svgWidth,s.height=a.svgHeight);if(h){var x,b;l?x=b=1:c?(b=1,x=s.width/i.width):u?(x=1,b=s.height/i.height):s.patternUnits="userSpaceOnUse",x!=null&&!isNaN(x)&&(s.width=x),b!=null&&!isNaN(b)&&(s.height=b);var S=HJ(a);S&&(s.patternTransform=S);var _=Xa("pattern","",s,[h]),C=DF(_),w=n.patternCache,B=w[C];B||(B=n.zrId+"-p"+n.patternIdx++,w[C]=B,s.id=B,_=n.defs[B]=Xa("pattern",B,s,[h])),e[t]=SN(B)}}function zSe(r,e,t){var n=t.clipPathCache,a=t.defs,i=n[r.id];if(!i){i=t.zrId+"-c"+t.clipPathIdx++;var s={id:i};n[r.id]=i,a[i]=Xa("clipPath",i,s,[cne(r,t)])}e["clip-path"]=SN(i)}function JQ(r){return document.createTextNode(r)}function gg(r,e,t){r.insertBefore(e,t)}function e7(r,e){r.removeChild(e)}function t7(r,e){r.appendChild(e)}function dne(r){return r.parentNode}function Ane(r){return r.nextSibling}function t4(r,e){r.textContent=e}var r7=58,GSe=120,VSe=Xa("","");function _R(r){return r===void 0}function Mc(r){return r!==void 0}function $Se(r,e,t){for(var n={},a=e;a<=t;++a){var i=r[a].key;i!==void 0&&(n[i]=a)}return n}function qx(r,e){var t=r.key===e.key,n=r.tag===e.tag;return n&&t}function Lb(r){var e,t=r.children,n=r.tag;if(Mc(n)){var a=r.elm=ane(n);if(PF(VSe,r),$e(t))for(e=0;e<t.length;++e){var i=t[e];i!=null&&t7(a,Lb(i))}else Mc(r.text)&&!Pt(r.text)&&t7(a,JQ(r.text))}else r.elm=JQ(r.text);return r.elm}function fne(r,e,t,n,a){for(;n<=a;++n){var i=t[n];i!=null&&gg(r,Lb(i),e)}}function FC(r,e,t,n){for(;t<=n;++t){var a=e[t];if(a!=null)if(Mc(a.tag)){var i=dne(a.elm);e7(i,a.elm)}else e7(r,a.elm)}}function PF(r,e){var t,n=e.elm,a=r&&r.attrs||{},i=e.attrs||{};if(a!==i){for(t in i){var s=i[t],o=a[t];o!==s&&(s===!0?n.setAttribute(t,""):s===!1?n.removeAttribute(t):t==="style"?n.style.cssText=s:t.charCodeAt(0)!==GSe?n.setAttribute(t,s):t==="xmlns:xlink"||t==="xmlns"?n.setAttributeNS(CSe,t,s):t.charCodeAt(3)===r7?n.setAttributeNS(BSe,t,s):t.charCodeAt(5)===r7?n.setAttributeNS(nne,t,s):n.setAttribute(t,s))}for(t in a)t in i||n.removeAttribute(t)}}function KSe(r,e,t){for(var n=0,a=0,i=e.length-1,s=e[0],o=e[i],l=t.length-1,c=t[0],u=t[l],h,d,A,g;n<=i&&a<=l;)s==null?s=e[++n]:o==null?o=e[--i]:c==null?c=t[++a]:u==null?u=t[--l]:qx(s,c)?(nv(s,c),s=e[++n],c=t[++a]):qx(o,u)?(nv(o,u),o=e[--i],u=t[--l]):qx(s,u)?(nv(s,u),gg(r,s.elm,Ane(o.elm)),s=e[++n],u=t[--l]):qx(o,c)?(nv(o,c),gg(r,o.elm,s.elm),o=e[--i],c=t[++a]):(_R(h)&&(h=$Se(e,n,i)),d=h[c.key],_R(d)?gg(r,Lb(c),s.elm):(A=e[d],A.tag!==c.tag?gg(r,Lb(c),s.elm):(nv(A,c),e[d]=void 0,gg(r,A.elm,s.elm))),c=t[++a]);(n<=i||a<=l)&&(n>i?(g=t[l+1]==null?null:t[l+1].elm,fne(r,g,t,a,l)):FC(r,e,n,i))}function nv(r,e){var t=e.elm=r.elm,n=r.children,a=e.children;r!==e&&(PF(r,e),_R(e.text)?Mc(n)&&Mc(a)?n!==a&&KSe(t,n,a):Mc(a)?(Mc(r.text)&&t4(t,""),fne(t,null,a,0,a.length-1)):Mc(n)?FC(t,n,0,n.length-1):Mc(r.text)&&t4(t,""):r.text!==e.text&&(Mc(n)&&FC(t,n,0,n.length-1),t4(t,e.text)))}function WSe(r,e){if(qx(r,e))nv(r,e);else{var t=r.elm,n=dne(t);Lb(e),n!==null&&(gg(n,e.elm,Ane(t)),FC(n,[r],0,0))}return e}var qSe=0,YSe=function(){function r(e,t,n){if(this.type="svg",this.refreshHover=n7(),this.configLayer=n7(),this.storage=t,this._opts=n=He({},n),this.root=e,this._id="zr"+qSe++,this._oldVNode=VQ(n.width,n.height),e&&!n.ssr){var a=this._viewport=document.createElement("div");a.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=ane("svg");PF(null,this._oldVNode),a.appendChild(i),e.appendChild(a)}this.resize(n.width,n.height)}return r.prototype.getType=function(){return this.type},r.prototype.getViewportRoot=function(){return this._viewport},r.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},r.prototype.getSvgDom=function(){return this._svgDom},r.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",WSe(this._oldVNode,e),this._oldVNode=e}},r.prototype.renderOneToVNode=function(e){return ZQ(e,SR(this._id))},r.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),n=this._width,a=this._height,i=SR(this._id);i.animation=e.animation,i.willUpdate=e.willUpdate,i.compress=e.compress,i.emphasis=e.emphasis,i.ssr=this._opts.ssr;var s=[],o=this._bgVNode=XSe(n,a,this._backgroundColor,i);o&&s.push(o);var l=e.compress?null:this._mainVNode=Xa("g","main",{},[]);this._paintList(t,i,l?l.children:s),l&&s.push(l);var c=We(pr(i.defs),function(d){return i.defs[d]});if(c.length&&s.push(Xa("defs","defs",{},c)),e.animation){var u=ISe(i.cssNodes,i.cssAnims,{newline:!0});if(u){var h=Xa("style","stl",{},[],u);s.push(h)}}return VQ(n,a,s,e.useViewBox)},r.prototype.renderToString=function(e){return e=e||{},DF(this.renderToVNode({animation:$t(e.cssAnimation,!0),emphasis:$t(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:$t(e.useViewBox,!0)}),{newline:!0})},r.prototype.setBackgroundColor=function(e){this._backgroundColor=e},r.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},r.prototype._paintList=function(e,t,n){for(var a=e.length,i=[],s=0,o,l,c=0,u=0;u<a;u++){var h=e[u];if(!h.invisible){var d=h.__clipPaths,A=d&&d.length||0,g=l&&l.length||0,p=void 0;for(p=Math.max(A-1,g-1);p>=0&&!(d&&l&&d[p]===l[p]);p--);for(var v=g-1;v>p;v--)s--,o=i[s-1];for(var m=p+1;m<A;m++){var y={};zSe(d[m],y,t);var x=Xa("g","clip-g-"+c++,y,[]);(o?o.children:n).push(x),i[s++]=x,o=x}l=d;var b=ZQ(h,t);b&&(o?o.children:n).push(b)}}},r.prototype.resize=function(e,t){var n=this._opts,a=this.root,i=this._viewport;if(e!=null&&(n.width=e),t!=null&&(n.height=t),a&&i&&(i.style.display="none",e=_v(a,0,n),t=_v(a,1,n),i.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,i){var s=i.style;s.width=e+"px",s.height=t+"px"}if(Fk(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",e),o.setAttribute("height",t));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",t))}}},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},r.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},r.prototype.toDataURL=function(e){var t=this.renderToString(),n="data:image/svg+xml;";return e?(t=l0e(t),t&&n+"base64,"+t):n+"charset=UTF-8,"+encodeURIComponent(t)},r}();function n7(r){return function(){}}function XSe(r,e,t,n){var a;if(t&&t!=="none")if(a=Xa("rect","bg",{width:r,height:e,x:"0",y:"0"}),OJ(t))une({fill:t},a.attrs,"fill",n);else if(Fk(t))hne({style:{fill:t},dirty:Aa,getBoundingRect:function(){return{width:r,height:e}}},a.attrs,"fill",n);else{var i=xb(t),s=i.color,o=i.opacity;a.attrs.fill=s,o<1&&(a.attrs["fill-opacity"]=o)}return a}function ZSe(r){r.registerPainter("svg",YSe)}function a7(r,e,t){var n=UA.createCanvas(),a=e.getWidth(),i=e.getHeight(),s=n.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=a+"px",s.height=i+"px",n.setAttribute("data-zr-dom-id",r)),n.width=a*t,n.height=i*t,n}var r4=function(r){Rn(e,r);function e(t,n,a){var i=r.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null;var s;a=a||pC,typeof t=="string"?s=a7(t,n,a):Pt(t)&&(s=t,t=s.id),i.id=t,i.dom=s;var o=s.style;return o&&(wJ(s),s.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),i.painter=n,i.dpr=a,i}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=a7("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,n,a,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],o=this.maxRepaintRectCount,l=!1,c=new Zt(0,0,0,0);function u(y){if(!(!y.isFinite()||y.isZero()))if(s.length===0){var x=new Zt(0,0,0,0);x.copy(y),s.push(x)}else{for(var b=!1,S=1/0,_=0,C=0;C<s.length;++C){var w=s[C];if(w.intersect(y)){var B=new Zt(0,0,0,0);B.copy(w),B.union(y),s[C]=B,b=!0;break}else if(l){c.copy(y),c.union(w);var D=y.width*y.height,T=w.width*w.height,E=c.width*c.height,R=E-D-T;R<S&&(S=R,_=C)}}if(l&&(s[_].union(y),b=!0),!b){var x=new Zt(0,0,0,0);x.copy(y),s.push(x)}l||(l=s.length>=o)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var d=t[h];if(d){var A=d.shouldBePainted(a,i,!0,!0),g=d.__isRendered&&(d.__dirty&uo||!A)?d.getPrevPaintRect():null;g&&u(g);var p=A&&(d.__dirty&uo||!d.__isRendered)?d.getPaintRect():null;p&&u(p)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var d=n[h],A=d&&d.shouldBePainted(a,i,!0,!0);if(d&&(!A||!d.__zr)&&d.__isRendered){var g=d.getPrevPaintRect();g&&u(g)}}var v;do{v=!1;for(var h=0;h<s.length;){if(s[h].isZero()){s.splice(h,1);continue}for(var m=h+1;m<s.length;)s[h].intersect(s[m])?(v=!0,s[h].union(s[m]),s.splice(m,1)):m++;h++}}while(v);return this._paintRects=s,s},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,n){var a=this.dpr,i=this.dom,s=i.style,o=this.domBack;s&&(s.width=t+"px",s.height=n+"px"),i.width=t*a,i.height=n*a,o&&(o.width=t*a,o.height=n*a,a!==1&&this.ctxBack.scale(a,a))},e.prototype.clear=function(t,n,a){var i=this.dom,s=this.ctx,o=i.width,l=i.height;n=n||this.clearColor;var c=this.motionBlur&&!t,u=this.lastFrameAlpha,h=this.dpr,d=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,o/h,l/h));var A=this.domBack;function g(p,v,m,y){if(s.clearRect(p,v,m,y),n&&n!=="transparent"){var x=void 0;if(xN(n)){var b=n.global||n.__width===m&&n.__height===y;x=b&&n.__canvasGradient||fR(s,n,{x:0,y:0,width:m,height:y}),n.__canvasGradient=x,n.__width=m,n.__height=y}else pve(n)&&(n.scaleX=n.scaleX||h,n.scaleY=n.scaleY||h,x=gR(s,n,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));s.save(),s.fillStyle=x||n,s.fillRect(p,v,m,y),s.restore()}c&&(s.save(),s.globalAlpha=u,s.drawImage(A,p,v,m,y),s.restore())}!a||c?g(0,0,o,l):a.length&&X(a,function(p){g(p.x*h,p.y*h,p.width*h,p.height*h)})},e}(vl),i7=1e5,Xf=314159,TS=.01,JSe=.001;function e_e(r){return r?r.__builtin__?!0:!(typeof r.resize!="function"||typeof r.refresh!="function"):!1}function t_e(r,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+r+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var r_e=function(){function r(e,t,n,a){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=n=He({},n||{}),this.dpr=n.devicePixelRatio||pC,this._singleCanvas=i,this.root=e;var s=e.style;s&&(wJ(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(i){var u=e,h=u.width,d=u.height;n.width!=null&&(h=n.width),n.height!=null&&(d=n.height),this.dpr=n.devicePixelRatio||1,u.width=h*this.dpr,u.height=d*this.dpr,this._width=h,this._height=d;var A=new r4(u,this,this.dpr);A.__builtin__=!0,A.initContext(),l[Xf]=A,A.zlevel=Xf,o.push(Xf),this._domRoot=e}else{this._width=_v(e,0,n),this._height=_v(e,1,n);var c=this._domRoot=t_e(this._width,this._height);e.appendChild(c)}}return r.prototype.getType=function(){return"canvas"},r.prototype.isSingleCanvas=function(){return this._singleCanvas},r.prototype.getViewportRoot=function(){return this._domRoot},r.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},r.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),n=this._prevDisplayList,a=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,n,e,this._redrawId);for(var i=0;i<a.length;i++){var s=a[i],o=this._layers[s];if(!o.__builtin__&&o.refresh){var l=i===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},r.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},r.prototype._paintHoverList=function(e){var t=e.length,n=this._hoverlayer;if(n&&n.clear(),!!t){for(var a={inHover:!0,viewWidth:this._width,viewHeight:this._height},i,s=0;s<t;s++){var o=e[s];o.__inHover&&(n||(n=this._hoverlayer=this.getLayer(i7)),i||(i=n.ctx,i.save()),Rg(i,o,a,s===t-1))}i&&i.restore()}},r.prototype.getHoverLayer=function(){return this.getLayer(i7)},r.prototype.paintOne=function(e,t){Zte(e,t)},r.prototype._paintList=function(e,t,n,a){if(this._redrawId===a){n=n||!1,this._updateLayerStatus(e);var i=this._doPaintList(e,t,n),s=i.finished,o=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),s)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;uC(function(){l._paintList(e,t,n,a)})}}},r.prototype._compositeManually=function(){var e=this.getLayer(Xf).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer(function(a){a.virtual&&e.drawImage(a.dom,0,0,t,n)})},r.prototype._doPaintList=function(e,t,n){for(var a=this,i=[],s=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||n)&&i.push(c)}for(var u=!0,h=!1,d=function(p){var v=i[p],m=v.ctx,y=s&&v.createRepaintRects(e,t,A._width,A._height),x=n?v.__startIndex:v.__drawIndex,b=!n&&v.incremental&&Date.now,S=b&&Date.now(),_=v.zlevel===A._zlevelList[0]?A._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,_,y);else if(x===v.__startIndex){var C=e[x];(!C.incremental||!C.notClear||n)&&v.clear(!1,_,y)}x===-1&&(console.error("For some unknown reason. drawIndex is -1"),x=v.__startIndex);var w,B=function(R){var M={inHover:!1,allClipped:!1,prevEl:null,viewWidth:a._width,viewHeight:a._height};for(w=x;w<v.__endIndex;w++){var k=e[w];if(k.__inHover&&(h=!0),a._doPaintEl(k,v,s,R,M,w===v.__endIndex-1),b){var O=Date.now()-S;if(O>15)break}}M.prevElClipPaths&&m.restore()};if(y)if(y.length===0)w=v.__endIndex;else for(var D=A.dpr,T=0;T<y.length;++T){var E=y[T];m.save(),m.beginPath(),m.rect(E.x*D,E.y*D,E.width*D,E.height*D),m.clip(),B(E),m.restore()}else m.save(),B(),m.restore();v.__drawIndex=w,v.__drawIndex<v.__endIndex&&(u=!1)},A=this,g=0;g<i.length;g++)d(g);return fr.wxa&&X(this._layers,function(p){p&&p.ctx&&p.ctx.draw&&p.ctx.draw()}),{finished:u,needsRefreshHover:h}},r.prototype._doPaintEl=function(e,t,n,a,i,s){var o=t.ctx;if(n){var l=e.getPaintRect();(!a||l&&l.intersect(a))&&(Rg(o,e,i,s),e.setPrevPaintRect(l))}else Rg(o,e,i,s)},r.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Xf);var n=this._layers[e];return n||(n=new r4("zr_"+e,this,this.dpr),n.zlevel=e,n.__builtin__=!0,this._layerConfig[e]?qt(n,this._layerConfig[e],!0):this._layerConfig[e-TS]&&qt(n,this._layerConfig[e-TS],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},r.prototype.insertLayer=function(e,t){var n=this._layers,a=this._zlevelList,i=a.length,s=this._domRoot,o=null,l=-1;if(!n[e]&&e_e(t)){if(i>0&&e>a[0]){for(l=0;l<i-1&&!(a[l]<e&&a[l+1]>e);l++);o=n[a[l]]}if(a.splice(l+1,0,e),n[e]=t,!t.virtual)if(o){var c=o.dom;c.nextSibling?s.insertBefore(t.dom,c.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom);t.painter||(t.painter=this)}},r.prototype.eachLayer=function(e,t){for(var n=this._zlevelList,a=0;a<n.length;a++){var i=n[a];e.call(t,this._layers[i],i)}},r.prototype.eachBuiltinLayer=function(e,t){for(var n=this._zlevelList,a=0;a<n.length;a++){var i=n[a],s=this._layers[i];s.__builtin__&&e.call(t,s,i)}},r.prototype.eachOtherLayer=function(e,t){for(var n=this._zlevelList,a=0;a<n.length;a++){var i=n[a],s=this._layers[i];s.__builtin__||e.call(t,s,i)}},r.prototype.getLayers=function(){return this._layers},r.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(h,d){h.__dirty=h.__used=!1});function t(h){i&&(i.__endIndex!==h&&(i.__dirty=!0),i.__endIndex=h)}if(this._singleCanvas)for(var n=1;n<e.length;n++){var a=e[n];if(a.zlevel!==e[n-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var i=null,s=0,o,l;for(l=0;l<e.length;l++){var a=e[l],c=a.zlevel,u=void 0;o!==c&&(o=c,s=0),a.incremental?(u=this.getLayer(c+JSe,this._needsManuallyCompositing),u.incremental=!0,s=1):u=this.getLayer(c+(s>0?TS:0),this._needsManuallyCompositing),u.__builtin__||Ik("ZLevel "+c+" has been used by unkown layer "+u.id),u!==i&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,t(l),i=u),a.__dirty&uo&&!a.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(h,d){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},r.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},r.prototype._clearLayer=function(e){e.clear()},r.prototype.setBackgroundColor=function(e){this._backgroundColor=e,X(this._layers,function(t){t.setUnpainted()})},r.prototype.configLayer=function(e,t){if(t){var n=this._layerConfig;n[e]?qt(n[e],t,!0):n[e]=t;for(var a=0;a<this._zlevelList.length;a++){var i=this._zlevelList[a];if(i===e||i===e+TS){var s=this._layers[i];qt(s,n[e],!0)}}}},r.prototype.delLayer=function(e){var t=this._layers,n=this._zlevelList,a=t[e];a&&(a.dom.parentNode.removeChild(a.dom),delete t[e],n.splice(rr(n,e),1))},r.prototype.resize=function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var a=this._opts,i=this.root;if(e!=null&&(a.width=e),t!=null&&(a.height=t),e=_v(i,0,a),t=_v(i,1,a),n.style.display="",this._width!==e||t!==this._height){n.style.width=e+"px",n.style.height=t+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Xf).resize(e,t)}return this},r.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},r.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},r.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Xf].dom;var t=new r4("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var n=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var a=t.dom.width,i=t.dom.height;this.eachLayer(function(h){h.__builtin__?n.drawImage(h.dom,0,0,a,i):h.renderToCanvas&&(n.save(),h.renderToCanvas(n),n.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,c=o.length;l<c;l++){var u=o[l];Rg(n,u,s,l===c-1)}return t.dom},r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r}();function n_e(r){r.registerPainter("canvas",r_e)}var a_e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return Uh(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var n=new Ht,a=Ta("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);n.add(a),a.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),o=i==="none"?"circle":i,l=t.itemHeight*.8,c=Ta(o,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);n.add(c),c.setStyle(t.itemStyle);var u=t.iconRotate==="inherit"?s:t.iconRotate||0;return c.rotation=u*Math.PI/180,c.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),n},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Sn);function T0(r,e){var t=r.mapDimensionsAll("defaultedLabel"),n=t.length;if(n===1){var a=C0(r,e,t[0]);return a!=null?a+"":null}else if(n){for(var i=[],s=0;s<t.length;s++)i.push(C0(r,e,t[s]));return i.join(" ")}}function gne(r,e){var t=r.mapDimensionsAll("defaultedLabel");if(!$e(e))return e+"";for(var n=[],a=0;a<t.length;a++){var i=r.getDimensionIndex(t[a]);i>=0&&n.push(e[i])}return n.join(" ")}var kw=function(r){Pe(e,r);function e(t,n,a,i){var s=r.call(this)||this;return s.updateData(t,n,a,i),s}return e.prototype._createSymbol=function(t,n,a,i,s){this.removeAll();var o=Ta(t,-1,-1,2,2,null,s);o.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),o.drift=i_e,this._symbolType=t,this.add(o)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Ch(this.childAt(0))},e.prototype.downplay=function(){Bh(this.childAt(0))},e.prototype.setZ=function(t,n){var a=this.childAt(0);a.zlevel=t,a.z=n},e.prototype.setDraggable=function(t,n){var a=this.childAt(0);a.draggable=t,a.cursor=!n&&t?"move":a.cursor},e.prototype.updateData=function(t,n,a,i){this.silent=!1;var s=t.getItemVisual(n,"symbol")||"circle",o=t.hostModel,l=e.getSymbolSize(t,n),c=s!==this._symbolType,u=i&&i.disableAnimation;if(c){var h=t.getItemVisual(n,"symbolKeepAspect");this._createSymbol(s,t,n,l,h)}else{var d=this.childAt(0);d.silent=!1;var A={scaleX:l[0]/2,scaleY:l[1]/2};u?d.attr(A):Er(d,A,o,n),nc(d)}if(this._updateCommon(t,n,l,a,i),c){var d=this.childAt(0);if(!u){var A={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:d.style.opacity}};d.scaleX=d.scaleY=0,d.style.opacity=0,jn(d,A,o,n)}}u&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,n,a,i,s){var o=this.childAt(0),l=t.hostModel,c,u,h,d,A,g,p,v,m;if(i&&(c=i.emphasisItemStyle,u=i.blurItemStyle,h=i.selectItemStyle,d=i.focus,A=i.blurScope,p=i.labelStatesModels,v=i.hoverScale,m=i.cursorStyle,g=i.emphasisDisabled),!i||t.hasItemOption){var y=i&&i.itemModel?i.itemModel:t.getItemModel(n),x=y.getModel("emphasis");c=x.getModel("itemStyle").getItemStyle(),h=y.getModel(["select","itemStyle"]).getItemStyle(),u=y.getModel(["blur","itemStyle"]).getItemStyle(),d=x.get("focus"),A=x.get("blurScope"),g=x.get("disabled"),p=ei(y),v=x.getShallow("scale"),m=y.getShallow("cursor")}var b=t.getItemVisual(n,"symbolRotate");o.attr("rotation",(b||0)*Math.PI/180||0);var S=Op(t.getItemVisual(n,"symbolOffset"),a);S&&(o.x=S[0],o.y=S[1]),m&&o.attr("cursor",m);var _=t.getItemVisual(n,"style"),C=_.fill;if(o instanceof fi){var w=o.style;o.useStyle(He({image:w.image,x:w.x,y:w.y,width:w.width,height:w.height},_))}else o.__isEmptyBrush?o.useStyle(He({},_)):o.useStyle(_),o.style.decal=null,o.setColor(C,s&&s.symbolInnerColor),o.style.strokeNoScale=!0;var B=t.getItemVisual(n,"liftZ"),D=this._z2;B!=null?D==null&&(this._z2=o.z2,o.z2+=B):D!=null&&(o.z2=D,this._z2=null);var T=s&&s.useNameLabel;Ni(o,p,{labelFetcher:l,labelDataIndex:n,defaultText:E,inheritColor:C,defaultOpacity:_.opacity});function E(k){return T?t.getName(k):T0(t,k)}this._sizeX=a[0]/2,this._sizeY=a[1]/2;var R=o.ensureState("emphasis");R.style=c,o.ensureState("select").style=h,o.ensureState("blur").style=u;var M=v==null||v===!0?Math.max(1.1,3/this._sizeY):isFinite(v)&&v>0?+v:1;R.scaleX=this._sizeX*M,R.scaleY=this._sizeY*M,this.setSymbolScale(1),qn(this,d,A,g)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,n,a){var i=this.childAt(0),s=Qt(this).dataIndex,o=a&&a.animation;if(this.silent=i.silent=!0,a&&a.fadeLabel){var l=i.getTextContent();l&&QA(l,{style:{opacity:0}},n,{dataIndex:s,removeOpt:o,cb:function(){i.removeTextContent()}})}else i.removeTextContent();QA(i,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:s,cb:t,removeOpt:o})},e.getSymbolSize=function(t,n){return hy(t.getItemVisual(n,"symbolSize"))},e}(Ht);function i_e(r,e){this.parent.drift(r,e)}function n4(r,e,t,n){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(n.isIgnore&&n.isIgnore(t))&&!(n.clipShape&&!n.clipShape.contain(e[0],e[1]))&&r.getItemVisual(t,"symbol")!=="none"}function s7(r){return r!=null&&!Pt(r)&&(r={isIgnore:r}),r||{}}function o7(r){var e=r.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:ei(e),cursorStyle:e.get("cursor")}}var Fw=function(){function r(e){this.group=new Ht,this._SymbolCtor=e||kw}return r.prototype.updateData=function(e,t){this._progressiveEls=null,t=s7(t);var n=this.group,a=e.hostModel,i=this._data,s=this._SymbolCtor,o=t.disableAnimation,l=o7(e),c={disableAnimation:o},u=t.getSymbolPoint||function(h){return e.getItemLayout(h)};i||n.removeAll(),e.diff(i).add(function(h){var d=u(h);if(n4(e,d,h,t)){var A=new s(e,h,l,c);A.setPosition(d),e.setItemGraphicEl(h,A),n.add(A)}}).update(function(h,d){var A=i.getItemGraphicEl(d),g=u(h);if(!n4(e,g,h,t)){n.remove(A);return}var p=e.getItemVisual(h,"symbol")||"circle",v=A&&A.getSymbolType&&A.getSymbolType();if(!A||v&&v!==p)n.remove(A),A=new s(e,h,l,c),A.setPosition(g);else{A.updateData(e,h,l,c);var m={x:g[0],y:g[1]};o?A.attr(m):Er(A,m,a)}n.add(A),e.setItemGraphicEl(h,A)}).remove(function(h){var d=i.getItemGraphicEl(h);d&&d.fadeOut(function(){n.remove(d)},a)}).execute(),this._getSymbolPoint=u,this._data=e},r.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(n,a){var i=e._getSymbolPoint(a);n.setPosition(i),n.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=o7(e),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t,n){this._progressiveEls=[],n=s7(n);function a(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var s=t.getItemLayout(i);if(n4(t,s,i,n)){var o=new this._SymbolCtor(t,i,this._seriesScope);o.traverse(a),o.setPosition(s),this.group.add(o),t.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},r.prototype.eachRendered=function(e){nf(this._progressiveEls||this.group,e)},r.prototype.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(a){a.fadeOut(function(){t.remove(a)},n.hostModel)}):t.removeAll()},r}();function pne(r,e,t){var n=r.getBaseAxis(),a=r.getOtherAxis(n),i=s_e(a,t),s=n.dim,o=a.dim,l=e.mapDimension(o),c=e.mapDimension(s),u=o==="x"||o==="radius"?1:0,h=We(r.dimensions,function(g){return e.mapDimension(g)}),d=!1,A=e.getCalculationInfo("stackResultDimension");return GA(e,h[0])&&(d=!0,h[0]=A),GA(e,h[1])&&(d=!0,h[1]=A),{dataDimsForPoint:h,valueStart:i,valueAxisDim:o,baseAxisDim:s,stacked:!!d,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function s_e(r,e){var t=0,n=r.scale.getExtent();return e==="start"?t=n[0]:e==="end"?t=n[1]:Br(e)&&!isNaN(e)?t=e:n[0]>0?t=n[0]:n[1]<0&&(t=n[1]),t}function mne(r,e,t,n){var a=NaN;r.stacked&&(a=t.get(t.getCalculationInfo("stackedOverDimension"),n)),isNaN(a)&&(a=r.valueStart);var i=r.baseDataOffset,s=[];return s[i]=t.get(r.baseDim,n),s[1-i]=a,e.dataToPoint(s)}function o_e(r,e){var t=[];return e.diff(r).add(function(n){t.push({cmd:"+",idx:n})}).update(function(n,a){t.push({cmd:"=",idx:a,idx1:n})}).remove(function(n){t.push({cmd:"-",idx:n})}).execute(),t}function l_e(r,e,t,n,a,i,s,o){for(var l=o_e(r,e),c=[],u=[],h=[],d=[],A=[],g=[],p=[],v=pne(a,e,s),m=r.getLayout("points")||[],y=e.getLayout("points")||[],x=0;x<l.length;x++){var b=l[x],S=!0,_=void 0,C=void 0;switch(b.cmd){case"=":_=b.idx*2,C=b.idx1*2;var w=m[_],B=m[_+1],D=y[C],T=y[C+1];(isNaN(w)||isNaN(B))&&(w=D,B=T),c.push(w,B),u.push(D,T),h.push(t[_],t[_+1]),d.push(n[C],n[C+1]),p.push(e.getRawIndex(b.idx1));break;case"+":var E=b.idx,R=v.dataDimsForPoint,M=a.dataToPoint([e.get(R[0],E),e.get(R[1],E)]);C=E*2,c.push(M[0],M[1]),u.push(y[C],y[C+1]);var k=mne(v,a,e,E);h.push(k[0],k[1]),d.push(n[C],n[C+1]),p.push(e.getRawIndex(E));break;case"-":S=!1}S&&(A.push(b),g.push(g.length))}g.sort(function(Z,de){return p[Z]-p[de]});for(var O=c.length,Q=Gc(O),H=Gc(O),W=Gc(O),te=Gc(O),ee=[],x=0;x<g.length;x++){var j=g[x],G=x*2,Y=j*2;Q[G]=c[Y],Q[G+1]=c[Y+1],H[G]=u[Y],H[G+1]=u[Y+1],W[G]=h[Y],W[G+1]=h[Y+1],te[G]=d[Y],te[G+1]=d[Y+1],ee[x]=A[j]}return{current:Q,next:H,stackedOnCurrent:W,stackedOnNext:te,status:ee}}var _d=Math.min,Cd=Math.max;function np(r,e){return isNaN(r)||isNaN(e)}function CR(r,e,t,n,a,i,s,o,l){for(var c,u,h,d,A,g,p=t,v=0;v<n;v++){var m=e[p*2],y=e[p*2+1];if(p>=a||p<0)break;if(np(m,y)){if(l){p+=i;continue}break}if(p===t)r[i>0?"moveTo":"lineTo"](m,y),h=m,d=y;else{var x=m-c,b=y-u;if(x*x+b*b<.5){p+=i;continue}if(s>0){for(var S=p+i,_=e[S*2],C=e[S*2+1];_===m&&C===y&&v<n;)v++,S+=i,p+=i,_=e[S*2],C=e[S*2+1],m=e[p*2],y=e[p*2+1],x=m-c,b=y-u;var w=v+1;if(l)for(;np(_,C)&&w<n;)w++,S+=i,_=e[S*2],C=e[S*2+1];var B=.5,D=0,T=0,E=void 0,R=void 0;if(w>=n||np(_,C))A=m,g=y;else{D=_-c,T=C-u;var M=m-c,k=_-m,O=y-u,Q=C-y,H=void 0,W=void 0;if(o==="x"){H=Math.abs(M),W=Math.abs(k);var te=D>0?1:-1;A=m-te*H*s,g=y,E=m+te*W*s,R=y}else if(o==="y"){H=Math.abs(O),W=Math.abs(Q);var ee=T>0?1:-1;A=m,g=y-ee*H*s,E=m,R=y+ee*W*s}else H=Math.sqrt(M*M+O*O),W=Math.sqrt(k*k+Q*Q),B=W/(W+H),A=m-D*s*(1-B),g=y-T*s*(1-B),E=m+D*s*B,R=y+T*s*B,E=_d(E,Cd(_,m)),R=_d(R,Cd(C,y)),E=Cd(E,_d(_,m)),R=Cd(R,_d(C,y)),D=E-m,T=R-y,A=m-D*H/W,g=y-T*H/W,A=_d(A,Cd(c,m)),g=_d(g,Cd(u,y)),A=Cd(A,_d(c,m)),g=Cd(g,_d(u,y)),D=m-A,T=y-g,E=m+D*W/H,R=y+T*W/H}r.bezierCurveTo(h,d,A,g,m,y),h=E,d=R}else r.lineTo(m,y)}c=m,u=y,p+=i}return v}var vne=function(){function r(){this.smooth=0,this.smoothConstraint=!0}return r}(),c_e=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="ec-polyline",n}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new vne},e.prototype.buildPath=function(t,n){var a=n.points,i=0,s=a.length/2;if(n.connectNulls){for(;s>0&&np(a[s*2-2],a[s*2-1]);s--);for(;i<s&&np(a[i*2],a[i*2+1]);i++);}for(;i<s;)i+=CR(t,a,i,s,s,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},e.prototype.getPointOn=function(t,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var a=this.path,i=a.data,s=ou.CMD,o,l,c=n==="x",u=[],h=0;h<i.length;){var d=i[h++],A=void 0,g=void 0,p=void 0,v=void 0,m=void 0,y=void 0,x=void 0;switch(d){case s.M:o=i[h++],l=i[h++];break;case s.L:if(A=i[h++],g=i[h++],x=c?(t-o)/(A-o):(t-l)/(g-l),x<=1&&x>=0){var b=c?(g-l)*x+l:(A-o)*x+o;return c?[t,b]:[b,t]}o=A,l=g;break;case s.C:A=i[h++],g=i[h++],p=i[h++],v=i[h++],m=i[h++],y=i[h++];var S=c?dC(o,A,p,m,t,u):dC(l,g,v,y,t,u);if(S>0)for(var _=0;_<S;_++){var C=u[_];if(C<=1&&C>=0){var b=c?$a(l,g,v,y,C):$a(o,A,p,m,C);return c?[t,b]:[b,t]}}o=m,l=y;break}}},e}(hr),u_e=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(vne),yne=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="ec-polygon",n}return e.prototype.getDefaultShape=function(){return new u_e},e.prototype.buildPath=function(t,n){var a=n.points,i=n.stackedOnPoints,s=0,o=a.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;o>0&&np(a[o*2-2],a[o*2-1]);o--);for(;s<o&&np(a[s*2],a[s*2+1]);s++);}for(;s<o;){var c=CR(t,a,s,o,o,1,n.smooth,l,n.connectNulls);CR(t,i,s+c-1,c,o,-1,n.stackedOnSmooth,l,n.connectNulls),s+=c+1,t.closePath()}},e}(hr);function xne(r,e,t,n,a){var i=r.getArea(),s=i.x,o=i.y,l=i.width,c=i.height,u=t.get(["lineStyle","width"])||0;s-=u/2,o-=u/2,l+=u,c+=u,l=Math.ceil(l),s!==Math.floor(s)&&(s=Math.floor(s),l++);var h=new br({shape:{x:s,y:o,width:l,height:c}});if(e){var d=r.getBaseAxis(),A=d.isHorizontal(),g=d.inverse;A?(g&&(h.shape.x+=l),h.shape.width=0):(g||(h.shape.y+=c),h.shape.height=0);var p=It(a)?function(v){a(v,h)}:null;jn(h,{shape:{width:l,height:c,x:s,y:o}},t,null,n,p)}return h}function bne(r,e,t){var n=r.getArea(),a=aa(n.r0,1),i=aa(n.r,1),s=new ms({shape:{cx:aa(r.cx,1),cy:aa(r.cy,1),r0:a,r:i,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(e){var o=r.getBaseAxis().dim==="angle";o?s.shape.endAngle=n.startAngle:s.shape.r=a,jn(s,{shape:{endAngle:n.endAngle,r:i}},t)}return s}function jw(r,e,t,n,a){if(r){if(r.type==="polar")return bne(r,e,t);if(r.type==="cartesian2d")return xne(r,e,t,n,a)}else return null;return null}function Hp(r,e){return r.type===e}function l7(r,e){if(r.length===e.length){for(var t=0;t<r.length;t++)if(r[t]!==e[t])return;return!0}}function c7(r){for(var e=1/0,t=1/0,n=-1/0,a=-1/0,i=0;i<r.length;){var s=r[i++],o=r[i++];isNaN(s)||(e=Math.min(s,e),n=Math.max(s,n)),isNaN(o)||(t=Math.min(o,t),a=Math.max(o,a))}return[[e,t],[n,a]]}function u7(r,e){var t=c7(r),n=t[0],a=t[1],i=c7(e),s=i[0],o=i[1];return Math.max(Math.abs(n[0]-s[0]),Math.abs(n[1]-s[1]),Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]))}function h7(r){return Br(r)?r:r?.5:0}function h_e(r,e,t){if(!t.valueDim)return[];for(var n=e.count(),a=Gc(n*2),i=0;i<n;i++){var s=mne(t,r,e,i);a[i*2]=s[0],a[i*2+1]=s[1]}return a}function Bd(r,e,t,n,a){var i=t.getBaseAxis(),s=i.dim==="x"||i.dim==="radius"?0:1,o=[],l=0,c=[],u=[],h=[],d=[];if(a){for(l=0;l<r.length;l+=2){var A=e||r;!isNaN(A[l])&&!isNaN(A[l+1])&&d.push(r[l],r[l+1])}r=d}for(l=0;l<r.length-2;l+=2)switch(h[0]=r[l+2],h[1]=r[l+3],u[0]=r[l],u[1]=r[l+1],o.push(u[0],u[1]),n){case"end":c[s]=h[s],c[1-s]=u[1-s],o.push(c[0],c[1]);break;case"middle":var g=(u[s]+h[s])/2,p=[];c[s]=p[s]=g,c[1-s]=u[1-s],p[1-s]=h[1-s],o.push(c[0],c[1]),o.push(p[0],p[1]);break;default:c[s]=u[s],c[1-s]=h[1-s],o.push(c[0],c[1])}return o.push(r[l++],r[l++]),o}function d_e(r,e){var t=[],n=r.length,a,i;function s(u,h,d){var A=u.coord,g=(d-A)/(h.coord-A),p=t0e(g,[u.color,h.color]);return{coord:d,color:p}}for(var o=0;o<n;o++){var l=r[o],c=l.coord;if(c<0)a=l;else if(c>e){i?t.push(s(i,l,e)):a&&t.push(s(a,l,0),s(a,l,e));break}else a&&(t.push(s(a,l,0)),a=null),t.push(l),i=l}return t}function A_e(r,e,t){var n=r.getVisual("visualMeta");if(!(!n||!n.length||!r.count())&&e.type==="cartesian2d"){for(var a,i,s=n.length-1;s>=0;s--){var o=r.getDimensionInfo(n[s].dimension);if(a=o&&o.coordDim,a==="x"||a==="y"){i=n[s];break}}if(i){var l=e.getAxis(a),c=We(i.stops,function(x){return{coord:l.toGlobalCoord(l.dataToCoord(x.value)),color:x.color}}),u=c.length,h=i.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),h.reverse());var d=d_e(c,a==="x"?t.getWidth():t.getHeight()),A=d.length;if(!A&&u)return c[0].coord<0?h[1]?h[1]:c[u-1].color:h[0]?h[0]:c[0].color;var g=10,p=d[0].coord-g,v=d[A-1].coord+g,m=v-p;if(m<.001)return"transparent";X(d,function(x){x.offset=(x.coord-p)/m}),d.push({offset:A?d[A-1].offset:.5,color:h[1]||"transparent"}),d.unshift({offset:A?d[0].offset:.5,color:h[0]||"transparent"});var y=new Iw(0,0,0,0,d,!0);return y[a]=p,y[a+"2"]=v,y}}}function f_e(r,e,t){var n=r.get("showAllSymbol"),a=n==="auto";if(!(n&&!a)){var i=t.getAxesByScale("ordinal")[0];if(i&&!(a&&g_e(i,e))){var s=e.mapDimension(i.dim),o={};return X(i.getViewLabels(),function(l){var c=i.scale.getRawOrdinalNumber(l.tickValue);o[c]=1}),function(l){return!o.hasOwnProperty(e.get(s,l))}}}}function g_e(r,e){var t=r.getExtent(),n=Math.abs(t[1]-t[0])/r.scale.count();isNaN(n)&&(n=0);for(var a=e.count(),i=Math.max(1,Math.round(a/5)),s=0;s<a;s+=i)if(kw.getSymbolSize(e,s)[r.isHorizontal()?1:0]*1.5>n)return!1;return!0}function p_e(r,e){return isNaN(r)||isNaN(e)}function m_e(r){for(var e=r.length/2;e>0&&p_e(r[e*2-2],r[e*2-1]);e--);return e-1}function d7(r,e){return[r[e*2],r[e*2+1]]}function v_e(r,e,t){for(var n=r.length/2,a=t==="x"?0:1,i,s,o=0,l=-1,c=0;c<n;c++)if(s=r[c*2+a],!(isNaN(s)||isNaN(r[c*2+1-a]))){if(c===0){i=s;continue}if(i<=e&&s>=e||i>=e&&s<=e){l=c;break}o=c,i=s}return{range:[o,l],t:(e-i)/(s-i)}}function wne(r){if(r.get(["endLabel","show"]))return!0;for(var e=0;e<ps.length;e++)if(r.get([ps[e],"endLabel","show"]))return!0;return!1}function a4(r,e,t,n){if(Hp(e,"cartesian2d")){var a=n.getModel("endLabel"),i=a.get("valueAnimation"),s=n.getData(),o={lastFrameIndex:0},l=wne(n)?function(A,g){r._endLabelOnDuring(A,g,s,o,i,a,e)}:null,c=e.getBaseAxis().isHorizontal(),u=xne(e,t,n,function(){var A=r._endLabel;A&&t&&o.originalX!=null&&A.attr({x:o.originalX,y:o.originalY})},l);if(!n.get("clip",!0)){var h=u.shape,d=Math.max(h.width,h.height);c?(h.y-=d,h.height+=d*2):(h.x-=d,h.width+=d*2)}return l&&l(1,u),u}else return bne(e,t,n)}function y_e(r,e){var t=e.getBaseAxis(),n=t.isHorizontal(),a=t.inverse,i=n?a?"right":"left":"center",s=n?"middle":a?"top":"bottom";return{normal:{align:r.get("align")||i,verticalAlign:r.get("verticalAlign")||s}}}var x_e=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(){var t=new Ht,n=new Fw;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=t,this._changePolyState=ft(this._changePolyState,this)},e.prototype.render=function(t,n,a){var i=t.coordinateSystem,s=this.group,o=t.getData(),l=t.getModel("lineStyle"),c=t.getModel("areaStyle"),u=o.getLayout("points")||[],h=i.type==="polar",d=this._coordSys,A=this._symbolDraw,g=this._polyline,p=this._polygon,v=this._lineGroup,m=!n.ssr&&t.get("animation"),y=!c.isEmpty(),x=c.get("origin"),b=pne(i,o,x),S=y&&h_e(i,o,b),_=t.get("showSymbol"),C=t.get("connectNulls"),w=_&&!h&&f_e(t,o,i),B=this._data;B&&B.eachItemGraphicEl(function(Z,de){Z.__temp&&(s.remove(Z),B.setItemGraphicEl(de,null))}),_||A.remove(),s.add(v);var D=h?!1:t.get("step"),T;i&&i.getArea&&t.get("clip",!0)&&(T=i.getArea(),T.width!=null?(T.x-=.1,T.y-=.1,T.width+=.2,T.height+=.2):T.r0&&(T.r0-=.5,T.r+=.5)),this._clipShapeForSymbol=T;var E=A_e(o,i,a)||o.getVisual("style")[o.getVisual("drawType")];if(!(g&&d.type===i.type&&D===this._step))_&&A.updateData(o,{isIgnore:w,clipShape:T,disableAnimation:!0,getSymbolPoint:function(Z){return[u[Z*2],u[Z*2+1]]}}),m&&this._initSymbolLabelAnimation(o,i,T),D&&(S&&(S=Bd(S,u,i,D,C)),u=Bd(u,null,i,D,C)),g=this._newPolyline(u),y?p=this._newPolygon(u,S):p&&(v.remove(p),p=this._polygon=null),h||this._initOrUpdateEndLabel(t,i,bp(E)),v.setClipPath(a4(this,i,!0,t));else{y&&!p?p=this._newPolygon(u,S):p&&!y&&(v.remove(p),p=this._polygon=null),h||this._initOrUpdateEndLabel(t,i,bp(E));var R=v.getClipPath();if(R){var M=a4(this,i,!1,t);jn(R,{shape:M.shape},t)}else v.setClipPath(a4(this,i,!0,t));_&&A.updateData(o,{isIgnore:w,clipShape:T,disableAnimation:!0,getSymbolPoint:function(Z){return[u[Z*2],u[Z*2+1]]}}),(!l7(this._stackedOnPoints,S)||!l7(this._points,u))&&(m?this._doUpdateAnimation(o,S,i,a,D,x,C):(D&&(S&&(S=Bd(S,u,i,D,C)),u=Bd(u,null,i,D,C)),g.setShape({points:u}),p&&p.setShape({points:u,stackedOnPoints:S})))}var k=t.getModel("emphasis"),O=k.get("focus"),Q=k.get("blurScope"),H=k.get("disabled");if(g.useStyle(Lt(l.getLineStyle(),{fill:"none",stroke:E,lineJoin:"bevel"})),Bi(g,t,"lineStyle"),g.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var W=g.getState("emphasis").style;W.lineWidth=+g.style.lineWidth+1}Qt(g).seriesIndex=t.seriesIndex,qn(g,O,Q,H);var te=h7(t.get("smooth")),ee=t.get("smoothMonotone");if(g.setShape({smooth:te,smoothMonotone:ee,connectNulls:C}),p){var j=o.getCalculationInfo("stackedOnSeries"),G=0;p.useStyle(Lt(c.getAreaStyle(),{fill:E,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),j&&(G=h7(j.get("smooth"))),p.setShape({smooth:te,stackedOnSmooth:G,smoothMonotone:ee,connectNulls:C}),Bi(p,t,"areaStyle"),Qt(p).seriesIndex=t.seriesIndex,qn(p,O,Q,H)}var Y=this._changePolyState;o.eachItemGraphicEl(function(Z){Z&&(Z.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=o,this._coordSys=i,this._stackedOnPoints=S,this._points=u,this._step=D,this._valueOrigin=x,t.get("triggerLineEvent")&&(this.packEventData(t,g),p&&this.packEventData(t,p))},e.prototype.packEventData=function(t,n){Qt(n).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,n,a,i){var s=t.getData(),o=vp(s,i);if(this._changePolyState("emphasis"),!(o instanceof Array)&&o!=null&&o>=0){var l=s.getLayout("points"),c=s.getItemGraphicEl(o);if(!c){var u=l[o*2],h=l[o*2+1];if(isNaN(u)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(u,h))return;var d=t.get("zlevel")||0,A=t.get("z")||0;c=new kw(s,o),c.x=u,c.y=h,c.setZ(d,A);var g=c.getSymbolPath().getTextContent();g&&(g.zlevel=d,g.z=A,g.z2=this._polyline.z2+1),c.__temp=!0,s.setItemGraphicEl(o,c),c.stopSymbolAnimation(!0),this.group.add(c)}c.highlight()}else nn.prototype.highlight.call(this,t,n,a,i)},e.prototype.downplay=function(t,n,a,i){var s=t.getData(),o=vp(s,i);if(this._changePolyState("normal"),o!=null&&o>=0){var l=s.getItemGraphicEl(o);l&&(l.__temp?(s.setItemGraphicEl(o,null),this.group.remove(l)):l.downplay())}else nn.prototype.downplay.call(this,t,n,a,i)},e.prototype._changePolyState=function(t){var n=this._polygon;yC(this._polyline,t),n&&yC(n,t)},e.prototype._newPolyline=function(t){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new c_e({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},e.prototype._newPolygon=function(t,n){var a=this._polygon;return a&&this._lineGroup.remove(a),a=new yne({shape:{points:t,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(a),this._polygon=a,a},e.prototype._initSymbolLabelAnimation=function(t,n,a){var i,s,o=n.getBaseAxis(),l=o.inverse;n.type==="cartesian2d"?(i=o.isHorizontal(),s=!1):n.type==="polar"&&(i=o.dim==="angle",s=!0);var c=t.hostModel,u=c.get("animationDuration");It(u)&&(u=u(null));var h=c.get("animationDelay")||0,d=It(h)?h(null):h;t.eachItemGraphicEl(function(A,g){var p=A;if(p){var v=[A.x,A.y],m=void 0,y=void 0,x=void 0;if(a)if(s){var b=a,S=n.pointToCoord(v);i?(m=b.startAngle,y=b.endAngle,x=-S[1]/180*Math.PI):(m=b.r0,y=b.r,x=S[0])}else{var _=a;i?(m=_.x,y=_.x+_.width,x=A.x):(m=_.y+_.height,y=_.y,x=A.y)}var C=y===m?0:(x-m)/(y-m);l&&(C=1-C);var w=It(h)?h(g):u*C+d,B=p.getSymbolPath(),D=B.getTextContent();p.attr({scaleX:0,scaleY:0}),p.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:w}),D&&D.animateFrom({style:{opacity:0}},{duration:300,delay:w}),B.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,n,a){var i=t.getModel("endLabel");if(wne(t)){var s=t.getData(),o=this._polyline,l=s.getLayout("points");if(!l){o.removeTextContent(),this._endLabel=null;return}var c=this._endLabel;c||(c=this._endLabel=new Cr({z2:200}),c.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var u=m_e(l);u>=0&&(Ni(o,ei(t,"endLabel"),{inheritColor:a,labelFetcher:t,labelDataIndex:u,defaultText:function(h,d,A){return A!=null?gne(s,A):T0(s,h)},enableTextSetter:!0},y_e(i,n)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,n,a,i,s,o,l){var c=this._endLabel,u=this._polyline;if(c){t<1&&i.originalX==null&&(i.originalX=c.x,i.originalY=c.y);var h=a.getLayout("points"),d=a.hostModel,A=d.get("connectNulls"),g=o.get("precision"),p=o.get("distance")||0,v=l.getBaseAxis(),m=v.isHorizontal(),y=v.inverse,x=n.shape,b=y?m?x.x:x.y+x.height:m?x.x+x.width:x.y,S=(m?p:0)*(y?-1:1),_=(m?0:-p)*(y?-1:1),C=m?"x":"y",w=v_e(h,b,C),B=w.range,D=B[1]-B[0],T=void 0;if(D>=1){if(D>1&&!A){var E=d7(h,B[0]);c.attr({x:E[0]+S,y:E[1]+_}),s&&(T=d.getRawValue(B[0]))}else{var E=u.getPointOn(b,C);E&&c.attr({x:E[0]+S,y:E[1]+_});var R=d.getRawValue(B[0]),M=d.getRawValue(B[1]);s&&(T=see(a,g,R,M,w.t))}i.lastFrameIndex=B[0]}else{var k=t===1||i.lastFrameIndex>0?B[0]:0,E=d7(h,k);s&&(T=d.getRawValue(k)),c.attr({x:E[0]+S,y:E[1]+_})}if(s){var O=ay(c);typeof O.setLabelText=="function"&&O.setLabelText(T)}}},e.prototype._doUpdateAnimation=function(t,n,a,i,s,o,l){var c=this._polyline,u=this._polygon,h=t.hostModel,d=l_e(this._data,t,this._stackedOnPoints,n,this._coordSys,a,this._valueOrigin),A=d.current,g=d.stackedOnCurrent,p=d.next,v=d.stackedOnNext;if(s&&(g=Bd(d.stackedOnCurrent,d.current,a,s,l),A=Bd(d.current,null,a,s,l),v=Bd(d.stackedOnNext,d.next,a,s,l),p=Bd(d.next,null,a,s,l)),u7(A,p)>3e3||u&&u7(g,v)>3e3){c.stopAnimation(),c.setShape({points:p}),u&&(u.stopAnimation(),u.setShape({points:p,stackedOnPoints:v}));return}c.shape.__points=d.current,c.shape.points=A;var m={shape:{points:p}};d.current!==A&&(m.shape.__points=d.next),c.stopAnimation(),Er(c,m,h),u&&(u.setShape({points:A,stackedOnPoints:g}),u.stopAnimation(),Er(u,{shape:{stackedOnPoints:v}},h),c.shape.points!==u.shape.points&&(u.shape.points=c.shape.points));for(var y=[],x=d.status,b=0;b<x.length;b++){var S=x[b].cmd;if(S==="="){var _=t.getItemGraphicEl(x[b].idx1);_&&y.push({el:_,ptIdx:b})}}c.animators&&c.animators.length&&c.animators[0].during(function(){u&&u.dirtyShape();for(var C=c.shape.__points,w=0;w<y.length;w++){var B=y[w].el,D=y[w].ptIdx*2;B.x=C[D],B.y=C[D+1],B.markRedraw()}})},e.prototype.remove=function(t){var n=this.group,a=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),a&&a.eachItemGraphicEl(function(i,s){i.__temp&&(n.remove(i),a.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(nn);function Ow(r,e){return{seriesType:r,plan:cy(),reset:function(t){var n=t.getData(),a=t.coordinateSystem,i=t.pipelineContext,s=e||i.large;if(a){var o=We(a.dimensions,function(A){return n.mapDimension(A)}).slice(0,2),l=o.length,c=n.getCalculationInfo("stackResultDimension");GA(n,o[0])&&(o[0]=c),GA(n,o[1])&&(o[1]=c);var u=n.getStore(),h=n.getDimensionIndex(o[0]),d=n.getDimensionIndex(o[1]);return l&&{progress:function(A,g){for(var p=A.end-A.start,v=s&&Gc(p*l),m=[],y=[],x=A.start,b=0;x<A.end;x++){var S=void 0;if(l===1){var _=u.get(h,x);S=a.dataToPoint(_,null,y)}else m[0]=u.get(h,x),m[1]=u.get(d,x),S=a.dataToPoint(m,null,y);s?(v[b++]=S[0],v[b++]=S[1]):g.setItemLayout(x,S.slice())}s&&g.setLayout("points",v)}}}}}}var b_e={average:function(r){for(var e=0,t=0,n=0;n<r.length;n++)isNaN(r[n])||(e+=r[n],t++);return t===0?NaN:e/t},sum:function(r){for(var e=0,t=0;t<r.length;t++)e+=r[t]||0;return e},max:function(r){for(var e=-1/0,t=0;t<r.length;t++)r[t]>e&&(e=r[t]);return isFinite(e)?e:NaN},min:function(r){for(var e=1/0,t=0;t<r.length;t++)r[t]<e&&(e=r[t]);return isFinite(e)?e:NaN},nearest:function(r){return r[0]}},w_e=function(r){return Math.round(r.length/2)};function Sne(r){return{seriesType:r,reset:function(e,t,n){var a=e.getData(),i=e.get("sampling"),s=e.coordinateSystem,o=a.count();if(o>10&&s.type==="cartesian2d"&&i){var l=s.getBaseAxis(),c=s.getOtherAxis(l),u=l.getExtent(),h=n.getDevicePixelRatio(),d=Math.abs(u[1]-u[0])*(h||1),A=Math.round(o/d);if(isFinite(A)&&A>1){i==="lttb"?e.setData(a.lttbDownSample(a.mapDimension(c.dim),1/A)):i==="minmax"&&e.setData(a.minmaxDownSample(a.mapDimension(c.dim),1/A));var g=void 0;dt(i)?g=b_e[i]:It(i)&&(g=i),g&&e.setData(a.downSample(a.mapDimension(c.dim),1/A,g,w_e))}}}}}function S_e(r){r.registerChartView(x_e),r.registerSeriesModel(a_e),r.registerLayout(Ow("line",!0)),r.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),n=e.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",n)}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,Sne("line"))}var Pb=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,n){return Uh(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,n,a){var i=this.coordinateSystem;if(i&&i.clampData){var s=i.clampData(t),o=i.dataToPoint(s);if(a)X(i.getAxes(),function(d,A){if(d.type==="category"&&n!=null){var g=d.getTicksCoords(),p=d.getTickModel().get("alignWithLabel"),v=s[A],m=n[A]==="x1"||n[A]==="y1";if(m&&!p&&(v+=1),g.length<2)return;if(g.length===2){o[A]=d.toGlobalCoord(d.getExtent()[m?1:0]);return}for(var y=void 0,x=void 0,b=1,S=0;S<g.length;S++){var _=g[S].coord,C=S===g.length-1?g[S-1].tickValue+b:g[S].tickValue;if(C===v){x=_;break}else if(C<v)y=_;else if(y!=null&&C>v){x=(_+y)/2;break}S===1&&(b=C-g[0].tickValue)}x==null&&(y?y&&(x=g[g.length-1].coord):x=g[0].coord),o[A]=d.toGlobalCoord(x)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),h=i.getBaseAxis().isHorizontal()?0:1;o[h]+=c+u/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Sn);Sn.registerClass(Pb);var __e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return Uh(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>t&&(t=n),t},e.prototype.brushSelector=function(t,n,a){return a.rect(n.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=af(Pb.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(Pb),C_e=function(){function r(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return r}(),jC=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="sausage",n}return e.prototype.getDefaultShape=function(){return new C_e},e.prototype.buildPath=function(t,n){var a=n.cx,i=n.cy,s=Math.max(n.r0||0,0),o=Math.max(n.r,0),l=(o-s)*.5,c=s+l,u=n.startAngle,h=n.endAngle,d=n.clockwise,A=Math.PI*2,g=d?h-u<A:u-h<A;g||(u=h-(d?A:-A));var p=Math.cos(u),v=Math.sin(u),m=Math.cos(h),y=Math.sin(h);g?(t.moveTo(p*s+a,v*s+i),t.arc(p*c+a,v*c+i,l,-Math.PI+u,u,!d)):t.moveTo(p*o+a,v*o+i),t.arc(a,i,o,u,h,!d),t.arc(m*c+a,y*c+i,l,h-Math.PI*2,h-Math.PI,!d),s!==0&&t.arc(a,i,s,h,u,d)},e}(hr);function B_e(r,e){e=e||{};var t=e.isRoundCap;return function(n,a,i){var s=a.position;if(!s||s instanceof Array)return mC(n,a,i);var o=r(s),l=a.distance!=null?a.distance:5,c=this.shape,u=c.cx,h=c.cy,d=c.r,A=c.r0,g=(d+A)/2,p=c.startAngle,v=c.endAngle,m=(p+v)/2,y=t?Math.abs(d-A)/2:0,x=Math.cos,b=Math.sin,S=u+d*x(p),_=h+d*b(p),C="left",w="top";switch(o){case"startArc":S=u+(A-l)*x(m),_=h+(A-l)*b(m),C="center",w="top";break;case"insideStartArc":S=u+(A+l)*x(m),_=h+(A+l)*b(m),C="center",w="bottom";break;case"startAngle":S=u+g*x(p)+IS(p,l+y,!1),_=h+g*b(p)+ES(p,l+y,!1),C="right",w="middle";break;case"insideStartAngle":S=u+g*x(p)+IS(p,-l+y,!1),_=h+g*b(p)+ES(p,-l+y,!1),C="left",w="middle";break;case"middle":S=u+g*x(m),_=h+g*b(m),C="center",w="middle";break;case"endArc":S=u+(d+l)*x(m),_=h+(d+l)*b(m),C="center",w="bottom";break;case"insideEndArc":S=u+(d-l)*x(m),_=h+(d-l)*b(m),C="center",w="top";break;case"endAngle":S=u+g*x(v)+IS(v,l+y,!0),_=h+g*b(v)+ES(v,l+y,!0),C="left",w="middle";break;case"insideEndAngle":S=u+g*x(v)+IS(v,-l+y,!0),_=h+g*b(v)+ES(v,-l+y,!0),C="right",w="middle";break;default:return mC(n,a,i)}return n=n||{},n.x=S,n.y=_,n.align=C,n.verticalAlign=w,n}}function N_e(r,e,t,n){if(Br(n)){r.setTextConfig({rotation:n});return}else if($e(e)){r.setTextConfig({rotation:0});return}var a=r.shape,i=a.clockwise?a.startAngle:a.endAngle,s=a.clockwise?a.endAngle:a.startAngle,o=(i+s)/2,l,c=t(e);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=o;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=s;break;default:r.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),r.setTextConfig({rotation:u})}function IS(r,e,t){return e*Math.sin(r)*(t?-1:1)}function ES(r,e,t){return e*Math.cos(r)*(t?1:-1)}function Lg(r,e,t){var n=r.get("borderRadius");if(n==null)return t?{cornerRadius:0}:null;$e(n)||(n=[n,n,n,n]);var a=Math.abs(e.r||0-e.r0||0);return{cornerRadius:We(n,function(i){return rc(i,a)})}}var i4=Math.max,s4=Math.min;function T_e(r,e){var t=r.getArea&&r.getArea();if(Hp(r,"cartesian2d")){var n=r.getBaseAxis();if(n.type!=="category"||!n.onBand){var a=e.getLayout("bandWidth");n.isHorizontal()?(t.x-=a,t.width+=a*2):(t.y-=a,t.height+=a*2)}}return t}var I_e=function(r){Pe(e,r);function e(){var t=r.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,n,a,i){this._model=t,this._removeOnRenderedListener(a),this._updateDrawMode(t);var s=t.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,n,a):this._renderNormal(t,n,a,i))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,n){this._progressiveEls=[],this._incrementalRenderLarge(t,n)},e.prototype.eachRendered=function(t){nf(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var n=t.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},e.prototype._renderNormal=function(t,n,a,i){var s=this.group,o=t.getData(),l=this._data,c=t.coordinateSystem,u=c.getBaseAxis(),h;c.type==="cartesian2d"?h=u.isHorizontal():c.type==="polar"&&(h=u.dim==="angle");var d=t.isAnimationEnabled()?t:null,A=E_e(t,c);A&&this._enableRealtimeSort(A,o,a);var g=t.get("clip",!0)||A,p=T_e(c,o);s.removeClipPath();var v=t.get("roundCap",!0),m=t.get("showBackground",!0),y=t.getModel("backgroundStyle"),x=y.get("borderRadius")||0,b=[],S=this._backgroundEls,_=i&&i.isInitSort,C=i&&i.type==="changeAxisOrder";function w(T){var E=DS[c.type](o,T),R=F_e(c,h,E);return R.useStyle(y.getItemStyle()),c.type==="cartesian2d"?R.setShape("r",x):R.setShape("cornerRadius",x),b[T]=R,R}o.diff(l).add(function(T){var E=o.getItemModel(T),R=DS[c.type](o,T,E);if(m&&w(T),!(!o.hasValue(T)||!m7[c.type](R))){var M=!1;g&&(M=A7[c.type](p,R));var k=f7[c.type](t,o,T,R,h,d,u.model,!1,v);A&&(k.forceLabelAnimation=!0),v7(k,o,T,E,R,t,h,c.type==="polar"),_?k.attr({shape:R}):A?g7(A,d,k,R,T,h,!1,!1):jn(k,{shape:R},t,T),o.setItemGraphicEl(T,k),s.add(k),k.ignore=M}}).update(function(T,E){var R=o.getItemModel(T),M=DS[c.type](o,T,R);if(m){var k=void 0;S.length===0?k=w(E):(k=S[E],k.useStyle(y.getItemStyle()),c.type==="cartesian2d"?k.setShape("r",x):k.setShape("cornerRadius",x),b[T]=k);var O=DS[c.type](o,T),Q=Cne(h,O,c);Er(k,{shape:Q},d,T)}var H=l.getItemGraphicEl(E);if(!o.hasValue(T)||!m7[c.type](M)){s.remove(H);return}var W=!1;if(g&&(W=A7[c.type](p,M),W&&s.remove(H)),H?nc(H):H=f7[c.type](t,o,T,M,h,d,u.model,!!H,v),A&&(H.forceLabelAnimation=!0),C){var te=H.getTextContent();if(te){var ee=ay(te);ee.prevValue!=null&&(ee.prevValue=ee.value)}}else v7(H,o,T,R,M,t,h,c.type==="polar");_?H.attr({shape:M}):A?g7(A,d,H,M,T,h,!0,C):Er(H,{shape:M},t,T,null),o.setItemGraphicEl(T,H),H.ignore=W,s.add(H)}).remove(function(T){var E=l.getItemGraphicEl(T);E&&Cb(E,t,T)}).execute();var B=this._backgroundGroup||(this._backgroundGroup=new Ht);B.removeAll();for(var D=0;D<b.length;++D)B.add(b[D]);s.add(B),this._backgroundEls=b,this._data=o},e.prototype._renderLarge=function(t,n,a){this._clear(),x7(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,n){this._removeBackground(),x7(n,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var n=t.get("clip",!0)&&jw(t.coordinateSystem,!1,t),a=this.group;n?a.setClipPath(n):a.removeClipPath()},e.prototype._enableRealtimeSort=function(t,n,a){var i=this;if(n.count()){var s=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,t,a),this._isFirstFrame=!1;else{var o=function(l){var c=n.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(s.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){i._updateSortWithinSameData(n,o,s,a)},a.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,n,a){var i=[];return t.each(t.mapDimension(n.dim),function(s,o){var l=a(o);l=l??NaN,i.push({dataIndex:o,mappedValue:l,ordinalNumber:s})}),i.sort(function(s,o){return o.mappedValue-s.mappedValue}),{ordinalNumbers:We(i,function(s){return s.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,n,a){for(var i=a.scale,s=t.mapDimension(a.dim),o=Number.MAX_VALUE,l=0,c=i.getOrdinalMeta().categories.length;l<c;++l){var u=t.rawIndexOf(s,i.getRawOrdinalNumber(l)),h=u<0?Number.MIN_VALUE:n(t.indexOfRawIndex(u));if(h>o)return!0;o=h}return!1},e.prototype._isOrderDifferentInView=function(t,n){for(var a=n.scale,i=a.getExtent(),s=Math.max(0,i[0]),o=Math.min(i[1],a.getOrdinalMeta().categories.length-1);s<=o;++s)if(t.ordinalNumbers[s]!==a.getRawOrdinalNumber(s))return!0},e.prototype._updateSortWithinSameData=function(t,n,a,i){if(this._isOrderChangedWithinSameData(t,n,a)){var s=this._dataSort(t,a,n);this._isOrderDifferentInView(s,a)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",axisId:a.index,sortInfo:s}))}},e.prototype._dispatchInitSort=function(t,n,a){var i=n.baseAxis,s=this._dataSort(t,i,function(o){return t.get(t.mapDimension(n.otherAxis.dim),o)});a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:s})},e.prototype.remove=function(t,n){this._clear(this._model),this._removeOnRenderedListener(n)},e.prototype.dispose=function(t,n){this._removeOnRenderedListener(n)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var n=this.group,a=this._data;t&&t.isAnimationEnabled()&&a&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],a.eachItemGraphicEl(function(i){Cb(i,t,Qt(i).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(nn),A7={cartesian2d:function(r,e){var t=e.width<0?-1:1,n=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),n<0&&(e.y+=e.height,e.height=-e.height);var a=r.x+r.width,i=r.y+r.height,s=i4(e.x,r.x),o=s4(e.x+e.width,a),l=i4(e.y,r.y),c=s4(e.y+e.height,i),u=o<s,h=c<l;return e.x=u&&s>a?o:s,e.y=h&&l>i?c:l,e.width=u?0:o-s,e.height=h?0:c-l,t<0&&(e.x+=e.width,e.width=-e.width),n<0&&(e.y+=e.height,e.height=-e.height),u||h},polar:function(r,e){var t=e.r0<=e.r?1:-1;if(t<0){var n=e.r;e.r=e.r0,e.r0=n}var a=s4(e.r,r.r),i=i4(e.r0,r.r0);e.r=a,e.r0=i;var s=a-i<0;if(t<0){var n=e.r;e.r=e.r0,e.r0=n}return s}},f7={cartesian2d:function(r,e,t,n,a,i,s,o,l){var c=new br({shape:He({},n),z2:1});if(c.__dataIndex=t,c.name="item",i){var u=c.shape,h=a?"height":"width";u[h]=0}return c},polar:function(r,e,t,n,a,i,s,o,l){var c=!a&&l?jC:ms,u=new c({shape:n,z2:1});u.name="item";var h=_ne(a);if(u.calculateTextPosition=B_e(h,{isRoundCap:c===jC}),i){var d=u.shape,A=a?"r":"endAngle",g={};d[A]=a?n.r0:n.startAngle,g[A]=n[A],(o?Er:jn)(u,{shape:g},i)}return u}};function E_e(r,e){var t=r.get("realtimeSort",!0),n=e.getBaseAxis();if(t&&n.type==="category"&&e.type==="cartesian2d")return{baseAxis:n,otherAxis:e.getOtherAxis(n)}}function g7(r,e,t,n,a,i,s,o){var l,c;i?(c={x:n.x,width:n.width},l={y:n.y,height:n.height}):(c={y:n.y,height:n.height},l={x:n.x,width:n.width}),o||(s?Er:jn)(t,{shape:l},e,a,null);var u=e?r.baseAxis.model:null;(s?Er:jn)(t,{shape:c},u,a)}function p7(r,e){for(var t=0;t<e.length;t++)if(!isFinite(r[e[t]]))return!0;return!1}var D_e=["x","y","width","height"],M_e=["cx","cy","r","startAngle","endAngle"],m7={cartesian2d:function(r){return!p7(r,D_e)},polar:function(r){return!p7(r,M_e)}},DS={cartesian2d:function(r,e,t){var n=r.getItemLayout(e),a=t?L_e(t,n):0,i=n.width>0?1:-1,s=n.height>0?1:-1;return{x:n.x+i*a/2,y:n.y+s*a/2,width:n.width-i*a,height:n.height-s*a}},polar:function(r,e,t){var n=r.getItemLayout(e);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function R_e(r){return r.startAngle!=null&&r.endAngle!=null&&r.startAngle===r.endAngle}function _ne(r){return function(e){var t=e?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+t;default:return n}}}(r)}function v7(r,e,t,n,a,i,s,o){var l=e.getItemVisual(t,"style");if(o){if(!i.get("roundCap")){var u=r.shape,h=Lg(n.getModel("itemStyle"),u,!0);He(u,h),r.setShape(u)}}else{var c=n.get(["itemStyle","borderRadius"])||0;r.setShape("r",c)}r.useStyle(l);var d=n.getShallow("cursor");d&&r.attr("cursor",d);var A=o?s?a.r>=a.r0?"endArc":"startArc":a.endAngle>=a.startAngle?"endAngle":"startAngle":s?a.height>=0?"bottom":"top":a.width>=0?"right":"left",g=ei(n);Ni(r,g,{labelFetcher:i,labelDataIndex:t,defaultText:T0(i.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:A});var p=r.getTextContent();if(o&&p){var v=n.get(["label","position"]);r.textConfig.inside=v==="middle"?!0:null,N_e(r,v==="outside"?A:v,_ne(s),n.get(["label","rotate"]))}zee(p,g,i.getRawValue(t),function(y){return gne(e,y)});var m=n.getModel(["emphasis"]);qn(r,m.get("focus"),m.get("blurScope"),m.get("disabled")),Bi(r,n),R_e(a)&&(r.style.fill="none",r.style.stroke="none",X(r.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function L_e(r,e){var t=r.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var n=r.get(["itemStyle","borderWidth"])||0,a=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(n,a,i)}var P_e=function(){function r(){}return r}(),y7=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="largeBar",n}return e.prototype.getDefaultShape=function(){return new P_e},e.prototype.buildPath=function(t,n){for(var a=n.points,i=this.baseDimIdx,s=1-this.baseDimIdx,o=[],l=[],c=this.barWidth,u=0;u<a.length;u+=3)l[i]=c,l[s]=a[u+2],o[i]=a[u+i],o[s]=a[u+s],t.rect(o[0],o[1],l[0],l[1])},e}(hr);function x7(r,e,t,n){var a=r.getData(),i=a.getLayout("valueAxisHorizontal")?1:0,s=a.getLayout("largeDataIndices"),o=a.getLayout("size"),l=r.getModel("backgroundStyle"),c=a.getLayout("largeBackgroundPoints");if(c){var u=new y7({shape:{points:c},incremental:!!n,silent:!0,z2:0});u.baseDimIdx=i,u.largeDataIndices=s,u.barWidth=o,u.useStyle(l.getItemStyle()),e.add(u),t&&t.push(u)}var h=new y7({shape:{points:a.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=i,h.largeDataIndices=s,h.barWidth=o,e.add(h),h.useStyle(a.getVisual("style")),h.style.stroke=null,Qt(h).seriesIndex=r.seriesIndex,r.get("silent")||(h.on("mousedown",b7),h.on("mousemove",b7)),t&&t.push(h)}var b7=gF(function(r){var e=this,t=k_e(e,r.offsetX,r.offsetY);Qt(e).dataIndex=t>=0?t:null},30,!1);function k_e(r,e,t){for(var n=r.baseDimIdx,a=1-n,i=r.shape.points,s=r.largeDataIndices,o=[],l=[],c=r.barWidth,u=0,h=i.length/3;u<h;u++){var d=u*3;if(l[n]=c,l[a]=i[d+2],o[n]=i[d+n],o[a]=i[d+a],l[a]<0&&(o[a]+=l[a],l[a]=-l[a]),e>=o[0]&&e<=o[0]+l[0]&&t>=o[1]&&t<=o[1]+l[1])return s[u]}return-1}function Cne(r,e,t){if(Hp(t,"cartesian2d")){var n=e,a=t.getArea();return{x:r?n.x:a.x,y:r?a.y:n.y,width:r?n.width:a.width,height:r?a.height:n.height}}else{var a=t.getArea(),i=e;return{cx:a.cx,cy:a.cy,r0:r?a.r0:i.r0,r:r?a.r:i.r,startAngle:r?i.startAngle:0,endAngle:r?i.endAngle:Math.PI*2}}}function F_e(r,e,t){var n=r.type==="polar"?ms:br;return new n({shape:Cne(e,t,r),silent:!0,z2:0})}function j_e(r){r.registerChartView(I_e),r.registerSeriesModel(__e),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Wt(Ere,"bar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Dre("bar")),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,Sne("bar")),r.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},function(a){e.sortInfo&&a.axis.setCategorySortInfo(e.sortInfo)})})}var w7=Math.PI*2,MS=Math.PI/180;function Bne(r,e){return Ua(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Nne(r,e){var t=Bne(r,e),n=r.get("center"),a=r.get("radius");$e(a)||(a=[0,a]);var i=ot(t.width,e.getWidth()),s=ot(t.height,e.getHeight()),o=Math.min(i,s),l=ot(a[0],o/2),c=ot(a[1],o/2),u,h,d=r.coordinateSystem;if(d){var A=d.dataToPoint(n);u=A[0]||0,h=A[1]||0}else $e(n)||(n=[n,n]),u=ot(n[0],i)+t.x,h=ot(n[1],s)+t.y;return{cx:u,cy:h,r0:l,r:c}}function O_e(r,e,t){e.eachSeriesByType(r,function(n){var a=n.getData(),i=a.mapDimension("value"),s=Bne(n,t),o=Nne(n,t),l=o.cx,c=o.cy,u=o.r,h=o.r0,d=-n.get("startAngle")*MS,A=n.get("endAngle"),g=n.get("padAngle")*MS;A=A==="auto"?d-w7:-A*MS;var p=n.get("minAngle")*MS,v=p+g,m=0;a.each(i,function(Q){!isNaN(Q)&&m++});var y=a.getSum(i),x=Math.PI/(y||m)*2,b=n.get("clockwise"),S=n.get("roseType"),_=n.get("stillShowZeroSum"),C=a.getDataExtent(i);C[0]=0;var w=b?1:-1,B=[d,A],D=w*g/2;Gk(B,!b),d=B[0],A=B[1];var T=Tne(n);T.startAngle=d,T.endAngle=A,T.clockwise=b;var E=Math.abs(A-d),R=E,M=0,k=d;if(a.setLayout({viewRect:s,r:u}),a.each(i,function(Q,H){var W;if(isNaN(Q)){a.setItemLayout(H,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:b,cx:l,cy:c,r0:h,r:S?NaN:u});return}S!=="area"?W=y===0&&_?x:Q*x:W=E/m,W<v?(W=v,R-=v):M+=Q;var te=k+w*W,ee=0,j=0;g>W?(ee=k+w*W/2,j=ee):(ee=k+D,j=te-D),a.setItemLayout(H,{angle:W,startAngle:ee,endAngle:j,clockwise:b,cx:l,cy:c,r0:h,r:S?Hr(Q,C,[h,u]):u}),k=te}),R<w7&&m)if(R<=.001){var O=E/m;a.each(i,function(Q,H){if(!isNaN(Q)){var W=a.getItemLayout(H);W.angle=O;var te=0,ee=0;O<g?(te=d+w*(H+1/2)*O,ee=te):(te=d+w*H*O+D,ee=d+w*(H+1)*O-D),W.startAngle=te,W.endAngle=ee}})}else x=R/M,k=d,a.each(i,function(Q,H){if(!isNaN(Q)){var W=a.getItemLayout(H),te=W.angle===v?v:Q*x,ee=0,j=0;te<g?(ee=k+w*te/2,j=ee):(ee=k+D,j=k+w*te-D),W.startAngle=ee,W.endAngle=j,k+=w*te}})})}var Tne=wr();function Uw(r){return{seriesType:r,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(!(!n||!n.length)){var a=e.getData();a.filterSelf(function(i){for(var s=a.getName(i),o=0;o<n.length;o++)if(!n[o].isSelected(s))return!1;return!0})}}}}var U_e=Math.PI/180;function S7(r,e,t,n,a,i,s,o,l,c){if(r.length<2)return;function u(p){for(var v=p.rB,m=v*v,y=0;y<p.list.length;y++){var x=p.list[y],b=Math.abs(x.label.y-t),S=n+x.len,_=S*S,C=Math.sqrt(Math.abs((1-b*b/m)*_)),w=e+(C+x.len2)*a,B=w-x.label.x,D=x.targetTextWidth-B*a;Ine(x,D,!0),x.label.x=w}}function h(p){for(var v={list:[],maxY:0},m={list:[],maxY:0},y=0;y<p.length;y++)if(p[y].labelAlignTo==="none"){var x=p[y],b=x.label.y>t?m:v,S=Math.abs(x.label.y-t);if(S>=b.maxY){var _=x.label.x-e-x.len2*a,C=n+x.len,w=Math.abs(_)<C?Math.sqrt(S*S/(1-_*_/C/C)):C;b.rB=w,b.maxY=S}b.list.push(x)}u(v),u(m)}for(var d=r.length,A=0;A<d;A++)if(r[A].position==="outer"&&r[A].labelAlignTo==="labelLine"){var g=r[A].label.x-c;r[A].linePoints[1][0]+=g,r[A].label.x=c}Zre(r,l,l+s)&&h(r)}function H_e(r,e,t,n,a,i,s,o){for(var l=[],c=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<r.length;d++){var A=r[d].label;o4(r[d])||(A.x<e?(u=Math.min(u,A.x),l.push(r[d])):(h=Math.max(h,A.x),c.push(r[d])))}for(var d=0;d<r.length;d++){var g=r[d];if(!o4(g)&&g.linePoints){if(g.labelStyleWidth!=null)continue;var A=g.label,p=g.linePoints,v=void 0;g.labelAlignTo==="edge"?A.x<e?v=p[2][0]-g.labelDistance-s-g.edgeDistance:v=s+a-g.edgeDistance-p[2][0]-g.labelDistance:g.labelAlignTo==="labelLine"?A.x<e?v=u-s-g.bleedMargin:v=s+a-h-g.bleedMargin:A.x<e?v=A.x-s-g.bleedMargin:v=s+a-A.x-g.bleedMargin,g.targetTextWidth=v,Ine(g,v)}}S7(c,e,t,n,1,a,i,s,o,h),S7(l,e,t,n,-1,a,i,s,o,u);for(var d=0;d<r.length;d++){var g=r[d];if(!o4(g)&&g.linePoints){var A=g.label,p=g.linePoints,m=g.labelAlignTo==="edge",y=A.style.padding,x=y?y[1]+y[3]:0,b=A.style.backgroundColor?0:x,S=g.rect.width+b,_=p[1][0]-p[2][0];m?A.x<e?p[2][0]=s+g.edgeDistance+S+g.labelDistance:p[2][0]=s+a-g.edgeDistance-S-g.labelDistance:(A.x<e?p[2][0]=A.x+g.labelDistance:p[2][0]=A.x-g.labelDistance,p[1][0]=p[2][0]+_),p[1][1]=p[2][1]=A.y}}}function Ine(r,e,t){if(t===void 0&&(t=!1),r.labelStyleWidth==null){var n=r.label,a=n.style,i=r.rect,s=a.backgroundColor,o=a.padding,l=o?o[1]+o[3]:0,c=a.overflow,u=i.width+(s?0:l);if(e<u||t){var h=i.height;if(c&&c.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",e-l);var d=n.getBoundingRect();n.setStyle("width",Math.ceil(d.width)),n.setStyle("backgroundColor",s)}else{var A=e-l,g=e<u?A:t?A>r.unconstrainedWidth?null:A:null;n.setStyle("width",g)}var p=n.getBoundingRect();i.width=p.width;var v=(n.style.margin||0)+2.1;i.height=p.height+v,i.y-=(i.height-h)/2}}}function o4(r){return r.position==="center"}function Q_e(r){var e=r.getData(),t=[],n,a,i=!1,s=(r.get("minShowLabelAngle")||0)*U_e,o=e.getLayout("viewRect"),l=e.getLayout("r"),c=o.width,u=o.x,h=o.y,d=o.height;function A(_){_.ignore=!0}function g(_){if(!_.ignore)return!0;for(var C in _.states)if(_.states[C].ignore===!1)return!0;return!1}e.each(function(_){var C=e.getItemGraphicEl(_),w=C.shape,B=C.getTextContent(),D=C.getTextGuideLine(),T=e.getItemModel(_),E=T.getModel("label"),R=E.get("position")||T.get(["emphasis","label","position"]),M=E.get("distanceToLabelLine"),k=E.get("alignTo"),O=ot(E.get("edgeDistance"),c),Q=E.get("bleedMargin"),H=T.getModel("labelLine"),W=H.get("length");W=ot(W,c);var te=H.get("length2");if(te=ot(te,c),Math.abs(w.endAngle-w.startAngle)<s){X(B.states,A),B.ignore=!0,D&&(X(D.states,A),D.ignore=!0);return}if(g(B)){var ee=(w.startAngle+w.endAngle)/2,j=Math.cos(ee),G=Math.sin(ee),Y,Z,de,he;n=w.cx,a=w.cy;var fe=R==="inside"||R==="inner";if(R==="center")Y=w.cx,Z=w.cy,he="center";else{var q=(fe?(w.r+w.r0)/2*j:w.r*j)+n,ge=(fe?(w.r+w.r0)/2*G:w.r*G)+a;if(Y=q+j*3,Z=ge+G*3,!fe){var me=q+j*(W+l-w.r),we=ge+G*(W+l-w.r),Me=me+(j<0?-1:1)*te,z=we;k==="edge"?Y=j<0?u+O:u+c-O:Y=Me+(j<0?-M:M),Z=z,de=[[q,ge],[me,we],[Me,z]]}he=fe?"center":k==="edge"?j>0?"right":"left":j>0?"left":"right"}var pe=Math.PI,J=0,oe=E.get("rotate");if(Br(oe))J=oe*(pe/180);else if(R==="center")J=0;else if(oe==="radial"||oe===!0){var ae=j<0?-ee+pe:-ee;J=ae}else if(oe==="tangential"&&R!=="outside"&&R!=="outer"){var ue=Math.atan2(j,G);ue<0&&(ue=pe*2+ue);var be=G>0;be&&(ue=pe+ue),J=ue-pe}if(i=!!J,B.x=Y,B.y=Z,B.rotation=J,B.setStyle({verticalAlign:"middle"}),fe){B.setStyle({align:he});var Ee=B.states.select;Ee&&(Ee.x+=B.x,Ee.y+=B.y)}else{var _e=B.getBoundingRect().clone();_e.applyTransform(B.getComputedTransform());var ye=(B.style.margin||0)+2.1;_e.y-=ye/2,_e.height+=ye,t.push({label:B,labelLine:D,position:R,len:W,len2:te,minTurnAngle:H.get("minTurnAngle"),maxSurfaceAngle:H.get("maxSurfaceAngle"),surfaceNormal:new Xt(j,G),linePoints:de,textAlign:he,labelDistance:M,labelAlignTo:k,edgeDistance:O,bleedMargin:Q,rect:_e,unconstrainedWidth:_e.width,labelStyleWidth:B.style.width})}C.setTextConfig({inside:fe})}}),!i&&r.get("avoidLabelOverlap")&&H_e(t,n,a,l,c,d,u,h);for(var p=0;p<t.length;p++){var v=t[p],m=v.label,y=v.labelLine,x=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:v.textAlign}),x&&(X(m.states,A),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(y){var S=v.linePoints;x||!S?(X(y.states,A),y.ignore=!0):(qre(S,v.minTurnAngle),hSe(S,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:S}),m.__hostTarget.textGuideLineConfig={anchor:new Xt(S[0][0],S[0][1])})}}}var z_e=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this)||this;i.z2=2;var s=new Cr;return i.setTextContent(s),i.updateData(t,n,a,!0),i}return e.prototype.updateData=function(t,n,a,i){var s=this,o=t.hostModel,l=t.getItemModel(n),c=l.getModel("emphasis"),u=t.getItemLayout(n),h=He(Lg(l.getModel("itemStyle"),u,!0),u);if(isNaN(h.startAngle)){s.setShape(h);return}if(i){s.setShape(h);var d=o.getShallow("animationType");o.ecModel.ssr?(jn(s,{scaleX:0,scaleY:0},o,{dataIndex:n,isFrom:!0}),s.originX=h.cx,s.originY=h.cy):d==="scale"?(s.shape.r=u.r0,jn(s,{shape:{r:u.r}},o,n)):a!=null?(s.setShape({startAngle:a,endAngle:a}),jn(s,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},o,n)):(s.shape.endAngle=u.startAngle,Er(s,{shape:{endAngle:u.endAngle}},o,n))}else nc(s),Er(s,{shape:h},o,n);s.useStyle(t.getItemVisual(n,"style")),Bi(s,l);var A=(u.startAngle+u.endAngle)/2,g=o.get("selectedOffset"),p=Math.cos(A)*g,v=Math.sin(A)*g,m=l.getShallow("cursor");m&&s.attr("cursor",m),this._updateLabel(o,t,n),s.ensureState("emphasis").shape=He({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},Lg(c.getModel("itemStyle"),u)),He(s.ensureState("select"),{x:p,y:v,shape:Lg(l.getModel(["select","itemStyle"]),u)}),He(s.ensureState("blur"),{shape:Lg(l.getModel(["blur","itemStyle"]),u)});var y=s.getTextGuideLine(),x=s.getTextContent();y&&He(y.ensureState("select"),{x:p,y:v}),He(x.ensureState("select"),{x:p,y:v}),qn(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,n,a){var i=this,s=n.getItemModel(a),o=s.getModel("labelLine"),l=n.getItemVisual(a,"style"),c=l&&l.fill,u=l&&l.opacity;Ni(i,ei(s),{labelFetcher:n.hostModel,labelDataIndex:a,inheritColor:c,defaultOpacity:u,defaultText:t.getFormattedLabel(a,"normal")||n.getName(a)});var h=i.getTextContent();i.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var d=t.get(["label","position"]);if(d!=="outside"&&d!=="outer")i.removeTextGuideLine();else{var A=this.getTextGuideLine();A||(A=new ws,this.setTextGuideLine(A)),TF(this,IF(s),{stroke:c,opacity:Zc(o.get(["lineStyle","opacity"]),u,1)})}},e}(ms),G_e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,n,a,i){var s=t.getData(),o=this._data,l=this.group,c;if(!o&&s.count()>0){for(var u=s.getItemLayout(0),h=1;isNaN(u&&u.startAngle)&&h<s.count();++h)u=s.getItemLayout(h);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),s.count()===0&&t.get("showEmptyCircle")){var d=Tne(t),A=new ms({shape:He(Nne(t,a),d)});A.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=A,l.add(A)}s.diff(o).add(function(g){var p=new z_e(s,g,c);s.setItemGraphicEl(g,p),l.add(p)}).update(function(g,p){var v=o.getItemGraphicEl(p);v.updateData(s,g,c),v.off("click"),l.add(v),s.setItemGraphicEl(g,v)}).remove(function(g){var p=o.getItemGraphicEl(g);Cb(p,t,g)}).execute(),Q_e(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=s)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,n){var a=n.getData(),i=a.getItemLayout(0);if(i){var s=t[0]-i.cx,o=t[1]-i.cy,l=Math.sqrt(s*s+o*o);return l<=i.r&&l>=i.r0}},e.type="pie",e}(nn);function fy(r,e,t){e=$e(e)&&{coordDimensions:e}||He({encodeDefine:r.getEncode()},e);var n=r.getSource(),a=Lw(n,e).dimensions,i=new As(a,r);return i.initData(n,t),i}var Hw=function(){function r(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return r.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},r.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},r.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},r.prototype.getItemVisual=function(e,t){var n=this._getDataWithEncodedVisual();return n.getItemVisual(e,t)},r}(),V_e=wr(),$_e=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Hw(ft(this.getData,this),ft(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return fy(this,{coordDimensions:["value"],encodeDefaulter:Wt(oF,this)})},e.prototype.getDataParams=function(t){var n=this.getData(),a=V_e(n),i=a.seats;if(!i){var s=[];n.each(n.mapDimension("value"),function(l){s.push(l)}),i=a.seats=F0e(s,n.hostModel.get("percentPrecision"))}var o=r.prototype.getDataParams.call(this,t);return o.percent=i[t]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){mp(t,"labelLine",["show"]);var n=t.labelLine,a=t.emphasis.labelLine;n.show=n.show&&t.label.show,a.show=a.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Sn);function K_e(r){return{seriesType:r,reset:function(e,t){var n=e.getData();n.filterSelf(function(a){var i=n.mapDimension("value"),s=n.get(i,a);return!(Br(s)&&!isNaN(s)&&s<0)})}}}function W_e(r){r.registerChartView(G_e),r.registerSeriesModel($_e),qte("pie",r.registerAction),r.registerLayout(Wt(O_e,"pie")),r.registerProcessor(Uw("pie")),r.registerProcessor(K_e("pie"))}var q_e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,n){return Uh(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,n,a){return a.point(n.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Sn),Ene=4,Y_e=function(){function r(){}return r}(),X_e=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return e.prototype.getDefaultShape=function(){return new Y_e},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,n){var a=n.points,i=n.size,s=this.symbolProxy,o=s.shape,l=t.getContext?t.getContext():t,c=l&&i[0]<Ene,u=this.softClipShape,h;if(c){this._ctx=l;return}for(this._ctx=null,h=this._off;h<a.length;){var d=a[h++],A=a[h++];isNaN(d)||isNaN(A)||u&&!u.contain(d,A)||(o.x=d-i[0]/2,o.y=A-i[1]/2,o.width=i[0],o.height=i[1],s.buildPath(t,o,!0))}this.incremental&&(this._off=h,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,n=t.points,a=t.size,i=this._ctx,s=this.softClipShape,o;if(i){for(o=this._off;o<n.length;){var l=n[o++],c=n[o++];isNaN(l)||isNaN(c)||s&&!s.contain(l,c)||i.fillRect(l-a[0]/2,c-a[1]/2,a[0],a[1])}this.incremental&&(this._off=o,this.notClear=!0)}},e.prototype.findDataIndex=function(t,n){for(var a=this.shape,i=a.points,s=a.size,o=Math.max(s[0],4),l=Math.max(s[1],4),c=i.length/2-1;c>=0;c--){var u=c*2,h=i[u]-o/2,d=i[u+1]-l/2;if(t>=h&&n>=d&&t<=h+o&&n<=d+l)return c}return-1},e.prototype.contain=function(t,n){var a=this.transformCoordToLocal(t,n),i=this.getBoundingRect();if(t=a[0],n=a[1],i.contain(t,n)){var s=this.hoverDataIdx=this.findDataIndex(t,n);return s>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var n=this.shape,a=n.points,i=n.size,s=i[0],o=i[1],l=1/0,c=1/0,u=-1/0,h=-1/0,d=0;d<a.length;){var A=a[d++],g=a[d++];l=Math.min(A,l),u=Math.max(A,u),c=Math.min(g,c),h=Math.max(g,h)}t=this._rect=new Zt(l-s/2,c-o/2,u-l+s,h-c+o)}return t},e}(hr),Z_e=function(){function r(){this.group=new Ht}return r.prototype.updateData=function(e,t){this._clear();var n=this._create();n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,t)},r.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var a=(n.endIndex-n.startIndex)*2,i=n.startIndex*4*2;t=new Float32Array(t.buffer,i,a)}n.setShape("points",t),n.reset()})},r.prototype.incrementalPrepareUpdate=function(e){this._clear()},r.prototype.incrementalUpdate=function(e,t,n){var a=this._newAdded[0],i=t.getLayout("points"),s=a&&a.shape.points;if(s&&s.length<2e4){var o=s.length,l=new Float32Array(o+i.length);l.set(s),l.set(i,o),a.endIndex=e.end,a.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=e.start,c.endIndex=e.end,c.incremental=!0,c.setShape({points:i}),this._setCommon(c,t,n)}},r.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},r.prototype._create=function(){var e=new X_e({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},r.prototype._setCommon=function(e,t,n){var a=t.hostModel;n=n||{};var i=t.getVisual("symbolSize");e.setShape("size",i instanceof Array?i:[i,i]),e.softClipShape=n.clipShape||null,e.symbolProxy=Ta(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var s=e.shape.size[0]<Ene;e.useStyle(a.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var o=t.getVisual("style"),l=o&&o.fill;l&&e.setColor(l);var c=Qt(e);c.seriesIndex=a.seriesIndex,e.on("mousemove",function(u){c.dataIndex=null;var h=e.hoverDataIdx;h>=0&&(c.dataIndex=h+(e.startIndex||0))})},r.prototype.remove=function(){this._clear()},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),J_e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=t.getData(),s=this._updateSymbolDraw(i,t);s.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,n,a){var i=t.getData(),s=this._updateSymbolDraw(i,t);s.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,n,a){this._symbolDraw.incrementalUpdate(t,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=t.end===n.getData().count()},e.prototype.updateTransform=function(t,n,a){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var s=Ow("").reset(t,n,a);s.progress&&s.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var n=t.coordinateSystem;return n&&n.getArea&&n.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,n){var a=this._symbolDraw,i=n.pipelineContext,s=i.large;return(!a||s!==this._isLargeDraw)&&(a&&a.remove(),a=this._symbolDraw=s?new Z_e:new Fw,this._isLargeDraw=s,this.group.removeAll()),this.group.add(a.group),a},e.prototype.remove=function(t,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(nn),e5e=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(gr),BR=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Na).models[0]},e.type="cartesian2dAxis",e}(gr);Ia(BR,Pw);var Dne={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},t5e=qt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Dne),kF=qt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Dne),r5e=qt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},kF),n5e=Lt({logBase:10},kF);const Mne={category:t5e,value:kF,time:r5e,log:n5e};var a5e={value:1,category:1,time:1,log:1};function I0(r,e,t,n){X(a5e,function(a,i){var s=qt(qt({},Mne[i],!0),n,!0),o=function(l){Pe(c,l);function c(){var u=l!==null&&l.apply(this,arguments)||this;return u.type=e+"Axis."+i,u}return c.prototype.mergeDefaultAndTheme=function(u,h){var d=Nb(this),A=d?oy(u):{},g=h.getTheme();qt(u,g.get(i+"Axis")),qt(u,this.getDefaultOption()),u.type=_7(u),d&&zA(u,A,d)},c.prototype.optionUpdated=function(){var u=this.option;u.type==="category"&&(this.__ordinalMeta=yR.createByAxisModel(this))},c.prototype.getCategories=function(u){var h=this.option;if(h.type==="category")return u?h.data:this.__ordinalMeta.categories},c.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},c.type=e+"Axis."+i,c.defaultOption=s,c}(t);r.registerComponentModel(o)}),r.registerSubTypeDefaulter(e+"Axis",_7)}function _7(r){return r.type||(r.data?"category":"value")}var i5e=function(){function r(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return r.prototype.getAxis=function(e){return this._axes[e]},r.prototype.getAxes=function(){return We(this._dimList,function(e){return this._axes[e]},this)},r.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),Ur(this.getAxes(),function(t){return t.scale.type===e})},r.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},r}(),NR=["x","y"];function C7(r){return r.type==="interval"||r.type==="time"}var s5e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=NR,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!C7(t)||!C7(n))){var a=t.getExtent(),i=n.getExtent(),s=this.dataToPoint([a[0],i[0]]),o=this.dataToPoint([a[1],i[1]]),l=a[1]-a[0],c=i[1]-i[0];if(!(!l||!c)){var u=(o[0]-s[0])/l,h=(o[1]-s[1])/c,d=s[0]-a[0]*u,A=s[1]-i[0]*h,g=this._transform=[u,0,0,h,d,A];this._invTransform=ey([],g)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var n=this.getAxis("x"),a=this.getAxis("y");return n.contain(n.toLocalCoord(t[0]))&&a.contain(a.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,n){var a=this.dataToPoint(t),i=this.dataToPoint(n),s=this.getArea(),o=new Zt(a[0],a[1],i[0]-a[0],i[1]-a[1]);return s.intersect(o)},e.prototype.dataToPoint=function(t,n,a){a=a||[];var i=t[0],s=t[1];if(this._transform&&i!=null&&isFinite(i)&&s!=null&&isFinite(s))return Ci(a,t,this._transform);var o=this.getAxis("x"),l=this.getAxis("y");return a[0]=o.toGlobalCoord(o.dataToCoord(i,n)),a[1]=l.toGlobalCoord(l.dataToCoord(s,n)),a},e.prototype.clampData=function(t,n){var a=this.getAxis("x").scale,i=this.getAxis("y").scale,s=a.getExtent(),o=i.getExtent(),l=a.parse(t[0]),c=i.parse(t[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),n[1]=Math.min(Math.max(Math.min(o[0],o[1]),c),Math.max(o[0],o[1])),n},e.prototype.pointToData=function(t,n){var a=[];if(this._invTransform)return Ci(a,t,this._invTransform);var i=this.getAxis("x"),s=this.getAxis("y");return a[0]=i.coordToData(i.toLocalCoord(t[0]),n),a[1]=s.coordToData(s.toLocalCoord(t[1]),n),a},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var n=this.getAxis("x").getGlobalExtent(),a=this.getAxis("y").getGlobalExtent(),i=Math.min(n[0],n[1])-t,s=Math.min(a[0],a[1])-t,o=Math.max(n[0],n[1])-i+t,l=Math.max(a[0],a[1])-s+t;return new Zt(i,s,o,l)},e}(i5e),o5e=function(r){Pe(e,r);function e(t,n,a,i,s){var o=r.call(this,t,n,a)||this;return o.index=0,o.type=i||"value",o.position=s||"bottom",o}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),t&&n[0]>n[1]&&n.reverse(),n},e.prototype.pointToData=function(t,n){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),n)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(lc);function TR(r,e,t){t=t||{};var n=r.coordinateSystem,a=e.axis,i={},s=a.getAxesOnZeroOf()[0],o=a.position,l=s?"onZero":o,c=a.dim,u=n.getRect(),h=[u.x,u.x+u.width,u.y,u.y+u.height],d={left:0,right:1,top:0,bottom:1,onZero:2},A=e.get("offset")||0,g=c==="x"?[h[2]-A,h[3]+A]:[h[0]-A,h[1]+A];if(s){var p=s.toGlobalCoord(s.dataToCoord(0));g[d.onZero]=Math.max(Math.min(p,g[1]),g[0])}i.position=[c==="y"?g[d[l]]:h[0],c==="x"?g[d[l]]:h[3]],i.rotation=Math.PI/2*(c==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};i.labelDirection=i.tickDirection=i.nameDirection=v[o],i.labelOffset=s?g[d[o]]-g[d.onZero]:0,e.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),di(t.labelInside,e.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var m=e.get(["axisLabel","rotate"]);return i.labelRotate=l==="top"?-m:m,i.z2=1,i}function B7(r){return r.get("coordinateSystem")==="cartesian2d"}function N7(r){var e={xAxisModel:null,yAxisModel:null};return X(e,function(t,n){var a=n.replace(/Model$/,""),i=r.getReferringComponents(a,Na).models[0];e[n]=i}),e}var l4=Math.log;function Rne(r,e,t){var n=Th.prototype,a=n.getTicks.call(t),i=n.getTicks.call(t,!0),s=a.length-1,o=n.getInterval.call(t),l=kre(r,e),c=l.extent,u=l.fixMin,h=l.fixMax;if(r.type==="log"){var d=l4(r.base);c=[l4(c[0])/d,l4(c[1])/d]}r.setExtent(c[0],c[1]),r.calcNiceExtent({splitNumber:s,fixMin:u,fixMax:h});var A=n.getExtent.call(r);u&&(c[0]=A[0]),h&&(c[1]=A[1]);var g=n.getInterval.call(r),p=c[0],v=c[1];if(u&&h)g=(v-p)/s;else if(u)for(v=c[0]+g*s;v<c[1]&&isFinite(v)&&isFinite(c[1]);)g=KE(g),v=c[0]+g*s;else if(h)for(p=c[1]-g*s;p>c[0]&&isFinite(p)&&isFinite(c[0]);)g=KE(g),p=c[1]-g*s;else{var m=r.getTicks().length-1;m>s&&(g=KE(g));var y=g*s;v=Math.ceil(c[1]/g)*g,p=aa(v-y),p<0&&c[0]>=0?(p=0,v=aa(y)):v>0&&c[1]<=0&&(v=0,p=-aa(y))}var x=(a[0].value-i[0].value)/o,b=(a[s].value-i[s].value)/o;n.setExtent.call(r,p+g*x,v+g*b),n.setInterval.call(r,g),(x||b)&&n.setNiceExtent.call(r,p+g,v-g)}var l5e=function(){function r(e,t,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=NR,this._initCartesian(e,t,n),this.model=e}return r.prototype.getRect=function(){return this._rect},r.prototype.update=function(e,t){var n=this._axesMap;this._updateScale(e,this.model);function a(s){var o,l=pr(s),c=l.length;if(c){for(var u=[],h=c-1;h>=0;h--){var d=+l[h],A=s[d],g=A.model,p=A.scale;xR(p)&&g.get("alignTicks")&&g.get("interval")==null?u.push(A):(N0(p,g),xR(p)&&(o=A))}u.length&&(o||(o=u.pop(),N0(o.scale,o.model)),X(u,function(v){Rne(v.scale,v.model,o.scale)}))}}a(n.x),a(n.y);var i={};X(n.x,function(s){T7(n,"y",s,i)}),X(n.y,function(s){T7(n,"x",s,i)}),this.resize(this.model,t)},r.prototype.resize=function(e,t,n){var a=e.getBoxLayoutParams(),i=!n&&e.get("containLabel"),s=Ua(a,{width:t.getWidth(),height:t.getHeight()});this._rect=s;var o=this._axesList;l(),i&&(X(o,function(c){if(!c.model.get(["axisLabel","inside"])){var u=Q2e(c);if(u){var h=c.isHorizontal()?"height":"width",d=c.model.get(["axisLabel","margin"]);s[h]-=u[h]+d,c.position==="top"?s.y+=u.height+d:c.position==="left"&&(s.x+=u.width+d)}}}),l()),X(this._coordsList,function(c){c.calcAffineTransform()});function l(){X(o,function(c){var u=c.isHorizontal(),h=u?[0,s.width]:[0,s.height],d=c.inverse?1:0;c.setExtent(h[d],h[1-d]),c5e(c,u?s.x:s.y)})}},r.prototype.getAxis=function(e,t){var n=this._axesMap[e];if(n!=null)return n[t||0]},r.prototype.getAxes=function(){return this._axesList.slice()},r.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var n="x"+e+"y"+t;return this._coordsMap[n]}Pt(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var a=0,i=this._coordsList;a<i.length;a++)if(i[a].getAxis("x").index===e||i[a].getAxis("y").index===t)return i[a]},r.prototype.getCartesians=function(){return this._coordsList.slice()},r.prototype.convertToPixel=function(e,t,n){var a=this._findConvertTarget(t);return a.cartesian?a.cartesian.dataToPoint(n):a.axis?a.axis.toGlobalCoord(a.axis.dataToCoord(n)):null},r.prototype.convertFromPixel=function(e,t,n){var a=this._findConvertTarget(t);return a.cartesian?a.cartesian.pointToData(n):a.axis?a.axis.coordToData(a.axis.toLocalCoord(n)):null},r.prototype._findConvertTarget=function(e){var t=e.seriesModel,n=e.xAxisModel||t&&t.getReferringComponents("xAxis",Na).models[0],a=e.yAxisModel||t&&t.getReferringComponents("yAxis",Na).models[0],i=e.gridModel,s=this._coordsList,o,l;if(t)o=t.coordinateSystem,rr(s,o)<0&&(o=null);else if(n&&a)o=this.getCartesian(n.componentIndex,a.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(a)l=this.getAxis("y",a.componentIndex);else if(i){var c=i.coordinateSystem;c===this&&(o=this._coordsList[0])}return{cartesian:o,axis:l}},r.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},r.prototype._initCartesian=function(e,t,n){var a=this,i=this,s={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",c("x"),this),t.eachComponent("yAxis",c("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,X(o.x,function(u,h){X(o.y,function(d,A){var g="x"+h+"y"+A,p=new s5e(g);p.master=a,p.model=e,a._coordsMap[g]=p,a._coordsList.push(p),p.addAxis(u),p.addAxis(d)})});function c(u){return function(h,d){if(c4(h,e)){var A=h.get("position");u==="x"?A!=="top"&&A!=="bottom"&&(A=s.bottom?"top":"bottom"):A!=="left"&&A!=="right"&&(A=s.left?"right":"left"),s[A]=!0;var g=new o5e(u,XN(h),[0,0],h.get("type"),A),p=g.type==="category";g.onBand=p&&h.get("boundaryGap"),g.inverse=h.get("inverse"),h.axis=g,g.model=h,g.grid=i,g.index=d,i._axesList.push(g),o[u][d]=g,l[u]++}}}},r.prototype._updateScale=function(e,t){X(this._axesList,function(a){if(a.scale.setExtent(1/0,-1/0),a.type==="category"){var i=a.model.get("categorySortInfo");a.scale.setSortInfo(i)}}),e.eachSeries(function(a){if(B7(a)){var i=N7(a),s=i.xAxisModel,o=i.yAxisModel;if(!c4(s,t)||!c4(o,t))return;var l=this.getCartesian(s.componentIndex,o.componentIndex),c=a.getData(),u=l.getAxis("x"),h=l.getAxis("y");n(c,u),n(c,h)}},this);function n(a,i){X(LC(a,i.dim),function(s){i.scale.unionExtentFromData(a,s)})}},r.prototype.getTooltipAxes=function(e){var t=[],n=[];return X(this.getCartesians(),function(a){var i=e!=null&&e!=="auto"?a.getAxis(e):a.getBaseAxis(),s=a.getOtherAxis(i);rr(t,i)<0&&t.push(i),rr(n,s)<0&&n.push(s)}),{baseAxes:t,otherAxes:n}},r.create=function(e,t){var n=[];return e.eachComponent("grid",function(a,i){var s=new r(a,e,t);s.name="grid_"+i,s.resize(a,t,!0),a.coordinateSystem=s,n.push(s)}),e.eachSeries(function(a){if(B7(a)){var i=N7(a),s=i.xAxisModel,o=i.yAxisModel,l=s.getCoordSysModel(),c=l.coordinateSystem;a.coordinateSystem=c.getCartesian(s.componentIndex,o.componentIndex)}}),n},r.dimensions=NR,r}();function c4(r,e){return r.getCoordSysModel()===e}function T7(r,e,t,n){t.getAxesOnZeroOf=function(){return i?[i]:[]};var a=r[e],i,s=t.model,o=s.get(["axisLine","onZero"]),l=s.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(l!=null)I7(a[l])&&(i=a[l]);else for(var c in a)if(a.hasOwnProperty(c)&&I7(a[c])&&!n[u(a[c])]){i=a[c];break}i&&(n[u(i)]=!0);function u(h){return h.dim+"_"+h.index}}function I7(r){return r&&r.type!=="category"&&r.type!=="time"&&H2e(r)}function c5e(r,e){var t=r.getExtent(),n=t[0]+t[1];r.toGlobalCoord=r.dim==="x"?function(a){return a+e}:function(a){return n-a+e},r.toLocalCoord=r.dim==="x"?function(a){return a-e}:function(a){return n-a+e}}var oA=Math.PI,fs=function(){function r(e,t){this.group=new Ht,this.opt=t,this.axisModel=e,Lt(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Ht({x:t.position[0],y:t.position[1],rotation:t.rotation});n.updateTransform(),this._transformGroup=n}return r.prototype.hasBuilder=function(e){return!!E7[e]},r.prototype.add=function(e){E7[e](this.opt,this.axisModel,this.group,this._transformGroup)},r.prototype.getGroup=function(){return this.group},r.innerTextLayout=function(e,t,n){var a=YJ(t-e),i,s;return bb(a)?(s=n>0?"top":"bottom",i="center"):bb(a-oA)?(s=n>0?"bottom":"top",i="center"):(s="middle",a>0&&a<oA?i=n>0?"right":"left":i=n>0?"left":"right"),{rotation:a,textAlign:i,textVerticalAlign:s}},r.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},r.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},r}(),E7={axisLine:function(r,e,t,n){var a=e.get(["axisLine","show"]);if(a==="auto"&&r.handleAutoShown&&(a=r.handleAutoShown("axisLine")),!!a){var i=e.axis.getExtent(),s=n.transform,o=[i[0],0],l=[i[1],0],c=o[0]>l[0];s&&(Ci(o,o,s),Ci(l,l,s));var u=He({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new Ya({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:r.strokeContainThreshold||5,silent:!0,z2:1});_0(h.shape,h.style.lineWidth),h.anid="line",t.add(h);var d=e.get(["axisLine","symbol"]);if(d!=null){var A=e.get(["axisLine","symbolSize"]);dt(d)&&(d=[d,d]),(dt(A)||Br(A))&&(A=[A,A]);var g=Op(e.get(["axisLine","symbolOffset"])||0,A),p=A[0],v=A[1];X([{rotate:r.rotation+Math.PI/2,offset:g[0],r:0},{rotate:r.rotation-Math.PI/2,offset:g[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(m,y){if(d[y]!=="none"&&d[y]!=null){var x=Ta(d[y],-p/2,-v/2,p,v,u.stroke,!0),b=m.r+m.offset,S=c?l:o;x.attr({rotation:m.rotate,x:S[0]+b*Math.cos(r.rotation),y:S[1]-b*Math.sin(r.rotation),silent:!0,z2:11}),t.add(x)}})}}},axisTickLabel:function(r,e,t,n){var a=d5e(t,n,e,r),i=f5e(t,n,e,r);if(h5e(e,i,a),A5e(t,n,e,r.tickDirection),e.get(["axisLabel","hideOverlap"])){var s=Yre(We(i,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));Jre(s)}},axisName:function(r,e,t,n){var a=di(r.axisName,e.get("name"));if(a){var i=e.get("nameLocation"),s=r.nameDirection,o=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,h=[i==="start"?c[0]-u*l:i==="end"?c[1]+u*l:(c[0]+c[1])/2,M7(i)?r.labelOffset+s*l:0],d,A=e.get("nameRotate");A!=null&&(A=A*oA/180);var g;M7(i)?d=fs.innerTextLayout(r.rotation,A??r.rotation,s):(d=u5e(r.rotation,i,A||0,c),g=r.axisNameAvailableWidth,g!=null&&(g=Math.abs(g/Math.sin(d.rotation)),!isFinite(g)&&(g=null)));var p=o.getFont(),v=e.get("nameTruncate",!0)||{},m=v.ellipsis,y=di(r.nameTruncateMaxWidth,v.maxWidth,g),x=new Cr({x:h[0],y:h[1],rotation:d.rotation,silent:fs.isLabelSilent(e),style:bn(o,{text:a,font:p,overflow:"truncate",width:y,ellipsis:m,fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:o.get("align")||d.textAlign,verticalAlign:o.get("verticalAlign")||d.textVerticalAlign}),z2:1});if(Fp({el:x,componentModel:e,itemName:a}),x.__fullText=a,x.anid="name",e.get("triggerEvent")){var b=fs.makeAxisEventDataBase(e);b.targetType="axisName",b.name=a,Qt(x).eventData=b}n.add(x),x.updateTransform(),t.add(x),x.decomposeTransform()}}};function u5e(r,e,t,n){var a=YJ(t-r),i,s,o=n[0]>n[1],l=e==="start"&&!o||e!=="start"&&o;return bb(a-oA/2)?(s=l?"bottom":"top",i="center"):bb(a-oA*1.5)?(s=l?"top":"bottom",i="center"):(s="middle",a<oA*1.5&&a>oA/2?i=l?"left":"right":i=l?"right":"left"),{rotation:a,textAlign:i,textVerticalAlign:s}}function h5e(r,e,t){if(!Fre(r.axis)){var n=r.get(["axisLabel","showMinLabel"]),a=r.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var i=e[0],s=e[1],o=e[e.length-1],l=e[e.length-2],c=t[0],u=t[1],h=t[t.length-1],d=t[t.length-2];n===!1?(jo(i),jo(c)):D7(i,s)&&(n?(jo(s),jo(u)):(jo(i),jo(c))),a===!1?(jo(o),jo(h)):D7(l,o)&&(a?(jo(l),jo(d)):(jo(o),jo(h)))}}function jo(r){r&&(r.ignore=!0)}function D7(r,e){var t=r&&r.getBoundingRect().clone(),n=e&&e.getBoundingRect().clone();if(!(!t||!n)){var a=wN([]);return kp(a,a,-r.rotation),t.applyTransform(dh([],a,r.getLocalTransform())),n.applyTransform(dh([],a,e.getLocalTransform())),t.intersect(n)}}function M7(r){return r==="middle"||r==="center"}function Lne(r,e,t,n,a){for(var i=[],s=[],o=[],l=0;l<r.length;l++){var c=r[l].coord;s[0]=c,s[1]=0,o[0]=c,o[1]=t,e&&(Ci(s,s,e),Ci(o,o,e));var u=new Ya({shape:{x1:s[0],y1:s[1],x2:o[0],y2:o[1]},style:n,z2:2,autoBatch:!0,silent:!0});_0(u.shape,u.style.lineWidth),u.anid=a+"_"+r[l].tickValue,i.push(u)}return i}function d5e(r,e,t,n){var a=t.axis,i=t.getModel("axisTick"),s=i.get("show");if(s==="auto"&&n.handleAutoShown&&(s=n.handleAutoShown("axisTick")),!(!s||a.scale.isBlank())){for(var o=i.getModel("lineStyle"),l=n.tickDirection*i.get("length"),c=a.getTicksCoords(),u=Lne(c,e.transform,l,Lt(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<u.length;h++)r.add(u[h]);return u}}function A5e(r,e,t,n){var a=t.axis,i=t.getModel("minorTick");if(!(!i.get("show")||a.scale.isBlank())){var s=a.getMinorTicksCoords();if(s.length)for(var o=i.getModel("lineStyle"),l=n*i.get("length"),c=Lt(o.getLineStyle(),Lt(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),u=0;u<s.length;u++)for(var h=Lne(s[u],e.transform,l,c,"minorticks_"+u),d=0;d<h.length;d++)r.add(h[d])}}function f5e(r,e,t,n){var a=t.axis,i=di(n.axisLabelShow,t.get(["axisLabel","show"]));if(!(!i||a.scale.isBlank())){var s=t.getModel("axisLabel"),o=s.get("margin"),l=a.getViewLabels(),c=(di(n.labelRotate,s.get("rotate"))||0)*oA/180,u=fs.innerTextLayout(n.rotation,c,n.labelDirection),h=t.getCategories&&t.getCategories(!0),d=[],A=fs.isLabelSilent(t),g=t.get("triggerEvent");return X(l,function(p,v){var m=a.scale.type==="ordinal"?a.scale.getRawOrdinalNumber(p.tickValue):p.tickValue,y=p.formattedLabel,x=p.rawLabel,b=s;if(h&&h[m]){var S=h[m];Pt(S)&&S.textStyle&&(b=new Qr(S.textStyle,s,t.ecModel))}var _=b.getTextColor()||t.get(["axisLine","lineStyle","color"]),C=a.dataToCoord(m),w=b.getShallow("align",!0)||u.textAlign,B=$t(b.getShallow("alignMinLabel",!0),w),D=$t(b.getShallow("alignMaxLabel",!0),w),T=b.getShallow("verticalAlign",!0)||b.getShallow("baseline",!0)||u.textVerticalAlign,E=$t(b.getShallow("verticalAlignMinLabel",!0),T),R=$t(b.getShallow("verticalAlignMaxLabel",!0),T),M=new Cr({x:C,y:n.labelOffset+n.labelDirection*o,rotation:u.rotation,silent:A,z2:10+(p.level||0),style:bn(b,{text:y,align:v===0?B:v===l.length-1?D:w,verticalAlign:v===0?E:v===l.length-1?R:T,fill:It(_)?_(a.type==="category"?x:a.type==="value"?m+"":m,v):_})});if(M.anid="label_"+m,Fp({el:M,componentModel:t,itemName:y,formatterParamsExtra:{isTruncated:function(){return M.isTruncated},value:x,tickIndex:v}}),g){var k=fs.makeAxisEventDataBase(t);k.targetType="axisLabel",k.value=x,k.tickIndex=v,a.type==="category"&&(k.dataIndex=m),Qt(M).eventData=k}e.add(M),M.updateTransform(),d.push(M),r.add(M),M.decomposeTransform()}),d}}function g5e(r,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return p5e(t,r,e),t.seriesInvolved&&v5e(t,r),t}function p5e(r,e,t){var n=e.getComponent("tooltip"),a=e.getComponent("axisPointer"),i=a.get("link",!0)||[],s=[];X(t.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=kb(o.model),c=r.coordSysAxesInfo[l]={};r.coordSysMap[l]=o;var u=o.model,h=u.getModel("tooltip",n);if(X(o.getAxes(),Wt(p,!1,null)),o.getTooltipAxes&&n&&h.get("show")){var d=h.get("trigger")==="axis",A=h.get(["axisPointer","type"])==="cross",g=o.getTooltipAxes(h.get(["axisPointer","axis"]));(d||A)&&X(g.baseAxes,Wt(p,A?"cross":!0,d)),A&&X(g.otherAxes,Wt(p,"cross",!1))}function p(v,m,y){var x=y.model.getModel("axisPointer",a),b=x.get("show");if(!(!b||b==="auto"&&!v&&!IR(x))){m==null&&(m=x.get("triggerTooltip")),x=v?m5e(y,h,a,e,v,m):x;var S=x.get("snap"),_=x.get("triggerEmphasis"),C=kb(y.model),w=m||S||y.type==="category",B=r.axesInfo[C]={key:C,axis:y,coordSys:o,axisPointerModel:x,triggerTooltip:m,triggerEmphasis:_,involveSeries:w,snap:S,useHandle:IR(x),seriesModels:[],linkGroup:null};c[C]=B,r.seriesInvolved=r.seriesInvolved||w;var D=y5e(i,y);if(D!=null){var T=s[D]||(s[D]={axesInfo:{}});T.axesInfo[C]=B,T.mapper=i[D].mapper,B.linkGroup=T}}}})}function m5e(r,e,t,n,a,i){var s=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};X(o,function(d){l[d]=Ft(s.get(d))}),l.snap=r.type!=="category"&&!!i,s.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),a==="cross"){var u=s.get(["label","show"]);if(c.show=u??!0,!i){var h=l.lineStyle=s.get("crossStyle");h&&Lt(c,h.textStyle)}}return r.model.getModel("axisPointer",new Qr(l,t,n))}function v5e(r,e){e.eachSeries(function(t){var n=t.coordinateSystem,a=t.get(["tooltip","trigger"],!0),i=t.get(["tooltip","show"],!0);!n||a==="none"||a===!1||a==="item"||i===!1||t.get(["axisPointer","show"],!0)===!1||X(r.coordSysAxesInfo[kb(n.model)],function(s){var o=s.axis;n.getAxis(o.dim)===o&&(s.seriesModels.push(t),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=t.getData().count())})})}function y5e(r,e){for(var t=e.model,n=e.dim,a=0;a<r.length;a++){var i=r[a]||{};if(u4(i[n+"AxisId"],t.id)||u4(i[n+"AxisIndex"],t.componentIndex)||u4(i[n+"AxisName"],t.name))return a}}function u4(r,e){return r==="all"||$e(r)&&rr(r,e)>=0||r===e}function x5e(r){var e=FF(r);if(e){var t=e.axisPointerModel,n=e.axis.scale,a=t.option,i=t.get("status"),s=t.get("value");s!=null&&(s=n.parse(s));var o=IR(t);i==null&&(a.status=o?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(s==null||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),a.value=s,o&&(a.status=e.axis.scale.isBlank()?"hide":"show")}}function FF(r){var e=(r.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[kb(r)]}function b5e(r){var e=FF(r);return e&&e.axisPointerModel}function IR(r){return!!r.get(["handle","show"])}function kb(r){return r.type+"||"+r.id}var R7={},Qp=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){this.axisPointerClass&&x5e(t),r.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,a,!0)},e.prototype.updateAxisPointer=function(t,n,a,i){this._doUpdateAxisPointerClass(t,a,!1)},e.prototype.remove=function(t,n){var a=this._axisPointer;a&&a.remove(n)},e.prototype.dispose=function(t,n){this._disposeAxisPointer(n),r.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,n,a){var i=e.getAxisPointerClass(this.axisPointerClass);if(i){var s=b5e(t);s?(this._axisPointer||(this._axisPointer=new i)).render(t,s,n,a):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,n){R7[t]=n},e.getAxisPointerClass=function(t){return t&&R7[t]},e.type="axis",e}(Gn),ER=wr();function Pne(r,e,t,n){var a=t.axis;if(!a.scale.isBlank()){var i=t.getModel("splitArea"),s=i.getModel("areaStyle"),o=s.get("color"),l=n.coordinateSystem.getRect(),c=a.getTicksCoords({tickModel:i,clamp:!0});if(c.length){var u=o.length,h=ER(r).splitAreaColors,d=bt(),A=0;if(h)for(var g=0;g<c.length;g++){var p=h.get(c[g].tickValue);if(p!=null){A=(p+(u-1)*g)%u;break}}var v=a.toGlobalCoord(c[0].coord),m=s.getAreaStyle();o=$e(o)?o:[o];for(var g=1;g<c.length;g++){var y=a.toGlobalCoord(c[g].coord),x=void 0,b=void 0,S=void 0,_=void 0;a.isHorizontal()?(x=v,b=l.y,S=y-x,_=l.height,v=x+S):(x=l.x,b=v,S=l.width,_=y-b,v=b+_);var C=c[g-1].tickValue;C!=null&&d.set(C,A),e.add(new br({anid:C!=null?"area_"+C:null,shape:{x,y:b,width:S,height:_},style:Lt({fill:o[A]},m),autoBatch:!0,silent:!0})),A=(A+1)%u}ER(r).splitAreaColors=d}}}function kne(r){ER(r).splitAreaColors=null}var w5e=["axisLine","axisTickLabel","axisName"],S5e=["splitArea","splitLine","minorSplitLine"],Fne=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,n,a,i){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new Ht,this.group.add(this._axisGroup),!!t.get("show")){var o=t.getCoordSysModel(),l=TR(o,t),c=new fs(t,He({handleAutoShown:function(h){for(var d=o.coordinateSystem.getCartesians(),A=0;A<d.length;A++)if(xR(d[A].getOtherAxis(t.axis).scale))return!0;return!1}},l));X(w5e,c.add,c),this._axisGroup.add(c.getGroup()),X(S5e,function(h){t.get([h,"show"])&&_5e[h](this,this._axisGroup,t,o)},this);var u=i&&i.type==="changeAxisOrder"&&i.isInitSort;u||Ew(s,this._axisGroup,t),r.prototype.render.call(this,t,n,a,i)}},e.prototype.remove=function(){kne(this)},e.type="cartesianAxis",e}(Qp),_5e={splitLine:function(r,e,t,n){var a=t.axis;if(!a.scale.isBlank()){var i=t.getModel("splitLine"),s=i.getModel("lineStyle"),o=s.get("color"),l=i.get("showMinLine")!==!1,c=i.get("showMaxLine")!==!1;o=$e(o)?o:[o];for(var u=n.coordinateSystem.getRect(),h=a.isHorizontal(),d=0,A=a.getTicksCoords({tickModel:i}),g=[],p=[],v=s.getLineStyle(),m=0;m<A.length;m++){var y=a.toGlobalCoord(A[m].coord);if(!(m===0&&!l||m===A.length-1&&!c)){var x=A[m].tickValue;h?(g[0]=y,g[1]=u.y,p[0]=y,p[1]=u.y+u.height):(g[0]=u.x,g[1]=y,p[0]=u.x+u.width,p[1]=y);var b=d++%o.length,S=new Ya({anid:x!=null?"line_"+x:null,autoBatch:!0,shape:{x1:g[0],y1:g[1],x2:p[0],y2:p[1]},style:Lt({stroke:o[b]},v),silent:!0});_0(S.shape,v.lineWidth),e.add(S)}}}},minorSplitLine:function(r,e,t,n){var a=t.axis,i=t.getModel("minorSplitLine"),s=i.getModel("lineStyle"),o=n.coordinateSystem.getRect(),l=a.isHorizontal(),c=a.getMinorTicksCoords();if(c.length)for(var u=[],h=[],d=s.getLineStyle(),A=0;A<c.length;A++)for(var g=0;g<c[A].length;g++){var p=a.toGlobalCoord(c[A][g].coord);l?(u[0]=p,u[1]=o.y,h[0]=p,h[1]=o.y+o.height):(u[0]=o.x,u[1]=p,h[0]=o.x+o.width,h[1]=p);var v=new Ya({anid:"minor_line_"+c[A][g].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]},style:d,silent:!0});_0(v.shape,d.lineWidth),e.add(v)}},splitArea:function(r,e,t,n){Pne(r,e,t,n)}},jne=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e}(Fne),C5e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=jne.type,t}return e.type="yAxis",e}(Fne),B5e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,n){this.group.removeAll(),t.get("show")&&this.group.add(new br({shape:t.coordinateSystem.getRect(),style:Lt({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Gn),L7={offset:0};function One(r){r.registerComponentView(B5e),r.registerComponentModel(e5e),r.registerCoordinateSystem("cartesian2d",l5e),I0(r,"x",BR,L7),I0(r,"y",BR,L7),r.registerComponentView(jne),r.registerComponentView(C5e),r.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function N5e(r){sr(One),r.registerSeriesModel(q_e),r.registerChartView(J_e),r.registerLayout(Ow("scatter"))}function T5e(r){r.eachSeriesByType("radar",function(e){var t=e.getData(),n=[],a=e.coordinateSystem;if(a){var i=a.getIndicatorAxes();X(i,function(s,o){t.each(t.mapDimension(i[o].dim),function(l,c){n[c]=n[c]||[];var u=a.dataToPoint(l,o);n[c][o]=P7(u)?u:k7(a)})}),t.each(function(s){var o=fve(n[s],function(l){return P7(l)})||k7(a);n[s].push(o.slice()),t.setItemLayout(s,n[s])})}})}function P7(r){return!isNaN(r[0])&&!isNaN(r[1])}function k7(r){return[r.cx,r.cy]}function I5e(r){var e=r.polar;if(e){$e(e)||(e=[e]);var t=[];X(e,function(n,a){n.indicator?(n.type&&!n.shape&&(n.shape=n.type),r.radar=r.radar||[],$e(r.radar)||(r.radar=[r.radar]),r.radar.push(n)):t.push(n)}),r.polar=t}X(r.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})}var E5e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=t.coordinateSystem,s=this.group,o=t.getData(),l=this._data;function c(d,A){var g=d.getItemVisual(A,"symbol")||"circle";if(g!=="none"){var p=hy(d.getItemVisual(A,"symbolSize")),v=Ta(g,-1,-1,2,2),m=d.getItemVisual(A,"symbolRotate")||0;return v.attr({style:{strokeNoScale:!0},z2:100,scaleX:p[0]/2,scaleY:p[1]/2,rotation:m*Math.PI/180||0}),v}}function u(d,A,g,p,v,m){g.removeAll();for(var y=0;y<A.length-1;y++){var x=c(p,v);x&&(x.__dimIdx=y,d[y]?(x.setPosition(d[y]),jp[m?"initProps":"updateProps"](x,{x:A[y][0],y:A[y][1]},t,v)):x.setPosition(A[y]),g.add(x))}}function h(d){return We(d,function(A){return[i.cx,i.cy]})}o.diff(l).add(function(d){var A=o.getItemLayout(d);if(A){var g=new vs,p=new ws,v={shape:{points:A}};g.shape.points=h(A),p.shape.points=h(A),jn(g,v,t,d),jn(p,v,t,d);var m=new Ht,y=new Ht;m.add(p),m.add(g),m.add(y),u(p.shape.points,A,y,o,d,!0),o.setItemGraphicEl(d,m)}}).update(function(d,A){var g=l.getItemGraphicEl(A),p=g.childAt(0),v=g.childAt(1),m=g.childAt(2),y={shape:{points:o.getItemLayout(d)}};y.shape.points&&(u(p.shape.points,y.shape.points,m,o,d,!1),nc(v),nc(p),Er(p,y,t),Er(v,y,t),o.setItemGraphicEl(d,g))}).remove(function(d){s.remove(l.getItemGraphicEl(d))}).execute(),o.eachItemGraphicEl(function(d,A){var g=o.getItemModel(A),p=d.childAt(0),v=d.childAt(1),m=d.childAt(2),y=o.getItemVisual(A,"style"),x=y.fill;s.add(d),p.useStyle(Lt(g.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:x})),Bi(p,g,"lineStyle"),Bi(v,g,"areaStyle");var b=g.getModel("areaStyle"),S=b.isEmpty()&&b.parentModel.isEmpty();v.ignore=S,X(["emphasis","select","blur"],function(w){var B=g.getModel([w,"areaStyle"]),D=B.isEmpty()&&B.parentModel.isEmpty();v.ensureState(w).ignore=D&&S}),v.useStyle(Lt(b.getAreaStyle(),{fill:x,opacity:.7,decal:y.decal}));var _=g.getModel("emphasis"),C=_.getModel("itemStyle").getItemStyle();m.eachChild(function(w){if(w instanceof fi){var B=w.style;w.useStyle(He({image:B.image,x:B.x,y:B.y,width:B.width,height:B.height},y))}else w.useStyle(y),w.setColor(x),w.style.strokeNoScale=!0;var D=w.ensureState("emphasis");D.style=Ft(C);var T=o.getStore().get(o.getDimensionIndex(w.__dimIdx),A);(T==null||isNaN(T))&&(T=""),Ni(w,ei(g),{labelFetcher:o.hostModel,labelDataIndex:A,labelDimIndex:w.__dimIdx,defaultText:T,inheritColor:x,defaultOpacity:y.opacity})}),qn(d,_.get("focus"),_.get("blurScope"),_.get("disabled"))}),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(nn),D5e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Hw(ft(this.getData,this),ft(this.getRawData,this))},e.prototype.getInitialData=function(t,n){return fy(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),s=this.coordinateSystem,o=s.getIndicatorAxes(),l=this.getData().getName(t),c=l===""?this.name:l,u=Fte(this,t);return ti("section",{header:c,sortBlocks:!0,blocks:We(o,function(h){var d=i.get(i.mapDimension(h.dim),t);return ti("nameValue",{markerType:"subItem",markerColor:u,name:h.name,value:d,sortParam:d})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var n=this.getData(),a=this.coordinateSystem,i=n.getValues(We(a.dimensions,function(c){return n.mapDimension(c)}),t),s=0,o=i.length;s<o;s++)if(!isNaN(i[s])){var l=a.getIndicatorAxes();return a.coordToPoint(l[s].dataToCoord(i[s]),s)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(Sn),hx=Mne.value;function RS(r,e){return Lt({show:e},r)}var M5e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),n=this.get("splitNumber"),a=this.get("scale"),i=this.get("axisLine"),s=this.get("axisTick"),o=this.get("axisLabel"),l=this.get("axisName"),c=this.get(["axisName","show"]),u=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),d=this.get("triggerEvent"),A=We(this.get("indicator")||[],function(g){g.max!=null&&g.max>0&&!g.min?g.min=0:g.min!=null&&g.min<0&&!g.max&&(g.max=0);var p=l;g.color!=null&&(p=Lt({color:g.color},l));var v=qt(Ft(g),{boundaryGap:t,splitNumber:n,scale:a,axisLine:i,axisTick:s,axisLabel:o,name:g.text,showName:c,nameLocation:"end",nameGap:h,nameTextStyle:p,triggerEvent:d},!1);if(dt(u)){var m=v.name;v.name=u.replace("{value}",m??"")}else It(u)&&(v.name=u(v.name,v));var y=new Qr(v,null,this.ecModel);return Ia(y,Pw.prototype),y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this._indicatorModels=A},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:qt({lineStyle:{color:"#bbb"}},hx.axisLine),axisLabel:RS(hx.axisLabel,!1),axisTick:RS(hx.axisTick,!1),splitLine:RS(hx.splitLine,!0),splitArea:RS(hx.splitArea,!0),indicator:[]},e}(gr),R5e=["axisLine","axisTickLabel","axisName"],L5e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=this.group;i.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var n=t.coordinateSystem,a=n.getIndicatorAxes(),i=We(a,function(s){var o=s.model.get("showName")?s.name:"",l=new fs(s.model,{axisName:o,position:[n.cx,n.cy],rotation:s.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});X(i,function(s){X(R5e,s.add,s),this.group.add(s.getGroup())},this)},e.prototype._buildSplitLineAndArea=function(t){var n=t.coordinateSystem,a=n.getIndicatorAxes();if(!a.length)return;var i=t.get("shape"),s=t.getModel("splitLine"),o=t.getModel("splitArea"),l=s.getModel("lineStyle"),c=o.getModel("areaStyle"),u=s.get("show"),h=o.get("show"),d=l.get("color"),A=c.get("color"),g=$e(d)?d:[d],p=$e(A)?A:[A],v=[],m=[];function y(k,O,Q){var H=Q%O.length;return k[H]=k[H]||[],H}if(i==="circle")for(var x=a[0].getTicksCoords(),b=n.cx,S=n.cy,_=0;_<x.length;_++){if(u){var C=y(v,g,_);v[C].push(new Oh({shape:{cx:b,cy:S,r:x[_].coord}}))}if(h&&_<x.length-1){var C=y(m,p,_);m[C].push(new Nw({shape:{cx:b,cy:S,r0:x[_].coord,r:x[_+1].coord}}))}}else for(var w,B=We(a,function(k,O){var Q=k.getTicksCoords();return w=w==null?Q.length-1:Math.min(Q.length-1,w),We(Q,function(H){return n.coordToPoint(H.coord,O)})}),D=[],_=0;_<=w;_++){for(var T=[],E=0;E<a.length;E++)T.push(B[E][_]);if(T[0]&&T.push(T[0].slice()),u){var C=y(v,g,_);v[C].push(new ws({shape:{points:T}}))}if(h&&D){var C=y(m,p,_-1);m[C].push(new vs({shape:{points:T.concat(D)}}))}D=T.slice().reverse()}var R=l.getLineStyle(),M=c.getAreaStyle();X(m,function(k,O){this.group.add(rl(k,{style:Lt({stroke:"none",fill:p[O%p.length]},M),silent:!0}))},this),X(v,function(k,O){this.group.add(rl(k,{style:Lt({fill:"none",stroke:g[O%g.length]},R),silent:!0}))},this)},e.type="radar",e}(Gn),P5e=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this,t,n,a)||this;return i.type="value",i.angle=0,i.name="",i}return e}(lc),k5e=function(){function r(e,t,n){this.dimensions=[],this._model=e,this._indicatorAxes=We(e.getIndicatorModels(),function(a,i){var s="indicator_"+i,o=new P5e(s,new Th);return o.name=a.get("name"),o.model=a,a.axis=o,this.dimensions.push(s),o},this),this.resize(e,n)}return r.prototype.getIndicatorAxes=function(){return this._indicatorAxes},r.prototype.dataToPoint=function(e,t){var n=this._indicatorAxes[t];return this.coordToPoint(n.dataToCoord(e),t)},r.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t],a=n.angle,i=this.cx+e*Math.cos(a),s=this.cy-e*Math.sin(a);return[i,s]},r.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,a=Math.sqrt(t*t+n*n);t/=a,n/=a;for(var i=Math.atan2(-n,t),s=1/0,o,l=-1,c=0;c<this._indicatorAxes.length;c++){var u=this._indicatorAxes[c],h=Math.abs(i-u.angle);h<s&&(o=u,l=c,s=h)}return[l,+(o&&o.coordToData(a))]},r.prototype.resize=function(e,t){var n=e.get("center"),a=t.getWidth(),i=t.getHeight(),s=Math.min(a,i)/2;this.cx=ot(n[0],a),this.cy=ot(n[1],i),this.startAngle=e.get("startAngle")*Math.PI/180;var o=e.get("radius");(dt(o)||Br(o))&&(o=[0,o]),this.r0=ot(o[0],s),this.r=ot(o[1],s),X(this._indicatorAxes,function(l,c){l.setExtent(this.r0,this.r);var u=this.startAngle+c*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),l.angle=u},this)},r.prototype.update=function(e,t){var n=this._indicatorAxes,a=this._model;X(n,function(o){o.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(o,l){if(!(o.get("coordinateSystem")!=="radar"||e.getComponent("radar",o.get("radarIndex"))!==a)){var c=o.getData();X(n,function(u){u.scale.unionExtentFromData(c,c.mapDimension(u.dim))})}},this);var i=a.get("splitNumber"),s=new Th;s.setExtent(0,i),s.setInterval(1),X(n,function(o,l){Rne(o.scale,o.model,s)})},r.prototype.convertToPixel=function(e,t,n){return console.warn("Not implemented."),null},r.prototype.convertFromPixel=function(e,t,n){return console.warn("Not implemented."),null},r.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},r.create=function(e,t){var n=[];return e.eachComponent("radar",function(a){var i=new r(a,e,t);n.push(i),a.coordinateSystem=i}),e.eachSeriesByType("radar",function(a){a.get("coordinateSystem")==="radar"&&(a.coordinateSystem=n[a.get("radarIndex")||0])}),n},r.dimensions=[],r}();function F5e(r){r.registerCoordinateSystem("radar",k5e),r.registerComponentModel(M5e),r.registerComponentView(L5e),r.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(n){t.setItemVisual(n,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function j5e(r){sr(F5e),r.registerChartView(E5e),r.registerSeriesModel(D5e),r.registerLayout(T5e),r.registerProcessor(Uw("radar")),r.registerPreprocessor(I5e)}var F7="\0_ec_interaction_mutex";function O5e(r,e,t){var n=jF(r);n[e]=t}function U5e(r,e,t){var n=jF(r),a=n[e];a===t&&(n[e]=null)}function j7(r,e){return!!jF(r)[e]}function jF(r){return r[F7]||(r[F7]={})}du({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Aa);var Qw=function(r){Pe(e,r);function e(t){var n=r.call(this)||this;n._zr=t;var a=ft(n._mousedownHandler,n),i=ft(n._mousemoveHandler,n),s=ft(n._mouseupHandler,n),o=ft(n._mousewheelHandler,n),l=ft(n._pinchHandler,n);return n.enable=function(c,u){this.disable(),this._opt=Lt(Ft(u)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),c==null&&(c=!0),(c===!0||c==="move"||c==="pan")&&(t.on("mousedown",a),t.on("mousemove",i),t.on("mouseup",s)),(c===!0||c==="scale"||c==="zoom")&&(t.on("mousewheel",o),t.on("pinch",l))},n.disable=function(){t.off("mousedown",a),t.off("mousemove",i),t.off("mouseup",s),t.off("mousewheel",o),t.off("pinch",l)},n}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!u8(t)){for(var n=t.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var a=t.offsetX,i=t.offsetY;this.pointerChecker&&this.pointerChecker(t,a,i)&&(this._x=a,this._y=i,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!o5("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||j7(this._zr,"globalPan"))){var n=t.offsetX,a=t.offsetY,i=this._x,s=this._y,o=n-i,l=a-s;this._x=n,this._y=a,this._opt.preventDefaultMouseMove&&Sh(t.event),Une(this,"pan","moveOnMouseMove",t,{dx:o,dy:l,oldX:i,oldY:s,newX:n,newY:a,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){u8(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var n=o5("zoomOnMouseWheel",t,this._opt),a=o5("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,s=Math.abs(i),o=t.offsetX,l=t.offsetY;if(!(i===0||!n&&!a)){if(n){var c=s>3?1.4:s>1?1.2:1.1,u=i>0?c:1/c;h4(this,"zoom","zoomOnMouseWheel",t,{scale:u,originX:o,originY:l,isAvailableBehavior:null})}if(a){var h=Math.abs(i),d=(i>0?1:-1)*(h>3?.4:h>1?.15:.05);h4(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:d,originX:o,originY:l,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!j7(this._zr,"globalPan")){var n=t.pinchScale>1?1.1:1/1.1;h4(this,"zoom",null,t,{scale:n,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(vl);function h4(r,e,t,n,a){r.pointerChecker&&r.pointerChecker(n,a.originX,a.originY)&&(Sh(n.event),Une(r,e,t,n,a))}function Une(r,e,t,n,a){a.isAvailableBehavior=ft(o5,null,t,n),r.trigger(e,a)}function o5(r,e,t){var n=t[r];return!r||n&&(!dt(n)||e.event[n+"Key"])}function OF(r,e,t){var n=r.target;n.x+=e,n.y+=t,n.dirty()}function UF(r,e,t,n){var a=r.target,i=r.zoomLimit,s=r.zoom=r.zoom||1;if(s*=e,i){var o=i.min||0,l=i.max||1/0;s=Math.max(Math.min(l,s),o)}var c=s/r.zoom;r.zoom=s,a.x-=(t-a.x)*(c-1),a.y-=(n-a.y)*(c-1),a.scaleX*=c,a.scaleY*=c,a.dirty()}var H5e={axisPointer:1,tooltip:1,brush:1};function JN(r,e,t){var n=e.getComponentByElement(r.topTarget),a=n&&n.coordinateSystem;return n&&n!==t&&!H5e.hasOwnProperty(n.mainType)&&a&&a.model!==t}function Hne(r){if(dt(r)){var e=new DOMParser;r=e.parseFromString(r,"text/xml")}var t=r;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var d4,OC={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},O7=pr(OC),UC={"alignment-baseline":"textBaseline","stop-color":"stopColor"},U7=pr(UC),Q5e=function(){function r(){this._defs={},this._root=null}return r.prototype.parse=function(e,t){t=t||{};var n=Hne(e);this._defsUsePending=[];var a=new Ht;this._root=a;var i=[],s=n.getAttribute("viewBox")||"",o=parseFloat(n.getAttribute("width")||t.width),l=parseFloat(n.getAttribute("height")||t.height);isNaN(o)&&(o=null),isNaN(l)&&(l=null),ro(n,a,null,!0,!1);for(var c=n.firstChild;c;)this._parseNode(c,a,i,null,!1,!1),c=c.nextSibling;V5e(this._defs,this._defsUsePending),this._defsUsePending=[];var u,h;if(s){var d=eT(s);d.length>=4&&(u={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(u&&o!=null&&l!=null&&(h=zne(u,{x:0,y:0,width:o,height:l}),!t.ignoreViewBox)){var A=a;a=new Ht,a.add(A),A.scaleX=A.scaleY=h.scale,A.x=h.x,A.y=h.y}return!t.ignoreRootClip&&o!=null&&l!=null&&a.setClipPath(new br({shape:{x:0,y:0,width:o,height:l}})),{root:a,width:o,height:l,viewBoxRect:u,viewBoxTransform:h,named:i}},r.prototype._parseNode=function(e,t,n,a,i,s){var o=e.nodeName.toLowerCase(),l,c=a;if(o==="defs"&&(i=!0),o==="text"&&(s=!0),o==="defs"||o==="switch")l=t;else{if(!i){var u=d4[o];if(u&&vt(d4,o)){l=u.call(this,e,t);var h=e.getAttribute("name");if(h){var d={name:h,namedFrom:null,svgNodeTagLower:o,el:l};n.push(d),o==="g"&&(c=d)}else a&&n.push({name:a.name,namedFrom:a,svgNodeTagLower:o,el:l});t.add(l)}}var A=H7[o];if(A&&vt(H7,o)){var g=A.call(this,e),p=e.getAttribute("id");p&&(this._defs[p]=g)}}if(l&&l.isGroup)for(var v=e.firstChild;v;)v.nodeType===1?this._parseNode(v,l,n,c,i,s):v.nodeType===3&&s&&this._parseText(v,l),v=v.nextSibling},r.prototype._parseText=function(e,t){var n=new S0({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Oo(t,n),ro(e,n,this._defsUsePending,!1,!1),z5e(n,t);var a=n.style,i=a.fontSize;i&&i<9&&(a.fontSize=9,n.scaleX*=i/9,n.scaleY*=i/9);var s=(a.fontSize||a.fontFamily)&&[a.fontStyle,a.fontWeight,(a.fontSize||12)+"px",a.fontFamily||"sans-serif"].join(" ");a.font=s;var o=n.getBoundingRect();return this._textX+=o.width,t.add(n),n},r.internalField=function(){d4={g:function(e,t){var n=new Ht;return Oo(t,n),ro(e,n,this._defsUsePending,!1,!1),n},rect:function(e,t){var n=new br;return Oo(t,n),ro(e,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(e,t){var n=new Oh;return Oo(t,n),ro(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),n.silent=!0,n},line:function(e,t){var n=new Ya;return Oo(t,n),ro(e,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(e,t){var n=new MN;return Oo(t,n),ro(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(e,t){var n=e.getAttribute("points"),a;n&&(a=G7(n));var i=new vs({shape:{points:a||[]},silent:!0});return Oo(t,i),ro(e,i,this._defsUsePending,!1,!1),i},polyline:function(e,t){var n=e.getAttribute("points"),a;n&&(a=G7(n));var i=new ws({shape:{points:a||[]},silent:!0});return Oo(t,i),ro(e,i,this._defsUsePending,!1,!1),i},image:function(e,t){var n=new fi;return Oo(t,n),ro(e,n,this._defsUsePending,!1,!1),n.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),n.silent=!0,n},text:function(e,t){var n=e.getAttribute("x")||"0",a=e.getAttribute("y")||"0",i=e.getAttribute("dx")||"0",s=e.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(i),this._textY=parseFloat(a)+parseFloat(s);var o=new Ht;return Oo(t,o),ro(e,o,this._defsUsePending,!1,!0),o},tspan:function(e,t){var n=e.getAttribute("x"),a=e.getAttribute("y");n!=null&&(this._textX=parseFloat(n)),a!=null&&(this._textY=parseFloat(a));var i=e.getAttribute("dx")||"0",s=e.getAttribute("dy")||"0",o=new Ht;return Oo(t,o),ro(e,o,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(s),o},path:function(e,t){var n=e.getAttribute("d")||"",a=Dee(n);return Oo(t,a),ro(e,a,this._defsUsePending,!1,!1),a.silent=!0,a}}}(),r}(),H7={lineargradient:function(r){var e=parseInt(r.getAttribute("x1")||"0",10),t=parseInt(r.getAttribute("y1")||"0",10),n=parseInt(r.getAttribute("x2")||"10",10),a=parseInt(r.getAttribute("y2")||"0",10),i=new Iw(e,t,n,a);return Q7(r,i),z7(r,i),i},radialgradient:function(r){var e=parseInt(r.getAttribute("cx")||"0",10),t=parseInt(r.getAttribute("cy")||"0",10),n=parseInt(r.getAttribute("r")||"0",10),a=new Pee(e,t,n);return Q7(r,a),z7(r,a),a}};function Q7(r,e){var t=r.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function z7(r,e){for(var t=r.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var n=t.getAttribute("offset"),a=void 0;n&&n.indexOf("%")>0?a=parseInt(n,10)/100:n?a=parseFloat(n):a=0;var i={};Qne(t,i,i);var s=i.stopColor||t.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:a,color:s})}t=t.nextSibling}}function Oo(r,e){r&&r.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Lt(e.__inheritedStyle,r.__inheritedStyle))}function G7(r){for(var e=eT(r),t=[],n=0;n<e.length;n+=2){var a=parseFloat(e[n]),i=parseFloat(e[n+1]);t.push([a,i])}return t}function ro(r,e,t,n,a){var i=e,s=i.__inheritedStyle=i.__inheritedStyle||{},o={};r.nodeType===1&&(W5e(r,e),Qne(r,s,o),n||q5e(r,s,o)),i.style=i.style||{},s.fill!=null&&(i.style.fill=V7(i,"fill",s.fill,t)),s.stroke!=null&&(i.style.stroke=V7(i,"stroke",s.stroke,t)),X(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){s[l]!=null&&(i.style[l]=parseFloat(s[l]))}),X(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){s[l]!=null&&(i.style[l]=s[l])}),a&&(i.__selfStyle=o),s.lineDash&&(i.style.lineDash=We(eT(s.lineDash),function(l){return parseFloat(l)})),(s.visibility==="hidden"||s.visibility==="collapse")&&(i.invisible=!0),s.display==="none"&&(i.ignore=!0)}function z5e(r,e){var t=e.__selfStyle;if(t){var n=t.textBaseline,a=n;!n||n==="auto"||n==="baseline"?a="alphabetic":n==="before-edge"||n==="text-before-edge"?a="top":n==="after-edge"||n==="text-after-edge"?a="bottom":(n==="central"||n==="mathematical")&&(a="middle"),r.style.textBaseline=a}var i=e.__inheritedStyle;if(i){var s=i.textAlign,o=s;s&&(s==="middle"&&(o="center"),r.style.textAlign=o)}}var G5e=/^url\(\s*#(.*?)\)/;function V7(r,e,t,n){var a=t&&t.match(G5e);if(a){var i=Kl(a[1]);n.push([r,e,i]);return}return t==="none"&&(t=null),t}function V5e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n[0].style[n[1]]=r[n[2]]}}var $5e=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function eT(r){return r.match($5e)||[]}var K5e=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,A4=Math.PI/180;function W5e(r,e){var t=r.getAttribute("transform");if(t){t=t.replace(/,/g," ");var n=[],a=null;t.replace(K5e,function(h,d,A){return n.push(d,A),""});for(var i=n.length-1;i>0;i-=2){var s=n[i],o=n[i-1],l=eT(s);switch(a=a||bo(),o){case"translate":au(a,a,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":Pk(a,a,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":kp(a,a,-parseFloat(l[0])*A4,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var c=Math.tan(parseFloat(l[0])*A4);dh(a,[1,0,c,1,0,0],a);break;case"skewY":var u=Math.tan(parseFloat(l[0])*A4);dh(a,[1,u,0,1,0,0],a);break;case"matrix":a[0]=parseFloat(l[0]),a[1]=parseFloat(l[1]),a[2]=parseFloat(l[2]),a[3]=parseFloat(l[3]),a[4]=parseFloat(l[4]),a[5]=parseFloat(l[5]);break}}e.setLocalTransform(a)}}var $7=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Qne(r,e,t){var n=r.getAttribute("style");if(n){$7.lastIndex=0;for(var a;(a=$7.exec(n))!=null;){var i=a[1],s=vt(OC,i)?OC[i]:null;s&&(e[s]=a[2]);var o=vt(UC,i)?UC[i]:null;o&&(t[o]=a[2])}}}function q5e(r,e,t){for(var n=0;n<O7.length;n++){var a=O7[n],i=r.getAttribute(a);i!=null&&(e[OC[a]]=i)}for(var n=0;n<U7.length;n++){var a=U7[n],i=r.getAttribute(a);i!=null&&(t[UC[a]]=i)}}function zne(r,e){var t=e.width/r.width,n=e.height/r.height,a=Math.min(t,n);return{scale:a,x:-(r.x+r.width/2)*a+(e.x+e.width/2),y:-(r.y+r.height/2)*a+(e.y+e.height/2)}}function Y5e(r,e){var t=new Q5e;return t.parse(r,e)}var X5e=bt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Z5e=function(){function r(e,t){this.type="geoSVG",this._usedGraphicMap=bt(),this._freedGraphics=[],this._mapName=e,this._parsedXML=Hne(t)}return r.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=eCe(e.named),n=t.regions,a=t.regionsMap;this._regions=n,this._regionsMap=a}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},r.prototype._buildGraphic=function(e){var t,n;try{t=e&&Y5e(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=t.root,gs(n!=null)}catch(v){throw new Error(`Invalid svg format
`+v.message)}var a=new Ht;a.add(n),a.isGeoSVGGraphicRoot=!0;var i=t.width,s=t.height,o=t.viewBoxRect,l=this._boundingRect;if(!l){var c=void 0,u=void 0,h=void 0,d=void 0;if(i!=null?(c=0,h=i):o&&(c=o.x,h=o.width),s!=null?(u=0,d=s):o&&(u=o.y,d=o.height),c==null||u==null){var A=n.getBoundingRect();c==null&&(c=A.x,h=A.width),u==null&&(u=A.y,d=A.height)}l=this._boundingRect=new Zt(c,u,h,d)}if(o){var g=zne(o,l);n.scaleX=n.scaleY=g.scale,n.x=g.x,n.y=g.y}a.setClipPath(new br({shape:l.plain()}));var p=[];return X(t.named,function(v){X5e.get(v.svgNodeTagLower)!=null&&(p.push(v),J5e(v.el))}),{root:a,boundingRect:l,named:p}},r.prototype.useGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,n),n)},r.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);n&&(t.removeKey(e),this._freedGraphics.push(n))},r}();function J5e(r){r.silent=!1,r.isGroup&&r.traverse(function(e){e.silent=!1})}function eCe(r){var e=[],t=bt();return X(r,function(n){if(n.namedFrom==null){var a=new W2e(n.name,n.el);e.push(a),t.set(n.name,a)}}),{regions:e,regionsMap:t}}var DR=[126,25],K7="南海诸岛",sg=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Zf=0;Zf<sg.length;Zf++)for(var Rm=0;Rm<sg[Zf].length;Rm++)sg[Zf][Rm][0]/=10.5,sg[Zf][Rm][1]/=-10.5/.75,sg[Zf][Rm][0]+=DR[0],sg[Zf][Rm][1]+=DR[1];function tCe(r,e){if(r==="china"){for(var t=0;t<e.length;t++)if(e[t].name===K7)return;e.push(new Ore(K7,We(sg,function(n){return{type:"polygon",exterior:n}}),DR))}}var rCe={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function nCe(r,e){if(r==="china"){var t=rCe[e.name];if(t){var n=e.getCenter();n[0]+=t[0]/10.5,n[1]+=-t[1]/(10.5/.75),e.setCenter(n)}}}var aCe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function iCe(r,e){r==="china"&&e.name==="台湾"&&e.geometries.push({type:"polygon",exterior:aCe[0]})}var sCe="name",oCe=function(){function r(e,t,n){this.type="geoJSON",this._parsedMap=bt(),this._mapName=e,this._specialAreas=n,this._geoJSON=cCe(t)}return r.prototype.load=function(e,t){t=t||sCe;var n=this._parsedMap.get(t);if(!n){var a=this._parseToRegions(t);n=this._parsedMap.set(t,{regions:a,boundingRect:lCe(a)})}var i=bt(),s=[];return X(n.regions,function(o){var l=o.name;e&&vt(e,l)&&(o=o.cloneShallow(l=e[l])),s.push(o),i.set(l,o)}),{regions:s,boundingRect:n.boundingRect||new Zt(0,0,0,0),regionsMap:i}},r.prototype._parseToRegions=function(e){var t=this._mapName,n=this._geoJSON,a;try{a=n?Y2e(n,e):[]}catch(i){throw new Error(`Invalid geoJson format
`+i.message)}return tCe(t,a),X(a,function(i){var s=i.name;nCe(t,i),iCe(t,i);var o=this._specialAreas&&this._specialAreas[s];o&&i.transformTo(o.left,o.top,o.width,o.height)},this),a},r.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},r}();function lCe(r){for(var e,t=0;t<r.length;t++){var n=r[t].getBoundingRect();e=e||n.clone(),e.union(n)}return e}function cCe(r){return dt(r)?typeof JSON<"u"&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}var dx=bt();const Ih={registerMap:function(r,e,t){if(e.svg){var n=new Z5e(r,e.svg);dx.set(r,n)}else{var a=e.geoJson||e.geoJSON;a&&!e.features?t=e.specialAreas:a=e;var n=new oCe(r,a,t);dx.set(r,n)}},getGeoResource:function(r){return dx.get(r)},getMapForUser:function(r){var e=dx.get(r);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(r,e,t){var n=dx.get(r);if(n)return n.load(e,t)}};var HF=["rect","circle","line","ellipse","polygon","polyline","path"],uCe=bt(HF),hCe=bt(HF.concat(["g"])),dCe=bt(HF.concat(["g"])),Gne=wr();function LS(r){var e=r.getItemStyle(),t=r.get("areaColor");return t!=null&&(e.fill=t),e}function W7(r){var e=r.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var Vne=function(){function r(e){var t=new Ht;this.uid=iy("ec_map_draw"),this._controller=new Qw(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new Ht),t.add(this._svgGroup=new Ht)}return r.prototype.draw=function(e,t,n,a,i){var s=e.mainType==="geo",o=e.getData&&e.getData();s&&t.eachComponent({mainType:"series",subType:"map"},function(m){!o&&m.getHostGeoModel()===e&&(o=m.getData())});var l=e.coordinateSystem,c=this._regionsGroup,u=this.group,h=l.getTransformInfo(),d=h.raw,A=h.roam,g=!c.childAt(0)||i;g?(u.x=A.x,u.y=A.y,u.scaleX=A.scaleX,u.scaleY=A.scaleY,u.dirty()):Er(u,A,e);var p=o&&o.getVisual("visualMeta")&&o.getVisual("visualMeta").length>0,v={api:n,geo:l,mapOrGeoModel:e,data:o,isVisualEncodedByVisualMap:p,isGeo:s,transformInfoRaw:d};l.resourceType==="geoJSON"?this._buildGeoJSON(v):l.resourceType==="geoSVG"&&this._buildSVG(v),this._updateController(e,t,n),this._updateMapSelectHandler(e,c,n,a)},r.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=bt(),n=bt(),a=this._regionsGroup,i=e.transformInfoRaw,s=e.mapOrGeoModel,o=e.data,l=e.geo.projection,c=l&&l.stream;function u(A,g){return g&&(A=g(A)),A&&[A[0]*i.scaleX+i.x,A[1]*i.scaleY+i.y]}function h(A){for(var g=[],p=!c&&l&&l.project,v=0;v<A.length;++v){var m=u(A[v],p);m&&g.push(m)}return g}function d(A){return{shape:{points:h(A)}}}a.removeAll(),X(e.geo.regions,function(A){var g=A.name,p=t.get(g),v=n.get(g)||{},m=v.dataIdx,y=v.regionModel;if(!p){p=t.set(g,new Ht),a.add(p),m=o?o.indexOfName(g):null,y=e.isGeo?s.getRegionModel(g):o?o.getItemModel(m):null;var x=y.get("silent",!0);x!=null&&(p.silent=x),n.set(g,{dataIdx:m,regionModel:y})}var b=[],S=[];X(A.geometries,function(w){if(w.type==="polygon"){var B=[w.exterior].concat(w.interiors||[]);c&&(B=ez(B,c)),X(B,function(T){b.push(new vs(d(T)))})}else{var D=w.points;c&&(D=ez(D,c,!0)),X(D,function(T){S.push(new ws(d(T)))})}});var _=u(A.getCenter(),l&&l.project);function C(w,B){if(w.length){var D=new Xk({culling:!0,segmentIgnoreThreshold:1,shape:{paths:w}});p.add(D),q7(e,D,m,y),Y7(e,D,g,y,s,m,_),B&&(W7(D),X(D.states,W7))}}C(b),C(S,!0)}),t.each(function(A,g){var p=n.get(g),v=p.dataIdx,m=p.regionModel;X7(e,A,g,m,s,v),Z7(e,A,g,m,s),J7(e,A,g,m,s)},this)},r.prototype._buildSVG=function(e){var t=e.geo.map,n=e.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var a=this._svgDispatcherMap=bt(),i=!1;X(this._svgGraphicRecord.named,function(s){var o=s.name,l=e.mapOrGeoModel,c=e.data,u=s.svgNodeTagLower,h=s.el,d=c?c.indexOfName(o):null,A=l.getRegionModel(o);uCe.get(u)!=null&&h instanceof gl&&q7(e,h,d,A),h instanceof gl&&(h.culling=!0);var g=A.get("silent",!0);if(g!=null&&(h.silent=g),h.z2EmphasisLift=0,!s.namedFrom&&(dCe.get(u)!=null&&Y7(e,h,o,A,l,d,null),X7(e,h,o,A,l,d),Z7(e,h,o,A,l),hCe.get(u)!=null)){var p=J7(e,h,o,A,l);p==="self"&&(i=!0);var v=a.get(o)||a.set(o,[]);v.push(h)}},this),this._enableBlurEntireSVG(i,e)},r.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var n=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),a=n.opacity;this._svgGraphicRecord.root.traverse(function(i){if(!i.isGroup){xp(i);var s=i.ensureState("blur").style||{};s.opacity==null&&a!=null&&(s.opacity=a),i.ensureState("emphasis")}})}},r.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},r.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var n=t.coordinateSystem;if(n.resourceType==="geoJSON"){var a=this._regionsGroupByName;if(a){var i=a.get(e);return i?[i]:[]}}else if(n.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},r.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},r.prototype._useSVG=function(e){var t=Ih.getGeoResource(e);if(t&&t.type==="geoSVG"){var n=t.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=e}},r.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=Ih.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},r.prototype._updateController=function(e,t,n){var a=e.coordinateSystem,i=this._controller,s=this._controllerHost;s.zoomLimit=e.get("scaleLimit"),s.zoom=a.getZoom(),i.enable(e.get("roam")||!1);var o=e.mainType;function l(){var c={type:"geoRoam",componentType:o};return c[o+"Id"]=e.id,c}i.off("pan").on("pan",function(c){this._mouseDownFlag=!1,OF(s,c.dx,c.dy),n.dispatchAction(He(l(),{dx:c.dx,dy:c.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(c){this._mouseDownFlag=!1,UF(s,c.scale,c.originX,c.originY),n.dispatchAction(He(l(),{totalZoom:s.zoom,zoom:c.scale,originX:c.originX,originY:c.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(c,u,h){return a.containPoint([u,h])&&!JN(c,n,e)})},r.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=Gne(t).ignore)})},r.prototype._updateMapSelectHandler=function(e,t,n,a){var i=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){i._mouseDownFlag=!0}),t.on("click",function(s){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},r}();function q7(r,e,t,n){var a=n.getModel("itemStyle"),i=n.getModel(["emphasis","itemStyle"]),s=n.getModel(["blur","itemStyle"]),o=n.getModel(["select","itemStyle"]),l=LS(a),c=LS(i),u=LS(o),h=LS(s),d=r.data;if(d){var A=d.getItemVisual(t,"style"),g=d.getItemVisual(t,"decal");r.isVisualEncodedByVisualMap&&A.fill&&(l.fill=A.fill),g&&(l.decal=B0(g,r.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=c,e.ensureState("select").style=u,e.ensureState("blur").style=h,xp(e)}function Y7(r,e,t,n,a,i,s){var o=r.data,l=r.isGeo,c=o&&isNaN(o.get(o.mapDimension("value"),i)),u=o&&o.getItemLayout(i);if(l||c||u&&u.showLabel){var h=l?t:i,d=void 0;(!o||i>=0)&&(d=a);var A=s?{normal:{align:"center",verticalAlign:"middle"}}:null;Ni(e,ei(n),{labelFetcher:d,labelDataIndex:h,defaultText:t},A);var g=e.getTextContent();if(g&&(Gne(g).ignore=g.ignore,e.textConfig&&s)){var p=e.getBoundingRect().clone();e.textConfig.layoutRect=p,e.textConfig.position=[(s[0]-p.x)/p.width*100+"%",(s[1]-p.y)/p.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function X7(r,e,t,n,a,i){r.data?r.data.setItemGraphicEl(i,e):Qt(e).eventData={componentType:"geo",componentIndex:a.componentIndex,geoIndex:a.componentIndex,name:t,region:n&&n.option||{}}}function Z7(r,e,t,n,a){r.data||Fp({el:e,componentModel:a,itemName:t,itemTooltipOption:n.get("tooltip")})}function J7(r,e,t,n,a){e.highDownSilentOnTouch=!!a.get("selectedMode");var i=n.getModel("emphasis"),s=i.get("focus");return qn(e,s,i.get("blurScope"),i.get("disabled")),r.isGeo&&uxe(e,a,t),s}function ez(r,e,t){var n=[],a;function i(){a=[]}function s(){a.length&&(n.push(a),a=[])}var o=e({polygonStart:i,polygonEnd:s,lineStart:i,lineEnd:s,point:function(l,c){isFinite(l)&&isFinite(c)&&a.push([l,c])},sphere:function(){}});return!t&&o.polygonStart(),X(r,function(l){o.lineStart();for(var c=0;c<l.length;c++)o.point(l[c][0],l[c][1]);o.lineEnd()}),!t&&o.polygonEnd(),n}var ACe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){if(!(i&&i.type==="mapToggleSelect"&&i.from===this.uid)){var s=this.group;if(s.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&i&&i.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),i&&i.type==="geoRoam"&&i.componentType==="series"&&i.seriesId===t.id){var o=this._mapDraw;o&&s.add(o.group)}else if(t.needsDrawMap){var o=this._mapDraw||new Vne(a);s.add(o.group),o.draw(t,n,a,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&n.getComponent("legend")&&this._renderSymbols(t,n,a)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,n,a){var i=t.originalData,s=this.group;i.each(i.mapDimension("value"),function(o,l){if(!isNaN(o)){var c=i.getItemLayout(l);if(!(!c||!c.point)){var u=c.point,h=c.offset,d=new Oh({style:{fill:t.getData().getVisual("style").fill},shape:{cx:u[0]+h*9,cy:u[1],r:3},silent:!0,z2:8+(h?0:ry+1)});if(!h){var A=t.mainSeries.getData(),g=i.getName(l),p=A.indexOfName(g),v=i.getItemModel(l),m=v.getModel("label"),y=A.getItemGraphicEl(p);Ni(d,ei(v),{labelFetcher:{getFormattedLabel:function(x,b){return t.getFormattedLabel(p,b)}},defaultText:g}),d.disableLabelAnimation=!0,m.get("position")||d.setTextConfig({position:"bottom"}),y.onHoverStateChange=function(x){yC(d,x)}}s.add(d)}}})},e.type="map",e}(nn),fCe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(n){if(n!=null){var a=this.getData().getName(n),i=this.coordinateSystem,s=i.getRegion(a);return s&&i.dataToPoint(s.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var n=fy(this,{coordDimensions:["value"],encodeDefaulter:Wt(oF,this)}),a=bt(),i=[],s=0,o=n.count();s<o;s++){var l=n.getName(s);a.set(l,s)}var c=Ih.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return X(c.regions,function(u){var h=u.name,d=a.get(h),A=u.properties&&u.properties.echartsStyle,g;d==null?(g={name:h},i.push(g)):g=n.getRawDataItem(d),A&&qt(g,A)}),n.appendData(i),n},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return t!=null?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var n=this.getData();return n.get(n.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var n=this.getData();return n.getItemModel(n.indexOfName(t))},e.prototype.formatTooltip=function(t,n,a){for(var i=this.getData(),s=this.getRawValue(t),o=i.getName(t),l=this.seriesGroup,c=[],u=0;u<l.length;u++){var h=l[u].originalData.indexOfName(o),d=i.mapDimension("value");isNaN(l[u].originalData.get(d,h))||c.push(l[u].name)}return ti("section",{header:c.join(", "),noHeader:!c.length,blocks:[ti("nameValue",{name:o,value:s})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var n=t.icon||"roundRect",a=Ta(n,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return a.setStyle(t.itemStyle),a.style.stroke="none",n.indexOf("empty")>-1&&(a.style.stroke=a.style.fill,a.style.fill="#fff",a.style.lineWidth=2),a},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(Sn);function gCe(r,e){var t={};return X(r,function(n){n.each(n.mapDimension("value"),function(a,i){var s="ec-"+n.getName(i);t[s]=t[s]||[],isNaN(a)||t[s].push(a)})}),r[0].map(r[0].mapDimension("value"),function(n,a){for(var i="ec-"+r[0].getName(a),s=0,o=1/0,l=-1/0,c=t[i].length,u=0;u<c;u++)o=Math.min(o,t[i][u]),l=Math.max(l,t[i][u]),s+=t[i][u];var h;return e==="min"?h=o:e==="max"?h=l:e==="average"?h=s/c:h=s,c===0?NaN:h})}function pCe(r){var e={};r.eachSeriesByType("map",function(t){var n=t.getHostGeoModel(),a=n?"o"+n.id:"i"+t.getMapType();(e[a]=e[a]||[]).push(t)}),X(e,function(t,n){for(var a=gCe(We(t,function(s){return s.getData()}),t[0].get("mapValueCalculation")),i=0;i<t.length;i++)t[i].originalData=t[i].getData();for(var i=0;i<t.length;i++)t[i].seriesGroup=t,t[i].needsDrawMap=i===0&&!t[i].getHostGeoModel(),t[i].setData(a.cloneShallow()),t[i].mainSeries=t[0]})}function mCe(r){var e={};r.eachSeriesByType("map",function(t){var n=t.getMapType();if(!(t.getHostGeoModel()||e[n])){var a={};X(t.seriesGroup,function(s){var o=s.coordinateSystem,l=s.originalData;s.get("showLegendSymbol")&&r.getComponent("legend")&&l.each(l.mapDimension("value"),function(c,u){var h=l.getName(u),d=o.getRegion(h);if(!(!d||isNaN(c))){var A=a[h]||0,g=o.dataToPoint(d.getCenter());a[h]=A+1,l.setItemLayout(u,{point:g,offset:A})}})});var i=t.getData();i.each(function(s){var o=i.getName(s),l=i.getItemLayout(s)||{};l.showLabel=!a[o],i.setItemLayout(s,l)}),e[n]=!0}})}var tz=Ci,zw=function(r){Pe(e,r);function e(t){var n=r.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new rh,n._rawTransformable=new rh,n.name=t,n}return e.prototype.setBoundingRect=function(t,n,a,i){return this._rect=new Zt(t,n,a,i),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,n,a,i){this._transformTo(t,n,a,i),this._viewRect=new Zt(t,n,a,i)},e.prototype._transformTo=function(t,n,a,i){var s=this.getBoundingRect(),o=this._rawTransformable;o.transform=s.calculateTransform(new Zt(t,n,a,i));var l=o.parent;o.parent=null,o.decomposeTransform(),o.parent=l,this._updateTransform()},e.prototype.setCenter=function(t,n){t&&(this._center=[ot(t[0],n.getWidth()),ot(t[1],n.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var n=this.zoomLimit;n&&(n.max!=null&&(t=Math.min(n.max,t)),n.min!=null&&(t=Math.max(n.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),n=t.x+t.width/2,a=t.y+t.height/2;return[n,a]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,a=this.getDefaultCenter(),i=this.getCenter(),s=this.getZoom();i=Ci([],i,t),a=Ci([],a,t),n.originX=i[0],n.originY=i[1],n.x=a[0]-i[0],n.y=a[1]-i[1],n.scaleX=n.scaleY=s,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,n=this._rawTransformable;n.parent=t,t.updateTransform(),n.updateTransform(),Lk(this.transform||(this.transform=[]),n.transform||bo()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],ey(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,n=this._roamTransformable,a=new rh;return a.transform=n.transform,a.decomposeTransform(),{roam:{x:a.x,y:a.y,scaleX:a.scaleX,scaleY:a.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,n,a){var i=n?this._rawTransform:this.transform;return a=a||[],i?tz(a,t,i):as(a,t)},e.prototype.pointToData=function(t){var n=this.invTransform;return n?tz([],t,n):[t[0],t[1]]},e.prototype.convertToPixel=function(t,n,a){var i=rz(n);return i===this?i.dataToPoint(a):null},e.prototype.convertFromPixel=function(t,n,a){var i=rz(n);return i===this?i.pointToData(a):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(rh);function rz(r){var e=r.seriesModel;return e?e.coordinateSystem:null}var vCe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},$ne=["lng","lat"],MR=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this,t)||this;i.dimensions=$ne,i.type="geo",i._nameCoordMap=bt(),i.map=n;var s=a.projection,o=Ih.load(n,a.nameMap,a.nameProperty),l=Ih.getGeoResource(n);i.resourceType=l?l.type:null;var c=i.regions=o.regions,u=vCe[l.type];i._regionsMap=o.regionsMap,i.regions=o.regions,i.projection=s;var h;if(s)for(var d=0;d<c.length;d++){var A=c[d].getBoundingRect(s);h=h||A.clone(),h.union(A)}else h=o.boundingRect;return i.setBoundingRect(h.x,h.y,h.width,h.height),i.aspectScale=s?1:$t(a.aspectScale,u.aspectScale),i._invertLongitute=s?!1:u.invertLongitute,i}return e.prototype._transformTo=function(t,n,a,i){var s=this.getBoundingRect(),o=this._invertLongitute;s=s.clone(),o&&(s.y=-s.y-s.height);var l=this._rawTransformable;l.transform=s.calculateTransform(new Zt(t,n,a,i));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,o&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var n=this.regions,a=0;a<n.length;a++){var i=n[a];if(i.type==="geoJSON"&&i.contain(t))return n[a]}},e.prototype.addGeoCoord=function(t,n){this._nameCoordMap.set(t,n)},e.prototype.getGeoCoord=function(t){var n=this._regionsMap.get(t);return this._nameCoordMap.get(t)||n&&n.getCenter()},e.prototype.dataToPoint=function(t,n,a){if(dt(t)&&(t=this.getGeoCoord(t)),t){var i=this.projection;return i&&(t=i.project(t)),t&&this.projectedToPoint(t,n,a)}},e.prototype.pointToData=function(t){var n=this.projection;return n&&(t=n.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(t){return r.prototype.pointToData.call(this,t)},e.prototype.projectedToPoint=function(t,n,a){return r.prototype.dataToPoint.call(this,t,n,a)},e.prototype.convertToPixel=function(t,n,a){var i=nz(n);return i===this?i.dataToPoint(a):null},e.prototype.convertFromPixel=function(t,n,a){var i=nz(n);return i===this?i.pointToData(a):null},e}(zw);Ia(MR,zw);function nz(r){var e=r.geoModel,t=r.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",Na).models[0]||{}).coordinateSystem:null}function az(r,e){var t=r.get("boundingCoords");if(t!=null){var n=t[0],a=t[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(a[0])&&isFinite(a[1])){var i=this.projection;if(i){var s=n[0],o=n[1],l=a[0],c=a[1];n=[1/0,1/0],a=[-1/0,-1/0];var u=function(_,C,w,B){for(var D=w-_,T=B-C,E=0;E<=100;E++){var R=E/100,M=i.project([_+D*R,C+T*R]);rA(n,n,M),nA(a,a,M)}};u(s,o,l,o),u(l,o,l,c),u(l,c,s,c),u(s,c,l,o)}this.setBoundingRect(n[0],n[1],a[0]-n[0],a[1]-n[1])}}var h=this.getBoundingRect(),d=r.get("layoutCenter"),A=r.get("layoutSize"),g=e.getWidth(),p=e.getHeight(),v=h.width/h.height*this.aspectScale,m=!1,y,x;d&&A&&(y=[ot(d[0],g),ot(d[1],p)],x=ot(A,Math.min(g,p)),!isNaN(y[0])&&!isNaN(y[1])&&!isNaN(x)&&(m=!0));var b;if(m)b={},v>1?(b.width=x,b.height=x/v):(b.height=x,b.width=x*v),b.y=y[1]-b.height/2,b.x=y[0]-b.width/2;else{var S=r.getBoxLayoutParams();S.aspect=v,b=Ua(S,{width:g,height:p})}this.setViewRect(b.x,b.y,b.width,b.height),this.setCenter(r.get("center"),e),this.setZoom(r.get("zoom"))}function yCe(r,e){X(e.get("geoCoord"),function(t,n){r.addGeoCoord(n,t)})}var xCe=function(){function r(){this.dimensions=$ne}return r.prototype.create=function(e,t){var n=[];function a(s){return{nameProperty:s.get("nameProperty"),aspectScale:s.get("aspectScale"),projection:s.get("projection")}}e.eachComponent("geo",function(s,o){var l=s.get("map"),c=new MR(l+o,l,He({nameMap:s.get("nameMap")},a(s)));c.zoomLimit=s.get("scaleLimit"),n.push(c),s.coordinateSystem=c,c.model=s,c.resize=az,c.resize(s,t)}),e.eachSeries(function(s){var o=s.get("coordinateSystem");if(o==="geo"){var l=s.get("geoIndex")||0;s.coordinateSystem=n[l]}});var i={};return e.eachSeriesByType("map",function(s){if(!s.getHostGeoModel()){var o=s.getMapType();i[o]=i[o]||[],i[o].push(s)}}),X(i,function(s,o){var l=We(s,function(u){return u.get("nameMap")}),c=new MR(o,o,He({nameMap:Ek(l)},a(s[0])));c.zoomLimit=di.apply(null,We(s,function(u){return u.get("scaleLimit")})),n.push(c),c.resize=az,c.resize(s[0],t),X(s,function(u){u.coordinateSystem=c,yCe(c,u)})}),n},r.prototype.getFilledRegions=function(e,t,n,a){for(var i=(e||[]).slice(),s=bt(),o=0;o<i.length;o++)s.set(i[o].name,i[o]);var l=Ih.load(t,n,a);return X(l.regions,function(c){var u=c.name,h=s.get(u),d=c.properties&&c.properties.echartsStyle;h||(h={name:u},i.push(h)),d&&qt(h,d)}),i},r}(),Kne=new xCe,bCe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n,a){var i=Ih.getGeoResource(t.map);if(i&&i.type==="geoJSON"){var s=t.itemStyle=t.itemStyle||{};"color"in s||(s.color="#eee")}this.mergeDefaultAndTheme(t,a),mp(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,n=this.option;n.regions=Kne.getFilledRegions(n.regions,n.map,n.nameMap,n.nameProperty);var a={};this._optionModelMap=nu(n.regions||[],function(i,s){var o=s.name;return o&&(i.set(o,new Qr(s,t,t.ecModel)),s.selected&&(a[o]=!0)),i},bt()),n.selectedMap||(n.selectedMap=a)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Qr(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,n){var a=this.getRegionModel(t),i=n==="normal"?a.get(["label","formatter"]):a.get(["emphasis","label","formatter"]),s={name:t};if(It(i))return s.status=n,i(s);if(dt(i))return i.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var n=this.option,a=n.selectedMode;if(a){a!=="multiple"&&(n.selectedMap=null);var i=n.selectedMap||(n.selectedMap={});i[t]=!0}},e.prototype.unSelect=function(t){var n=this.option.selectedMap;n&&(n[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var n=this.option.selectedMap;return!!(n&&n[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(gr);function iz(r,e){return r.pointToProjected?r.pointToProjected(e):r.pointToData(e)}function QF(r,e,t,n){var a=r.getZoom(),i=r.getCenter(),s=e.zoom,o=r.projectedToPoint?r.projectedToPoint(i):r.dataToPoint(i);if(e.dx!=null&&e.dy!=null&&(o[0]-=e.dx,o[1]-=e.dy,r.setCenter(iz(r,o),n)),s!=null){if(t){var l=t.min||0,c=t.max||1/0;s=Math.max(Math.min(a*s,c),l)/a}r.scaleX*=s,r.scaleY*=s;var u=(e.originX-r.x)*(s-1),h=(e.originY-r.y)*(s-1);r.x-=u,r.y-=h,r.updateTransform(),r.setCenter(iz(r,o),n),r.setZoom(s*a)}return{center:r.getCenter(),zoom:r.getZoom()}}var wCe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,n){this._api=n},e.prototype.render=function(t,n,a,i){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Vne(a));var s=this._mapDraw;s.draw(t,n,a,this,i),s.group.on("click",this._handleRegionClick,this),s.group.silent=t.get("silent"),this.group.add(s.group),this.updateSelectStatus(t,n,a)},e.prototype._handleRegionClick=function(t){var n;Dg(t.target,function(a){return(n=Qt(a).eventData)!=null},!0),n&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:n.name})},e.prototype.updateSelectStatus=function(t,n,a){var i=this;this._mapDraw.group.traverse(function(s){var o=Qt(s).eventData;if(o)return i._model.isSelected(o.name)?a.enterSelect(s):a.leaveSelect(s),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Gn);function SCe(r,e,t){Ih.registerMap(r,e,t)}function Wne(r){r.registerCoordinateSystem("geo",Kne),r.registerComponentModel(bCe),r.registerComponentView(wCe),r.registerImpl("registerMap",SCe),r.registerImpl("getMap",function(t){return Ih.getMapForUser(t)});function e(t,n){n.update="geo:updateSelectStatus",r.registerAction(n,function(a,i){var s={},o=[];return i.eachComponent({mainType:"geo",query:a},function(l){l[t](a.name);var c=l.coordinateSystem;X(c.regions,function(h){s[h.name]=l.isSelected(h.name)||!1});var u=[];X(s,function(h,d){s[d]&&u.push(d)}),o.push({geoIndex:l.componentIndex,name:u})}),{selected:s,allSelected:o,name:a.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),r.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,n,a){var i=t.componentType||"series";n.eachComponent({mainType:i,query:t},function(s){var o=s.coordinateSystem;if(o.type==="geo"){var l=QF(o,t,s.get("scaleLimit"),a);s.setCenter&&s.setCenter(l.center),s.setZoom&&s.setZoom(l.zoom),i==="series"&&X(s.seriesGroup,function(c){c.setCenter(l.center),c.setZoom(l.zoom)})}})})}function _Ce(r){sr(Wne),r.registerChartView(ACe),r.registerSeriesModel(fCe),r.registerLayout(mCe),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,pCe),qte("map",r.registerAction)}function CCe(r){var e=r;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],n,a;n=t.pop();)if(a=n.children,n.isExpand&&a.length)for(var i=a.length,s=i-1;s>=0;s--){var o=a[s];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:s,thread:null},t.push(o)}}function BCe(r,e){var t=r.isExpand?r.children:[],n=r.parentNode.children,a=r.hierNode.i?n[r.hierNode.i-1]:null;if(t.length){ICe(r);var i=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;a?(r.hierNode.prelim=a.hierNode.prelim+e(r,a),r.hierNode.modifier=r.hierNode.prelim-i):r.hierNode.prelim=i}else a&&(r.hierNode.prelim=a.hierNode.prelim+e(r,a));r.parentNode.hierNode.defaultAncestor=ECe(r,a,r.parentNode.hierNode.defaultAncestor||n[0],e)}function NCe(r){var e=r.hierNode.prelim+r.parentNode.hierNode.modifier;r.setLayout({x:e},!0),r.hierNode.modifier+=r.parentNode.hierNode.modifier}function sz(r){return arguments.length?r:RCe}function Yx(r,e){return r-=Math.PI/2,{x:e*Math.cos(r),y:e*Math.sin(r)}}function TCe(r,e){return Ua(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function ICe(r){for(var e=r.children,t=e.length,n=0,a=0;--t>=0;){var i=e[t];i.hierNode.prelim+=n,i.hierNode.modifier+=n,a+=i.hierNode.change,n+=i.hierNode.shift+a}}function ECe(r,e,t,n){if(e){for(var a=r,i=r,s=i.parentNode.children[0],o=e,l=a.hierNode.modifier,c=i.hierNode.modifier,u=s.hierNode.modifier,h=o.hierNode.modifier;o=f4(o),i=g4(i),o&&i;){a=f4(a),s=g4(s),a.hierNode.ancestor=r;var d=o.hierNode.prelim+h-i.hierNode.prelim-c+n(o,i);d>0&&(MCe(DCe(o,r,t),r,d),c+=d,l+=d),h+=o.hierNode.modifier,c+=i.hierNode.modifier,l+=a.hierNode.modifier,u+=s.hierNode.modifier}o&&!f4(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=h-l),i&&!g4(s)&&(s.hierNode.thread=i,s.hierNode.modifier+=c-u,t=r)}return t}function f4(r){var e=r.children;return e.length&&r.isExpand?e[e.length-1]:r.hierNode.thread}function g4(r){var e=r.children;return e.length&&r.isExpand?e[0]:r.hierNode.thread}function DCe(r,e,t){return r.hierNode.ancestor.parentNode===e.parentNode?r.hierNode.ancestor:t}function MCe(r,e,t){var n=t/(e.hierNode.i-r.hierNode.i);e.hierNode.change-=n,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,r.hierNode.change+=n}function RCe(r,e){return r.parentNode===e.parentNode?1:2}var LCe=function(){function r(){this.parentPoint=[],this.childPoints=[]}return r}(),PCe=function(r){Pe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new LCe},e.prototype.buildPath=function(t,n){var a=n.childPoints,i=a.length,s=n.parentPoint,o=a[0],l=a[i-1];if(i===1){t.moveTo(s[0],s[1]),t.lineTo(o[0],o[1]);return}var c=n.orient,u=c==="TB"||c==="BT"?0:1,h=1-u,d=ot(n.forkPosition,1),A=[];A[u]=s[u],A[h]=s[h]+(l[h]-s[h])*d,t.moveTo(s[0],s[1]),t.lineTo(A[0],A[1]),t.moveTo(o[0],o[1]),A[u]=o[u],t.lineTo(A[0],A[1]),A[u]=l[u],t.lineTo(A[0],A[1]),t.lineTo(l[0],l[1]);for(var g=1;g<i-1;g++){var p=a[g];t.moveTo(p[0],p[1]),A[u]=p[u],t.lineTo(A[0],A[1])}},e}(hr),kCe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new Ht,t}return e.prototype.init=function(t,n){this._controller=new Qw(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,n,a){var i=t.getData(),s=t.layoutInfo,o=this._mainGroup,l=t.get("layout");l==="radial"?(o.x=s.x+s.width/2,o.y=s.y+s.height/2):(o.x=s.x,o.y=s.y),this._updateViewCoordSys(t,a),this._updateController(t,n,a);var c=this._data;i.diff(c).add(function(u){oz(i,u)&&lz(i,u,null,o,t)}).update(function(u,h){var d=c.getItemGraphicEl(h);if(!oz(i,u)){d&&uz(c,h,d,o,t);return}lz(i,u,d,o,t)}).remove(function(u){var h=c.getItemGraphicEl(u);h&&uz(c,u,h,o,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&i.eachItemGraphicEl(function(u,h){u.off("click").on("click",function(){a.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:h})})}),this._data=i},e.prototype._updateViewCoordSys=function(t,n){var a=t.getData(),i=[];a.each(function(h){var d=a.getItemLayout(h);d&&!isNaN(d.x)&&!isNaN(d.y)&&i.push([+d.x,+d.y])});var s=[],o=[];IN(i,s,o);var l=this._min,c=this._max;o[0]-s[0]===0&&(s[0]=l?l[0]:s[0]-1,o[0]=c?c[0]:o[0]+1),o[1]-s[1]===0&&(s[1]=l?l[1]:s[1]-1,o[1]=c?c[1]:o[1]+1);var u=t.coordinateSystem=new zw;u.zoomLimit=t.get("scaleLimit"),u.setBoundingRect(s[0],s[1],o[0]-s[0],o[1]-s[1]),u.setCenter(t.get("center"),n),u.setZoom(t.get("zoom")),this.group.attr({x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY}),this._min=s,this._max=o},e.prototype._updateController=function(t,n,a){var i=this,s=this._controller,o=this._controllerHost,l=this.group;s.setPointerChecker(function(c,u,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(u,h)&&!JN(c,a,t)}),s.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(c){OF(o,c.dx,c.dy),a.dispatchAction({seriesId:t.id,type:"treeRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){UF(o,c.scale,c.originX,c.originY),a.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),i._updateNodeAndLinkScale(t),a.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(t){var n=t.getData(),a=this._getNodeGlobalScale(t);n.eachItemGraphicEl(function(i,s){i.setSymbolScale(a)})},e.prototype._getNodeGlobalScale=function(t){var n=t.coordinateSystem;if(n.type!=="view")return 1;var a=this._nodeScaleRatio,i=n.scaleX||1,s=n.getZoom(),o=(s-1)*a+1;return o/i},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(nn);function oz(r,e){var t=r.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function lz(r,e,t,n,a){var i=!t,s=r.tree.getNodeByDataIndex(e),o=s.getModel(),l=s.getVisual("style").fill,c=s.isExpand===!1&&s.children.length!==0?l:"#fff",u=r.tree.root,h=s.parentNode===u?s:s.parentNode||s,d=r.getItemGraphicEl(h.dataIndex),A=h.getLayout(),g=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:A,p=s.getLayout();i?(t=new kw(r,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.x=g.x,t.y=g.y):t.updateData(r,e,null,{symbolInnerColor:c,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=p.rawX,t.__radialRawY=p.rawY,n.add(t),r.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,Er(t,{x:p.x,y:p.y},a);var v=t.getSymbolPath();if(a.get("layout")==="radial"){var m=u.children[0],y=m.getLayout(),x=m.children.length,b=void 0,S=void 0;if(p.x===y.x&&s.isExpand===!0&&m.children.length){var _={x:(m.children[0].getLayout().x+m.children[x-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[x-1].getLayout().y)/2};b=Math.atan2(_.y-y.y,_.x-y.x),b<0&&(b=Math.PI*2+b),S=_.x<y.x,S&&(b=b-Math.PI)}else b=Math.atan2(p.y-y.y,p.x-y.x),b<0&&(b=Math.PI*2+b),s.children.length===0||s.children.length!==0&&s.isExpand===!1?(S=p.x<y.x,S&&(b=b-Math.PI)):(S=p.x>y.x,S||(b=b-Math.PI));var C=S?"left":"right",w=o.getModel("label"),B=w.get("rotate"),D=B*(Math.PI/180),T=v.getTextContent();T&&(v.setTextConfig({position:w.get("position")||C,rotation:B==null?-b:D,origin:"center"}),T.setStyle("verticalAlign","middle"))}var E=o.get(["emphasis","focus"]),R=E==="relative"?mb(s.getAncestorsIndices(),s.getDescendantIndices()):E==="ancestor"?s.getAncestorsIndices():E==="descendant"?s.getDescendantIndices():null;R&&(Qt(t).focus=R),FCe(a,s,u,t,g,A,p,n),t.__edge&&(t.onHoverStateChange=function(M){if(M!=="blur"){var k=s.parentNode&&r.getItemGraphicEl(s.parentNode.dataIndex);k&&k.hoverState===Bw||yC(t.__edge,M)}})}function FCe(r,e,t,n,a,i,s,o){var l=e.getModel(),c=r.get("edgeShape"),u=r.get("layout"),h=r.getOrient(),d=r.get(["lineStyle","curveness"]),A=r.get("edgeForkPosition"),g=l.getModel("lineStyle").getLineStyle(),p=n.__edge;if(c==="curve")e.parentNode&&e.parentNode!==t&&(p||(p=n.__edge=new Tw({shape:RR(u,h,d,a,a)})),Er(p,{shape:RR(u,h,d,i,s)},r));else if(c==="polyline"&&u==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var v=e.children,m=[],y=0;y<v.length;y++){var x=v[y].getLayout();m.push([x.x,x.y])}p||(p=n.__edge=new PCe({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:h,forkPosition:A}})),Er(p,{shape:{parentPoint:[s.x,s.y],childPoints:m}},r)}p&&!(c==="polyline"&&!e.isExpand)&&(p.useStyle(Lt({strokeNoScale:!0,fill:null},g)),Bi(p,l,"lineStyle"),xp(p),o.add(p))}function cz(r,e,t,n,a){var i=e.tree.root,s=qne(i,r),o=s.source,l=s.sourceLayout,c=e.getItemGraphicEl(r.dataIndex);if(c){var u=e.getItemGraphicEl(o.dataIndex),h=u.__edge,d=c.__edge||(o.isExpand===!1||o.children.length===1?h:void 0),A=n.get("edgeShape"),g=n.get("layout"),p=n.get("orient"),v=n.get(["lineStyle","curveness"]);d&&(A==="curve"?QA(d,{shape:RR(g,p,v,l,l),style:{opacity:0}},n,{cb:function(){t.remove(d)},removeOpt:a}):A==="polyline"&&n.get("layout")==="orthogonal"&&QA(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){t.remove(d)},removeOpt:a}))}}function qne(r,e){for(var t=e.parentNode===r?e:e.parentNode||e,n;n=t.getLayout(),n==null;)t=t.parentNode===r?t:t.parentNode||t;return{source:t,sourceLayout:n}}function uz(r,e,t,n,a){var i=r.tree.getNodeByDataIndex(e),s=r.tree.root,o=qne(s,i).sourceLayout,l={duration:a.get("animationDurationUpdate"),easing:a.get("animationEasingUpdate")};QA(t,{x:o.x+1,y:o.y+1},a,{cb:function(){n.remove(t),r.setItemGraphicEl(e,null)},removeOpt:l}),t.fadeOut(null,r.hostModel,{fadeLabel:!0,animation:l}),i.children.forEach(function(c){cz(c,r,n,a,l)}),cz(i,r,n,a,l)}function RR(r,e,t,n,a){var i,s,o,l,c,u,h,d;if(r==="radial"){c=n.rawX,h=n.rawY,u=a.rawX,d=a.rawY;var A=Yx(c,h),g=Yx(c,h+(d-h)*t),p=Yx(u,d+(h-d)*t),v=Yx(u,d);return{x1:A.x||0,y1:A.y||0,x2:v.x||0,y2:v.y||0,cpx1:g.x||0,cpy1:g.y||0,cpx2:p.x||0,cpy2:p.y||0}}else c=n.x,h=n.y,u=a.x,d=a.y,(e==="LR"||e==="RL")&&(i=c+(u-c)*t,s=h,o=u+(c-u)*t,l=d),(e==="TB"||e==="BT")&&(i=c,s=h+(d-h)*t,o=u,l=d+(h-d)*t);return{x1:c,y1:h,x2:u,y2:d,cpx1:i,cpy1:s,cpx2:o,cpy2:l}}var hl=wr();function Yne(r){var e=r.mainData,t=r.datas;t||(t={main:e},r.datasAttr={main:"data"}),r.datas=r.mainData=null,Xne(e,t,r),X(t,function(n){X(e.TRANSFERABLE_METHODS,function(a){n.wrapMethod(a,Wt(jCe,r))})}),e.wrapMethod("cloneShallow",Wt(UCe,r)),X(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,Wt(OCe,r))}),gs(t[e.dataType]===e)}function jCe(r,e){if(zCe(this)){var t=He({},hl(this).datas);t[this.dataType]=e,Xne(e,t,r)}else zF(e,this.dataType,hl(this).mainData,r);return e}function OCe(r,e){return r.struct&&r.struct.update(),e}function UCe(r,e){return X(hl(e).datas,function(t,n){t!==e&&zF(t.cloneShallow(),n,e,r)}),e}function HCe(r){var e=hl(this).mainData;return r==null||e==null?e:hl(e).datas[r]}function QCe(){var r=hl(this).mainData;return r==null?[{data:r}]:We(pr(hl(r).datas),function(e){return{type:e,data:hl(r).datas[e]}})}function zCe(r){return hl(r).mainData===r}function Xne(r,e,t){hl(r).datas={},X(e,function(n,a){zF(n,a,r,t)})}function zF(r,e,t,n){hl(t).datas[e]=r,hl(r).mainData=t,r.dataType=e,n.struct&&(r[n.structAttr]=n.struct,n.struct[n.datasAttr[e]]=r),r.getLinkedData=HCe,r.getLinkedDataAll=QCe}var GCe=function(){function r(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return r.prototype.isRemoved=function(){return this.dataIndex<0},r.prototype.eachNode=function(e,t,n){It(e)&&(n=t,t=e,e=null),e=e||{},dt(e)&&(e={order:e});var a=e.order||"preorder",i=this[e.attr||"children"],s;a==="preorder"&&(s=t.call(n,this));for(var o=0;!s&&o<i.length;o++)i[o].eachNode(e,t,n);a==="postorder"&&t.call(n,this)},r.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var a=this.children[n];a.updateDepthAndHeight(e+1),a.height>t&&(t=a.height)}this.height=t+1},r.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,a=n.length;t<a;t++){var i=n[t].getNodeById(e);if(i)return i}},r.prototype.contains=function(e){if(e===this)return!0;for(var t=0,n=this.children,a=n.length;t<a;t++){var i=n[t].contains(e);if(i)return i}},r.prototype.getAncestors=function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},r.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},r.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},r.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},r.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},r.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,n=t.data.getItemModel(this.dataIndex);return n.getModel(e)}},r.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},r.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},r.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},r.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},r.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},r.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},r.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},r.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},r}(),GF=function(){function r(e){this.type="tree",this._nodes=[],this.hostModel=e}return r.prototype.eachNode=function(e,t,n){this.root.eachNode(e,t,n)},r.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},r.prototype.getNodeById=function(e){return this.root.getNodeById(e)},r.prototype.update=function(){for(var e=this.data,t=this._nodes,n=0,a=t.length;n<a;n++)t[n].dataIndex=-1;for(var n=0,a=e.count();n<a;n++)t[e.getRawIndex(n)].dataIndex=n},r.prototype.clearLayouts=function(){this.data.clearItemLayouts()},r.createTree=function(e,t,n){var a=new r(t),i=[],s=1;o(e);function o(u,h){var d=u.value;s=Math.max(s,$e(d)?d.length:1),i.push(u);var A=new GCe(Fa(u.name,""),a);h?VCe(A,h):a.root=A,a._nodes.push(A);var g=u.children;if(g)for(var p=0;p<g.length;p++)o(g[p],A)}a.root.updateDepthAndHeight(0);var l=Lw(i,{coordDimensions:["value"],dimensionsCount:s}).dimensions,c=new As(l,t);return c.initData(i),n&&n(c),Yne({mainData:c,struct:a,structAttr:"tree"}),a.update(),a},r}();function VCe(r,e){var t=e.children;r.parentNode!==e&&(t.push(r),r.parentNode=e)}function Fb(r,e,t){if(r&&rr(e,r.type)>=0){var n=t.getData().tree.root,a=r.targetNode;if(dt(a)&&(a=n.getNodeById(a)),a&&n.contains(a))return{node:a};var i=r.targetNodeId;if(i!=null&&(a=n.getNodeById(i)))return{node:a}}}function Zne(r){for(var e=[];r;)r=r.parentNode,r&&e.push(r);return e.reverse()}function VF(r,e){var t=Zne(r);return rr(t,e)>=0}function tT(r,e){for(var t=[];r;){var n=r.dataIndex;t.push({name:r.name,dataIndex:n,value:e.getRawValue(n)}),r=r.parentNode}return t.reverse(),t}var $Ce=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var n={name:t.name,children:t.data},a=t.leaves||{},i=new Qr(a,this,this.ecModel),s=GF.createTree(n,this,o);function o(h){h.wrapMethod("getItemModel",function(d,A){var g=s.getNodeByDataIndex(A);return g&&g.children.length&&g.isExpand||(d.parentModel=i),d})}var l=0;s.eachNode("preorder",function(h){h.depth>l&&(l=h.depth)});var c=t.expandAndCollapse,u=c&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return s.root.eachNode("preorder",function(h){var d=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=d&&d.collapsed!=null?!d.collapsed:h.depth<=u}),s.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,n,a){for(var i=this.getData().tree,s=i.root.children[0],o=i.getNodeByDataIndex(t),l=o.getValue(),c=o.name;o&&o!==s;)c=o.parentNode.name+"."+c,o=o.parentNode;return ti("nameValue",{name:c,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(t){var n=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=tT(a,this),n.collapsed=!a.isExpand,n},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Sn);function KCe(r,e,t){for(var n=[r],a=[],i;i=n.pop();)if(a.push(i),i.isExpand){var s=i.children;if(s.length)for(var o=0;o<s.length;o++)n.push(s[o])}for(;i=a.pop();)e(i,t)}function Ax(r,e){for(var t=[r],n;n=t.pop();)if(e(n),n.isExpand){var a=n.children;if(a.length)for(var i=a.length-1;i>=0;i--)t.push(a[i])}}function WCe(r,e){r.eachSeriesByType("tree",function(t){qCe(t,e)})}function qCe(r,e){var t=TCe(r,e);r.layoutInfo=t;var n=r.get("layout"),a=0,i=0,s=null;n==="radial"?(a=2*Math.PI,i=Math.min(t.height,t.width)/2,s=sz(function(x,b){return(x.parentNode===b.parentNode?1:2)/x.depth})):(a=t.width,i=t.height,s=sz());var o=r.getData().tree.root,l=o.children[0];if(l){CCe(o),KCe(l,BCe,s),o.hierNode.modifier=-l.hierNode.prelim,Ax(l,NCe);var c=l,u=l,h=l;Ax(l,function(x){var b=x.getLayout().x;b<c.getLayout().x&&(c=x),b>u.getLayout().x&&(u=x),x.depth>h.depth&&(h=x)});var d=c===u?1:s(c,u)/2,A=d-c.getLayout().x,g=0,p=0,v=0,m=0;if(n==="radial")g=a/(u.getLayout().x+d+A),p=i/(h.depth-1||1),Ax(l,function(x){v=(x.getLayout().x+A)*g,m=(x.depth-1)*p;var b=Yx(v,m);x.setLayout({x:b.x,y:b.y,rawX:v,rawY:m},!0)});else{var y=r.getOrient();y==="RL"||y==="LR"?(p=i/(u.getLayout().x+d+A),g=a/(h.depth-1||1),Ax(l,function(x){m=(x.getLayout().x+A)*p,v=y==="LR"?(x.depth-1)*g:a-(x.depth-1)*g,x.setLayout({x:v,y:m},!0)})):(y==="TB"||y==="BT")&&(g=a/(u.getLayout().x+d+A),p=i/(h.depth-1||1),Ax(l,function(x){v=(x.getLayout().x+A)*g,m=y==="TB"?(x.depth-1)*p:i-(x.depth-1)*p,x.setLayout({x:v,y:m},!0)}))}}}function YCe(r){r.eachSeriesByType("tree",function(e){var t=e.getData(),n=t.tree;n.eachNode(function(a){var i=a.getModel(),s=i.getModel("itemStyle").getItemStyle(),o=t.ensureUniqueItemVisual(a.dataIndex,"style");He(o,s)})})}function XCe(r){r.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var a=e.dataIndex,i=n.getData().tree,s=i.getNodeByDataIndex(a);s.isExpand=!s.isExpand})}),r.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,n){t.eachComponent({mainType:"series",subType:"tree",query:e},function(a){var i=a.coordinateSystem,s=QF(i,e,void 0,n);a.setCenter&&a.setCenter(s.center),a.setZoom&&a.setZoom(s.zoom)})})}function ZCe(r){r.registerChartView(kCe),r.registerSeriesModel($Ce),r.registerLayout(WCe),r.registerVisual(YCe),XCe(r)}var hz=["treemapZoomToNode","treemapRender","treemapMove"];function JCe(r){for(var e=0;e<hz.length;e++)r.registerAction({type:hz[e],update:"updateView"},Aa);r.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,n){n.eachComponent({mainType:"series",subType:"treemap",query:t},a);function a(i,s){var o=["treemapZoomToNode","treemapRootToNode"],l=Fb(t,o,i);if(l){var c=i.getViewRoot();c&&(t.direction=VF(c,l.node)?"rollUp":"drillDown"),i.resetViewRoot(l.node)}}})}function Jne(r){var e=r.getData(),t=e.tree,n={};t.eachNode(function(a){for(var i=a;i&&i.depth>1;)i=i.parentNode;var s=oR(r.ecModel,i.name||i.dataIndex+"",n);a.setVisual("decal",s)})}var eBe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,n){var a={name:t.name,children:t.data};eae(a);var i=t.levels||[],s=this.designatedVisualItemStyle={},o=new Qr({itemStyle:s},this,n);i=t.levels=tBe(i,n);var l=We(i||[],function(h){return new Qr(h,o,n)},this),c=GF.createTree(a,this,u);function u(h){h.wrapMethod("getItemModel",function(d,A){var g=c.getNodeByDataIndex(A),p=g?l[g.depth]:null;return d.parentModel=p||o,d})}return c.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),s=this.getRawValue(t),o=i.getName(t);return ti("nameValue",{name:o,value:s})},e.prototype.getDataParams=function(t){var n=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=tT(a,this),n.treePathInfo=n.treeAncestors,n},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},He(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var n=this._idIndexMap;n||(n=this._idIndexMap=bt(),this._idIndexMapCount=0);var a=n.get(t);return a==null&&n.set(t,a=this._idIndexMapCount++),a},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var n=this.getRawData().tree.root;(!t||t!==n&&!n.contains(t))&&(this._viewRoot=n)},e.prototype.enableAriaDecal=function(){Jne(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Sn);function eae(r){var e=0;X(r.children,function(n){eae(n);var a=n.value;$e(a)&&(a=a[0]),e+=a});var t=r.value;$e(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),$e(r.value)?r.value[0]=t:r.value=t}function tBe(r,e){var t=Xr(e.get("color")),n=Xr(e.get(["aria","decal","decals"]));if(t){r=r||[];var a,i;X(r,function(o){var l=new Qr(o),c=l.get("color"),u=l.get("decal");(l.get(["itemStyle","color"])||c&&c!=="none")&&(a=!0),(l.get(["itemStyle","decal"])||u&&u!=="none")&&(i=!0)});var s=r[0]||(r[0]={});return a||(s.color=t.slice()),!i&&n&&(s.decal=n.slice()),r}}var rBe=8,dz=8,p4=5,nBe=function(){function r(e){this.group=new Ht,e.add(this.group)}return r.prototype.render=function(e,t,n,a){var i=e.getModel("breadcrumb"),s=this.group;if(s.removeAll(),!(!i.get("show")||!n)){var o=i.getModel("itemStyle"),l=i.getModel("emphasis"),c=o.getModel("textStyle"),u=l.getModel(["itemStyle","textStyle"]),h={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,h,c),this._renderContent(e,h,o,l,c,u,a),QN(s,h.pos,h.box)}},r.prototype._prepare=function(e,t,n){for(var a=e;a;a=a.parentNode){var i=Fa(a.getModel().get("name"),""),s=n.getTextRect(i),o=Math.max(s.width+rBe*2,t.emptyItemWidth);t.totalWidth+=o+dz,t.renderList.push({node:a,text:i,width:o})}},r.prototype._renderContent=function(e,t,n,a,i,s,o){for(var l=0,c=t.emptyItemWidth,u=e.get(["breadcrumb","height"]),h=d1e(t.pos,t.box),d=t.totalWidth,A=t.renderList,g=a.getModel("itemStyle").getItemStyle(),p=A.length-1;p>=0;p--){var v=A[p],m=v.node,y=v.width,x=v.text;d>h.width&&(d-=y-c,y=c,x=null);var b=new vs({shape:{points:aBe(l,0,y,u,p===A.length-1,p===0)},style:Lt(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Cr({style:bn(i,{text:x})}),textConfig:{position:"inside"},z2:ry*1e4,onclick:Wt(o,m)});b.disableLabelAnimation=!0,b.getTextContent().ensureState("emphasis").style=bn(s,{text:x}),b.ensureState("emphasis").style=g,qn(b,a.get("focus"),a.get("blurScope"),a.get("disabled")),this.group.add(b),iBe(b,e,m),l+=y+dz}},r.prototype.remove=function(){this.group.removeAll()},r}();function aBe(r,e,t,n,a,i){var s=[[a?r:r-p4,e],[r+t,e],[r+t,e+n],[a?r:r-p4,e+n]];return!i&&s.splice(2,0,[r+t+p4,e+n/2]),!a&&s.push([r,e+n/2]),s}function iBe(r,e,t){Qt(r).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&tT(t,e)}}var sBe=function(){function r(){this._storage=[],this._elExistsMap={}}return r.prototype.add=function(e,t,n,a,i){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:n,delay:a,easing:i}),!0)},r.prototype.finished=function(e){return this._finishedCallback=e,this},r.prototype.start=function(){for(var e=this,t=this._storage.length,n=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},a=0,i=this._storage.length;a<i;a++){var s=this._storage[a];s.el.animateTo(s.target,{duration:s.duration,delay:s.delay,easing:s.easing,setToFinal:!0,done:n,aborted:n})}return this},r}();function oBe(){return new sBe}var LR=Ht,Az=br,fz=3,gz="label",pz="upperLabel",lBe=ry*10,cBe=ry*2,uBe=ry*3,og=yp([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mz=function(r){var e=og(r);return e.stroke=e.fill=e.lineWidth=null,e},HC=wr(),hBe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=fx(),t}return e.prototype.render=function(t,n,a,i){var s=n.findComponents({mainType:"series",subType:"treemap",query:i});if(!(rr(s,t)<0)){this.seriesModel=t,this.api=a,this.ecModel=n;var o=["treemapZoomToNode","treemapRootToNode"],l=Fb(i,o,t),c=i&&i.type,u=t.layoutInfo,h=!this._oldTree,d=this._storage,A=c==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:i.direction}:null,g=this._giveContainerGroup(u),p=t.get("animation"),v=this._doRender(g,t,A);p&&!h&&(!c||c==="treemapZoomToNode"||c==="treemapRootToNode")?this._doAnimation(g,v,t,A):v.renderFinally(),this._resetController(a),this._renderBreadcrumb(t,a,l)}},e.prototype._giveContainerGroup=function(t){var n=this._containerGroup;return n||(n=this._containerGroup=new LR,this._initEvents(n),this.group.add(n)),n.x=t.x,n.y=t.y,n},e.prototype._doRender=function(t,n,a){var i=n.getData().tree,s=this._oldTree,o=fx(),l=fx(),c=this._storage,u=[];function h(y,x,b,S){return dBe(n,l,c,a,o,u,y,x,b,S)}p(i.root?[i.root]:[],s&&s.root?[s.root]:[],t,i===s||!s,0);var d=v(c);if(this._oldTree=i,this._storage=l,this._controllerHost){var A=this.seriesModel.layoutInfo,g=i.root.getLayout();g.width===A.width&&g.height===A.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:o,willDeleteEls:d,renderFinally:m};function p(y,x,b,S,_){S?(x=y,X(y,function(B,D){!B.isRemoved()&&w(D,D)})):new Nh(x,y,C,C).add(w).update(w).remove(Wt(w,null)).execute();function C(B){return B.getId()}function w(B,D){var T=B!=null?y[B]:null,E=D!=null?x[D]:null,R=h(T,E,b,_);R&&p(T&&T.viewChildren||[],E&&E.viewChildren||[],R,S,_+1)}}function v(y){var x=fx();return y&&X(y,function(b,S){var _=x[S];X(b,function(C){C&&(_.push(C),HC(C).willDelete=!0)})}),x}function m(){X(d,function(y){X(y,function(x){x.parent&&x.parent.remove(x)})}),X(u,function(y){y.invisible=!0,y.dirty()})}},e.prototype._doAnimation=function(t,n,a,i){var s=a.get("animationDurationUpdate"),o=a.get("animationEasing"),l=(It(s)?0:s)||0,c=(It(o)?null:o)||"cubicOut",u=oBe();X(n.willDeleteEls,function(h,d){X(h,function(A,g){if(!A.invisible){var p=A.parent,v,m=HC(p);if(i&&i.direction==="drillDown")v=p===i.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var y=0,x=0;m.willDelete||(y=m.nodeWidth/2,x=m.nodeHeight/2),v=d==="nodeGroup"?{x:y,y:x,style:{opacity:0}}:{shape:{x:y,y:x,width:0,height:0},style:{opacity:0}}}v&&u.add(A,v,l,0,c)}})}),X(this._storage,function(h,d){X(h,function(A,g){var p=n.lastsForAnimation[d][g],v={};p&&(A instanceof Ht?p.oldX!=null&&(v.x=A.x,v.y=A.y,A.x=p.oldX,A.y=p.oldY):(p.oldShape&&(v.shape=He({},A.shape),A.setShape(p.oldShape)),p.fadein?(A.setStyle("opacity",0),v.style={opacity:1}):A.style.opacity!==1&&(v.style={opacity:1})),u.add(A,v,l,0,c))})},this),this._state="animating",u.finished(ft(function(){this._state="ready",n.renderFinally()},this)).start()},e.prototype._resetController=function(t){var n=this._controller,a=this._controllerHost;a||(this._controllerHost={target:this.group},a=this._controllerHost),n||(n=this._controller=new Qw(t.getZr()),n.enable(this.seriesModel.get("roam")),a.zoomLimit=this.seriesModel.get("scaleLimit"),a.zoom=this.seriesModel.get("zoom"),n.on("pan",ft(this._onPan,this)),n.on("zoom",ft(this._onZoom,this)));var i=new Zt(0,0,t.getWidth(),t.getHeight());n.setPointerChecker(function(s,o,l){return i.contain(o,l)})},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>fz||Math.abs(t.dy)>fz)){var n=this.seriesModel.getData().tree.root;if(!n)return;var a=n.getLayout();if(!a)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x+t.dx,y:a.y+t.dy,width:a.width,height:a.height}})}},e.prototype._onZoom=function(t){var n=t.originX,a=t.originY,i=t.scale;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var o=s.getLayout();if(!o)return;var l=new Zt(o.x,o.y,o.width,o.height),c=null,u=this._controllerHost;c=u.zoomLimit;var h=u.zoom=u.zoom||1;if(h*=i,c){var d=c.min||0,A=c.max||1/0;h=Math.max(Math.min(A,h),d)}var g=h/u.zoom;u.zoom=h;var p=this.seriesModel.layoutInfo;n-=p.x,a-=p.y;var v=bo();au(v,v,[-n,-a]),Pk(v,v,[g,g]),au(v,v,[n,a]),l.applyTransform(v),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(t){var n=this;t.on("click",function(a){if(n._state==="ready"){var i=n.seriesModel.get("nodeClick",!0);if(i){var s=n.findTarget(a.offsetX,a.offsetY);if(s){var o=s.node;if(o.getLayout().isLeafRoot)n._rootToNode(s);else if(i==="zoomToNode")n._zoomToNode(s);else if(i==="link"){var l=o.hostTree.data.getItemModel(o.dataIndex),c=l.get("link",!0),u=l.get("target",!0)||"blank";c&&CC(c,u)}}}}},this)},e.prototype._renderBreadcrumb=function(t,n,a){var i=this;a||(a=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2),a||(a={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new nBe(this.group))).render(t,n,a.node,function(s){i._state!=="animating"&&(VF(t.getViewRoot(),s)?i._rootToNode({node:s}):i._zoomToNode({node:s}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=fx(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,n){var a,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(s){var o=this._storage.background[s.getRawIndex()];if(o){var l=o.transformCoordToLocal(t,n),c=o.shape;if(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height)a={node:s,offsetX:l[0],offsetY:l[1]};else return!1}},this),a},e.type="treemap",e}(nn);function fx(){return{nodeGroup:[],background:[],content:[]}}function dBe(r,e,t,n,a,i,s,o,l,c){if(!s)return;var u=s.getLayout(),h=r.getData(),d=s.getModel();if(h.setItemGraphicEl(s.dataIndex,null),!u||!u.isInView)return;var A=u.width,g=u.height,p=u.borderWidth,v=u.invisible,m=s.getRawIndex(),y=o&&o.getRawIndex(),x=s.viewChildren,b=u.upperHeight,S=x&&x.length,_=d.getModel("itemStyle"),C=d.getModel(["emphasis","itemStyle"]),w=d.getModel(["blur","itemStyle"]),B=d.getModel(["select","itemStyle"]),D=_.get("borderRadius")||0,T=Z("nodeGroup",LR);if(!T)return;if(l.add(T),T.x=u.x||0,T.y=u.y||0,T.markRedraw(),HC(T).nodeWidth=A,HC(T).nodeHeight=g,u.isAboveViewRoot)return T;var E=Z("background",Az,c,cBe);E&&te(T,E,S&&u.upperLabelHeight);var R=d.getModel("emphasis"),M=R.get("focus"),k=R.get("blurScope"),O=R.get("disabled"),Q=M==="ancestor"?s.getAncestorsIndices():M==="descendant"?s.getDescendantIndices():M;if(S)_b(T)&&Ig(T,!1),E&&(Ig(E,!O),h.setItemGraphicEl(s.dataIndex,E),J3(E,Q,k));else{var H=Z("content",Az,c,uBe);H&&ee(T,H),E.disableMorphing=!0,E&&_b(E)&&Ig(E,!1),Ig(T,!O),h.setItemGraphicEl(s.dataIndex,T);var W=d.getShallow("cursor");W&&H.attr("cursor",W),J3(T,Q,k)}return T;function te(fe,q,ge){var me=Qt(q);if(me.dataIndex=s.dataIndex,me.seriesIndex=r.seriesIndex,q.setShape({x:0,y:0,width:A,height:g,r:D}),v)j(q);else{q.invisible=!1;var we=s.getVisual("style"),Me=we.stroke,z=mz(_);z.fill=Me;var pe=og(C);pe.fill=C.get("borderColor");var J=og(w);J.fill=w.get("borderColor");var oe=og(B);if(oe.fill=B.get("borderColor"),ge){var ae=A-2*p;G(q,Me,we.opacity,{x:p,y:0,width:ae,height:b})}else q.removeTextContent();q.setStyle(z),q.ensureState("emphasis").style=pe,q.ensureState("blur").style=J,q.ensureState("select").style=oe,xp(q)}fe.add(q)}function ee(fe,q){var ge=Qt(q);ge.dataIndex=s.dataIndex,ge.seriesIndex=r.seriesIndex;var me=Math.max(A-2*p,0),we=Math.max(g-2*p,0);if(q.culling=!0,q.setShape({x:p,y:p,width:me,height:we,r:D}),v)j(q);else{q.invisible=!1;var Me=s.getVisual("style"),z=Me.fill,pe=mz(_);pe.fill=z,pe.decal=Me.decal;var J=og(C),oe=og(w),ae=og(B);G(q,z,Me.opacity,null),q.setStyle(pe),q.ensureState("emphasis").style=J,q.ensureState("blur").style=oe,q.ensureState("select").style=ae,xp(q)}fe.add(q)}function j(fe){!fe.invisible&&i.push(fe)}function G(fe,q,ge,me){var we=d.getModel(me?pz:gz),Me=Fa(d.get("name"),null),z=we.getShallow("show");Ni(fe,ei(d,me?pz:gz),{defaultText:z?Me:null,inheritColor:q,defaultOpacity:ge,labelFetcher:r,labelDataIndex:s.dataIndex});var pe=fe.getTextContent();if(pe){var J=pe.style,oe=Mk(J.padding||0);me&&(fe.setTextConfig({layoutRect:me}),pe.disableLabelLayout=!0),pe.beforeUpdate=function(){var ue=Math.max((me?me.width:fe.shape.width)-oe[1]-oe[3],0),be=Math.max((me?me.height:fe.shape.height)-oe[0]-oe[2],0);(J.width!==ue||J.height!==be)&&pe.setStyle({width:ue,height:be})},J.truncateMinChar=2,J.lineOverflow="truncate",Y(J,me,u);var ae=pe.getState("emphasis");Y(ae?ae.style:null,me,u)}}function Y(fe,q,ge){var me=fe?fe.text:null;if(!q&&ge.isLeafRoot&&me!=null){var we=r.get("drillDownIcon",!0);fe.text=we?we+" "+me:me}}function Z(fe,q,ge,me){var we=y!=null&&t[fe][y],Me=a[fe];return we?(t[fe][y]=null,de(Me,we)):v||(we=new q,we instanceof gl&&(we.z2=ABe(ge,me)),he(Me,we)),e[fe][m]=we}function de(fe,q){var ge=fe[m]={};q instanceof LR?(ge.oldX=q.x,ge.oldY=q.y):ge.oldShape=He({},q.shape)}function he(fe,q){var ge=fe[m]={},me=s.parentNode,we=q instanceof Ht;if(me&&(!n||n.direction==="drillDown")){var Me=0,z=0,pe=a.background[me.getRawIndex()];!n&&pe&&pe.oldShape&&(Me=pe.oldShape.width,z=pe.oldShape.height),we?(ge.oldX=0,ge.oldY=z):ge.oldShape={x:Me,y:z,width:0,height:0}}ge.fadein=!we}}function ABe(r,e){return r*lBe+e}var jb=X,fBe=Pt,QC=-1,Za=function(){function r(e){var t=e.mappingMethod,n=e.type,a=this.option=Ft(e);this.type=n,this.mappingMethod=t,this._normalizeData=mBe[t];var i=r.visualHandlers[n];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[t],t==="piecewise"?(m4(a),gBe(a)):t==="category"?a.categories?pBe(a):m4(a,!0):(gs(t!=="linear"||a.dataExtent),m4(a))}return r.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},r.prototype.getNormalizer=function(){return ft(this._normalizeData,this)},r.listVisualTypes=function(){return pr(r.visualHandlers)},r.isValidType=function(e){return r.visualHandlers.hasOwnProperty(e)},r.eachVisual=function(e,t,n){Pt(e)?X(e,t,n):t.call(n,e)},r.mapVisual=function(e,t,n){var a,i=$e(e)?[]:Pt(e)?{}:(a=!0,null);return r.eachVisual(e,function(s,o){var l=t.call(n,s,o);a?i=l:i[o]=l}),i},r.retrieveVisuals=function(e){var t={},n;return e&&jb(r.visualHandlers,function(a,i){e.hasOwnProperty(i)&&(t[i]=e[i],n=!0)}),n?t:null},r.prepareVisualTypes=function(e){if($e(e))e=e.slice();else if(fBe(e)){var t=[];jb(e,function(n,a){t.push(a)}),e=t}else return[];return e.sort(function(n,a){return a==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),e},r.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},r.findPieceIndex=function(e,t,n){for(var a,i=1/0,s=0,o=t.length;s<o;s++){var l=t[s].value;if(l!=null){if(l===e||dt(l)&&l===e+"")return s;n&&d(l,s)}}for(var s=0,o=t.length;s<o;s++){var c=t[s],u=c.interval,h=c.close;if(u){if(u[0]===-1/0){if(kS(h[1],e,u[1]))return s}else if(u[1]===1/0){if(kS(h[0],u[0],e))return s}else if(kS(h[0],u[0],e)&&kS(h[1],e,u[1]))return s;n&&d(u[0],s),n&&d(u[1],s)}}if(n)return e===1/0?t.length-1:e===-1/0?0:a;function d(A,g){var p=Math.abs(A-e);p<i&&(i=p,a=g)}},r.visualHandlers={color:{applyVisual:gx("color"),getColorMapper:function(){var e=this.option;return ft(e.mappingMethod==="category"?function(t,n){return!n&&(t=this._normalizeData(t)),Xx.call(this,t)}:function(t,n,a){var i=!!a;return!n&&(t=this._normalizeData(t)),a=XI(t,e.parsedVisual,a),i?a:Ah(a,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Ah(XI(e,this.option.parsedVisual),"rgba")},category:Xx,piecewise:function(e,t){var n=kR.call(this,t);return n==null&&(n=Ah(XI(e,this.option.parsedVisual),"rgba")),n},fixed:lg}},colorHue:PS(function(e,t){return _1(e,t)}),colorSaturation:PS(function(e,t){return _1(e,null,t)}),colorLightness:PS(function(e,t){return _1(e,null,null,t)}),colorAlpha:PS(function(e,t){return AC(e,t)}),decal:{applyVisual:gx("decal"),_normalizedToVisual:{linear:null,category:Xx,piecewise:null,fixed:null}},opacity:{applyVisual:gx("opacity"),_normalizedToVisual:PR([0,1])},liftZ:{applyVisual:gx("liftZ"),_normalizedToVisual:{linear:lg,category:lg,piecewise:lg,fixed:lg}},symbol:{applyVisual:function(e,t,n){var a=this.mapValueToVisual(e);n("symbol",a)},_normalizedToVisual:{linear:vz,category:Xx,piecewise:function(e,t){var n=kR.call(this,t);return n==null&&(n=vz.call(this,e)),n},fixed:lg}},symbolSize:{applyVisual:gx("symbolSize"),_normalizedToVisual:PR([0,1])}},r}();function gBe(r){var e=r.pieceList;r.hasSpecialVisual=!1,X(e,function(t,n){t.originIndex=n,t.visual!=null&&(r.hasSpecialVisual=!0)})}function pBe(r){var e=r.categories,t=r.categoryMap={},n=r.visual;if(jb(e,function(s,o){t[s]=o}),!$e(n)){var a=[];Pt(n)?jb(n,function(s,o){var l=t[o];a[l??QC]=s}):a[QC]=n,n=tae(r,a)}for(var i=e.length-1;i>=0;i--)n[i]==null&&(delete t[e[i]],e.pop())}function m4(r,e){var t=r.visual,n=[];Pt(t)?jb(t,function(i){n.push(i)}):t!=null&&n.push(t);var a={color:1,symbol:1};!e&&n.length===1&&!a.hasOwnProperty(r.type)&&(n[1]=n[0]),tae(r,n)}function PS(r){return{applyVisual:function(e,t,n){var a=this.mapValueToVisual(e);n("color",r(t("color"),a))},_normalizedToVisual:PR([0,1])}}function vz(r){var e=this.option.visual;return e[Math.round(Hr(r,[0,1],[0,e.length-1],!0))]||{}}function gx(r){return function(e,t,n){n(r,this.mapValueToVisual(e))}}function Xx(r){var e=this.option.visual;return e[this.option.loop&&r!==QC?r%e.length:r]}function lg(){return this.option.visual[0]}function PR(r){return{linear:function(e){return Hr(e,r,this.option.visual,!0)},category:Xx,piecewise:function(e,t){var n=kR.call(this,t);return n==null&&(n=Hr(e,r,this.option.visual,!0)),n},fixed:lg}}function kR(r){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var n=Za.findPieceIndex(r,t),a=t[n];if(a&&a.visual)return a.visual[this.type]}}function tae(r,e){return r.visual=e,r.type==="color"&&(r.parsedVisual=We(e,function(t){var n=wo(t);return n||[0,0,0,1]})),e}var mBe={linear:function(r){return Hr(r,this.option.dataExtent,[0,1],!0)},piecewise:function(r){var e=this.option.pieceList,t=Za.findPieceIndex(r,e,!0);if(t!=null)return Hr(t,[0,e.length-1],[0,1],!0)},category:function(r){var e=this.option.categories?this.option.categoryMap[r]:r;return e??QC},fixed:Aa};function kS(r,e,t){return r?e<=t:e<t}var vBe="itemStyle",rae=wr();const yBe={seriesType:"treemap",reset:function(r){var e=r.getData().tree,t=e.root;t.isRemoved()||nae(t,{},r.getViewRoot().getAncestors(),r)}};function nae(r,e,t,n){var a=r.getModel(),i=r.getLayout(),s=r.hostTree.data;if(!(!i||i.invisible||!i.isInView)){var o=a.getModel(vBe),l=xBe(o,e,n),c=s.ensureUniqueItemVisual(r.dataIndex,"style"),u=o.get("borderColor"),h=o.get("borderColorSaturation"),d;h!=null&&(d=yz(l),u=bBe(h,d)),c.stroke=u;var A=r.viewChildren;if(!A||!A.length)d=yz(l),c.fill=d;else{var g=wBe(r,a,i,o,l,A);X(A,function(p,v){if(p.depth>=t.length||p===t[p.depth]){var m=SBe(a,l,p,v,g,n);nae(p,m,t,n)}})}}}function xBe(r,e,t){var n=He({},e),a=t.designatedVisualItemStyle;return X(["color","colorAlpha","colorSaturation"],function(i){a[i]=e[i];var s=r.get(i);a[i]=null,s!=null&&(n[i]=s)}),n}function yz(r){var e=v4(r,"color");if(e){var t=v4(r,"colorAlpha"),n=v4(r,"colorSaturation");return n&&(e=_1(e,null,null,n)),t&&(e=AC(e,t)),e}}function bBe(r,e){return e!=null?_1(e,null,null,r):null}function v4(r,e){var t=r[e];if(t!=null&&t!=="none")return t}function wBe(r,e,t,n,a,i){if(!(!i||!i.length)){var s=y4(e,"color")||a.color!=null&&a.color!=="none"&&(y4(e,"colorAlpha")||y4(e,"colorSaturation"));if(s){var o=e.get("visualMin"),l=e.get("visualMax"),c=t.dataExtent.slice();o!=null&&o<c[0]&&(c[0]=o),l!=null&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),h={type:s.name,dataExtent:c,visual:s.range};h.type==="color"&&(u==="index"||u==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var d=new Za(h);return rae(d).drColorMappingBy=u,d}}}function y4(r,e){var t=r.get(e);return $e(t)&&t.length?{name:e,range:t}:null}function SBe(r,e,t,n,a,i){var s=He({},e);if(a){var o=a.type,l=o==="color"&&rae(a).drColorMappingBy,c=l==="index"?n:l==="id"?i.mapIdToIndex(t.getId()):t.getValue(r.get("visualDimension"));s[o]=a.mapValueToVisual(c)}return s}var Ob=Math.max,zC=Math.min,xz=di,$F=X,aae=["itemStyle","borderWidth"],_Be=["itemStyle","gapWidth"],CBe=["upperLabel","show"],BBe=["upperLabel","height"];const NBe={seriesType:"treemap",reset:function(r,e,t,n){var a=t.getWidth(),i=t.getHeight(),s=r.option,o=Ua(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),l=s.size||[],c=ot(xz(o.width,l[0]),a),u=ot(xz(o.height,l[1]),i),h=n&&n.type,d=["treemapZoomToNode","treemapRootToNode"],A=Fb(n,d,r),g=h==="treemapRender"||h==="treemapMove"?n.rootRect:null,p=r.getViewRoot(),v=Zne(p);if(h!=="treemapMove"){var m=h==="treemapZoomToNode"?RBe(r,A,p,c,u):g?[g.width,g.height]:[c,u],y=s.sort;y&&y!=="asc"&&y!=="desc"&&(y="desc");var x={squareRatio:s.squareRatio,sort:y,leafDepth:s.leafDepth};p.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};p.setLayout(b),iae(p,x,!1,0),b=p.getLayout(),$F(v,function(_,C){var w=(v[C+1]||p).getValue();_.setLayout(He({dataExtent:[w,w],borderWidth:0,upperHeight:0},b))})}var S=r.getData().tree.root;S.setLayout(LBe(o,g,A),!0),r.setLayoutInfo(o),sae(S,new Zt(-o.x,-o.y,a,i),v,p,0)}};function iae(r,e,t,n){var a,i;if(!r.isRemoved()){var s=r.getLayout();a=s.width,i=s.height;var o=r.getModel(),l=o.get(aae),c=o.get(_Be)/2,u=oae(o),h=Math.max(l,u),d=l-c,A=h-c;r.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:u},!0),a=Ob(a-2*d,0),i=Ob(i-d-A,0);var g=a*i,p=TBe(r,o,g,e,t,n);if(p.length){var v={x:d,y:A,width:a,height:i},m=zC(a,i),y=1/0,x=[];x.area=0;for(var b=0,S=p.length;b<S;){var _=p[b];x.push(_),x.area+=_.getLayout().area;var C=MBe(x,m,e.squareRatio);C<=y?(b++,y=C):(x.area-=x.pop().getLayout().area,bz(x,m,v,c,!1),m=zC(v.width,v.height),x.length=x.area=0,y=1/0)}if(x.length&&bz(x,m,v,c,!0),!t){var w=o.get("childrenVisibleMin");w!=null&&g<w&&(t=!0)}for(var b=0,S=p.length;b<S;b++)iae(p[b],e,t,n+1)}}}function TBe(r,e,t,n,a,i){var s=r.children||[],o=n.sort;o!=="asc"&&o!=="desc"&&(o=null);var l=n.leafDepth!=null&&n.leafDepth<=i;if(a&&!l)return r.viewChildren=[];s=Ur(s,function(A){return!A.isRemoved()}),EBe(s,o);var c=DBe(e,s,o);if(c.sum===0)return r.viewChildren=[];if(c.sum=IBe(e,t,c.sum,o,s),c.sum===0)return r.viewChildren=[];for(var u=0,h=s.length;u<h;u++){var d=s[u].getValue()/c.sum*t;s[u].setLayout({area:d})}return l&&(s.length&&r.setLayout({isLeafRoot:!0},!0),s.length=0),r.viewChildren=s,r.setLayout({dataExtent:c.dataExtent},!0),s}function IBe(r,e,t,n,a){if(!n)return t;for(var i=r.get("visibleMin"),s=a.length,o=s,l=s-1;l>=0;l--){var c=a[n==="asc"?s-l-1:l].getValue();c/t*e<i&&(o=l,t-=c)}return n==="asc"?a.splice(0,s-o):a.splice(o,s-o),t}function EBe(r,e){return e&&r.sort(function(t,n){var a=e==="asc"?t.getValue()-n.getValue():n.getValue()-t.getValue();return a===0?e==="asc"?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:a}),r}function DBe(r,e,t){for(var n=0,a=0,i=e.length;a<i;a++)n+=e[a].getValue();var s=r.get("visualDimension"),o;return!e||!e.length?o=[NaN,NaN]:s==="value"&&t?(o=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&o.reverse()):(o=[1/0,-1/0],$F(e,function(l){var c=l.getValue(s);c<o[0]&&(o[0]=c),c>o[1]&&(o[1]=c)})),{sum:n,dataExtent:o}}function MBe(r,e,t){for(var n=0,a=1/0,i=0,s=void 0,o=r.length;i<o;i++)s=r[i].getLayout().area,s&&(s<a&&(a=s),s>n&&(n=s));var l=r.area*r.area,c=e*e*t;return l?Ob(c*n/l,l/(c*a)):1/0}function bz(r,e,t,n,a){var i=e===t.width?0:1,s=1-i,o=["x","y"],l=["width","height"],c=t[o[i]],u=e?r.area/e:0;(a||u>t[l[s]])&&(u=t[l[s]]);for(var h=0,d=r.length;h<d;h++){var A=r[h],g={},p=u?A.getLayout().area/u:0,v=g[l[s]]=Ob(u-2*n,0),m=t[o[i]]+t[l[i]]-c,y=h===d-1||m<p?m:p,x=g[l[i]]=Ob(y-2*n,0);g[o[s]]=t[o[s]]+zC(n,v/2),g[o[i]]=c+zC(n,x/2),c+=y,A.setLayout(g,!0)}t[o[s]]+=u,t[l[s]]-=u}function RBe(r,e,t,n,a){var i=(e||{}).node,s=[n,a];if(!i||i===t)return s;for(var o,l=n*a,c=l*r.option.zoomToNodeRatio;o=i.parentNode;){for(var u=0,h=o.children,d=0,A=h.length;d<A;d++)u+=h[d].getValue();var g=i.getValue();if(g===0)return s;c*=u/g;var p=o.getModel(),v=p.get(aae),m=Math.max(v,oae(p));c+=4*v*v+(3*v+m)*Math.pow(c,.5),c>L8&&(c=L8),i=o}c<l&&(c=l);var y=Math.pow(c/l,.5);return[n*y,a*y]}function LBe(r,e,t){if(e)return{x:e.x,y:e.y};var n={x:0,y:0};if(!t)return n;var a=t.node,i=a.getLayout();if(!i)return n;for(var s=[i.width/2,i.height/2],o=a;o;){var l=o.getLayout();s[0]+=l.x,s[1]+=l.y,o=o.parentNode}return{x:r.width/2-s[0],y:r.height/2-s[1]}}function sae(r,e,t,n,a){var i=r.getLayout(),s=t[a],o=s&&s===r;if(!(s&&!o||a===t.length&&r!==n)){r.setLayout({isInView:!0,invisible:!o&&!e.intersect(i),isAboveViewRoot:o},!0);var l=new Zt(e.x-i.x,e.y-i.y,e.width,e.height);$F(r.viewChildren||[],function(c){sae(c,l,t,n,a+1)})}}function oae(r){return r.get(CBe)?r.get(BBe):0}function PBe(r){r.registerSeriesModel(eBe),r.registerChartView(hBe),r.registerVisual(yBe),r.registerLayout(NBe),JCe(r)}function kBe(r){var e=r.findComponents({mainType:"legend"});!e||!e.length||r.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),a=t.getGraph(),i=a.data,s=n.mapArray(n.getName);i.filterSelf(function(o){var l=i.getItemModel(o),c=l.getShallow("category");if(c!=null){Br(c)&&(c=s[c]);for(var u=0;u<e.length;u++)if(!e[u].isSelected(c))return!1}return!0})})}function FBe(r){var e={};r.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),a=t.getData(),i={};n.each(function(s){var o=n.getName(s);i["ec-"+o]=s;var l=n.getItemModel(s),c=l.getModel("itemStyle").getItemStyle();c.fill||(c.fill=t.getColorFromPalette(o,e)),n.setItemVisual(s,"style",c);for(var u=["symbol","symbolSize","symbolKeepAspect"],h=0;h<u.length;h++){var d=l.getShallow(u[h],!0);d!=null&&n.setItemVisual(s,u[h],d)}}),n.count()&&a.each(function(s){var o=a.getItemModel(s),l=o.getShallow("category");if(l!=null){dt(l)&&(l=i["ec-"+l]);var c=n.getItemVisual(l,"style"),u=a.ensureUniqueItemVisual(s,"style");He(u,c);for(var h=["symbol","symbolSize","symbolKeepAspect"],d=0;d<h.length;d++)a.setItemVisual(s,h[d],n.getItemVisual(l,h[d]))}})})}function FS(r){return r instanceof Array||(r=[r,r]),r}function jBe(r){r.eachSeriesByType("graph",function(e){var t=e.getGraph(),n=e.getEdgeData(),a=FS(e.get("edgeSymbol")),i=FS(e.get("edgeSymbolSize"));n.setVisual("fromSymbol",a&&a[0]),n.setVisual("toSymbol",a&&a[1]),n.setVisual("fromSymbolSize",i&&i[0]),n.setVisual("toSymbolSize",i&&i[1]),n.setVisual("style",e.getModel("lineStyle").getLineStyle()),n.each(function(s){var o=n.getItemModel(s),l=t.getEdgeByIndex(s),c=FS(o.getShallow("symbol",!0)),u=FS(o.getShallow("symbolSize",!0)),h=o.getModel("lineStyle").getLineStyle(),d=n.ensureUniqueItemVisual(s,"style");switch(He(d,h),d.stroke){case"source":{var A=l.node1.getVisual("style");d.stroke=A&&A.fill;break}case"target":{var A=l.node2.getVisual("style");d.stroke=A&&A.fill;break}}c[0]&&l.setVisual("fromSymbol",c[0]),c[1]&&l.setVisual("toSymbol",c[1]),u[0]&&l.setVisual("fromSymbolSize",u[0]),u[1]&&l.setVisual("toSymbolSize",u[1])})})}var FR="-->",rT=function(r){return r.get("autoCurveness")||null},lae=function(r,e){var t=rT(r),n=20,a=[];if(Br(t))n=t;else if($e(t)){r.__curvenessList=t;return}e>n&&(n=e);var i=n%2?n+2:n+3;a=[];for(var s=0;s<i;s++)a.push((s%2?s+1:s)/10*(s%2?-1:1));r.__curvenessList=a},Ub=function(r,e,t){var n=[r.id,r.dataIndex].join("."),a=[e.id,e.dataIndex].join(".");return[t.uid,n,a].join(FR)},cae=function(r){var e=r.split(FR);return[e[0],e[2],e[1]].join(FR)},OBe=function(r,e){var t=Ub(r.node1,r.node2,e);return e.__edgeMap[t]},UBe=function(r,e){var t=jR(Ub(r.node1,r.node2,e),e),n=jR(Ub(r.node2,r.node1,e),e);return t+n},jR=function(r,e){var t=e.__edgeMap;return t[r]?t[r].length:0};function HBe(r){rT(r)&&(r.__curvenessList=[],r.__edgeMap={},lae(r))}function QBe(r,e,t,n){if(rT(t)){var a=Ub(r,e,t),i=t.__edgeMap,s=i[cae(a)];i[a]&&!s?i[a].isForward=!0:s&&i[a]&&(s.isForward=!0,i[a].isForward=!1),i[a]=i[a]||[],i[a].push(n)}}function KF(r,e,t,n){var a=rT(e),i=$e(a);if(!a)return null;var s=OBe(r,e);if(!s)return null;for(var o=-1,l=0;l<s.length;l++)if(s[l]===t){o=l;break}var c=UBe(r,e);lae(e,c),r.lineStyle=r.lineStyle||{};var u=Ub(r.node1,r.node2,e),h=e.__curvenessList,d=i||c%2?0:1;if(s.isForward)return h[d+o];var A=cae(u),g=jR(A,e),p=h[o+g+d];return n?i?a&&a[0]===0?(g+d)%2?p:-p:((g%2?0:1)+d)%2?p:-p:(g+d)%2?p:-p:h[o+g+d]}function uae(r){var e=r.coordinateSystem;if(!(e&&e.type!=="view")){var t=r.getGraph();t.eachNode(function(n){var a=n.getModel();n.setLayout([+a.get("x"),+a.get("y")])}),WF(t,r)}}function WF(r,e){r.eachEdge(function(t,n){var a=Zc(t.getModel().get(["lineStyle","curveness"]),-KF(t,e,n,!0),0),i=hh(t.node1.getLayout()),s=hh(t.node2.getLayout()),o=[i,s];+a&&o.push([(i[0]+s[0])/2-(i[1]-s[1])*a,(i[1]+s[1])/2-(s[0]-i[0])*a]),t.setLayout(o)})}function zBe(r,e){r.eachSeriesByType("graph",function(t){var n=t.get("layout"),a=t.coordinateSystem;if(a&&a.type!=="view"){var i=t.getData(),s=[];X(a.dimensions,function(d){s=s.concat(i.mapDimensionsAll(d))});for(var o=0;o<i.count();o++){for(var l=[],c=!1,u=0;u<s.length;u++){var h=i.get(s[u],o);isNaN(h)||(c=!0),l.push(h)}c?i.setItemLayout(o,a.dataToPoint(l)):i.setItemLayout(o,[NaN,NaN])}WF(i.graph,t)}else(!n||n==="none")&&uae(t)})}function Zx(r){var e=r.coordinateSystem;if(e.type!=="view")return 1;var t=r.option.nodeScaleRatio,n=e.scaleX,a=e.getZoom(),i=(a-1)*t+1;return i/n}function Jx(r){var e=r.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var wz=Math.PI,x4=[];function qF(r,e,t,n){var a=r.coordinateSystem;if(!(a&&a.type!=="view")){var i=a.getBoundingRect(),s=r.getData(),o=s.graph,l=i.width/2+i.x,c=i.height/2+i.y,u=Math.min(i.width,i.height)/2,h=s.count();if(s.setLayout({cx:l,cy:c}),!!h){if(t){var d=a.pointToData(n),A=d[0],g=d[1],p=[A-l,g-c];J0(p,p),K_(p,p,u),t.setLayout([l+p[0],c+p[1]],!0);var v=r.get(["circular","rotateLabel"]);hae(t,v,l,c)}GBe[e](r,o,s,u,l,c,h),o.eachEdge(function(m,y){var x=Zc(m.getModel().get(["lineStyle","curveness"]),KF(m,r,y),0),b=hh(m.node1.getLayout()),S=hh(m.node2.getLayout()),_,C=(b[0]+S[0])/2,w=(b[1]+S[1])/2;+x&&(x*=3,_=[l*x+C*(1-x),c*x+w*(1-x)]),m.setLayout([b,S,_])})}}}var GBe={value:function(r,e,t,n,a,i,s){var o=0,l=t.getSum("value"),c=Math.PI*2/(l||s);e.eachNode(function(u){var h=u.getValue("value"),d=c*(l?h:1)/2;o+=d,u.setLayout([n*Math.cos(o)+a,n*Math.sin(o)+i]),o+=d})},symbolSize:function(r,e,t,n,a,i,s){var o=0;x4.length=s;var l=Zx(r);e.eachNode(function(h){var d=Jx(h);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var A=Math.asin(d/2/n);isNaN(A)&&(A=wz/2),x4[h.dataIndex]=A,o+=A*2});var c=(2*wz-o)/s/2,u=0;e.eachNode(function(h){var d=c+x4[h.dataIndex];u+=d,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([n*Math.cos(u)+a,n*Math.sin(u)+i]),u+=d})}};function hae(r,e,t,n){var a=r.getGraphicEl();if(a){var i=r.getModel(),s=i.get(["label","rotate"])||0,o=a.getSymbolPath();if(e){var l=r.getLayout(),c=Math.atan2(l[1]-n,l[0]-t);c<0&&(c=Math.PI*2+c);var u=l[0]<t;u&&(c=c-Math.PI);var h=u?"left":"right";o.setTextConfig({rotation:-c,position:h,origin:"center"});var d=o.ensureState("emphasis");He(d.textConfig||(d.textConfig={}),{position:h})}else o.setTextConfig({rotation:s*=Math.PI/180})}}function VBe(r){r.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&qF(e,"symbolSize")})}var Lm=_3;function $Be(r,e,t){for(var n=r,a=e,i=t.rect,s=i.width,o=i.height,l=[i.x+s/2,i.y+o/2],c=t.gravity==null?.1:t.gravity,u=0;u<n.length;u++){var h=n[u];h.p||(h.p=Pp(s*(Math.random()-.5)+l[0],o*(Math.random()-.5)+l[1])),h.pp=hh(h.p),h.edges=null}var d=t.friction==null?.6:t.friction,A=d,g,p;return{warmUp:function(){A=d*.8},setFixed:function(v){n[v].fixed=!0},setUnfixed:function(v){n[v].fixed=!1},beforeStep:function(v){g=v},afterStep:function(v){p=v},step:function(v){g&&g(n,a);for(var m=[],y=n.length,x=0;x<a.length;x++){var b=a[x];if(!b.ignoreForceLayout){var S=b.n1,_=b.n2;Ng(m,_.p,S.p);var C=C3(m)-b.d,w=_.w/(S.w+_.w);isNaN(w)&&(w=0),J0(m,m),!S.fixed&&Lm(S.p,S.p,m,w*C*A),!_.fixed&&Lm(_.p,_.p,m,-(1-w)*C*A)}}for(var x=0;x<y;x++){var B=n[x];B.fixed||(Ng(m,l,B.p),Lm(B.p,B.p,m,c*A))}for(var x=0;x<y;x++)for(var S=n[x],D=x+1;D<y;D++){var _=n[D];Ng(m,_.p,S.p);var C=C3(m);C===0&&(bve(m,Math.random()-.5,Math.random()-.5),C=1);var T=(S.rep+_.rep)/C/C;!S.fixed&&Lm(S.pp,S.pp,m,T),!_.fixed&&Lm(_.pp,_.pp,m,-T)}for(var E=[],x=0;x<y;x++){var B=n[x];B.fixed||(Ng(E,B.p,B.pp),Lm(B.p,B.p,E,A),as(B.pp,B.p))}A=A*.992;var R=A<.01;p&&p(n,a,R),v&&v(R)}}}function KBe(r){r.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var n=e.preservedPoints||{},a=e.getGraph(),i=a.data,s=a.edgeData,o=e.getModel("force"),l=o.get("initLayout");e.preservedPoints?i.each(function(x){var b=i.getId(x);i.setItemLayout(x,n[b]||[NaN,NaN])}):!l||l==="none"?uae(e):l==="circular"&&qF(e,"value");var c=i.getDataExtent("value"),u=s.getDataExtent("value"),h=o.get("repulsion"),d=o.get("edgeLength"),A=$e(h)?h:[h,h],g=$e(d)?d:[d,d];g=[g[1],g[0]];var p=i.mapArray("value",function(x,b){var S=i.getItemLayout(b),_=Hr(x,c,A);return isNaN(_)&&(_=(A[0]+A[1])/2),{w:_,rep:_,fixed:i.getItemModel(b).get("fixed"),p:!S||isNaN(S[0])||isNaN(S[1])?null:S}}),v=s.mapArray("value",function(x,b){var S=a.getEdgeByIndex(b),_=Hr(x,u,g);isNaN(_)&&(_=(g[0]+g[1])/2);var C=S.getModel(),w=Zc(S.getModel().get(["lineStyle","curveness"]),-KF(S,e,b,!0),0);return{n1:p[S.node1.dataIndex],n2:p[S.node2.dataIndex],d:_,curveness:w,ignoreForceLayout:C.get("ignoreForceLayout")}}),m=t.getBoundingRect(),y=$Be(p,v,{rect:m,gravity:o.get("gravity"),friction:o.get("friction")});y.beforeStep(function(x,b){for(var S=0,_=x.length;S<_;S++)x[S].fixed&&as(x[S].p,a.getNodeByIndex(S).getLayout())}),y.afterStep(function(x,b,S){for(var _=0,C=x.length;_<C;_++)x[_].fixed||a.getNodeByIndex(_).setLayout(x[_].p),n[i.getId(_)]=x[_].p;for(var _=0,C=b.length;_<C;_++){var w=b[_],B=a.getEdgeByIndex(_),D=w.n1.p,T=w.n2.p,E=B.getLayout();E=E?E.slice():[],E[0]=E[0]||[],E[1]=E[1]||[],as(E[0],D),as(E[1],T),+w.curveness&&(E[2]=[(D[0]+T[0])/2-(D[1]-T[1])*w.curveness,(D[1]+T[1])/2-(T[0]-D[0])*w.curveness]),B.setLayout(E)}}),e.forceLayout=y,e.preservedPoints=n,y.step()}else e.forceLayout=null})}function WBe(r,e,t){var n=He(r.getBoxLayoutParams(),{aspect:t});return Ua(n,{width:e.getWidth(),height:e.getHeight()})}function qBe(r,e){var t=[];return r.eachSeriesByType("graph",function(n){var a=n.get("coordinateSystem");if(!a||a==="view"){var i=n.getData(),s=i.mapArray(function(v){var m=i.getItemModel(v);return[+m.get("x"),+m.get("y")]}),o=[],l=[];IN(s,o,l),l[0]-o[0]===0&&(l[0]+=1,o[0]-=1),l[1]-o[1]===0&&(l[1]+=1,o[1]-=1);var c=(l[0]-o[0])/(l[1]-o[1]),u=WBe(n,e,c);isNaN(c)&&(o=[u.x,u.y],l=[u.x+u.width,u.y+u.height]);var h=l[0]-o[0],d=l[1]-o[1],A=u.width,g=u.height,p=n.coordinateSystem=new zw;p.zoomLimit=n.get("scaleLimit"),p.setBoundingRect(o[0],o[1],h,d),p.setViewRect(u.x,u.y,A,g),p.setCenter(n.get("center"),e),p.setZoom(n.get("zoom")),t.push(p)}}),t}var Sz=Ya.prototype,b4=Tw.prototype,dae=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r}();(function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(dae);function w4(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var YBe=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="ec-line",n}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new dae},e.prototype.buildPath=function(t,n){w4(n)?Sz.buildPath.call(this,t,n):b4.buildPath.call(this,t,n)},e.prototype.pointAt=function(t){return w4(this.shape)?Sz.pointAt.call(this,t):b4.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var n=this.shape,a=w4(n)?[n.x2-n.x1,n.y2-n.y1]:b4.tangentAt.call(this,t);return J0(a,a)},e}(hr),S4=["fromSymbol","toSymbol"];function _z(r){return"_"+r+"Type"}function Cz(r,e,t){var n=e.getItemVisual(t,r);if(!n||n==="none")return n;var a=e.getItemVisual(t,r+"Size"),i=e.getItemVisual(t,r+"Rotate"),s=e.getItemVisual(t,r+"Offset"),o=e.getItemVisual(t,r+"KeepAspect"),l=hy(a),c=Op(s||0,l);return n+l+c+(i||"")+(o||"")}function Bz(r,e,t){var n=e.getItemVisual(t,r);if(!(!n||n==="none")){var a=e.getItemVisual(t,r+"Size"),i=e.getItemVisual(t,r+"Rotate"),s=e.getItemVisual(t,r+"Offset"),o=e.getItemVisual(t,r+"KeepAspect"),l=hy(a),c=Op(s||0,l),u=Ta(n,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,o);return u.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,u.name=r,u}}function XBe(r){var e=new YBe({name:"line",subPixelOptimize:!0});return OR(e.shape,r),e}function OR(r,e){r.x1=e[0][0],r.y1=e[0][1],r.x2=e[1][0],r.y2=e[1][1],r.percent=1;var t=e[2];t?(r.cpx1=t[0],r.cpy1=t[1]):(r.cpx1=NaN,r.cpy1=NaN)}var YF=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this)||this;return i._createLine(t,n,a),i}return e.prototype._createLine=function(t,n,a){var i=t.hostModel,s=t.getItemLayout(n),o=XBe(s);o.shape.percent=0,jn(o,{shape:{percent:1}},i,n),this.add(o),X(S4,function(l){var c=Bz(l,t,n);this.add(c),this[_z(l)]=Cz(l,t,n)},this),this._updateCommonStl(t,n,a)},e.prototype.updateData=function(t,n,a){var i=t.hostModel,s=this.childOfName("line"),o=t.getItemLayout(n),l={shape:{}};OR(l.shape,o),Er(s,l,i,n),X(S4,function(c){var u=Cz(c,t,n),h=_z(c);if(this[h]!==u){this.remove(this.childOfName(c));var d=Bz(c,t,n);this.add(d)}this[h]=u},this),this._updateCommonStl(t,n,a)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,n,a){var i=t.hostModel,s=this.childOfName("line"),o=a&&a.emphasisLineStyle,l=a&&a.blurLineStyle,c=a&&a.selectLineStyle,u=a&&a.labelStatesModels,h=a&&a.emphasisDisabled,d=a&&a.focus,A=a&&a.blurScope;if(!a||t.hasItemOption){var g=t.getItemModel(n),p=g.getModel("emphasis");o=p.getModel("lineStyle").getLineStyle(),l=g.getModel(["blur","lineStyle"]).getLineStyle(),c=g.getModel(["select","lineStyle"]).getLineStyle(),h=p.get("disabled"),d=p.get("focus"),A=p.get("blurScope"),u=ei(g)}var v=t.getItemVisual(n,"style"),m=v.stroke;s.useStyle(v),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=o,s.ensureState("blur").style=l,s.ensureState("select").style=c,X(S4,function(_){var C=this.childOfName(_);if(C){C.setColor(m),C.style.opacity=v.opacity;for(var w=0;w<ps.length;w++){var B=ps[w],D=s.getState(B);if(D){var T=D.style||{},E=C.ensureState(B),R=E.style||(E.style={});T.stroke!=null&&(R[C.__isEmptyBrush?"stroke":"fill"]=T.stroke),T.opacity!=null&&(R.opacity=T.opacity)}}C.markRedraw()}},this);var y=i.getRawValue(n);Ni(this,u,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(_,C){return i.getFormattedLabel(_,C,t.dataType)}},inheritColor:m||"#000",defaultOpacity:v.opacity,defaultText:(y==null?t.getName(n):isFinite(y)?aa(y):y)+""});var x=this.getTextContent();if(x){var b=u.normal;x.__align=x.style.align,x.__verticalAlign=x.style.verticalAlign,x.__position=b.get("position")||"middle";var S=b.get("distance");$e(S)||(S=[S,S]),x.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),qn(this,d,A,h)},e.prototype.highlight=function(){Ch(this)},e.prototype.downplay=function(){Bh(this)},e.prototype.updateLayout=function(t,n){this.setLinePoints(t.getItemLayout(n))},e.prototype.setLinePoints=function(t){var n=this.childOfName("line");OR(n.shape,t),n.dirty()},e.prototype.beforeUpdate=function(){var t=this,n=t.childOfName("fromSymbol"),a=t.childOfName("toSymbol"),i=t.getTextContent();if(!n&&!a&&(!i||i.ignore))return;for(var s=1,o=this.parent;o;)o.scaleX&&(s/=o.scaleX),o=o.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),h=l.pointAt(c),d=Ng([],h,u);J0(d,d);function A(D,T){var E=D.__specifiedRotation;if(E==null){var R=l.tangentAt(T);D.attr("rotation",(T===1?-1:1)*Math.PI/2-Math.atan2(R[1],R[0]))}else D.attr("rotation",E)}if(n&&(n.setPosition(u),A(n,0),n.scaleX=n.scaleY=s*c,n.markRedraw()),a&&(a.setPosition(h),A(a,1),a.scaleX=a.scaleY=s*c,a.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var g=void 0,p=void 0,v=i.__labelDistance,m=v[0]*s,y=v[1]*s,x=c/2,b=l.tangentAt(x),S=[b[1],-b[0]],_=l.pointAt(x);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var C=b[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var w=-Math.atan2(b[1],b[0]);h[0]<u[0]&&(w=Math.PI+w),i.rotation=w}var B=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":B=-y,p="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":B=y,p="top";break;default:B=0,p="middle"}switch(i.__position){case"end":i.x=d[0]*m+h[0],i.y=d[1]*y+h[1],g=d[0]>.8?"left":d[0]<-.8?"right":"center",p=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":i.x=-d[0]*m+u[0],i.y=-d[1]*y+u[1],g=d[0]>.8?"right":d[0]<-.8?"left":"center",p=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=m*C+u[0],i.y=u[1]+B,g=b[0]<0?"right":"left",i.originX=-m*C,i.originY=-B;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=_[0],i.y=_[1]+B,g="center",i.originY=-B;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-m*C+h[0],i.y=h[1]+B,g=b[0]>=0?"right":"left",i.originX=m*C,i.originY=-B;break}i.scaleX=i.scaleY=s,i.setStyle({verticalAlign:i.__verticalAlign||p,align:i.__align||g})}},e}(Ht),XF=function(){function r(e){this.group=new Ht,this._LineCtor=e||YF}return r.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var n=this,a=n.group,i=n._lineData;n._lineData=e,i||a.removeAll();var s=Nz(e);e.diff(i).add(function(o){t._doAdd(e,o,s)}).update(function(o,l){t._doUpdate(i,e,l,o,s)}).remove(function(o){a.remove(i.getItemGraphicEl(o))}).execute()},r.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},r.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Nz(e),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function n(o){!o.isGroup&&!ZBe(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var i=t.getItemLayout(a);if(_4(i)){var s=new this._LineCtor(t,a,this._seriesScope);s.traverse(n),this.group.add(s),t.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(e){nf(this._progressiveEls||this.group,e)},r.prototype._doAdd=function(e,t,n){var a=e.getItemLayout(t);if(_4(a)){var i=new this._LineCtor(e,t,n);e.setItemGraphicEl(t,i),this.group.add(i)}},r.prototype._doUpdate=function(e,t,n,a,i){var s=e.getItemGraphicEl(n);if(!_4(t.getItemLayout(a))){this.group.remove(s);return}s?s.updateData(t,a,i):s=new this._LineCtor(t,a,i),t.setItemGraphicEl(a,s),this.group.add(s)},r}();function ZBe(r){return r.animators&&r.animators.length>0}function Nz(r){var e=r.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:ei(e)}}function Tz(r){return isNaN(r[0])||isNaN(r[1])}function _4(r){return r&&!Tz(r[0])&&!Tz(r[1])}var C4=[],B4=[],N4=[],Pm=li,T4=Yg,Iz=Math.abs;function Ez(r,e,t){for(var n=r[0],a=r[1],i=r[2],s=1/0,o,l=t*t,c=.1,u=.1;u<=.9;u+=.1){C4[0]=Pm(n[0],a[0],i[0],u),C4[1]=Pm(n[1],a[1],i[1],u);var h=Iz(T4(C4,e)-l);h<s&&(s=h,o=u)}for(var d=0;d<32;d++){var A=o+c;B4[0]=Pm(n[0],a[0],i[0],o),B4[1]=Pm(n[1],a[1],i[1],o),N4[0]=Pm(n[0],a[0],i[0],A),N4[1]=Pm(n[1],a[1],i[1],A);var h=T4(B4,e)-l;if(Iz(h)<.01)break;var g=T4(N4,e)-l;c/=2,h<0?g>=0?o=o+c:o=o-c:g>=0?o=o-c:o=o+c}return o}function I4(r,e){var t=[],n=vb,a=[[],[],[]],i=[[],[]],s=[];e/=2,r.eachEdge(function(o,l){var c=o.getLayout(),u=o.getVisual("fromSymbol"),h=o.getVisual("toSymbol");c.__original||(c.__original=[hh(c[0]),hh(c[1])],c[2]&&c.__original.push(hh(c[2])));var d=c.__original;if(c[2]!=null){if(as(a[0],d[0]),as(a[1],d[2]),as(a[2],d[1]),u&&u!=="none"){var A=Jx(o.node1),g=Ez(a,d[0],A*e);n(a[0][0],a[1][0],a[2][0],g,t),a[0][0]=t[3],a[1][0]=t[4],n(a[0][1],a[1][1],a[2][1],g,t),a[0][1]=t[3],a[1][1]=t[4]}if(h&&h!=="none"){var A=Jx(o.node2),g=Ez(a,d[1],A*e);n(a[0][0],a[1][0],a[2][0],g,t),a[1][0]=t[1],a[2][0]=t[2],n(a[0][1],a[1][1],a[2][1],g,t),a[1][1]=t[1],a[2][1]=t[2]}as(c[0],a[0]),as(c[1],a[2]),as(c[2],a[1])}else{if(as(i[0],d[0]),as(i[1],d[1]),Ng(s,i[1],i[0]),J0(s,s),u&&u!=="none"){var A=Jx(o.node1);_3(i[0],i[0],s,A*e)}if(h&&h!=="none"){var A=Jx(o.node2);_3(i[1],i[1],s,-A*e)}as(c[0],i[0]),as(c[1],i[1])}})}function Dz(r){return r.type==="view"}var JBe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){var a=new Fw,i=new XF,s=this.group;this._controller=new Qw(n.getZr()),this._controllerHost={target:s},s.add(a.group),s.add(i.group),this._symbolDraw=a,this._lineDraw=i,this._firstRender=!0},e.prototype.render=function(t,n,a){var i=this,s=t.coordinateSystem;this._model=t;var o=this._symbolDraw,l=this._lineDraw,c=this.group;if(Dz(s)){var u={x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY};this._firstRender?c.attr(u):Er(c,u,t)}I4(t.getGraph(),Zx(t));var h=t.getData();o.updateData(h);var d=t.getEdgeData();l.updateData(d),this._updateNodeAndLinkScale(),this._updateController(t,n,a),clearTimeout(this._layoutTimeout);var A=t.forceLayout,g=t.get(["force","layoutAnimation"]);A&&this._startForceLayoutIteration(A,g);var p=t.get("layout");h.graph.eachNode(function(x){var b=x.dataIndex,S=x.getGraphicEl(),_=x.getModel();if(S){S.off("drag").off("dragend");var C=_.get("draggable");C&&S.on("drag",function(B){switch(p){case"force":A.warmUp(),!i._layouting&&i._startForceLayoutIteration(A,g),A.setFixed(b),h.setItemLayout(b,[S.x,S.y]);break;case"circular":h.setItemLayout(b,[S.x,S.y]),x.setLayout({fixed:!0},!0),qF(t,"symbolSize",x,[B.offsetX,B.offsetY]),i.updateLayout(t);break;case"none":default:h.setItemLayout(b,[S.x,S.y]),WF(t.getGraph(),t),i.updateLayout(t);break}}).on("dragend",function(){A&&A.setUnfixed(b)}),S.setDraggable(C,!!_.get("cursor"));var w=_.get(["emphasis","focus"]);w==="adjacency"&&(Qt(S).focus=x.getAdjacentDataIndices())}}),h.graph.eachEdge(function(x){var b=x.getGraphicEl(),S=x.getModel().get(["emphasis","focus"]);b&&S==="adjacency"&&(Qt(b).focus={edge:[x.dataIndex],node:[x.node1.dataIndex,x.node2.dataIndex]})});var v=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),m=h.getLayout("cx"),y=h.getLayout("cy");h.graph.eachNode(function(x){hae(x,v,m,y)}),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,n){var a=this;(function i(){t.step(function(s){a.updateLayout(a._model),(a._layouting=!s)&&(n?a._layoutTimeout=setTimeout(i,16):i())})})()},e.prototype._updateController=function(t,n,a){var i=this,s=this._controller,o=this._controllerHost,l=this.group;if(s.setPointerChecker(function(c,u,h){var d=l.getBoundingRect();return d.applyTransform(l.transform),d.contain(u,h)&&!JN(c,a,t)}),!Dz(t.coordinateSystem)){s.disable();return}s.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(c){OF(o,c.dx,c.dy),a.dispatchAction({seriesId:t.id,type:"graphRoam",dx:c.dx,dy:c.dy})}).on("zoom",function(c){UF(o,c.scale,c.originX,c.originY),a.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:c.scale,originX:c.originX,originY:c.originY}),i._updateNodeAndLinkScale(),I4(t.getGraph(),Zx(t)),i._lineDraw.updateLayout(),a.updateLabelLayout()})},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,n=t.getData(),a=Zx(t);n.eachItemGraphicEl(function(i,s){i&&i.setSymbolScale(a)})},e.prototype.updateLayout=function(t){I4(t.getGraph(),Zx(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(nn);function km(r){return"_EC_"+r}var eNe=function(){function r(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var n=this._nodesMap;if(!n[km(e)]){var a=new cg(e,t);return a.hostGraph=this,this.nodes.push(a),n[km(e)]=a,a}},r.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},r.prototype.getNodeById=function(e){return this._nodesMap[km(e)]},r.prototype.addEdge=function(e,t,n){var a=this._nodesMap,i=this._edgesMap;if(Br(e)&&(e=this.nodes[e]),Br(t)&&(t=this.nodes[t]),e instanceof cg||(e=a[km(e)]),t instanceof cg||(t=a[km(t)]),!(!e||!t)){var s=e.id+"-"+t.id,o=new Aae(e,t,n);return o.hostGraph=this,this._directed&&(e.outEdges.push(o),t.inEdges.push(o)),e.edges.push(o),e!==t&&t.edges.push(o),this.edges.push(o),i[s]=o,o}},r.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},r.prototype.getEdge=function(e,t){e instanceof cg&&(e=e.id),t instanceof cg&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},r.prototype.eachNode=function(e,t){for(var n=this.nodes,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&e.call(t,n[i],i)},r.prototype.eachEdge=function(e,t){for(var n=this.edges,a=n.length,i=0;i<a;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&e.call(t,n[i],i)},r.prototype.breadthFirstTraverse=function(e,t,n,a){if(t instanceof cg||(t=this._nodesMap[km(t)]),!!t){for(var i=n==="out"?"outEdges":n==="in"?"inEdges":"edges",s=0;s<this.nodes.length;s++)this.nodes[s].__visited=!1;if(!e.call(a,t,null))for(var o=[t];o.length;)for(var l=o.shift(),c=l[i],s=0;s<c.length;s++){var u=c[s],h=u.node1===l?u.node2:u.node1;if(!h.__visited){if(e.call(a,h,l))return;o.push(h),h.__visited=!0}}}},r.prototype.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,a=this.edges,i=0,s=n.length;i<s;i++)n[i].dataIndex=-1;for(var i=0,s=e.count();i<s;i++)n[e.getRawIndex(i)].dataIndex=i;t.filterSelf(function(o){var l=a[t.getRawIndex(o)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var i=0,s=a.length;i<s;i++)a[i].dataIndex=-1;for(var i=0,s=t.count();i<s;i++)a[t.getRawIndex(i)].dataIndex=i},r.prototype.clone=function(){for(var e=new r(this._directed),t=this.nodes,n=this.edges,a=0;a<t.length;a++)e.addNode(t[a].id,t[a].dataIndex);for(var a=0;a<n.length;a++){var i=n[a];e.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return e},r}(),cg=function(){function r(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,n=t.data.getItemModel(this.dataIndex);return n.getModel(e)}},r.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var n=this.edges[t];n.dataIndex<0||(e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex))}return e},r.prototype.getTrajectoryDataIndices=function(){for(var e=bt(),t=bt(),n=0;n<this.edges.length;n++){var a=this.edges[n];if(!(a.dataIndex<0)){e.set(a.dataIndex,!0);for(var i=[a.node1],s=[a.node2],o=0;o<i.length;){var l=i[o];o++,t.set(l.dataIndex,!0);for(var c=0;c<l.inEdges.length;c++)e.set(l.inEdges[c].dataIndex,!0),i.push(l.inEdges[c].node1)}for(o=0;o<s.length;){var u=s[o];o++,t.set(u.dataIndex,!0);for(var c=0;c<u.outEdges.length;c++)e.set(u.outEdges[c].dataIndex,!0),s.push(u.outEdges[c].node2)}}}return{edge:e.keys(),node:t.keys()}},r}(),Aae=function(){function r(e,t,n){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=n??-1}return r.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,n=t.edgeData.getItemModel(this.dataIndex);return n.getModel(e)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var e=bt(),t=bt();e.set(this.dataIndex,!0);for(var n=[this.node1],a=[this.node2],i=0;i<n.length;){var s=n[i];i++,t.set(s.dataIndex,!0);for(var o=0;o<s.inEdges.length;o++)e.set(s.inEdges[o].dataIndex,!0),n.push(s.inEdges[o].node1)}for(i=0;i<a.length;){var l=a[i];i++,t.set(l.dataIndex,!0);for(var o=0;o<l.outEdges.length;o++)e.set(l.outEdges[o].dataIndex,!0),a.push(l.outEdges[o].node2)}return{edge:e.keys(),node:t.keys()}},r}();function fae(r,e){return{getValue:function(t){var n=this[r][e];return n.getStore().get(n.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,n){this.dataIndex>=0&&this[r][e].setItemVisual(this.dataIndex,t,n)},getVisual:function(t){return this[r][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,n){this.dataIndex>=0&&this[r][e].setItemLayout(this.dataIndex,t,n)},getLayout:function(){return this[r][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][e].getRawIndex(this.dataIndex)}}}Ia(cg,fae("hostGraph","data"));Ia(Aae,fae("hostGraph","edgeData"));function gae(r,e,t,n,a){for(var i=new eNe(n),s=0;s<r.length;s++)i.addNode(di(r[s].id,r[s].name,s),s);for(var o=[],l=[],c=0,s=0;s<e.length;s++){var u=e[s],h=u.source,d=u.target;i.addEdge(h,d,c)&&(l.push(u),o.push(di(Fa(u.id,null),h+" > "+d)),c++)}var A=t.get("coordinateSystem"),g;if(A==="cartesian2d"||A==="polar")g=Uh(r,t);else{var p=Mw.get(A),v=p?p.dimensions||[]:[];rr(v,"value")<0&&v.concat(["value"]);var m=Lw(r,{coordDimensions:v,encodeDefine:t.getEncode()}).dimensions;g=new As(m,t),g.initData(r)}var y=new As(["value"],t);return y.initData(l,o),a&&a(g,y),Yne({mainData:g,struct:i,structAttr:"graph",datas:{node:g,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}var tNe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments);var n=this;function a(){return n._categoriesData}this.legendVisualProvider=new Hw(a,a),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){r.prototype.mergeDefaultAndTheme.apply(this,arguments),mp(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,n){var a=t.edges||t.links||[],i=t.data||t.nodes||[],s=this;if(i&&a){HBe(this);var o=gae(i,a,this,!0,l);return X(o.edges,function(c){QBe(c.node1,c.node2,this,c.dataIndex)},this),o.data}function l(c,u){c.wrapMethod("getItemModel",function(g){var p=s._categoriesModels,v=g.getShallow("category"),m=p[v];return m&&(m.parentModel=g.parentModel,g.parentModel=m),g});var h=Qr.prototype.getModel;function d(g,p){var v=h.call(this,g,p);return v.resolveParentPath=A,v}u.wrapMethod("getItemModel",function(g){return g.resolveParentPath=A,g.getModel=d,g});function A(g){if(g&&(g[0]==="label"||g[1]==="label")){var p=g.slice();return g[0]==="label"?p[0]="edgeLabel":g[1]==="label"&&(p[1]="edgeLabel"),p}return g}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,n,a){if(a==="edge"){var i=this.getData(),s=this.getDataParams(t,a),o=i.graph.getEdgeByIndex(t),l=i.getName(o.node1.dataIndex),c=i.getName(o.node2.dataIndex),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),ti("nameValue",{name:u.join(" > "),value:s.value,noValue:s.value==null})}var h=Ote({series:this,dataIndex:t,multipleSeries:n});return h},e.prototype._updateCategoriesData=function(){var t=We(this.option.categories||[],function(a){return a.value!=null?a:He({value:0},a)}),n=new As(["value"],this);n.initData(t),this._categoriesData=n,this._categoriesModels=n.mapArray(function(a){return n.getItemModel(a)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Sn),rNe={type:"graphRoam",event:"graphRoam",update:"none"};function nNe(r){r.registerChartView(JBe),r.registerSeriesModel(tNe),r.registerProcessor(kBe),r.registerVisual(FBe),r.registerVisual(jBe),r.registerLayout(zBe),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,VBe),r.registerLayout(KBe),r.registerCoordinateSystem("graphView",{dimensions:zw.dimensions,create:qBe}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Aa),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Aa),r.registerAction(rNe,function(e,t,n){t.eachComponent({mainType:"series",query:e},function(a){var i=a.coordinateSystem,s=QF(i,e,void 0,n);a.setCenter&&a.setCenter(s.center),a.setZoom&&a.setZoom(s.zoom)})})}var aNe=function(){function r(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return r}(),iNe=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="pointer",n}return e.prototype.getDefaultShape=function(){return new aNe},e.prototype.buildPath=function(t,n){var a=Math.cos,i=Math.sin,s=n.r,o=n.width,l=n.angle,c=n.x-a(l)*o*(o>=s/3?1:2),u=n.y-i(l)*o*(o>=s/3?1:2);l=n.angle-Math.PI/2,t.moveTo(c,u),t.lineTo(n.x+a(l)*o,n.y+i(l)*o),t.lineTo(n.x+a(n.angle)*s,n.y+i(n.angle)*s),t.lineTo(n.x-a(l)*o,n.y-i(l)*o),t.lineTo(c,u)},e}(hr);function sNe(r,e){var t=r.get("center"),n=e.getWidth(),a=e.getHeight(),i=Math.min(n,a),s=ot(t[0],e.getWidth()),o=ot(t[1],e.getHeight()),l=ot(r.get("radius"),i/2);return{cx:s,cy:o,r:l}}function jS(r,e){var t=r==null?"":r+"";return e&&(dt(e)?t=e.replace("{value}",t):It(e)&&(t=e(r))),t}var oNe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){this.group.removeAll();var i=t.get(["axisLine","lineStyle","color"]),s=sNe(t,a);this._renderMain(t,n,a,i,s),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,n,a,i,s){var o=this.group,l=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,u=-t.get("endAngle")/180*Math.PI,h=t.getModel("axisLine"),d=h.get("roundCap"),A=d?jC:ms,g=h.get("show"),p=h.getModel("lineStyle"),v=p.get("width"),m=[c,u];Gk(m,!l),c=m[0],u=m[1];for(var y=u-c,x=c,b=[],S=0;g&&S<i.length;S++){var _=Math.min(Math.max(i[S][0],0),1);u=c+y*_;var C=new A({shape:{startAngle:x,endAngle:u,cx:s.cx,cy:s.cy,clockwise:l,r0:s.r-v,r:s.r},silent:!0});C.setStyle({fill:i[S][1]}),C.setStyle(p.getLineStyle(["color","width"])),b.push(C),x=u}b.reverse(),X(b,function(B){return o.add(B)});var w=function(B){if(B<=0)return i[0][1];var D;for(D=0;D<i.length;D++)if(i[D][0]>=B&&(D===0?0:i[D-1][0])<B)return i[D][1];return i[D-1][1]};this._renderTicks(t,n,a,w,s,c,u,l,v),this._renderTitleAndDetail(t,n,a,w,s),this._renderAnchor(t,s),this._renderPointer(t,n,a,w,s,c,u,l,v)},e.prototype._renderTicks=function(t,n,a,i,s,o,l,c,u){for(var h=this.group,d=s.cx,A=s.cy,g=s.r,p=+t.get("min"),v=+t.get("max"),m=t.getModel("splitLine"),y=t.getModel("axisTick"),x=t.getModel("axisLabel"),b=t.get("splitNumber"),S=y.get("splitNumber"),_=ot(m.get("length"),g),C=ot(y.get("length"),g),w=o,B=(l-o)/b,D=B/S,T=m.getModel("lineStyle").getLineStyle(),E=y.getModel("lineStyle").getLineStyle(),R=m.get("distance"),M,k,O=0;O<=b;O++){if(M=Math.cos(w),k=Math.sin(w),m.get("show")){var Q=R?R+u:u,H=new Ya({shape:{x1:M*(g-Q)+d,y1:k*(g-Q)+A,x2:M*(g-_-Q)+d,y2:k*(g-_-Q)+A},style:T,silent:!0});T.stroke==="auto"&&H.setStyle({stroke:i(O/b)}),h.add(H)}if(x.get("show")){var Q=x.get("distance")+R,W=jS(aa(O/b*(v-p)+p),x.get("formatter")),te=i(O/b),ee=M*(g-_-Q)+d,j=k*(g-_-Q)+A,G=x.get("rotate"),Y=0;G==="radial"?(Y=-w+2*Math.PI,Y>Math.PI/2&&(Y+=Math.PI)):G==="tangential"?Y=-w-Math.PI/2:Br(G)&&(Y=G*Math.PI/180),Y===0?h.add(new Cr({style:bn(x,{text:W,x:ee,y:j,verticalAlign:k<-.8?"top":k>.8?"bottom":"middle",align:M<-.4?"left":M>.4?"right":"center"},{inheritColor:te}),silent:!0})):h.add(new Cr({style:bn(x,{text:W,x:ee,y:j,verticalAlign:"middle",align:"center"},{inheritColor:te}),silent:!0,originX:ee,originY:j,rotation:Y}))}if(y.get("show")&&O!==b){var Q=y.get("distance");Q=Q?Q+u:u;for(var Z=0;Z<=S;Z++){M=Math.cos(w),k=Math.sin(w);var de=new Ya({shape:{x1:M*(g-Q)+d,y1:k*(g-Q)+A,x2:M*(g-C-Q)+d,y2:k*(g-C-Q)+A},silent:!0,style:E});E.stroke==="auto"&&de.setStyle({stroke:i((O+Z/S)/b)}),h.add(de),w+=D}w-=D}else w+=B}},e.prototype._renderPointer=function(t,n,a,i,s,o,l,c,u){var h=this.group,d=this._data,A=this._progressEls,g=[],p=t.get(["pointer","show"]),v=t.getModel("progress"),m=v.get("show"),y=t.getData(),x=y.mapDimension("value"),b=+t.get("min"),S=+t.get("max"),_=[b,S],C=[o,l];function w(D,T){var E=y.getItemModel(D),R=E.getModel("pointer"),M=ot(R.get("width"),s.r),k=ot(R.get("length"),s.r),O=t.get(["pointer","icon"]),Q=R.get("offsetCenter"),H=ot(Q[0],s.r),W=ot(Q[1],s.r),te=R.get("keepAspect"),ee;return O?ee=Ta(O,H-M/2,W-k,M,k,null,te):ee=new iNe({shape:{angle:-Math.PI/2,width:M,r:k,x:H,y:W}}),ee.rotation=-(T+Math.PI/2),ee.x=s.cx,ee.y=s.cy,ee}function B(D,T){var E=v.get("roundCap"),R=E?jC:ms,M=v.get("overlap"),k=M?v.get("width"):u/y.count(),O=M?s.r-k:s.r-(D+1)*k,Q=M?s.r:s.r-D*k,H=new R({shape:{startAngle:o,endAngle:T,cx:s.cx,cy:s.cy,clockwise:c,r0:O,r:Q}});return M&&(H.z2=Hr(y.get(x,D),[b,S],[100,0],!0)),H}(m||p)&&(y.diff(d).add(function(D){var T=y.get(x,D);if(p){var E=w(D,o);jn(E,{rotation:-((isNaN(+T)?C[0]:Hr(T,_,C,!0))+Math.PI/2)},t),h.add(E),y.setItemGraphicEl(D,E)}if(m){var R=B(D,o),M=v.get("clip");jn(R,{shape:{endAngle:Hr(T,_,C,M)}},t),h.add(R),Y3(t.seriesIndex,y.dataType,D,R),g[D]=R}}).update(function(D,T){var E=y.get(x,D);if(p){var R=d.getItemGraphicEl(T),M=R?R.rotation:o,k=w(D,M);k.rotation=M,Er(k,{rotation:-((isNaN(+E)?C[0]:Hr(E,_,C,!0))+Math.PI/2)},t),h.add(k),y.setItemGraphicEl(D,k)}if(m){var O=A[T],Q=O?O.shape.endAngle:o,H=B(D,Q),W=v.get("clip");Er(H,{shape:{endAngle:Hr(E,_,C,W)}},t),h.add(H),Y3(t.seriesIndex,y.dataType,D,H),g[D]=H}}).execute(),y.each(function(D){var T=y.getItemModel(D),E=T.getModel("emphasis"),R=E.get("focus"),M=E.get("blurScope"),k=E.get("disabled");if(p){var O=y.getItemGraphicEl(D),Q=y.getItemVisual(D,"style"),H=Q.fill;if(O instanceof fi){var W=O.style;O.useStyle(He({image:W.image,x:W.x,y:W.y,width:W.width,height:W.height},Q))}else O.useStyle(Q),O.type!=="pointer"&&O.setColor(H);O.setStyle(T.getModel(["pointer","itemStyle"]).getItemStyle()),O.style.fill==="auto"&&O.setStyle("fill",i(Hr(y.get(x,D),_,[0,1],!0))),O.z2EmphasisLift=0,Bi(O,T),qn(O,R,M,k)}if(m){var te=g[D];te.useStyle(y.getItemVisual(D,"style")),te.setStyle(T.getModel(["progress","itemStyle"]).getItemStyle()),te.z2EmphasisLift=0,Bi(te,T),qn(te,R,M,k)}}),this._progressEls=g)},e.prototype._renderAnchor=function(t,n){var a=t.getModel("anchor"),i=a.get("show");if(i){var s=a.get("size"),o=a.get("icon"),l=a.get("offsetCenter"),c=a.get("keepAspect"),u=Ta(o,n.cx-s/2+ot(l[0],n.r),n.cy-s/2+ot(l[1],n.r),s,s,null,c);u.z2=a.get("showAbove")?1:0,u.setStyle(a.getModel("itemStyle").getItemStyle()),this.group.add(u)}},e.prototype._renderTitleAndDetail=function(t,n,a,i,s){var o=this,l=t.getData(),c=l.mapDimension("value"),u=+t.get("min"),h=+t.get("max"),d=new Ht,A=[],g=[],p=t.isAnimationEnabled(),v=t.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){A[m]=new Cr({silent:!0}),g[m]=new Cr({silent:!0})}).update(function(m,y){A[m]=o._titleEls[y],g[m]=o._detailEls[y]}).execute(),l.each(function(m){var y=l.getItemModel(m),x=l.get(c,m),b=new Ht,S=i(Hr(x,[u,h],[0,1],!0)),_=y.getModel("title");if(_.get("show")){var C=_.get("offsetCenter"),w=s.cx+ot(C[0],s.r),B=s.cy+ot(C[1],s.r),D=A[m];D.attr({z2:v?0:2,style:bn(_,{x:w,y:B,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:S})}),b.add(D)}var T=y.getModel("detail");if(T.get("show")){var E=T.get("offsetCenter"),R=s.cx+ot(E[0],s.r),M=s.cy+ot(E[1],s.r),k=ot(T.get("width"),s.r),O=ot(T.get("height"),s.r),Q=t.get(["progress","show"])?l.getItemVisual(m,"style").fill:S,D=g[m],H=T.get("formatter");D.attr({z2:v?0:2,style:bn(T,{x:R,y:M,text:jS(x,H),width:isNaN(k)?null:k,height:isNaN(O)?null:O,align:"center",verticalAlign:"middle"},{inheritColor:Q})}),zee(D,{normal:T},x,function(te){return jS(te,H)}),p&&Gee(D,m,l,t,{getFormattedLabel:function(te,ee,j,G,Y,Z){return jS(Z?Z.interpolatedValue:x,H)}}),b.add(D)}d.add(b)}),this.group.add(d),this._titleEls=A,this._detailEls=g},e.type="gauge",e}(nn),lNe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,n){return fy(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(Sn);function cNe(r){r.registerChartView(oNe),r.registerSeriesModel(lNe)}var uNe=["itemStyle","opacity"],hNe=function(r){Pe(e,r);function e(t,n){var a=r.call(this)||this,i=a,s=new ws,o=new Cr;return i.setTextContent(o),a.setTextGuideLine(s),a.updateData(t,n,!0),a}return e.prototype.updateData=function(t,n,a){var i=this,s=t.hostModel,o=t.getItemModel(n),l=t.getItemLayout(n),c=o.getModel("emphasis"),u=o.get(uNe);u=u??1,a||nc(i),i.useStyle(t.getItemVisual(n,"style")),i.style.lineJoin="round",a?(i.setShape({points:l.points}),i.style.opacity=0,jn(i,{style:{opacity:u}},s,n)):Er(i,{style:{opacity:u},shape:{points:l.points}},s,n),Bi(i,o),this._updateLabel(t,n),qn(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,n){var a=this,i=this.getTextGuideLine(),s=a.getTextContent(),o=t.hostModel,l=t.getItemModel(n),c=t.getItemLayout(n),u=c.label,h=t.getItemVisual(n,"style"),d=h.fill;Ni(s,ei(l),{labelFetcher:t.hostModel,labelDataIndex:n,defaultOpacity:h.opacity,defaultText:t.getName(n)},{normal:{align:u.textAlign,verticalAlign:u.verticalAlign}}),a.setTextConfig({local:!0,inside:!!u.inside,insideStroke:d,outsideFill:d});var A=u.linePoints;i.setShape({points:A}),a.textGuideLineConfig={anchor:A?new Xt(A[0][0],A[0][1]):null},Er(s,{style:{x:u.x,y:u.y}},o,n),s.attr({rotation:u.rotation,originX:u.x,originY:u.y,z2:10}),TF(a,IF(l),{stroke:d})},e}(vs),dNe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,n,a){var i=t.getData(),s=this._data,o=this.group;i.diff(s).add(function(l){var c=new hNe(i,l);i.setItemGraphicEl(l,c),o.add(c)}).update(function(l,c){var u=s.getItemGraphicEl(c);u.updateData(i,l),o.add(u),i.setItemGraphicEl(l,u)}).remove(function(l){var c=s.getItemGraphicEl(l);Cb(c,t,l)}).execute(),this._data=i},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(nn),ANe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Hw(ft(this.getData,this),ft(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,n){return fy(this,{coordDimensions:["value"],encodeDefaulter:Wt(oF,this)})},e.prototype._defaultLabelLine=function(t){mp(t,"labelLine",["show"]);var n=t.labelLine,a=t.emphasis.labelLine;n.show=n.show&&t.label.show,a.show=a.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var n=this.getData(),a=r.prototype.getDataParams.call(this,t),i=n.mapDimension("value"),s=n.getSum(i);return a.percent=s?+(n.get(i,t)/s*100).toFixed(2):0,a.$vars.push("percent"),a},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Sn);function fNe(r,e){return Ua(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function gNe(r,e){for(var t=r.mapDimension("value"),n=r.mapArray(t,function(l){return l}),a=[],i=e==="ascending",s=0,o=r.count();s<o;s++)a[s]=s;return It(e)?a.sort(e):e!=="none"&&a.sort(function(l,c){return i?n[l]-n[c]:n[c]-n[l]}),a}function pNe(r){var e=r.hostModel,t=e.get("orient");r.each(function(n){var a=r.getItemModel(n),i=a.getModel("label"),s=i.get("position"),o=a.getModel("labelLine"),l=r.getItemLayout(n),c=l.points,u=s==="inner"||s==="inside"||s==="center"||s==="insideLeft"||s==="insideRight",h,d,A,g;if(u)s==="insideLeft"?(d=(c[0][0]+c[3][0])/2+5,A=(c[0][1]+c[3][1])/2,h="left"):s==="insideRight"?(d=(c[1][0]+c[2][0])/2-5,A=(c[1][1]+c[2][1])/2,h="right"):(d=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,A=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,h="center"),g=[[d,A],[d,A]];else{var p=void 0,v=void 0,m=void 0,y=void 0,x=o.get("length");s==="left"?(p=(c[3][0]+c[0][0])/2,v=(c[3][1]+c[0][1])/2,m=p-x,d=m-5,h="right"):s==="right"?(p=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,m=p+x,d=m+5,h="left"):s==="top"?(p=(c[3][0]+c[0][0])/2,v=(c[3][1]+c[0][1])/2,y=v-x,A=y-5,h="center"):s==="bottom"?(p=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,y=v+x,A=y+5,h="center"):s==="rightTop"?(p=t==="horizontal"?c[3][0]:c[1][0],v=t==="horizontal"?c[3][1]:c[1][1],t==="horizontal"?(y=v-x,A=y-5,h="center"):(m=p+x,d=m+5,h="top")):s==="rightBottom"?(p=c[2][0],v=c[2][1],t==="horizontal"?(y=v+x,A=y+5,h="center"):(m=p+x,d=m+5,h="bottom")):s==="leftTop"?(p=c[0][0],v=t==="horizontal"?c[0][1]:c[1][1],t==="horizontal"?(y=v-x,A=y-5,h="center"):(m=p-x,d=m-5,h="right")):s==="leftBottom"?(p=t==="horizontal"?c[1][0]:c[3][0],v=t==="horizontal"?c[1][1]:c[2][1],t==="horizontal"?(y=v+x,A=y+5,h="center"):(m=p-x,d=m-5,h="right")):(p=(c[1][0]+c[2][0])/2,v=(c[1][1]+c[2][1])/2,t==="horizontal"?(y=v+x,A=y+5,h="center"):(m=p+x,d=m+5,h="left")),t==="horizontal"?(m=p,d=m):(y=v,A=y),g=[[p,v],[m,y]]}l.label={linePoints:g,x:d,y:A,verticalAlign:"middle",textAlign:h,inside:u}})}function mNe(r,e){r.eachSeriesByType("funnel",function(t){var n=t.getData(),a=n.mapDimension("value"),i=t.get("sort"),s=fNe(t,e),o=t.get("orient"),l=s.width,c=s.height,u=gNe(n,i),h=s.x,d=s.y,A=o==="horizontal"?[ot(t.get("minSize"),c),ot(t.get("maxSize"),c)]:[ot(t.get("minSize"),l),ot(t.get("maxSize"),l)],g=n.getDataExtent(a),p=t.get("min"),v=t.get("max");p==null&&(p=Math.min(g[0],0)),v==null&&(v=g[1]);var m=t.get("funnelAlign"),y=t.get("gap"),x=o==="horizontal"?l:c,b=(x-y*(n.count()-1))/n.count(),S=function(M,k){if(o==="horizontal"){var O=n.get(a,M)||0,Q=Hr(O,[p,v],A,!0),H=void 0;switch(m){case"top":H=d;break;case"center":H=d+(c-Q)/2;break;case"bottom":H=d+(c-Q);break}return[[k,H],[k,H+Q]]}var W=n.get(a,M)||0,te=Hr(W,[p,v],A,!0),ee;switch(m){case"left":ee=h;break;case"center":ee=h+(l-te)/2;break;case"right":ee=h+l-te;break}return[[ee,k],[ee+te,k]]};i==="ascending"&&(b=-b,y=-y,o==="horizontal"?h+=l:d+=c,u=u.reverse());for(var _=0;_<u.length;_++){var C=u[_],w=u[_+1],B=n.getItemModel(C);if(o==="horizontal"){var D=B.get(["itemStyle","width"]);D==null?D=b:(D=ot(D,l),i==="ascending"&&(D=-D));var T=S(C,h),E=S(w,h+D);h+=D+y,n.setItemLayout(C,{points:T.concat(E.slice().reverse())})}else{var R=B.get(["itemStyle","height"]);R==null?R=b:(R=ot(R,c),i==="ascending"&&(R=-R));var T=S(C,d),E=S(w,d+R);d+=R+y,n.setItemLayout(C,{points:T.concat(E.slice().reverse())})}}pNe(n)})}function vNe(r){r.registerChartView(dNe),r.registerSeriesModel(ANe),r.registerLayout(mNe),r.registerProcessor(Uw("funnel"))}var yNe=.3,xNe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new Ht,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,n,a,i){this._progressiveEls=null;var s=this._dataGroup,o=t.getData(),l=this._data,c=t.coordinateSystem,u=c.dimensions,h=Rz(t);o.diff(l).add(d).update(A).remove(g).execute();function d(v){var m=Mz(o,s,v,u,c);E4(m,o,v,h)}function A(v,m){var y=l.getItemGraphicEl(m),x=pae(o,v,u,c);o.setItemGraphicEl(v,y),Er(y,{shape:{points:x}},t,v),nc(y),E4(y,o,v,h)}function g(v){var m=l.getItemGraphicEl(v);s.remove(m)}if(!this._initialized){this._initialized=!0;var p=bNe(c,t,function(){setTimeout(function(){s.removeClipPath()})});s.setClipPath(p)}this._data=o},e.prototype.incrementalPrepareRender=function(t,n,a){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,n,a){for(var i=n.getData(),s=n.coordinateSystem,o=s.dimensions,l=Rz(n),c=this._progressiveEls=[],u=t.start;u<t.end;u++){var h=Mz(i,this._dataGroup,u,o,s);h.incremental=!0,E4(h,i,u,l),c.push(h)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(nn);function bNe(r,e,t){var n=r.model,a=r.getRect(),i=new br({shape:{x:a.x,y:a.y,width:a.width,height:a.height}}),s=n.get("layout")==="horizontal"?"width":"height";return i.setShape(s,0),jn(i,{shape:{width:a.width,height:a.height}},e,t),i}function pae(r,e,t,n){for(var a=[],i=0;i<t.length;i++){var s=t[i],o=r.get(r.mapDimension(s),e);wNe(o,n.getAxis(s).type)||a.push(n.dataToPoint(o,s))}return a}function Mz(r,e,t,n,a){var i=pae(r,t,n,a),s=new ws({shape:{points:i},z2:10});return e.add(s),r.setItemGraphicEl(t,s),s}function Rz(r){var e=r.get("smooth",!0);return e===!0&&(e=yNe),e=_h(e),pb(e)&&(e=0),{smooth:e}}function E4(r,e,t,n){r.useStyle(e.getItemVisual(t,"style")),r.style.fill=null,r.setShape("smooth",n.smooth);var a=e.getItemModel(t),i=a.getModel("emphasis");Bi(r,a,"lineStyle"),qn(r,i.get("focus"),i.get("blurScope"),i.get("disabled"))}function wNe(r,e){return e==="category"?r==null:r==null||isNaN(r)}var SNe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,n){return Uh(null,this,{useEncodeDefaulter:ft(_Ne,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var n=this.coordinateSystem,a=this.getData(),i=[];return n.eachActiveState(a,function(s,o){t===s&&i.push(a.getRawIndex(o))}),i},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Sn);function _Ne(r){var e=r.ecModel.getComponent("parallel",r.get("parallelIndex"));if(e){var t={};return X(e.dimensions,function(n){var a=CNe(n);t[n]=a}),t}}function CNe(r){return+r.replace("dim","")}var BNe=["lineStyle","opacity"],NNe={seriesType:"parallel",reset:function(r,e){var t=r.coordinateSystem,n={normal:r.get(["lineStyle","opacity"]),active:r.get("activeOpacity"),inactive:r.get("inactiveOpacity")};return{progress:function(a,i){t.eachActiveState(i,function(s,o){var l=n[s];if(s==="normal"&&i.hasItemOption){var c=i.getItemModel(o).get(BNe,!0);c!=null&&(l=c)}var u=i.ensureUniqueItemVisual(o,"style");u.opacity=l},a.start,a.end)}}}};function TNe(r){INe(r),ENe(r)}function INe(r){if(!r.parallel){var e=!1;X(r.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(r.parallel=[{}])}}function ENe(r){var e=Xr(r.parallelAxis);X(e,function(t){if(Pt(t)){var n=t.parallelIndex||0,a=Xr(r.parallel)[n];a&&a.parallelAxisDefault&&qt(t,a.parallelAxisDefault,!1)}})}var DNe=5,MNe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){this._model=t,this._api=a,this._handlers||(this._handlers={},X(RNe,function(i,s){a.getZr().on(s,this._handlers[s]=ft(i,this))},this)),uy(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,n){Ib(this,"_throttledDispatchExpand"),X(this._handlers,function(a,i){n.getZr().off(i,a)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(He({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Gn),RNe={mousedown:function(r){D4(this,"click")&&(this._mouseDownPoint=[r.offsetX,r.offsetY])},mouseup:function(r){var e=this._mouseDownPoint;if(D4(this,"click")&&e){var t=[r.offsetX,r.offsetY],n=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(n>DNe)return;var a=this._model.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]);a.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:a.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(r){if(!(this._mouseDownPoint||!D4(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([r.offsetX,r.offsetY]),n=t.behavior;n==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(n==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:n==="jump"?null:{duration:0}})}}};function D4(r,e){var t=r._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var LNe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var n=this.option;t&&qt(n,t,!0),this._initDimensions()},e.prototype.contains=function(t,n){var a=t.get("parallelIndex");return a!=null&&n.getComponent("parallel",a)===this},e.prototype.setAxisExpand=function(t){X(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(n){t.hasOwnProperty(n)&&(this.option[n]=t[n])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],n=this.parallelAxisIndex=[],a=Ur(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(i){return(i.get("parallelIndex")||0)===this.componentIndex},this);X(a,function(i){t.push("dim"+i.get("dim")),n.push(i.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(gr),PNe=function(r){Pe(e,r);function e(t,n,a,i,s){var o=r.call(this,t,n,a)||this;return o.type=i||"value",o.axisIndex=s,o}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e}(lc);function zp(r,e,t,n,a,i){r=r||0;var s=t[1]-t[0];if(a!=null&&(a=Fm(a,[0,s])),i!=null&&(i=Math.max(i,a??0)),n==="all"){var o=Math.abs(e[1]-e[0]);o=Fm(o,[0,s]),a=i=Fm(o,[a,i]),n=0}e[0]=Fm(e[0],t),e[1]=Fm(e[1],t);var l=M4(e,n);e[n]+=r;var c=a||0,u=t.slice();l.sign<0?u[0]+=c:u[1]-=c,e[n]=Fm(e[n],u);var h;return h=M4(e,n),a!=null&&(h.sign!==l.sign||h.span<a)&&(e[1-n]=e[n]+l.sign*a),h=M4(e,n),i!=null&&h.span>i&&(e[1-n]=e[n]+h.sign*i),e}function M4(r,e){var t=r[e]-r[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function Fm(r,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,r))}var R4=X,mae=Math.min,vae=Math.max,Lz=Math.floor,kNe=Math.ceil,Pz=aa,FNe=Math.PI,jNe=function(){function r(e,t,n){this.type="parallel",this._axesMap=bt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}return r.prototype._init=function(e,t,n){var a=e.dimensions,i=e.parallelAxisIndex;R4(a,function(s,o){var l=i[o],c=t.getComponent("parallelAxis",l),u=this._axesMap.set(s,new PNe(s,XN(c),[0,0],c.get("type"),l)),h=u.type==="category";u.onBand=h&&c.get("boundaryGap"),u.inverse=c.get("inverse"),c.axis=u,u.model=c,u.coordinateSystem=c.coordinateSystem=this},this)},r.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},r.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),n=t.axisBase,a=t.layoutBase,i=t.pixelDimIndex,s=e[1-i],o=e[i];return s>=n&&s<=n+t.axisLength&&o>=a&&o<=a+t.layoutLength},r.prototype.getModel=function(){return this._model},r.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(n){if(e.contains(n,t)){var a=n.getData();R4(this.dimensions,function(i){var s=this._axesMap.get(i);s.scale.unionExtentFromData(a,a.mapDimension(i)),N0(s.scale,s.model)},this)}},this)},r.prototype.resize=function(e,t){this._rect=Ua(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},r.prototype.getRect=function(){return this._rect},r.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,n=["x","y"],a=["width","height"],i=e.get("layout"),s=i==="horizontal"?0:1,o=t[a[s]],l=[0,o],c=this.dimensions.length,u=OS(e.get("axisExpandWidth"),l),h=OS(e.get("axisExpandCount")||0,[0,c]),d=e.get("axisExpandable")&&c>3&&c>h&&h>1&&u>0&&o>0,A=e.get("axisExpandWindow"),g;if(A)g=OS(A[1]-A[0],l),A[1]=A[0]+g;else{g=OS(u*(h-1),l);var p=e.get("axisExpandCenter")||Lz(c/2);A=[u*p-g/2],A[1]=A[0]+g}var v=(o-g)/(c-h);v<3&&(v=0);var m=[Lz(Pz(A[0]/u,1))+1,kNe(Pz(A[1]/u,1))-1],y=v/u*A[0];return{layout:i,pixelDimIndex:s,layoutBase:t[n[s]],layoutLength:o,axisBase:t[n[1-s]],axisLength:t[a[1-s]],axisExpandable:d,axisExpandWidth:u,axisCollapseWidth:v,axisExpandWindow:A,axisCount:c,winInnerIndices:m,axisExpandWindow0Pos:y}},r.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,n=this.dimensions,a=this._makeLayoutInfo(),i=a.layout;t.each(function(s){var o=[0,a.axisLength],l=s.inverse?1:0;s.setExtent(o[l],o[1-l])}),R4(n,function(s,o){var l=(a.axisExpandable?UNe:ONe)(o,a),c={horizontal:{x:l.position,y:a.axisLength},vertical:{x:0,y:l.position}},u={horizontal:FNe/2,vertical:0},h=[c[i].x+e.x,c[i].y+e.y],d=u[i],A=bo();kp(A,A,d),au(A,A,h),this._axesLayout[s]={position:h,rotation:d,transform:A,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},r.prototype.getAxis=function(e){return this._axesMap.get(e)},r.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},r.prototype.eachActiveState=function(e,t,n,a){n==null&&(n=0),a==null&&(a=e.count());var i=this._axesMap,s=this.dimensions,o=[],l=[];X(s,function(v){o.push(e.mapDimension(v)),l.push(i.get(v).model)});for(var c=this.hasAxisBrushed(),u=n;u<a;u++){var h=void 0;if(!c)h="normal";else{h="active";for(var d=e.getValues(o,u),A=0,g=s.length;A<g;A++){var p=l[A].getActiveState(d[A]);if(p==="inactive"){h="inactive";break}}}t(h,u)}},r.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,n=!1,a=0,i=e.length;a<i;a++)t.get(e[a]).model.getActiveState()!=="normal"&&(n=!0);return n},r.prototype.axisCoordToPoint=function(e,t){var n=this._axesLayout[t];return ec([e,0],n.transform)},r.prototype.getAxisLayout=function(e){return Ft(this._axesLayout[e])},r.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,a=t.axisExpandWindow.slice(),i=a[1]-a[0],s=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:a};var o=e[n]-t.layoutBase-t.axisExpandWindow0Pos,l,c="slide",u=t.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),d=h[0]!=null;if(u)d&&u&&o<i*h[0]?(c="jump",l=o-i*h[2]):d&&u&&o>i*(1-h[0])?(c="jump",l=o-i*(1-h[2])):(l=o-i*h[1])>=0&&(l=o-i*(1-h[1]))<=0&&(l=0),l*=t.axisExpandWidth/u,l?zp(l,a,s,"all"):c="none";else{var A=a[1]-a[0],g=s[1]*o/A;a=[vae(0,g-A/2)],a[1]=mae(s[1],a[0]+A),a[0]=a[1]-A}return{axisExpandWindow:a,behavior:c}},r}();function OS(r,e){return mae(vae(r,e[0]),e[1])}function ONe(r,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*r,axisNameAvailableWidth:t,axisLabelShow:!0}}function UNe(r,e){var t=e.layoutLength,n=e.axisExpandWidth,a=e.axisCount,i=e.axisCollapseWidth,s=e.winInnerIndices,o,l=i,c=!1,u;return r<s[0]?(o=r*i,u=i):r<=s[1]?(o=e.axisExpandWindow0Pos+r*n-e.axisExpandWindow[0],l=n,c=!0):(o=t-(a-1-r)*i,u=i),{position:o,axisNameAvailableWidth:l,axisLabelShow:c,nameTruncateMaxWidth:u}}function HNe(r,e){var t=[];return r.eachComponent("parallel",function(n,a){var i=new jNe(n,r,e);i.name="parallel_"+a,i.resize(n,e),n.coordinateSystem=i,i.model=n,t.push(i)}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="parallel"){var a=n.getReferringComponents("parallel",Na).models[0];n.coordinateSystem=a.coordinateSystem}}),t}var QNe={create:HNe},UR=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return yp([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var n=this.activeIntervals=Ft(t);if(n)for(var a=n.length-1;a>=0;a--)ll(n[a])},e.prototype.getActiveState=function(t){var n=this.activeIntervals;if(!n.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(n.length===1){var a=n[0];if(a[0]<=t&&t<=a[1])return"active"}else for(var i=0,s=n.length;i<s;i++)if(n[i][0]<=t&&t<=n[i][1])return"active";return"inactive"},e}(gr);Ia(UR,Pw);var wp=!0,Hb=Math.min,E0=Math.max,zNe=Math.pow,GNe=1e4,VNe=6,$Ne=6,kz="globalPan",KNe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},WNe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Fz={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},qNe=0,ZF=function(r){Pe(e,r);function e(t){var n=r.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new Ht,n._uid="brushController_"+qNe++,X(rTe,function(a,i){this._handlers[i]=ft(a,this)},n),n}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var n=this._zr;this._enableGlobalPan||O5e(n,kz,this._uid),X(this._handlers,function(a,i){n.on(i,a)}),this._brushType=t.brushType,this._brushOption=qt(Ft(Fz),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;U5e(t,kz,this._uid),X(this._handlers,function(n,a){t.off(a,n)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var n=this._panels={};X(t,function(a){n[a.panelId]=Ft(a)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=n.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=We(t,function(d){return qt(Ft(Fz),d,!0)});var n="\0-brush-index-",a=this._covers,i=this._covers=[],s=this,o=this._creatingCover;return new Nh(a,t,c,l).add(u).update(u).remove(h).execute(),this;function l(d,A){return(d.id!=null?d.id:n+A)+"-"+d.brushType}function c(d,A){return l(d.__brushOption,A)}function u(d,A){var g=t[d];if(A!=null&&a[A]===o)i[d]=a[A];else{var p=i[d]=A!=null?(a[A].__brushOption=g,a[A]):xae(s,yae(s,g));JF(s,p)}}function h(d){a[d]!==o&&s.group.remove(a[d])}},e.prototype.unmount=function(){return this.enableBrush(!1),HR(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(vl);function yae(r,e){var t=nT[e.brushType].createCover(r,e);return t.__brushOption=e,wae(t,e),r.group.add(t),t}function xae(r,e){var t=ej(e);return t.endCreating&&(t.endCreating(r,e),wae(e,e.__brushOption)),e}function bae(r,e){var t=e.__brushOption;ej(e).updateCoverShape(r,e,t.range,t)}function wae(r,e){var t=e.z;t==null&&(t=GNe),r.traverse(function(n){n.z=t,n.z2=t})}function JF(r,e){ej(e).updateCommon(r,e),bae(r,e)}function ej(r){return nT[r.__brushOption.brushType]}function tj(r,e,t){var n=r._panels;if(!n)return wp;var a,i=r._transform;return X(n,function(s){s.isTargetByCursor(e,t,i)&&(a=s)}),a}function Sae(r,e){var t=r._panels;if(!t)return wp;var n=e.__brushOption.panelId;return n!=null?t[n]:wp}function HR(r){var e=r._covers,t=e.length;return X(e,function(n){r.group.remove(n)},r),e.length=0,!!t}function Sp(r,e){var t=We(r._covers,function(n){var a=n.__brushOption,i=Ft(a.range);return{brushType:a.brushType,panelId:a.panelId,range:i}});r.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function YNe(r){var e=r._track;if(!e.length)return!1;var t=e[e.length-1],n=e[0],a=t[0]-n[0],i=t[1]-n[1],s=zNe(a*a+i*i,.5);return s>VNe}function _ae(r){var e=r.length-1;return e<0&&(e=0),[r[0],r[e]]}function Cae(r,e,t,n){var a=new Ht;return a.add(new br({name:"main",style:rj(t),silent:!0,draggable:!0,cursor:"move",drift:Wt(jz,r,e,a,["n","s","w","e"]),ondragend:Wt(Sp,e,{isEnd:!0})})),X(n,function(i){a.add(new br({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Wt(jz,r,e,a,i),ondragend:Wt(Sp,e,{isEnd:!0})}))}),a}function Bae(r,e,t,n){var a=n.brushStyle.lineWidth||0,i=E0(a,$Ne),s=t[0][0],o=t[1][0],l=s-a/2,c=o-a/2,u=t[0][1],h=t[1][1],d=u-i+a/2,A=h-i+a/2,g=u-s,p=h-o,v=g+a,m=p+a;Uu(r,e,"main",s,o,g,p),n.transformable&&(Uu(r,e,"w",l,c,i,m),Uu(r,e,"e",d,c,i,m),Uu(r,e,"n",l,c,v,i),Uu(r,e,"s",l,A,v,i),Uu(r,e,"nw",l,c,i,i),Uu(r,e,"ne",d,c,i,i),Uu(r,e,"sw",l,A,i,i),Uu(r,e,"se",d,A,i,i))}function QR(r,e){var t=e.__brushOption,n=t.transformable,a=e.childAt(0);a.useStyle(rj(t)),a.attr({silent:!n,cursor:n?"move":"default"}),X([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var s=e.childOfName(i.join("")),o=i.length===1?zR(r,i[0]):ZNe(r,i);s&&s.attr({silent:!n,invisible:!n,cursor:n?WNe[o]+"-resize":null})})}function Uu(r,e,t,n,a,i,s){var o=e.childOfName(t);o&&o.setShape(eTe(nj(r,e,[[n,a],[n+i,a+s]])))}function rj(r){return Lt({strokeNoScale:!0},r.brushStyle)}function Nae(r,e,t,n){var a=[Hb(r,t),Hb(e,n)],i=[E0(r,t),E0(e,n)];return[[a[0],i[0]],[a[1],i[1]]]}function XNe(r){return tp(r.group)}function zR(r,e){var t={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},a=PN(t[e],XNe(r));return n[a]}function ZNe(r,e){var t=[zR(r,e[0]),zR(r,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function jz(r,e,t,n,a,i){var s=t.__brushOption,o=r.toRectRange(s.range),l=Tae(e,a,i);X(n,function(c){var u=KNe[c];o[u[0]][u[1]]+=l[u[0]]}),s.range=r.fromRectRange(Nae(o[0][0],o[1][0],o[0][1],o[1][1])),JF(e,t),Sp(e,{isEnd:!1})}function JNe(r,e,t,n){var a=e.__brushOption.range,i=Tae(r,t,n);X(a,function(s){s[0]+=i[0],s[1]+=i[1]}),JF(r,e),Sp(r,{isEnd:!1})}function Tae(r,e,t){var n=r.group,a=n.transformCoordToLocal(e,t),i=n.transformCoordToLocal(0,0);return[a[0]-i[0],a[1]-i[1]]}function nj(r,e,t){var n=Sae(r,e);return n&&n!==wp?n.clipPath(t,r._transform):Ft(t)}function eTe(r){var e=Hb(r[0][0],r[1][0]),t=Hb(r[0][1],r[1][1]),n=E0(r[0][0],r[1][0]),a=E0(r[0][1],r[1][1]);return{x:e,y:t,width:n-e,height:a-t}}function tTe(r,e,t){if(!(!r._brushType||nTe(r,e.offsetX,e.offsetY))){var n=r._zr,a=r._covers,i=tj(r,e,t);if(!r._dragging)for(var s=0;s<a.length;s++){var o=a[s].__brushOption;if(i&&(i===wp||o.panelId===i.panelId)&&nT[o.brushType].contain(a[s],t[0],t[1]))return}i&&n.setCursorStyle("crosshair")}}function GR(r){var e=r.event;e.preventDefault&&e.preventDefault()}function VR(r,e,t){return r.childOfName("main").contain(e,t)}function Iae(r,e,t,n){var a=r._creatingCover,i=r._creatingPanel,s=r._brushOption,o;if(r._track.push(t.slice()),YNe(r)||a){if(i&&!a){s.brushMode==="single"&&HR(r);var l=Ft(s);l.brushType=Oz(l.brushType,i),l.panelId=i===wp?null:i.panelId,a=r._creatingCover=yae(r,l),r._covers.push(a)}if(a){var c=nT[Oz(r._brushType,i)],u=a.__brushOption;u.range=c.getCreatingRange(nj(r,a,r._track)),n&&(xae(r,a),c.updateCommon(r,a)),bae(r,a),o={isEnd:n}}}else n&&s.brushMode==="single"&&s.removeOnClick&&tj(r,e,t)&&HR(r)&&(o={isEnd:n,removeOnClick:!0});return o}function Oz(r,e){return r==="auto"?e.defaultBrushType:r}var rTe={mousedown:function(r){if(this._dragging)Uz(this,r);else if(!r.target||!r.target.draggable){GR(r);var e=this.group.transformCoordToLocal(r.offsetX,r.offsetY);this._creatingCover=null;var t=this._creatingPanel=tj(this,r,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(r){var e=r.offsetX,t=r.offsetY,n=this.group.transformCoordToLocal(e,t);if(tTe(this,r,n),this._dragging){GR(r);var a=Iae(this,r,n,!1);a&&Sp(this,a)}},mouseup:function(r){Uz(this,r)}};function Uz(r,e){if(r._dragging){GR(e);var t=e.offsetX,n=e.offsetY,a=r.group.transformCoordToLocal(t,n),i=Iae(r,e,a,!0);r._dragging=!1,r._track=[],r._creatingCover=null,i&&Sp(r,i)}}function nTe(r,e,t){var n=r._zr;return e<0||e>n.getWidth()||t<0||t>n.getHeight()}var nT={lineX:Hz(0),lineY:Hz(1),rect:{createCover:function(r,e){function t(n){return n}return Cae({toRectRange:t,fromRectRange:t},r,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(r){var e=_ae(r);return Nae(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(r,e,t,n){Bae(r,e,t,n)},updateCommon:QR,contain:VR},polygon:{createCover:function(r,e){var t=new Ht;return t.add(new ws({name:"main",style:rj(e),silent:!0})),t},getCreatingRange:function(r){return r},endCreating:function(r,e){e.remove(e.childAt(0)),e.add(new vs({name:"main",draggable:!0,drift:Wt(JNe,r,e),ondragend:Wt(Sp,r,{isEnd:!0})}))},updateCoverShape:function(r,e,t,n){e.childAt(0).setShape({points:nj(r,e,t)})},updateCommon:QR,contain:VR}};function Hz(r){return{createCover:function(e,t){return Cae({toRectRange:function(n){var a=[n,[0,100]];return r&&a.reverse(),a},fromRectRange:function(n){return n[r]}},e,t,[[["w"],["e"]],[["n"],["s"]]][r])},getCreatingRange:function(e){var t=_ae(e),n=Hb(t[0][r],t[1][r]),a=E0(t[0][r],t[1][r]);return[n,a]},updateCoverShape:function(e,t,n,a){var i,s=Sae(e,t);if(s!==wp&&s.getLinearBrushOtherExtent)i=s.getLinearBrushOtherExtent(r);else{var o=e._zr;i=[0,[o.getWidth(),o.getHeight()][1-r]]}var l=[n,i];r&&l.reverse(),Bae(e,t,l,a)},updateCommon:QR,contain:VR}}function Eae(r){return r=aj(r),function(e){return Uee(e,r)}}function Dae(r,e){return r=aj(r),function(t){var n=e??t,a=n?r.width:r.height,i=n?r.x:r.y;return[i,i+(a||0)]}}function Mae(r,e,t){var n=aj(r);return function(a,i){return n.contain(i[0],i[1])&&!JN(a,e,t)}}function aj(r){return Zt.create(r)}var aTe=["axisLine","axisTickLabel","axisName"],iTe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){r.prototype.init.apply(this,arguments),(this._brushController=new ZF(n.getZr())).on("brush",ft(this._onBrush,this))},e.prototype.render=function(t,n,a,i){if(!sTe(t,n,i)){this.axisModel=t,this.api=a,this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new Ht,this.group.add(this._axisGroup),!!t.get("show")){var o=lTe(t,n),l=o.coordinateSystem,c=t.getAreaSelectStyle(),u=c.width,h=t.axis.dim,d=l.getAxisLayout(h),A=He({strokeContainThreshold:u},d),g=new fs(t,A);X(aTe,g.add,g),this._axisGroup.add(g.getGroup()),this._refreshBrushController(A,c,t,o,u,a),Ew(s,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,n,a,i,s,o){var l=a.axis.getExtent(),c=l[1]-l[0],u=Math.min(30,Math.abs(c)*.1),h=Zt.create({x:l[0],y:-s/2,width:c,height:s});h.x-=u,h.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:Eae(h),isTargetByCursor:Mae(h,o,i),getLinearBrushOtherExtent:Dae(h,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(oTe(a))},e.prototype._onBrush=function(t){var n=t.areas,a=this.axisModel,i=a.axis,s=We(n,function(o){return[i.coordToData(o.range[0],!0),i.coordToData(o.range[1],!0)]});(!a.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:a.id,intervals:s})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Gn);function sTe(r,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===r}function oTe(r){var e=r.axis;return We(r.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function lTe(r,e){return e.getComponent("parallel",r.get("parallelIndex"))}var cTe={type:"axisAreaSelect",event:"axisAreaSelected"};function uTe(r){r.registerAction(cTe,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(n){n.axis.model.setActiveIntervals(e.intervals)})}),r.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(n){n.setAxisExpand(e)})})}var hTe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Rae(r){r.registerComponentView(MNe),r.registerComponentModel(LNe),r.registerCoordinateSystem("parallel",QNe),r.registerPreprocessor(TNe),r.registerComponentModel(UR),r.registerComponentView(iTe),I0(r,"parallel",UR,hTe),uTe(r)}function dTe(r){sr(Rae),r.registerChartView(xNe),r.registerSeriesModel(SNe),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,NNe)}var ATe=function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return r}(),fTe=function(r){Pe(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new ATe},e.prototype.buildPath=function(t,n){var a=n.extent;t.moveTo(n.x1,n.y1),t.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(t.lineTo(n.x2+a,n.y2),t.bezierCurveTo(n.cpx2+a,n.cpy2,n.cpx1+a,n.cpy1,n.x1+a,n.y1)):(t.lineTo(n.x2,n.y2+a),t.bezierCurveTo(n.cpx2,n.cpy2+a,n.cpx1,n.cpy1+a,n.x1,n.y1+a)),t.closePath()},e.prototype.highlight=function(){Ch(this)},e.prototype.downplay=function(){Bh(this)},e}(hr),gTe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._focusAdjacencyDisabled=!1,t}return e.prototype.render=function(t,n,a){var i=this,s=t.getGraph(),o=this.group,l=t.layoutInfo,c=l.width,u=l.height,h=t.getData(),d=t.getData("edge"),A=t.get("orient");this._model=t,o.removeAll(),o.x=l.x,o.y=l.y,s.eachEdge(function(g){var p=new fTe,v=Qt(p);v.dataIndex=g.dataIndex,v.seriesIndex=t.seriesIndex,v.dataType="edge";var m=g.getModel(),y=m.getModel("lineStyle"),x=y.get("curveness"),b=g.node1.getLayout(),S=g.node1.getModel(),_=S.get("localX"),C=S.get("localY"),w=g.node2.getLayout(),B=g.node2.getModel(),D=B.get("localX"),T=B.get("localY"),E=g.getLayout(),R,M,k,O,Q,H,W,te;p.shape.extent=Math.max(1,E.dy),p.shape.orient=A,A==="vertical"?(R=(_!=null?_*c:b.x)+E.sy,M=(C!=null?C*u:b.y)+b.dy,k=(D!=null?D*c:w.x)+E.ty,O=T!=null?T*u:w.y,Q=R,H=M*(1-x)+O*x,W=k,te=M*x+O*(1-x)):(R=(_!=null?_*c:b.x)+b.dx,M=(C!=null?C*u:b.y)+E.sy,k=D!=null?D*c:w.x,O=(T!=null?T*u:w.y)+E.ty,Q=R*(1-x)+k*x,H=M,W=R*x+k*(1-x),te=O),p.setShape({x1:R,y1:M,x2:k,y2:O,cpx1:Q,cpy1:H,cpx2:W,cpy2:te}),p.useStyle(y.getItemStyle()),Qz(p.style,A,g);var ee=""+m.get("value"),j=ei(m,"edgeLabel");Ni(p,j,{labelFetcher:{getFormattedLabel:function(Z,de,he,fe,q,ge){return t.getFormattedLabel(Z,de,"edge",fe,Zc(q,j.normal&&j.normal.get("formatter"),ee),ge)}},labelDataIndex:g.dataIndex,defaultText:ee}),p.setTextConfig({position:"inside"});var G=m.getModel("emphasis");Bi(p,m,"lineStyle",function(Z){var de=Z.getItemStyle();return Qz(de,A,g),de}),o.add(p),d.setItemGraphicEl(g.dataIndex,p);var Y=G.get("focus");qn(p,Y==="adjacency"?g.getAdjacentDataIndices():Y==="trajectory"?g.getTrajectoryDataIndices():Y,G.get("blurScope"),G.get("disabled"))}),s.eachNode(function(g){var p=g.getLayout(),v=g.getModel(),m=v.get("localX"),y=v.get("localY"),x=v.getModel("emphasis"),b=v.get(["itemStyle","borderRadius"])||0,S=new br({shape:{x:m!=null?m*c:p.x,y:y!=null?y*u:p.y,width:p.dx,height:p.dy,r:b},style:v.getModel("itemStyle").getItemStyle(),z2:10});Ni(S,ei(v),{labelFetcher:{getFormattedLabel:function(C,w){return t.getFormattedLabel(C,w,"node")}},labelDataIndex:g.dataIndex,defaultText:g.id}),S.disableLabelAnimation=!0,S.setStyle("fill",g.getVisual("color")),S.setStyle("decal",g.getVisual("style").decal),Bi(S,v),o.add(S),h.setItemGraphicEl(g.dataIndex,S),Qt(S).dataType="node";var _=x.get("focus");qn(S,_==="adjacency"?g.getAdjacentDataIndices():_==="trajectory"?g.getTrajectoryDataIndices():_,x.get("blurScope"),x.get("disabled"))}),h.eachItemGraphicEl(function(g,p){var v=h.getItemModel(p);v.get("draggable")&&(g.drift=function(m,y){i._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=y,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:h.getRawIndex(p),localX:this.shape.x/c,localY:this.shape.y/u})},g.ondragend=function(){i._focusAdjacencyDisabled=!1},g.draggable=!0,g.cursor="move")}),!this._data&&t.isAnimationEnabled()&&o.setClipPath(pTe(o.getBoundingRect(),t,function(){o.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(nn);function Qz(r,e,t){switch(r.fill){case"source":r.fill=t.node1.getVisual("color"),r.decal=t.node1.getVisual("style").decal;break;case"target":r.fill=t.node2.getVisual("color"),r.decal=t.node2.getVisual("style").decal;break;case"gradient":var n=t.node1.getVisual("color"),a=t.node2.getVisual("color");dt(n)&&dt(a)&&(r.fill=new Iw(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:n,offset:0},{color:a,offset:1}]))}}function pTe(r,e,t){var n=new br({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return jn(n,{shape:{width:r.width+20}},e,t),n}var mTe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,n){var a=t.edges||t.links||[],i=t.data||t.nodes||[],s=t.levels||[];this.levelModels=[];for(var o=this.levelModels,l=0;l<s.length;l++)s[l].depth!=null&&s[l].depth>=0&&(o[s[l].depth]=new Qr(s[l],this,n));var c=gae(i,a,this,!0,u);return c.data;function u(h,d){h.wrapMethod("getItemModel",function(A,g){var p=A.parentModel,v=p.getData().getItemLayout(g);if(v){var m=v.depth,y=p.levelModels[m];y&&(A.parentModel=y)}return A}),d.wrapMethod("getItemModel",function(A,g){var p=A.parentModel,v=p.getGraph().getEdgeByIndex(g),m=v.node1.getLayout();if(m){var y=m.depth,x=p.levelModels[y];x&&(A.parentModel=x)}return A})}},e.prototype.setNodePosition=function(t,n){var a=this.option.data||this.option.nodes,i=a[t];i.localX=n[0],i.localY=n[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,n,a){function i(A){return isNaN(A)||A==null}if(a==="edge"){var s=this.getDataParams(t,a),o=s.data,l=s.value,c=o.source+" -- "+o.target;return ti("nameValue",{name:c,value:l,noValue:i(l)})}else{var u=this.getGraph().getNodeByIndex(t),h=u.getLayout().value,d=this.getDataParams(t,a).data.name;return ti("nameValue",{name:d!=null?d+"":null,value:h,noValue:i(h)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,n){var a=r.prototype.getDataParams.call(this,t,n);if(a.value==null&&n==="node"){var i=this.getGraph().getNodeByIndex(t),s=i.getLayout().value;a.value=s}return a},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Sn);function vTe(r,e){r.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),a=t.get("nodeGap"),i=yTe(t,e);t.layoutInfo=i;var s=i.width,o=i.height,l=t.getGraph(),c=l.nodes,u=l.edges;bTe(c);var h=Ur(c,function(p){return p.getLayout().value===0}),d=h.length!==0?0:t.get("layoutIterations"),A=t.get("orient"),g=t.get("nodeAlign");xTe(c,u,n,a,s,o,d,A,g)})}function yTe(r,e){return Ua(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function xTe(r,e,t,n,a,i,s,o,l){wTe(r,e,t,a,i,o,l),BTe(r,e,i,a,n,s,o),PTe(r,o)}function bTe(r){X(r,function(e){var t=EA(e.outEdges,GC),n=EA(e.inEdges,GC),a=e.getValue()||0,i=Math.max(t,n,a);e.setLayout({value:i},!0)})}function wTe(r,e,t,n,a,i,s){for(var o=[],l=[],c=[],u=[],h=0,d=0;d<e.length;d++)o[d]=1;for(var d=0;d<r.length;d++)l[d]=r[d].inEdges.length,l[d]===0&&c.push(r[d]);for(var A=-1;c.length;){for(var g=0;g<c.length;g++){var p=c[g],v=p.hostGraph.data.getRawDataItem(p.dataIndex),m=v.depth!=null&&v.depth>=0;m&&v.depth>A&&(A=v.depth),p.setLayout({depth:m?v.depth:h},!0),i==="vertical"?p.setLayout({dy:t},!0):p.setLayout({dx:t},!0);for(var y=0;y<p.outEdges.length;y++){var x=p.outEdges[y],b=e.indexOf(x);o[b]=0;var S=x.node2,_=r.indexOf(S);--l[_]===0&&u.indexOf(S)<0&&u.push(S)}}++h,c=u,u=[]}for(var d=0;d<o.length;d++)if(o[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var C=A>h-1?A:h-1;s&&s!=="left"&&STe(r,s,i,C);var w=i==="vertical"?(a-t)/C:(n-t)/C;CTe(r,w,i)}function Lae(r){var e=r.hostGraph.data.getRawDataItem(r.dataIndex);return e.depth!=null&&e.depth>=0}function STe(r,e,t,n){if(e==="right"){for(var a=[],i=r,s=0;i.length;){for(var o=0;o<i.length;o++){var l=i[o];l.setLayout({skNodeHeight:s},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];a.indexOf(u.node1)<0&&a.push(u.node1)}}i=a,a=[],++s}X(r,function(h){Lae(h)||h.setLayout({depth:Math.max(0,n-h.getLayout().skNodeHeight)},!0)})}else e==="justify"&&_Te(r,n)}function _Te(r,e){X(r,function(t){!Lae(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function CTe(r,e,t){X(r,function(n){var a=n.getLayout().depth*e;t==="vertical"?n.setLayout({y:a},!0):n.setLayout({x:a},!0)})}function BTe(r,e,t,n,a,i,s){var o=NTe(r,s);TTe(o,e,t,n,a,s),L4(o,a,t,n,s);for(var l=1;i>0;i--)l*=.99,ITe(o,l,s),L4(o,a,t,n,s),LTe(o,l,s),L4(o,a,t,n,s)}function NTe(r,e){var t=[],n=e==="vertical"?"y":"x",a=$3(r,function(i){return i.getLayout()[n]});return a.keys.sort(function(i,s){return i-s}),X(a.keys,function(i){t.push(a.buckets.get(i))}),t}function TTe(r,e,t,n,a,i){var s=1/0;X(r,function(o){var l=o.length,c=0;X(o,function(h){c+=h.getLayout().value});var u=i==="vertical"?(n-(l-1)*a)/c:(t-(l-1)*a)/c;u<s&&(s=u)}),X(r,function(o){X(o,function(l,c){var u=l.getLayout().value*s;i==="vertical"?(l.setLayout({x:c},!0),l.setLayout({dx:u},!0)):(l.setLayout({y:c},!0),l.setLayout({dy:u},!0))})}),X(e,function(o){var l=+o.getValue()*s;o.setLayout({dy:l},!0)})}function L4(r,e,t,n,a){var i=a==="vertical"?"x":"y";X(r,function(s){s.sort(function(p,v){return p.getLayout()[i]-v.getLayout()[i]});for(var o,l,c,u=0,h=s.length,d=a==="vertical"?"dx":"dy",A=0;A<h;A++)l=s[A],c=u-l.getLayout()[i],c>0&&(o=l.getLayout()[i]+c,a==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0)),u=l.getLayout()[i]+l.getLayout()[d]+e;var g=a==="vertical"?n:t;if(c=u-e-g,c>0){o=l.getLayout()[i]-c,a==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0),u=o;for(var A=h-2;A>=0;--A)l=s[A],c=l.getLayout()[i]+l.getLayout()[d]+e-u,c>0&&(o=l.getLayout()[i]-c,a==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0)),u=l.getLayout()[i]}})}function ITe(r,e,t){X(r.slice().reverse(),function(n){X(n,function(a){if(a.outEdges.length){var i=EA(a.outEdges,ETe,t)/EA(a.outEdges,GC);if(isNaN(i)){var s=a.outEdges.length;i=s?EA(a.outEdges,DTe,t)/s:0}if(t==="vertical"){var o=a.getLayout().x+(i-VA(a,t))*e;a.setLayout({x:o},!0)}else{var l=a.getLayout().y+(i-VA(a,t))*e;a.setLayout({y:l},!0)}}})})}function ETe(r,e){return VA(r.node2,e)*r.getValue()}function DTe(r,e){return VA(r.node2,e)}function MTe(r,e){return VA(r.node1,e)*r.getValue()}function RTe(r,e){return VA(r.node1,e)}function VA(r,e){return e==="vertical"?r.getLayout().x+r.getLayout().dx/2:r.getLayout().y+r.getLayout().dy/2}function GC(r){return r.getValue()}function EA(r,e,t){for(var n=0,a=r.length,i=-1;++i<a;){var s=+e(r[i],t);isNaN(s)||(n+=s)}return n}function LTe(r,e,t){X(r,function(n){X(n,function(a){if(a.inEdges.length){var i=EA(a.inEdges,MTe,t)/EA(a.inEdges,GC);if(isNaN(i)){var s=a.inEdges.length;i=s?EA(a.inEdges,RTe,t)/s:0}if(t==="vertical"){var o=a.getLayout().x+(i-VA(a,t))*e;a.setLayout({x:o},!0)}else{var l=a.getLayout().y+(i-VA(a,t))*e;a.setLayout({y:l},!0)}}})})}function PTe(r,e){var t=e==="vertical"?"x":"y";X(r,function(n){n.outEdges.sort(function(a,i){return a.node2.getLayout()[t]-i.node2.getLayout()[t]}),n.inEdges.sort(function(a,i){return a.node1.getLayout()[t]-i.node1.getLayout()[t]})}),X(r,function(n){var a=0,i=0;X(n.outEdges,function(s){s.setLayout({sy:a},!0),a+=s.getLayout().dy}),X(n.inEdges,function(s){s.setLayout({ty:i},!0),i+=s.getLayout().dy})})}function kTe(r){r.eachSeriesByType("sankey",function(e){var t=e.getGraph(),n=t.nodes,a=t.edges;if(n.length){var i=1/0,s=-1/0;X(n,function(o){var l=o.getLayout().value;l<i&&(i=l),l>s&&(s=l)}),X(n,function(o){var l=new Za({type:"color",mappingMethod:"linear",dataExtent:[i,s],visual:e.get("color")}),c=l.mapValueToVisual(o.getLayout().value),u=o.getModel().get(["itemStyle","color"]);u!=null?(o.setVisual("color",u),o.setVisual("style",{fill:u})):(o.setVisual("color",c),o.setVisual("style",{fill:c}))})}a.length&&X(a,function(o){var l=o.getModel().get("lineStyle");o.setVisual("style",l)})})}function FTe(r){r.registerChartView(gTe),r.registerSeriesModel(mTe),r.registerLayout(vTe),r.registerVisual(kTe),r.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){n.setNodePosition(e.dataIndex,[e.localX,e.localY])})})}var Pae=function(){function r(){}return r.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},r.prototype.getInitialData=function(e,t){var n,a=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),s=a.get("type"),o=i.get("type"),l;s==="category"?(e.layout="horizontal",n=a.getOrdinalMeta(),l=!this._hasEncodeRule("x")):o==="category"?(e.layout="vertical",n=i.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var c=["x","y"],u=e.layout==="horizontal"?0:1,h=this._baseAxisDim=c[u],d=c[1-u],A=[a,i],g=A[u].get("type"),p=A[1-u].get("type"),v=e.data;if(v&&l){var m=[];X(v,function(b,S){var _;$e(b)?(_=b.slice(),b.unshift(S)):$e(b.value)?(_=He({},b),_.value=_.value.slice(),b.value.unshift(S)):_=b,m.push(_)}),e.data=m}var y=this.defaultValueDimensions,x=[{name:h,type:RC(g),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:RC(p),dimsDef:y.slice()}];return fy(this,{coordDimensions:x,dimensionsCount:y.length+1,encodeDefaulter:Wt(dte,x,this)})},r.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},r}(),kae=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Sn);Ia(kae,Pae,!0);var jTe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=t.getData(),s=this.group,o=this._data;this._data||s.removeAll();var l=t.get("layout")==="horizontal"?1:0;i.diff(o).add(function(c){if(i.hasValue(c)){var u=i.getItemLayout(c),h=zz(u,i,c,l,!0);i.setItemGraphicEl(c,h),s.add(h)}}).update(function(c,u){var h=o.getItemGraphicEl(u);if(!i.hasValue(c)){s.remove(h);return}var d=i.getItemLayout(c);h?(nc(h),Fae(d,h,i,c)):h=zz(d,i,c,l),s.add(h),i.setItemGraphicEl(c,h)}).remove(function(c){var u=o.getItemGraphicEl(c);u&&s.remove(u)}).execute(),this._data=i},e.prototype.remove=function(t){var n=this.group,a=this._data;this._data=null,a&&a.eachItemGraphicEl(function(i){i&&n.remove(i)})},e.type="boxplot",e}(nn),OTe=function(){function r(){}return r}(),UTe=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="boxplotBoxPath",n}return e.prototype.getDefaultShape=function(){return new OTe},e.prototype.buildPath=function(t,n){var a=n.points,i=0;for(t.moveTo(a[i][0],a[i][1]),i++;i<4;i++)t.lineTo(a[i][0],a[i][1]);for(t.closePath();i<a.length;i++)t.moveTo(a[i][0],a[i][1]),i++,t.lineTo(a[i][0],a[i][1])},e}(hr);function zz(r,e,t,n,a){var i=r.ends,s=new UTe({shape:{points:a?HTe(i,n,r):i}});return Fae(r,s,e,t,a),s}function Fae(r,e,t,n,a){var i=t.hostModel,s=jp[a?"initProps":"updateProps"];s(e,{shape:{points:r.ends}},i,n),e.useStyle(t.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.z2=100;var o=t.getItemModel(n),l=o.getModel("emphasis");Bi(e,o),qn(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function HTe(r,e,t){return We(r,function(n){return n=n.slice(),n[e]=t.initBaseline,n})}var k1=X;function QTe(r){var e=zTe(r);k1(e,function(t){var n=t.seriesModels;n.length&&(GTe(t),k1(n,function(a,i){VTe(a,t.boxOffsetList[i],t.boxWidthList[i])}))})}function zTe(r){var e=[],t=[];return r.eachSeriesByType("boxplot",function(n){var a=n.getBaseAxis(),i=rr(t,a);i<0&&(i=t.length,t[i]=a,e[i]={axis:a,seriesModels:[]}),e[i].seriesModels.push(n)}),e}function GTe(r){var e=r.axis,t=r.seriesModels,n=t.length,a=r.boxWidthList=[],i=r.boxOffsetList=[],s=[],o;if(e.type==="category")o=e.getBandWidth();else{var l=0;k1(t,function(g){l=Math.max(l,g.getData().count())});var c=e.getExtent();o=Math.abs(c[1]-c[0])/l}k1(t,function(g){var p=g.get("boxWidth");$e(p)||(p=[p,p]),s.push([ot(p[0],o)||0,ot(p[1],o)||0])});var u=o*.8-2,h=u/n*.3,d=(u-h*(n-1))/n,A=d/2-u/2;k1(t,function(g,p){i.push(A),A+=h+d,a.push(Math.min(Math.max(d,s[p][0]),s[p][1]))})}function VTe(r,e,t){var n=r.coordinateSystem,a=r.getData(),i=t/2,s=r.get("layout")==="horizontal"?0:1,o=1-s,l=["x","y"],c=a.mapDimension(l[s]),u=a.mapDimensionsAll(l[o]);if(c==null||u.length<5)return;for(var h=0;h<a.count();h++){var d=a.get(c,h),A=x(d,u[2],h),g=x(d,u[0],h),p=x(d,u[1],h),v=x(d,u[3],h),m=x(d,u[4],h),y=[];b(y,p,!1),b(y,v,!0),y.push(g,p,m,v),S(y,g),S(y,m),S(y,A),a.setItemLayout(h,{initBaseline:A[o],ends:y})}function x(_,C,w){var B=a.get(C,w),D=[];D[s]=_,D[o]=B;var T;return isNaN(_)||isNaN(B)?T=[NaN,NaN]:(T=n.dataToPoint(D),T[s]+=e),T}function b(_,C,w){var B=C.slice(),D=C.slice();B[s]+=i,D[s]-=i,w?_.push(B,D):_.push(D,B)}function S(_,C){var w=C.slice(),B=C.slice();w[s]-=i,B[s]+=i,_.push(w,B)}}function $Te(r,e){e=e||{};for(var t=[],n=[],a=e.boundIQR,i=a==="none"||a===0,s=0;s<r.length;s++){var o=ll(r[s].slice()),l=cE(o,.25),c=cE(o,.5),u=cE(o,.75),h=o[0],d=o[o.length-1],A=(a??1.5)*(u-l),g=i?h:Math.max(h,l-A),p=i?d:Math.min(d,u+A),v=e.itemNameFormatter,m=It(v)?v({value:s}):dt(v)?v.replace("{value}",s+""):s+"";t.push([m,g,l,c,u,p]);for(var y=0;y<o.length;y++){var x=o[y];if(x<g||x>p){var b=[m,x];n.push(b)}}}return{boxData:t,outliers:n}}var KTe={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Wi){var n="";Or(n)}var a=$Te(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:a.boxData},{data:a.outliers}]}};function WTe(r){r.registerSeriesModel(kae),r.registerChartView(jTe),r.registerLayout(QTe),r.registerTransform(KTe)}var qTe=["itemStyle","borderColor"],YTe=["itemStyle","borderColor0"],XTe=["itemStyle","borderColorDoji"],ZTe=["itemStyle","color"],JTe=["itemStyle","color0"];function ij(r,e){return e.get(r>0?ZTe:JTe)}function sj(r,e){return e.get(r===0?XTe:r>0?qTe:YTe)}var eIe={seriesType:"candlestick",plan:cy(),performRawSeries:!0,reset:function(r,e){if(!e.isSeriesFiltered(r)){var t=r.pipelineContext.large;return!t&&{progress:function(n,a){for(var i;(i=n.next())!=null;){var s=a.getItemModel(i),o=a.getItemLayout(i).sign,l=s.getItemStyle();l.fill=ij(o,s),l.stroke=sj(o,s)||l.fill;var c=a.ensureUniqueItemVisual(i,"style");He(c,l)}}}}}},tIe=["color","borderColor"],rIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,n,a){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,n,a,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,n):this._incrementalRenderNormal(t,n)},e.prototype.eachRendered=function(t){nf(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var n=t.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},e.prototype._renderNormal=function(t){var n=t.getData(),a=this._data,i=this.group,s=n.getLayout("isSimpleBox"),o=t.get("clip",!0),l=t.coordinateSystem,c=l.getArea&&l.getArea();this._data||i.removeAll(),n.diff(a).add(function(u){if(n.hasValue(u)){var h=n.getItemLayout(u);if(o&&Gz(c,h))return;var d=P4(h,u,!0);jn(d,{shape:{points:h.ends}},t,u),k4(d,n,u,s),i.add(d),n.setItemGraphicEl(u,d)}}).update(function(u,h){var d=a.getItemGraphicEl(h);if(!n.hasValue(u)){i.remove(d);return}var A=n.getItemLayout(u);if(o&&Gz(c,A)){i.remove(d);return}d?(Er(d,{shape:{points:A.ends}},t,u),nc(d)):d=P4(A),k4(d,n,u,s),i.add(d),n.setItemGraphicEl(u,d)}).remove(function(u){var h=a.getItemGraphicEl(u);h&&i.remove(h)}).execute(),this._data=n},e.prototype._renderLarge=function(t){this._clear(),Vz(t,this.group);var n=t.get("clip",!0)?jw(t.coordinateSystem,!1,t):null;n?this.group.setClipPath(n):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,n){for(var a=n.getData(),i=a.getLayout("isSimpleBox"),s;(s=t.next())!=null;){var o=a.getItemLayout(s),l=P4(o);k4(l,a,s,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,n){Vz(n,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(nn),nIe=function(){function r(){}return r}(),aIe=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="normalCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new nIe},e.prototype.buildPath=function(t,n){var a=n.points;this.__simpleBox?(t.moveTo(a[4][0],a[4][1]),t.lineTo(a[6][0],a[6][1])):(t.moveTo(a[0][0],a[0][1]),t.lineTo(a[1][0],a[1][1]),t.lineTo(a[2][0],a[2][1]),t.lineTo(a[3][0],a[3][1]),t.closePath(),t.moveTo(a[4][0],a[4][1]),t.lineTo(a[5][0],a[5][1]),t.moveTo(a[6][0],a[6][1]),t.lineTo(a[7][0],a[7][1]))},e}(hr);function P4(r,e,t){var n=r.ends;return new aIe({shape:{points:t?iIe(n,r):n},z2:100})}function Gz(r,e){for(var t=!0,n=0;n<e.ends.length;n++)if(r.contain(e.ends[n][0],e.ends[n][1])){t=!1;break}return t}function k4(r,e,t,n){var a=e.getItemModel(t);r.useStyle(e.getItemVisual(t,"style")),r.style.strokeNoScale=!0,r.__simpleBox=n,Bi(r,a);var i=e.getItemLayout(t).sign;X(r.states,function(o,l){var c=a.getModel(l),u=ij(i,c),h=sj(i,c)||u,d=o.style||(o.style={});u&&(d.fill=u),h&&(d.stroke=h)});var s=a.getModel("emphasis");qn(r,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function iIe(r,e){return We(r,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var sIe=function(){function r(){}return r}(),F4=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n.type="largeCandlestickBox",n}return e.prototype.getDefaultShape=function(){return new sIe},e.prototype.buildPath=function(t,n){for(var a=n.points,i=0;i<a.length;)if(this.__sign===a[i++]){var s=a[i++];t.moveTo(s,a[i++]),t.lineTo(s,a[i++])}else i+=3},e}(hr);function Vz(r,e,t,n){var a=r.getData(),i=a.getLayout("largePoints"),s=new F4({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(s);var o=new F4({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(o);var l=new F4({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(l),j4(1,s,r),j4(-1,o,r),j4(0,l,r),n&&(s.incremental=!0,o.incremental=!0),t&&t.push(s,o)}function j4(r,e,t,n){var a=sj(r,t)||ij(r,t),i=t.getModel("itemStyle").getItemStyle(tIe);e.useStyle(i),e.style.fill=null,e.style.stroke=a}var jae=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,n,a){var i=n.getItemLayout(t);return i&&a.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Sn);Ia(jae,Pae,!0);function oIe(r){!r||!$e(r.series)||X(r.series,function(e){Pt(e)&&e.type==="k"&&(e.type="candlestick")})}var lIe={seriesType:"candlestick",plan:cy(),reset:function(r){var e=r.coordinateSystem,t=r.getData(),n=cIe(r,t),a=0,i=1,s=["x","y"],o=t.getDimensionIndex(t.mapDimension(s[a])),l=We(t.mapDimensionsAll(s[i]),t.getDimensionIndex,t),c=l[0],u=l[1],h=l[2],d=l[3];if(t.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),o<0||l.length<4)return;return{progress:r.pipelineContext.large?g:A};function A(p,v){for(var m,y=v.getStore();(m=p.next())!=null;){var x=y.get(o,m),b=y.get(c,m),S=y.get(u,m),_=y.get(h,m),C=y.get(d,m),w=Math.min(b,S),B=Math.max(b,S),D=Q(w,x),T=Q(B,x),E=Q(_,x),R=Q(C,x),M=[];H(M,T,0),H(M,D,1),M.push(te(R),te(T),te(E),te(D));var k=v.getItemModel(m),O=!!k.get(["itemStyle","borderColorDoji"]);v.setItemLayout(m,{sign:$z(y,m,b,S,u,O),initBaseline:b>S?T[i]:D[i],ends:M,brushRect:W(_,C,x)})}function Q(ee,j){var G=[];return G[a]=j,G[i]=ee,isNaN(j)||isNaN(ee)?[NaN,NaN]:e.dataToPoint(G)}function H(ee,j,G){var Y=j.slice(),Z=j.slice();Y[a]=r5(Y[a]+n/2,1,!1),Z[a]=r5(Z[a]-n/2,1,!0),G?ee.push(Y,Z):ee.push(Z,Y)}function W(ee,j,G){var Y=Q(ee,G),Z=Q(j,G);return Y[a]-=n/2,Z[a]-=n/2,{x:Y[0],y:Y[1],width:n,height:Z[1]-Y[1]}}function te(ee){return ee[a]=r5(ee[a],1),ee}}function g(p,v){for(var m=Gc(p.count*4),y=0,x,b=[],S=[],_,C=v.getStore(),w=!!r.get(["itemStyle","borderColorDoji"]);(_=p.next())!=null;){var B=C.get(o,_),D=C.get(c,_),T=C.get(u,_),E=C.get(h,_),R=C.get(d,_);if(isNaN(B)||isNaN(E)||isNaN(R)){m[y++]=NaN,y+=3;continue}m[y++]=$z(C,_,D,T,u,w),b[a]=B,b[i]=E,x=e.dataToPoint(b,null,S),m[y++]=x?x[0]:NaN,m[y++]=x?x[1]:NaN,b[i]=R,x=e.dataToPoint(b,null,S),m[y++]=x?x[1]:NaN}v.setLayout("largePoints",m)}}};function $z(r,e,t,n,a,i){var s;return t>n?s=-1:t<n?s=1:s=i?0:e>0?r.get(a,e-1)<=n?1:-1:1,s}function cIe(r,e){var t=r.getBaseAxis(),n,a=t.type==="category"?t.getBandWidth():(n=t.getExtent(),Math.abs(n[1]-n[0])/e.count()),i=ot($t(r.get("barMaxWidth"),a),a),s=ot($t(r.get("barMinWidth"),1),a),o=r.get("barWidth");return o!=null?ot(o,a):Math.max(Math.min(a/2,i),s)}function uIe(r){r.registerChartView(rIe),r.registerSeriesModel(jae),r.registerPreprocessor(oIe),r.registerVisual(eIe),r.registerLayout(lIe)}function Kz(r,e){var t=e.rippleEffectColor||e.color;r.eachChild(function(n){n.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var hIe=function(r){Pe(e,r);function e(t,n){var a=r.call(this)||this,i=new kw(t,n),s=new Ht;return a.add(i),a.add(s),a.updateData(t,n),a}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var n=t.symbolType,a=t.color,i=t.rippleNumber,s=this.childAt(1),o=0;o<i;o++){var l=Ta(n,-1,-1,2,2,a);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var c=-o/i*t.period+t.effectOffset;l.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(c).start(),l.animateStyle(!0).when(t.period,{opacity:0}).delay(c).start(),s.add(l)}Kz(s,t)},e.prototype.updateEffectAnimation=function(t){for(var n=this._effectCfg,a=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],s=0;s<i.length;s++){var o=i[s];if(n[o]!==t[o]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}Kz(a,t)},e.prototype.highlight=function(){Ch(this)},e.prototype.downplay=function(){Bh(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,n){var a=this,i=t.hostModel;this.childAt(0).updateData(t,n);var s=this.childAt(1),o=t.getItemModel(n),l=t.getItemVisual(n,"symbol"),c=hy(t.getItemVisual(n,"symbolSize")),u=t.getItemVisual(n,"style"),h=u&&u.fill,d=o.getModel("emphasis");s.setScale(c),s.traverse(function(v){v.setStyle("fill",h)});var A=Op(t.getItemVisual(n,"symbolOffset"),c);A&&(s.x=A[0],s.y=A[1]);var g=t.getItemVisual(n,"symbolRotate");s.rotation=(g||0)*Math.PI/180||0;var p={};p.showEffectOn=i.get("showEffectOn"),p.rippleScale=o.get(["rippleEffect","scale"]),p.brushType=o.get(["rippleEffect","brushType"]),p.period=o.get(["rippleEffect","period"])*1e3,p.effectOffset=n/t.count(),p.z=i.getShallow("z")||0,p.zlevel=i.getShallow("zlevel")||0,p.symbolType=l,p.color=h,p.rippleEffectColor=o.get(["rippleEffect","color"]),p.rippleNumber=o.get(["rippleEffect","number"]),p.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(v){v==="emphasis"?p.showEffectOn!=="render"&&a.startEffectAnimation(p):v==="normal"&&p.showEffectOn!=="render"&&a.stopEffectAnimation()}),this._effectCfg=p,qn(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(Ht),dIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new Fw(hIe)},e.prototype.render=function(t,n,a){var i=t.getData(),s=this._symbolDraw;s.updateData(i,{clipShape:this._getClipShape(t)}),this.group.add(s.group)},e.prototype._getClipShape=function(t){var n=t.coordinateSystem,a=n&&n.getArea&&n.getArea();return t.get("clip",!0)?a:null},e.prototype.updateTransform=function(t,n,a){var i=t.getData();this.group.dirty();var s=Ow("").reset(t,n,a);s.progress&&s.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var n=t.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=Fve(n.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,n){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(nn),AIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,n){return Uh(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,n,a){return a.point(n.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Sn);function fIe(r){r.registerChartView(dIe),r.registerSeriesModel(AIe),r.registerLayout(Ow("effectScatter"))}var Oae=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this)||this;return i.add(i.createLine(t,n,a)),i._updateEffectSymbol(t,n),i}return e.prototype.createLine=function(t,n,a){return new YF(t,n,a)},e.prototype._updateEffectSymbol=function(t,n){var a=t.getItemModel(n),i=a.getModel("effect"),s=i.get("symbolSize"),o=i.get("symbol");$e(s)||(s=[s,s]);var l=t.getItemVisual(n,"style"),c=i.get("color")||l&&l.stroke,u=this.childAt(1);this._symbolType!==o&&(this.remove(u),u=Ta(o,-.5,-.5,1,1,c),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",c),u.setStyle(i.getItemStyle(["color"])),u.scaleX=s[0],u.scaleY=s[1],u.setColor(c),this._symbolType=o,this._symbolScale=s,this._updateEffectAnimation(t,i,n))},e.prototype._updateEffectAnimation=function(t,n,a){var i=this.childAt(1);if(i){var s=t.getItemLayout(a),o=n.get("period")*1e3,l=n.get("loop"),c=n.get("roundTrip"),u=n.get("constantSpeed"),h=di(n.get("delay"),function(A){return A/t.count()*o/3});if(i.ignore=!0,this._updateAnimationPoints(i,s),u>0&&(o=this._getLineLength(i)/u*1e3),o!==this._period||l!==this._loop||c!==this._roundTrip){i.stopAnimation();var d=void 0;It(h)?d=h(a):d=h,i.__t>0&&(d=-o*i.__t),this._animateSymbol(i,o,d,l,c)}this._period=o,this._loop=l,this._roundTrip=c}},e.prototype._animateSymbol=function(t,n,a,i,s){if(n>0){t.__t=0;var o=this,l=t.animate("",i).when(s?n*2:n,{__t:s?2:1}).delay(a).during(function(){o._updateSymbolPosition(t)});i||l.done(function(){o.remove(t)}),l.start()}},e.prototype._getLineLength=function(t){return tA(t.__p1,t.__cp1)+tA(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,n){t.__p1=n[0],t.__p2=n[1],t.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},e.prototype.updateData=function(t,n,a){this.childAt(0).updateData(t,n,a),this._updateEffectSymbol(t,n)},e.prototype._updateSymbolPosition=function(t){var n=t.__p1,a=t.__p2,i=t.__cp1,s=t.__t<1?t.__t:2-t.__t,o=[t.x,t.y],l=o.slice(),c=li,u=D3;o[0]=c(n[0],i[0],a[0],s),o[1]=c(n[1],i[1],a[1],s);var h=t.__t<1?u(n[0],i[0],a[0],s):u(a[0],i[0],n[0],1-s),d=t.__t<1?u(n[1],i[1],a[1],s):u(a[1],i[1],n[1],1-s);t.rotation=-Math.atan2(d,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=tA(l,o)*1.05,s===1&&(o[0]=l[0]+(o[0]-l[0])/2,o[1]=l[1]+(o[1]-l[1])/2)):t.__lastT===1?t.scaleY=2*tA(n,o):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=o[0],t.y=o[1]},e.prototype.updateLayout=function(t,n){this.childAt(0).updateLayout(t,n);var a=t.getItemModel(n).getModel("effect");this._updateEffectAnimation(t,a,n)},e}(Ht),Uae=function(r){Pe(e,r);function e(t,n,a){var i=r.call(this)||this;return i._createPolyline(t,n,a),i}return e.prototype._createPolyline=function(t,n,a){var i=t.getItemLayout(n),s=new ws({shape:{points:i}});this.add(s),this._updateCommonStl(t,n,a)},e.prototype.updateData=function(t,n,a){var i=t.hostModel,s=this.childAt(0),o={shape:{points:t.getItemLayout(n)}};Er(s,o,i,n),this._updateCommonStl(t,n,a)},e.prototype._updateCommonStl=function(t,n,a){var i=this.childAt(0),s=t.getItemModel(n),o=a&&a.emphasisLineStyle,l=a&&a.focus,c=a&&a.blurScope,u=a&&a.emphasisDisabled;if(!a||t.hasItemOption){var h=s.getModel("emphasis");o=h.getModel("lineStyle").getLineStyle(),u=h.get("disabled"),l=h.get("focus"),c=h.get("blurScope")}i.useStyle(t.getItemVisual(n,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var d=i.ensureState("emphasis");d.style=o,qn(this,l,c,u)},e.prototype.updateLayout=function(t,n){var a=this.childAt(0);a.setShape("points",t.getItemLayout(n))},e}(Ht),gIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,n,a){return new Uae(t,n,a)},e.prototype._updateAnimationPoints=function(t,n){this._points=n;for(var a=[0],i=0,s=1;s<n.length;s++){var o=n[s-1],l=n[s];i+=tA(o,l),a.push(i)}if(i===0){this._length=0;return}for(var s=0;s<a.length;s++)a[s]/=i;this._offsets=a,this._length=i},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var n=t.__t<1?t.__t:2-t.__t,a=this._points,i=this._offsets,s=a.length;if(i){var o=this._lastFrame,l;if(n<this._lastFramePercent){var c=Math.min(o+1,s-1);for(l=c;l>=0&&!(i[l]<=n);l--);l=Math.min(l,s-2)}else{for(l=o;l<s&&!(i[l]>n);l++);l=Math.min(l-1,s-2)}var u=(n-i[l])/(i[l+1]-i[l]),h=a[l],d=a[l+1];t.x=h[0]*(1-u)+u*d[0],t.y=h[1]*(1-u)+u*d[1];var A=t.__t<1?d[0]-h[0]:h[0]-d[0],g=t.__t<1?d[1]-h[1]:h[1]-d[1];t.rotation=-Math.atan2(g,A)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=n,t.ignore=!1}},e}(Oae),pIe=function(){function r(){this.polyline=!1,this.curveness=0,this.segs=[]}return r}(),mIe=function(r){Pe(e,r);function e(t){var n=r.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new pIe},e.prototype.buildPath=function(t,n){var a=n.segs,i=n.curveness,s;if(n.polyline)for(s=this._off;s<a.length;){var o=a[s++];if(o>0){t.moveTo(a[s++],a[s++]);for(var l=1;l<o;l++)t.lineTo(a[s++],a[s++])}}else for(s=this._off;s<a.length;){var c=a[s++],u=a[s++],h=a[s++],d=a[s++];if(t.moveTo(c,u),i>0){var A=(c+h)/2-(u-d)*i,g=(u+d)/2-(h-c)*i;t.quadraticCurveTo(A,g,h,d)}else t.lineTo(h,d)}this.incremental&&(this._off=s,this.notClear=!0)},e.prototype.findDataIndex=function(t,n){var a=this.shape,i=a.segs,s=a.curveness,o=this.style.lineWidth;if(a.polyline)for(var l=0,c=0;c<i.length;){var u=i[c++];if(u>0)for(var h=i[c++],d=i[c++],A=1;A<u;A++){var g=i[c++],p=i[c++];if(Ud(h,d,g,p,o,t,n))return l}l++}else for(var l=0,c=0;c<i.length;){var h=i[c++],d=i[c++],g=i[c++],p=i[c++];if(s>0){var v=(h+g)/2-(d-p)*s,m=(d+p)/2-(g-h)*s;if(dee(h,d,v,m,g,p,o,t,n))return l}else if(Ud(h,d,g,p,o,t,n))return l;l++}return-1},e.prototype.contain=function(t,n){var a=this.transformCoordToLocal(t,n),i=this.getBoundingRect();if(t=a[0],n=a[1],i.contain(t,n)){var s=this.hoverDataIdx=this.findDataIndex(t,n);return s>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var n=this.shape,a=n.segs,i=1/0,s=1/0,o=-1/0,l=-1/0,c=0;c<a.length;){var u=a[c++],h=a[c++];i=Math.min(u,i),o=Math.max(u,o),s=Math.min(h,s),l=Math.max(h,l)}t=this._rect=new Zt(i,s,o,l)}return t},e}(hr),vIe=function(){function r(){this.group=new Ht}return r.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},r.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},r.prototype.incrementalUpdate=function(e,t){var n=this._newAdded[0],a=t.getLayout("linesPoints"),i=n&&n.shape.segs;if(i&&i.length<2e4){var s=i.length,o=new Float32Array(s+a.length);o.set(i),o.set(a,s),n.setShape({segs:o})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:a}),this._setCommon(l,t),l.__startIndex=e.start}},r.prototype.remove=function(){this._clear()},r.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},r.prototype._create=function(){var e=new mIe({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},r.prototype._setCommon=function(e,t,n){var a=t.hostModel;e.setShape({polyline:a.get("polyline"),curveness:a.get(["lineStyle","curveness"])}),e.useStyle(a.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var i=t.getVisual("style");i&&i.stroke&&e.setStyle("stroke",i.stroke),e.setStyle("fill",null);var s=Qt(e);s.seriesIndex=a.seriesIndex,e.on("mousemove",function(o){s.dataIndex=null;var l=e.hoverDataIdx;l>0&&(s.dataIndex=l+e.__startIndex)})},r.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},r}(),Hae={seriesType:"lines",plan:cy(),reset:function(r){var e=r.coordinateSystem;if(e){var t=r.get("polyline"),n=r.pipelineContext.large;return{progress:function(a,i){var s=[];if(n){var o=void 0,l=a.end-a.start;if(t){for(var c=0,u=a.start;u<a.end;u++)c+=r.getLineCoordsCount(u);o=new Float32Array(l+c*2)}else o=new Float32Array(l*4);for(var h=0,d=[],u=a.start;u<a.end;u++){var A=r.getLineCoords(u,s);t&&(o[h++]=A);for(var g=0;g<A;g++)d=e.dataToPoint(s[g],!1,d),o[h++]=d[0],o[h++]=d[1]}i.setLayout("linesPoints",o)}else for(var u=a.start;u<a.end;u++){var p=i.getItemModel(u),A=r.getLineCoords(u,s),v=[];if(t)for(var m=0;m<A;m++)v.push(e.dataToPoint(s[m]));else{v[0]=e.dataToPoint(s[0]),v[1]=e.dataToPoint(s[1]);var y=p.get(["lineStyle","curveness"]);+y&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*y,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*y])}i.setItemLayout(u,v)}}}}}},yIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=t.getData(),s=this._updateLineDraw(i,t),o=t.get("zlevel"),l=t.get(["effect","trailLength"]),c=a.getZr(),u=c.painter.getType()==="svg";u||c.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!u&&c.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&l>0&&(u||c.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),s.updateData(i);var h=t.get("clip",!0)&&jw(t.coordinateSystem,!1,t);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,n,a){var i=t.getData(),s=this._updateLineDraw(i,t);s.incrementalPrepareUpdate(i),this._clearLayer(a),this._finished=!1},e.prototype.incrementalRender=function(t,n,a){this._lineDraw.incrementalUpdate(t,n.getData()),this._finished=t.end===n.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,n,a){var i=t.getData(),s=t.pipelineContext;if(!this._finished||s.large||s.progressiveRender)return{update:!0};var o=Hae.reset(t,n,a);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(a)},e.prototype._updateLineDraw=function(t,n){var a=this._lineDraw,i=this._showEffect(n),s=!!n.get("polyline"),o=n.pipelineContext,l=o.large;return(!a||i!==this._hasEffet||s!==this._isPolyline||l!==this._isLargeDraw)&&(a&&a.remove(),a=this._lineDraw=l?new vIe:new XF(s?i?gIe:Uae:i?Oae:YF),this._hasEffet=i,this._isPolyline=s,this._isLargeDraw=l),this.group.add(a.group),a},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var n=t.getZr(),a=n.painter.getType()==="svg";!a&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},e.prototype.dispose=function(t,n){this.remove(t,n)},e.type="lines",e}(nn),xIe=typeof Uint32Array>"u"?Array:Uint32Array,bIe=typeof Float64Array>"u"?Array:Float64Array;function Wz(r){var e=r.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(r.data=We(e,function(t){var n=[t[0].coord,t[1].coord],a={coords:n};return t[0].name&&(a.fromName=t[0].name),t[1].name&&(a.toName=t[1].name),Ek([a,t[0],t[1]])}))}var wIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],Wz(t);var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count)),r.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(Wz(t),t.data){var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count))}r.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var n=this._processFlatCoordsArray(t.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=mb(this._flatCoords,n.flatCoords),this._flatCoordsOffset=mb(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),t.data=new Float32Array(n.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var n=this.getData().getItemModel(t),a=n.option instanceof Array?n.option:n.getShallow("coords");return a},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,n){if(this._flatCoordsOffset){for(var a=this._flatCoordsOffset[t*2],i=this._flatCoordsOffset[t*2+1],s=0;s<i;s++)n[s]=n[s]||[],n[s][0]=this._flatCoords[a+s*2],n[s][1]=this._flatCoords[a+s*2+1];return i}else{for(var o=this._getCoordsFromItemModel(t),s=0;s<o.length;s++)n[s]=n[s]||[],n[s][0]=o[s][0],n[s][1]=o[s][1];return o.length}},e.prototype._processFlatCoordsArray=function(t){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),Br(t[0])){for(var a=t.length,i=new xIe(a),s=new bIe(a),o=0,l=0,c=0,u=0;u<a;){c++;var h=t[u++];i[l++]=o+n,i[l++]=h;for(var d=0;d<h;d++){var A=t[u++],g=t[u++];s[o++]=A,s[o++]=g}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,l),flatCoords:s,count:c}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,n){var a=new As(["value"],this);return a.hasItemOption=!1,a.initData(t.data,[],function(i,s,o,l){if(i instanceof Array)return NaN;a.hasItemOption=!0;var c=i.value;if(c!=null)return c instanceof Array?c[l]:c}),a},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),s=i.getItemModel(t),o=s.get("name");if(o)return o;var l=s.get("fromName"),c=s.get("toName"),u=[];return l!=null&&u.push(l),c!=null&&u.push(c),ti("nameValue",{name:u.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),n=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&n>0?n+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Sn);function US(r){return r instanceof Array||(r=[r,r]),r}var SIe={seriesType:"lines",reset:function(r){var e=US(r.get("symbol")),t=US(r.get("symbolSize")),n=r.getData();n.setVisual("fromSymbol",e&&e[0]),n.setVisual("toSymbol",e&&e[1]),n.setVisual("fromSymbolSize",t&&t[0]),n.setVisual("toSymbolSize",t&&t[1]);function a(i,s){var o=i.getItemModel(s),l=US(o.getShallow("symbol",!0)),c=US(o.getShallow("symbolSize",!0));l[0]&&i.setItemVisual(s,"fromSymbol",l[0]),l[1]&&i.setItemVisual(s,"toSymbol",l[1]),c[0]&&i.setItemVisual(s,"fromSymbolSize",c[0]),c[1]&&i.setItemVisual(s,"toSymbolSize",c[1])}return{dataEach:n.hasItemOption?a:null}}};function _Ie(r){r.registerChartView(yIe),r.registerSeriesModel(wIe),r.registerLayout(Hae),r.registerVisual(SIe)}var CIe=256,BIe=function(){function r(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=UA.createCanvas();this.canvas=e}return r.prototype.update=function(e,t,n,a,i,s){var o=this._getBrush(),l=this._getGradient(i,"inRange"),c=this._getGradient(i,"outOfRange"),u=this.pointSize+this.blurSize,h=this.canvas,d=h.getContext("2d"),A=e.length;h.width=t,h.height=n;for(var g=0;g<A;++g){var p=e[g],v=p[0],m=p[1],y=p[2],x=a(y);d.globalAlpha=x,d.drawImage(o,v-u,m-u)}if(!h.width||!h.height)return h;for(var b=d.getImageData(0,0,h.width,h.height),S=b.data,_=0,C=S.length,w=this.minOpacity,B=this.maxOpacity,D=B-w;_<C;){var x=S[_+3]/256,T=Math.floor(x*(CIe-1))*4;if(x>0){var E=s(x)?l:c;x>0&&(x=x*D+w),S[_++]=E[T],S[_++]=E[T+1],S[_++]=E[T+2],S[_++]=E[T+3]*x*256}else _+=4}return d.putImageData(b,0,0),h},r.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=UA.createCanvas()),t=this.pointSize+this.blurSize,n=t*2;e.width=n,e.height=n;var a=e.getContext("2d");return a.clearRect(0,0,n,n),a.shadowOffsetX=n,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-t,t,this.pointSize,0,Math.PI*2,!0),a.closePath(),a.fill(),e},r.prototype._getGradient=function(e,t){for(var n=this._gradientPixels,a=n[t]||(n[t]=new Uint8ClampedArray(256*4)),i=[0,0,0,0],s=0,o=0;o<256;o++)e[t](o/255,!0,i),a[s++]=i[0],a[s++]=i[1],a[s++]=i[2],a[s++]=i[3];return a},r}();function NIe(r,e,t){var n=r[1]-r[0];e=We(e,function(s){return{interval:[(s.interval[0]-r[0])/n,(s.interval[1]-r[0])/n]}});var a=e.length,i=0;return function(s){var o;for(o=i;o<a;o++){var l=e[o].interval;if(l[0]<=s&&s<=l[1]){i=o;break}}if(o===a)for(o=i-1;o>=0;o--){var l=e[o].interval;if(l[0]<=s&&s<=l[1]){i=o;break}}return o>=0&&o<a&&t[o]}}function TIe(r,e){var t=r[1]-r[0];return e=[(e[0]-r[0])/t,(e[1]-r[0])/t],function(n){return n>=e[0]&&n<=e[1]}}function qz(r){var e=r.dimensions;return e[0]==="lng"&&e[1]==="lat"}var IIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i;n.eachComponent("visualMap",function(o){o.eachTargetSeries(function(l){l===t&&(i=o)})}),this._progressiveEls=null,this.group.removeAll();var s=t.coordinateSystem;s.type==="cartesian2d"||s.type==="calendar"?this._renderOnCartesianAndCalendar(t,a,0,t.getData().count()):qz(s)&&this._renderOnGeo(s,t,i,a)},e.prototype.incrementalPrepareRender=function(t,n,a){this.group.removeAll()},e.prototype.incrementalRender=function(t,n,a,i){var s=n.coordinateSystem;s&&(qz(s)?this.render(n,a,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(n,i,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){nf(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,n,a,i,s){var o=t.coordinateSystem,l=Hp(o,"cartesian2d"),c,u,h,d;if(l){var A=o.getAxis("x"),g=o.getAxis("y");c=A.getBandWidth()+.5,u=g.getBandWidth()+.5,h=A.scale.getExtent(),d=g.scale.getExtent()}for(var p=this.group,v=t.getData(),m=t.getModel(["emphasis","itemStyle"]).getItemStyle(),y=t.getModel(["blur","itemStyle"]).getItemStyle(),x=t.getModel(["select","itemStyle"]).getItemStyle(),b=t.get(["itemStyle","borderRadius"]),S=ei(t),_=t.getModel("emphasis"),C=_.get("focus"),w=_.get("blurScope"),B=_.get("disabled"),D=l?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],T=a;T<i;T++){var E=void 0,R=v.getItemVisual(T,"style");if(l){var M=v.get(D[0],T),k=v.get(D[1],T);if(isNaN(v.get(D[2],T))||isNaN(M)||isNaN(k)||M<h[0]||M>h[1]||k<d[0]||k>d[1])continue;var O=o.dataToPoint([M,k]);E=new br({shape:{x:O[0]-c/2,y:O[1]-u/2,width:c,height:u},style:R})}else{if(isNaN(v.get(D[1],T)))continue;E=new br({z2:1,shape:o.dataToRect([v.get(D[0],T)]).contentShape,style:R})}if(v.hasItemOption){var Q=v.getItemModel(T),H=Q.getModel("emphasis");m=H.getModel("itemStyle").getItemStyle(),y=Q.getModel(["blur","itemStyle"]).getItemStyle(),x=Q.getModel(["select","itemStyle"]).getItemStyle(),b=Q.get(["itemStyle","borderRadius"]),C=H.get("focus"),w=H.get("blurScope"),B=H.get("disabled"),S=ei(Q)}E.shape.r=b;var W=t.getRawValue(T),te="-";W&&W[2]!=null&&(te=W[2]+""),Ni(E,S,{labelFetcher:t,labelDataIndex:T,defaultOpacity:R.opacity,defaultText:te}),E.ensureState("emphasis").style=m,E.ensureState("blur").style=y,E.ensureState("select").style=x,qn(E,C,w,B),E.incremental=s,s&&(E.states.emphasis.hoverLayer=!0),p.add(E),v.setItemGraphicEl(T,E),this._progressiveEls&&this._progressiveEls.push(E)}},e.prototype._renderOnGeo=function(t,n,a,i){var s=a.targetVisuals.inRange,o=a.targetVisuals.outOfRange,l=n.getData(),c=this._hmLayer||this._hmLayer||new BIe;c.blurSize=n.get("blurSize"),c.pointSize=n.get("pointSize"),c.minOpacity=n.get("minOpacity"),c.maxOpacity=n.get("maxOpacity");var u=t.getViewRect().clone(),h=t.getRoamTransform();u.applyTransform(h);var d=Math.max(u.x,0),A=Math.max(u.y,0),g=Math.min(u.width+u.x,i.getWidth()),p=Math.min(u.height+u.y,i.getHeight()),v=g-d,m=p-A,y=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],x=l.mapArray(y,function(C,w,B){var D=t.dataToPoint([C,w]);return D[0]-=d,D[1]-=A,D.push(B),D}),b=a.getExtent(),S=a.type==="visualMap.continuous"?TIe(b,a.option.range):NIe(b,a.getPieceList(),a.option.selected);c.update(x,v,m,s.color.getNormalizer(),{inRange:s.color.getColorMapper(),outOfRange:o.color.getColorMapper()},S);var _=new fi({style:{width:v,height:m,x:d,y:A,image:c.canvas},silent:!0});this.group.add(_)},e.type="heatmap",e}(nn),EIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,n){return Uh(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=Mw.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Sn);function DIe(r){r.registerChartView(IIe),r.registerSeriesModel(EIe)}var MIe=["itemStyle","borderWidth"],Yz=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],O4=new Oh,RIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=this.group,s=t.getData(),o=this._data,l=t.coordinateSystem,c=l.getBaseAxis(),u=c.isHorizontal(),h=l.master.getRect(),d={ecSize:{width:a.getWidth(),height:a.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:u,valueDim:Yz[+u],categoryDim:Yz[1-+u]};s.diff(o).add(function(g){if(s.hasValue(g)){var p=Zz(s,g),v=Xz(s,g,p,d),m=Jz(s,d,v);s.setItemGraphicEl(g,m),i.add(m),t9(m,d,v)}}).update(function(g,p){var v=o.getItemGraphicEl(p);if(!s.hasValue(g)){i.remove(v);return}var m=Zz(s,g),y=Xz(s,g,m,d),x=Kae(s,y);v&&x!==v.__pictorialShapeStr&&(i.remove(v),s.setItemGraphicEl(g,null),v=null),v?UIe(v,d,y):v=Jz(s,d,y,!0),s.setItemGraphicEl(g,v),v.__pictorialSymbolMeta=y,i.add(v),t9(v,d,y)}).remove(function(g){var p=o.getItemGraphicEl(g);p&&e9(o,g,p.__pictorialSymbolMeta.animationModel,p)}).execute();var A=t.get("clip",!0)?jw(t.coordinateSystem,!1,t):null;return A?i.setClipPath(A):i.removeClipPath(),this._data=s,this.group},e.prototype.remove=function(t,n){var a=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl(function(s){e9(i,Qt(s).dataIndex,t,s)}):a.removeAll()},e.type="pictorialBar",e}(nn);function Xz(r,e,t,n){var a=r.getItemLayout(e),i=t.get("symbolRepeat"),s=t.get("symbolClip"),o=t.get("symbolPosition")||"start",l=t.get("symbolRotate"),c=(l||0)*Math.PI/180||0,u=t.get("symbolPatternSize")||2,h=t.isAnimationEnabled(),d={dataIndex:e,layout:a,itemModel:t,symbolType:r.getItemVisual(e,"symbol")||"circle",style:r.getItemVisual(e,"style"),symbolClip:s,symbolRepeat:i,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:c,animationModel:h?t:null,hoverScale:h&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};LIe(t,i,a,n,d),PIe(r,e,a,i,s,d.boundingLength,d.pxSign,u,n,d),kIe(t,d.symbolScale,c,n,d);var A=d.symbolSize,g=Op(t.get("symbolOffset"),A);return FIe(t,A,a,i,s,g,o,d.valueLineWidth,d.boundingLength,d.repeatCutLength,n,d),d}function LIe(r,e,t,n,a){var i=n.valueDim,s=r.get("symbolBoundingData"),o=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),l=o.toGlobalCoord(o.dataToCoord(0)),c=1-+(t[i.wh]<=0),u;if($e(s)){var h=[U4(o,s[0])-l,U4(o,s[1])-l];h[1]<h[0]&&h.reverse(),u=h[c]}else s!=null?u=U4(o,s)-l:e?u=n.coordSysExtent[i.index][c]-l:u=t[i.wh];a.boundingLength=u,e&&(a.repeatCutLength=t[i.wh]);var d=i.xy==="x",A=o.inverse;a.pxSign=d&&!A||!d&&A?u>=0?1:-1:u>0?1:-1}function U4(r,e){return r.toGlobalCoord(r.dataToCoord(r.scale.parse(e)))}function PIe(r,e,t,n,a,i,s,o,l,c){var u=l.valueDim,h=l.categoryDim,d=Math.abs(t[h.wh]),A=r.getItemVisual(e,"symbolSize"),g;$e(A)?g=A.slice():A==null?g=["100%","100%"]:g=[A,A],g[h.index]=ot(g[h.index],d),g[u.index]=ot(g[u.index],n?d:Math.abs(i)),c.symbolSize=g;var p=c.symbolScale=[g[0]/o,g[1]/o];p[u.index]*=(l.isHorizontal?-1:1)*s}function kIe(r,e,t,n,a){var i=r.get(MIe)||0;i&&(O4.attr({scaleX:e[0],scaleY:e[1],rotation:t}),O4.updateTransform(),i/=O4.getLineScale(),i*=e[n.valueDim.index]),a.valueLineWidth=i||0}function FIe(r,e,t,n,a,i,s,o,l,c,u,h){var d=u.categoryDim,A=u.valueDim,g=h.pxSign,p=Math.max(e[A.index]+o,0),v=p;if(n){var m=Math.abs(l),y=di(r.get("symbolMargin"),"15%")+"",x=!1;y.lastIndexOf("!")===y.length-1&&(x=!0,y=y.slice(0,y.length-1));var b=ot(y,e[A.index]),S=Math.max(p+b*2,0),_=x?0:b*2,C=ZJ(n),w=C?n:r9((m+_)/S),B=m-w*p;b=B/2/(x?w:Math.max(w-1,1)),S=p+b*2,_=x?0:b*2,!C&&n!=="fixed"&&(w=c?r9((Math.abs(c)+_)/S):0),v=w*S-_,h.repeatTimes=w,h.symbolMargin=b}var D=g*(v/2),T=h.pathPosition=[];T[d.index]=t[d.wh]/2,T[A.index]=s==="start"?D:s==="end"?l-D:l/2,i&&(T[0]+=i[0],T[1]+=i[1]);var E=h.bundlePosition=[];E[d.index]=t[d.xy],E[A.index]=t[A.xy];var R=h.barRectShape=He({},t);R[A.wh]=g*Math.max(Math.abs(t[A.wh]),Math.abs(T[A.index]+D)),R[d.wh]=t[d.wh];var M=h.clipShape={};M[d.xy]=-t[d.xy],M[d.wh]=u.ecSize[d.wh],M[A.xy]=0,M[A.wh]=t[A.wh]}function Qae(r){var e=r.symbolPatternSize,t=Ta(r.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function zae(r,e,t,n){var a=r.__pictorialBundle,i=t.symbolSize,s=t.valueLineWidth,o=t.pathPosition,l=e.valueDim,c=t.repeatTimes||0,u=0,h=i[e.valueDim.index]+s+t.symbolMargin*2;for(oj(r,function(p){p.__pictorialAnimationIndex=u,p.__pictorialRepeatTimes=c,u<c?Vv(p,null,g(u),t,n):Vv(p,null,{scaleX:0,scaleY:0},t,n,function(){a.remove(p)}),u++});u<c;u++){var d=Qae(t);d.__pictorialAnimationIndex=u,d.__pictorialRepeatTimes=c,a.add(d);var A=g(u);Vv(d,{x:A.x,y:A.y,scaleX:0,scaleY:0},{scaleX:A.scaleX,scaleY:A.scaleY,rotation:A.rotation},t,n)}function g(p){var v=o.slice(),m=t.pxSign,y=p;return(t.symbolRepeatDirection==="start"?m>0:m<0)&&(y=c-1-p),v[l.index]=h*(y-c/2+.5)+o[l.index],{x:v[0],y:v[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function Gae(r,e,t,n){var a=r.__pictorialBundle,i=r.__pictorialMainPath;i?Vv(i,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,n):(i=r.__pictorialMainPath=Qae(t),a.add(i),Vv(i,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,n))}function Vae(r,e,t){var n=He({},e.barRectShape),a=r.__pictorialBarRect;a?Vv(a,null,{shape:n},e,t):(a=r.__pictorialBarRect=new br({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),a.disableMorphing=!0,r.add(a))}function $ae(r,e,t,n){if(t.symbolClip){var a=r.__pictorialClipPath,i=He({},t.clipShape),s=e.valueDim,o=t.animationModel,l=t.dataIndex;if(a)Er(a,{shape:i},o,l);else{i[s.wh]=0,a=new br({shape:i}),r.__pictorialBundle.setClipPath(a),r.__pictorialClipPath=a;var c={};c[s.wh]=t.clipShape[s.wh],jp[n?"updateProps":"initProps"](a,{shape:c},o,l)}}}function Zz(r,e){var t=r.getItemModel(e);return t.getAnimationDelayParams=jIe,t.isAnimationEnabled=OIe,t}function jIe(r){return{index:r.__pictorialAnimationIndex,count:r.__pictorialRepeatTimes}}function OIe(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Jz(r,e,t,n){var a=new Ht,i=new Ht;return a.add(i),a.__pictorialBundle=i,i.x=t.bundlePosition[0],i.y=t.bundlePosition[1],t.symbolRepeat?zae(a,e,t):Gae(a,e,t),Vae(a,t,n),$ae(a,e,t,n),a.__pictorialShapeStr=Kae(r,t),a.__pictorialSymbolMeta=t,a}function UIe(r,e,t){var n=t.animationModel,a=t.dataIndex,i=r.__pictorialBundle;Er(i,{x:t.bundlePosition[0],y:t.bundlePosition[1]},n,a),t.symbolRepeat?zae(r,e,t,!0):Gae(r,e,t,!0),Vae(r,t,!0),$ae(r,e,t,!0)}function e9(r,e,t,n){var a=n.__pictorialBarRect;a&&a.removeTextContent();var i=[];oj(n,function(s){i.push(s)}),n.__pictorialMainPath&&i.push(n.__pictorialMainPath),n.__pictorialClipPath&&(t=null),X(i,function(s){QA(s,{scaleX:0,scaleY:0},t,e,function(){n.parent&&n.parent.remove(n)})}),r.setItemGraphicEl(e,null)}function Kae(r,e){return[r.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function oj(r,e,t){X(r.__pictorialBundle.children(),function(n){n!==r.__pictorialBarRect&&e.call(t,n)})}function Vv(r,e,t,n,a,i){e&&r.attr(e),n.symbolClip&&!a?t&&r.attr(t):t&&jp[a?"updateProps":"initProps"](r,t,n.animationModel,n.dataIndex,i)}function t9(r,e,t){var n=t.dataIndex,a=t.itemModel,i=a.getModel("emphasis"),s=i.getModel("itemStyle").getItemStyle(),o=a.getModel(["blur","itemStyle"]).getItemStyle(),l=a.getModel(["select","itemStyle"]).getItemStyle(),c=a.getShallow("cursor"),u=i.get("focus"),h=i.get("blurScope"),d=i.get("scale");oj(r,function(p){if(p instanceof fi){var v=p.style;p.useStyle(He({image:v.image,x:v.x,y:v.y,width:v.width,height:v.height},t.style))}else p.useStyle(t.style);var m=p.ensureState("emphasis");m.style=s,d&&(m.scaleX=p.scaleX*1.1,m.scaleY=p.scaleY*1.1),p.ensureState("blur").style=o,p.ensureState("select").style=l,c&&(p.cursor=c),p.z2=t.z2});var A=e.valueDim.posDesc[+(t.boundingLength>0)],g=r.__pictorialBarRect;g.ignoreClip=!0,Ni(g,ei(a),{labelFetcher:e.seriesModel,labelDataIndex:n,defaultText:T0(e.seriesModel.getData(),n),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:A}),qn(r,u,h,i.get("disabled"))}function r9(r){var e=Math.round(r);return Math.abs(r-e)<1e-4?e:Math.ceil(r)}var HIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,r.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=af(Pb.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(Pb);function QIe(r){r.registerChartView(RIe),r.registerSeriesModel(HIe),r.registerLayout(r.PRIORITY.VISUAL.LAYOUT,Wt(Ere,"pictorialBar")),r.registerLayout(r.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Dre("pictorialBar"))}var zIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,n,a){var i=t.getData(),s=this,o=this.group,l=t.getLayerSeries(),c=i.getLayout("layoutInfo"),u=c.rect,h=c.boundaryGap;o.x=0,o.y=u.y+h[0];function d(v){return v.name}var A=new Nh(this._layersSeries||[],l,d,d),g=[];A.add(ft(p,this,"add")).update(ft(p,this,"update")).remove(ft(p,this,"remove")).execute();function p(v,m,y){var x=s._layers;if(v==="remove"){o.remove(x[m]);return}for(var b=[],S=[],_,C=l[m].indices,w=0;w<C.length;w++){var B=i.getItemLayout(C[w]),D=B.x,T=B.y0,E=B.y;b.push(D,T),S.push(D,T+E),_=i.getItemVisual(C[w],"style")}var R,M=i.getItemLayout(C[0]),k=t.getModel("label"),O=k.get("margin"),Q=t.getModel("emphasis");if(v==="add"){var H=g[m]=new Ht;R=new yne({shape:{points:b,stackedOnPoints:S,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),H.add(R),o.add(H),t.isAnimationEnabled()&&R.setClipPath(GIe(R.getBoundingRect(),t,function(){R.removeClipPath()}))}else{var H=x[y];R=H.childAt(0),o.add(H),g[m]=H,Er(R,{shape:{points:b,stackedOnPoints:S}},t),nc(R)}Ni(R,ei(t),{labelDataIndex:C[w-1],defaultText:i.getName(C[w-1]),inheritColor:_.fill},{normal:{verticalAlign:"middle"}}),R.setTextConfig({position:null,local:!0});var W=R.getTextContent();W&&(W.x=M.x-O,W.y=M.y0+M.y/2),R.useStyle(_),i.setItemGraphicEl(m,R),Bi(R,t),qn(R,Q.get("focus"),Q.get("blurScope"),Q.get("disabled"))}this._layersSeries=l,this._layers=g},e.type="themeRiver",e}(nn);function GIe(r,e,t){var n=new br({shape:{x:r.x-10,y:r.y-10,width:0,height:r.height+20}});return jn(n,{shape:{x:r.x-50,width:r.width+100,height:r.height+20}},e,t),n}var H4=2,VIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Hw(ft(this.getData,this),ft(this.getRawData,this))},e.prototype.fixData=function(t){var n=t.length,a={},i=$3(t,function(d){return a.hasOwnProperty(d[0]+"")||(a[d[0]+""]=-1),d[2]}),s=[];i.buckets.each(function(d,A){s.push({name:A,dataList:d})});for(var o=s.length,l=0;l<o;++l){for(var c=s[l].name,u=0;u<s[l].dataList.length;++u){var h=s[l].dataList[u][0]+"";a[h]=l}for(var h in a)a.hasOwnProperty(h)&&a[h]!==l&&(a[h]=l,t[n]=[h,0,c],n++)}return t},e.prototype.getInitialData=function(t,n){for(var a=this.getReferringComponents("singleAxis",Na).models[0],i=a.get("type"),s=Ur(t.data,function(g){return g[2]!==void 0}),o=this.fixData(s||[]),l=[],c=this.nameMap=bt(),u=0,h=0;h<o.length;++h)l.push(o[h][H4]),c.get(o[h][H4])||(c.set(o[h][H4],u),u++);var d=Lw(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:RC(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,A=new As(d,this);return A.initData(o),A},e.prototype.getLayerSeries=function(){for(var t=this.getData(),n=t.count(),a=[],i=0;i<n;++i)a[i]=i;var s=t.mapDimension("single"),o=$3(a,function(c){return t.get("name",c)}),l=[];return o.buckets.each(function(c,u){c.sort(function(h,d){return t.get(s,h)-t.get(s,d)}),l.push({name:u,indices:c})}),l},e.prototype.getAxisTooltipData=function(t,n,a){$e(t)||(t=t?[t]:[]);for(var i=this.getData(),s=this.getLayerSeries(),o=[],l=s.length,c,u=0;u<l;++u){for(var h=Number.MAX_VALUE,d=-1,A=s[u].indices.length,g=0;g<A;++g){var p=i.get(t[0],s[u].indices[g]),v=Math.abs(p-n);v<=h&&(c=p,h=v,d=s[u].indices[g])}o.push(d)}return{dataIndices:o,nestestValue:c}},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),s=i.getName(t),o=i.get(i.mapDimension("value"),t);return ti("nameValue",{name:s,value:o})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Sn);function $Ie(r,e){r.eachSeriesByType("themeRiver",function(t){var n=t.getData(),a=t.coordinateSystem,i={},s=a.getRect();i.rect=s;var o=t.get("boundaryGap"),l=a.getAxis();if(i.boundaryGap=o,l.orient==="horizontal"){o[0]=ot(o[0],s.height),o[1]=ot(o[1],s.height);var c=s.height-o[0]-o[1];n9(n,t,c)}else{o[0]=ot(o[0],s.width),o[1]=ot(o[1],s.width);var u=s.width-o[0]-o[1];n9(n,t,u)}n.setLayout("layoutInfo",i)})}function n9(r,e,t){if(r.count())for(var n=e.coordinateSystem,a=e.getLayerSeries(),i=r.mapDimension("single"),s=r.mapDimension("value"),o=We(a,function(v){return We(v.indices,function(m){var y=n.dataToPoint(r.get(i,m));return y[1]=r.get(s,m),y})}),l=KIe(o),c=l.y0,u=t/l.max,h=a.length,d=a[0].indices.length,A,g=0;g<d;++g){A=c[g]*u,r.setItemLayout(a[0].indices[g],{layerIndex:0,x:o[0][g][0],y0:A,y:o[0][g][1]*u});for(var p=1;p<h;++p)A+=o[p-1][g][1]*u,r.setItemLayout(a[p].indices[g],{layerIndex:p,x:o[p][g][0],y0:A,y:o[p][g][1]*u})}}function KIe(r){for(var e=r.length,t=r[0].length,n=[],a=[],i=0,s=0;s<t;++s){for(var o=0,l=0;l<e;++l)o+=r[l][s][1];o>i&&(i=o),n.push(o)}for(var c=0;c<t;++c)a[c]=(i-n[c])/2;i=0;for(var u=0;u<t;++u){var h=n[u]+a[u];h>i&&(i=h)}return{y0:a,max:i}}function WIe(r){r.registerChartView(zIe),r.registerSeriesModel(VIe),r.registerLayout($Ie),r.registerProcessor(Uw("themeRiver"))}var qIe=2,YIe=4,a9=function(r){Pe(e,r);function e(t,n,a,i){var s=r.call(this)||this;s.z2=qIe,s.textConfig={inside:!0},Qt(s).seriesIndex=n.seriesIndex;var o=new Cr({z2:YIe,silent:t.getModel().get(["label","silent"])});return s.setTextContent(o),s.updateData(!0,t,n,a,i),s}return e.prototype.updateData=function(t,n,a,i,s){this.node=n,n.piece=this,a=a||this._seriesModel,i=i||this._ecModel;var o=this;Qt(o).dataIndex=n.dataIndex;var l=n.getModel(),c=l.getModel("emphasis"),u=n.getLayout(),h=He({},u);h.label=null;var d=n.getVisual("style");d.lineJoin="bevel";var A=n.getVisual("decal");A&&(d.decal=B0(A,s));var g=Lg(l.getModel("itemStyle"),h,!0);He(h,g),X(ps,function(y){var x=o.ensureState(y),b=l.getModel([y,"itemStyle"]);x.style=b.getItemStyle();var S=Lg(b,h);S&&(x.shape=S)}),t?(o.setShape(h),o.shape.r=u.r0,jn(o,{shape:{r:u.r}},a,n.dataIndex)):(Er(o,{shape:h},a),nc(o)),o.useStyle(d),this._updateLabel(a);var p=l.getShallow("cursor");p&&o.attr("cursor",p),this._seriesModel=a||this._seriesModel,this._ecModel=i||this._ecModel;var v=c.get("focus"),m=v==="relative"?mb(n.getAncestorsIndices(),n.getDescendantIndices()):v==="ancestor"?n.getAncestorsIndices():v==="descendant"?n.getDescendantIndices():v;qn(this,m,c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t){var n=this,a=this.node.getModel(),i=a.getModel("label"),s=this.node.getLayout(),o=s.endAngle-s.startAngle,l=(s.startAngle+s.endAngle)/2,c=Math.cos(l),u=Math.sin(l),h=this,d=h.getTextContent(),A=this.node.dataIndex,g=i.get("minAngle")/180*Math.PI,p=i.get("show")&&!(g!=null&&Math.abs(o)<g);d.ignore=!p,X(Sb,function(m){var y=m==="normal"?a.getModel("label"):a.getModel([m,"label"]),x=m==="normal",b=x?d:d.ensureState(m),S=t.getFormattedLabel(A,m);x&&(S=S||n.node.name),b.style=bn(y,{},null,m!=="normal",!0),S&&(b.style.text=S);var _=y.get("show");_!=null&&!x&&(b.ignore=!_);var C=v(y,"position"),w=x?h:h.states[m],B=w.style.fill;w.textConfig={outsideFill:y.get("color")==="inherit"?B:null,inside:C!=="outside"};var D,T=v(y,"distance")||0,E=v(y,"align"),R=v(y,"rotate"),M=Math.PI*.5,k=Math.PI*1.5,O=Ao(R==="tangential"?Math.PI/2-l:l),Q=O>M&&!bb(O-M)&&O<k;C==="outside"?(D=s.r+T,E=Q?"right":"left"):!E||E==="center"?(o===2*Math.PI&&s.r0===0?D=0:D=(s.r+s.r0)/2,E="center"):E==="left"?(D=s.r0+T,E=Q?"right":"left"):E==="right"&&(D=s.r-T,E=Q?"left":"right"),b.style.align=E,b.style.verticalAlign=v(y,"verticalAlign")||"middle",b.x=D*c+s.cx,b.y=D*u+s.cy;var H=0;R==="radial"?H=Ao(-l)+(Q?Math.PI:0):R==="tangential"?H=Ao(Math.PI/2-l)+(Q?Math.PI:0):Br(R)&&(H=R*Math.PI/180),b.rotation=Ao(H)});function v(m,y){var x=m.get(y);return x??i.get(y)}d.dirtyStyle()},e}(ms),$R="sunburstRootToNode",i9="sunburstHighlight",XIe="sunburstUnhighlight";function ZIe(r){r.registerAction({type:$R,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},n);function n(a,i){var s=Fb(e,[$R],a);if(s){var o=a.getViewRoot();o&&(e.direction=VF(o,s.node)?"rollUp":"drillDown"),a.resetViewRoot(s.node)}}}),r.registerAction({type:i9,update:"none"},function(e,t,n){e=He({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},a);function a(i){var s=Fb(e,[i9],i);s&&(e.dataIndex=s.node.dataIndex)}n.dispatchAction(He(e,{type:"highlight"}))}),r.registerAction({type:XIe,update:"updateView"},function(e,t,n){e=He({},e),n.dispatchAction(He(e,{type:"downplay"}))})}var JIe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){var s=this;this.seriesModel=t,this.api=a,this.ecModel=n;var o=t.getData(),l=o.tree.root,c=t.getViewRoot(),u=this.group,h=t.get("renderLabelForZeroData"),d=[];c.eachNode(function(y){d.push(y)});var A=this._oldChildren||[];g(d,A),m(l,c),this._initEvents(),this._oldChildren=d;function g(y,x){if(y.length===0&&x.length===0)return;new Nh(x,y,b,b).add(S).update(S).remove(Wt(S,null)).execute();function b(_){return _.getId()}function S(_,C){var w=_==null?null:y[_],B=C==null?null:x[C];p(w,B)}}function p(y,x){if(!h&&y&&!y.getValue()&&(y=null),y!==l&&x!==l){if(x&&x.piece)y?(x.piece.updateData(!1,y,t,n,a),o.setItemGraphicEl(y.dataIndex,x.piece)):v(x);else if(y){var b=new a9(y,t,n,a);u.add(b),o.setItemGraphicEl(y.dataIndex,b)}}}function v(y){y&&y.piece&&(u.remove(y.piece),y.piece=null)}function m(y,x){x.depth>0?(s.virtualPiece?s.virtualPiece.updateData(!1,y,t,n,a):(s.virtualPiece=new a9(y,t,n,a),u.add(s.virtualPiece)),x.piece.off("click"),s.virtualPiece.on("click",function(b){s._rootToNode(x.parentNode)})):s.virtualPiece&&(u.remove(s.virtualPiece),s.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(n){var a=!1,i=t.seriesModel.getViewRoot();i.eachNode(function(s){if(!a&&s.piece&&s.piece===n.target){var o=s.getModel().get("nodeClick");if(o==="rootToNode")t._rootToNode(s);else if(o==="link"){var l=s.getModel(),c=l.get("link");if(c){var u=l.get("target",!0)||"_blank";CC(c,u)}}a=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:$R,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,n){var a=n.getData(),i=a.getItemLayout(0);if(i){var s=t[0]-i.cx,o=t[1]-i.cy,l=Math.sqrt(s*s+o*o);return l<=i.r&&l>=i.r0}},e.type="sunburst",e}(nn),eEe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,n){var a={name:t.name,children:t.data};Wae(a);var i=this._levelModels=We(t.levels||[],function(l){return new Qr(l,this,n)},this),s=GF.createTree(a,this,o);function o(l){l.wrapMethod("getItemModel",function(c,u){var h=s.getNodeByDataIndex(u),d=i[h.depth];return d&&(c.parentModel=d),c})}return s.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var n=r.prototype.getDataParams.apply(this,arguments),a=this.getData().tree.getNodeByDataIndex(t);return n.treePathInfo=tT(a,this),n},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var n=this.getRawData().tree.root;(!t||t!==n&&!n.contains(t))&&(this._viewRoot=n)},e.prototype.enableAriaDecal=function(){Jne(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Sn);function Wae(r){var e=0;X(r.children,function(n){Wae(n);var a=n.value;$e(a)&&(a=a[0]),e+=a});var t=r.value;$e(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),$e(r.value)?r.value[0]=t:r.value=t}var s9=Math.PI/180;function tEe(r,e,t){e.eachSeriesByType(r,function(n){var a=n.get("center"),i=n.get("radius");$e(i)||(i=[0,i]),$e(a)||(a=[a,a]);var s=t.getWidth(),o=t.getHeight(),l=Math.min(s,o),c=ot(a[0],s),u=ot(a[1],o),h=ot(i[0],l/2),d=ot(i[1],l/2),A=-n.get("startAngle")*s9,g=n.get("minAngle")*s9,p=n.getData().tree.root,v=n.getViewRoot(),m=v.depth,y=n.get("sort");y!=null&&qae(v,y);var x=0;X(v.children,function(O){!isNaN(O.getValue())&&x++});var b=v.getValue(),S=Math.PI/(b||x)*2,_=v.depth>0,C=v.height-(_?-1:1),w=(d-h)/(C||1),B=n.get("clockwise"),D=n.get("stillShowZeroSum"),T=B?1:-1,E=function(O,Q){if(O){var H=Q;if(O!==p){var W=O.getValue(),te=b===0&&D?S:W*S;te<g&&(te=g),H=Q+T*te;var ee=O.depth-m-(_?-1:1),j=h+w*ee,G=h+w*(ee+1),Y=n.getLevelModel(O);if(Y){var Z=Y.get("r0",!0),de=Y.get("r",!0),he=Y.get("radius",!0);he!=null&&(Z=he[0],de=he[1]),Z!=null&&(j=ot(Z,l/2)),de!=null&&(G=ot(de,l/2))}O.setLayout({angle:te,startAngle:Q,endAngle:H,clockwise:B,cx:c,cy:u,r0:j,r:G})}if(O.children&&O.children.length){var fe=0;X(O.children,function(q){fe+=E(q,Q+fe)})}return H-Q}};if(_){var R=h,M=h+w,k=Math.PI*2;p.setLayout({angle:k,startAngle:A,endAngle:A+k,clockwise:B,cx:c,cy:u,r0:R,r:M})}E(v,A)})}function qae(r,e){var t=r.children||[];r.children=rEe(t,e),t.length&&X(r.children,function(n){qae(n,e)})}function rEe(r,e){if(It(e)){var t=We(r,function(a,i){var s=a.getValue();return{params:{depth:a.depth,height:a.height,dataIndex:a.dataIndex,getValue:function(){return s}},index:i}});return t.sort(function(a,i){return e(a.params,i.params)}),We(t,function(a){return r[a.index]})}else{var n=e==="asc";return r.sort(function(a,i){var s=(a.getValue()-i.getValue())*(n?1:-1);return s===0?(a.dataIndex-i.dataIndex)*(n?-1:1):s})}}function nEe(r){var e={};function t(n,a,i){for(var s=n;s&&s.depth>1;)s=s.parentNode;var o=a.getColorFromPalette(s.name||s.dataIndex+"",e);return n.depth>1&&dt(o)&&(o=L3(o,(n.depth-1)/(i-1)*.5)),o}r.eachSeriesByType("sunburst",function(n){var a=n.getData(),i=a.tree;i.eachNode(function(s){var o=s.getModel(),l=o.getModel("itemStyle").getItemStyle();l.fill||(l.fill=t(s,n,i.root.height));var c=a.ensureUniqueItemVisual(s.dataIndex,"style");He(c,l)})})}function aEe(r){r.registerChartView(JIe),r.registerSeriesModel(eEe),r.registerLayout(Wt(tEe,"sunburst")),r.registerProcessor(Wt(Uw,"sunburst")),r.registerVisual(nEe),ZIe(r)}var o9={color:"fill",borderColor:"stroke"},iEe={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},fh=wr(),sEe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,n){return Uh(null,this)},e.prototype.getDataParams=function(t,n,a){var i=r.prototype.getDataParams.call(this,t,n);return a&&(i.info=fh(a).info),i},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(Sn);function oEe(r,e){return e=e||[0,0],We(["x","y"],function(t,n){var a=this.getAxis(t),i=e[n],s=r[n]/2;return a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(i-s)-a.dataToCoord(i+s))},this)}function lEe(r){var e=r.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return r.dataToPoint(t)},size:ft(oEe,r)}}}function cEe(r,e){return e=e||[0,0],We([0,1],function(t){var n=e[t],a=r[t]/2,i=[],s=[];return i[t]=n-a,s[t]=n+a,i[1-t]=s[1-t]=e[1-t],Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(s)[t])},this)}function uEe(r){var e=r.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:r.getZoom()},api:{coord:function(t){return r.dataToPoint(t)},size:ft(cEe,r)}}}function hEe(r,e){var t=this.getAxis(),n=e instanceof Array?e[0]:e,a=(r instanceof Array?r[0]:r)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(n-a)-t.dataToCoord(n+a))}function dEe(r){var e=r.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return r.dataToPoint(t)},size:ft(hEe,r)}}}function AEe(r,e){return e=e||[0,0],We(["Radius","Angle"],function(t,n){var a="get"+t+"Axis",i=this[a](),s=e[n],o=r[n]/2,l=i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(s-o)-i.dataToCoord(s+o));return t==="Angle"&&(l=l*Math.PI/180),l},this)}function fEe(r){var e=r.getRadiusAxis(),t=r.getAngleAxis(),n=e.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:r.cx,cy:r.cy,r:n[1],r0:n[0]},api:{coord:function(a){var i=e.dataToRadius(a[0]),s=t.dataToAngle(a[1]),o=r.coordToPoint([i,s]);return o.push(i,s*Math.PI/180),o},size:ft(AEe,r)}}}function gEe(r){var e=r.getRect(),t=r.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:r.getCellWidth(),cellHeight:r.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(n,a){return r.dataToPoint(n,a)}}}}function Yae(r,e,t,n){return r&&(r.legacy||r.legacy!==!1&&!t&&!n&&e!=="tspan"&&(e==="text"||vt(r,"text")))}function Xae(r,e,t){var n=r,a,i,s;if(e==="text")s=n;else{s={},vt(n,"text")&&(s.text=n.text),vt(n,"rich")&&(s.rich=n.rich),vt(n,"textFill")&&(s.fill=n.textFill),vt(n,"textStroke")&&(s.stroke=n.textStroke),vt(n,"fontFamily")&&(s.fontFamily=n.fontFamily),vt(n,"fontSize")&&(s.fontSize=n.fontSize),vt(n,"fontStyle")&&(s.fontStyle=n.fontStyle),vt(n,"fontWeight")&&(s.fontWeight=n.fontWeight),i={type:"text",style:s,silent:!0},a={};var o=vt(n,"textPosition");t?a.position=o?n.textPosition:"inside":o&&(a.position=n.textPosition),vt(n,"textPosition")&&(a.position=n.textPosition),vt(n,"textOffset")&&(a.offset=n.textOffset),vt(n,"textRotation")&&(a.rotation=n.textRotation),vt(n,"textDistance")&&(a.distance=n.textDistance)}return l9(s,r),X(s.rich,function(l){l9(l,l)}),{textConfig:a,textContent:i}}function l9(r,e){e&&(e.font=e.textFont||e.font,vt(e,"textStrokeWidth")&&(r.lineWidth=e.textStrokeWidth),vt(e,"textAlign")&&(r.align=e.textAlign),vt(e,"textVerticalAlign")&&(r.verticalAlign=e.textVerticalAlign),vt(e,"textLineHeight")&&(r.lineHeight=e.textLineHeight),vt(e,"textWidth")&&(r.width=e.textWidth),vt(e,"textHeight")&&(r.height=e.textHeight),vt(e,"textBackgroundColor")&&(r.backgroundColor=e.textBackgroundColor),vt(e,"textPadding")&&(r.padding=e.textPadding),vt(e,"textBorderColor")&&(r.borderColor=e.textBorderColor),vt(e,"textBorderWidth")&&(r.borderWidth=e.textBorderWidth),vt(e,"textBorderRadius")&&(r.borderRadius=e.textBorderRadius),vt(e,"textBoxShadowColor")&&(r.shadowColor=e.textBoxShadowColor),vt(e,"textBoxShadowBlur")&&(r.shadowBlur=e.textBoxShadowBlur),vt(e,"textBoxShadowOffsetX")&&(r.shadowOffsetX=e.textBoxShadowOffsetX),vt(e,"textBoxShadowOffsetY")&&(r.shadowOffsetY=e.textBoxShadowOffsetY))}function c9(r,e,t){var n=r;n.textPosition=n.textPosition||t.position||"inside",t.offset!=null&&(n.textOffset=t.offset),t.rotation!=null&&(n.textRotation=t.rotation),t.distance!=null&&(n.textDistance=t.distance);var a=n.textPosition.indexOf("inside")>=0,i=r.fill||"#000";u9(n,e);var s=n.textFill==null;return a?s&&(n.textFill=t.insideFill||"#fff",!n.textStroke&&t.insideStroke&&(n.textStroke=t.insideStroke),!n.textStroke&&(n.textStroke=i),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(s&&(n.textFill=r.fill||t.outsideFill||"#000"),!n.textStroke&&t.outsideStroke&&(n.textStroke=t.outsideStroke)),n.text=e.text,n.rich=e.rich,X(e.rich,function(o){u9(o,o)}),n}function u9(r,e){e&&(vt(e,"fill")&&(r.textFill=e.fill),vt(e,"stroke")&&(r.textStroke=e.fill),vt(e,"lineWidth")&&(r.textStrokeWidth=e.lineWidth),vt(e,"font")&&(r.font=e.font),vt(e,"fontStyle")&&(r.fontStyle=e.fontStyle),vt(e,"fontWeight")&&(r.fontWeight=e.fontWeight),vt(e,"fontSize")&&(r.fontSize=e.fontSize),vt(e,"fontFamily")&&(r.fontFamily=e.fontFamily),vt(e,"align")&&(r.textAlign=e.align),vt(e,"verticalAlign")&&(r.textVerticalAlign=e.verticalAlign),vt(e,"lineHeight")&&(r.textLineHeight=e.lineHeight),vt(e,"width")&&(r.textWidth=e.width),vt(e,"height")&&(r.textHeight=e.height),vt(e,"backgroundColor")&&(r.textBackgroundColor=e.backgroundColor),vt(e,"padding")&&(r.textPadding=e.padding),vt(e,"borderColor")&&(r.textBorderColor=e.borderColor),vt(e,"borderWidth")&&(r.textBorderWidth=e.borderWidth),vt(e,"borderRadius")&&(r.textBorderRadius=e.borderRadius),vt(e,"shadowColor")&&(r.textBoxShadowColor=e.shadowColor),vt(e,"shadowBlur")&&(r.textBoxShadowBlur=e.shadowBlur),vt(e,"shadowOffsetX")&&(r.textBoxShadowOffsetX=e.shadowOffsetX),vt(e,"shadowOffsetY")&&(r.textBoxShadowOffsetY=e.shadowOffsetY),vt(e,"textShadowColor")&&(r.textShadowColor=e.textShadowColor),vt(e,"textShadowBlur")&&(r.textShadowBlur=e.textShadowBlur),vt(e,"textShadowOffsetX")&&(r.textShadowOffsetX=e.textShadowOffsetX),vt(e,"textShadowOffsetY")&&(r.textShadowOffsetY=e.textShadowOffsetY))}var Zae={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},h9=pr(Zae);nu(iu,function(r,e){return r[e]=1,r},{});iu.join(", ");var VC=["","style","shape","extra"],D0=wr();function lj(r,e,t,n,a){var i=r+"Animation",s=ny(r,n,a)||{},o=D0(e).userDuring;return s.duration>0&&(s.during=o?ft(xEe,{el:e,userDuring:o}):null,s.setToFinal=!0,s.scope=r),He(s,t[i]),s}function l5(r,e,t,n){n=n||{};var a=n.dataIndex,i=n.isInit,s=n.clearStyle,o=t.isAnimationEnabled(),l=D0(r),c=e.style;l.userDuring=e.during;var u={},h={};if(wEe(r,e,h),A9("shape",e,h),A9("extra",e,h),!i&&o&&(bEe(r,e,u),d9("shape",r,e,u),d9("extra",r,e,u),SEe(r,e,c,u)),h.style=c,pEe(r,h,s),vEe(r,e),o)if(i){var d={};X(VC,function(g){var p=g?e[g]:e;p&&p.enterFrom&&(g&&(d[g]=d[g]||{}),He(g?d[g]:d,p.enterFrom))});var A=lj("enter",r,e,t,a);A.duration>0&&r.animateFrom(d,A)}else mEe(r,e,a||0,t,u);Jae(r,e),c?r.dirty():r.markRedraw()}function Jae(r,e){for(var t=D0(r).leaveToProps,n=0;n<VC.length;n++){var a=VC[n],i=a?e[a]:e;i&&i.leaveTo&&(t||(t=D0(r).leaveToProps={}),a&&(t[a]=t[a]||{}),He(a?t[a]:t,i.leaveTo))}}function aT(r,e,t,n){if(r){var a=r.parent,i=D0(r).leaveToProps;if(i){var s=lj("update",r,e,t,0);s.done=function(){a.remove(r)},r.animateTo(i,s)}else a.remove(r)}}function ap(r){return r==="all"}function pEe(r,e,t){var n=e.style;if(!r.isGroup&&n){if(t){r.useStyle({});for(var a=r.animators,i=0;i<a.length;i++){var s=a[i];s.targetName==="style"&&s.changeTarget(r.style)}}r.setStyle(n)}e&&(e.style=null,e&&r.attr(e),e.style=n)}function mEe(r,e,t,n,a){if(a){var i=lj("update",r,e,n,t);i.duration>0&&r.animateFrom(a,i)}}function vEe(r,e){vt(e,"silent")&&(r.silent=e.silent),vt(e,"ignore")&&(r.ignore=e.ignore),r instanceof gl&&vt(e,"invisible")&&(r.invisible=e.invisible),r instanceof hr&&vt(e,"autoBatch")&&(r.autoBatch=e.autoBatch)}var Tc={},yEe={setTransform:function(r,e){return Tc.el[r]=e,this},getTransform:function(r){return Tc.el[r]},setShape:function(r,e){var t=Tc.el,n=t.shape||(t.shape={});return n[r]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(r){var e=Tc.el.shape;if(e)return e[r]},setStyle:function(r,e){var t=Tc.el,n=t.style;return n&&(n[r]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(r){var e=Tc.el.style;if(e)return e[r]},setExtra:function(r,e){var t=Tc.el.extra||(Tc.el.extra={});return t[r]=e,this},getExtra:function(r){var e=Tc.el.extra;if(e)return e[r]}};function xEe(){var r=this,e=r.el;if(e){var t=D0(e).userDuring,n=r.userDuring;if(t!==n){r.el=r.userDuring=null;return}Tc.el=e,n(yEe)}}function d9(r,e,t,n){var a=t[r];if(a){var i=e[r],s;if(i){var o=t.transition,l=a.transition;if(l)if(!s&&(s=n[r]={}),ap(l))He(s,i);else for(var c=Xr(l),u=0;u<c.length;u++){var h=c[u],d=i[h];s[h]=d}else if(ap(o)||rr(o,r)>=0){!s&&(s=n[r]={});for(var A=pr(i),u=0;u<A.length;u++){var h=A[u],d=i[h];_Ee(a[h],d)&&(s[h]=d)}}}}}function A9(r,e,t){var n=e[r];if(n)for(var a=t[r]={},i=pr(n),s=0;s<i.length;s++){var o=i[s];a[o]=C1(n[o])}}function bEe(r,e,t){for(var n=e.transition,a=ap(n)?iu:Xr(n||[]),i=0;i<a.length;i++){var s=a[i];if(!(s==="style"||s==="shape"||s==="extra")){var o=r[s];t[s]=o}}}function wEe(r,e,t){for(var n=0;n<h9.length;n++){var a=h9[n],i=Zae[a],s=e[a];s&&(t[i[0]]=s[0],t[i[1]]=s[1])}for(var n=0;n<iu.length;n++){var o=iu[n];e[o]!=null&&(t[o]=e[o])}}function SEe(r,e,t,n){if(t){var a=r.style,i;if(a){var s=t.transition,o=e.transition;if(s&&!ap(s)){var l=Xr(s);!i&&(i=n.style={});for(var c=0;c<l.length;c++){var u=l[c],h=a[u];i[u]=h}}else if(r.getAnimationStyleProps&&(ap(o)||ap(s)||rr(o,"style")>=0)){var d=r.getAnimationStyleProps(),A=d?d.style:null;if(A){!i&&(i=n.style={});for(var g=pr(t),c=0;c<g.length;c++){var u=g[c];if(A[u]){var h=a[u];i[u]=h}}}}}}}function _Ee(r,e){return Ki(r)?r!==e:r!=null&&isFinite(r)}var eie=wr(),CEe=["percent","easing","shape","style","extra"];function tie(r){r.stopAnimation("keyframe"),r.attr(eie(r))}function $C(r,e,t){if(!(!t.isAnimationEnabled()||!e)){if($e(e)){X(e,function(o){$C(r,o,t)});return}var n=e.keyframes,a=e.duration;if(t&&a==null){var i=ny("enter",t,0);a=i&&i.duration}if(!(!n||!a)){var s=eie(r);X(VC,function(o){if(!(o&&!r[o])){var l;n.sort(function(c,u){return c.percent-u.percent}),X(n,function(c){var u=r.animators,h=o?c[o]:c;if(h){var d=pr(h);if(o||(d=Ur(d,function(p){return rr(CEe,p)<0})),!!d.length){l||(l=r.animate(o,e.loop,!0),l.scope="keyframe");for(var A=0;A<u.length;A++)u[A]!==l&&u[A].targetName===l.targetName&&u[A].stopTracks(d);o&&(s[o]=s[o]||{});var g=o?s[o]:s;X(d,function(p){g[p]=((o?r[o]:r)||{})[p]}),l.whenWithKeys(a*c.percent,h,d,c.easing)}}}),l&&l.delay(e.delay||0).duration(a).start(e.easing)}})}}}var gh="emphasis",lA="normal",cj="blur",uj="select",$A=[lA,gh,cj,uj],Q4={normal:["itemStyle"],emphasis:[gh,"itemStyle"],blur:[cj,"itemStyle"],select:[uj,"itemStyle"]},z4={normal:["label"],emphasis:[gh,"label"],blur:[cj,"label"],select:[uj,"label"]},BEe=["x","y"],NEe="e\0\0",Uo={normal:{},emphasis:{},blur:{},select:{}},TEe={cartesian2d:lEe,geo:uEe,single:dEe,polar:fEe,calendar:gEe};function KR(r){return r instanceof hr}function WR(r){return r instanceof gl}function IEe(r,e){e.copyTransform(r),WR(e)&&WR(r)&&(e.setStyle(r.style),e.z=r.z,e.z2=r.z2,e.zlevel=r.zlevel,e.invisible=r.invisible,e.ignore=r.ignore,KR(e)&&KR(r)&&e.setShape(r.shape))}var EEe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){this._progressiveEls=null;var s=this._data,o=t.getData(),l=this.group,c=f9(t,o,n,a);s||l.removeAll(),o.diff(s).add(function(h){G4(a,null,h,c(h,i),t,l,o)}).remove(function(h){var d=s.getItemGraphicEl(h);d&&aT(d,fh(d).option,t)}).update(function(h,d){var A=s.getItemGraphicEl(d);G4(a,A,h,c(h,i),t,l,o)}).execute();var u=t.get("clip",!0)?jw(t.coordinateSystem,!1,t):null;u?l.setClipPath(u):l.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(t,n,a){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,n,a,i,s){var o=n.getData(),l=f9(n,o,a,i),c=this._progressiveEls=[];function u(A){A.isGroup||(A.incremental=!0,A.ensureState("emphasis").hoverLayer=!0)}for(var h=t.start;h<t.end;h++){var d=G4(null,null,h,l(h,s),n,this.group,o);d&&(d.traverse(u),c.push(d))}},e.prototype.eachRendered=function(t){nf(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,n,a,i){var s=n.element;if(s==null||a.name===s)return!0;for(;(a=a.__hostTarget||a.parent)&&a!==this.group;)if(a.name===s)return!0;return!1},e.type="custom",e}(nn);function hj(r){var e=r.type,t;if(e==="path"){var n=r.shape,a=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,i=aie(n);t=LN(i,null,a,n.layout||"center"),fh(t).customPathData=i}else if(e==="image")t=new fi({}),fh(t).customImagePath=r.style.image;else if(e==="text")t=new Cr({});else if(e==="group")t=new Ht;else{if(e==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var s=Jk(e);if(!s){var o="";Or(o)}t=new s}return fh(t).customGraphicType=e,t.name=r.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function dj(r,e,t,n,a,i,s){tie(e);var o=a&&a.normal.cfg;o&&e.setTextConfig(o),n&&n.transition==null&&(n.transition=BEe);var l=n&&n.style;if(l){if(e.type==="text"){var c=l;vt(c,"textFill")&&(c.fill=c.textFill),vt(c,"textStroke")&&(c.stroke=c.textStroke)}var u=void 0,h=KR(e)?l.decal:null;r&&h&&(h.dirty=!0,u=B0(h,r)),l.__decalPattern=u}if(WR(e)&&l){var u=l.__decalPattern;u&&(l.decal=u)}l5(e,n,i,{dataIndex:t,isInit:s,clearStyle:!0}),$C(e,n.keyframeAnimation,i)}function rie(r,e,t,n,a){var i=e.isGroup?null:e,s=a&&a[r].cfg;if(i){var o=i.ensureState(r);if(n===!1){var l=i.getState(r);l&&(l.style=null)}else o.style=n||null;s&&(o.textConfig=s),xp(i)}}function DEe(r,e,t){if(!r.isGroup){var n=r,a=t.currentZ,i=t.currentZLevel;n.z=a,n.zlevel=i;var s=e.z2;s!=null&&(n.z2=s||0);for(var o=0;o<$A.length;o++)MEe(n,e,$A[o])}}function MEe(r,e,t){var n=t===lA,a=n?e:KC(e,t),i=a?a.z2:null,s;i!=null&&(s=n?r:r.ensureState(t),s.z2=i||0)}function f9(r,e,t,n){var a=r.get("renderItem"),i=r.coordinateSystem,s={};i&&(s=i.prepareCustoms?i.prepareCustoms(i):TEe[i.type](i));for(var o=Lt({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:b,style:_,ordinalRawValue:S,styleEmphasis:C,visual:D,barLayout:T,currentSeriesIndices:E,font:R},s.api||{}),l={context:{},seriesId:r.id,seriesName:r.name,seriesIndex:r.seriesIndex,coordSys:s.coordSys,dataInsideLength:e.count(),encode:REe(r.getData())},c,u,h={},d={},A={},g={},p=0;p<$A.length;p++){var v=$A[p];A[v]=r.getModel(Q4[v]),g[v]=r.getModel(z4[v])}function m(M){return M===c?u||(u=e.getItemModel(M)):e.getItemModel(M)}function y(M,k){return e.hasItemOption?M===c?h[k]||(h[k]=m(M).getModel(Q4[k])):m(M).getModel(Q4[k]):A[k]}function x(M,k){return e.hasItemOption?M===c?d[k]||(d[k]=m(M).getModel(z4[k])):m(M).getModel(z4[k]):g[k]}return function(M,k){return c=M,u=null,h={},d={},a&&a(Lt({dataIndexInside:M,dataIndex:e.getRawIndex(M),actionType:k?k.type:null},l),o)};function b(M,k){return k==null&&(k=c),e.getStore().get(e.getDimensionIndex(M||0),k)}function S(M,k){k==null&&(k=c),M=M||0;var O=e.getDimensionInfo(M);if(!O){var Q=e.getDimensionIndex(M);return Q>=0?e.getStore().get(Q,k):void 0}var H=e.get(O.name,k),W=O&&O.ordinalMeta;return W?W.categories[H]:H}function _(M,k){k==null&&(k=c);var O=e.getItemVisual(k,"style"),Q=O&&O.fill,H=O&&O.opacity,W=y(k,lA).getItemStyle();Q!=null&&(W.fill=Q),H!=null&&(W.opacity=H);var te={inheritColor:dt(Q)?Q:"#000"},ee=x(k,lA),j=bn(ee,null,te,!1,!0);j.text=ee.getShallow("show")?$t(r.getFormattedLabel(k,lA),T0(e,k)):null;var G=SC(ee,te,!1);return B(M,W),W=c9(W,j,G),M&&w(W,M),W.legacy=!0,W}function C(M,k){k==null&&(k=c);var O=y(k,gh).getItemStyle(),Q=x(k,gh),H=bn(Q,null,null,!0,!0);H.text=Q.getShallow("show")?Zc(r.getFormattedLabel(k,gh),r.getFormattedLabel(k,lA),T0(e,k)):null;var W=SC(Q,null,!0);return B(M,O),O=c9(O,H,W),M&&w(O,M),O.legacy=!0,O}function w(M,k){for(var O in k)vt(k,O)&&(M[O]=k[O])}function B(M,k){M&&(M.textFill&&(k.textFill=M.textFill),M.textPosition&&(k.textPosition=M.textPosition))}function D(M,k){if(k==null&&(k=c),vt(o9,M)){var O=e.getItemVisual(k,"style");return O?O[o9[M]]:null}if(vt(iEe,M))return e.getItemVisual(k,M)}function T(M){if(i.type==="cartesian2d"){var k=i.getBaseAxis();return w2e(Lt({axis:k},M))}}function E(){return t.getCurrentSeriesIndices()}function R(M){return eF(M,t)}}function REe(r){var e={};return X(r.dimensions,function(t){var n=r.getDimensionInfo(t);if(!n.isExtraCoord){var a=n.coordDim,i=e[a]=e[a]||[];i[n.coordDimIndex]=r.getDimensionIndex(t)}}),e}function G4(r,e,t,n,a,i,s){if(!n){i.remove(e);return}var o=Aj(r,e,t,n,a,i);return o&&s.setItemGraphicEl(t,o),o&&qn(o,n.focus,n.blurScope,n.emphasisDisabled),o}function Aj(r,e,t,n,a,i){var s=-1,o=e;e&&nie(e,n,a)&&(s=rr(i.childrenRef(),e),e=null);var l=!e,c=e;c?c.clearStates():(c=hj(n),o&&IEe(o,c)),n.morph===!1?c.disableMorphing=!0:c.disableMorphing&&(c.disableMorphing=!1),Uo.normal.cfg=Uo.normal.conOpt=Uo.emphasis.cfg=Uo.emphasis.conOpt=Uo.blur.cfg=Uo.blur.conOpt=Uo.select.cfg=Uo.select.conOpt=null,Uo.isLegacy=!1,PEe(c,t,n,a,l,Uo),LEe(c,t,n,a,l),dj(r,c,t,n,Uo,a,l),vt(n,"info")&&(fh(c).info=n.info);for(var u=0;u<$A.length;u++){var h=$A[u];if(h!==lA){var d=KC(n,h),A=fj(n,d,h);rie(h,c,d,A,Uo)}}return DEe(c,n,a),n.type==="group"&&kEe(r,c,t,n,a),s>=0?i.replaceAt(c,s):i.add(c),c}function nie(r,e,t){var n=fh(r),a=e.type,i=e.shape,s=e.style;return t.isUniversalTransitionEnabled()||a!=null&&a!==n.customGraphicType||a==="path"&&UEe(i)&&aie(i)!==n.customPathData||a==="image"&&vt(s,"image")&&s.image!==n.customImagePath}function LEe(r,e,t,n,a){var i=t.clipPath;if(i===!1)r&&r.getClipPath()&&r.removeClipPath();else if(i){var s=r.getClipPath();s&&nie(s,i,n)&&(s=null),s||(s=hj(i),r.setClipPath(s)),dj(null,s,e,i,null,n,a)}}function PEe(r,e,t,n,a,i){if(!r.isGroup){g9(t,null,i),g9(t,gh,i);var s=i.normal.conOpt,o=i.emphasis.conOpt,l=i.blur.conOpt,c=i.select.conOpt;if(s!=null||o!=null||c!=null||l!=null){var u=r.getTextContent();if(s===!1)u&&r.removeTextContent();else{s=i.normal.conOpt=s||{type:"text"},u?u.clearStates():(u=hj(s),r.setTextContent(u)),dj(null,u,e,s,null,n,a);for(var h=s&&s.style,d=0;d<$A.length;d++){var A=$A[d];if(A!==lA){var g=i[A].conOpt;rie(A,u,g,fj(s,g,A),null)}}h?u.dirty():u.markRedraw()}}}}function g9(r,e,t){var n=e?KC(r,e):r,a=e?fj(r,n,gh):r.style,i=r.type,s=n?n.textConfig:null,o=r.textContent,l=o?e?KC(o,e):o:null;if(a&&(t.isLegacy||Yae(a,i,!!s,!!l))){t.isLegacy=!0;var c=Xae(a,i,!e);!s&&c.textConfig&&(s=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!e&&l){var u=l;!u.type&&(u.type="text")}var h=e?t[e]:t.normal;h.cfg=s,h.conOpt=l}function KC(r,e){return e?r?r[e]:null:r}function fj(r,e,t){var n=e&&e.style;return n==null&&t===gh&&r&&(n=r.styleEmphasis),n}function kEe(r,e,t,n,a){var i=n.children,s=i?i.length:0,o=n.$mergeChildren,l=o==="byName"||n.diffChildrenByName,c=o===!1;if(!(!s&&!l&&!c)){if(l){jEe({api:r,oldChildren:e.children()||[],newChildren:i||[],dataIndex:t,seriesModel:a,group:e});return}c&&e.removeAll();for(var u=0;u<s;u++){var h=i[u],d=e.childAt(u);h?(h.ignore==null&&(h.ignore=!1),Aj(r,d,t,h,a,e)):d.ignore=!0}for(var A=e.childCount()-1;A>=u;A--){var g=e.childAt(A);FEe(e,g,a)}}}function FEe(r,e,t){e&&aT(e,fh(r).option,t)}function jEe(r){new Nh(r.oldChildren,r.newChildren,p9,p9,r).add(m9).update(m9).remove(OEe).execute()}function p9(r,e){var t=r&&r.name;return t??NEe+e}function m9(r,e){var t=this.context,n=r!=null?t.newChildren[r]:null,a=e!=null?t.oldChildren[e]:null;Aj(t.api,a,t.dataIndex,n,t.seriesModel,t.group)}function OEe(r){var e=this.context,t=e.oldChildren[r];t&&aT(t,fh(t).option,e.seriesModel)}function aie(r){return r&&(r.pathData||r.d)}function UEe(r){return r&&(vt(r,"pathData")||vt(r,"d"))}function HEe(r){r.registerChartView(EEe),r.registerSeriesModel(sEe)}var pg=wr(),v9=Ft,V4=ft,gj=function(){function r(){this._dragging=!1,this.animationThreshold=15}return r.prototype.render=function(e,t,n,a){var i=t.get("value"),s=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,!(!a&&this._lastValue===i&&this._lastStatus===s)){this._lastValue=i,this._lastStatus=s;var o=this._group,l=this._handle;if(!s||s==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var c={};this.makeElOption(c,i,e,t,n);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(e,t);if(!o)o=this._group=new Ht,this.createPointerEl(o,c,e,t),this.createLabelEl(o,c,e,t),n.getZr().add(o);else{var d=Wt(y9,t,h);this.updatePointerEl(o,c,d),this.updateLabelEl(o,c,d,t)}b9(o,t,!0),this._renderHandle(i)}},r.prototype.remove=function(e){this.clear(e)},r.prototype.dispose=function(e){this.clear(e)},r.prototype.determineAnimation=function(e,t){var n=t.get("animation"),a=e.axis,i=a.type==="category",s=t.get("snap");if(!s&&!i)return!1;if(n==="auto"||n==null){var o=this.animationThreshold;if(i&&a.getBandWidth()>o)return!0;if(s){var l=FF(e).seriesDataCount,c=a.getExtent();return Math.abs(c[0]-c[1])/l>o}return!1}return n===!0},r.prototype.makeElOption=function(e,t,n,a,i){},r.prototype.createPointerEl=function(e,t,n,a){var i=t.pointer;if(i){var s=pg(e).pointerEl=new jp[i.type](v9(t.pointer));e.add(s)}},r.prototype.createLabelEl=function(e,t,n,a){if(t.label){var i=pg(e).labelEl=new Cr(v9(t.label));e.add(i),x9(i,a)}},r.prototype.updatePointerEl=function(e,t,n){var a=pg(e).pointerEl;a&&t.pointer&&(a.setStyle(t.pointer.style),n(a,{shape:t.pointer.shape}))},r.prototype.updateLabelEl=function(e,t,n,a){var i=pg(e).labelEl;i&&(i.setStyle(t.label.style),n(i,{x:t.label.x,y:t.label.y}),x9(i,a))},r.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,n=this._api.getZr(),a=this._handle,i=t.getModel("handle"),s=t.get("status");if(!i.get("show")||!s||s==="hide"){a&&n.remove(a),this._handle=null;return}var o;this._handle||(o=!0,a=this._handle=Dw(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){Sh(c.event)},onmousedown:V4(this._onHandleDragMove,this,0,0),drift:V4(this._onHandleDragMove,this),ondragend:V4(this._onHandleDragEnd,this)}),n.add(a)),b9(a,t,!1),a.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=i.get("size");$e(l)||(l=[l,l]),a.scaleX=l[0]/2,a.scaleY=l[1]/2,uy(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},r.prototype._moveHandleToValue=function(e,t){y9(this._axisPointerModel,!t&&this._moveAnimation,this._handle,$4(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},r.prototype._onHandleDragMove=function(e,t){var n=this._handle;if(n){this._dragging=!0;var a=this.updateHandleTransform($4(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=a,n.stopAnimation(),n.attr($4(a)),pg(n).lastProp=null,this._doDispatchAxisPointer()}},r.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},r.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},r.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,a=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),a&&t.remove(a),this._group=null,this._handle=null,this._payloadInfo=null),Ib(this,"_doDispatchAxisPointer")},r.prototype.doClear=function(){},r.prototype.buildLabel=function(e,t,n){return n=n||0,{x:e[n],y:e[1-n],width:t[n],height:t[1-n]}},r}();function y9(r,e,t,n){iie(pg(t).lastProp,n)||(pg(t).lastProp=n,e?Er(t,n,r):(t.stopAnimation(),t.attr(n)))}function iie(r,e){if(Pt(r)&&Pt(e)){var t=!0;return X(e,function(n,a){t=t&&iie(r[a],n)}),!!t}else return r===e}function x9(r,e){r[e.get(["label","show"])?"show":"hide"]()}function $4(r){return{x:r.x||0,y:r.y||0,rotation:r.rotation||0}}function b9(r,e,t){var n=e.get("z"),a=e.get("zlevel");r&&r.traverse(function(i){i.type!=="group"&&(n!=null&&(i.z=n),a!=null&&(i.zlevel=a),i.silent=t)})}function pj(r){var e=r.get("type"),t=r.getModel(e+"Style"),n;return e==="line"?(n=t.getLineStyle(),n.fill=null):e==="shadow"&&(n=t.getAreaStyle(),n.stroke=null),n}function sie(r,e,t,n,a){var i=t.get("value"),s=oie(i,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),o=t.getModel("label"),l=sy(o.get("padding")||0),c=o.getFont(),u=_w(s,c),h=a.position,d=u.width+l[1]+l[3],A=u.height+l[0]+l[2],g=a.align;g==="right"&&(h[0]-=d),g==="center"&&(h[0]-=d/2);var p=a.verticalAlign;p==="bottom"&&(h[1]-=A),p==="middle"&&(h[1]-=A/2),QEe(h,d,A,n);var v=o.get("backgroundColor");(!v||v==="auto")&&(v=e.get(["axisLine","lineStyle","color"])),r.label={x:h[0],y:h[1],style:bn(o,{text:s,font:c,fill:o.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function QEe(r,e,t,n){var a=n.getWidth(),i=n.getHeight();r[0]=Math.min(r[0]+e,a)-e,r[1]=Math.min(r[1]+t,i)-t,r[0]=Math.max(r[0],0),r[1]=Math.max(r[1],0)}function oie(r,e,t,n,a){r=e.scale.parse(r);var i=e.scale.getLabel({value:r},{precision:a.precision}),s=a.formatter;if(s){var o={value:BF(e,{value:r}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};X(n,function(l){var c=t.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,h=c&&c.getDataParams(u);h&&o.seriesData.push(h)}),dt(s)?i=s.replace("{value}",i):It(s)&&(i=s(o))}return i}function mj(r,e,t){var n=bo();return kp(n,n,t.rotation),au(n,n,t.position),ec([r.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],n)}function lie(r,e,t,n,a,i){var s=fs.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=a.get(["label","margin"]),sie(e,n,a,i,{position:mj(n.axis,r,t),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function vj(r,e,t){return t=t||0,{x1:r[t],y1:r[1-t],x2:e[t],y2:e[1-t]}}function cie(r,e,t){return t=t||0,{x:r[t],y:r[1-t],width:e[t],height:e[1-t]}}function w9(r,e,t,n,a,i){return{cx:r,cy:e,r0:t,r:n,startAngle:a,endAngle:i,clockwise:!0}}var zEe=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,n,a,i,s){var o=a.axis,l=o.grid,c=i.get("type"),u=S9(l,o).getOtherAxis(o).getGlobalExtent(),h=o.toGlobalCoord(o.dataToCoord(n,!0));if(c&&c!=="none"){var d=pj(i),A=GEe[c](o,h,u);A.style=d,t.graphicKey=A.type,t.pointer=A}var g=TR(l.model,a);lie(n,t,g,a,i,s)},e.prototype.getHandleTransform=function(t,n,a){var i=TR(n.axis.grid.model,n,{labelInside:!1});i.labelMargin=a.get(["handle","margin"]);var s=mj(n.axis,t,i);return{x:s[0],y:s[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,n,a,i){var s=a.axis,o=s.grid,l=s.getGlobalExtent(!0),c=S9(o,s).getOtherAxis(s).getGlobalExtent(),u=s.dim==="x"?0:1,h=[t.x,t.y];h[u]+=n[u],h[u]=Math.min(l[1],h[u]),h[u]=Math.max(l[0],h[u]);var d=(c[1]+c[0])/2,A=[d,d];A[u]=h[u];var g=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:t.rotation,cursorPoint:A,tooltipOption:g[u]}},e}(gj);function S9(r,e){var t={};return t[e.dim+"AxisIndex"]=e.index,r.getCartesian(t)}var GEe={line:function(r,e,t){var n=vj([e,t[0]],[e,t[1]],_9(r));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(r,e,t){var n=Math.max(1,r.getBandWidth()),a=t[1]-t[0];return{type:"Rect",shape:cie([e-n/2,t[0]],[n,a],_9(r))}}};function _9(r){return r.dim==="x"?0:1}var VEe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(gr),nh=wr(),$Ee=X;function uie(r,e,t){if(!fr.node){var n=e.getZr();nh(n).records||(nh(n).records={}),KEe(n,e);var a=nh(n).records[r]||(nh(n).records[r]={});a.handler=t}}function KEe(r,e){if(nh(r).initialized)return;nh(r).initialized=!0,t("click",Wt(C9,"click")),t("mousemove",Wt(C9,"mousemove")),t("globalout",qEe);function t(n,a){r.on(n,function(i){var s=YEe(e);$Ee(nh(r).records,function(o){o&&a(o,i,s.dispatchAction)}),WEe(s.pendings,e)})}}function WEe(r,e){var t=r.showTip.length,n=r.hideTip.length,a;t?a=r.showTip[t-1]:n&&(a=r.hideTip[n-1]),a&&(a.dispatchAction=null,e.dispatchAction(a))}function qEe(r,e,t){r.handler("leave",null,t)}function C9(r,e,t,n){e.handler(r,t,n)}function YEe(r){var e={showTip:[],hideTip:[]},t=function(n){var a=e[n.type];a?a.push(n):(n.dispatchAction=t,r.dispatchAction(n))};return{dispatchAction:t,pendings:e}}function qR(r,e){if(!fr.node){var t=e.getZr(),n=(nh(t).records||{})[r];n&&(nh(t).records[r]=null)}}var XEe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=n.getComponent("tooltip"),s=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";uie("axisPointer",a,function(o,l,c){s!=="none"&&(o==="leave"||s.indexOf(o)>=0)&&c({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,n){qR("axisPointer",n)},e.prototype.dispose=function(t,n){qR("axisPointer",n)},e.type="axisPointer",e}(Gn);function hie(r,e){var t=[],n=r.seriesIndex,a;if(n==null||!(a=e.getSeriesByIndex(n)))return{point:[]};var i=a.getData(),s=vp(i,r);if(s==null||s<0||$e(s))return{point:[]};var o=i.getItemGraphicEl(s),l=a.coordinateSystem;if(a.getTooltipPosition)t=a.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(r.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),h=u.dim,d=c.dim,A=h==="x"||h==="radius"?1:0,g=i.mapDimension(d),p=[];p[A]=i.get(g,s),p[1-A]=i.get(i.getCalculationInfo("stackResultDimension"),s),t=l.dataToPoint(p)||[]}else t=l.dataToPoint(i.getValues(We(l.dimensions,function(m){return i.mapDimension(m)}),s))||[];else if(o){var v=o.getBoundingRect().clone();v.applyTransform(o.transform),t=[v.x+v.width/2,v.y+v.height/2]}return{point:t,el:o}}var B9=wr();function ZEe(r,e,t){var n=r.currTrigger,a=[r.x,r.y],i=r,s=r.dispatchAction||ft(t.dispatchAction,t),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){c5(a)&&(a=hie({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},e).point);var l=c5(a),c=i.axesInfo,u=o.axesInfo,h=n==="leave"||c5(a),d={},A={},g={list:[],map:{}},p={showPointer:Wt(e4e,A),showTooltip:Wt(t4e,g)};X(o.coordSysMap,function(m,y){var x=l||m.containPoint(a);X(o.coordSysAxesInfo[y],function(b,S){var _=b.axis,C=i4e(c,b);if(!h&&x&&(!c||C)){var w=C&&C.value;w==null&&!l&&(w=_.pointToData(a)),w!=null&&N9(b,w,p,!1,d)}})});var v={};return X(u,function(m,y){var x=m.linkGroup;x&&!A[y]&&X(x.axesInfo,function(b,S){var _=A[S];if(b!==m&&_){var C=_.value;x.mapper&&(C=m.axis.scale.parse(x.mapper(C,T9(b),T9(m)))),v[m.key]=C}})}),X(v,function(m,y){N9(u[y],m,p,!0,d)}),r4e(A,u,d),n4e(g,a,r,s),a4e(u,s,t),d}}function N9(r,e,t,n,a){var i=r.axis;if(!(i.scale.isBlank()||!i.containData(e))){if(!r.involveSeries){t.showPointer(r,e);return}var s=JEe(e,r),o=s.payloadBatch,l=s.snapToValue;o[0]&&a.seriesIndex==null&&He(a,o[0]),!n&&r.snap&&i.containData(l)&&l!=null&&(e=l),t.showPointer(r,e,o),t.showTooltip(r,s,l)}}function JEe(r,e){var t=e.axis,n=t.dim,a=r,i=[],s=Number.MAX_VALUE,o=-1;return X(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(n),h,d;if(l.getAxisTooltipData){var A=l.getAxisTooltipData(u,r,t);d=A.dataIndices,h=A.nestestValue}else{if(d=l.getData().indicesOfNearest(u[0],r,t.type==="category"?.5:null),!d.length)return;h=l.getData().get(u[0],d[0])}if(!(h==null||!isFinite(h))){var g=r-h,p=Math.abs(g);p<=s&&((p<s||g>=0&&o<0)&&(s=p,o=g,a=h,i.length=0),X(d,function(v){i.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:i,snapToValue:a}}function e4e(r,e,t,n){r[e.key]={value:t,payloadBatch:n}}function t4e(r,e,t,n){var a=t.payloadBatch,i=e.axis,s=i.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!a.length)){var l=e.coordSys.model,c=kb(l),u=r.map[c];u||(u=r.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},r.list.push(u)),u.dataByAxis.push({axisDim:i.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:n,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:a.slice()})}}function r4e(r,e,t){var n=t.axesInfo=[];X(e,function(a,i){var s=a.axisPointerModel.option,o=r[i];o?(!a.useHandle&&(s.status="show"),s.value=o.value,s.seriesDataIndices=(o.payloadBatch||[]).slice()):!a.useHandle&&(s.status="hide"),s.status==="show"&&n.push({axisDim:a.axis.dim,axisIndex:a.axis.model.componentIndex,value:s.value})})}function n4e(r,e,t,n){if(c5(e)||!r.list.length){n({type:"hideTip"});return}var a=((r.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:a.dataIndexInside,dataIndex:a.dataIndex,seriesIndex:a.seriesIndex,dataByCoordSys:r.list})}function a4e(r,e,t){var n=t.getZr(),a="axisPointerLastHighlights",i=B9(n)[a]||{},s=B9(n)[a]={};X(r,function(c,u){var h=c.axisPointerModel.option;h.status==="show"&&c.triggerEmphasis&&X(h.seriesDataIndices,function(d){var A=d.seriesIndex+" | "+d.dataIndex;s[A]=d})});var o=[],l=[];X(i,function(c,u){!s[u]&&l.push(c)}),X(s,function(c,u){!i[u]&&o.push(c)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function i4e(r,e){for(var t=0;t<(r||[]).length;t++){var n=r[t];if(e.axis.dim===n.axisDim&&e.axis.model.componentIndex===n.axisIndex)return n}}function T9(r){var e=r.axis.model,t={},n=t.axisDim=r.axis.dim;return t.axisIndex=t[n+"AxisIndex"]=e.componentIndex,t.axisName=t[n+"AxisName"]=e.name,t.axisId=t[n+"AxisId"]=e.id,t}function c5(r){return!r||r[0]==null||isNaN(r[0])||r[1]==null||isNaN(r[1])}function Gw(r){Qp.registerAxisPointerClass("CartesianAxisPointer",zEe),r.registerComponentModel(VEe),r.registerComponentView(XEe),r.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!$e(t)&&(e.axisPointer.link=[t])}}),r.registerProcessor(r.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=g5e(e,t)}),r.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},ZEe)}function s4e(r){sr(One),sr(Gw)}var o4e=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,n,a,i,s){var o=a.axis;o.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=o.polar,c=l.getOtherAxis(o),u=c.getExtent(),h=o.dataToCoord(n),d=i.get("type");if(d&&d!=="none"){var A=pj(i),g=c4e[d](o,l,h,u);g.style=A,t.graphicKey=g.type,t.pointer=g}var p=i.get(["label","margin"]),v=l4e(n,a,i,l,p);sie(t,a,i,s,v)},e}(gj);function l4e(r,e,t,n,a){var i=e.axis,s=i.dataToCoord(r),o=n.getAngleAxis().getExtent()[0];o=o/180*Math.PI;var l=n.getRadiusAxis().getExtent(),c,u,h;if(i.dim==="radius"){var d=bo();kp(d,d,o),au(d,d,[n.cx,n.cy]),c=ec([s,-a],d);var A=e.getModel("axisLabel").get("rotate")||0,g=fs.innerTextLayout(o,A*Math.PI/180,-1);u=g.textAlign,h=g.textVerticalAlign}else{var p=l[1];c=n.coordToPoint([p+a,s]);var v=n.cx,m=n.cy;u=Math.abs(c[0]-v)/p<.3?"center":c[0]>v?"left":"right",h=Math.abs(c[1]-m)/p<.3?"middle":c[1]>m?"top":"bottom"}return{position:c,align:u,verticalAlign:h}}var c4e={line:function(r,e,t,n){return r.dim==="angle"?{type:"Line",shape:vj(e.coordToPoint([n[0],t]),e.coordToPoint([n[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(r,e,t,n){var a=Math.max(1,r.getBandWidth()),i=Math.PI/180;return r.dim==="angle"?{type:"Sector",shape:w9(e.cx,e.cy,n[0],n[1],(-t-a/2)*i,(-t+a/2)*i)}:{type:"Sector",shape:w9(e.cx,e.cy,t-a/2,t+a/2,0,Math.PI*2)}}},u4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var n,a=this.ecModel;return a.eachComponent(t,function(i){i.getCoordSysModel()===this&&(n=i)},this),n},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(gr),yj=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Na).models[0]},e.type="polarAxis",e}(gr);Ia(yj,Pw);var h4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e}(yj),d4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e}(yj),xj=function(r){Pe(e,r);function e(t,n){return r.call(this,"radius",t,n)||this}return e.prototype.pointToData=function(t,n){return this.polar.pointToData(t,n)[this.dim==="radius"?0:1]},e}(lc);xj.prototype.dataToRadius=lc.prototype.dataToCoord;xj.prototype.radiusToData=lc.prototype.coordToData;var A4e=wr(),bj=function(r){Pe(e,r);function e(t,n){return r.call(this,"angle",t,n||[0,360])||this}return e.prototype.pointToData=function(t,n){return this.polar.pointToData(t,n)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,n=t.getLabelModel(),a=t.scale,i=a.getExtent(),s=a.count();if(i[1]-i[0]<1)return 0;var o=i[0],l=t.dataToCoord(o+1)-t.dataToCoord(o),c=Math.abs(l),u=_w(o==null?"":o+"",n.getFont(),"center","top"),h=Math.max(u.height,7),d=h/c;isNaN(d)&&(d=1/0);var A=Math.max(0,Math.floor(d)),g=A4e(t.model),p=g.lastAutoInterval,v=g.lastTickCount;return p!=null&&v!=null&&Math.abs(p-A)<=1&&Math.abs(v-s)<=1&&p>A?A=p:(g.lastTickCount=s,g.lastAutoInterval=A),A},e}(lc);bj.prototype.dataToAngle=lc.prototype.dataToCoord;bj.prototype.angleToData=lc.prototype.coordToData;var die=["radius","angle"],f4e=function(){function r(e){this.dimensions=die,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new xj,this._angleAxis=new bj,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return r.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},r.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},r.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},r.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},r.prototype.getAxesByScale=function(e){var t=[],n=this._angleAxis,a=this._radiusAxis;return n.scale.type===e&&t.push(n),a.scale.type===e&&t.push(a),t},r.prototype.getAngleAxis=function(){return this._angleAxis},r.prototype.getRadiusAxis=function(){return this._radiusAxis},r.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},r.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},r.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},r.prototype.pointToData=function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},r.prototype.pointToCoord=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,a=this.getAngleAxis(),i=a.getExtent(),s=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]);a.inverse?s=o-360:o=s+360;var l=Math.sqrt(t*t+n*n);t/=l,n/=l;for(var c=Math.atan2(-n,t)/Math.PI*180,u=c<s?1:-1;c<s||c>o;)c+=u*360;return[l,c]},r.prototype.coordToPoint=function(e){var t=e[0],n=e[1]/180*Math.PI,a=Math.cos(n)*t+this.cx,i=-Math.sin(n)*t+this.cy;return[a,i]},r.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),n=t.getExtent().slice();n[0]>n[1]&&n.reverse();var a=e.getExtent(),i=Math.PI/180,s=1e-4;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-a[0]*i,endAngle:-a[1]*i,clockwise:e.inverse,contain:function(o,l){var c=o-this.cx,u=l-this.cy,h=c*c+u*u,d=this.r,A=this.r0;return d!==A&&h-s<=d*d&&h+s>=A*A}}},r.prototype.convertToPixel=function(e,t,n){var a=I9(t);return a===this?this.dataToPoint(n):null},r.prototype.convertFromPixel=function(e,t,n){var a=I9(t);return a===this?this.pointToData(n):null},r}();function I9(r){var e=r.seriesModel,t=r.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function g4e(r,e,t){var n=e.get("center"),a=t.getWidth(),i=t.getHeight();r.cx=ot(n[0],a),r.cy=ot(n[1],i);var s=r.getRadiusAxis(),o=Math.min(a,i)/2,l=e.get("radius");l==null?l=[0,"100%"]:$e(l)||(l=[0,l]);var c=[ot(l[0],o),ot(l[1],o)];s.inverse?s.setExtent(c[1],c[0]):s.setExtent(c[0],c[1])}function p4e(r,e){var t=this,n=t.getAngleAxis(),a=t.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),a.scale.setExtent(1/0,-1/0),r.eachSeries(function(o){if(o.coordinateSystem===t){var l=o.getData();X(LC(l,"radius"),function(c){a.scale.unionExtentFromData(l,c)}),X(LC(l,"angle"),function(c){n.scale.unionExtentFromData(l,c)})}}),N0(n.scale,n.model),N0(a.scale,a.model),n.type==="category"&&!n.onBand){var i=n.getExtent(),s=360/n.scale.count();n.inverse?i[1]+=s:i[1]-=s,n.setExtent(i[0],i[1])}}function m4e(r){return r.mainType==="angleAxis"}function E9(r,e){var t;if(r.type=e.get("type"),r.scale=XN(e),r.onBand=e.get("boundaryGap")&&r.type==="category",r.inverse=e.get("inverse"),m4e(e)){r.inverse=r.inverse!==e.get("clockwise");var n=e.get("startAngle"),a=(t=e.get("endAngle"))!==null&&t!==void 0?t:n+(r.inverse?-360:360);r.setExtent(n,a)}e.axis=r,r.model=e}var v4e={dimensions:die,create:function(r,e){var t=[];return r.eachComponent("polar",function(n,a){var i=new f4e(a+"");i.update=p4e;var s=i.getRadiusAxis(),o=i.getAngleAxis(),l=n.findAxisModel("radiusAxis"),c=n.findAxisModel("angleAxis");E9(s,l),E9(o,c),g4e(i,n,e),t.push(i),n.coordinateSystem=i,i.model=n}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="polar"){var a=n.getReferringComponents("polar",Na).models[0];n.coordinateSystem=a.coordinateSystem}}),t}},y4e=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function HS(r,e,t){e[1]>e[0]&&(e=e.slice().reverse());var n=r.coordToPoint([e[0],t]),a=r.coordToPoint([e[1],t]);return{x1:n[0],y1:n[1],x2:a[0],y2:a[1]}}function QS(r){var e=r.getRadiusAxis();return e.inverse?0:1}function D9(r){var e=r[0],t=r[r.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&r.pop()}var x4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,n){if(this.group.removeAll(),!!t.get("show")){var a=t.axis,i=a.polar,s=i.getRadiusAxis().getExtent(),o=a.getTicksCoords(),l=a.getMinorTicksCoords(),c=We(a.getViewLabels(),function(u){u=Ft(u);var h=a.scale,d=h.type==="ordinal"?h.getRawOrdinalNumber(u.tickValue):u.tickValue;return u.coord=a.dataToCoord(d),u});D9(c),D9(o),X(y4e,function(u){t.get([u,"show"])&&(!a.scale.isBlank()||u==="axisLine")&&b4e[u](this.group,t,i,o,l,s,c)},this)}},e.type="angleAxis",e}(Qp),b4e={axisLine:function(r,e,t,n,a,i){var s=e.getModel(["axisLine","lineStyle"]),o=t.getAngleAxis(),l=Math.PI/180,c=o.getExtent(),u=QS(t),h=u?0:1,d,A=Math.abs(c[1]-c[0])===360?"Circle":"Arc";i[h]===0?d=new jp[A]({shape:{cx:t.cx,cy:t.cy,r:i[u],startAngle:-c[0]*l,endAngle:-c[1]*l,clockwise:o.inverse},style:s.getLineStyle(),z2:1,silent:!0}):d=new Nw({shape:{cx:t.cx,cy:t.cy,r:i[u],r0:i[h]},style:s.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,r.add(d)},axisTick:function(r,e,t,n,a,i){var s=e.getModel("axisTick"),o=(s.get("inside")?-1:1)*s.get("length"),l=i[QS(t)],c=We(n,function(u){return new Ya({shape:HS(t,[l,l+o],u.coord)})});r.add(rl(c,{style:Lt(s.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(r,e,t,n,a,i){if(a.length){for(var s=e.getModel("axisTick"),o=e.getModel("minorTick"),l=(s.get("inside")?-1:1)*o.get("length"),c=i[QS(t)],u=[],h=0;h<a.length;h++)for(var d=0;d<a[h].length;d++)u.push(new Ya({shape:HS(t,[c,c+l],a[h][d].coord)}));r.add(rl(u,{style:Lt(o.getModel("lineStyle").getLineStyle(),Lt(s.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(r,e,t,n,a,i,s){var o=e.getCategories(!0),l=e.getModel("axisLabel"),c=l.get("margin"),u=e.get("triggerEvent");X(s,function(h,d){var A=l,g=h.tickValue,p=i[QS(t)],v=t.coordToPoint([p+c,h.coord]),m=t.cx,y=t.cy,x=Math.abs(v[0]-m)/p<.3?"center":v[0]>m?"left":"right",b=Math.abs(v[1]-y)/p<.3?"middle":v[1]>y?"top":"bottom";if(o&&o[g]){var S=o[g];Pt(S)&&S.textStyle&&(A=new Qr(S.textStyle,l,l.ecModel))}var _=new Cr({silent:fs.isLabelSilent(e),style:bn(A,{x:v[0],y:v[1],fill:A.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:x,verticalAlign:b})});if(r.add(_),u){var C=fs.makeAxisEventDataBase(e);C.targetType="axisLabel",C.value=h.rawLabel,Qt(_).eventData=C}},this)},splitLine:function(r,e,t,n,a,i){var s=e.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=0;h<n.length;h++){var d=c++%l.length;u[d]=u[d]||[],u[d].push(new Ya({shape:HS(t,i,n[h].coord)}))}for(var h=0;h<u.length;h++)r.add(rl(u[h],{style:Lt({stroke:l[h%l.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(r,e,t,n,a,i){if(a.length){for(var s=e.getModel("minorSplitLine"),o=s.getModel("lineStyle"),l=[],c=0;c<a.length;c++)for(var u=0;u<a[c].length;u++)l.push(new Ya({shape:HS(t,i,a[c][u].coord)}));r.add(rl(l,{style:o.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(r,e,t,n,a,i){if(n.length){var s=e.getModel("splitArea"),o=s.getModel("areaStyle"),l=o.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=Math.PI/180,d=-n[0].coord*h,A=Math.min(i[0],i[1]),g=Math.max(i[0],i[1]),p=e.get("clockwise"),v=1,m=n.length;v<=m;v++){var y=v===m?n[0].coord:n[v].coord,x=c++%l.length;u[x]=u[x]||[],u[x].push(new ms({shape:{cx:t.cx,cy:t.cy,r0:A,r:g,startAngle:d,endAngle:-y*h,clockwise:p},silent:!0})),d=-y*h}for(var v=0;v<u.length;v++)r.add(rl(u[v],{style:Lt({fill:l[v%l.length]},o.getAreaStyle()),silent:!0}))}}},w4e=["axisLine","axisTickLabel","axisName"],S4e=["splitLine","splitArea","minorSplitLine"],_4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,n){if(this.group.removeAll(),!!t.get("show")){var a=this._axisGroup,i=this._axisGroup=new Ht;this.group.add(i);var s=t.axis,o=s.polar,l=o.getAngleAxis(),c=s.getTicksCoords(),u=s.getMinorTicksCoords(),h=l.getExtent()[0],d=s.getExtent(),A=B4e(o,t,h),g=new fs(t,A);X(w4e,g.add,g),i.add(g.getGroup()),Ew(a,i,t),X(S4e,function(p){t.get([p,"show"])&&!s.scale.isBlank()&&C4e[p](this.group,t,o,h,d,c,u)},this)}},e.type="radiusAxis",e}(Qp),C4e={splitLine:function(r,e,t,n,a,i){var s=e.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color"),c=0,u=t.getAngleAxis(),h=Math.PI/180,d=u.getExtent(),A=Math.abs(d[1]-d[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var g=[],p=0;p<i.length;p++){var v=c++%l.length;g[v]=g[v]||[],g[v].push(new jp[A]({shape:{cx:t.cx,cy:t.cy,r:Math.max(i[p].coord,0),startAngle:-d[0]*h,endAngle:-d[1]*h,clockwise:u.inverse}}))}for(var p=0;p<g.length;p++)r.add(rl(g[p],{style:Lt({stroke:l[p%l.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(r,e,t,n,a,i,s){if(s.length){for(var o=e.getModel("minorSplitLine"),l=o.getModel("lineStyle"),c=[],u=0;u<s.length;u++)for(var h=0;h<s[u].length;h++)c.push(new Oh({shape:{cx:t.cx,cy:t.cy,r:s[u][h].coord}}));r.add(rl(c,{style:Lt({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(r,e,t,n,a,i){if(i.length){var s=e.getModel("splitArea"),o=s.getModel("areaStyle"),l=o.get("color"),c=0;l=l instanceof Array?l:[l];for(var u=[],h=i[0].coord,d=1;d<i.length;d++){var A=c++%l.length;u[A]=u[A]||[],u[A].push(new ms({shape:{cx:t.cx,cy:t.cy,r0:h,r:i[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=i[d].coord}for(var d=0;d<u.length;d++)r.add(rl(u[d],{style:Lt({fill:l[d%l.length]},o.getAreaStyle()),silent:!0}))}}};function B4e(r,e,t){return{position:[r.cx,r.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function Aie(r){return r.get("stack")||"__ec_stack_"+r.seriesIndex}function fie(r,e){return e.dim+r.model.componentIndex}function N4e(r,e,t){var n={},a=T4e(Ur(e.getSeriesByType(r),function(i){return!e.isSeriesFiltered(i)&&i.coordinateSystem&&i.coordinateSystem.type==="polar"}));e.eachSeriesByType(r,function(i){if(i.coordinateSystem.type==="polar"){var s=i.getData(),o=i.coordinateSystem,l=o.getBaseAxis(),c=fie(o,l),u=Aie(i),h=a[c][u],d=h.offset,A=h.width,g=o.getOtherAxis(l),p=i.coordinateSystem.cx,v=i.coordinateSystem.cy,m=i.get("barMinHeight")||0,y=i.get("barMinAngle")||0;n[u]=n[u]||[];for(var x=s.mapDimension(g.dim),b=s.mapDimension(l.dim),S=GA(s,x),_=l.dim!=="radius"||!i.get("roundCap",!0),C=g.model,w=C.get("startValue"),B=g.dataToCoord(w||0),D=0,T=s.count();D<T;D++){var E=s.get(x,D),R=s.get(b,D),M=E>=0?"p":"n",k=B;S&&(n[u][R]||(n[u][R]={p:B,n:B}),k=n[u][R][M]);var O=void 0,Q=void 0,H=void 0,W=void 0;if(g.dim==="radius"){var te=g.dataToCoord(E)-B,ee=l.dataToCoord(R);Math.abs(te)<m&&(te=(te<0?-1:1)*m),O=k,Q=k+te,H=ee-d,W=H-A,S&&(n[u][R][M]=Q)}else{var j=g.dataToCoord(E,_)-B,G=l.dataToCoord(R);Math.abs(j)<y&&(j=(j<0?-1:1)*y),O=G+d,Q=O+A,H=k,W=k+j,S&&(n[u][R][M]=W)}s.setItemLayout(D,{cx:p,cy:v,r0:O,r:Q,startAngle:-H*Math.PI/180,endAngle:-W*Math.PI/180,clockwise:H>=W})}}})}function T4e(r){var e={};X(r,function(n,a){var i=n.getData(),s=n.coordinateSystem,o=s.getBaseAxis(),l=fie(s,o),c=o.getExtent(),u=o.type==="category"?o.getBandWidth():Math.abs(c[1]-c[0])/i.count(),h=e[l]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=h.stacks;e[l]=h;var A=Aie(n);d[A]||h.autoWidthCount++,d[A]=d[A]||{width:0,maxWidth:0};var g=ot(n.get("barWidth"),u),p=ot(n.get("barMaxWidth"),u),v=n.get("barGap"),m=n.get("barCategoryGap");g&&!d[A].width&&(g=Math.min(h.remainedWidth,g),d[A].width=g,h.remainedWidth-=g),p&&(d[A].maxWidth=p),v!=null&&(h.gap=v),m!=null&&(h.categoryGap=m)});var t={};return X(e,function(n,a){t[a]={};var i=n.stacks,s=n.bandWidth,o=ot(n.categoryGap,s),l=ot(n.gap,1),c=n.remainedWidth,u=n.autoWidthCount,h=(c-o)/(u+(u-1)*l);h=Math.max(h,0),X(i,function(p,v){var m=p.maxWidth;m&&m<h&&(m=Math.min(m,c),p.width&&(m=Math.min(m,p.width)),c-=m,p.width=m,u--)}),h=(c-o)/(u+(u-1)*l),h=Math.max(h,0);var d=0,A;X(i,function(p,v){p.width||(p.width=h),A=p,d+=p.width*(1+l)}),A&&(d-=A.width*l);var g=-d/2;X(i,function(p,v){t[a][v]=t[a][v]||{offset:g,width:p.width},g+=p.width*(1+l)})}),t}var I4e={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},E4e={splitNumber:5},D4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e}(Gn);function M4e(r){sr(Gw),Qp.registerAxisPointerClass("PolarAxisPointer",o4e),r.registerCoordinateSystem("polar",v4e),r.registerComponentModel(u4e),r.registerComponentView(D4e),I0(r,"angle",h4e,I4e),I0(r,"radius",d4e,E4e),r.registerComponentView(x4e),r.registerComponentView(_4e),r.registerLayout(Wt(N4e,"bar"))}function YR(r,e){e=e||{};var t=r.coordinateSystem,n=r.axis,a={},i=n.position,s=n.orient,o=t.getRect(),l=[o.x,o.x+o.width,o.y,o.y+o.height],c={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};a.position=[s==="vertical"?c.vertical[i]:l[0],s==="horizontal"?c.horizontal[i]:l[3]];var u={horizontal:0,vertical:1};a.rotation=Math.PI/2*u[s];var h={top:-1,bottom:1,right:1,left:-1};a.labelDirection=a.tickDirection=a.nameDirection=h[i],r.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),di(e.labelInside,r.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var d=e.rotate;return d==null&&(d=r.get(["axisLabel","rotate"])),a.labelRotation=i==="top"?-d:d,a.z2=1,a}var R4e=["axisLine","axisTickLabel","axisName"],L4e=["splitArea","splitLine"],P4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,n,a,i){var s=this.group;s.removeAll();var o=this._axisGroup;this._axisGroup=new Ht;var l=YR(t),c=new fs(t,l);X(R4e,c.add,c),s.add(this._axisGroup),s.add(c.getGroup()),X(L4e,function(u){t.get([u,"show"])&&k4e[u](this,this.group,this._axisGroup,t)},this),Ew(o,this._axisGroup,t),r.prototype.render.call(this,t,n,a,i)},e.prototype.remove=function(){kne(this)},e.type="singleAxis",e}(Qp),k4e={splitLine:function(r,e,t,n){var a=n.axis;if(!a.scale.isBlank()){var i=n.getModel("splitLine"),s=i.getModel("lineStyle"),o=s.get("color");o=o instanceof Array?o:[o];for(var l=s.get("width"),c=n.coordinateSystem.getRect(),u=a.isHorizontal(),h=[],d=0,A=a.getTicksCoords({tickModel:i}),g=[],p=[],v=0;v<A.length;++v){var m=a.toGlobalCoord(A[v].coord);u?(g[0]=m,g[1]=c.y,p[0]=m,p[1]=c.y+c.height):(g[0]=c.x,g[1]=m,p[0]=c.x+c.width,p[1]=m);var y=new Ya({shape:{x1:g[0],y1:g[1],x2:p[0],y2:p[1]},silent:!0});_0(y.shape,l);var x=d++%o.length;h[x]=h[x]||[],h[x].push(y)}for(var b=s.getLineStyle(["color"]),v=0;v<h.length;++v)e.add(rl(h[v],{style:Lt({stroke:o[v%o.length]},b),silent:!0}))}},splitArea:function(r,e,t,n){Pne(r,t,n,n)}},u5=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(gr);Ia(u5,Pw.prototype);var F4e=function(r){Pe(e,r);function e(t,n,a,i,s){var o=r.call(this,t,n,a)||this;return o.type=i||"value",o.position=s||"bottom",o}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,n){return this.coordinateSystem.pointToData(t)[0]},e}(lc),gie=["single"],j4e=function(){function r(e,t,n){this.type="single",this.dimension="single",this.dimensions=gie,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,n)}return r.prototype._init=function(e,t,n){var a=this.dimension,i=new F4e(a,XN(e),[0,0],e.get("type"),e.get("position")),s=i.type==="category";i.onBand=s&&e.get("boundaryGap"),i.inverse=e.get("inverse"),i.orient=e.get("orient"),e.axis=i,i.model=e,i.coordinateSystem=this,this._axis=i},r.prototype.update=function(e,t){e.eachSeries(function(n){if(n.coordinateSystem===this){var a=n.getData();X(a.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(a,i)},this),N0(this._axis.scale,this._axis.model)}},this)},r.prototype.resize=function(e,t){this._rect=Ua({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},r.prototype.getRect=function(){return this._rect},r.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),a=n?[0,e.width]:[0,e.height],i=t.inverse?1:0;t.setExtent(a[i],a[1-i]),this._updateAxisTransform(t,n?e.x:e.y)},r.prototype._updateAxisTransform=function(e,t){var n=e.getExtent(),a=n[0]+n[1],i=e.isHorizontal();e.toGlobalCoord=i?function(s){return s+t}:function(s){return a-s+t},e.toLocalCoord=i?function(s){return s-t}:function(s){return a-s+t}},r.prototype.getAxis=function(){return this._axis},r.prototype.getBaseAxis=function(){return this._axis},r.prototype.getAxes=function(){return[this._axis]},r.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},r.prototype.containPoint=function(e){var t=this.getRect(),n=this.getAxis(),a=n.orient;return a==="horizontal"?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},r.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e[t.orient==="horizontal"?0:1]))]},r.prototype.dataToPoint=function(e){var t=this.getAxis(),n=this.getRect(),a=[],i=t.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),a[i]=t.toGlobalCoord(t.dataToCoord(+e)),a[1-i]=i===0?n.y+n.height/2:n.x+n.width/2,a},r.prototype.convertToPixel=function(e,t,n){var a=M9(t);return a===this?this.dataToPoint(n):null},r.prototype.convertFromPixel=function(e,t,n){var a=M9(t);return a===this?this.pointToData(n):null},r}();function M9(r){var e=r.seriesModel,t=r.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function O4e(r,e){var t=[];return r.eachComponent("singleAxis",function(n,a){var i=new j4e(n,r,e);i.name="single_"+a,i.resize(n,e),n.coordinateSystem=i,t.push(i)}),r.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var a=n.getReferringComponents("singleAxis",Na).models[0];n.coordinateSystem=a&&a.coordinateSystem}}),t}var U4e={create:O4e,dimensions:gie},R9=["x","y"],H4e=["width","height"],Q4e=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,n,a,i,s){var o=a.axis,l=o.coordinateSystem,c=K4(l,1-WC(o)),u=l.dataToPoint(n)[0],h=i.get("type");if(h&&h!=="none"){var d=pj(i),A=z4e[h](o,u,c);A.style=d,t.graphicKey=A.type,t.pointer=A}var g=YR(a);lie(n,t,g,a,i,s)},e.prototype.getHandleTransform=function(t,n,a){var i=YR(n,{labelInside:!1});i.labelMargin=a.get(["handle","margin"]);var s=mj(n.axis,t,i);return{x:s[0],y:s[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,n,a,i){var s=a.axis,o=s.coordinateSystem,l=WC(s),c=K4(o,l),u=[t.x,t.y];u[l]+=n[l],u[l]=Math.min(c[1],u[l]),u[l]=Math.max(c[0],u[l]);var h=K4(o,1-l),d=(h[1]+h[0])/2,A=[d,d];return A[l]=u[l],{x:u[0],y:u[1],rotation:t.rotation,cursorPoint:A,tooltipOption:{verticalAlign:"middle"}}},e}(gj),z4e={line:function(r,e,t){var n=vj([e,t[0]],[e,t[1]],WC(r));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(r,e,t){var n=r.getBandWidth(),a=t[1]-t[0];return{type:"Rect",shape:cie([e-n/2,t[0]],[n,a],WC(r))}}};function WC(r){return r.isHorizontal()?0:1}function K4(r,e){var t=r.getRect();return[t[R9[e]],t[R9[e]]+t[H4e[e]]]}var G4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e}(Gn);function V4e(r){sr(Gw),Qp.registerAxisPointerClass("SingleAxisPointer",Q4e),r.registerComponentView(G4e),r.registerComponentView(P4e),r.registerComponentModel(u5),I0(r,"single",u5,u5.defaultOption),r.registerCoordinateSystem("single",U4e)}var $4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n,a){var i=oy(t);r.prototype.init.apply(this,arguments),L9(t,i)},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),L9(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(gr);function L9(r,e){var t=r.cellSize,n;$e(t)?n=t:n=r.cellSize=[t,t],n.length===1&&(n[1]=n[0]);var a=We([0,1],function(i){return A1e(e,i)&&(n[i]="auto"),n[i]!=null&&n[i]!=="auto"});zA(r,e,{type:"box",ignoreSize:a})}var K4e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){var i=this.group;i.removeAll();var s=t.coordinateSystem,o=s.getRangeInfo(),l=s.getOrient(),c=n.getLocaleModel();this._renderDayRect(t,o,i),this._renderLines(t,o,l,i),this._renderYearText(t,o,l,i),this._renderMonthText(t,c,l,i),this._renderWeekText(t,c,o,l,i)},e.prototype._renderDayRect=function(t,n,a){for(var i=t.coordinateSystem,s=t.getModel("itemStyle").getItemStyle(),o=i.getCellWidth(),l=i.getCellHeight(),c=n.start.time;c<=n.end.time;c=i.getNextNDay(c,1).time){var u=i.dataToRect([c],!1).tl,h=new br({shape:{x:u[0],y:u[1],width:o,height:l},cursor:"default",style:s});a.add(h)}},e.prototype._renderLines=function(t,n,a,i){var s=this,o=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),c=t.get(["splitLine","show"]),u=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=n.start,d=0;h.time<=n.end.time;d++){g(h.formatedDate),d===0&&(h=o.getDateInfo(n.start.y+"-"+n.start.m));var A=h.date;A.setMonth(A.getMonth()+1),h=o.getDateInfo(A)}g(o.getNextNDay(n.end.time,1).formatedDate);function g(p){s._firstDayOfMonth.push(o.getDateInfo(p)),s._firstDayPoints.push(o.dataToRect([p],!1).tl);var v=s._getLinePointsOfOneWeek(t,p,a);s._tlpoints.push(v[0]),s._blpoints.push(v[v.length-1]),c&&s._drawSplitline(v,l,i)}c&&this._drawSplitline(s._getEdgesPoints(s._tlpoints,u,a),l,i),c&&this._drawSplitline(s._getEdgesPoints(s._blpoints,u,a),l,i)},e.prototype._getEdgesPoints=function(t,n,a){var i=[t[0].slice(),t[t.length-1].slice()],s=a==="horizontal"?0:1;return i[0][s]=i[0][s]-n/2,i[1][s]=i[1][s]+n/2,i},e.prototype._drawSplitline=function(t,n,a){var i=new ws({z2:20,shape:{points:t},style:n});a.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,n,a){for(var i=t.coordinateSystem,s=i.getDateInfo(n),o=[],l=0;l<7;l++){var c=i.getNextNDay(s.time,l),u=i.dataToRect([c.time],!1);o[2*c.day]=u.tl,o[2*c.day+1]=u[a==="horizontal"?"bl":"tr"]}return o},e.prototype._formatterLabel=function(t,n){return dt(t)&&t?u1e(t,n):It(t)?t(n):n.nameMap},e.prototype._yearTextPositionControl=function(t,n,a,i,s){var o=n[0],l=n[1],c=["center","bottom"];i==="bottom"?(l+=s,c=["center","top"]):i==="left"?o-=s:i==="right"?(o+=s,c=["center","top"]):l-=s;var u=0;return(i==="left"||i==="right")&&(u=Math.PI/2),{rotation:u,x:o,y:l,style:{align:c[0],verticalAlign:c[1]}}},e.prototype._renderYearText=function(t,n,a,i){var s=t.getModel("yearLabel");if(s.get("show")){var o=s.get("margin"),l=s.get("position");l||(l=a!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(c[0][0]+c[1][0])/2,h=(c[0][1]+c[1][1])/2,d=a==="horizontal"?0:1,A={top:[u,c[d][1]],bottom:[u,c[1-d][1]],left:[c[1-d][0],h],right:[c[d][0],h]},g=n.start.y;+n.end.y>+n.start.y&&(g=g+"-"+n.end.y);var p=s.get("formatter"),v={start:n.start.y,end:n.end.y,nameMap:g},m=this._formatterLabel(p,v),y=new Cr({z2:30,style:bn(s,{text:m}),silent:s.get("silent")});y.attr(this._yearTextPositionControl(y,A[l],a,l,o)),i.add(y)}},e.prototype._monthTextPositionControl=function(t,n,a,i,s){var o="left",l="top",c=t[0],u=t[1];return a==="horizontal"?(u=u+s,n&&(o="center"),i==="start"&&(l="bottom")):(c=c+s,n&&(l="middle"),i==="start"&&(o="right")),{x:c,y:u,align:o,verticalAlign:l}},e.prototype._renderMonthText=function(t,n,a,i){var s=t.getModel("monthLabel");if(s.get("show")){var o=s.get("nameMap"),l=s.get("margin"),c=s.get("position"),u=s.get("align"),h=[this._tlpoints,this._blpoints];(!o||dt(o))&&(o&&(n=aR(o)||n),o=n.get(["time","monthAbbr"])||[]);var d=c==="start"?0:1,A=a==="horizontal"?0:1;l=c==="start"?-l:l;for(var g=u==="center",p=s.get("silent"),v=0;v<h[d].length-1;v++){var m=h[d][v].slice(),y=this._firstDayOfMonth[v];if(g){var x=this._firstDayPoints[v];m[A]=(x[A]+h[0][v+1][A])/2}var b=s.get("formatter"),S=o[+y.m-1],_={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:S},C=this._formatterLabel(b,_),w=new Cr({z2:30,style:He(bn(s,{text:C}),this._monthTextPositionControl(m,g,a,c,l)),silent:p});i.add(w)}}},e.prototype._weekTextPositionControl=function(t,n,a,i,s){var o="center",l="middle",c=t[0],u=t[1],h=a==="start";return n==="horizontal"?(c=c+i+(h?1:-1)*s[0]/2,o=h?"right":"left"):(u=u+i+(h?1:-1)*s[1]/2,l=h?"bottom":"top"),{x:c,y:u,align:o,verticalAlign:l}},e.prototype._renderWeekText=function(t,n,a,i,s){var o=t.getModel("dayLabel");if(o.get("show")){var l=t.coordinateSystem,c=o.get("position"),u=o.get("nameMap"),h=o.get("margin"),d=l.getFirstDayOfWeek();if(!u||dt(u)){u&&(n=aR(u)||n);var A=n.get(["time","dayOfWeekShort"]);u=A||We(n.get(["time","dayOfWeekAbbr"]),function(_){return _[0]})}var g=l.getNextNDay(a.end.time,7-a.lweek).time,p=[l.getCellWidth(),l.getCellHeight()];h=ot(h,Math.min(p[1],p[0])),c==="start"&&(g=l.getNextNDay(a.start.time,-(7+a.fweek)).time,h=-h);for(var v=o.get("silent"),m=0;m<7;m++){var y=l.getNextNDay(g,m),x=l.dataToRect([y.time],!1).center,b=m;b=Math.abs((m+d)%7);var S=new Cr({z2:30,style:He(bn(o,{text:u[b]}),this._weekTextPositionControl(x,i,c,h,p)),silent:v});s.add(S)}}},e.type="calendar",e}(Gn),W4=864e5,W4e=function(){function r(e,t,n){this.type="calendar",this.dimensions=r.dimensions,this.getDimensionsInfo=r.getDimensionsInfo,this._model=e}return r.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},r.prototype.getRangeInfo=function(){return this._rangeInfo},r.prototype.getModel=function(){return this._model},r.prototype.getRect=function(){return this._rect},r.prototype.getCellWidth=function(){return this._sw},r.prototype.getCellHeight=function(){return this._sh},r.prototype.getOrient=function(){return this._orient},r.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},r.prototype.getDateInfo=function(e){e=su(e);var t=e.getFullYear(),n=e.getMonth()+1,a=n<10?"0"+n:""+n,i=e.getDate(),s=i<10?"0"+i:""+i,o=e.getDay();return o=Math.abs((o+7-this.getFirstDayOfWeek())%7),{y:t+"",m:a,d:s,day:o,time:e.getTime(),formatedDate:t+"-"+a+"-"+s,date:e}},r.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},r.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,a=["width","height"],i=this._model.getCellSize().slice(),s=this._model.getBoxLayoutParams(),o=this._orient==="horizontal"?[n,7]:[7,n];X([0,1],function(h){u(i,h)&&(s[a[h]]=i[h]*o[h])});var l={width:t.getWidth(),height:t.getHeight()},c=this._rect=Ua(s,l);X([0,1],function(h){u(i,h)||(i[h]=c[a[h]]/o[h])});function u(h,d){return h[d]!=null&&h[d]!=="auto"}this._sw=i[0],this._sh=i[1]},r.prototype.dataToPoint=function(e,t){$e(e)&&(e=e[0]),t==null&&(t=!0);var n=this.getDateInfo(e),a=this._rangeInfo,i=n.formatedDate;if(t&&!(n.time>=a.start.time&&n.time<a.end.time+W4))return[NaN,NaN];var s=n.day,o=this._getRangeInfo([a.start.time,i]).nthWeek;return this._orient==="vertical"?[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]:[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]},r.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},r.prototype.dataToRect=function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},r.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,a=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,t-1,a):this._getDateByWeeksAndDay(t,n-1,a)},r.prototype.convertToPixel=function(e,t,n){var a=P9(t);return a===this?a.dataToPoint(n):null},r.prototype.convertFromPixel=function(e,t,n){var a=P9(t);return a===this?a.pointToData(n):null},r.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},r.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if($e(e)&&e.length===1&&(e=e[0]),$e(e))t=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var a=this.getDateInfo(n),i=a.date;i.setMonth(i.getMonth()+1);var s=this.getNextNDay(i,-1);t=[a.formatedDate,s.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return e;var o=this._getRangeInfo(t);return o.start.time>o.end.time&&t.reverse(),t},r.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],n;t[0].time>t[1].time&&(n=!0,t.reverse());var a=Math.floor(t[1].time/W4)-Math.floor(t[0].time/W4)+1,i=new Date(t[0].time),s=i.getDate(),o=t[1].date.getDate();i.setDate(s+a-1);var l=i.getDate();if(l!==o)for(var c=i.getTime()-t[1].time>0?1:-1;(l=i.getDate())!==o&&(i.getTime()-t[1].time)*c>0;)a-=c,i.setDate(l-c);var u=Math.floor((a+t[0].day+6)/7),h=n?-u+1:u-1;return n&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:a,weeks:u,nthWeek:h,fweek:t[0].day,lweek:t[1].day}},r.prototype._getDateByWeeksAndDay=function(e,t,n){var a=this._getRangeInfo(n);if(e>a.weeks||e===0&&t<a.fweek||e===a.weeks&&t>a.lweek)return null;var i=(e-1)*7-a.fweek+t,s=new Date(a.start.time);return s.setDate(+a.start.d+i),this.getDateInfo(s)},r.create=function(e,t){var n=[];return e.eachComponent("calendar",function(a){var i=new r(a);n.push(i),a.coordinateSystem=i}),e.eachSeries(function(a){a.get("coordinateSystem")==="calendar"&&(a.coordinateSystem=n[a.get("calendarIndex")||0])}),n},r.dimensions=["time","value"],r}();function P9(r){var e=r.calendarModel,t=r.seriesModel,n=e?e.coordinateSystem:t?t.coordinateSystem:null;return n}function q4e(r){r.registerComponentModel($4e),r.registerComponentView(K4e),r.registerCoordinateSystem("calendar",W4e)}function Y4e(r,e){var t=r.existing;if(e.id=r.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var n=e.parentOption;n?e.parentId=n.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function k9(r,e){var t;return X(e,function(n){r[n]!=null&&r[n]!=="auto"&&(t=!0)}),t}function X4e(r,e,t){var n=He({},t),a=r[e],i=t.$action||"merge";i==="merge"?a?(qt(a,n,!0),zA(a,n,{ignoreSize:!0}),ote(t,a),zS(t,a),zS(t,a,"shape"),zS(t,a,"style"),zS(t,a,"extra"),t.clipPath=a.clipPath):r[e]=n:i==="replace"?r[e]=n:i==="remove"&&a&&(r[e]=null)}var pie=["transition","enterFrom","leaveTo"],Z4e=pie.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function zS(r,e,t){if(t&&(!r[t]&&e[t]&&(r[t]={}),r=r[t],e=e[t]),!(!r||!e))for(var n=t?pie:Z4e,a=0;a<n.length;a++){var i=n[a];r[i]==null&&e[i]!=null&&(r[i]=e[i])}}function J4e(r,e){if(r&&(r.hv=e.hv=[k9(e,["left","right"]),k9(e,["top","bottom"])],r.type==="group")){var t=r,n=e;t.width==null&&(t.width=n.width=0),t.height==null&&(t.height=n.height=0)}}var eDe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,n){var a=this.option.elements;this.option.elements=null,r.prototype.mergeOption.call(this,t,n),this.option.elements=a},e.prototype.optionUpdated=function(t,n){var a=this.option,i=(n?a:t).elements,s=a.elements=n?[]:a.elements,o=[];this._flatten(i,o,null);var l=nee(s,o,"normalMerge"),c=this._elOptionsToUpdate=[];X(l,function(u,h){var d=u.newOption;d&&(c.push(d),Y4e(u,d),X4e(s,h,d),J4e(s[h],d))},this),a.elements=Ur(s,function(u){return u&&delete u.$action,u!=null})},e.prototype._flatten=function(t,n,a){X(t,function(i){if(i){a&&(i.parentOption=a),n.push(i);var s=i.children;s&&s.length&&this._flatten(s,n,i),delete i.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(gr),F9={path:null,compoundPath:null,group:Ht,image:fi,text:Cr},Ko=wr(),tDe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=bt()},e.prototype.render=function(t,n,a){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,a)},e.prototype._updateElements=function(t){var n=t.useElOptionsToUpdate();if(n){var a=this._elMap,i=this.group,s=t.get("z"),o=t.get("zlevel");X(n,function(l){var c=Fa(l.id,null),u=c!=null?a.get(c):null,h=Fa(l.parentId,null),d=h!=null?a.get(h):i,A=l.type,g=l.style;A==="text"&&g&&l.hv&&l.hv[1]&&(g.textVerticalAlign=g.textBaseline=g.verticalAlign=g.align=null);var p=l.textContent,v=l.textConfig;if(g&&Yae(g,A,!!v,!!p)){var m=Xae(g,A,!0);!v&&m.textConfig&&(v=l.textConfig=m.textConfig),!p&&m.textContent&&(p=m.textContent)}var y=rDe(l),x=l.$action||"merge",b=x==="merge",S=x==="replace";if(b){var _=!u,C=u;_?C=j9(c,d,l.type,a):(C&&(Ko(C).isNew=!1),tie(C)),C&&(l5(C,y,t,{isInit:_}),O9(C,l,s,o))}else if(S){h5(u,l,a,t);var w=j9(c,d,l.type,a);w&&(l5(w,y,t,{isInit:!0}),O9(w,l,s,o))}else x==="remove"&&(Jae(u,l),h5(u,l,a,t));var B=a.get(c);if(B&&p)if(b){var D=B.getTextContent();D?D.attr(p):B.setTextContent(new Cr(p))}else S&&B.setTextContent(new Cr(p));if(B){var T=l.clipPath;if(T){var E=T.type,R=void 0,_=!1;if(b){var M=B.getClipPath();_=!M||Ko(M).type!==E,R=_?XR(E):M}else S&&(_=!0,R=XR(E));B.setClipPath(R),l5(R,T,t,{isInit:_}),$C(R,T.keyframeAnimation,t)}var k=Ko(B);B.setTextConfig(v),k.option=l,nDe(B,t,l),Fp({el:B,componentModel:t,itemName:B.name,itemTooltipOption:l.tooltip}),$C(B,l.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,n){for(var a=t.option.elements,i=this.group,s=this._elMap,o=n.getWidth(),l=n.getHeight(),c=["x","y"],u=0;u<a.length;u++){var h=a[u],d=Fa(h.id,null),A=d!=null?s.get(d):null;if(!(!A||!A.isGroup)){var g=A.parent,p=g===i,v=Ko(A),m=Ko(g);v.width=ot(v.option.width,p?o:m.width)||0,v.height=ot(v.option.height,p?l:m.height)||0}}for(var u=a.length-1;u>=0;u--){var h=a[u],d=Fa(h.id,null),A=d!=null?s.get(d):null;if(A){var g=A.parent,m=Ko(g),y=g===i?{width:o,height:l}:{width:m.width,height:m.height},x={},b=QN(A,h,y,null,{hv:h.hv,boundingMode:h.bounding},x);if(!Ko(A).isNew&&b){for(var S=h.transition,_={},C=0;C<c.length;C++){var w=c[C],B=x[w];S&&(ap(S)||rr(S,w)>=0)?_[w]=B:A[w]=B}Er(A,_,t,0)}else A.attr(x)}}},e.prototype._clear=function(){var t=this,n=this._elMap;n.each(function(a){h5(a,Ko(a).option,n,t._lastGraphicModel)}),this._elMap=bt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Gn);function XR(r){var e=vt(F9,r)?F9[r]:Jk(r),t=new e({});return Ko(t).type=r,t}function j9(r,e,t,n){var a=XR(t);return e.add(a),n.set(r,a),Ko(a).id=r,Ko(a).isNew=!0,a}function h5(r,e,t,n){var a=r&&r.parent;a&&(r.type==="group"&&r.traverse(function(i){h5(i,e,t,n)}),aT(r,e,n),t.removeKey(Ko(r).id))}function O9(r,e,t,n){r.isGroup||X([["cursor",gl.prototype.cursor],["zlevel",n||0],["z",t||0],["z2",0]],function(a){var i=a[0];vt(e,i)?r[i]=$t(e[i],a[1]):r[i]==null&&(r[i]=a[1])}),X(pr(e),function(a){if(a.indexOf("on")===0){var i=e[a];r[a]=It(i)?i:null}}),vt(e,"draggable")&&(r.draggable=e.draggable),e.name!=null&&(r.name=e.name),e.id!=null&&(r.id=e.id)}function rDe(r){return r=He({},r),X(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(ste),function(e){delete r[e]}),r}function nDe(r,e,t){var n=Qt(r).eventData;!r.silent&&!r.ignore&&!n&&(n=Qt(r).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:r.name}),n&&(n.info=t.info)}function aDe(r){r.registerComponentModel(eDe),r.registerComponentView(tDe),r.registerPreprocessor(function(e){var t=e.graphic;$e(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var U9=["x","y","radius","angle","single"],iDe=["cartesian2d","polar","singleAxis"];function sDe(r){var e=r.get("coordinateSystem");return rr(iDe,e)>=0}function cA(r){return r+"Axis"}function oDe(r,e){var t=bt(),n=[],a=bt();r.eachComponent({mainType:"dataZoom",query:e},function(u){a.get(u.uid)||o(u)});var i;do i=!1,r.eachComponent("dataZoom",s);while(i);function s(u){!a.get(u.uid)&&l(u)&&(o(u),i=!0)}function o(u){a.set(u.uid,!0),n.push(u),c(u)}function l(u){var h=!1;return u.eachTargetAxis(function(d,A){var g=t.get(d);g&&g[A]&&(h=!0)}),h}function c(u){u.eachTargetAxis(function(h,d){(t.get(h)||t.set(h,[]))[d]=!0})}return n}function mie(r){var e=r.ecModel,t={infoList:[],infoMap:bt()};return r.eachTargetAxis(function(n,a){var i=e.getComponent(cA(n),a);if(i){var s=i.getCoordSysModel();if(s){var o=s.uid,l=t.infoMap.get(o);l||(l={model:s,axisModels:[]},t.infoList.push(l),t.infoMap.set(o,l)),l.axisModels.push(i)}}}),t}var q4=function(){function r(){this.indexList=[],this.indexMap=[]}return r.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},r}(),Qb=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,n,a){var i=H9(t);this.settledOption=i,this.mergeDefaultAndTheme(t,a),this._doInit(i)},e.prototype.mergeOption=function(t){var n=H9(t);qt(this.option,t,!0),qt(this.settledOption,n,!0),this._doInit(n)},e.prototype._doInit=function(t){var n=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var a=this.settledOption;X([["start","startValue"],["end","endValue"]],function(i,s){this._rangePropMode[s]==="value"&&(n[i[0]]=a[i[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),n=this._targetAxisInfoMap=bt(),a=this._fillSpecifiedTargetAxis(n);a?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(i){i.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var n=!1;return X(U9,function(a){var i=this.getReferringComponents(cA(a),J0e);if(i.specified){n=!0;var s=new q4;X(i.models,function(o){s.add(o.componentIndex)}),t.set(a,s)}},this),n},e.prototype._fillAutoTargetAxisByOrient=function(t,n){var a=this.ecModel,i=!0;if(i){var s=n==="vertical"?"y":"x",o=a.findComponents({mainType:s+"Axis"});l(o,s)}if(i){var o=a.findComponents({mainType:"singleAxis",filter:function(u){return u.get("orient",!0)===n}});l(o,"single")}function l(c,u){var h=c[0];if(h){var d=new q4;if(d.add(h.componentIndex),t.set(u,d),i=!1,u==="x"||u==="y"){var A=h.getReferringComponents("grid",Na).models[0];A&&X(c,function(g){h.componentIndex!==g.componentIndex&&A===g.getReferringComponents("grid",Na).models[0]&&d.add(g.componentIndex)})}}}i&&X(U9,function(c){if(i){var u=a.findComponents({mainType:cA(c),filter:function(d){return d.get("type",!0)==="category"}});if(u[0]){var h=new q4;h.add(u[0].componentIndex),t.set(c,h),i=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(n){!t&&(t=n)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var n=this._rangePropMode,a=this.get("rangeMode");X([["start","startValue"],["end","endValue"]],function(i,s){var o=t[i[0]]!=null,l=t[i[1]]!=null;o&&!l?n[s]="percent":!o&&l?n[s]="value":a?n[s]=a[s]:o&&(n[s]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(n,a){t==null&&(t=this.ecModel.getComponent(cA(n),a))},this),t},e.prototype.eachTargetAxis=function(t,n){this._targetAxisInfoMap.each(function(a,i){X(a.indexList,function(s){t.call(n,i,s)})})},e.prototype.getAxisProxy=function(t,n){var a=this.getAxisModel(t,n);if(a)return a.__dzAxisProxy},e.prototype.getAxisModel=function(t,n){var a=this._targetAxisInfoMap.get(t);if(a&&a.indexMap[n])return this.ecModel.getComponent(cA(t),n)},e.prototype.setRawRange=function(t){var n=this.option,a=this.settledOption;X([["start","startValue"],["end","endValue"]],function(i){(t[i[0]]!=null||t[i[1]]!=null)&&(n[i[0]]=a[i[0]]=t[i[0]],n[i[1]]=a[i[1]]=t[i[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var n=this.option;X(["start","startValue","end","endValue"],function(a){n[a]=t[a]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,n){if(t==null&&n==null){var a=this.findRepresentativeAxisProxy();if(a)return a.getDataValueWindow()}else return this.getAxisProxy(t,n).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var n,a=this._targetAxisInfoMap.keys(),i=0;i<a.length;i++)for(var s=a[i],o=this._targetAxisInfoMap.get(s),l=0;l<o.indexList.length;l++){var c=this.getAxisProxy(s,o.indexList[l]);if(c.hostedBy(this))return c;n||(n=c)}return n},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(gr);function H9(r){var e={};return X(["start","end","startValue","endValue","throttle"],function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}),e}var lDe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(Qb),wj=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a,i){this.dataZoomModel=t,this.ecModel=n,this.api=a},e.type="dataZoom",e}(Gn),cDe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e}(wj),av=X,Q9=ll,uDe=function(){function r(e,t,n,a){this._dimName=e,this._axisIndex=t,this.ecModel=a,this._dataZoomModel=n}return r.prototype.hostedBy=function(e){return this._dataZoomModel===e},r.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},r.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},r.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(sDe(t)){var n=cA(this._dimName),a=t.getReferringComponents(n,Na).models[0];a&&this._axisIndex===a.componentIndex&&e.push(t)}},this),e},r.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},r.prototype.getMinMaxSpan=function(){return Ft(this._minMaxSpan)},r.prototype.calculateDataWindow=function(e){var t=this._dataExtent,n=this.getAxisModel(),a=n.axis.scale,i=this._dataZoomModel.getRangePropMode(),s=[0,100],o=[],l=[],c;av(["start","end"],function(d,A){var g=e[d],p=e[d+"Value"];i[A]==="percent"?(g==null&&(g=s[A]),p=a.parse(Hr(g,s,t))):(c=!0,p=p==null?t[A]:a.parse(p),g=Hr(p,t,s)),l[A]=p==null||isNaN(p)?t[A]:p,o[A]=g==null||isNaN(g)?s[A]:g}),Q9(l),Q9(o);var u=this._minMaxSpan;c?h(l,o,t,s,!1):h(o,l,s,t,!0);function h(d,A,g,p,v){var m=v?"Span":"ValueSpan";zp(0,d,g,"all",u["min"+m],u["max"+m]);for(var y=0;y<2;y++)A[y]=Hr(d[y],g,p,!0),v&&(A[y]=a.parse(A[y]))}return{valueWindow:l,percentWindow:o}},r.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=hDe(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},r.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var n=this._dimName,a=this.getTargetSeriesModels(),i=e.get("filterMode"),s=this._valueWindow;if(i==="none")return;av(a,function(l){var c=l.getData(),u=c.mapDimensionsAll(n);if(u.length){if(i==="weakFilter"){var h=c.getStore(),d=We(u,function(A){return c.getDimensionIndex(A)},c);c.filterSelf(function(A){for(var g,p,v,m=0;m<u.length;m++){var y=h.get(d[m],A),x=!isNaN(y),b=y<s[0],S=y>s[1];if(x&&!b&&!S)return!0;x&&(v=!0),b&&(g=!0),S&&(p=!0)}return v&&g&&p})}else av(u,function(A){if(i==="empty")l.setData(c=c.map(A,function(p){return o(p)?p:NaN}));else{var g={};g[A]=s,c.selectRange(g)}});av(u,function(A){c.setApproximateExtent(s,A)})}});function o(l){return l>=s[0]&&l<=s[1]}},r.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;av(["min","max"],function(a){var i=t.get(a+"Span"),s=t.get(a+"ValueSpan");s!=null&&(s=this.getAxisModel().axis.scale.parse(s)),s!=null?i=Hr(n[0]+s,n,[0,100],!0):i!=null&&(s=Hr(i,[0,100],n,!0)-n[0]),e[a+"Span"]=i,e[a+"ValueSpan"]=s},this)},r.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var a=qJ(n,[0,500]);a=Math.min(a,20);var i=e.axis.scale.rawExtentInfo;t[0]!==0&&i.setDeterminedMinMax("min",+n[0].toFixed(a)),t[1]!==100&&i.setDeterminedMinMax("max",+n[1].toFixed(a)),i.freeze()}},r}();function hDe(r,e,t){var n=[1/0,-1/0];av(t,function(s){G2e(n,s.getData(),e)});var a=r.getAxisModel(),i=Pre(a.axis.scale,a,n).calculate();return[i.min,i.max]}var dDe={getTargetSeries:function(r){function e(a){r.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(s,o){var l=r.getComponent(cA(s),o);a(s,o,l,i)})})}e(function(a,i,s,o){s.__dzAxisProxy=null});var t=[];e(function(a,i,s,o){s.__dzAxisProxy||(s.__dzAxisProxy=new uDe(a,i,o,r),t.push(s.__dzAxisProxy))});var n=bt();return X(t,function(a){X(a.getTargetSeriesModels(),function(i){n.set(i.uid,i)})}),n},overallReset:function(r,e){r.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(n,a){t.getAxisProxy(n,a).reset(t)}),t.eachTargetAxis(function(n,a){t.getAxisProxy(n,a).filterData(t,e)})}),r.eachComponent("dataZoom",function(t){var n=t.findRepresentativeAxisProxy();if(n){var a=n.getDataPercentWindow(),i=n.getDataValueWindow();t.setCalculatedRange({start:a[0],end:a[1],startValue:i[0],endValue:i[1]})}})}};function ADe(r){r.registerAction("dataZoom",function(e,t){var n=oDe(t,e);X(n,function(a){a.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var z9=!1;function Sj(r){z9||(z9=!0,r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,dDe),ADe(r),r.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function fDe(r){r.registerComponentModel(lDe),r.registerComponentView(cDe),Sj(r)}var Zo=function(){function r(){}return r}(),vie={};function iv(r,e){vie[r]=e}function yie(r){return vie[r]}var gDe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){r.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;X(this.option.feature,function(n,a){var i=yie(a);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),qt(n,i.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(gr);function pDe(r,e,t){var n=e.getBoxLayoutParams(),a=e.get("padding"),i={width:t.getWidth(),height:t.getHeight()},s=Ua(n,i,a);rp(e.get("orient"),r,e.get("itemGap"),s.width,s.height),QN(r,n,i,a)}function xie(r,e){var t=sy(e.get("padding")),n=e.getItemStyle(["color","opacity"]);return n.fill=e.get("backgroundColor"),r=new br({shape:{x:r.x-t[3],y:r.y-t[0],width:r.width+t[1]+t[3],height:r.height+t[0]+t[2],r:e.get("borderRadius")},style:n,silent:!0,z2:-1}),r}var mDe=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n,a,i){var s=this.group;if(s.removeAll(),!t.get("show"))return;var o=+t.get("itemSize"),l=t.get("orient")==="vertical",c=t.get("feature")||{},u=this._features||(this._features={}),h=[];X(c,function(g,p){h.push(p)}),new Nh(this._featureNames||[],h).add(d).update(d).remove(Wt(d,null)).execute(),this._featureNames=h;function d(g,p){var v=h[g],m=h[p],y=c[v],x=new Qr(y,t,t.ecModel),b;if(i&&i.newTitle!=null&&i.featureName===v&&(y.title=i.newTitle),v&&!m){if(vDe(v))b={onclick:x.option.onclick,featureName:v};else{var S=yie(v);if(!S)return;b=new S}u[v]=b}else if(b=u[m],!b)return;b.uid=iy("toolbox-feature"),b.model=x,b.ecModel=n,b.api=a;var _=b instanceof Zo;if(!v&&m){_&&b.dispose&&b.dispose(n,a);return}if(!x.get("show")||_&&b.unusable){_&&b.remove&&b.remove(n,a);return}A(x,b,v),x.setIconStatus=function(C,w){var B=this.option,D=this.iconPaths;B.iconStatus=B.iconStatus||{},B.iconStatus[C]=w,D[C]&&(w==="emphasis"?Ch:Bh)(D[C])},b instanceof Zo&&b.render&&b.render(x,n,a,i)}function A(g,p,v){var m=g.getModel("iconStyle"),y=g.getModel(["emphasis","iconStyle"]),x=p instanceof Zo&&p.getIcons?p.getIcons():g.get("icon"),b=g.get("title")||{},S,_;dt(x)?(S={},S[v]=x):S=x,dt(b)?(_={},_[v]=b):_=b;var C=g.iconPaths={};X(S,function(w,B){var D=Dw(w,{},{x:-o/2,y:-o/2,width:o,height:o});D.setStyle(m.getItemStyle());var T=D.ensureState("emphasis");T.style=y.getItemStyle();var E=new Cr({style:{text:_[B],align:y.get("textAlign"),borderRadius:y.get("textBorderRadius"),padding:y.get("textPadding"),fill:null,font:eF({fontStyle:y.get("textFontStyle"),fontFamily:y.get("textFontFamily"),fontSize:y.get("textFontSize"),fontWeight:y.get("textFontWeight")},n)},ignore:!0});D.setTextContent(E),Fp({el:D,componentModel:t,itemName:B,formatterParamsExtra:{title:_[B]}}),D.__title=_[B],D.on("mouseover",function(){var R=y.getItemStyle(),M=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";E.setStyle({fill:y.get("textFill")||R.fill||R.stroke||"#000",backgroundColor:y.get("textBackgroundColor")}),D.setTextConfig({position:y.get("textPosition")||M}),E.ignore=!t.get("showTitle"),a.enterEmphasis(this)}).on("mouseout",function(){g.get(["iconStatus",B])!=="emphasis"&&a.leaveEmphasis(this),E.hide()}),(g.get(["iconStatus",B])==="emphasis"?Ch:Bh)(D),s.add(D),D.on("click",ft(p.onclick,p,n,a,B)),C[B]=D})}pDe(s,t,a),s.add(xie(s.getBoundingRect(),t)),l||s.eachChild(function(g){var p=g.__title,v=g.ensureState("emphasis"),m=v.textConfig||(v.textConfig={}),y=g.getTextContent(),x=y&&y.ensureState("emphasis");if(x&&!It(x)&&p){var b=x.style||(x.style={}),S=_w(p,Cr.makeFont(b)),_=g.x+s.x,C=g.y+s.y+o,w=!1;C+S.height>a.getHeight()&&(m.position="top",w=!0);var B=w?-5-S.height:o+10;_+S.width/2>a.getWidth()?(m.position=["100%",B],b.align="right"):_-S.width/2<0&&(m.position=[0,B],b.align="left")}})},e.prototype.updateView=function(t,n,a,i){X(this._features,function(s){s instanceof Zo&&s.updateView&&s.updateView(s.model,n,a,i)})},e.prototype.remove=function(t,n){X(this._features,function(a){a instanceof Zo&&a.remove&&a.remove(t,n)}),this.group.removeAll()},e.prototype.dispose=function(t,n){X(this._features,function(a){a instanceof Zo&&a.dispose&&a.dispose(t,n)})},e.type="toolbox",e}(Gn);function vDe(r){return r.indexOf("my")===0}var yDe=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){var a=this.model,i=a.get("name")||t.get("title.0.text")||"echarts",s=n.getZr().painter.getType()==="svg",o=s?"svg":a.get("type",!0)||"png",l=n.getConnectedDataURL({type:o,backgroundColor:a.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:a.get("connectedBackgroundColor"),excludeComponents:a.get("excludeComponents"),pixelRatio:a.get("pixelRatio")}),c=fr.browser;if(typeof MouseEvent=="function"&&(c.newEdge||!c.ie&&!c.edge)){var u=document.createElement("a");u.download=i+"."+o,u.target="_blank",u.href=l;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||s){var d=l.split(","),A=d[0].indexOf("base64")>-1,g=s?decodeURIComponent(d[1]):d[1];A&&(g=window.atob(g));var p=i+"."+o;if(window.navigator.msSaveOrOpenBlob){for(var v=g.length,m=new Uint8Array(v);v--;)m[v]=g.charCodeAt(v);var y=new Blob([m]);window.navigator.msSaveOrOpenBlob(y,p)}else{var x=document.createElement("iframe");document.body.appendChild(x);var b=x.contentWindow,S=b.document;S.open("image/svg+xml","replace"),S.write(g),S.close(),b.focus(),S.execCommand("SaveAs",!0,p),document.body.removeChild(x)}}else{var _=a.get("lang"),C='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>',w=window.open();w.document.write(C),w.document.title=i}},e.getDefaultOption=function(t){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},e}(Zo),G9="__ec_magicType_stack__",xDe=[["line","bar"],["stack"]],bDe=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,n=t.get("icon"),a={};return X(t.get("type"),function(i){n[i]&&(a[i]=n[i])}),a},e.getDefaultOption=function(t){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},e.prototype.onclick=function(t,n,a){var i=this.model,s=i.get(["seriesIndex",a]);if(V9[a]){var o={series:[]},l=function(h){var d=h.subType,A=h.id,g=V9[a](d,A,h,i);g&&(Lt(g,h.option),o.series.push(g));var p=h.coordinateSystem;if(p&&p.type==="cartesian2d"&&(a==="line"||a==="bar")){var v=p.getAxesByScale("ordinal")[0];if(v){var m=v.dim,y=m+"Axis",x=h.getReferringComponents(y,Na).models[0],b=x.componentIndex;o[y]=o[y]||[];for(var S=0;S<=b;S++)o[y][b]=o[y][b]||{};o[y][b].boundaryGap=a==="bar"}}};X(xDe,function(h){rr(h,a)>=0&&X(h,function(d){i.setIconStatus(d,"normal")})}),i.setIconStatus(a,"emphasis"),t.eachComponent({mainType:"series",query:s==null?null:{seriesIndex:s}},l);var c,u=a;a==="stack"&&(c=qt({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),i.get(["iconStatus",a])!=="emphasis"&&(u="tiled")),n.dispatchAction({type:"changeMagicType",currentType:u,newOption:o,newTitle:c,featureName:"magicType"})}},e}(Zo),V9={line:function(r,e,t,n){if(r==="bar")return qt({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(r,e,t,n){if(r==="line")return qt({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(r,e,t,n){var a=t.get("stack")===G9;if(r==="line"||r==="bar")return n.setIconStatus("stack",a?"normal":"emphasis"),qt({id:e,stack:a?"":G9},n.get(["option","stack"])||{},!0)}};du({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(r,e){e.mergeOption(r.newOption)});var iT=new Array(60).join("-"),M0="	";function wDe(r){var e={},t=[],n=[];return r.eachRawSeries(function(a){var i=a.coordinateSystem;if(i&&(i.type==="cartesian2d"||i.type==="polar")){var s=i.getBaseAxis();if(s.type==="category"){var o=s.dim+"_"+s.index;e[o]||(e[o]={categoryAxis:s,valueAxis:i.getOtherAxis(s),series:[]},n.push({axisDim:s.dim,axisIndex:s.index})),e[o].series.push(a)}else t.push(a)}else t.push(a)}),{seriesGroupByCategoryAxis:e,other:t,meta:n}}function SDe(r){var e=[];return X(r,function(t,n){var a=t.categoryAxis,i=t.valueAxis,s=i.dim,o=[" "].concat(We(t.series,function(A){return A.name})),l=[a.model.getCategories()];X(t.series,function(A){var g=A.getRawData();l.push(A.getRawData().mapArray(g.mapDimension(s),function(p){return p}))});for(var c=[o.join(M0)],u=0;u<l[0].length;u++){for(var h=[],d=0;d<l.length;d++)h.push(l[d][u]);c.push(h.join(M0))}e.push(c.join(`
`))}),e.join(`

`+iT+`

`)}function _De(r){return We(r,function(e){var t=e.getRawData(),n=[e.name],a=[];return t.each(t.dimensions,function(){for(var i=arguments.length,s=arguments[i-1],o=t.getName(s),l=0;l<i-1;l++)a[l]=arguments[l];n.push((o?o+M0:"")+a.join(M0))}),n.join(`
`)}).join(`

`+iT+`

`)}function CDe(r){var e=wDe(r);return{value:Ur([SDe(e.seriesGroupByCategoryAxis),_De(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+iT+`

`),meta:e.meta}}function qC(r){return r.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function BDe(r){var e=r.slice(0,r.indexOf(`
`));if(e.indexOf(M0)>=0)return!0}var ZR=new RegExp("["+M0+"]+","g");function NDe(r){for(var e=r.split(/\n+/g),t=qC(e.shift()).split(ZR),n=[],a=We(t,function(l){return{name:l,data:[]}}),i=0;i<e.length;i++){var s=qC(e[i]).split(ZR);n.push(s.shift());for(var o=0;o<s.length;o++)a[o]&&(a[o].data[i]=s[o])}return{series:a,categories:n}}function TDe(r){for(var e=r.split(/\n+/g),t=qC(e.shift()),n=[],a=0;a<e.length;a++){var i=qC(e[a]);if(i){var s=i.split(ZR),o="",l=void 0,c=!1;isNaN(s[0])?(c=!0,o=s[0],s=s.slice(1),n[a]={name:o,value:[]},l=n[a].value):l=n[a]=[];for(var u=0;u<s.length;u++)l.push(+s[u]);l.length===1&&(c?n[a].value=l[0]:n[a]=l[0])}}return{name:t,data:n}}function IDe(r,e){var t=r.split(new RegExp(`
*`+iT+`
*`,"g")),n={series:[]};return X(t,function(a,i){if(BDe(a)){var s=NDe(a),o=e[i],l=o.axisDim+"Axis";o&&(n[l]=n[l]||[],n[l][o.axisIndex]={data:s.categories},n.series=n.series.concat(s.series))}else{var s=TDe(a);n.series.push(s)}}),n}var EDe=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var a=n.getDom(),i=this.model;this._dom&&a.removeChild(this._dom);var s=document.createElement("div");s.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",s.style.backgroundColor=i.get("backgroundColor")||"#fff";var o=document.createElement("h4"),l=i.get("lang")||[];o.innerHTML=l[0]||i.get("title"),o.style.cssText="margin:10px 20px",o.style.color=i.get("textColor");var c=document.createElement("div"),u=document.createElement("textarea");c.style.cssText="overflow:auto";var h=i.get("optionToContent"),d=i.get("contentToOption"),A=CDe(t);if(It(h)){var g=h(n.getOption());dt(g)?c.innerHTML=g:w0(g)&&c.appendChild(g)}else{u.readOnly=i.get("readOnly");var p=u.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=i.get("textColor"),p.borderColor=i.get("textareaBorderColor"),p.backgroundColor=i.get("textareaColor"),u.value=A.value,c.appendChild(u)}var v=A.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var y="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",x=document.createElement("div"),b=document.createElement("div");y+=";background-color:"+i.get("buttonColor"),y+=";color:"+i.get("buttonTextColor");var S=this;function _(){a.removeChild(s),S._dom=null}E3(x,"click",_),E3(b,"click",function(){if(d==null&&h!=null||d!=null&&h==null){_();return}var C;try{It(d)?C=d(c,n.getOption()):C=IDe(u.value,v)}catch(w){throw _(),new Error("Data view format error "+w)}C&&n.dispatchAction({type:"changeDataView",newOption:C}),_()}),x.innerHTML=l[1],b.innerHTML=l[2],b.style.cssText=x.style.cssText=y,!i.get("readOnly")&&m.appendChild(b),m.appendChild(x),s.appendChild(o),s.appendChild(c),s.appendChild(m),c.style.height=a.clientHeight-80+"px",a.appendChild(s),this._dom=s},e.prototype.remove=function(t,n){this._dom&&n.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,n){this.remove(t,n)},e.getDefaultOption=function(t){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},e}(Zo);function DDe(r,e){return We(r,function(t,n){var a=e&&e[n];if(Pt(a)&&!$e(a)){var i=Pt(t)&&!$e(t);i||(t={value:t});var s=a.name!=null&&t.name==null;return t=Lt(t,a),s&&delete t.name,t}else return t})}du({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(r,e){var t=[];X(r.newOption.series,function(n){var a=e.getSeriesByName(n.name)[0];if(!a)t.push(He({type:"scatter"},n));else{var i=a.get("data");t.push({name:n.name,data:DDe(n.data,i)})}}),e.mergeOption(Lt({series:t},r.newOption))});var bie=X,wie=wr();function MDe(r,e){var t=_j(r);bie(e,function(n,a){for(var i=t.length-1;i>=0;i--){var s=t[i];if(s[a])break}if(i<0){var o=r.queryComponents({mainType:"dataZoom",subType:"select",id:a})[0];if(o){var l=o.getPercentRange();t[0][a]={dataZoomId:a,start:l[0],end:l[1]}}}}),t.push(e)}function RDe(r){var e=_j(r),t=e[e.length-1];e.length>1&&e.pop();var n={};return bie(t,function(a,i){for(var s=e.length-1;s>=0;s--)if(a=e[s][i],a){n[i]=a;break}}),n}function LDe(r){wie(r).snapshots=null}function PDe(r){return _j(r).length}function _j(r){var e=wie(r);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var kDe=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.onclick=function(t,n){LDe(t),n.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return n},e}(Zo);du({type:"restore",event:"restore",update:"prepareAndUpdate"},function(r,e){e.resetOption("recreate")});var FDe=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Cj=function(){function r(e,t,n){var a=this;this._targetInfoList=[];var i=$9(t,e);X(jDe,function(s,o){(!n||!n.include||rr(n.include,o)>=0)&&s(i,a._targetInfoList)})}return r.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(n,a,i){if((n.coordRanges||(n.coordRanges=[])).push(a),!n.coordRange){n.coordRange=a;var s=Y4[n.brushType](0,i,a);n.__rangeOffset={offset:Y9[n.brushType](s.values,n.range,[1,1]),xyMinMax:s.xyMinMax}}}),e},r.prototype.matchOutputRanges=function(e,t,n){X(e,function(a){var i=this.findTargetInfo(a,t);i&&i!==!0&&X(i.coordSyses,function(s){var o=Y4[a.brushType](1,s,a.range,!0);n(a,o.values,s,t)})},this)},r.prototype.setInputRanges=function(e,t){X(e,function(n){var a=this.findTargetInfo(n,t);if(n.range=n.range||[],a&&a!==!0){n.panelId=a.panelId;var i=Y4[n.brushType](0,a.coordSys,n.coordRange),s=n.__rangeOffset;n.range=s?Y9[n.brushType](i.values,s.offset,ODe(i.xyMinMax,s.xyMinMax)):i.values}},this)},r.prototype.makePanelOpts=function(e,t){return We(this._targetInfoList,function(n){var a=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:Eae(a),isTargetByCursor:Mae(a,e,n.coordSysModel),getLinearBrushOtherExtent:Dae(a)}})},r.prototype.controlSeries=function(e,t,n){var a=this.findTargetInfo(e,n);return a===!0||a&&rr(a.coordSyses,t.coordinateSystem)>=0},r.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,a=$9(t,e),i=0;i<n.length;i++){var s=n[i],o=e.panelId;if(o){if(s.panelId===o)return s}else for(var l=0;l<K9.length;l++)if(K9[l](a,s))return s}return!0},r}();function JR(r){return r[0]>r[1]&&r.reverse(),r}function $9(r,e){return N1(r,e,{includeMainTypes:FDe})}var jDe={grid:function(r,e){var t=r.xAxisModels,n=r.yAxisModels,a=r.gridModels,i=bt(),s={},o={};!t&&!n&&!a||(X(t,function(l){var c=l.axis.grid.model;i.set(c.id,c),s[c.id]=!0}),X(n,function(l){var c=l.axis.grid.model;i.set(c.id,c),o[c.id]=!0}),X(a,function(l){i.set(l.id,l),s[l.id]=!0,o[l.id]=!0}),i.each(function(l){var c=l.coordinateSystem,u=[];X(c.getCartesians(),function(h,d){(rr(t,h.getAxis("x").model)>=0||rr(n,h.getAxis("y").model)>=0)&&u.push(h)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:u[0],coordSyses:u,getPanelRect:W9.grid,xAxisDeclared:s[l.id],yAxisDeclared:o[l.id]})}))},geo:function(r,e){X(r.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:W9.geo})})}},K9=[function(r,e){var t=r.xAxisModel,n=r.yAxisModel,a=r.gridModel;return!a&&t&&(a=t.axis.grid.model),!a&&n&&(a=n.axis.grid.model),a&&a===e.gridModel},function(r,e){var t=r.geoModel;return t&&t===e.geoModel}],W9={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var r=this.coordSys,e=r.getBoundingRect().clone();return e.applyTransform(tp(r)),e}},Y4={lineX:Wt(q9,0),lineY:Wt(q9,1),rect:function(r,e,t,n){var a=r?e.pointToData([t[0][0],t[1][0]],n):e.dataToPoint([t[0][0],t[1][0]],n),i=r?e.pointToData([t[0][1],t[1][1]],n):e.dataToPoint([t[0][1],t[1][1]],n),s=[JR([a[0],i[0]]),JR([a[1],i[1]])];return{values:s,xyMinMax:s}},polygon:function(r,e,t,n){var a=[[1/0,-1/0],[1/0,-1/0]],i=We(t,function(s){var o=r?e.pointToData(s,n):e.dataToPoint(s,n);return a[0][0]=Math.min(a[0][0],o[0]),a[1][0]=Math.min(a[1][0],o[1]),a[0][1]=Math.max(a[0][1],o[0]),a[1][1]=Math.max(a[1][1],o[1]),o});return{values:i,xyMinMax:a}}};function q9(r,e,t,n){var a=t.getAxis(["x","y"][r]),i=JR(We([0,1],function(o){return e?a.coordToData(a.toLocalCoord(n[o]),!0):a.toGlobalCoord(a.dataToCoord(n[o]))})),s=[];return s[r]=i,s[1-r]=[NaN,NaN],{values:i,xyMinMax:s}}var Y9={lineX:Wt(X9,0),lineY:Wt(X9,1),rect:function(r,e,t){return[[r[0][0]-t[0]*e[0][0],r[0][1]-t[0]*e[0][1]],[r[1][0]-t[1]*e[1][0],r[1][1]-t[1]*e[1][1]]]},polygon:function(r,e,t){return We(r,function(n,a){return[n[0]-t[0]*e[a][0],n[1]-t[1]*e[a][1]]})}};function X9(r,e,t,n){return[e[0]-n[r]*t[0],e[1]-n[r]*t[1]]}function ODe(r,e){var t=Z9(r),n=Z9(e),a=[t[0]/n[0],t[1]/n[1]];return isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a}function Z9(r){return r?[r[0][1]-r[0][0],r[1][1]-r[1][0]]:[NaN,NaN]}var eL=X,UDe=W0e("toolbox-dataZoom_"),HDe=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n,a,i){this._brushController||(this._brushController=new ZF(a.getZr()),this._brushController.on("brush",ft(this._onBrush,this)).mount()),GDe(t,n,this,i,a),zDe(t,n)},e.prototype.onclick=function(t,n,a){QDe[a].call(this)},e.prototype.remove=function(t,n){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,n){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var n=t.areas;if(!t.isEnd||!n.length)return;var a={},i=this.ecModel;this._brushController.updateCovers([]);var s=new Cj(Bj(this.model),i,{include:["grid"]});s.matchOutputRanges(n,i,function(c,u,h){if(h.type==="cartesian2d"){var d=c.brushType;d==="rect"?(o("x",h,u[0]),o("y",h,u[1])):o({lineX:"x",lineY:"y"}[d],h,u)}}),MDe(i,a),this._dispatchZoomAction(a);function o(c,u,h){var d=u.getAxis(c),A=d.model,g=l(c,A,i),p=g.findRepresentativeAxisProxy(A).getMinMaxSpan();(p.minValueSpan!=null||p.maxValueSpan!=null)&&(h=zp(0,h.slice(),d.scale.getExtent(),0,p.minValueSpan,p.maxValueSpan)),g&&(a[g.id]={dataZoomId:g.id,startValue:h[0],endValue:h[1]})}function l(c,u,h){var d;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(A){var g=A.getAxisModel(c,u.componentIndex);g&&(d=A)}),d}},e.prototype._dispatchZoomAction=function(t){var n=[];eL(t,function(a,i){n.push(Ft(a))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},e.getDefaultOption=function(t){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},e}(Zo),QDe={zoom:function(){var r=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:r})},back:function(){this._dispatchZoomAction(RDe(this.ecModel))}};function Bj(r){var e={xAxisIndex:r.get("xAxisIndex",!0),yAxisIndex:r.get("yAxisIndex",!0),xAxisId:r.get("xAxisId",!0),yAxisId:r.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function zDe(r,e){r.setIconStatus("back",PDe(e)>1?"emphasis":"normal")}function GDe(r,e,t,n,a){var i=t._isZoomActive;n&&n.type==="takeGlobalCursor"&&(i=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),t._isZoomActive=i,r.setIconStatus("zoom",i?"emphasis":"normal");var s=new Cj(Bj(r),e,{include:["grid"]}),o=s.makePanelOpts(a,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(o).enableBrush(i&&o.length?{brushType:"auto",brushStyle:r.getModel("brushStyle").getItemStyle()}:!1)}y1e("dataZoom",function(r){var e=r.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var n=e.getModel(t),a=[],i=Bj(n),s=N1(r,i);eL(s.xAxisModels,function(l){return o(l,"xAxis","xAxisIndex")}),eL(s.yAxisModels,function(l){return o(l,"yAxis","yAxisIndex")});function o(l,c,u){var h=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:UDe+c+h};d[u]=h,a.push(d)}return a});function VDe(r){r.registerComponentModel(gDe),r.registerComponentView(mDe),iv("saveAsImage",yDe),iv("magicType",bDe),iv("dataView",EDe),iv("dataZoom",HDe),iv("restore",kDe),sr(fDe)}var $De=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(gr);function Sie(r){var e=r.get("confine");return e!=null?!!e:r.get("renderMode")==="richText"}function _ie(r){if(fr.domSupported){for(var e=document.documentElement.style,t=0,n=r.length;t<n;t++)if(r[t]in e)return r[t]}}var Cie=_ie(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),KDe=_ie(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Bie(r,e){if(!r)return e;e=ate(e,!0);var t=r.indexOf(e);return r=t===-1?e:"-"+r.slice(0,t)+"-"+e,r.toLowerCase()}function WDe(r,e){var t=r.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r);return t?t[e]:null}var qDe=Bie(KDe,"transition"),Nj=Bie(Cie,"transform"),YDe="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(fr.transform3dSupported?"will-change:transform;":"");function XDe(r){return r=r==="left"?"right":r==="right"?"left":r==="top"?"bottom":"top",r}function ZDe(r,e,t){if(!dt(t)||t==="inside")return"";var n=r.get("backgroundColor"),a=r.get("borderWidth");e=bp(e);var i=XDe(t),s=Math.max(Math.round(a)*1.5,6),o="",l=Nj+":",c;rr(["left","right"],i)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(c=i==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(c=i==="top"?225:45)+"deg)");var u=c*Math.PI/180,h=s+a,d=h*Math.abs(Math.cos(u))+h*Math.abs(Math.sin(u)),A=Math.round(((d-Math.SQRT2*a)/2+Math.SQRT2*a-(d-h)/2)*100)/100;o+=";"+i+":-"+A+"px";var g=e+" solid "+a+"px;",p=["position:absolute;width:"+s+"px;height:"+s+"px;z-index:-1;",o+";"+l+";","border-bottom:"+g,"border-right:"+g,"background-color:"+n+";"];return'<div style="'+p.join("")+'"></div>'}function JDe(r,e){var t="cubic-bezier(0.23,1,0.32,1)",n=" "+r/2+"s "+t,a="opacity"+n+",visibility"+n;return e||(n=" "+r+"s "+t,a+=fr.transformSupported?","+Nj+n:",left"+n+",top"+n),qDe+":"+a}function J9(r,e,t){var n=r.toFixed(0)+"px",a=e.toFixed(0)+"px";if(!fr.transformSupported)return t?"top:"+a+";left:"+n+";":[["top",a],["left",n]];var i=fr.transform3dSupported,s="translate"+(i?"3d":"")+"("+n+","+a+(i?",0":"")+")";return t?"top:0;left:0;"+Nj+":"+s+";":[["top",0],["left",0],[Cie,s]]}function eMe(r){var e=[],t=r.get("fontSize"),n=r.getTextColor();n&&e.push("color:"+n),e.push("font:"+r.getFont());var a=$t(r.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+a+"px");var i=r.get("textShadowColor"),s=r.get("textShadowBlur")||0,o=r.get("textShadowOffsetX")||0,l=r.get("textShadowOffsetY")||0;return i&&s&&e.push("text-shadow:"+o+"px "+l+"px "+s+"px "+i),X(["decoration","align"],function(c){var u=r.get(c);u&&e.push("text-"+c+":"+u)}),e.join(";")}function tMe(r,e,t){var n=[],a=r.get("transitionDuration"),i=r.get("backgroundColor"),s=r.get("shadowBlur"),o=r.get("shadowColor"),l=r.get("shadowOffsetX"),c=r.get("shadowOffsetY"),u=r.getModel("textStyle"),h=jte(r,"html"),d=l+"px "+c+"px "+s+"px "+o;return n.push("box-shadow:"+d),e&&a&&n.push(JDe(a,t)),i&&n.push("background-color:"+i),X(["width","color","radius"],function(A){var g="border-"+A,p=ate(g),v=r.get(p);v!=null&&n.push(g+":"+v+(A==="color"?"":"px"))}),n.push(eMe(u)),h!=null&&n.push("padding:"+sy(h).join("px ")+"px"),n.join(";")+";"}function eG(r,e,t,n,a){var i=e&&e.painter;if(t){var s=i&&i.getViewportRoot();s&&Bve(r,s,t,n,a)}else{r[0]=n,r[1]=a;var o=i&&i.getViewportRootOffset();o&&(r[0]+=o.offsetLeft,r[1]+=o.offsetTop)}r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}var rMe=function(){function r(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,fr.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var a=this._zr=e.getZr(),i=t.appendTo,s=i&&(dt(i)?document.querySelector(i):w0(i)?i:It(i)&&i(e.getDom()));eG(this._styleCoord,a,s,e.getWidth()/2,e.getHeight()/2),(s||e.getDom()).appendChild(n),this._api=e,this._container=s;var o=this;n.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},n.onmousemove=function(l){if(l=l||window.event,!o._enterable){var c=a.handler,u=a.painter.getViewportRoot();Qo(u,l,!0),c.dispatch("mousemove",l)}},n.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return r.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),n=WDe(t,"position"),a=t.style;a.position!=="absolute"&&n!=="absolute"&&(a.position="relative")}var i=e.get("alwaysShowContent");i&&this._moveIfResized(),this._alwaysShowContent=i,this.el.className=e.get("className")||""},r.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,a=n.style,i=this._styleCoord;n.innerHTML?a.cssText=YDe+tMe(e,!this._firstShow,this._longHide)+J9(i[0],i[1],!0)+("border-color:"+bp(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):a.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},r.prototype.setContent=function(e,t,n,a,i){var s=this.el;if(e==null){s.innerHTML="";return}var o="";if(dt(i)&&n.get("trigger")==="item"&&!Sie(n)&&(o=ZDe(n,a,i)),dt(e))s.innerHTML=e+o;else if(e){s.innerHTML="",$e(e)||(e=[e]);for(var l=0;l<e.length;l++)w0(e[l])&&e[l].parentNode!==s&&s.appendChild(e[l]);if(o&&s.childNodes.length){var c=document.createElement("div");c.innerHTML=o,s.appendChild(c)}}},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},r.prototype.moveTo=function(e,t){if(this.el){var n=this._styleCoord;if(eG(n,this._zr,this._container,e,t),n[0]!=null&&n[1]!=null){var a=this.el.style,i=J9(n[0],n[1]);X(i,function(s){a[s[0]]=s[1]})}}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",fr.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ft(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this.el.parentNode;e&&e.removeChild(this.el),this.el=this._container=null},r}(),nMe=function(){function r(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),rG(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return r.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},r.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},r.prototype.setContent=function(e,t,n,a,i){var s=this;Pt(e)&&Or(""),this.el&&this._zr.remove(this.el);var o=n.getModel("textStyle");this.el=new Cr({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:a,textShadowColor:o.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:jte(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),X(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){s.el.style[c]=n.get(c)}),X(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){s.el.style[c]=o.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},r.prototype.setEnterable=function(e){this._enterable=e},r.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),n=tG(e.style);return[t.width+n.left+n.right,t.height+n.top+n.bottom]},r.prototype.moveTo=function(e,t){var n=this.el;if(n){var a=this._styleCoord;rG(a,this._zr,e,t),e=a[0],t=a[1];var i=n.style,s=Rd(i.borderWidth||0),o=tG(i);n.x=e+s+o.left,n.y=t+s+o.top,n.markRedraw()}},r.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},r.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},r.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(ft(this.hide,this),e)):this.hide())},r.prototype.isShow=function(){return this._show},r.prototype.dispose=function(){this._zr.remove(this.el)},r}();function Rd(r){return Math.max(0,r)}function tG(r){var e=Rd(r.shadowBlur||0),t=Rd(r.shadowOffsetX||0),n=Rd(r.shadowOffsetY||0);return{left:Rd(e-t),right:Rd(e+t),top:Rd(e-n),bottom:Rd(e+n)}}function rG(r,e,t,n){r[0]=t,r[1]=n,r[2]=r[0]/e.getWidth(),r[3]=r[1]/e.getHeight()}var aMe=new br({shape:{x:-1,y:-1,width:2,height:2}}),iMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){if(!(fr.node||!n.getDom())){var a=t.getComponent("tooltip"),i=this._renderMode=tye(a.get("renderMode"));this._tooltipContent=i==="richText"?new nMe(n):new rMe(n,{appendTo:a.get("appendToBody",!0)?"body":a.get("appendTo",!0)})}},e.prototype.render=function(t,n,a){if(!(fr.node||!a.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=n,this._api=a;var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?uy(this,"_updatePosition",50,"fixRate"):Ib(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,n=t.get("triggerOn");uie("itemTooltip",this._api,ft(function(a,i,s){n!=="none"&&(n.indexOf(a)>=0?this._tryShow(i,s):a==="leave"&&this._hide(s))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,n=this._ecModel,a=this._api,i=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&i!=="none"&&i!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!a.isDisposed()&&s.manuallyShowTip(t,n,a,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,n,a,i){if(!(i.from===this.uid||fr.node||!a.getDom())){var s=nG(i,a);this._ticket="";var o=i.dataByCoordSys,l=cMe(i,n,a);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:i.position,positionDefault:"bottom"},s)}else if(i.tooltip&&i.x!=null&&i.y!=null){var u=aMe;u.x=i.x,u.y=i.y,u.update(),Qt(u).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:u},s)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:o,tooltipOption:i.tooltipOption},s);else if(i.seriesIndex!=null){if(this._manuallyAxisShowTip(t,n,a,i))return;var h=hie(i,n),d=h.point[0],A=h.point[1];d!=null&&A!=null&&this._tryShow({offsetX:d,offsetY:A,target:h.el,position:i.position,positionDefault:"bottom"},s)}else i.x!=null&&i.y!=null&&(a.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:a.getZr().findHover(i.x,i.y).target},s))}},e.prototype.manuallyHideTip=function(t,n,a,i){var s=this._tooltipContent;this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(nG(i,a))},e.prototype._manuallyAxisShowTip=function(t,n,a,i){var s=i.seriesIndex,o=i.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||o==null||l==null)){var c=n.getSeriesByIndex(s);if(c){var u=c.getData(),h=px([u.getItemModel(o),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return a.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:o,position:i.position}),!0}}},e.prototype._tryShow=function(t,n){var a=t.target,i=this._tooltipModel;if(i){this._lastX=t.offsetX,this._lastY=t.offsetY;var s=t.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,t);else if(a){var o=Qt(a);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,c;Dg(a,function(u){if(Qt(u).dataIndex!=null)return l=u,!0;if(Qt(u).tooltipConfig!=null)return c=u,!0},!0),l?this._showSeriesItemTooltip(t,l,n):c?this._showComponentItemTooltip(t,c,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},e.prototype._showOrMove=function(t,n){var a=t.get("showDelay");n=ft(n,this),clearTimeout(this._showTimout),a>0?this._showTimout=setTimeout(n,a):n()},e.prototype._showAxisTooltip=function(t,n){var a=this._ecModel,i=this._tooltipModel,s=[n.offsetX,n.offsetY],o=px([n.tooltipOption],i),l=this._renderMode,c=[],u=ti("section",{blocks:[],noHeader:!0}),h=[],d=new PE;X(t,function(y){X(y.dataByAxis,function(x){var b=a.getComponent(x.axisDim+"Axis",x.axisIndex),S=x.value;if(!(!b||S==null)){var _=oie(S,b.axis,a,x.seriesDataIndices,x.valueLabelOpt),C=ti("section",{header:_,noHeader:!Kl(_),sortBlocks:!0,blocks:[]});u.blocks.push(C),X(x.seriesDataIndices,function(w){var B=a.getSeriesByIndex(w.seriesIndex),D=w.dataIndexInside,T=B.getDataParams(D);if(!(T.dataIndex<0)){T.axisDim=x.axisDim,T.axisIndex=x.axisIndex,T.axisType=x.axisType,T.axisId=x.axisId,T.axisValue=BF(b.axis,{value:S}),T.axisValueLabel=_,T.marker=d.makeTooltipMarker("item",bp(T.color),l);var E=zH(B.formatTooltip(D,!0,null)),R=E.frag;if(R){var M=px([B],i).get("valueFormatter");C.blocks.push(M?He({valueFormatter:M},R):R)}E.text&&h.push(E.text),c.push(T)}})}})}),u.blocks.reverse(),h.reverse();var A=n.position,g=o.get("order"),p=qH(u,d,l,g,a.get("useUTC"),o.get("textStyle"));p&&h.unshift(p);var v=l==="richText"?`

`:"<br/>",m=h.join(v);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,c)?this._updatePosition(o,A,s[0],s[1],this._tooltipContent,c):this._showTooltipContent(o,m,c,Math.random()+"",s[0],s[1],A,null,d)})},e.prototype._showSeriesItemTooltip=function(t,n,a){var i=this._ecModel,s=Qt(n),o=s.seriesIndex,l=i.getSeriesByIndex(o),c=s.dataModel||l,u=s.dataIndex,h=s.dataType,d=c.getData(h),A=this._renderMode,g=t.positionDefault,p=px([d.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,g?{position:g}:null),v=p.get("trigger");if(!(v!=null&&v!=="item")){var m=c.getDataParams(u,h),y=new PE;m.marker=y.makeTooltipMarker("item",bp(m.color),A);var x=zH(c.formatTooltip(u,!1,h)),b=p.get("order"),S=p.get("valueFormatter"),_=x.frag,C=_?qH(S?He({valueFormatter:S},_):_,y,A,b,i.get("useUTC"),p.get("textStyle")):x.text,w="item_"+c.name+"_"+u;this._showOrMove(p,function(){this._showTooltipContent(p,C,m,w,t.offsetX,t.offsetY,t.position,t.target,y)}),a({type:"showTip",dataIndexInside:u,dataIndex:d.getRawIndex(u),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,n,a){var i=this._renderMode==="html",s=Qt(n),o=s.tooltipConfig,l=o.option||{},c=l.encodeHTMLContent;if(dt(l)){var u=l;l={content:u,formatter:u},c=!0}c&&i&&l.content&&(l=Ft(l),l.content=cs(l.content));var h=[l],d=this._ecModel.getComponent(s.componentMainType,s.componentIndex);d&&h.push(d),h.push({formatter:l.content});var A=t.positionDefault,g=px(h,this._tooltipModel,A?{position:A}:null),p=g.get("content"),v=Math.random()+"",m=new PE;this._showOrMove(g,function(){var y=Ft(g.get("formatterParams")||{});this._showTooltipContent(g,p,y,v,t.offsetX,t.offsetY,t.position,n,m)}),a({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,n,a,i,s,o,l,c,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var d=t.get("formatter");l=l||t.get("position");var A=n,g=this._getNearestPoint([s,o],a,t.get("trigger"),t.get("borderColor")),p=g.color;if(d)if(dt(d)){var v=t.ecModel.get("useUTC"),m=$e(a)?a[0]:a,y=m&&m.axisType&&m.axisType.indexOf("time")>=0;A=d,y&&(A=FN(m.axisValue,A,v)),A=ite(A,a,!0)}else if(It(d)){var x=ft(function(b,S){b===this._ticket&&(h.setContent(S,u,t,p,l),this._updatePosition(t,l,s,o,h,a,c))},this);this._ticket=i,A=d(a,i,x)}else A=d;h.setContent(A,u,t,p,l),h.show(t,p),this._updatePosition(t,l,s,o,h,a,c)}},e.prototype._getNearestPoint=function(t,n,a,i){if(a==="axis"||$e(n))return{color:i||(this._renderMode==="html"?"#fff":"none")};if(!$e(n))return{color:i||n.color||n.borderColor}},e.prototype._updatePosition=function(t,n,a,i,s,o,l){var c=this._api.getWidth(),u=this._api.getHeight();n=n||t.get("position");var h=s.getSize(),d=t.get("align"),A=t.get("verticalAlign"),g=l&&l.getBoundingRect().clone();if(l&&g.applyTransform(l.transform),It(n)&&(n=n([a,i],o,s.el,g,{viewSize:[c,u],contentSize:h.slice()})),$e(n))a=ot(n[0],c),i=ot(n[1],u);else if(Pt(n)){var p=n;p.width=h[0],p.height=h[1];var v=Ua(p,{width:c,height:u});a=v.x,i=v.y,d=null,A=null}else if(dt(n)&&l){var m=lMe(n,g,h,t.get("borderWidth"));a=m[0],i=m[1]}else{var m=sMe(a,i,s,c,u,d?null:20,A?null:20);a=m[0],i=m[1]}if(d&&(a-=aG(d)?h[0]/2:d==="right"?h[0]:0),A&&(i-=aG(A)?h[1]/2:A==="bottom"?h[1]:0),Sie(t)){var m=oMe(a,i,s,c,u);a=m[0],i=m[1]}s.moveTo(a,i)},e.prototype._updateContentNotChangedOnAxis=function(t,n){var a=this._lastDataByCoordSys,i=this._cbParamsList,s=!!a&&a.length===t.length;return s&&X(a,function(o,l){var c=o.dataByAxis||[],u=t[l]||{},h=u.dataByAxis||[];s=s&&c.length===h.length,s&&X(c,function(d,A){var g=h[A]||{},p=d.seriesDataIndices||[],v=g.seriesDataIndices||[];s=s&&d.value===g.value&&d.axisType===g.axisType&&d.axisId===g.axisId&&p.length===v.length,s&&X(p,function(m,y){var x=v[y];s=s&&m.seriesIndex===x.seriesIndex&&m.dataIndex===x.dataIndex}),i&&X(d.seriesDataIndices,function(m){var y=m.seriesIndex,x=n[y],b=i[y];x&&b&&b.data!==x.data&&(s=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=n,!!s},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,n){fr.node||!n.getDom()||(Ib(this,"_updatePosition"),this._tooltipContent.dispose(),qR("itemTooltip",n))},e.type="tooltip",e}(Gn);function px(r,e,t){var n=e.ecModel,a;t?(a=new Qr(t,n,n),a=new Qr(e.option,a,n)):a=e;for(var i=r.length-1;i>=0;i--){var s=r[i];s&&(s instanceof Qr&&(s=s.get("tooltip",!0)),dt(s)&&(s={formatter:s}),s&&(a=new Qr(s,a,n)))}return a}function nG(r,e){return r.dispatchAction||ft(e.dispatchAction,e)}function sMe(r,e,t,n,a,i,s){var o=t.getSize(),l=o[0],c=o[1];return i!=null&&(r+l+i+2>n?r-=l+i:r+=i),s!=null&&(e+c+s>a?e-=c+s:e+=s),[r,e]}function oMe(r,e,t,n,a){var i=t.getSize(),s=i[0],o=i[1];return r=Math.min(r+s,n)-s,e=Math.min(e+o,a)-o,r=Math.max(r,0),e=Math.max(e,0),[r,e]}function lMe(r,e,t,n){var a=t[0],i=t[1],s=Math.ceil(Math.SQRT2*n)+8,o=0,l=0,c=e.width,u=e.height;switch(r){case"inside":o=e.x+c/2-a/2,l=e.y+u/2-i/2;break;case"top":o=e.x+c/2-a/2,l=e.y-i-s;break;case"bottom":o=e.x+c/2-a/2,l=e.y+u+s;break;case"left":o=e.x-a-s,l=e.y+u/2-i/2;break;case"right":o=e.x+c+s,l=e.y+u/2-i/2}return[o,l]}function aG(r){return r==="center"||r==="middle"}function cMe(r,e,t){var n=Hk(r).queryOptionMap,a=n.keys()[0];if(!(!a||a==="series")){var i=Cw(e,a,n.get(a),{useDefault:!1,enableAll:!1,enableNone:!1}),s=i.models[0];if(s){var o=t.getViewOfComponentModel(s),l;if(o.group.traverse(function(c){var u=Qt(c).tooltipConfig;if(u&&u.name===r.name)return l=c,!0}),l)return{componentMainType:a,componentIndex:s.componentIndex,el:l}}}}function uMe(r){sr(Gw),r.registerComponentModel($De),r.registerComponentView(iMe),r.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Aa),r.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Aa)}var hMe=["rect","polygon","keep","clear"];function dMe(r,e){var t=Xr(r?r.brush:[]);if(t.length){var n=[];X(t,function(l){var c=l.hasOwnProperty("toolbox")?l.toolbox:[];c instanceof Array&&(n=n.concat(c))});var a=r&&r.toolbox;$e(a)&&(a=a[0]),a||(a={feature:{}},r.toolbox=[a]);var i=a.feature||(a.feature={}),s=i.brush||(i.brush={}),o=s.type||(s.type=[]);o.push.apply(o,n),AMe(o),e&&!o.length&&o.push.apply(o,hMe)}}function AMe(r){var e={};X(r,function(t){e[t]=1}),r.length=0,X(e,function(t,n){r.push(n)})}var iG=X;function sG(r){if(r){for(var e in r)if(r.hasOwnProperty(e))return!0}}function tL(r,e,t){var n={};return iG(e,function(i){var s=n[i]=a();iG(r[i],function(o,l){if(Za.isValidType(l)){var c={type:l,visual:o};t&&t(c,i),s[l]=new Za(c),l==="opacity"&&(c=Ft(c),c.type="colorAlpha",s.__hidden.__alphaForOpacity=new Za(c))}})}),n;function a(){var i=function(){};i.prototype.__hidden=i.prototype;var s=new i;return s}}function Nie(r,e,t){var n;X(t,function(a){e.hasOwnProperty(a)&&sG(e[a])&&(n=!0)}),n&&X(t,function(a){e.hasOwnProperty(a)&&sG(e[a])?r[a]=Ft(e[a]):delete r[a]})}function fMe(r,e,t,n,a,i){var s={};X(r,function(h){var d=Za.prepareVisualTypes(e[h]);s[h]=d});var o;function l(h){return pF(t,o,h)}function c(h,d){Wte(t,o,h,d)}t.each(u);function u(h,d){o=h;var A=t.getRawDataItem(o);if(!(A&&A.visualMap===!1))for(var g=n.call(a,h),p=e[g],v=s[g],m=0,y=v.length;m<y;m++){var x=v[m];p[x]&&p[x].applyVisual(h,l,c)}}}function gMe(r,e,t,n){var a={};return X(r,function(i){var s=Za.prepareVisualTypes(e[i]);a[i]=s}),{progress:function(s,o){var l;n!=null&&(l=o.getDimensionIndex(n));function c(S){return pF(o,h,S)}function u(S,_){Wte(o,h,S,_)}for(var h,d=o.getStore();(h=s.next())!=null;){var A=o.getRawDataItem(h);if(!(A&&A.visualMap===!1))for(var g=n!=null?d.get(l,h):h,p=t(g),v=e[p],m=a[p],y=0,x=m.length;y<x;y++){var b=m[y];v[b]&&v[b].applyVisual(g,c,u)}}}}}function pMe(r){var e=r.brushType,t={point:function(n){return oG[e].point(n,t,r)},rect:function(n){return oG[e].rect(n,t,r)}};return t}var oG={lineX:lG(0),lineY:lG(1),rect:{point:function(r,e,t){return r&&t.boundingRect.contain(r[0],r[1])},rect:function(r,e,t){return r&&t.boundingRect.intersect(r)}},polygon:{point:function(r,e,t){return r&&t.boundingRect.contain(r[0],r[1])&&fg(t.range,r[0],r[1])},rect:function(r,e,t){var n=t.range;if(!r||n.length<=1)return!1;var a=r.x,i=r.y,s=r.width,o=r.height,l=n[0];if(fg(n,a,i)||fg(n,a+s,i)||fg(n,a,i+o)||fg(n,a+s,i+o)||Zt.create(r).contain(l[0],l[1])||$x(a,i,a+s,i,n)||$x(a,i,a,i+o,n)||$x(a+s,i,a+s,i+o,n)||$x(a,i+o,a+s,i+o,n))return!0}}};function lG(r){var e=["x","y"],t=["width","height"];return{point:function(n,a,i){if(n){var s=i.range,o=n[r];return mx(o,s)}},rect:function(n,a,i){if(n){var s=i.range,o=[n[e[r]],n[e[r]]+n[t[r]]];return o[1]<o[0]&&o.reverse(),mx(o[0],s)||mx(o[1],s)||mx(s[0],o)||mx(s[1],o)}}}}function mx(r,e){return e[0]<=r&&r<=e[1]}var cG=["inBrush","outOfBrush"],X4="__ecBrushSelect",rL="__ecInBrushSelectEvent";function Tie(r){r.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new Cj(e.option,r);t.setInputRanges(e.areas,r)})}function mMe(r,e,t){var n=[],a,i;r.eachComponent({mainType:"brush"},function(s){t&&t.type==="takeGlobalCursor"&&s.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),Tie(r),r.eachComponent({mainType:"brush"},function(s,o){var l={brushId:s.id,brushIndex:o,brushName:s.name,areas:Ft(s.areas),selected:[]};n.push(l);var c=s.option,u=c.brushLink,h=[],d=[],A=[],g=!1;o||(a=c.throttleType,i=c.throttleDelay);var p=We(s.areas,function(S){var _=bMe[S.brushType],C=Lt({boundingRect:_?_(S):void 0},S);return C.selectors=pMe(C),C}),v=tL(s.option,cG,function(S){S.mappingMethod="fixed"});$e(u)&&X(u,function(S){h[S]=1});function m(S){return u==="all"||!!h[S]}function y(S){return!!S.length}r.eachSeries(function(S,_){var C=A[_]=[];S.subType==="parallel"?x(S,_):b(S,_,C)});function x(S,_){var C=S.coordinateSystem;g=g||C.hasAxisBrushed(),m(_)&&C.eachActiveState(S.getData(),function(w,B){w==="active"&&(d[B]=1)})}function b(S,_,C){if(!(!S.brushSelector||xMe(s,_))&&(X(p,function(B){s.brushTargetManager.controlSeries(B,S,r)&&C.push(B),g=g||y(C)}),m(_)&&y(C))){var w=S.getData();w.each(function(B){uG(S,C,w,B)&&(d[B]=1)})}}r.eachSeries(function(S,_){var C={seriesId:S.id,seriesIndex:_,seriesName:S.name,dataIndex:[]};l.selected.push(C);var w=A[_],B=S.getData(),D=m(_)?function(T){return d[T]?(C.dataIndex.push(B.getRawIndex(T)),"inBrush"):"outOfBrush"}:function(T){return uG(S,w,B,T)?(C.dataIndex.push(B.getRawIndex(T)),"inBrush"):"outOfBrush"};(m(_)?g:y(w))&&fMe(cG,v,B,D)})}),vMe(e,a,i,n,t)}function vMe(r,e,t,n,a){if(a){var i=r.getZr();if(!i[rL]){i[X4]||(i[X4]=yMe);var s=uy(i,X4,t,e);s(r,n)}}}function yMe(r,e){if(!r.isDisposed()){var t=r.getZr();t[rL]=!0,r.dispatchAction({type:"brushSelect",batch:e}),t[rL]=!1}}function uG(r,e,t,n){for(var a=0,i=e.length;a<i;a++){var s=e[a];if(r.brushSelector(n,t,s.selectors,s))return!0}}function xMe(r,e){var t=r.option.seriesIndex;return t!=null&&t!=="all"&&($e(t)?rr(t,e)<0:e!==t)}var bMe={rect:function(r){return hG(r.range)},polygon:function(r){for(var e,t=r.range,n=0,a=t.length;n<a;n++){e=e||[[1/0,-1/0],[1/0,-1/0]];var i=t[n];i[0]<e[0][0]&&(e[0][0]=i[0]),i[0]>e[0][1]&&(e[0][1]=i[0]),i[1]<e[1][0]&&(e[1][0]=i[1]),i[1]>e[1][1]&&(e[1][1]=i[1])}return e&&hG(e)}};function hG(r){return new Zt(r[0][0],r[1][0],r[0][1]-r[0][0],r[1][1]-r[1][0])}var wMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){this.ecModel=t,this.api=n,this.model,(this._brushController=new ZF(n.getZr())).on("brush",ft(this._onBrush,this)).mount()},e.prototype.render=function(t,n,a,i){this.model=t,this._updateController(t,n,a,i)},e.prototype.updateTransform=function(t,n,a,i){Tie(n),this._updateController(t,n,a,i)},e.prototype.updateVisual=function(t,n,a,i){this.updateTransform(t,n,a,i)},e.prototype.updateView=function(t,n,a,i){this._updateController(t,n,a,i)},e.prototype._updateController=function(t,n,a,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(a)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var n=this.model.id,a=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:Ft(a),$from:n}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:Ft(a),$from:n})},e.type="brush",e}(Gn),SMe="#ddd",_Me=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,n){var a=this.option;!n&&Nie(a,t,["inBrush","outOfBrush"]);var i=a.inBrush=a.inBrush||{};a.outOfBrush=a.outOfBrush||{color:SMe},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=We(t,function(n){return dG(this.option,n)},this))},e.prototype.setBrushOption=function(t){this.brushOption=dG(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(gr);function dG(r,e){return qt({brushType:r.brushType,brushMode:r.brushMode,transformable:r.transformable,brushStyle:new Qr(r.brushStyle).getItemStyle(),removeOnClick:r.removeOnClick,z:r.z},e,!0)}var CMe=["rect","polygon","lineX","lineY","keep","clear"],BMe=function(r){Pe(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.render=function(t,n,a){var i,s,o;n.eachComponent({mainType:"brush"},function(l){i=l.brushType,s=l.brushOption.brushMode||"single",o=o||!!l.areas.length}),this._brushType=i,this._brushMode=s,X(t.get("type",!0),function(l){t.setIconStatus(l,(l==="keep"?s==="multiple":l==="clear"?o:l===i)?"emphasis":"normal")})},e.prototype.updateView=function(t,n,a){this.render(t,n,a)},e.prototype.getIcons=function(){var t=this.model,n=t.get("icon",!0),a={};return X(t.get("type",!0),function(i){n[i]&&(a[i]=n[i])}),a},e.prototype.onclick=function(t,n,a){var i=this._brushType,s=this._brushMode;a==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:a==="keep"?i:i===a?!1:a,brushMode:a==="keep"?s==="multiple"?"single":"multiple":s}})},e.getDefaultOption=function(t){var n={show:!0,type:CMe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return n},e}(Zo);function NMe(r){r.registerComponentView(wMe),r.registerComponentModel(_Me),r.registerPreprocessor(dMe),r.registerVisual(r.PRIORITY.VISUAL.BRUSH,mMe),r.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(n){n.setAreas(e.areas)})}),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Aa),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Aa),iv("brush",BMe)}var TMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(gr),IMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,n,a){if(this.group.removeAll(),!!t.get("show")){var i=this.group,s=t.getModel("textStyle"),o=t.getModel("subtextStyle"),l=t.get("textAlign"),c=$t(t.get("textBaseline"),t.get("textVerticalAlign")),u=new Cr({style:bn(s,{text:t.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),h=u.getBoundingRect(),d=t.get("subtext"),A=new Cr({style:bn(o,{text:d,fill:o.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),g=t.get("link"),p=t.get("sublink"),v=t.get("triggerEvent",!0);u.silent=!g&&!v,A.silent=!p&&!v,g&&u.on("click",function(){CC(g,"_"+t.get("target"))}),p&&A.on("click",function(){CC(p,"_"+t.get("subtarget"))}),Qt(u).eventData=Qt(A).eventData=v?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(u),d&&i.add(A);var m=i.getBoundingRect(),y=t.getBoxLayoutParams();y.width=m.width,y.height=m.height;var x=Ua(y,{width:a.getWidth(),height:a.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?x.x+=x.width:l==="center"&&(x.x+=x.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?x.y+=x.height:c==="middle"&&(x.y+=x.height/2),c=c||"top"),i.x=x.x,i.y=x.y,i.markRedraw();var b={align:l,verticalAlign:c};u.setStyle(b),A.setStyle(b),m=i.getBoundingRect();var S=x.margin,_=t.getItemStyle(["color","opacity"]);_.fill=t.get("backgroundColor");var C=new br({shape:{x:m.x-S[3],y:m.y-S[0],width:m.width+S[1]+S[3],height:m.height+S[0]+S[2],r:t.get("borderRadius")},style:_,subPixelOptimize:!0,silent:!0});i.add(C)}},e.type="title",e}(Gn);function EMe(r){r.registerComponentModel(TMe),r.registerComponentView(IMe)}var AG=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,n,a){this.mergeDefaultAndTheme(t,a),this._initData()},e.prototype.mergeOption=function(t){r.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var n=this._data.count();this.option.loop?t=(t%n+n)%n:(t>=n&&(t=n-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,n=t.data||[],a=t.axisType,i=this._names=[],s;a==="category"?(s=[],X(n,function(c,u){var h=Fa(ty(c),""),d;Pt(c)?(d=Ft(c),d.value=u):d=u,s.push(d),i.push(h)})):s=n;var o={category:"ordinal",time:"time",value:"number"}[a]||"number",l=this._data=new As([{name:"value",type:o}],this);l.initData(s,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(gr),Iie=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=af(AG.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(AG);Ia(Iie,GN.prototype);var DMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e}(Gn),MMe=function(r){Pe(e,r);function e(t,n,a,i){var s=r.call(this,t,n,a)||this;return s.type=i||"value",s}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e}(lc),Z4=Math.PI,fG=wr(),RMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,n){this.api=n},e.prototype.render=function(t,n,a){if(this.model=t,this.api=a,this.ecModel=n,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,a),s=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(i,t);t.formatTooltip=function(c){var u=l.scale.getLabel({value:c});return ti("nameValue",{noName:!0,value:u})},X(["AxisLine","AxisTick","Control","CurrentPointer"],function(c){this["_render"+c](i,s,l,t)},this),this._renderAxisLabel(i,o,l,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,n){var a=t.get(["label","position"]),i=t.get("orient"),s=PMe(t,n),o;a==null||a==="auto"?o=i==="horizontal"?s.y+s.height/2<n.getHeight()/2?"-":"+":s.x+s.width/2<n.getWidth()/2?"+":"-":dt(a)?o={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][a]:o=a;var l={horizontal:"center",vertical:o>=0||o==="+"?"left":"right"},c={horizontal:o>=0||o==="+"?"top":"bottom",vertical:"middle"},u={horizontal:0,vertical:Z4/2},h=i==="vertical"?s.height:s.width,d=t.getModel("controlStyle"),A=d.get("show",!0),g=A?d.get("itemSize"):0,p=A?d.get("itemGap"):0,v=g+p,m=t.get(["label","rotate"])||0;m=m*Z4/180;var y,x,b,S=d.get("position",!0),_=A&&d.get("showPlayBtn",!0),C=A&&d.get("showPrevBtn",!0),w=A&&d.get("showNextBtn",!0),B=0,D=h;S==="left"||S==="bottom"?(_&&(y=[0,0],B+=v),C&&(x=[B,0],B+=v),w&&(b=[D-g,0],D-=v)):(_&&(y=[D-g,0],D-=v),C&&(x=[0,0],B+=v),w&&(b=[D-g,0],D-=v));var T=[B,D];return t.get("inverse")&&T.reverse(),{viewRect:s,mainLength:h,orient:i,rotation:u[i],labelRotation:m,labelPosOpt:o,labelAlign:t.get(["label","align"])||l[i],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[i],playPosition:y,prevBtnPosition:x,nextBtnPosition:b,axisExtent:T,controlSize:g,controlGap:p}},e.prototype._position=function(t,n){var a=this._mainGroup,i=this._labelGroup,s=t.viewRect;if(t.orient==="vertical"){var o=bo(),l=s.x,c=s.y+s.height;au(o,o,[-l,-c]),kp(o,o,-Z4/2),au(o,o,[l,c]),s=s.clone(),s.applyTransform(o)}var u=y(s),h=y(a.getBoundingRect()),d=y(i.getBoundingRect()),A=[a.x,a.y],g=[i.x,i.y];g[0]=A[0]=u[0][0];var p=t.labelPosOpt;if(p==null||dt(p)){var v=p==="+"?0:1;x(A,h,u,1,v),x(g,d,u,1,1-v)}else{var v=p>=0?0:1;x(A,h,u,1,v),g[1]=A[1]+p}a.setPosition(A),i.setPosition(g),a.rotation=i.rotation=t.rotation,m(a),m(i);function m(b){b.originX=u[0][0]-b.x,b.originY=u[1][0]-b.y}function y(b){return[[b.x,b.x+b.width],[b.y,b.y+b.height]]}function x(b,S,_,C,w){b[C]+=_[C][w]-S[C][w]}},e.prototype._createAxis=function(t,n){var a=n.getData(),i=n.get("axisType"),s=LMe(n,i);s.getTicks=function(){return a.mapArray(["value"],function(c){return{value:c}})};var o=a.getDataExtent("value");s.setExtent(o[0],o[1]),s.calcNiceTicks();var l=new MMe("value",s,t.axisExtent,i);return l.model=n,l},e.prototype._createGroup=function(t){var n=this[t]=new Ht;return this.group.add(n),n},e.prototype._renderAxisLine=function(t,n,a,i){var s=a.getExtent();if(i.get(["lineStyle","show"])){var o=new Ya({shape:{x1:s[0],y1:0,x2:s[1],y2:0},style:He({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(o);var l=this._progressLine=new Ya({shape:{x1:s[0],x2:this._currentPointer?this._currentPointer.x:s[0],y1:0,y2:0},style:Lt({lineCap:"round",lineWidth:o.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(l)}},e.prototype._renderAxisTick=function(t,n,a,i){var s=this,o=i.getData(),l=a.scale.getTicks();this._tickSymbols=[],X(l,function(c){var u=a.dataToCoord(c.value),h=o.getItemModel(c.value),d=h.getModel("itemStyle"),A=h.getModel(["emphasis","itemStyle"]),g=h.getModel(["progress","itemStyle"]),p={x:u,y:0,onclick:ft(s._changeTimeline,s,c.value)},v=gG(h,d,n,p);v.ensureState("emphasis").style=A.getItemStyle(),v.ensureState("progress").style=g.getItemStyle(),ep(v);var m=Qt(v);h.get("tooltip")?(m.dataIndex=c.value,m.dataModel=i):m.dataIndex=m.dataModel=null,s._tickSymbols.push(v)})},e.prototype._renderAxisLabel=function(t,n,a,i){var s=this,o=a.getLabelModel();if(o.get("show")){var l=i.getData(),c=a.getViewLabels();this._tickLabels=[],X(c,function(u){var h=u.tickValue,d=l.getItemModel(h),A=d.getModel("label"),g=d.getModel(["emphasis","label"]),p=d.getModel(["progress","label"]),v=a.dataToCoord(u.tickValue),m=new Cr({x:v,y:0,rotation:t.labelRotation-t.rotation,onclick:ft(s._changeTimeline,s,h),silent:!1,style:bn(A,{text:u.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});m.ensureState("emphasis").style=bn(g),m.ensureState("progress").style=bn(p),n.add(m),ep(m),fG(m).dataIndex=h,s._tickLabels.push(m)})}},e.prototype._renderControl=function(t,n,a,i){var s=t.controlSize,o=t.rotation,l=i.getModel("controlStyle").getItemStyle(),c=i.getModel(["emphasis","controlStyle"]).getItemStyle(),u=i.getPlayState(),h=i.get("inverse",!0);d(t.nextBtnPosition,"next",ft(this._changeTimeline,this,h?"-":"+")),d(t.prevBtnPosition,"prev",ft(this._changeTimeline,this,h?"+":"-")),d(t.playPosition,u?"stop":"play",ft(this._handlePlayClick,this,!u),!0);function d(A,g,p,v){if(A){var m=rc($t(i.get(["controlStyle",g+"BtnSize"]),s),s),y=[0,-m/2,m,m],x=kMe(i,g+"Icon",y,{x:A[0],y:A[1],originX:s/2,originY:0,rotation:v?-o:0,rectHover:!0,style:l,onclick:p});x.ensureState("emphasis").style=c,n.add(x),ep(x)}}},e.prototype._renderCurrentPointer=function(t,n,a,i){var s=i.getData(),o=i.getCurrentIndex(),l=s.getItemModel(o).getModel("checkpointStyle"),c=this,u={onCreate:function(h){h.draggable=!0,h.drift=ft(c._handlePointerDrag,c),h.ondragend=ft(c._handlePointerDragend,c),pG(h,c._progressLine,o,a,i,!0)},onUpdate:function(h){pG(h,c._progressLine,o,a,i)}};this._currentPointer=gG(l,l,this._mainGroup,{},this._currentPointer,u)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,n,a){this._clearTimer(),this._pointerChangeTimeline([a.offsetX,a.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,n){var a=this._toAxisCoord(t)[0],i=this._axis,s=ll(i.getExtent().slice());a>s[1]&&(a=s[1]),a<s[0]&&(a=s[0]),this._currentPointer.x=a,this._currentPointer.markRedraw();var o=this._progressLine;o&&(o.shape.x2=a,o.dirty());var l=this._findNearestTick(a),c=this.model;(n||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=t.model;t._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var n=this._mainGroup.getLocalTransform();return ec(t,n,!0)},e.prototype._findNearestTick=function(t){var n=this.model.getData(),a=1/0,i,s=this._axis;return n.each(["value"],function(o,l){var c=s.dataToCoord(o),u=Math.abs(c-t);u<a&&(a=u,i=l)}),i},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var n=this.model.getCurrentIndex();t==="+"?t=n+1:t==="-"&&(t=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),n=this._tickSymbols,a=this._tickLabels;if(n)for(var i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",i<t);if(a)for(var i=0;i<a.length;i++)a&&a[i]&&a[i].toggleState("progress",fG(a[i]).dataIndex<=t)},e.type="timeline.slider",e}(DMe);function LMe(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new YN({ordinalMeta:r.getCategories(),extent:[1/0,-1/0]});case"time":return new _F({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new Th}}function PMe(r,e){return Ua(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},r.get("padding"))}function kMe(r,e,t,n){var a=n.style,i=Dw(r.get(["controlStyle",e]),n||{},new Zt(t[0],t[1],t[2],t[3]));return a&&i.setStyle(a),i}function gG(r,e,t,n,a,i){var s=e.get("color");if(a)a.setColor(s),t.add(a),i&&i.onUpdate(a);else{var o=r.get("symbol");a=Ta(o,-1,-1,2,2,s),a.setStyle("strokeNoScale",!0),t.add(a),i&&i.onCreate(a)}var l=e.getItemStyle(["color"]);a.setStyle(l),n=qt({rectHover:!0,z2:100},n,!0);var c=hy(r.get("symbolSize"));n.scaleX=c[0]/2,n.scaleY=c[1]/2;var u=Op(r.get("symbolOffset"),c);u&&(n.x=(n.x||0)+u[0],n.y=(n.y||0)+u[1]);var h=r.get("symbolRotate");return n.rotation=(h||0)*Math.PI/180||0,a.attr(n),a.updateTransform(),a}function pG(r,e,t,n,a,i){if(!r.dragging){var s=a.getModel("checkpointStyle"),o=n.dataToCoord(a.getData().get("value",t));if(i||!s.get("animation",!0))r.attr({x:o,y:0}),e&&e.attr({shape:{x2:o}});else{var l={duration:s.get("animationDuration",!0),easing:s.get("animationEasing",!0)};r.stopAnimation(null,!0),r.animateTo({x:o,y:0},l),e&&e.animateTo({shape:{x2:o}},l)}}}function FMe(r){r.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,n){var a=t.getComponent("timeline");return a&&e.currentIndex!=null&&(a.setCurrentIndex(e.currentIndex),!a.get("loop",!0)&&a.isIndexMax()&&a.getPlayState()&&(a.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:a.get("replaceMerge",!0)}),Lt({currentIndex:a.option.currentIndex},e)}),r.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&e.playState!=null&&n.setPlayState(e.playState)})}function jMe(r){var e=r&&r.timeline;$e(e)||(e=e?[e]:[]),X(e,function(t){t&&OMe(t)})}function OMe(r){var e=r.type,t={number:"value",time:"time"};if(t[e]&&(r.axisType=t[e],delete r.type),mG(r),mg(r,"controlPosition")){var n=r.controlStyle||(r.controlStyle={});mg(n,"position")||(n.position=r.controlPosition),n.position==="none"&&!mg(n,"show")&&(n.show=!1,delete n.position),delete r.controlPosition}X(r.data||[],function(a){Pt(a)&&!$e(a)&&(!mg(a,"value")&&mg(a,"name")&&(a.value=a.name),mG(a))})}function mG(r){var e=r.itemStyle||(r.itemStyle={}),t=e.emphasis||(e.emphasis={}),n=r.label||r.label||{},a=n.normal||(n.normal={}),i={normal:1,emphasis:1};X(n,function(s,o){!i[o]&&!mg(a,o)&&(a[o]=s)}),t.label&&!mg(n,"emphasis")&&(n.emphasis=t.label,delete t.label)}function mg(r,e){return r.hasOwnProperty(e)}function UMe(r){r.registerComponentModel(Iie),r.registerComponentView(RMe),r.registerSubTypeDefaulter("timeline",function(){return"slider"}),FMe(r),r.registerPreprocessor(jMe)}function Tj(r,e){if(!r)return!1;for(var t=$e(r)?r:[r],n=0;n<t.length;n++)if(t[n]&&t[n][e])return!0;return!1}function GS(r){mp(r,"label",["show"])}var VS=wr(),Eh=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t}return e.prototype.init=function(t,n,a){this.mergeDefaultAndTheme(t,a),this._mergeOption(t,a,!1,!0)},e.prototype.isAnimationEnabled=function(){if(fr.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,n){this._mergeOption(t,n,!1,!1)},e.prototype._mergeOption=function(t,n,a,i){var s=this.mainType;a||n.eachSeries(function(o){var l=o.get(this.mainType,!0),c=VS(o)[s];if(!l||!l.data){VS(o)[s]=null;return}c?c._mergeOption(l,n,!0):(i&&GS(l),X(l.data,function(u){u instanceof Array?(GS(u[0]),GS(u[1])):GS(u)}),c=this.createMarkerModelFromSeries(l,this,n),He(c,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),c.__hostSeries=o),VS(o)[s]=c},this)},e.prototype.formatTooltip=function(t,n,a){var i=this.getData(),s=this.getRawValue(t),o=i.getName(t);return ti("section",{header:this.name,blocks:[ti("nameValue",{name:o,value:s,noName:!o,noValue:s==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,n){var a=GN.prototype.getDataParams.call(this,t,n),i=this.__hostSeries;return i&&(a.seriesId=i.id,a.seriesName=i.name,a.seriesType=i.subType),a},e.getMarkerModelFromSeries=function(t,n){return VS(t)[n]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(gr);Ia(Eh,GN.prototype);var HMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,n,a){return new e(t,n,a)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(Eh);function nL(r){return!(isNaN(parseFloat(r.x))&&isNaN(parseFloat(r.y)))}function QMe(r){return!isNaN(parseFloat(r.x))&&!isNaN(parseFloat(r.y))}function $S(r,e,t,n,a,i){var s=[],o=GA(e,n),l=o?e.getCalculationInfo("stackResultDimension"):n,c=Ij(e,l,r),u=e.indicesOfNearest(l,c)[0];s[a]=e.get(t,u),s[i]=e.get(l,u);var h=e.get(n,u),d=Qc(e.get(n,u));return d=Math.min(d,20),d>=0&&(s[i]=+s[i].toFixed(d)),[s,h]}var J4={min:Wt($S,"min"),max:Wt($S,"max"),average:Wt($S,"average"),median:Wt($S,"median")};function zb(r,e){if(e){var t=r.getData(),n=r.coordinateSystem,a=n&&n.dimensions;if(!QMe(e)&&!$e(e.coord)&&$e(a)){var i=Eie(e,t,n,r);if(e=Ft(e),e.type&&J4[e.type]&&i.baseAxis&&i.valueAxis){var s=rr(a,i.baseAxis.dim),o=rr(a,i.valueAxis.dim),l=J4[e.type](t,i.baseDataDim,i.valueDataDim,s,o);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!$e(a))e.coord=[];else for(var c=e.coord,u=0;u<2;u++)J4[c[u]]&&(c[u]=Ij(t,t.mapDimension(a[u]),c[u]));return e}}function Eie(r,e,t,n){var a={};return r.valueIndex!=null||r.valueDim!=null?(a.valueDataDim=r.valueIndex!=null?e.getDimension(r.valueIndex):r.valueDim,a.valueAxis=t.getAxis(zMe(n,a.valueDataDim)),a.baseAxis=t.getOtherAxis(a.valueAxis),a.baseDataDim=e.mapDimension(a.baseAxis.dim)):(a.baseAxis=n.getBaseAxis(),a.valueAxis=t.getOtherAxis(a.baseAxis),a.baseDataDim=e.mapDimension(a.baseAxis.dim),a.valueDataDim=e.mapDimension(a.valueAxis.dim)),a}function zMe(r,e){var t=r.getData().getDimensionInfo(e);return t&&t.coordDim}function Gb(r,e){return r&&r.containData&&e.coord&&!nL(e)?r.containData(e.coord):!0}function GMe(r,e,t){return r&&r.containZone&&e.coord&&t.coord&&!nL(e)&&!nL(t)?r.containZone(e.coord,t.coord):!0}function Die(r,e){return r?function(t,n,a,i){var s=i<2?t.coord&&t.coord[i]:t.value;return IA(s,e[i])}:function(t,n,a,i){return IA(t.value,e[i])}}function Ij(r,e,t){if(t==="average"){var n=0,a=0;return r.each(e,function(i,s){isNaN(i)||(n+=i,a++)}),n/a}else return t==="median"?r.getMedian(e):r.getDataExtent(e)[t==="max"?1:0]}var eD=wr(),Ej=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=bt()},e.prototype.render=function(t,n,a){var i=this,s=this.markerGroupMap;s.each(function(o){eD(o).keep=!1}),n.eachSeries(function(o){var l=Eh.getMarkerModelFromSeries(o,i.type);l&&i.renderSeries(o,l,n,a)}),s.each(function(o){!eD(o).keep&&i.group.remove(o.group)})},e.prototype.markKeep=function(t){eD(t).keep=!0},e.prototype.toggleBlurSeries=function(t,n){var a=this;X(t,function(i){var s=Eh.getMarkerModelFromSeries(i,a.type);if(s){var o=s.getData();o.eachItemGraphicEl(function(l){l&&(n?wee(l):Wk(l))})}})},e.type="marker",e}(Gn);function vG(r,e,t){var n=e.coordinateSystem;r.each(function(a){var i=r.getItemModel(a),s,o=ot(i.get("x"),t.getWidth()),l=ot(i.get("y"),t.getHeight());if(!isNaN(o)&&!isNaN(l))s=[o,l];else if(e.getMarkerPosition)s=e.getMarkerPosition(r.getValues(r.dimensions,a));else if(n){var c=r.get(n.dimensions[0],a),u=r.get(n.dimensions[1],a);s=n.dataToPoint([c,u])}isNaN(o)||(s[0]=o),isNaN(l)||(s[1]=l),r.setItemLayout(a,s)})}var VMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,n,a){n.eachSeries(function(i){var s=Eh.getMarkerModelFromSeries(i,"markPoint");s&&(vG(s.getData(),i,a),this.markerGroupMap.get(i.id).updateLayout())},this)},e.prototype.renderSeries=function(t,n,a,i){var s=t.coordinateSystem,o=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(o)||c.set(o,new Fw),h=$Me(s,t,n);n.setData(h),vG(n.getData(),t,i),h.each(function(d){var A=h.getItemModel(d),g=A.getShallow("symbol"),p=A.getShallow("symbolSize"),v=A.getShallow("symbolRotate"),m=A.getShallow("symbolOffset"),y=A.getShallow("symbolKeepAspect");if(It(g)||It(p)||It(v)||It(m)){var x=n.getRawValue(d),b=n.getDataParams(d);It(g)&&(g=g(x,b)),It(p)&&(p=p(x,b)),It(v)&&(v=v(x,b)),It(m)&&(m=m(x,b))}var S=A.getModel("itemStyle").getItemStyle(),_=Rw(l,"color");S.fill||(S.fill=_),h.setItemVisual(d,{symbol:g,symbolSize:p,symbolRotate:v,symbolOffset:m,symbolKeepAspect:y,style:S})}),u.updateData(h),this.group.add(u.group),h.eachItemGraphicEl(function(d){d.traverse(function(A){Qt(A).dataModel=n})}),this.markKeep(u),u.group.silent=n.get("silent")||t.get("silent")},e.type="markPoint",e}(Ej);function $Me(r,e,t){var n;r?n=We(r&&r.dimensions,function(o){var l=e.getData().getDimensionInfo(e.getData().mapDimension(o))||{};return He(He({},l),{name:o,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var a=new As(n,t),i=We(t.get("data"),Wt(zb,e));r&&(i=Ur(i,Wt(Gb,r)));var s=Die(!!r,n);return a.initData(i,null,s),a}function KMe(r){r.registerComponentModel(HMe),r.registerComponentView(VMe),r.registerPreprocessor(function(e){Tj(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var WMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,n,a){return new e(t,n,a)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Eh),KS=wr(),qMe=function(r,e,t,n){var a=r.getData(),i;if($e(n))i=n;else{var s=n.type;if(s==="min"||s==="max"||s==="average"||s==="median"||n.xAxis!=null||n.yAxis!=null){var o=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)o=e.getAxis(n.yAxis!=null?"y":"x"),l=di(n.yAxis,n.xAxis);else{var c=Eie(n,a,e,r);o=c.valueAxis;var u=Sre(a,c.valueDataDim);l=Ij(a,u,s)}var h=o.dim==="x"?0:1,d=1-h,A=Ft(n),g={coord:[]};A.type=null,A.coord=[],A.coord[d]=-1/0,g.coord[d]=1/0;var p=t.get("precision");p>=0&&Br(l)&&(l=+l.toFixed(Math.min(p,20))),A.coord[h]=g.coord[h]=l,i=[A,g,{type:s,valueIndex:n.valueIndex,value:l}]}else i=[]}var v=[zb(r,i[0]),zb(r,i[1]),He({},i[2])];return v[2].type=v[2].type||null,qt(v[2],v[0]),qt(v[2],v[1]),v};function YC(r){return!isNaN(r)&&!isFinite(r)}function yG(r,e,t,n){var a=1-r,i=n.dimensions[r];return YC(e[a])&&YC(t[a])&&e[r]===t[r]&&n.getAxis(i).containData(e[r])}function YMe(r,e){if(r.type==="cartesian2d"){var t=e[0].coord,n=e[1].coord;if(t&&n&&(yG(1,t,n,r)||yG(0,t,n,r)))return!0}return Gb(r,e[0])&&Gb(r,e[1])}function tD(r,e,t,n,a){var i=n.coordinateSystem,s=r.getItemModel(e),o,l=ot(s.get("x"),a.getWidth()),c=ot(s.get("y"),a.getHeight());if(!isNaN(l)&&!isNaN(c))o=[l,c];else{if(n.getMarkerPosition)o=n.getMarkerPosition(r.getValues(r.dimensions,e));else{var u=i.dimensions,h=r.get(u[0],e),d=r.get(u[1],e);o=i.dataToPoint([h,d])}if(Hp(i,"cartesian2d")){var A=i.getAxis("x"),g=i.getAxis("y"),u=i.dimensions;YC(r.get(u[0],e))?o[0]=A.toGlobalCoord(A.getExtent()[t?0:1]):YC(r.get(u[1],e))&&(o[1]=g.toGlobalCoord(g.getExtent()[t?0:1]))}isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c)}r.setItemLayout(e,o)}var XMe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,n,a){n.eachSeries(function(i){var s=Eh.getMarkerModelFromSeries(i,"markLine");if(s){var o=s.getData(),l=KS(s).from,c=KS(s).to;l.each(function(u){tD(l,u,!0,i,a),tD(c,u,!1,i,a)}),o.each(function(u){o.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,n,a,i){var s=t.coordinateSystem,o=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(o)||c.set(o,new XF);this.group.add(u.group);var h=ZMe(s,t,n),d=h.from,A=h.to,g=h.line;KS(n).from=d,KS(n).to=A,n.setData(g);var p=n.get("symbol"),v=n.get("symbolSize"),m=n.get("symbolRotate"),y=n.get("symbolOffset");$e(p)||(p=[p,p]),$e(v)||(v=[v,v]),$e(m)||(m=[m,m]),$e(y)||(y=[y,y]),h.from.each(function(b){x(d,b,!0),x(A,b,!1)}),g.each(function(b){var S=g.getItemModel(b).getModel("lineStyle").getLineStyle();g.setItemLayout(b,[d.getItemLayout(b),A.getItemLayout(b)]),S.stroke==null&&(S.stroke=d.getItemVisual(b,"style").fill),g.setItemVisual(b,{fromSymbolKeepAspect:d.getItemVisual(b,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(b,"symbolOffset"),fromSymbolRotate:d.getItemVisual(b,"symbolRotate"),fromSymbolSize:d.getItemVisual(b,"symbolSize"),fromSymbol:d.getItemVisual(b,"symbol"),toSymbolKeepAspect:A.getItemVisual(b,"symbolKeepAspect"),toSymbolOffset:A.getItemVisual(b,"symbolOffset"),toSymbolRotate:A.getItemVisual(b,"symbolRotate"),toSymbolSize:A.getItemVisual(b,"symbolSize"),toSymbol:A.getItemVisual(b,"symbol"),style:S})}),u.updateData(g),h.line.eachItemGraphicEl(function(b){Qt(b).dataModel=n,b.traverse(function(S){Qt(S).dataModel=n})});function x(b,S,_){var C=b.getItemModel(S);tD(b,S,_,t,i);var w=C.getModel("itemStyle").getItemStyle();w.fill==null&&(w.fill=Rw(l,"color")),b.setItemVisual(S,{symbolKeepAspect:C.get("symbolKeepAspect"),symbolOffset:$t(C.get("symbolOffset",!0),y[_?0:1]),symbolRotate:$t(C.get("symbolRotate",!0),m[_?0:1]),symbolSize:$t(C.get("symbolSize"),v[_?0:1]),symbol:$t(C.get("symbol",!0),p[_?0:1]),style:w})}this.markKeep(u),u.group.silent=n.get("silent")||t.get("silent")},e.type="markLine",e}(Ej);function ZMe(r,e,t){var n;r?n=We(r&&r.dimensions,function(c){var u=e.getData().getDimensionInfo(e.getData().mapDimension(c))||{};return He(He({},u),{name:c,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var a=new As(n,t),i=new As(n,t),s=new As([],t),o=We(t.get("data"),Wt(qMe,e,r,t));r&&(o=Ur(o,Wt(YMe,r)));var l=Die(!!r,n);return a.initData(We(o,function(c){return c[0]}),null,l),i.initData(We(o,function(c){return c[1]}),null,l),s.initData(We(o,function(c){return c[2]})),s.hasItemOption=!0,{from:a,to:i,line:s}}function JMe(r){r.registerComponentModel(WMe),r.registerComponentView(XMe),r.registerPreprocessor(function(e){Tj(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var e3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,n,a){return new e(t,n,a)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Eh),WS=wr(),t3e=function(r,e,t,n){var a=n[0],i=n[1];if(!(!a||!i)){var s=zb(r,a),o=zb(r,i),l=s.coord,c=o.coord;l[0]=di(l[0],-1/0),l[1]=di(l[1],-1/0),c[0]=di(c[0],1/0),c[1]=di(c[1],1/0);var u=Ek([{},s,o]);return u.coord=[s.coord,o.coord],u.x0=s.x,u.y0=s.y,u.x1=o.x,u.y1=o.y,u}};function XC(r){return!isNaN(r)&&!isFinite(r)}function xG(r,e,t,n){var a=1-r;return XC(e[a])&&XC(t[a])}function r3e(r,e){var t=e.coord[0],n=e.coord[1],a={coord:t,x:e.x0,y:e.y0},i={coord:n,x:e.x1,y:e.y1};return Hp(r,"cartesian2d")?t&&n&&(xG(1,t,n)||xG(0,t,n))?!0:GMe(r,a,i):Gb(r,a)||Gb(r,i)}function bG(r,e,t,n,a){var i=n.coordinateSystem,s=r.getItemModel(e),o,l=ot(s.get(t[0]),a.getWidth()),c=ot(s.get(t[1]),a.getHeight());if(!isNaN(l)&&!isNaN(c))o=[l,c];else{if(n.getMarkerPosition){var u=r.getValues(["x0","y0"],e),h=r.getValues(["x1","y1"],e),d=i.clampData(u),A=i.clampData(h),g=[];t[0]==="x0"?g[0]=d[0]>A[0]?h[0]:u[0]:g[0]=d[0]>A[0]?u[0]:h[0],t[1]==="y0"?g[1]=d[1]>A[1]?h[1]:u[1]:g[1]=d[1]>A[1]?u[1]:h[1],o=n.getMarkerPosition(g,t,!0)}else{var p=r.get(t[0],e),v=r.get(t[1],e),m=[p,v];i.clampData&&i.clampData(m,m),o=i.dataToPoint(m,!0)}if(Hp(i,"cartesian2d")){var y=i.getAxis("x"),x=i.getAxis("y"),p=r.get(t[0],e),v=r.get(t[1],e);XC(p)?o[0]=y.toGlobalCoord(y.getExtent()[t[0]==="x0"?0:1]):XC(v)&&(o[1]=x.toGlobalCoord(x.getExtent()[t[1]==="y0"?0:1]))}isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c)}return o}var wG=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],n3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,n,a){n.eachSeries(function(i){var s=Eh.getMarkerModelFromSeries(i,"markArea");if(s){var o=s.getData();o.each(function(l){var c=We(wG,function(h){return bG(o,l,h,i,a)});o.setItemLayout(l,c);var u=o.getItemGraphicEl(l);u.setShape("points",c)})}},this)},e.prototype.renderSeries=function(t,n,a,i){var s=t.coordinateSystem,o=t.id,l=t.getData(),c=this.markerGroupMap,u=c.get(o)||c.set(o,{group:new Ht});this.group.add(u.group),this.markKeep(u);var h=a3e(s,t,n);n.setData(h),h.each(function(d){var A=We(wG,function(w){return bG(h,d,w,t,i)}),g=s.getAxis("x").scale,p=s.getAxis("y").scale,v=g.getExtent(),m=p.getExtent(),y=[g.parse(h.get("x0",d)),g.parse(h.get("x1",d))],x=[p.parse(h.get("y0",d)),p.parse(h.get("y1",d))];ll(y),ll(x);var b=!(v[0]>y[1]||v[1]<y[0]||m[0]>x[1]||m[1]<x[0]),S=!b;h.setItemLayout(d,{points:A,allClipped:S});var _=h.getItemModel(d).getModel("itemStyle").getItemStyle(),C=Rw(l,"color");_.fill||(_.fill=C,dt(_.fill)&&(_.fill=AC(_.fill,.4))),_.stroke||(_.stroke=C),h.setItemVisual(d,"style",_)}),h.diff(WS(u).data).add(function(d){var A=h.getItemLayout(d);if(!A.allClipped){var g=new vs({shape:{points:A.points}});h.setItemGraphicEl(d,g),u.group.add(g)}}).update(function(d,A){var g=WS(u).data.getItemGraphicEl(A),p=h.getItemLayout(d);p.allClipped?g&&u.group.remove(g):(g?Er(g,{shape:{points:p.points}},n,d):g=new vs({shape:{points:p.points}}),h.setItemGraphicEl(d,g),u.group.add(g))}).remove(function(d){var A=WS(u).data.getItemGraphicEl(d);u.group.remove(A)}).execute(),h.eachItemGraphicEl(function(d,A){var g=h.getItemModel(A),p=h.getItemVisual(A,"style");d.useStyle(h.getItemVisual(A,"style")),Ni(d,ei(g),{labelFetcher:n,labelDataIndex:A,defaultText:h.getName(A)||"",inheritColor:dt(p.fill)?AC(p.fill,1):"#000"}),Bi(d,g),qn(d,null,null,g.get(["emphasis","disabled"])),Qt(d).dataModel=n}),WS(u).data=h,u.group.silent=n.get("silent")||t.get("silent")},e.type="markArea",e}(Ej);function a3e(r,e,t){var n,a,i=["x0","y0","x1","y1"];if(r){var s=We(r&&r.dimensions,function(c){var u=e.getData(),h=u.getDimensionInfo(u.mapDimension(c))||{};return He(He({},h),{name:c,ordinalMeta:null})});a=We(i,function(c,u){return{name:c,type:s[u%2].type}}),n=new As(a,t)}else a=[{name:"value",type:"float"}],n=new As(a,t);var o=We(t.get("data"),Wt(t3e,e,r,t));r&&(o=Ur(o,Wt(r3e,r)));var l=r?function(c,u,h,d){var A=c.coord[Math.floor(d/2)][d%2];return IA(A,a[d])}:function(c,u,h,d){return IA(c.value,a[d])};return n.initData(o,null,l),n.hasItemOption=!0,n}function i3e(r){r.registerComponentModel(e3e),r.registerComponentView(n3e),r.registerPreprocessor(function(e){Tj(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var s3e=function(r,e){if(e==="all")return{type:"all",title:r.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:r.getLocaleModel().get(["legend","selector","inverse"])}},aL=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,n,a){this.mergeDefaultAndTheme(t,a),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,n){r.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},e.prototype._updateSelector=function(t){var n=t.selector,a=this.ecModel;n===!0&&(n=t.selector=["all","inverse"]),$e(n)&&X(n,function(i,s){dt(i)&&(i={type:i}),n[s]=qt(i,s3e(a,i.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var n=!1,a=0;a<t.length;a++){var i=t[a].get("name");if(this.isSelected(i)){this.select(i),n=!0;break}}!n&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var n=[],a=[];t.eachRawSeries(function(l){var c=l.name;a.push(c);var u;if(l.legendVisualProvider){var h=l.legendVisualProvider,d=h.getAllNames();t.isSeriesFiltered(l)||(a=a.concat(d)),d.length?n=n.concat(d):u=!0}else u=!0;u&&Uk(l)&&n.push(l.name)}),this._availableNames=a;var i=this.get("data")||n,s=bt(),o=We(i,function(l){return(dt(l)||Br(l))&&(l={name:l}),s.get(l.name)?null:(s.set(l.name,!0),new Qr(l,this,this.ecModel))},this);this._data=Ur(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var n=this.option.selected,a=this.get("selectedMode");if(a==="single"){var i=this._data;X(i,function(s){n[s.get("name")]=!1})}n[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var n=this.option.selected;n.hasOwnProperty(t)||(n[t]=!0),this[n[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,n=this.option.selected;X(t,function(a){n[a.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,n=this.option.selected;X(t,function(a){var i=a.get("name",!0);n.hasOwnProperty(i)||(n[i]=!0),n[i]=!n[i]})},e.prototype.isSelected=function(t){var n=this.option.selected;return!(n.hasOwnProperty(t)&&!n[t])&&rr(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(gr),jm=Wt,iL=X,qS=Ht,Mie=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new qS),this.group.add(this._selectorGroup=new qS),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,n,a){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var s=t.get("align"),o=t.get("orient");(!s||s==="auto")&&(s=t.get("left")==="right"&&o==="vertical"?"right":"left");var l=t.get("selector",!0),c=t.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=o==="horizontal"?"end":"start"),this.renderInner(s,t,n,a,l,o,c);var u=t.getBoxLayoutParams(),h={width:a.getWidth(),height:a.getHeight()},d=t.get("padding"),A=Ua(u,h,d),g=this.layoutInner(t,s,A,i,l,c),p=Ua(Lt({width:g.width,height:g.height},u),h,d);this.group.x=p.x-g.x,this.group.y=p.y-g.y,this.group.markRedraw(),this.group.add(this._backgroundEl=xie(g,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,n,a,i,s,o,l){var c=this.getContentGroup(),u=bt(),h=n.get("selectedMode"),d=[];a.eachRawSeries(function(A){!A.get("legendHoverLink")&&d.push(A.id)}),iL(n.getData(),function(A,g){var p=A.get("name");if(!this.newlineDisabled&&(p===""||p===`
`)){var v=new qS;v.newline=!0,c.add(v);return}var m=a.getSeriesByName(p)[0];if(!u.get(p))if(m){var y=m.getData(),x=y.getVisual("legendLineStyle")||{},b=y.getVisual("legendIcon"),S=y.getVisual("style"),_=this._createItem(m,p,g,A,n,t,x,S,b,h,i);_.on("click",jm(SG,p,null,i,d)).on("mouseover",jm(sL,m.name,null,i,d)).on("mouseout",jm(oL,m.name,null,i,d)),a.ssr&&_.eachChild(function(C){var w=Qt(C);w.seriesIndex=m.seriesIndex,w.dataIndex=g,w.ssrType="legend"}),u.set(p,!0)}else a.eachRawSeries(function(C){if(!u.get(p)&&C.legendVisualProvider){var w=C.legendVisualProvider;if(!w.containName(p))return;var B=w.indexOfName(p),D=w.getItemVisual(B,"style"),T=w.getItemVisual(B,"legendIcon"),E=wo(D.fill);E&&E[3]===0&&(E[3]=.2,D=He(He({},D),{fill:Ah(E,"rgba")}));var R=this._createItem(C,p,g,A,n,t,{},D,T,h,i);R.on("click",jm(SG,null,p,i,d)).on("mouseover",jm(sL,null,p,i,d)).on("mouseout",jm(oL,null,p,i,d)),a.ssr&&R.eachChild(function(M){var k=Qt(M);k.seriesIndex=C.seriesIndex,k.dataIndex=g,k.ssrType="legend"}),u.set(p,!0)}},this)},this),s&&this._createSelector(s,n,i,o,l)},e.prototype._createSelector=function(t,n,a,i,s){var o=this.getSelectorGroup();iL(t,function(c){var u=c.type,h=new Cr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){a.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect",legendId:n.id})}});o.add(h);var d=n.getModel("selectorLabel"),A=n.getModel(["emphasis","selectorLabel"]);Ni(h,{normal:d,emphasis:A},{defaultText:c.title}),ep(h)})},e.prototype._createItem=function(t,n,a,i,s,o,l,c,u,h,d){var A=t.visualDrawType,g=s.get("itemWidth"),p=s.get("itemHeight"),v=s.isSelected(n),m=i.get("symbolRotate"),y=i.get("symbolKeepAspect"),x=i.get("icon");u=x||u||"roundRect";var b=o3e(u,i,l,c,A,v,d),S=new qS,_=i.getModel("textStyle");if(It(t.getLegendIcon)&&(!x||x==="inherit"))S.add(t.getLegendIcon({itemWidth:g,itemHeight:p,icon:u,iconRotate:m,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:y}));else{var C=x==="inherit"&&t.getData().getVisual("symbol")?m==="inherit"?t.getData().getVisual("symbolRotate"):m:0;S.add(l3e({itemWidth:g,itemHeight:p,icon:u,iconRotate:C,itemStyle:b.itemStyle,symbolKeepAspect:y}))}var w=o==="left"?g+5:-5,B=o,D=s.get("formatter"),T=n;dt(D)&&D?T=D.replace("{name}",n??""):It(D)&&(T=D(n));var E=v?_.getTextColor():i.get("inactiveColor");S.add(new Cr({style:bn(_,{text:T,x:w,y:p/2,fill:E,align:B,verticalAlign:"middle"},{inheritColor:E})}));var R=new br({shape:S.getBoundingRect(),style:{fill:"transparent"}}),M=i.getModel("tooltip");return M.get("show")&&Fp({el:R,componentModel:s,itemName:n,itemTooltipOption:M.option}),S.add(R),S.eachChild(function(k){k.silent=!0}),R.silent=!h,this.getContentGroup().add(S),ep(S),S.__legendDataIndex=a,S},e.prototype.layoutInner=function(t,n,a,i,s,o){var l=this.getContentGroup(),c=this.getSelectorGroup();rp(t.get("orient"),l,t.get("itemGap"),a.width,a.height);var u=l.getBoundingRect(),h=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),s){rp("horizontal",c,t.get("selectorItemGap",!0));var d=c.getBoundingRect(),A=[-d.x,-d.y],g=t.get("selectorButtonGap",!0),p=t.getOrient().index,v=p===0?"width":"height",m=p===0?"height":"width",y=p===0?"y":"x";o==="end"?A[p]+=u[v]+g:h[p]+=d[v]+g,A[1-p]+=u[m]/2-d[m]/2,c.x=A[0],c.y=A[1],l.x=h[0],l.y=h[1];var x={x:0,y:0};return x[v]=u[v]+g+d[v],x[m]=Math.max(u[m],d[m]),x[y]=Math.min(0,d[y]+A[1-p]),x}else return l.x=h[0],l.y=h[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Gn);function o3e(r,e,t,n,a,i,s){function o(v,m){v.lineWidth==="auto"&&(v.lineWidth=m.lineWidth>0?2:0),iL(v,function(y,x){v[x]==="inherit"&&(v[x]=m[x])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=r.lastIndexOf("empty",0)===0?"fill":"stroke",h=l.getShallow("decal");c.decal=!h||h==="inherit"?n.decal:B0(h,s),c.fill==="inherit"&&(c.fill=n[a]),c.stroke==="inherit"&&(c.stroke=n[u]),c.opacity==="inherit"&&(c.opacity=(a==="fill"?n:t).opacity),o(c,n);var d=e.getModel("lineStyle"),A=d.getLineStyle();if(o(A,t),c.fill==="auto"&&(c.fill=n.fill),c.stroke==="auto"&&(c.stroke=n.fill),A.stroke==="auto"&&(A.stroke=n.fill),!i){var g=e.get("inactiveBorderWidth"),p=c[u];c.lineWidth=g==="auto"?n.lineWidth>0&&p?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),A.stroke=d.get("inactiveColor"),A.lineWidth=d.get("inactiveWidth")}return{itemStyle:c,lineStyle:A}}function l3e(r){var e=r.icon||"roundRect",t=Ta(e,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill,r.symbolKeepAspect);return t.setStyle(r.itemStyle),t.rotation=(r.iconRotate||0)*Math.PI/180,t.setOrigin([r.itemWidth/2,r.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function SG(r,e,t,n){oL(r,e,t,n),t.dispatchAction({type:"legendToggleSelect",name:r??e}),sL(r,e,t,n)}function Rie(r){for(var e=r.getZr().storage.getDisplayList(),t,n=0,a=e.length;n<a&&!(t=e[n].states.emphasis);)n++;return t&&t.hoverLayer}function sL(r,e,t,n){Rie(t)||t.dispatchAction({type:"highlight",seriesName:r,name:e,excludeSeriesId:n})}function oL(r,e,t,n){Rie(t)||t.dispatchAction({type:"downplay",seriesName:r,name:e,excludeSeriesId:n})}function c3e(r){var e=r.findComponents({mainType:"legend"});e&&e.length&&r.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}function vx(r,e,t){var n=r==="allSelect"||r==="inverseSelect",a={},i=[];t.eachComponent({mainType:"legend",query:e},function(o){n?o[r]():o[r](e.name),_G(o,a),i.push(o.componentIndex)});var s={};return t.eachComponent("legend",function(o){X(a,function(l,c){o[l?"select":"unSelect"](c)}),_G(o,s)}),n?{selected:s,legendIndex:i}:{name:e.name,selected:s}}function _G(r,e){var t=e||{};return X(r.getData(),function(n){var a=n.get("name");if(!(a===`
`||a==="")){var i=r.isSelected(a);vt(t,a)?t[a]=t[a]&&i:t[a]=i}}),t}function u3e(r){r.registerAction("legendToggleSelect","legendselectchanged",Wt(vx,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",Wt(vx,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",Wt(vx,"inverseSelect")),r.registerAction("legendSelect","legendselected",Wt(vx,"select")),r.registerAction("legendUnSelect","legendunselected",Wt(vx,"unSelect"))}function Lie(r){r.registerComponentModel(aL),r.registerComponentView(Mie),r.registerProcessor(r.PRIORITY.PROCESSOR.SERIES_FILTER,c3e),r.registerSubTypeDefaulter("legend",function(){return"plain"}),u3e(r)}var h3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,n,a){var i=oy(t);r.prototype.init.call(this,t,n,a),CG(this,t,i)},e.prototype.mergeOption=function(t,n){r.prototype.mergeOption.call(this,t,n),CG(this,this.option,t)},e.type="legend.scroll",e.defaultOption=af(aL.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(aL);function CG(r,e,t){var n=r.getOrient(),a=[1,1];a[n.index]=0,zA(e,t,{type:"box",ignoreSize:!!a})}var BG=Ht,rD=["width","height"],nD=["x","y"],d3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){r.prototype.init.call(this),this.group.add(this._containerGroup=new BG),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new BG)},e.prototype.resetInner=function(){r.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,n,a,i,s,o,l){var c=this;r.prototype.renderInner.call(this,t,n,a,i,s,o,l);var u=this._controllerGroup,h=n.get("pageIconSize",!0),d=$e(h)?h:[h,h];g("pagePrev",0);var A=n.getModel("pageTextStyle");u.add(new Cr({name:"pageText",style:{text:"xx/xx",fill:A.getTextColor(),font:A.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),g("pageNext",1);function g(p,v){var m=p+"DataIndex",y=Dw(n.get("pageIcons",!0)[n.getOrient().name][v],{onclick:ft(c._pageGo,c,m,n,i)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});y.name=p,u.add(y)}},e.prototype.layoutInner=function(t,n,a,i,s,o){var l=this.getSelectorGroup(),c=t.getOrient().index,u=rD[c],h=nD[c],d=rD[1-c],A=nD[1-c];s&&rp("horizontal",l,t.get("selectorItemGap",!0));var g=t.get("selectorButtonGap",!0),p=l.getBoundingRect(),v=[-p.x,-p.y],m=Ft(a);s&&(m[u]=a[u]-p[u]-g);var y=this._layoutContentAndController(t,i,m,c,u,d,A,h);if(s){if(o==="end")v[c]+=y[u]+g;else{var x=p[u]+g;v[c]-=x,y[h]-=x}y[u]+=p[u]+g,v[1-c]+=y[A]+y[d]/2-p[d]/2,y[d]=Math.max(y[d],p[d]),y[A]=Math.min(y[A],p[A]+v[1-c]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},e.prototype._layoutContentAndController=function(t,n,a,i,s,o,l,c){var u=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;rp(t.get("orient"),u,t.get("itemGap"),i?a.width:null,i?null:a.height),rp("horizontal",d,t.get("pageButtonItemGap",!0));var A=u.getBoundingRect(),g=d.getBoundingRect(),p=this._showController=A[s]>a[s],v=[-A.x,-A.y];n||(v[i]=u[c]);var m=[0,0],y=[-g.x,-g.y],x=$t(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(p){var b=t.get("pageButtonPosition",!0);b==="end"?y[i]+=a[s]-g[s]:m[i]+=g[s]+x}y[1-i]+=A[o]/2-g[o]/2,u.setPosition(v),h.setPosition(m),d.setPosition(y);var S={x:0,y:0};if(S[s]=p?a[s]:A[s],S[o]=Math.max(A[o],g[o]),S[l]=Math.min(0,g[l]+y[1-i]),h.__rectSize=a[s],p){var _={x:0,y:0};_[s]=Math.max(a[s]-g[s]-x,0),_[o]=S[o],h.setClipPath(new br({shape:_})),h.__rectSize=_[s]}else d.eachChild(function(w){w.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(t);return C.pageIndex!=null&&Er(u,{x:C.contentPosition[0],y:C.contentPosition[1]},p?t:null),this._updatePageInfoView(t,C),S},e.prototype._pageGo=function(t,n,a){var i=this._getPageInfo(n)[t];i!=null&&a.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:n.id})},e.prototype._updatePageInfoView=function(t,n){var a=this._controllerGroup;X(["pagePrev","pageNext"],function(u){var h=u+"DataIndex",d=n[h]!=null,A=a.childOfName(u);A&&(A.setStyle("fill",d?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),A.cursor=d?"pointer":"default")});var i=a.childOfName("pageText"),s=t.get("pageFormatter"),o=n.pageIndex,l=o!=null?o+1:0,c=n.pageCount;i&&s&&i.setStyle("text",dt(s)?s.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):s({current:l,total:c}))},e.prototype._getPageInfo=function(t){var n=t.get("scrollDataIndex",!0),a=this.getContentGroup(),i=this._containerGroup.__rectSize,s=t.getOrient().index,o=rD[s],l=nD[s],c=this._findTargetItemIndex(n),u=a.children(),h=u[c],d=u.length,A=d?1:0,g={contentPosition:[a.x,a.y],pageCount:A,pageIndex:A-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return g;var p=b(h);g.contentPosition[s]=-p.s;for(var v=c+1,m=p,y=p,x=null;v<=d;++v)x=b(u[v]),(!x&&y.e>m.s+i||x&&!S(x,m.s))&&(y.i>m.i?m=y:m=x,m&&(g.pageNextDataIndex==null&&(g.pageNextDataIndex=m.i),++g.pageCount)),y=x;for(var v=c-1,m=p,y=p,x=null;v>=-1;--v)x=b(u[v]),(!x||!S(y,x.s))&&m.i<y.i&&(y=m,g.pagePrevDataIndex==null&&(g.pagePrevDataIndex=m.i),++g.pageCount,++g.pageIndex),m=x;return g;function b(_){if(_){var C=_.getBoundingRect(),w=C[l]+_[l];return{s:w,e:w+C[o],i:_.__legendDataIndex}}}function S(_,C){return _.e>=C&&_.s<=C+i}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var n,a=this.getContentGroup(),i;return a.eachChild(function(s,o){var l=s.__legendDataIndex;i==null&&l!=null&&(i=o),l===t&&(n=o)}),n??i},e.type="legend.scroll",e}(Mie);function A3e(r){r.registerAction("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;n!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(a){a.setScrollDataIndex(n)})})}function f3e(r){sr(Lie),r.registerComponentModel(h3e),r.registerComponentView(d3e),A3e(r)}function g3e(r){sr(Lie),sr(f3e)}var p3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=af(Qb.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(Qb),Dj=wr();function m3e(r,e,t){Dj(r).coordSysRecordMap.each(function(n){var a=n.dataZoomInfoMap.get(e.uid);a&&(a.getRange=t)})}function v3e(r,e){for(var t=Dj(r).coordSysRecordMap,n=t.keys(),a=0;a<n.length;a++){var i=n[a],s=t.get(i),o=s.dataZoomInfoMap;if(o){var l=e.uid,c=o.get(l);c&&(o.removeKey(l),o.keys().length||Pie(t,s))}}}function Pie(r,e){if(e){r.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function y3e(r,e){var t={model:e,containsPoint:Wt(b3e,e),dispatchAction:Wt(x3e,r),dataZoomInfoMap:null,controller:null},n=t.controller=new Qw(r.getZr());return X(["pan","zoom","scrollMove"],function(a){n.on(a,function(i){var s=[];t.dataZoomInfoMap.each(function(o){if(i.isAvailableBehavior(o.model.option)){var l=(o.getRange||{})[a],c=l&&l(o.dzReferCoordSysInfo,t.model.mainType,t.controller,i);!o.model.get("disabled",!0)&&c&&s.push({dataZoomId:o.model.id,start:c[0],end:c[1]})}}),s.length&&t.dispatchAction(s)})}),t}function x3e(r,e){r.isDisposed()||r.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function b3e(r,e,t,n){return r.coordinateSystem.containPoint([t,n])}function w3e(r){var e,t="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},a=!0;return r.each(function(i){var s=i.model,o=s.get("disabled",!0)?!1:s.get("zoomLock",!0)?"move":!0;n[t+o]>n[t+e]&&(e=o),a=a&&s.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!a}}}function S3e(r){r.registerProcessor(r.PRIORITY.PROCESSOR.FILTER,function(e,t){var n=Dj(t),a=n.coordSysRecordMap||(n.coordSysRecordMap=bt());a.each(function(i){i.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){var s=mie(i);X(s.infoList,function(o){var l=o.model.uid,c=a.get(l)||a.set(l,y3e(t,o.model)),u=c.dataZoomInfoMap||(c.dataZoomInfoMap=bt());u.set(i.uid,{dzReferCoordSysInfo:o,model:i,getRange:null})})}),a.each(function(i){var s=i.controller,o,l=i.dataZoomInfoMap;if(l){var c=l.keys()[0];c!=null&&(o=l.get(c))}if(!o){Pie(a,i);return}var u=w3e(l);s.enable(u.controlType,u.opt),s.setPointerChecker(i.containsPoint),uy(i,"dispatchAction",o.model.get("throttle",!0),"fixRate")})})}var _3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,n,a){if(r.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),m3e(a,t,{pan:ft(aD.pan,this),zoom:ft(aD.zoom,this),scrollMove:ft(aD.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){v3e(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(wj),aD={zoom:function(r,e,t,n){var a=this.range,i=a.slice(),s=r.axisModels[0];if(s){var o=iD[e](null,[n.originX,n.originY],s,t,r),l=(o.signal>0?o.pixelStart+o.pixelLength-o.pixel:o.pixel-o.pixelStart)/o.pixelLength*(i[1]-i[0])+i[0],c=Math.max(1/n.scale,0);i[0]=(i[0]-l)*c+l,i[1]=(i[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(zp(0,i,[0,100],0,u.minSpan,u.maxSpan),this.range=i,a[0]!==i[0]||a[1]!==i[1])return i}},pan:NG(function(r,e,t,n,a,i){var s=iD[n]([i.oldX,i.oldY],[i.newX,i.newY],e,a,t);return s.signal*(r[1]-r[0])*s.pixel/s.pixelLength}),scrollMove:NG(function(r,e,t,n,a,i){var s=iD[n]([0,0],[i.scrollDelta,i.scrollDelta],e,a,t);return s.signal*(r[1]-r[0])*i.scrollDelta})};function NG(r){return function(e,t,n,a){var i=this.range,s=i.slice(),o=e.axisModels[0];if(o){var l=r(s,o,e,t,n,a);if(zp(l,s,[0,100],"all"),this.range=s,i[0]!==s[0]||i[1]!==s[1])return s}}}var iD={grid:function(r,e,t,n,a){var i=t.axis,s={},o=a.model.coordinateSystem.getRect();return r=r||[0,0],i.dim==="x"?(s.pixel=e[0]-r[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=i.inverse?1:-1):(s.pixel=e[1]-r[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=i.inverse?-1:1),s},polar:function(r,e,t,n,a){var i=t.axis,s={},o=a.model.coordinateSystem,l=o.getRadiusAxis().getExtent(),c=o.getAngleAxis().getExtent();return r=r?o.pointToCoord(r):[0,0],e=o.pointToCoord(e),t.mainType==="radiusAxis"?(s.pixel=e[0]-r[0],s.pixelLength=l[1]-l[0],s.pixelStart=l[0],s.signal=i.inverse?1:-1):(s.pixel=e[1]-r[1],s.pixelLength=c[1]-c[0],s.pixelStart=c[0],s.signal=i.inverse?-1:1),s},singleAxis:function(r,e,t,n,a){var i=t.axis,s=a.model.coordinateSystem.getRect(),o={};return r=r||[0,0],i.orient==="horizontal"?(o.pixel=e[0]-r[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=i.inverse?1:-1):(o.pixel=e[1]-r[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=i.inverse?-1:1),o}};function kie(r){Sj(r),r.registerComponentModel(p3e),r.registerComponentView(_3e),S3e(r)}var C3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=af(Qb.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(Qb),yx=br,TG=7,B3e=1,sD=30,N3e=7,xx="horizontal",IG="vertical",T3e=5,I3e=["line","bar","candlestick","scatter"],E3e={easing:"cubicOut",duration:100,delay:0},D3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,n){this.api=n,this._onBrush=ft(this._onBrush,this),this._onBrushEnd=ft(this._onBrushEnd,this)},e.prototype.render=function(t,n,a,i){if(r.prototype.render.apply(this,arguments),uy(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!i||i.type!=="dataZoom"||i.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),r.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Ib(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new Ht;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(n),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,n=this.api,a=t.get("brushSelect"),i=a?N3e:0,s=this._findCoordRect(),o={width:n.getWidth(),height:n.getHeight()},l=this._orient===xx?{right:o.width-s.x-s.width,top:o.height-sD-TG-i,width:s.width,height:sD}:{right:TG,top:s.y,width:sD,height:s.height},c=oy(t.option);X(["right","top","width","height"],function(h){c[h]==="ph"&&(c[h]=l[h])});var u=Ua(c,o);this._location={x:u.x,y:u.y},this._size=[u.width,u.height],this._orient===IG&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,n=this._location,a=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),s=i&&i.get("inverse"),o=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(a===xx&&!s?{scaleY:l?1:-1,scaleX:1}:a===xx&&s?{scaleY:l?1:-1,scaleX:-1}:a===IG&&!s?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var c=t.getBoundingRect([o]);t.x=n.x-c.x,t.y=n.y-c.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,n=this._size,a=this._displayables.sliderGroup,i=t.get("brushSelect");a.add(new yx({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var s=new yx({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:ft(this._onClickPanel,this)}),o=this.api.getZr();i?(s.on("mousedown",this._onBrushStart,this),s.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),a.add(s)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var n=this._size,a=this._shadowSize||[],i=t.series,s=i.getRawData(),o=i.getShadowDim&&i.getShadowDim(),l=o&&s.getDimensionInfo(o)?i.getShadowDim():t.otherDim;if(l==null)return;var c=this._shadowPolygonPts,u=this._shadowPolylinePts;if(s!==this._shadowData||l!==this._shadowDim||n[0]!==a[0]||n[1]!==a[1]){var h=s.getDataExtent(l),d=(h[1]-h[0])*.3;h=[h[0]-d,h[1]+d];var A=[0,n[1]],g=[0,n[0]],p=[[n[0],0],[0,0]],v=[],m=g[1]/(s.count()-1),y=0,x=Math.round(s.count()/n[0]),b;s.each([l],function(B,D){if(x>0&&D%x){y+=m;return}var T=B==null||isNaN(B)||B==="",E=T?0:Hr(B,h,A,!0);T&&!b&&D?(p.push([p[p.length-1][0],0]),v.push([v[v.length-1][0],0])):!T&&b&&(p.push([y,0]),v.push([y,0])),p.push([y,E]),v.push([y,E]),y+=m,b=T}),c=this._shadowPolygonPts=p,u=this._shadowPolylinePts=v}this._shadowData=s,this._shadowDim=l,this._shadowSize=[n[0],n[1]];var S=this.dataZoomModel;function _(B){var D=S.getModel(B?"selectedDataBackground":"dataBackground"),T=new Ht,E=new vs({shape:{points:c},segmentIgnoreThreshold:1,style:D.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),R=new ws({shape:{points:u},segmentIgnoreThreshold:1,style:D.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return T.add(E),T.add(R),T}for(var C=0;C<3;C++){var w=_(C===1);this._displayables.sliderGroup.add(w),this._displayables.dataShadowSegs.push(w)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,n=t.get("showDataShadow");if(n!==!1){var a,i=this.ecModel;return t.eachTargetAxis(function(s,o){var l=t.getAxisProxy(s,o).getTargetSeriesModels();X(l,function(c){if(!a&&!(n!==!0&&rr(I3e,c.get("type"))<0)){var u=i.getComponent(cA(s),o).axis,h=M3e(s),d,A=c.coordinateSystem;h!=null&&A.getOtherAxis&&(d=A.getOtherAxis(u).inverse),h=c.getData().mapDimension(h),a={thisAxis:u,series:c,thisDim:s,otherDim:h,otherAxisInverse:d}}},this)},this),a}},e.prototype._renderHandle=function(){var t=this.group,n=this._displayables,a=n.handles=[null,null],i=n.handleLabels=[null,null],s=this._displayables.sliderGroup,o=this._size,l=this.dataZoomModel,c=this.api,u=l.get("borderRadius")||0,h=l.get("brushSelect"),d=n.filler=new yx({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});s.add(d),s.add(new yx({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:u},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:B3e,fill:"rgba(0,0,0,0)"}})),X([0,1],function(x){var b=l.get("handleIcon");!TC[b]&&b.indexOf("path://")<0&&b.indexOf("image://")<0&&(b="path://"+b);var S=Ta(b,-1,0,2,2,null,!0);S.attr({cursor:EG(this._orient),draggable:!0,drift:ft(this._onDragMove,this,x),ondragend:ft(this._onDragEnd,this),onmouseover:ft(this._showDataInfo,this,!0),onmouseout:ft(this._showDataInfo,this,!1),z2:5});var _=S.getBoundingRect(),C=l.get("handleSize");this._handleHeight=ot(C,this._size[1]),this._handleWidth=_.width/_.height*this._handleHeight,S.setStyle(l.getModel("handleStyle").getItemStyle()),S.style.strokeNoScale=!0,S.rectHover=!0,S.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),ep(S);var w=l.get("handleColor");w!=null&&(S.style.fill=w),s.add(a[x]=S);var B=l.getModel("textStyle"),D=l.get("handleLabel")||{},T=D.show||!1;t.add(i[x]=new Cr({silent:!0,invisible:!T,style:bn(B,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:B.getTextColor(),font:B.getFont()}),z2:10}))},this);var A=d;if(h){var g=ot(l.get("moveHandleSize"),o[1]),p=n.moveHandle=new br({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:g}}),v=g*.8,m=n.moveHandleIcon=Ta(l.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);m.silent=!0,m.y=o[1]+g/2-.5,p.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(o[1]/2,Math.max(g,10));A=n.moveZone=new br({invisible:!0,shape:{y:o[1]-y,height:g+y}}),A.on("mouseover",function(){c.enterEmphasis(p)}).on("mouseout",function(){c.leaveEmphasis(p)}),s.add(p),s.add(m),s.add(A)}A.attr({draggable:!0,cursor:EG(this._orient),drift:ft(this._onDragMove,this,"all"),ondragstart:ft(this._showDataInfo,this,!0),ondragend:ft(this._onDragEnd,this),onmouseover:ft(this._showDataInfo,this,!0),onmouseout:ft(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[Hr(t[0],[0,100],n,!0),Hr(t[1],[0,100],n,!0)]},e.prototype._updateInterval=function(t,n){var a=this.dataZoomModel,i=this._handleEnds,s=this._getViewExtent(),o=a.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];zp(n,i,s,a.get("zoomLock")?"all":t,o.minSpan!=null?Hr(o.minSpan,l,s,!0):null,o.maxSpan!=null?Hr(o.maxSpan,l,s,!0):null);var c=this._range,u=this._range=ll([Hr(i[0],s,l,!0),Hr(i[1],s,l,!0)]);return!c||c[0]!==u[0]||c[1]!==u[1]},e.prototype._updateView=function(t){var n=this._displayables,a=this._handleEnds,i=ll(a.slice()),s=this._size;X([0,1],function(A){var g=n.handles[A],p=this._handleHeight;g.attr({scaleX:p/2,scaleY:p/2,x:a[A]+(A?-1:1),y:s[1]/2-p/2})},this),n.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:s[1]});var o={x:i[0],width:i[1]-i[0]};n.moveHandle&&(n.moveHandle.setShape(o),n.moveZone.setShape(o),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",o.x+o.width/2));for(var l=n.dataShadowSegs,c=[0,i[0],i[1],s[0]],u=0;u<l.length;u++){var h=l[u],d=h.getClipPath();d||(d=new br,h.setClipPath(d)),d.setShape({x:c[u],y:0,width:c[u+1]-c[u],height:s[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var n=this.dataZoomModel,a=this._displayables,i=a.handleLabels,s=this._orient,o=["",""];if(n.get("showDetail")){var l=n.findRepresentativeAxisProxy();if(l){var c=l.getAxisModel().axis,u=this._range,h=t?l.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:l.getDataValueWindow();o=[this._formatLabel(h[0],c),this._formatLabel(h[1],c)]}}var d=ll(this._handleEnds.slice());A.call(this,0),A.call(this,1);function A(g){var p=tp(a.handles[g].parent,this.group),v=PN(g===0?"right":"left",p),m=this._handleWidth/2+T3e,y=ec([d[g]+(g===0?-m:m),this._size[1]/2],p);i[g].setStyle({x:y[0],y:y[1],verticalAlign:s===xx?"middle":v,align:s===xx?v:"center",text:o[g]})}},e.prototype._formatLabel=function(t,n){var a=this.dataZoomModel,i=a.get("labelFormatter"),s=a.get("labelPrecision");(s==null||s==="auto")&&(s=n.getPixelPrecision());var o=t==null||isNaN(t)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(s,20));return It(i)?i(t,o):dt(i)?i.replace("{value}",o):o},e.prototype._showDataInfo=function(t){var n=this.dataZoomModel.get("handleLabel")||{},a=n.show||!1,i=this.dataZoomModel.getModel(["emphasis","handleLabel"]),s=i.get("show")||!1,o=t||this._dragging?s:a,l=this._displayables,c=l.handleLabels;c[0].attr("invisible",!o),c[1].attr("invisible",!o),l.moveHandle&&this.api[o?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(t,n,a,i){this._dragging=!0,Sh(i.event);var s=this._displayables.sliderGroup.getLocalTransform(),o=ec([n,a],s,!0),l=this._updateInterval(t,o[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var n=this._size,a=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(a[0]<0||a[0]>n[0]||a[1]<0||a[1]>n[1])){var i=this._handleEnds,s=(i[0]+i[1])/2,o=this._updateInterval("all",a[0]-s);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var n=t.offsetX,a=t.offsetY;this._brushStart=new Xt(n,a),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var a=n.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(a.width)<5)){var s=this._getViewExtent(),o=[0,100];this._range=ll([Hr(a.x,s,o,!0),Hr(a.x+a.width,s,o,!0)]),this._handleEnds=[a.x,a.x+a.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Sh(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,n){var a=this._displayables,i=this.dataZoomModel,s=a.brushRect;s||(s=a.brushRect=new yx({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),a.sliderGroup.add(s)),s.attr("ignore",!1);var o=this._brushStart,l=this._displayables.sliderGroup,c=l.transformCoordToLocal(t,n),u=l.transformCoordToLocal(o.x,o.y),h=this._size;c[0]=Math.max(Math.min(h[0],c[0]),0),s.setShape({x:u[0],y:0,width:c[0]-u[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?E3e:null,start:n[0],end:n[1]})},e.prototype._findCoordRect=function(){var t,n=mie(this.dataZoomModel).infoList;if(!t&&n.length){var a=n[0].model.coordinateSystem;t=a.getRect&&a.getRect()}if(!t){var i=this.api.getWidth(),s=this.api.getHeight();t={x:i*.2,y:s*.2,width:i*.6,height:s*.6}}return t},e.type="dataZoom.slider",e}(wj);function M3e(r){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[r]}function EG(r){return r==="vertical"?"ns-resize":"ew-resize"}function Fie(r){r.registerComponentModel(C3e),r.registerComponentView(D3e),Sj(r)}function R3e(r){sr(kie),sr(Fie)}var jie={get:function(r,e,t){var n=Ft((L3e[r]||{})[e]);return t&&$e(n)?n[n.length-1]:n}},L3e={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},DG=Za.mapVisual,P3e=Za.eachVisual,k3e=$e,MG=X,F3e=ll,j3e=Hr,ZC=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,n,a){this.mergeDefaultAndTheme(t,a)},e.prototype.optionUpdated=function(t,n){var a=this.option;!n&&Nie(a,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var n=this.stateList;t=ft(t,this),this.controllerVisuals=tL(this.option.controller,n,t),this.targetVisuals=tL(this.option.target,n,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,n=[];return t==null||t==="all"?this.ecModel.eachSeries(function(a,i){n.push(i)}):n=Xr(t),n},e.prototype.eachTargetSeries=function(t,n){X(this.getTargetSeriesIndices(),function(a){var i=this.ecModel.getSeriesByIndex(a);i&&t.call(n,i)},this)},e.prototype.isTargetSeries=function(t){var n=!1;return this.eachTargetSeries(function(a){a===t&&(n=!0)}),n},e.prototype.formatValueText=function(t,n,a){var i=this.option,s=i.precision,o=this.dataBound,l=i.formatter,c;a=a||["<",">"],$e(t)&&(t=t.slice(),c=!0);var u=n?t:c?[h(t[0]),h(t[1])]:h(t);if(dt(l))return l.replace("{value}",c?u[0]:u).replace("{value2}",c?u[1]:u);if(It(l))return c?l(t[0],t[1]):l(t);if(c)return t[0]===o[0]?a[0]+" "+u[1]:t[1]===o[1]?a[1]+" "+u[0]:u[0]+" - "+u[1];return u;function h(d){return d===o[0]?"min":d===o[1]?"max":(+d).toFixed(Math.min(s,20))}},e.prototype.resetExtent=function(){var t=this.option,n=F3e([t.min,t.max]);this._dataExtent=n},e.prototype.getDataDimensionIndex=function(t){var n=this.option.dimension;if(n!=null)return t.getDimensionIndex(n);for(var a=t.dimensions,i=a.length-1;i>=0;i--){var s=a[i],o=t.getDimensionInfo(s);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,n=this.option,a={inRange:n.inRange,outOfRange:n.outOfRange},i=n.target||(n.target={}),s=n.controller||(n.controller={});qt(i,a),qt(s,a);var o=this.isCategory();l.call(this,i),l.call(this,s),c.call(this,i,"inRange","outOfRange"),u.call(this,s);function l(h){k3e(n.color)&&!h.inRange&&(h.inRange={color:n.color.slice().reverse()}),h.inRange=h.inRange||{color:t.get("gradientColor")}}function c(h,d,A){var g=h[d],p=h[A];g&&!p&&(p=h[A]={},MG(g,function(v,m){if(Za.isValidType(m)){var y=jie.get(m,"inactive",o);y!=null&&(p[m]=y,m==="color"&&!p.hasOwnProperty("opacity")&&!p.hasOwnProperty("colorAlpha")&&(p.opacity=[0,0]))}}))}function u(h){var d=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,A=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),p=this.getItemSymbol(),v=p||"roundRect";MG(this.stateList,function(m){var y=this.itemSize,x=h[m];x||(x=h[m]={color:o?g:[g]}),x.symbol==null&&(x.symbol=d&&Ft(d)||(o?v:[v])),x.symbolSize==null&&(x.symbolSize=A&&Ft(A)||(o?y[0]:[y[0],y[0]])),x.symbol=DG(x.symbol,function(_){return _==="none"?v:_});var b=x.symbolSize;if(b!=null){var S=-1/0;P3e(b,function(_){_>S&&(S=_)}),x.symbolSize=DG(b,function(_){return j3e(_,[0,S],[0,y[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(gr),RG=[20,140],O3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,n){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(a){a.mappingMethod="linear",a.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){r.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=RG[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=RG[1])},e.prototype._resetRange=function(){var t=this.getExtent(),n=this.option.range;!n||n.auto?(t.auto=1,this.option.range=t):$e(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],t[0]),n[1]=Math.min(n[1],t[1]))},e.prototype.completeVisualOption=function(){r.prototype.completeVisualOption.apply(this,arguments),X(this.stateList,function(t){var n=this.option.controller[t].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),n=ll((this.get("range")||[]).slice());return n[0]>t[1]&&(n[0]=t[1]),n[1]>t[1]&&(n[1]=t[1]),n[0]<t[0]&&(n[0]=t[0]),n[1]<t[0]&&(n[1]=t[0]),n},e.prototype.getValueState=function(t){var n=this.option.range,a=this.getExtent();return(n[0]<=a[0]||n[0]<=t)&&(n[1]>=a[1]||t<=n[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var n=[];return this.eachTargetSeries(function(a){var i=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(o,l){t[0]<=o&&o<=t[1]&&i.push(l)},this),n.push({seriesId:a.id,dataIndex:i})},this),n},e.prototype.getVisualMeta=function(t){var n=LG(this,"outOfRange",this.getExtent()),a=LG(this,"inRange",this.option.range.slice()),i=[];function s(A,g){i.push({value:A,color:t(A,g)})}for(var o=0,l=0,c=a.length,u=n.length;l<u&&(!a.length||n[l]<=a[0]);l++)n[l]<a[o]&&s(n[l],"outOfRange");for(var h=1;o<c;o++,h=0)h&&i.length&&s(a[o],"outOfRange"),s(a[o],"inRange");for(var h=1;l<u;l++)(!a.length||a[a.length-1]<n[l])&&(h&&(i.length&&s(i[i.length-1].value,"outOfRange"),h=0),s(n[l],"outOfRange"));var d=i.length;return{stops:i,outerColors:[d?i[0].color:"transparent",d?i[d-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=af(ZC.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(ZC);function LG(r,e,t){if(t[0]===t[1])return t.slice();for(var n=200,a=(t[1]-t[0])/n,i=t[0],s=[],o=0;o<=n&&i<t[1];o++)s.push(i),i+=a;return s.push(t[1]),s}var Oie=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,n){this.ecModel=t,this.api=n},e.prototype.render=function(t,n,a,i){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,n,a,i)},e.prototype.renderBackground=function(t){var n=this.visualMapModel,a=sy(n.get("padding")||0),i=t.getBoundingRect();t.add(new br({z2:-1,silent:!0,shape:{x:i.x-a[3],y:i.y-a[0],width:i.width+a[3]+a[1],height:i.height+a[0]+a[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,n,a){a=a||{};var i=a.forceState,s=this.visualMapModel,o={};if(n==="color"){var l=s.get("contentColor");o.color=l}function c(A){return o[A]}function u(A,g){o[A]=g}var h=s.controllerVisuals[i||s.getValueState(t)],d=Za.prepareVisualTypes(h);return X(d,function(A){var g=h[A];a.convertOpacityToAlpha&&A==="opacity"&&(A="colorAlpha",g=h.__alphaForOpacity),Za.dependsOn(A,n)&&g&&g.applyVisual(t,c,u)}),o[n]},e.prototype.positionGroup=function(t){var n=this.visualMapModel,a=this.api;QN(t,n.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},e.prototype.doRender=function(t,n,a,i){},e.type="visualMap",e}(Gn),PG=[["left","right","width"],["top","bottom","height"]];function Uie(r,e,t){var n=r.option,a=n.align;if(a!=null&&a!=="auto")return a;for(var i={width:e.getWidth(),height:e.getHeight()},s=n.orient==="horizontal"?1:0,o=PG[s],l=[0,null,10],c={},u=0;u<3;u++)c[PG[1-s][u]]=l[u],c[o[u]]=u===2?t[0]:n[o[u]];var h=[["x","width",3],["y","height",0]][s],d=Ua(c,i,n.padding);return o[(d.margin[h[2]]||0)+d[h[0]]+d[h[1]]*.5<i[h[1]]*.5?0:1]}function d5(r,e){return X(r||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),r}var Ic=Hr,U3e=X,kG=Math.min,oD=Math.max,H3e=12,Q3e=6,z3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,n){r.prototype.init.call(this,t,n),this._hoverLinkFromSeriesMouseOver=ft(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ft(this._hideIndicator,this)},e.prototype.doRender=function(t,n,a,i){(!i||i.type!=="selectDataRange"||i.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,n=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(n);var a=t.get("text");this._renderEndsText(n,a,0),this._renderEndsText(n,a,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},e.prototype._renderEndsText=function(t,n,a){if(n){var i=n[1-a];i=i!=null?i+"":"";var s=this.visualMapModel,o=s.get("textGap"),l=s.itemSize,c=this._shapes.mainGroup,u=this._applyTransform([l[0]/2,a===0?-o:l[1]+o],c),h=this._applyTransform(a===0?"bottom":"top",c),d=this._orient,A=this.visualMapModel.textStyleModel;this.group.add(new Cr({style:bn(A,{x:u[0],y:u[1],verticalAlign:d==="horizontal"?"middle":h,align:d==="horizontal"?h:"center",text:i})}))}},e.prototype._renderBar=function(t){var n=this.visualMapModel,a=this._shapes,i=n.itemSize,s=this._orient,o=this._useHandle,l=Uie(n,this.api,i),c=a.mainGroup=this._createBarGroup(l),u=new Ht;c.add(u),u.add(a.outOfRange=FG()),u.add(a.inRange=FG(null,o?OG(this._orient):null,ft(this._dragHandle,this,"all",!1),ft(this._dragHandle,this,"all",!0))),u.setClipPath(new br({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var h=n.textStyleModel.getTextRect("国"),d=oD(h.width,h.height);o&&(a.handleThumbs=[],a.handleLabels=[],a.handleLabelPoints=[],this._createHandle(n,c,0,i,d,s),this._createHandle(n,c,1,i,d,s)),this._createIndicator(n,c,i,d,s),t.add(c)},e.prototype._createHandle=function(t,n,a,i,s,o){var l=ft(this._dragHandle,this,a,!1),c=ft(this._dragHandle,this,a,!0),u=rc(t.get("handleSize"),i[0]),h=Ta(t.get("handleIcon"),-u/2,-u/2,u,u,null,!0),d=OG(this._orient);h.attr({cursor:d,draggable:!0,drift:l,ondragend:c,onmousemove:function(m){Sh(m.event)}}),h.x=i[0]/2,h.useStyle(t.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Ig(h,!0),n.add(h);var A=this.visualMapModel.textStyleModel,g=new Cr({cursor:d,draggable:!0,drift:l,onmousemove:function(m){Sh(m.event)},ondragend:c,style:bn(A,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var p=[u,0],v=this._shapes;v.handleThumbs[a]=h,v.handleLabelPoints[a]=p,v.handleLabels[a]=g},e.prototype._createIndicator=function(t,n,a,i,s){var o=rc(t.get("indicatorSize"),a[0]),l=Ta(t.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:a[0]/2});var c=t.getModel("indicatorStyle").getItemStyle();if(l instanceof fi){var u=l.style;l.useStyle(He({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},c))}else l.useStyle(c);n.add(l);var h=this.visualMapModel.textStyleModel,d=new Cr({silent:!0,invisible:!0,style:bn(h,{x:0,y:0,text:""})});this.group.add(d);var A=[(s==="horizontal"?i/2:Q3e)+a[0]/2,0],g=this._shapes;g.indicator=l,g.indicatorLabel=d,g.indicatorLabelPoint=A,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,n,a,i){if(this._useHandle){if(this._dragging=!n,!n){var s=this._applyTransform([a,i],this._shapes.mainGroup,!0);this._updateInterval(t,s[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():jG(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,n=this._dataInterval=t.getSelected(),a=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[Ic(n[0],a,i,!0),Ic(n[1],a,i,!0)]},e.prototype._updateInterval=function(t,n){n=n||0;var a=this.visualMapModel,i=this._handleEnds,s=[0,a.itemSize[1]];zp(n,i,s,t,0);var o=a.getExtent();this._dataInterval=[Ic(i[0],s,o,!0),Ic(i[1],s,o,!0)]},e.prototype._updateView=function(t){var n=this.visualMapModel,a=n.getExtent(),i=this._shapes,s=[0,n.itemSize[1]],o=t?s:this._handleEnds,l=this._createBarVisual(this._dataInterval,a,o,"inRange"),c=this._createBarVisual(a,a,s,"outOfRange");i.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),i.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(o,l)},e.prototype._createBarVisual=function(t,n,a,i){var s={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,s),l=[this.getControllerVisual(t[0],"symbolSize",s),this.getControllerVisual(t[1],"symbolSize",s)],c=this._createBarPoints(a,l);return{barColor:new Iw(0,0,0,1,o),barPoints:c,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(t,n){var a=100,i=[],s=(t[1]-t[0])/a;i.push({color:this.getControllerVisual(t[0],"color",n),offset:0});for(var o=1;o<a;o++){var l=t[0]+s*o;if(l>t[1])break;i.push({color:this.getControllerVisual(l,"color",n),offset:o/a})}return i.push({color:this.getControllerVisual(t[1],"color",n),offset:1}),i},e.prototype._createBarPoints=function(t,n){var a=this.visualMapModel.itemSize;return[[a[0]-n[0],t[0]],[a[0],t[0]],[a[0],t[1]],[a[0]-n[1],t[1]]]},e.prototype._createBarGroup=function(t){var n=this._orient,a=this.visualMapModel.get("inverse");return new Ht(n==="horizontal"&&!a?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&a?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!a?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,n){if(this._useHandle){var a=this._shapes,i=this.visualMapModel,s=a.handleThumbs,o=a.handleLabels,l=i.itemSize,c=i.getExtent(),u=this._applyTransform("left",a.mainGroup);U3e([0,1],function(h){var d=s[h];d.setStyle("fill",n.handlesColor[h]),d.y=t[h];var A=Ic(t[h],[0,l[1]],c,!0),g=this.getControllerVisual(A,"symbolSize");d.scaleX=d.scaleY=g/l[0],d.x=l[0]-g/2;var p=ec(a.handleLabelPoints[h],tp(d,this.group));if(this._orient==="horizontal"){var v=u==="left"||u==="top"?(l[0]-g)/2:(l[0]-g)/-2;p[1]+=v}o[h].setStyle({x:p[0],y:p[1],text:i.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",a.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,n,a,i){var s=this.visualMapModel,o=s.getExtent(),l=s.itemSize,c=[0,l[1]],u=this._shapes,h=u.indicator;if(h){h.attr("invisible",!1);var d={convertOpacityToAlpha:!0},A=this.getControllerVisual(t,"color",d),g=this.getControllerVisual(t,"symbolSize"),p=Ic(t,o,c,!0),v=l[0]-g/2,m={x:h.x,y:h.y};h.y=p,h.x=v;var y=ec(u.indicatorLabelPoint,tp(h,this.group)),x=u.indicatorLabel;x.attr("invisible",!1);var b=this._applyTransform("left",u.mainGroup),S=this._orient,_=S==="horizontal";x.setStyle({text:(a||"")+s.formatValueText(n),verticalAlign:_?b:"middle",align:_?"center":b});var C={x:v,y:p,style:{fill:A}},w={style:{x:y[0],y:y[1]}};if(s.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var B={duration:100,easing:"cubicInOut",additive:!0};h.x=m.x,h.y=m.y,h.animateTo(C,B),x.animateTo(w,B)}else h.attr(C),x.attr(w);this._firstShowIndicator=!1;var D=this._shapes.handleLabels;if(D)for(var T=0;T<D.length;T++)this.api.enterBlur(D[T])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(n){if(t._hovering=!0,!t._dragging){var a=t.visualMapModel.itemSize,i=t._applyTransform([n.offsetX,n.offsetY],t._shapes.mainGroup,!0,!0);i[1]=kG(oD(0,i[1]),a[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=a[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,n){var a=this.visualMapModel,i=a.itemSize;if(a.option.hoverLink){var s=[0,i[1]],o=a.getExtent();t=kG(oD(s[0],t),s[1]);var l=G3e(a,o,s),c=[t-l,t+l],u=Ic(t,s,o,!0),h=[Ic(c[0],s,o,!0),Ic(c[1],s,o,!0)];c[0]<s[0]&&(h[0]=-1/0),c[1]>s[1]&&(h[1]=1/0),n&&(h[0]===-1/0?this._showIndicator(u,h[1],"< ",l):h[1]===1/0?this._showIndicator(u,h[0],"> ",l):this._showIndicator(u,u,"≈ ",l));var d=this._hoverLinkDataIndices,A=[];(n||jG(a))&&(A=this._hoverLinkDataIndices=a.findTargetDataIndices(h));var g=X0e(d,A);this._dispatchHighDown("downplay",d5(g[0],a)),this._dispatchHighDown("highlight",d5(g[1],a))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var n;if(Dg(t.target,function(l){var c=Qt(l);if(c.dataIndex!=null)return n=c,!0},!0),!!n){var a=this.ecModel.getSeriesByIndex(n.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(a)){var s=a.getData(n.dataType),o=s.getStore().get(i.getDataDimensionIndex(s),n.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var a=0;a<n.length;a++)this.api.leaveBlur(n[a])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",d5(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,n,a,i){var s=tp(n,i?null:this.group);return $e(t)?ec(t,s,a):PN(t,s,a)},e.prototype._dispatchHighDown=function(t,n){n&&n.length&&this.api.dispatchAction({type:t,batch:n})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(Oie);function FG(r,e,t,n){return new vs({shape:{points:r},draggable:!!t,cursor:e,drift:t,onmousemove:function(a){Sh(a.event)},ondragend:n})}function G3e(r,e,t){var n=H3e/2,a=r.get("hoverLinkDataSize");return a&&(n=Ic(a,e,t,!0)/2),n}function jG(r){var e=r.get("hoverLinkOnHandle");return!!(e??r.get("realtime"))}function OG(r){return r==="vertical"?"ns-resize":"ew-resize"}var V3e={type:"selectDataRange",event:"dataRangeSelected",update:"update"},$3e=function(r,e){e.eachComponent({mainType:"visualMap",query:r},function(t){t.setSelected(r.selected)})},K3e=[{createOnAllSeries:!0,reset:function(r,e){var t=[];return e.eachComponent("visualMap",function(n){var a=r.pipelineContext;!n.isTargetSeries(r)||a&&a.large||t.push(gMe(n.stateList,n.targetVisuals,ft(n.getValueState,n),n.getDataDimensionIndex(r.getData())))}),t}},{createOnAllSeries:!0,reset:function(r,e){var t=r.getData(),n=[];e.eachComponent("visualMap",function(a){if(a.isTargetSeries(r)){var i=a.getVisualMeta(ft(W3e,null,r,a))||{stops:[],outerColors:[]},s=a.getDataDimensionIndex(t);s>=0&&(i.dimension=s,n.push(i))}}),r.getData().setVisual("visualMeta",n)}}];function W3e(r,e,t,n){for(var a=e.targetVisuals[n],i=Za.prepareVisualTypes(a),s={color:Rw(r.getData(),"color")},o=0,l=i.length;o<l;o++){var c=i[o],u=a[c==="opacity"?"__alphaForOpacity":c];u&&u.applyVisual(t,h,d)}return s.color;function h(A){return s[A]}function d(A,g){s[A]=g}}var UG=X;function q3e(r){var e=r&&r.visualMap;$e(e)||(e=e?[e]:[]),UG(e,function(t){if(t){Om(t,"splitList")&&!Om(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var n=t.pieces;n&&$e(n)&&UG(n,function(a){Pt(a)&&(Om(a,"start")&&!Om(a,"min")&&(a.min=a.start),Om(a,"end")&&!Om(a,"max")&&(a.max=a.end))})}})}function Om(r,e){return r&&r.hasOwnProperty&&r.hasOwnProperty(e)}var HG=!1;function Hie(r){HG||(HG=!0,r.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),r.registerAction(V3e,$3e),X(K3e,function(e){r.registerVisual(r.PRIORITY.VISUAL.COMPONENT,e)}),r.registerPreprocessor(q3e))}function Qie(r){r.registerComponentModel(O3e),r.registerComponentView(z3e),Hie(r)}var Y3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,n){r.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var a=this._mode=this._determineMode();this._pieceList=[],X3e[this._mode].call(this,this._pieceList),this._resetSelected(t,n);var i=this.option.categories;this.resetVisual(function(s,o){a==="categories"?(s.mappingMethod="category",s.categories=Ft(i)):(s.dataExtent=this.getExtent(),s.mappingMethod="piecewise",s.pieceList=We(this._pieceList,function(l){return l=Ft(l),o!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var t=this.option,n={},a=Za.listVisualTypes(),i=this.isCategory();X(t.pieces,function(o){X(a,function(l){o.hasOwnProperty(l)&&(n[l]=1)})}),X(n,function(o,l){var c=!1;X(this.stateList,function(u){c=c||s(t,u,l)||s(t.target,u,l)},this),!c&&X(this.stateList,function(u){(t[u]||(t[u]={}))[l]=jie.get(l,u==="inRange"?"active":"inactive",i)})},this);function s(o,l,c){return o&&o[l]&&o[l].hasOwnProperty(c)}r.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,n){var a=this.option,i=this._pieceList,s=(n?a:t).selected||{};if(a.selected=s,X(i,function(l,c){var u=this.getSelectedMapKey(l);s.hasOwnProperty(u)||(s[u]=!0)},this),a.selectedMode==="single"){var o=!1;X(i,function(l,c){var u=this.getSelectedMapKey(l);s[u]&&(o?s[u]=!1:o=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Ft(t)},e.prototype.getValueState=function(t){var n=Za.findPieceIndex(t,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var n=[],a=this._pieceList;return this.eachTargetSeries(function(i){var s=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(l,c){var u=Za.findPieceIndex(l,a);u===t&&s.push(c)},this),n.push({seriesId:i.id,dataIndex:s})},this),n},e.prototype.getRepresentValue=function(t){var n;if(this.isCategory())n=t.value;else if(t.value!=null)n=t.value;else{var a=t.interval||[];n=a[0]===-1/0&&a[1]===1/0?0:(a[0]+a[1])/2}return n},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var n=[],a=["",""],i=this;function s(u,h){var d=i.getRepresentValue({interval:u});h||(h=i.getValueState(d));var A=t(d,h);u[0]===-1/0?a[0]=A:u[1]===1/0?a[1]=A:n.push({value:u[0],color:A},{value:u[1],color:A})}var o=this._pieceList.slice();if(!o.length)o.push({interval:[-1/0,1/0]});else{var l=o[0].interval[0];l!==-1/0&&o.unshift({interval:[-1/0,l]}),l=o[o.length-1].interval[1],l!==1/0&&o.push({interval:[l,1/0]})}var c=-1/0;return X(o,function(u){var h=u.interval;h&&(h[0]>c&&s([c,h[0]],"outOfRange"),s(h.slice()),c=h[1])},this),{stops:n,outerColors:a}},e.type="visualMap.piecewise",e.defaultOption=af(ZC.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(ZC),X3e={splitNumber:function(r){var e=this.option,t=Math.min(e.precision,20),n=this.getExtent(),a=e.splitNumber;a=Math.max(parseInt(a,10),1),e.splitNumber=a;for(var i=(n[1]-n[0])/a;+i.toFixed(t)!==i&&t<5;)t++;e.precision=t,i=+i.toFixed(t),e.minOpen&&r.push({interval:[-1/0,n[0]],close:[0,0]});for(var s=0,o=n[0];s<a;o+=i,s++){var l=s===a-1?n[1]:o+i;r.push({interval:[o,l],close:[1,1]})}e.maxOpen&&r.push({interval:[n[1],1/0],close:[0,0]}),P8(r),X(r,function(c,u){c.index=u,c.text=this.formatValueText(c.interval)},this)},categories:function(r){var e=this.option;X(e.categories,function(t){r.push({text:this.formatValueText(t,!0),value:t})},this),QG(e,r)},pieces:function(r){var e=this.option;X(e.pieces,function(t,n){Pt(t)||(t={value:t});var a={text:"",index:n};if(t.label!=null&&(a.text=t.label),t.hasOwnProperty("value")){var i=a.value=t.value;a.interval=[i,i],a.close=[1,1]}else{for(var s=a.interval=[],o=a.close=[0,0],l=[1,0,1],c=[-1/0,1/0],u=[],h=0;h<2;h++){for(var d=[["gte","gt","min"],["lte","lt","max"]][h],A=0;A<3&&s[h]==null;A++)s[h]=t[d[A]],o[h]=l[A],u[h]=A===2;s[h]==null&&(s[h]=c[h])}u[0]&&s[1]===1/0&&(o[0]=0),u[1]&&s[0]===-1/0&&(o[1]=0),s[0]===s[1]&&o[0]&&o[1]&&(a.value=s[0])}a.visual=Za.retrieveVisuals(t),r.push(a)},this),QG(e,r),P8(r),X(r,function(t){var n=t.close,a=[["<","≤"][n[1]],[">","≥"][n[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,a)},this)}};function QG(r,e){var t=r.inverse;(r.orient==="vertical"?!t:t)&&e.reverse()}var Z3e=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var n=this.visualMapModel,a=n.get("textGap"),i=n.textStyleModel,s=i.getFont(),o=i.getTextColor(),l=this._getItemAlign(),c=n.itemSize,u=this._getViewData(),h=u.endsText,d=di(n.get("showLabel",!0),!h),A=!n.get("selectedMode");h&&this._renderEndsText(t,h[0],c,d,l),X(u.viewPieceList,function(g){var p=g.piece,v=new Ht;v.onclick=ft(this._onItemClick,this,p),this._enableHoverLink(v,g.indexInModelPieceList);var m=n.getRepresentValue(p);if(this._createItemSymbol(v,m,[0,0,c[0],c[1]],A),d){var y=this.visualMapModel.getValueState(m);v.add(new Cr({style:{x:l==="right"?-a:c[0]+a,y:c[1]/2,text:p.text,verticalAlign:"middle",align:l,font:s,fill:o,opacity:y==="outOfRange"?.5:1},silent:A}))}t.add(v)},this),h&&this._renderEndsText(t,h[1],c,d,l),rp(n.get("orient"),t,n.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,n){var a=this;t.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(s){var o=a.visualMapModel;o.option.hoverLink&&a.api.dispatchAction({type:s,batch:d5(o.findTargetDataIndices(n),o)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,n=t.option;if(n.orient==="vertical")return Uie(t,this.api,t.itemSize);var a=n.align;return(!a||a==="auto")&&(a="left"),a},e.prototype._renderEndsText=function(t,n,a,i,s){if(n){var o=new Ht,l=this.visualMapModel.textStyleModel;o.add(new Cr({style:bn(l,{x:i?s==="right"?a[0]:0:a[0]/2,y:a[1]/2,verticalAlign:"middle",align:i?s:"center",text:n})})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,n=We(t.getPieceList(),function(o,l){return{piece:o,indexInModelPieceList:l}}),a=t.get("text"),i=t.get("orient"),s=t.get("inverse");return(i==="horizontal"?s:!s)?n.reverse():a&&(a=a.slice().reverse()),{viewPieceList:n,endsText:a}},e.prototype._createItemSymbol=function(t,n,a,i){var s=Ta(this.getControllerVisual(n,"symbol"),a[0],a[1],a[2],a[3],this.getControllerVisual(n,"color"));s.silent=i,t.add(s)},e.prototype._onItemClick=function(t){var n=this.visualMapModel,a=n.option,i=a.selectedMode;if(i){var s=Ft(a.selected),o=n.getSelectedMapKey(t);i==="single"||i===!0?(s[o]=!0,X(s,function(l,c){s[c]=c===o})):s[o]=!s[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},e.type="visualMap.piecewise",e}(Oie);function zie(r){r.registerComponentModel(Y3e),r.registerComponentView(Z3e),Hie(r)}function J3e(r){sr(Qie),sr(zie)}var eRe={label:{enabled:!0},decal:{show:!1}},zG=wr(),tRe={};function rRe(r,e){var t=r.getModel("aria");if(!t.get("enabled"))return;var n=Ft(eRe);qt(n.label,r.getLocaleModel().get("aria"),!1),qt(t.option,n,!1),a(),i();function a(){var c=t.getModel("decal"),u=c.get("show");if(u){var h=bt();r.eachSeries(function(d){if(!d.isColorBySeries()){var A=h.get(d.type);A||(A={},h.set(d.type,A)),zG(d).scope=A}}),r.eachRawSeries(function(d){if(r.isSeriesFiltered(d))return;if(It(d.enableAriaDecal)){d.enableAriaDecal();return}var A=d.getData();if(d.isColorBySeries()){var y=oR(d.ecModel,d.name,tRe,r.getSeriesCount()),x=A.getVisual("decal");A.setVisual("decal",b(x,y))}else{var g=d.getRawData(),p={},v=zG(d).scope;A.each(function(S){var _=A.getRawIndex(S);p[_]=S});var m=g.count();g.each(function(S){var _=p[S],C=g.getName(S)||S+"",w=oR(d.ecModel,C,v,m),B=A.getItemVisual(_,"decal");A.setItemVisual(_,"decal",b(B,w))})}function b(S,_){var C=S?He(He({},_),S):_;return C.dirty=!0,C}})}}function i(){var c=e.getZr().dom;if(c){var u=r.getLocaleModel().get("aria"),h=t.getModel("label");if(h.option=Lt(h.option,u),!!h.get("enabled")){if(c.setAttribute("role","img"),h.get("description")){c.setAttribute("aria-label",h.get("description"));return}var d=r.getSeriesCount(),A=h.get(["data","maxCount"])||10,g=h.get(["series","maxCount"])||10,p=Math.min(d,g),v;if(!(d<1)){var m=o();if(m){var y=h.get(["general","withTitle"]);v=s(y,{title:m})}else v=h.get(["general","withoutTitle"]);var x=[],b=d>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);v+=s(b,{seriesCount:d}),r.eachSeries(function(w,B){if(B<p){var D=void 0,T=w.get("name"),E=T?"withName":"withoutName";D=d>1?h.get(["series","multiple",E]):h.get(["series","single",E]),D=s(D,{seriesId:w.seriesIndex,seriesName:w.get("name"),seriesType:l(w.subType)});var R=w.getData();if(R.count()>A){var M=h.get(["data","partialData"]);D+=s(M,{displayCnt:A})}else D+=h.get(["data","allData"]);for(var k=h.get(["data","separator","middle"]),O=h.get(["data","separator","end"]),Q=h.get(["data","excludeDimensionId"]),H=[],W=0;W<R.count();W++)if(W<A){var te=R.getName(W),ee=Q?Ur(R.getValues(W),function(G,Y){return rr(Q,Y)===-1}):R.getValues(W),j=h.get(["data",te?"withName":"withoutName"]);H.push(s(j,{name:te,value:ee.join(k)}))}D+=H.join(k)+O,x.push(D)}});var S=h.getModel(["series","multiple","separator"]),_=S.get("middle"),C=S.get("end");v+=x.join(_)+C,c.setAttribute("aria-label",v)}}}}function s(c,u){if(!dt(c))return c;var h=c;return X(u,function(d,A){h=h.replace(new RegExp("\\{\\s*"+A+"\\s*\\}","g"),d)}),h}function o(){var c=r.get("title");return c&&c.length&&(c=c[0]),c&&c.text}function l(c){var u=r.getLocaleModel().get(["series","typeNames"]);return u[c]||u.chart}}function nRe(r){if(!(!r||!r.aria)){var e=r.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},X(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function aRe(r){r.registerPreprocessor(nRe),r.registerVisual(r.PRIORITY.VISUAL.ARIA,rRe)}var GG={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},iRe=function(){function r(e){var t=this._condVal=dt(e)?new RegExp(e):mve(e)?e:null;if(t==null){var n="";Or(n)}}return r.prototype.evaluate=function(e){var t=typeof e;return dt(t)?this._condVal.test(e):Br(t)?this._condVal.test(e+""):!1},r}(),sRe=function(){function r(){}return r.prototype.evaluate=function(){return this.value},r}(),oRe=function(){function r(){}return r.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},r}(),lRe=function(){function r(){}return r.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},r}(),cRe=function(){function r(){}return r.prototype.evaluate=function(){return!this.child.evaluate()},r}(),uRe=function(){function r(){}return r.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,n=t(this.valueGetterParam),a=e?this.valueParser(n):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(e?a:n))return!1;return!0},r}();function Mj(r,e){if(r===!0||r===!1){var t=new sRe;return t.value=r,t}var n="";return Gie(r)||Or(n),r.and?VG("and",r,e):r.or?VG("or",r,e):r.not?hRe(r,e):dRe(r,e)}function VG(r,e,t){var n=e[r],a="";$e(n)||Or(a),n.length||Or(a);var i=r==="and"?new oRe:new lRe;return i.children=We(n,function(s){return Mj(s,t)}),i.children.length||Or(a),i}function hRe(r,e){var t=r.not,n="";Gie(t)||Or(n);var a=new cRe;return a.child=Mj(t,e),a.child||Or(n),a}function dRe(r,e){for(var t="",n=e.prepareGetValue(r),a=[],i=pr(r),s=r.parser,o=s?Cte(s):null,l=0;l<i.length;l++){var c=i[l];if(!(c==="parser"||e.valueGetterAttrMap.get(c))){var u=vt(GG,c)?GG[c]:c,h=r[c],d=o?o(h):h,A=ebe(u,d)||u==="reg"&&new iRe(d);A||Or(t),a.push(A)}}a.length||Or(t);var g=new uRe;return g.valueGetterParam=n,g.valueParser=o,g.getValue=e.getValue,g.subCondList=a,g}function Gie(r){return Pt(r)&&!Ki(r)}var ARe=function(){function r(e,t){this._cond=Mj(e,t)}return r.prototype.evaluate=function(){return this._cond.evaluate()},r}();function fRe(r,e){return new ARe(r,e)}var gRe={type:"echarts:filter",transform:function(r){for(var e=r.upstream,t,n=fRe(r.config,{valueGetterAttrMap:bt({dimension:!0}),prepareGetValue:function(o){var l="",c=o.dimension;vt(o,"dimension")||Or(l);var u=e.getDimensionInfo(c);return u||Or(l),{dimIdx:u.index}},getValue:function(o){return e.retrieveValueFromItem(t,o.dimIdx)}}),a=[],i=0,s=e.count();i<s;i++)t=e.getRawDataItem(i),n.evaluate()&&a.push(t);return{data:a}}},pRe={type:"echarts:sort",transform:function(r){var e=r.upstream,t=r.config,n="",a=Xr(t);a.length||Or(n);var i=[];X(a,function(u){var h=u.dimension,d=u.order,A=u.parser,g=u.incomparable;if(h==null&&Or(n),d!=="asc"&&d!=="desc"&&Or(n),g&&g!=="min"&&g!=="max"){var p="";Or(p)}if(d!=="asc"&&d!=="desc"){var v="";Or(v)}var m=e.getDimensionInfo(h);m||Or(n);var y=A?Cte(A):null;A&&!y&&Or(n),i.push({dimIdx:m.index,parser:y,comparator:new Nte(d,g)})});var s=e.sourceFormat;s!==Wi&&s!==xl&&Or(n);for(var o=[],l=0,c=e.count();l<c;l++)o.push(e.getRawDataItem(l));return o.sort(function(u,h){for(var d=0;d<i.length;d++){var A=i[d],g=e.retrieveValueFromItem(u,A.dimIdx),p=e.retrieveValueFromItem(h,A.dimIdx);A.parser&&(g=A.parser(g),p=A.parser(p));var v=A.comparator.evaluate(g,p);if(v!==0)return v}return 0}),{data:o}}};function mRe(r){r.registerTransform(gRe),r.registerTransform(pRe)}var vRe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,n,a){r.prototype.init.call(this,t,n,a),this._sourceManager=new Dte(this),KH(this)},e.prototype.mergeOption=function(t,n){r.prototype.mergeOption.call(this,t,n),KH(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Jc},e}(gr),yRe=function(r){Pe(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e}(Gn);function xRe(r){r.registerComponentModel(vRe),r.registerComponentView(yRe)}var Bc=ou.CMD;function Cv(r,e){return Math.abs(r-e)<1e-5}function lL(r){var e=r.data,t=r.len(),n=[],a,i=0,s=0,o=0,l=0;function c(R,M){a&&a.length>2&&n.push(a),a=[R,M]}function u(R,M,k,O){Cv(R,k)&&Cv(M,O)||a.push(R,M,k,O,k,O)}function h(R,M,k,O,Q,H){var W=Math.abs(M-R),te=Math.tan(W/4)*4/3,ee=M<R?-1:1,j=Math.cos(R),G=Math.sin(R),Y=Math.cos(M),Z=Math.sin(M),de=j*Q+k,he=G*H+O,fe=Y*Q+k,q=Z*H+O,ge=Q*te*ee,me=H*te*ee;a.push(de-ge*G,he+me*j,fe+ge*Z,q-me*Y,fe,q)}for(var d,A,g,p,v=0;v<t;){var m=e[v++],y=v===1;switch(y&&(i=e[v],s=e[v+1],o=i,l=s,(m===Bc.L||m===Bc.C||m===Bc.Q)&&(a=[o,l])),m){case Bc.M:i=o=e[v++],s=l=e[v++],c(o,l);break;case Bc.L:d=e[v++],A=e[v++],u(i,s,d,A),i=d,s=A;break;case Bc.C:a.push(e[v++],e[v++],e[v++],e[v++],i=e[v++],s=e[v++]);break;case Bc.Q:d=e[v++],A=e[v++],g=e[v++],p=e[v++],a.push(i+2/3*(d-i),s+2/3*(A-s),g+2/3*(d-g),p+2/3*(A-p),g,p),i=g,s=p;break;case Bc.A:var x=e[v++],b=e[v++],S=e[v++],_=e[v++],C=e[v++],w=e[v++]+C;v+=1;var B=!e[v++];d=Math.cos(C)*S+x,A=Math.sin(C)*_+b,y?(o=d,l=A,c(o,l)):u(i,s,d,A),i=Math.cos(w)*S+x,s=Math.sin(w)*_+b;for(var D=(B?-1:1)*Math.PI/2,T=C;B?T>w:T<w;T+=D){var E=B?Math.max(T+D,w):Math.min(T+D,w);h(T,E,x,b,S,_)}break;case Bc.R:o=i=e[v++],l=s=e[v++],d=o+e[v++],A=l+e[v++],c(d,l),u(d,l,d,A),u(d,A,o,A),u(o,A,o,l),u(o,l,d,l);break;case Bc.Z:a&&u(i,s,o,l),i=o,s=l;break}}return a&&a.length>2&&n.push(a),n}function cL(r,e,t,n,a,i,s,o,l,c){if(Cv(r,t)&&Cv(e,n)&&Cv(a,s)&&Cv(i,o)){l.push(s,o);return}var u=2/c,h=u*u,d=s-r,A=o-e,g=Math.sqrt(d*d+A*A);d/=g,A/=g;var p=t-r,v=n-e,m=a-s,y=i-o,x=p*p+v*v,b=m*m+y*y;if(x<h&&b<h){l.push(s,o);return}var S=d*p+A*v,_=-d*m-A*y,C=x-S*S,w=b-_*_;if(C<h&&S>=0&&w<h&&_>=0){l.push(s,o);return}var B=[],D=[];HA(r,t,a,s,.5,B),HA(e,n,i,o,.5,D),cL(B[0],D[0],B[1],D[1],B[2],D[2],B[3],D[3],l,c),cL(B[4],D[4],B[5],D[5],B[6],D[6],B[7],D[7],l,c)}function bRe(r,e){var t=lL(r),n=[];e=e||1;for(var a=0;a<t.length;a++){var i=t[a],s=[],o=i[0],l=i[1];s.push(o,l);for(var c=2;c<i.length;){var u=i[c++],h=i[c++],d=i[c++],A=i[c++],g=i[c++],p=i[c++];cL(o,l,u,h,d,A,g,p,s,e),o=g,l=p}n.push(s)}return n}function Vie(r,e,t){var n=r[e],a=r[1-e],i=Math.abs(n/a),s=Math.ceil(Math.sqrt(i*t)),o=Math.floor(t/s);o===0&&(o=1,s=t);for(var l=[],c=0;c<s;c++)l.push(o);var u=s*o,h=t-u;if(h>0)for(var c=0;c<h;c++)l[c%s]+=1;return l}function $G(r,e,t){for(var n=r.r0,a=r.r,i=r.startAngle,s=r.endAngle,o=Math.abs(s-i),l=o*a,c=a-n,u=l>Math.abs(c),h=Vie([l,c],u?0:1,e),d=(u?o:c)/h.length,A=0;A<h.length;A++)for(var g=(u?c:o)/h[A],p=0;p<h[A];p++){var v={};u?(v.startAngle=i+d*A,v.endAngle=i+d*(A+1),v.r0=n+g*p,v.r=n+g*(p+1)):(v.startAngle=i+g*p,v.endAngle=i+g*(p+1),v.r0=n+d*A,v.r=n+d*(A+1)),v.clockwise=r.clockwise,v.cx=r.cx,v.cy=r.cy,t.push(v)}}function wRe(r,e,t){for(var n=r.width,a=r.height,i=n>a,s=Vie([n,a],i?0:1,e),o=i?"width":"height",l=i?"height":"width",c=i?"x":"y",u=i?"y":"x",h=r[o]/s.length,d=0;d<s.length;d++)for(var A=r[l]/s[d],g=0;g<s[d];g++){var p={};p[c]=d*h,p[u]=g*A,p[o]=h,p[l]=A,p.x+=r.x,p.y+=r.y,t.push(p)}}function KG(r,e,t,n){return r*n-t*e}function SRe(r,e,t,n,a,i,s,o){var l=t-r,c=n-e,u=s-a,h=o-i,d=KG(u,h,l,c);if(Math.abs(d)<1e-6)return null;var A=r-a,g=e-i,p=KG(A,g,u,h)/d;return p<0||p>1?null:new Xt(p*l+r,p*c+e)}function _Re(r,e,t){var n=new Xt;Xt.sub(n,t,e),n.normalize();var a=new Xt;Xt.sub(a,r,e);var i=a.dot(n);return i}function Um(r,e){var t=r[r.length-1];t&&t[0]===e[0]&&t[1]===e[1]||r.push(e)}function CRe(r,e,t){for(var n=r.length,a=[],i=0;i<n;i++){var s=r[i],o=r[(i+1)%n],l=SRe(s[0],s[1],o[0],o[1],e.x,e.y,t.x,t.y);l&&a.push({projPt:_Re(l,e,t),pt:l,idx:i})}if(a.length<2)return[{points:r},{points:r}];a.sort(function(v,m){return v.projPt-m.projPt});var c=a[0],u=a[a.length-1];if(u.idx<c.idx){var h=c;c=u,u=h}for(var d=[c.pt.x,c.pt.y],A=[u.pt.x,u.pt.y],g=[d],p=[A],i=c.idx+1;i<=u.idx;i++)Um(g,r[i].slice());Um(g,A),Um(g,d);for(var i=u.idx+1;i<=c.idx+n;i++)Um(p,r[i%n].slice());return Um(p,d),Um(p,A),[{points:g},{points:p}]}function WG(r){var e=r.points,t=[],n=[];IN(e,t,n);var a=new Zt(t[0],t[1],n[0]-t[0],n[1]-t[1]),i=a.width,s=a.height,o=a.x,l=a.y,c=new Xt,u=new Xt;return i>s?(c.x=u.x=o+i/2,c.y=l,u.y=l+s):(c.y=u.y=l+s/2,c.x=o,u.x=o+i),CRe(e,c,u)}function JC(r,e,t,n){if(t===1)n.push(e);else{var a=Math.floor(t/2),i=r(e);JC(r,i[0],a,n),JC(r,i[1],t-a,n)}return n}function BRe(r,e){for(var t=[],n=0;n<e;n++)t.push(Yk(r));return t}function NRe(r,e){e.setStyle(r.style),e.z=r.z,e.z2=r.z2,e.zlevel=r.zlevel}function TRe(r){for(var e=[],t=0;t<r.length;)e.push([r[t++],r[t++]]);return e}function IRe(r,e){var t=[],n=r.shape,a;switch(r.type){case"rect":wRe(n,e,t),a=br;break;case"sector":$G(n,e,t),a=ms;break;case"circle":$G({r0:0,r:n.r,startAngle:0,endAngle:Math.PI*2,cx:n.cx,cy:n.cy},e,t),a=ms;break;default:var i=r.getComputedTransform(),s=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,o=We(bRe(r.getUpdatedPathProxy(),s),function(m){return TRe(m)}),l=o.length;if(l===0)JC(WG,{points:o[0]},e,t);else if(l===e)for(var c=0;c<l;c++)t.push({points:o[c]});else{var u=0,h=We(o,function(m){var y=[],x=[];IN(m,y,x);var b=(x[1]-y[1])*(x[0]-y[0]);return u+=b,{poly:m,area:b}});h.sort(function(m,y){return y.area-m.area});for(var d=e,c=0;c<l;c++){var A=h[c];if(d<=0)break;var g=c===l-1?d:Math.ceil(A.area/u*e);g<0||(JC(WG,{points:A.poly},g,t),d-=g)}}a=vs;break}if(!a)return BRe(r,e);for(var p=[],c=0;c<t.length;c++){var v=new a;v.setShape(t[c]),NRe(r,v),p.push(v)}return p}function ERe(r,e){var t=r.length,n=e.length;if(t===n)return[r,e];for(var a=[],i=[],s=t<n?r:e,o=Math.min(t,n),l=Math.abs(n-t)/6,c=(o-2)/6,u=Math.ceil(l/c)+1,h=[s[0],s[1]],d=l,A=2;A<o;){var g=s[A-2],p=s[A-1],v=s[A++],m=s[A++],y=s[A++],x=s[A++],b=s[A++],S=s[A++];if(d<=0){h.push(v,m,y,x,b,S);continue}for(var _=Math.min(d,u-1)+1,C=1;C<=_;C++){var w=C/_;HA(g,v,y,b,w,a),HA(p,m,x,S,w,i),g=a[3],p=i[3],h.push(a[1],i[1],a[2],i[2],g,p),v=a[5],m=i[5],y=a[6],x=i[6]}d-=_-1}return s===r?[h,e]:[r,h]}function qG(r,e){for(var t=r.length,n=r[t-2],a=r[t-1],i=[],s=0;s<e.length;)i[s++]=n,i[s++]=a;return i}function DRe(r,e){for(var t,n,a,i=[],s=[],o=0;o<Math.max(r.length,e.length);o++){var l=r[o],c=e[o],u=void 0,h=void 0;l?c?(t=ERe(l,c),u=t[0],h=t[1],n=u,a=h):(h=qG(a||l,l),u=l):(u=qG(n||c,c),h=c),i.push(u),s.push(h)}return[i,s]}function YG(r){for(var e=0,t=0,n=0,a=r.length,i=0,s=a-2;i<a;s=i,i+=2){var o=r[s],l=r[s+1],c=r[i],u=r[i+1],h=o*u-c*l;e+=h,t+=(o+c)*h,n+=(l+u)*h}return e===0?[r[0]||0,r[1]||0]:[t/e/3,n/e/3,e]}function MRe(r,e,t,n){for(var a=(r.length-2)/6,i=1/0,s=0,o=r.length,l=o-2,c=0;c<a;c++){for(var u=c*6,h=0,d=0;d<o;d+=2){var A=d===0?u:(u+d-2)%l+2,g=r[A]-t[0],p=r[A+1]-t[1],v=e[d]-n[0],m=e[d+1]-n[1],y=v-g,x=m-p;h+=y*y+x*x}h<i&&(i=h,s=c)}return s}function RRe(r){for(var e=[],t=r.length,n=0;n<t;n+=2)e[n]=r[t-n-2],e[n+1]=r[t-n-1];return e}function LRe(r,e,t,n){for(var a=[],i,s=0;s<r.length;s++){var o=r[s],l=e[s],c=YG(o),u=YG(l);i==null&&(i=c[2]<0!=u[2]<0);var h=[],d=[],A=0,g=1/0,p=[],v=o.length;i&&(o=RRe(o));for(var m=MRe(o,l,c,u)*6,y=v-2,x=0;x<y;x+=2){var b=(m+x)%y+2;h[x+2]=o[b]-c[0],h[x+3]=o[b+1]-c[1]}h[0]=o[m]-c[0],h[1]=o[m+1]-c[1];for(var S=n/t,_=-n/2;_<=n/2;_+=S){for(var C=Math.sin(_),w=Math.cos(_),B=0,x=0;x<o.length;x+=2){var D=h[x],T=h[x+1],E=l[x]-u[0],R=l[x+1]-u[1],M=E*w-R*C,k=E*C+R*w;p[x]=M,p[x+1]=k;var O=M-D,Q=k-T;B+=O*O+Q*Q}if(B<g){g=B,A=_;for(var H=0;H<p.length;H++)d[H]=p[H]}}a.push({from:h,to:d,fromCp:c,toCp:u,rotation:-A})}return a}function eB(r){return r.__isCombineMorphing}var $ie="__mOriginal_";function tB(r,e,t){var n=$ie+e,a=r[n]||r[e];r[n]||(r[n]=r[e]);var i=t.replace,s=t.after,o=t.before;r[e]=function(){var l=arguments,c;return o&&o.apply(this,l),i?c=i.apply(this,l):c=a.apply(this,l),s&&s.apply(this,l),c}}function F1(r,e){var t=$ie+e;r[t]&&(r[e]=r[t],r[t]=null)}function XG(r,e){for(var t=0;t<r.length;t++)for(var n=r[t],a=0;a<n.length;){var i=n[a],s=n[a+1];n[a++]=e[0]*i+e[2]*s+e[4],n[a++]=e[1]*i+e[3]*s+e[5]}}function Kie(r,e){var t=r.getUpdatedPathProxy(),n=e.getUpdatedPathProxy(),a=DRe(lL(t),lL(n)),i=a[0],s=a[1],o=r.getComputedTransform(),l=e.getComputedTransform();function c(){this.transform=null}o&&XG(i,o),l&&XG(s,l),tB(e,"updateTransform",{replace:c}),e.transform=null;var u=LRe(i,s,10,Math.PI),h=[];tB(e,"buildPath",{replace:function(d){for(var A=e.__morphT,g=1-A,p=[],v=0;v<u.length;v++){var m=u[v],y=m.from,x=m.to,b=m.rotation*A,S=m.fromCp,_=m.toCp,C=Math.sin(b),w=Math.cos(b);W_(p,S,_,A);for(var B=0;B<y.length;B+=2){var D=y[B],T=y[B+1],E=x[B],R=x[B+1],M=D*g+E*A,k=T*g+R*A;h[B]=M*w-k*C+p[0],h[B+1]=M*C+k*w+p[1]}var O=h[0],Q=h[1];d.moveTo(O,Q);for(var B=2;B<y.length;){var E=h[B++],R=h[B++],H=h[B++],W=h[B++],te=h[B++],ee=h[B++];O===E&&Q===R&&H===te&&W===ee?d.lineTo(te,ee):d.bezierCurveTo(E,R,H,W,te,ee),O=te,Q=ee}}}})}function Rj(r,e,t){if(!r||!e)return e;var n=t.done,a=t.during;Kie(r,e),e.__morphT=0;function i(){F1(e,"buildPath"),F1(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},Lt({during:function(s){e.dirtyShape(),a&&a(s)},done:function(){i(),n&&n()}},t)),e}function PRe(r,e,t,n,a,i){var s=16;r=a===t?0:Math.round(32767*(r-t)/(a-t)),e=i===n?0:Math.round(32767*(e-n)/(i-n));for(var o=0,l,c=(1<<s)/2;c>0;c/=2){var u=0,h=0;(r&c)>0&&(u=1),(e&c)>0&&(h=1),o+=c*c*(3*u^h),h===0&&(u===1&&(r=c-1-r,e=c-1-e),l=r,r=e,e=l)}return o}function rB(r){var e=1/0,t=1/0,n=-1/0,a=-1/0,i=We(r,function(o){var l=o.getBoundingRect(),c=o.getComputedTransform(),u=l.x+l.width/2+(c?c[4]:0),h=l.y+l.height/2+(c?c[5]:0);return e=Math.min(u,e),t=Math.min(h,t),n=Math.max(u,n),a=Math.max(h,a),[u,h]}),s=We(i,function(o,l){return{cp:o,z:PRe(o[0],o[1],e,t,n,a),path:r[l]}});return s.sort(function(o,l){return o.z-l.z}).map(function(o){return o.path})}function Wie(r){return IRe(r.path,r.count)}function uL(){return{fromIndividuals:[],toIndividuals:[],count:0}}function kRe(r,e,t){var n=[];function a(S){for(var _=0;_<S.length;_++){var C=S[_];eB(C)?a(C.childrenRef()):C instanceof hr&&n.push(C)}}a(r);var i=n.length;if(!i)return uL();var s=t.dividePath||Wie,o=s({path:e,count:i});if(o.length!==i)return console.error("Invalid morphing: unmatched splitted path"),uL();n=rB(n),o=rB(o);for(var l=t.done,c=t.during,u=t.individualDelay,h=new rh,d=0;d<i;d++){var A=n[d],g=o[d];g.parent=e,g.copyTransform(h),u||Kie(A,g)}e.__isCombineMorphing=!0,e.childrenRef=function(){return o};function p(S){for(var _=0;_<o.length;_++)o[_].addSelfToZr(S)}tB(e,"addSelfToZr",{after:function(S){p(S)}}),tB(e,"removeSelfFromZr",{after:function(S){for(var _=0;_<o.length;_++)o[_].removeSelfFromZr(S)}});function v(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,F1(e,"addSelfToZr"),F1(e,"removeSelfFromZr")}var m=o.length;if(u)for(var y=m,x=function(){y--,y===0&&(v(),l&&l())},d=0;d<m;d++){var b=u?Lt({delay:(t.delay||0)+u(d,m,n[d],o[d]),done:x},t):t;Rj(n[d],o[d],b)}else e.__morphT=0,e.animateTo({__morphT:1},Lt({during:function(S){for(var _=0;_<m;_++){var C=o[_];C.__morphT=e.__morphT,C.dirtyShape()}c&&c(S)},done:function(){v();for(var S=0;S<r.length;S++)F1(r[S],"updateTransform");l&&l()}},t));return e.__zr&&p(e.__zr),{fromIndividuals:n,toIndividuals:o,count:m}}function FRe(r,e,t){var n=e.length,a=[],i=t.dividePath||Wie;function s(A){for(var g=0;g<A.length;g++){var p=A[g];eB(p)?s(p.childrenRef()):p instanceof hr&&a.push(p)}}if(eB(r)){s(r.childrenRef());var o=a.length;if(o<n)for(var l=0,c=o;c<n;c++)a.push(Yk(a[l++%o]));a.length=n}else{a=i({path:r,count:n});for(var u=r.getComputedTransform(),c=0;c<a.length;c++)a[c].setLocalTransform(u);if(a.length!==n)return console.error("Invalid morphing: unmatched splitted path"),uL()}a=rB(a),e=rB(e);for(var h=t.individualDelay,c=0;c<n;c++){var d=h?Lt({delay:(t.delay||0)+h(c,n,a[c],e[c])},t):t;Rj(a[c],e[c],d)}return{fromIndividuals:a,toIndividuals:e,count:e.length}}function ZG(r){return $e(r[0])}function JG(r,e){for(var t=[],n=r.length,a=0;a<n;a++)t.push({one:r[a],many:[]});for(var a=0;a<e.length;a++){var i=e[a].length,s=void 0;for(s=0;s<i;s++)t[s%n].many.push(e[a][s])}for(var o=0,a=n-1;a>=0;a--)if(!t[a].many.length){var l=t[o].many;if(l.length<=1)if(o)o=0;else return t;var i=l.length,c=Math.ceil(i/2);t[a].many=l.slice(c,i),t[o].many=l.slice(0,c),o++}return t}var jRe={clone:function(r){for(var e=[],t=1-Math.pow(1-r.path.style.opacity,1/r.count),n=0;n<r.count;n++){var a=Yk(r.path);a.setStyle("opacity",t),e.push(a)}return e},split:null};function lD(r,e,t,n,a,i){if(!r.length||!e.length)return;var s=ny("update",n,a);if(!(s&&s.duration>0))return;var o=n.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},s),c,u;ZG(r)&&(c=r,u=e),ZG(e)&&(c=e,u=r);function h(m,y,x,b,S){var _=m.many,C=m.one;if(_.length===1&&!S){var w=y?_[0]:C,B=y?C:_[0];if(eB(w))h({many:[w],one:B},!0,x,b,!0);else{var D=o?Lt({delay:o(x,b)},l):l;Rj(w,B,D),i(w,B,w,B,D)}}else for(var T=Lt({dividePath:jRe[t],individualDelay:o&&function(Q,H,W,te){return o(Q+x,b)}},l),E=y?kRe(_,C,T):FRe(C,_,T),R=E.fromIndividuals,M=E.toIndividuals,k=R.length,O=0;O<k;O++){var D=o?Lt({delay:o(O,k)},l):l;i(R[O],M[O],y?_[O]:m.one,y?m.one:_[O],D)}}for(var d=c?c===r:r.length>e.length,A=c?JG(u,c):JG(d?e:r,[d?r:e]),g=0,p=0;p<A.length;p++)g+=A[p].many.length;for(var v=0,p=0;p<A.length;p++)h(A[p],d,v,g),v+=A[p].many.length}function ug(r){if(!r)return[];if($e(r)){for(var e=[],t=0;t<r.length;t++)e.push(ug(r[t]));return e}var n=[];return r.traverse(function(a){a instanceof hr&&!a.disableMorphing&&!a.invisible&&!a.ignore&&n.push(a)}),n}var qie=1e4,ORe=0,eV=1,tV=2,URe=wr();function HRe(r,e){for(var t=r.dimensions,n=0;n<t.length;n++){var a=r.getDimensionInfo(t[n]);if(a&&a.otherDims[e]===0)return t[n]}}function QRe(r,e,t){var n=r.getDimensionInfo(t),a=n&&n.ordinalMeta;if(n){var i=r.get(n.name,e);return a&&a.categories[i]||i+""}}function rV(r,e,t,n){var a=n?"itemChildGroupId":"itemGroupId",i=HRe(r,a);if(i){var s=QRe(r,e,i);return s}var o=r.getRawDataItem(e),l=n?"childGroupId":"groupId";if(o&&o[l])return o[l]+"";if(!n)return t||r.getId(e)}function nV(r){var e=[];return X(r,function(t){var n=t.data,a=t.dataGroupId;if(!(n.count()>qie))for(var i=n.getIndices(),s=0;s<i.length;s++)e.push({data:n,groupId:rV(n,s,a,!1),childGroupId:rV(n,s,a,!0),divide:t.divide,dataIndex:s})}),e}function cD(r,e,t){r.traverse(function(n){n instanceof hr&&jn(n,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function uD(r){if(r.parent){var e=r.getComputedTransform();r.setLocalTransform(e),r.parent.remove(r)}}function Hm(r){r.stopAnimation(),r.isGroup&&r.traverse(function(e){e.stopAnimation()})}function zRe(r,e,t){var n=ny("update",t,e);n&&r.traverse(function(a){if(a instanceof gl){var i=Fxe(a);i&&a.animateFrom({style:i},n)}})}function GRe(r,e){var t=r.length;if(t!==e.length)return!1;for(var n=0;n<t;n++){var a=r[n],i=e[n];if(a.data.getId(a.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}function Yie(r,e,t){var n=nV(r),a=nV(e);function i(x,b,S,_,C){(S||x)&&b.animateFrom({style:S&&S!==x?He(He({},S.style),x.style):x.style},C)}var s=!1,o=ORe,l=bt(),c=bt();n.forEach(function(x){x.groupId&&l.set(x.groupId,!0),x.childGroupId&&c.set(x.childGroupId,!0)});for(var u=0;u<a.length;u++){var h=a[u].groupId;if(c.get(h)){o=eV;break}var d=a[u].childGroupId;if(d&&l.get(d)){o=tV;break}}function A(x,b){return function(S){var _=S.data,C=S.dataIndex;return b?_.getId(C):x?o===eV?S.childGroupId:S.groupId:o===tV?S.childGroupId:S.groupId}}var g=GRe(n,a),p={};if(!g)for(var u=0;u<a.length;u++){var v=a[u],m=v.data.getItemGraphicEl(v.dataIndex);m&&(p[m.id]=!0)}function y(x,b){var S=n[b],_=a[x],C=_.data.hostModel,w=S.data.getItemGraphicEl(S.dataIndex),B=_.data.getItemGraphicEl(_.dataIndex);if(w===B){B&&zRe(B,_.dataIndex,C);return}w&&p[w.id]||B&&(Hm(B),w?(Hm(w),uD(w),s=!0,lD(ug(w),ug(B),_.divide,C,x,i)):cD(B,C,x))}new Nh(n,a,A(!0,g),A(!1,g),null,"multiple").update(y).updateManyToOne(function(x,b){var S=a[x],_=S.data,C=_.hostModel,w=_.getItemGraphicEl(S.dataIndex),B=Ur(We(b,function(D){return n[D].data.getItemGraphicEl(n[D].dataIndex)}),function(D){return D&&D!==w&&!p[D.id]});w&&(Hm(w),B.length?(X(B,function(D){Hm(D),uD(D)}),s=!0,lD(ug(B),ug(w),S.divide,C,x,i)):cD(w,C,S.dataIndex))}).updateOneToMany(function(x,b){var S=n[b],_=S.data.getItemGraphicEl(S.dataIndex);if(!(_&&p[_.id])){var C=Ur(We(x,function(B){return a[B].data.getItemGraphicEl(a[B].dataIndex)}),function(B){return B&&B!==_}),w=a[x[0]].data.hostModel;C.length&&(X(C,function(B){return Hm(B)}),_?(Hm(_),uD(_),s=!0,lD(ug(_),ug(C),S.divide,w,x[0],i)):X(C,function(B){return cD(B,w,x[0])}))}}).updateManyToMany(function(x,b){new Nh(b,x,function(S){return n[S].data.getId(n[S].dataIndex)},function(S){return a[S].data.getId(a[S].dataIndex)}).update(function(S,_){y(x[S],b[_])}).execute()}).execute(),s&&X(e,function(x){var b=x.data,S=b.hostModel,_=S&&t.getViewOfSeriesModel(S),C=ny("update",S,0);_&&S.isAnimationEnabled()&&C&&C.duration>0&&_.group.traverse(function(w){w instanceof hr&&!w.animators.length&&w.animateFrom({style:{opacity:0}},C)})})}function aV(r){var e=r.getModel("universalTransition").get("seriesKey");return e||r.id}function iV(r){return $e(r)?r.sort().join(","):r}function Hd(r){if(r.hostModel)return r.hostModel.getModel("universalTransition").get("divideShape")}function VRe(r,e){var t=bt(),n=bt(),a=bt();return X(r.oldSeries,function(i,s){var o=r.oldDataGroupIds[s],l=r.oldData[s],c=aV(i),u=iV(c);n.set(u,{dataGroupId:o,data:l}),$e(c)&&X(c,function(h){a.set(h,{key:u,dataGroupId:o,data:l})})}),X(e.updatedSeries,function(i){if(i.isUniversalTransitionEnabled()&&i.isAnimationEnabled()){var s=i.get("dataGroupId"),o=i.getData(),l=aV(i),c=iV(l),u=n.get(c);if(u)t.set(c,{oldSeries:[{dataGroupId:u.dataGroupId,divide:Hd(u.data),data:u.data}],newSeries:[{dataGroupId:s,divide:Hd(o),data:o}]});else if($e(l)){var h=[];X(l,function(g){var p=n.get(g);p.data&&h.push({dataGroupId:p.dataGroupId,divide:Hd(p.data),data:p.data})}),h.length&&t.set(c,{oldSeries:h,newSeries:[{dataGroupId:s,data:o,divide:Hd(o)}]})}else{var d=a.get(l);if(d){var A=t.get(d.key);A||(A={oldSeries:[{dataGroupId:d.dataGroupId,data:d.data,divide:Hd(d.data)}],newSeries:[]},t.set(d.key,A)),A.newSeries.push({dataGroupId:s,data:o,divide:Hd(o)})}}}}),t}function sV(r,e){for(var t=0;t<r.length;t++){var n=e.seriesIndex!=null&&e.seriesIndex===r[t].seriesIndex||e.seriesId!=null&&e.seriesId===r[t].id;if(n)return t}}function $Re(r,e,t,n){var a=[],i=[];X(Xr(r.from),function(s){var o=sV(e.oldSeries,s);o>=0&&a.push({dataGroupId:e.oldDataGroupIds[o],data:e.oldData[o],divide:Hd(e.oldData[o]),groupIdDim:s.dimension})}),X(Xr(r.to),function(s){var o=sV(t.updatedSeries,s);if(o>=0){var l=t.updatedSeries[o].getData();i.push({dataGroupId:e.oldDataGroupIds[o],data:l,divide:Hd(l),groupIdDim:s.dimension})}}),a.length>0&&i.length>0&&Yie(a,i,n)}function KRe(r){r.registerUpdateLifecycle("series:beforeupdate",function(e,t,n){X(Xr(n.seriesTransition),function(a){X(Xr(a.to),function(i){for(var s=n.updatedSeries,o=0;o<s.length;o++)(i.seriesIndex!=null&&i.seriesIndex===s[o].seriesIndex||i.seriesId!=null&&i.seriesId===s[o].id)&&(s[o][i5]=!0)})})}),r.registerUpdateLifecycle("series:transition",function(e,t,n){var a=URe(t);if(a.oldSeries&&n.updatedSeries&&n.optionChanged){var i=n.seriesTransition;if(i)X(Xr(i),function(A){$Re(A,a,n,t)});else{var s=VRe(a,n);X(s.keys(),function(A){var g=s.get(A);Yie(g.oldSeries,g.newSeries,t)})}X(n.updatedSeries,function(A){A[i5]&&(A[i5]=!1)})}for(var o=e.getSeries(),l=a.oldSeries=[],c=a.oldDataGroupIds=[],u=a.oldData=[],h=0;h<o.length;h++){var d=o[h].getData();d.count()<qie&&(l.push(o[h]),c.push(o[h].get("dataGroupId")),u.push(d))}})}sr([n_e]);sr([ZSe]);sr([S_e,j_e,W_e,N5e,j5e,_Ce,ZCe,PBe,nNe,cNe,vNe,dTe,FTe,WTe,uIe,fIe,_Ie,DIe,QIe,WIe,aEe,HEe]);sr(s4e);sr(M4e);sr(Wne);sr(V4e);sr(Rae);sr(q4e);sr(aDe);sr(VDe);sr(uMe);sr(Gw);sr(NMe);sr(EMe);sr(UMe);sr(KMe);sr(JMe);sr(i3e);sr(g3e);sr(R3e);sr(kie);sr(Fie);sr(J3e);sr(Qie);sr(zie);sr(aRe);sr(mRe);sr(xRe);sr(KRe);sr(vSe);const oV=({channel:r="both",title:e})=>{var g,p,v,m;const t=K.useRef(null),n=K.useRef(null),a=ZB(),i=No(),{isSensorContacted:s,leadOffStatus:o}=To(),[l,c]=K.useState(!1),h=!i||!s?r==="ch1"?o.fp1?"poor":"good":r==="ch2"?o.fp2?"poor":"good":o.fp1||o.fp2?"poor":"good":"good";K.useEffect(()=>{var y,x,b,S;console.log("🔧 FilteredRawDataChart EEG 그래프 데이터 상태:",{isConnected:i,eegGraphDataExists:!!a,fp1Length:((y=a==null?void 0:a.fp1)==null?void 0:y.length)||0,fp2Length:((x=a==null?void 0:a.fp2)==null?void 0:x.length)||0,fp1Sample:(b=a==null?void 0:a.fp1)==null?void 0:b[0],fp2Sample:(S=a==null?void 0:a.fp2)==null?void 0:S[0]})},[a,i]);const d=i&&(((g=a==null?void 0:a.fp1)==null?void 0:g.length)>0||((p=a==null?void 0:a.fp2)==null?void 0:p.length)>0),A=K.useMemo(()=>{var y,x,b,S,_,C;if(console.log("🔧 chartData 계산 시작:",{hasEEGGraphData:!!a,fp1Length:((y=a==null?void 0:a.fp1)==null?void 0:y.length)||0,fp2Length:((x=a==null?void 0:a.fp2)==null?void 0:x.length)||0,channel:r,fp1SampleData:(b=a==null?void 0:a.fp1)==null?void 0:b.slice(-3),fp2SampleData:(S=a==null?void 0:a.fp2)==null?void 0:S.slice(-3)}),((_=a==null?void 0:a.fp1)==null?void 0:_.length)>0&&((C=a==null?void 0:a.fp2)==null?void 0:C.length)>0){const w=a.fp1,B=a.fp2,D=w.slice(-1e3).map((E,R)=>[R,E.value]),T=B.slice(-1e3).map((E,R)=>[R,E.value]);return console.log("🔧 chartData 변환 완료 (Index 기반):",{fp1DataLength:D.length,fp2DataLength:T.length,fp1Sample:D[0],fp2Sample:T[0],fp1LastSample:D[D.length-1],fp2LastSample:T[T.length-1],fp1ValueRange:D.length>0?{min:Math.min(...D.map(E=>E[1])),max:Math.max(...D.map(E=>E[1]))}:null,fp2ValueRange:T.length>0?{min:Math.min(...T.map(E=>E[1])),max:Math.max(...T.map(E=>E[1]))}:null}),r==="ch1"?{fp1:D,fp2:[],hasData:D.length>0}:r==="ch2"?{fp1:[],fp2:T,hasData:T.length>0}:{fp1:D,fp2:T,hasData:D.length>0||T.length>0}}return console.log("🔧 chartData 계산 결과: 데이터 없음"),{fp1:[],fp2:[],hasData:!1}},[a,i,r]);if(K.useEffect(()=>{if(!t.current||!d)return;n.current=dy(t.current);const y=[],x=[];(r==="both"||r==="ch1")&&(y.push({name:"채널 1 (FP1)",type:"line",data:[],lineStyle:{color:"#10b981",width:1.5},symbol:"none",animation:!1,sampling:"lttb"}),x.push("채널 1 (FP1)")),(r==="both"||r==="ch2")&&(y.push({name:"채널 2 (FP2)",type:"line",data:[],lineStyle:{color:"#f59e0b",width:1.5},symbol:"none",animation:!1,sampling:"lttb"}),x.push("채널 2 (FP2)"));const b={title:e?{text:e,left:"center",textStyle:{fontSize:14,fontWeight:"normal",color:"#e5e7eb"}}:void 0,tooltip:{trigger:"axis",formatter:_=>{let w=`샘플 #${_[0].value[0]}<br/>`;return _.forEach(B=>{w+=`${B.seriesName}: ${B.value[1].toFixed(2)} μV<br/>`}),w}},legend:x.length>1?{data:x,top:e?30:10}:void 0,grid:{left:"10%",right:"10%",bottom:"15%",top:e?x.length>1?"20%":"15%":x.length>1?"15%":"10%"},xAxis:{type:"value",name:"시간 (최신 4초)",nameLocation:"middle",nameGap:25,axisLabel:{show:!1}},yAxis:{type:"value",name:"전압 (μV)",nameLocation:"middle",nameGap:40,min:-150,max:150,axisLabel:{formatter:"{value} μV"}},series:y,dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"none"}]};n.current.setOption(b),c(!0);const S=()=>{var _;(_=n.current)==null||_.resize()};return window.addEventListener("resize",S),()=>{var _;window.removeEventListener("resize",S),(_=n.current)==null||_.dispose()}},[r,e,d]),K.useEffect(()=>{if(!n.current||!l)return;(()=>{var _;if(!A.hasData)return;const{fp1:x,fp2:b}=A,S=[];r==="both"?(S.push({data:x}),S.push({data:b})):r==="ch1"?S.push({data:x}):r==="ch2"&&S.push({data:b}),console.log("🔧 차트 업데이트 실행:",{channel:r,seriesCount:S.length,fp1DataLength:x.length,fp2DataLength:b.length,seriesUpdate:S.map((C,w)=>({index:w,dataLength:C.data.length}))}),(_=n.current)==null||_.setOption({series:S})})()},[l,A,a,r]),!d){const y=((v=a==null?void 0:a.fp1)==null?void 0:v.length)||0,x=((m=a==null?void 0:a.fp2)==null?void 0:m.length)||0;return f.jsx("div",{className:"w-full h-80 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-6xl mb-4",children:"🧠"}),f.jsx("div",{className:"text-lg text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["연결 후 ",r==="ch1"?"채널 1":r==="ch2"?"채널 2":"뇌파"," 신호를 실시간으로 확인할 수 있습니다"]}),f.jsxs("div",{className:"text-xs text-gray-600 mt-3 p-2 bg-gray-800 rounded",children:["디버그 정보:",f.jsx("br",{}),"연결 상태: ",i?"연결됨":"연결 안됨",f.jsx("br",{}),"FP1 데이터: ",y,"개",f.jsx("br",{}),"FP2 데이터: ",x,"개",f.jsx("br",{}),"EEG 그래프 데이터: ",a?"존재":"없음"]})]})})}return f.jsxs("div",{className:"w-full h-80",children:[i&&h==="poor"&&f.jsxs("div",{className:"mb-2 p-2 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-4 w-4 text-red-400"}),f.jsxs("span",{className:"text-red-300 text-sm",children:[r==="ch1"?"FP1 전극 접촉 불량":r==="ch2"?"FP2 전극 접촉 불량":"전극 접촉 불량 감지","- 신호 품질이 저하될 수 있습니다"]})]}),f.jsx("div",{ref:t,className:"w-full h-full"})]})},lV=({channel:r="both",title:e})=>{var h,d,A,g,p,v,m,y;const t=K.useRef(null),n=K.useRef(null),a=rN(),i=No(),[s,o]=K.useState(!1),l=((h=a==null?void 0:a.ch1SQI)==null?void 0:h.length)>0||((d=a==null?void 0:a.ch2SQI)==null?void 0:d.length)>0;console.log("🔧 SignalQualityChart 데이터 상태:",{isConnected:i,hasEEGSQIData:!!a,ch1SQILength:((A=a==null?void 0:a.ch1SQI)==null?void 0:A.length)||0,ch2SQILength:((g=a==null?void 0:a.ch2SQI)==null?void 0:g.length)||0,hasRealData:l,ch1SQISample:(p=a==null?void 0:a.ch1SQI)==null?void 0:p.slice(0,3),ch2SQISample:(v=a==null?void 0:a.ch2SQI)==null?void 0:v.slice(0,3)});const c=K.useMemo(()=>{const x=[],b=[];return(r==="both"||r==="ch1")&&(x.push({name:"채널 1 SQI (FP1)",type:"line",data:[],lineStyle:{color:"#10b981",width:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(16, 185, 129, 0.3)"},{offset:1,color:"rgba(16, 185, 129, 0.1)"}]}},symbol:"none",animation:!1}),b.push("채널 1 SQI (FP1)")),(r==="both"||r==="ch2")&&(x.push({name:"채널 2 SQI (FP2)",type:"line",data:[],lineStyle:{color:"#f59e0b",width:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(245, 158, 11, 0.3)"},{offset:1,color:"rgba(245, 158, 11, 0.1)"}]}},symbol:"none",animation:!1}),b.push("채널 2 SQI (FP2)")),{title:e?{text:e,left:"center",textStyle:{fontSize:14,fontWeight:"normal",color:"#e5e7eb"}}:void 0,tooltip:{trigger:"axis",formatter:S=>{let C=`샘플 #${S[0].value[0]}<br/>`;return S.forEach(w=>{C+=`${w.seriesName}: ${w.value[1].toFixed(1)}%<br/>`}),C}},legend:b.length>1?{data:b,top:e?30:10}:void 0,grid:{left:"10%",right:"10%",bottom:"15%",top:e?b.length>1?"20%":"15%":b.length>1?"15%":"10%"},xAxis:{type:"value",name:"시간 (최신 4초)",nameLocation:"middle",nameGap:25,axisLabel:{show:!1}},yAxis:{type:"value",name:"신호 품질 (%)",nameLocation:"middle",nameGap:40,min:0,max:100,axisLabel:{formatter:"{value}%"}},series:x,dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"none"}]}},[r,e]),u=K.useMemo(()=>{var S,_;if(console.log("🔧 SignalQualityChart chartData 계산:",{hasEEGSQIData:!!a,hasRealData:l,ch1SQILength:((S=a==null?void 0:a.ch1SQI)==null?void 0:S.length)||0,ch2SQILength:((_=a==null?void 0:a.ch2SQI)==null?void 0:_.length)||0}),!a)return console.log("🔧 SignalQualityChart: eegSQIData 없음"),{ch1:[],ch2:[],hasData:!1};if(!l)return console.log("🔧 SignalQualityChart: SQI 데이터 없음"),{ch1:[],ch2:[],hasData:!1};const x=a.ch1SQI.slice(-1e3).map((C,w)=>[w,C.value]),b=a.ch2SQI.slice(-1e3).map((C,w)=>[w,C.value]);return console.log("🔧 SignalQualityChart chartData 생성 완료:",{ch1DataLength:x.length,ch2DataLength:b.length,ch1Sample:x.slice(0,3),ch2Sample:b.slice(0,3),hasData:x.length>0||b.length>0}),{ch1:x,ch2:b,hasData:x.length>0||b.length>0}},[a,l]);if(K.useEffect(()=>{if(!t.current)return;n.current=dy(t.current),n.current.setOption(c),o(!0);const x=()=>{var b;(b=n.current)==null||b.resize()};return window.addEventListener("resize",x),()=>{var b;window.removeEventListener("resize",x),(b=n.current)==null||b.dispose()}},[c]),K.useEffect(()=>{if(!n.current||!s)return;(()=>{var C;if(console.log("🔧 SignalQualityChart updateChart 호출:",{hasChartData:u.hasData,ch1Length:u.ch1.length,ch2Length:u.ch2.length,channel:r}),!u.hasData){console.log("🔧 SignalQualityChart: 차트 데이터 없음, 업데이트 스킵");return}const{ch1:b,ch2:S}=u,_=[];(r==="both"||r==="ch1")&&(_.push({data:b}),console.log("🔧 SignalQualityChart: Ch1 데이터 추가",b.slice(0,3))),(r==="both"||r==="ch2")&&(_.push({data:S}),console.log("🔧 SignalQualityChart: Ch2 데이터 추가",S.slice(0,3))),console.log("🔧 SignalQualityChart: 차트 업데이트 실행",{seriesCount:_.length,totalDataPoints:_.reduce((w,B)=>w+B.data.length,0)}),(C=n.current)==null||C.setOption({series:_})})()},[s,u.hasData,u.ch1,u.ch2,r]),!l){const x=((m=a==null?void 0:a.ch1SQI)==null?void 0:m.length)||0,b=((y=a==null?void 0:a.ch2SQI)==null?void 0:y.length)||0;return f.jsx("div",{className:"w-full h-80 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-6xl mb-4",children:"📈"}),f.jsx("div",{className:"text-lg text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["연결 후 ",r==="ch1"?"채널 1":r==="ch2"?"채널 2":"신호 품질","을 실시간으로 확인할 수 있습니다"]}),f.jsxs("div",{className:"text-xs text-gray-600 mt-3 p-2 bg-gray-800 rounded",children:["디버그 정보:",f.jsx("br",{}),"연결 상태: ",i?"연결됨":"연결 안됨",f.jsx("br",{}),"Ch1 SQI 데이터: ",x,"개",f.jsx("br",{}),"Ch2 SQI 데이터: ",b,"개",f.jsx("br",{}),"EEG 데이터 기반 SQI 계산 중..."]})]})})}return f.jsx("div",{className:"w-full h-80",children:f.jsx("div",{ref:t,className:"w-full h-full"})})},WRe=()=>{var l,c,u,h,d,A;const r=K.useRef(null),e=K.useRef(null),t=K0(),n=No(),{isSensorContacted:a,leadOffStatus:i}=To(),[s,o]=K.useState(!1);return K.useEffect(()=>{if(!r.current)return;e.current=dy(r.current);const g={title:{text:"파워 스펙트럼 (필터링된 EEG 데이터)",left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"axis",formatter:v=>{let y=`주파수: ${v[0].value[0].toFixed(1)} Hz<br/>`;return v.forEach(x=>{y+=`${x.seriesName}: ${x.value[1].toFixed(2)} dB<br/>`}),y}},legend:{data:["FP1 (Ch1)","FP2 (Ch2)"],top:30},grid:{left:"10%",right:"10%",bottom:"15%",top:"15%"},xAxis:{type:"value",name:"주파수 (Hz)",nameLocation:"middle",nameGap:25,min:1,max:45,axisLabel:{formatter:"{value} Hz"}},yAxis:{type:"value",name:"파워 (dB)",nameLocation:"middle",nameGap:50,min:0,max:85,axisLabel:{formatter:v=>v.toFixed(1)+" dB"}},series:[{name:"FP1 (Ch1)",type:"line",data:[],lineStyle:{color:"#3b82f6",width:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.3)"},{offset:1,color:"rgba(59, 130, 246, 0.1)"}]}},symbol:"none",animation:!1,smooth:!0},{name:"FP2 (Ch2)",type:"line",data:[],lineStyle:{color:"#ef4444",width:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(239, 68, 68, 0.3)"},{offset:1,color:"rgba(239, 68, 68, 0.1)"}]}},symbol:"none",animation:!1,smooth:!0}],markArea:{silent:!0,data:[[{name:"Delta",xAxis:1,itemStyle:{color:"rgba(139, 69, 19, 0.1)"}},{xAxis:4}],[{name:"Theta",xAxis:4,itemStyle:{color:"rgba(255, 140, 0, 0.1)"}},{xAxis:8}],[{name:"Alpha",xAxis:8,itemStyle:{color:"rgba(50, 205, 50, 0.1)"}},{xAxis:13}],[{name:"Beta",xAxis:13,itemStyle:{color:"rgba(30, 144, 255, 0.1)"}},{xAxis:30}],[{name:"Gamma",xAxis:30,itemStyle:{color:"rgba(148, 0, 211, 0.1)"}},{xAxis:45}]]}};e.current.setOption(g),o(!0);const p=()=>{var v;(v=e.current)==null||v.resize()};return window.addEventListener("resize",p),()=>{var v;window.removeEventListener("resize",p),(v=e.current)==null||v.dispose()}},[]),K.useEffect(()=>{if(console.log("🔧 PowerSpectrumChart useEffect 호출:",{hasChartInstance:!!e.current,isInitialized:s,hasEEGAnalysis:!!t}),!e.current||!s){console.log("🔧 PowerSpectrumChart: 차트 인스턴스 또는 초기화 상태 확인 실패");return}(()=>{var b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j;if(console.log("🔧 PowerSpectrumChart 데이터 상태:",{hasEEGAnalysis:!!t,hasFrequencySpectrum:!!(t!=null&&t.frequencySpectrum),frequencySpectrumKeys:t!=null&&t.frequencySpectrum?Object.keys(t.frequencySpectrum):null,hasFrequencies:!!((b=t==null?void 0:t.frequencySpectrum)!=null&&b.frequencies),hasCh1Power:!!((S=t==null?void 0:t.frequencySpectrum)!=null&&S.ch1Power),hasCh2Power:!!((_=t==null?void 0:t.frequencySpectrum)!=null&&_.ch2Power),frequenciesLength:((w=(C=t==null?void 0:t.frequencySpectrum)==null?void 0:C.frequencies)==null?void 0:w.length)||0,ch1PowerLength:((D=(B=t==null?void 0:t.frequencySpectrum)==null?void 0:B.ch1Power)==null?void 0:D.length)||0,ch2PowerLength:((E=(T=t==null?void 0:t.frequencySpectrum)==null?void 0:T.ch2Power)==null?void 0:E.length)||0,frequenciesSample:(M=(R=t==null?void 0:t.frequencySpectrum)==null?void 0:R.frequencies)==null?void 0:M.slice(0,5),ch1PowerSample:(O=(k=t==null?void 0:t.frequencySpectrum)==null?void 0:k.ch1Power)==null?void 0:O.slice(0,5),ch2PowerSample:(H=(Q=t==null?void 0:t.frequencySpectrum)==null?void 0:Q.ch2Power)==null?void 0:H.slice(0,5),isConnected:n,isSensorContacted:a,leadOffStatus:i}),!((W=t==null?void 0:t.frequencySpectrum)!=null&&W.frequencies)||!((te=t==null?void 0:t.frequencySpectrum)!=null&&te.ch1Power)||!((ee=t==null?void 0:t.frequencySpectrum)!=null&&ee.ch2Power)){console.log("🔧 PowerSpectrumChart: 주파수 스펙트럼 데이터 없음, 차트 업데이트 스킵");return}const{frequencies:p,ch1Power:v,ch2Power:m}=t.frequencySpectrum;if(!Array.isArray(p)||!Array.isArray(v)||!Array.isArray(m)||p.length!==v.length||p.length!==m.length){console.log("🔧 PowerSpectrumChart: 데이터 검증 실패",{frequenciesIsArray:Array.isArray(p),ch1PowerIsArray:Array.isArray(v),ch2PowerIsArray:Array.isArray(m),lengthMatch:(p==null?void 0:p.length)===(v==null?void 0:v.length)&&(p==null?void 0:p.length)===(m==null?void 0:m.length)});return}const y=p.map((G,Y)=>[G,v[Y]]),x=p.map((G,Y)=>[G,m[Y]]);console.log("🔧 PowerSpectrumChart 차트 업데이트:",{ch1SpectrumDataLength:y.length,ch2SpectrumDataLength:x.length,ch1SpectrumDataSample:y.slice(0,5),ch2SpectrumDataSample:x.slice(0,5)}),(j=e.current)==null||j.setOption({series:[{name:"FP1 (Ch1)",data:y,type:"line",smooth:!0,lineStyle:{color:"#3b82f6",width:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(59, 130, 246, 0.3)"},{offset:1,color:"rgba(59, 130, 246, 0.1)"}]}},symbol:"none",animation:!1},{name:"FP2 (Ch2)",data:x,type:"line",smooth:!0,lineStyle:{color:"#ef4444",width:2},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(239, 68, 68, 0.3)"},{offset:1,color:"rgba(239, 68, 68, 0.1)"}]}},symbol:"none",animation:!1}]})})()},[s,(l=t==null?void 0:t.frequencySpectrum)==null?void 0:l.frequencies,(c=t==null?void 0:t.frequencySpectrum)==null?void 0:c.ch1Power,(u=t==null?void 0:t.frequencySpectrum)==null?void 0:u.ch2Power]),!n||!((h=t==null?void 0:t.frequencySpectrum)!=null&&h.frequencies)||!((d=t==null?void 0:t.frequencySpectrum)!=null&&d.ch1Power)||!((A=t==null?void 0:t.frequencySpectrum)!=null&&A.ch2Power)?f.jsx("div",{className:"w-full h-80 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-6xl mb-4",children:"🌈"}),f.jsx("div",{className:"text-lg text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"연결 후 파워 스펙트럼을 실시간으로 확인할 수 있습니다"}),f.jsx("div",{className:"text-xs text-gray-600 mt-3 p-2 bg-gray-800 rounded",children:"EEG 데이터 기반 주파수 스펙트럼 분석 중..."})]})}):f.jsxs("div",{className:"w-full",children:[n&&!a&&f.jsxs("div",{className:"mb-3 p-2 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-4 w-4 text-red-400"}),f.jsxs("span",{className:"text-red-300 text-sm",children:["전극 접촉 불량 (FP1: ",i.fp1?"OFF":"ON",", FP2: ",i.fp2?"OFF":"ON",") - 파워 스펙트럼 분석 정확도가 저하될 수 있습니다"]})]}),f.jsx("div",{ref:r,className:"w-full h-80",style:{minHeight:"320px"}}),f.jsx("div",{className:"mt-2 text-xs text-gray-400 text-center",children:"EEG 데이터 기반 실시간 파워 스펙트럼 분석 • Morlet Wavelet 변환"}),f.jsxs("div",{className:"mt-2 flex justify-center space-x-4 text-xs",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-1"}),f.jsx("span",{className:"text-gray-300",children:"FP1 (Ch1)"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-1"}),f.jsx("span",{className:"text-gray-300",children:"FP2 (Ch2)"})]})]})]})};var[sT,AKe]=F0("Tooltip",[LB]),oT=LB(),Xie="TooltipProvider",qRe=700,hL="tooltip.open",[YRe,Lj]=sT(Xie),Zie=r=>{const{__scopeTooltip:e,delayDuration:t=qRe,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=r,s=K.useRef(!0),o=K.useRef(!1),l=K.useRef(0);return K.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),f.jsx(YRe,{scope:e,isOpenDelayedRef:s,delayDuration:t,onOpen:K.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:K.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:K.useCallback(c=>{o.current=c},[]),disableHoverableContent:a,children:i})};Zie.displayName=Xie;var Vb="Tooltip",[XRe,lT]=sT(Vb),Jie=r=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=r,l=Lj(Vb,r.__scopeTooltip),c=oT(e),[u,h]=K.useState(null),d=nw(),A=K.useRef(0),g=s??l.disableHoverableContent,p=o??l.delayDuration,v=K.useRef(!1),[m,y]=n0({prop:n,defaultProp:a??!1,onChange:C=>{C?(l.onOpen(),document.dispatchEvent(new CustomEvent(hL))):l.onClose(),i==null||i(C)},caller:Vb}),x=K.useMemo(()=>m?v.current?"delayed-open":"instant-open":"closed",[m]),b=K.useCallback(()=>{window.clearTimeout(A.current),A.current=0,v.current=!1,y(!0)},[y]),S=K.useCallback(()=>{window.clearTimeout(A.current),A.current=0,y(!1)},[y]),_=K.useCallback(()=>{window.clearTimeout(A.current),A.current=window.setTimeout(()=>{v.current=!0,y(!0),A.current=0},p)},[p,y]);return K.useEffect(()=>()=>{A.current&&(window.clearTimeout(A.current),A.current=0)},[]),f.jsx(bW,{...c,children:f.jsx(XRe,{scope:e,contentId:d,open:m,stateAttribute:x,trigger:u,onTriggerChange:h,onTriggerEnter:K.useCallback(()=>{l.isOpenDelayedRef.current?_():b()},[l.isOpenDelayedRef,_,b]),onTriggerLeave:K.useCallback(()=>{g?S():(window.clearTimeout(A.current),A.current=0)},[S,g]),onOpen:b,onClose:S,disableHoverableContent:g,children:t})})};Jie.displayName=Vb;var dL="TooltipTrigger",ese=K.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,a=lT(dL,t),i=Lj(dL,t),s=oT(t),o=K.useRef(null),l=Ha(e,o,a.onTriggerChange),c=K.useRef(!1),u=K.useRef(!1),h=K.useCallback(()=>c.current=!1,[]);return K.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),f.jsx(vW,{asChild:!0,...s,children:f.jsx(_n.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:l,onPointerMove:Yr(r.onPointerMove,d=>{d.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:Yr(r.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:Yr(r.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Yr(r.onFocus,()=>{c.current||a.onOpen()}),onBlur:Yr(r.onBlur,a.onClose),onClick:Yr(r.onClick,a.onClose)})})});ese.displayName=dL;var ZRe="TooltipPortal",[fKe,JRe]=sT(ZRe,{forceMount:void 0}),R0="TooltipContent",tse=K.forwardRef((r,e)=>{const t=JRe(R0,r.__scopeTooltip),{forceMount:n=t.forceMount,side:a="top",...i}=r,s=lT(R0,r.__scopeTooltip);return f.jsx(_W,{present:n||s.open,children:s.disableHoverableContent?f.jsx(rse,{side:a,...i,ref:e}):f.jsx(eLe,{side:a,...i,ref:e})})}),eLe=K.forwardRef((r,e)=>{const t=lT(R0,r.__scopeTooltip),n=Lj(R0,r.__scopeTooltip),a=K.useRef(null),i=Ha(e,a),[s,o]=K.useState(null),{trigger:l,onClose:c}=t,u=a.current,{onPointerInTransitChange:h}=n,d=K.useCallback(()=>{o(null),h(!1)},[h]),A=K.useCallback((g,p)=>{const v=g.currentTarget,m={x:g.clientX,y:g.clientY},y=iLe(m,v.getBoundingClientRect()),x=sLe(m,y),b=oLe(p.getBoundingClientRect()),S=cLe([...x,...b]);o(S),h(!0)},[h]);return K.useEffect(()=>()=>d(),[d]),K.useEffect(()=>{if(l&&u){const g=v=>A(v,u),p=v=>A(v,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",p),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",p)}}},[l,u,A,d]),K.useEffect(()=>{if(s){const g=p=>{const v=p.target,m={x:p.clientX,y:p.clientY},y=(l==null?void 0:l.contains(v))||(u==null?void 0:u.contains(v)),x=!lLe(m,s);y?d():x&&(d(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,s,c,d]),f.jsx(rse,{...r,ref:i})}),[tLe,rLe]=sT(Vb,{isInside:!1}),nLe=Wue("TooltipContent"),rse=K.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=r,l=lT(R0,t),c=oT(t),{onClose:u}=l;return K.useEffect(()=>(document.addEventListener(hL,u),()=>document.removeEventListener(hL,u)),[u]),K.useEffect(()=>{if(l.trigger){const h=d=>{const A=d.target;A!=null&&A.contains(l.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,u]),f.jsx(yW,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:f.jsxs(xW,{"data-state":l.stateAttribute,...c,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(nLe,{children:n}),f.jsx(tLe,{scope:t,isInside:!0,children:f.jsx(Upe,{id:l.contentId,role:"tooltip",children:a||n})})]})})});tse.displayName=R0;var nse="TooltipArrow",aLe=K.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,a=oT(t);return rLe(nse,t).isInside?null:f.jsx(wW,{...a,...n,ref:e})});aLe.displayName=nse;function iLe(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),a=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,a,i)){case i:return"left";case a:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function sLe(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function oLe(r){const{top:e,right:t,bottom:n,left:a}=r;return[{x:a,y:e},{x:t,y:e},{x:t,y:n},{x:a,y:n}]}function lLe(r,e){const{x:t,y:n}=r;let a=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const o=e[i],l=e[s],c=o.x,u=o.y,h=l.x,d=l.y;u>n!=d>n&&t<(h-c)*(n-u)/(d-u)+c&&(a=!a)}return a}function cLe(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),uLe(e)}function uLe(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const a=r[n];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))e.pop();else break}e.push(a)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const a=r[n];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var hLe=Zie,dLe=Jie,ALe=ese,ase=tse;const cT=hLe,uT=dLe,hT=ALe,Vw=K.forwardRef(({className:r,sideOffset:e=4,...t},n)=>f.jsx(ase,{ref:n,sideOffset:e,className:tr("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));Vw.displayName=ase.displayName;const fLe=()=>{const r=K0(),e=No(),{isSensorContacted:t,leadOffStatus:n}=To(),a={delta:{min:1,max:4,name:"델타파",color:"bg-amber-600"},theta:{min:4,max:8,name:"세타파",color:"bg-orange-500"},alpha:{min:8,max:13,name:"알파파",color:"bg-green-500"},beta:{min:13,max:30,name:"베타파",color:"bg-blue-500"},gamma:{min:30,max:45,name:"감마파",color:"bg-purple-500"}},i=K.useMemo(()=>{var d,A,g;if(!((d=r==null?void 0:r.frequencySpectrum)!=null&&d.frequencies)||!((A=r==null?void 0:r.frequencySpectrum)!=null&&A.ch1Power)||!((g=r==null?void 0:r.frequencySpectrum)!=null&&g.ch2Power))return null;const{frequencies:l,ch1Power:c,ch2Power:u}=r.frequencySpectrum;if(!Array.isArray(l)||!Array.isArray(c)||!Array.isArray(u)||l.length!==c.length||l.length!==u.length)return null;console.log("🧠 EEG 주파수 밴드 파워 계산 시작:",{frequenciesLength:l.length,ch1PowerLength:c.length,ch2PowerLength:u.length,frequencyRange:[l[0],l[l.length-1]]});const h={};return Object.entries(a).forEach(([p,v])=>{let m=0,y=0,x=0;l.forEach((C,w)=>{C>=v.min&&C<=v.max&&(m+=c[w],y+=u[w],x++)});const b=x>0?m/x:0,S=x>0?y/x:0,_=(b+S)/2;h[p]={ch1:b,ch2:S,combined:_}}),console.log("✅ EEG 주파수 밴드 파워 계산 완료:",h),h},[r==null?void 0:r.frequencySpectrum]),s=K.useMemo(()=>{if(!i)return[];const l=Object.values(i).map(A=>A.ch1),c=Object.values(i).map(A=>A.ch2),u=Math.max(...l),h=Math.max(...c),d=Math.max(u,h);return Object.entries(a).map(([A,g])=>{const p=i[A],v=d>0?p.ch1/d*100:0,m=d>0?p.ch2/d*100:0,y=d>0?p.combined/d*100:0;return{label:g.name,value:p.combined,normalizedValue:y,unit:"dB",color:g.color,description:`${g.min}-${g.max}Hz 주파수 대역 파워`,ch1Power:p.ch1,ch2Power:p.ch2,normalizedCh1:v,normalizedCh2:m,frequencyRange:`${g.min}-${g.max}Hz`}})},[i]),o=K.useMemo(()=>{var d;const l=t,c=!n.fp1&&!n.fp2,u=!!((d=r==null?void 0:r.frequencySpectrum)!=null&&d.frequencies);return{sensorContact:l,channelQuality:c,spectrumData:u,overall:l&&c&&u}},[t,n,r==null?void 0:r.frequencySpectrum]);return!e||!i?f.jsx("div",{className:"w-full space-y-6",children:f.jsxs("div",{className:"text-center py-8",children:[f.jsx("div",{className:"text-4xl mb-2",children:"🧠"}),f.jsx("div",{className:"text-base text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"연결 후 EEG 주파수 밴드 파워를 실시간으로 확인할 수 있습니다"})]})}):f.jsxs("div",{className:"w-full h-full space-y-6 mt-10 mb-10",children:[e&&!t&&f.jsxs("div",{className:"mb-3 p-2 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-4 w-4 text-red-400"}),f.jsxs("div",{className:"text-red-300",children:[f.jsx("div",{className:"font-medium text-sm",children:"전극 접촉 불량 감지"}),f.jsxs("div",{className:"text-xs",children:["FP1: ",n.fp1?"접촉 불량":"정상",", FP2: ",n.fp2?"접촉 불량":"정상"," - 주파수 분석 정확도가 저하될 수 있습니다"]})]})]}),f.jsx(cT,{children:f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:s.map((l,c)=>f.jsxs(uT,{children:[f.jsx(hT,{asChild:!0,children:f.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-3 hover:bg-gray-800/70 transition-colors cursor-help",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${l.color}`}),f.jsx("span",{className:"text-xs text-gray-400",children:l.unit})]}),f.jsxs("div",{className:"mb-2",children:[f.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"전체"}),f.jsxs("div",{className:"h-8 bg-gray-700 rounded-md relative overflow-hidden",children:[f.jsx("div",{className:`absolute bottom-0 left-0 right-0 ${l.color} opacity-80 rounded-md transition-all duration-300`,style:{height:`${l.normalizedValue}%`}}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsx("span",{className:"text-xs font-bold text-white drop-shadow-lg",children:l.value.toFixed(1)})})]})]}),f.jsxs("div",{className:"space-y-1 mb-2",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("span",{className:"text-xs text-blue-300",children:"Ch1"}),f.jsx("span",{className:"text-xs text-gray-400",children:l.ch1Power.toFixed(1)})]}),f.jsx("div",{className:"h-6 bg-gray-700 rounded-sm relative overflow-hidden",children:f.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-blue-500 opacity-80 rounded-sm transition-all duration-300",style:{height:`${l.normalizedCh1}%`}})})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("span",{className:"text-xs text-red-300",children:"Ch2"}),f.jsx("span",{className:"text-xs text-gray-400",children:l.ch2Power.toFixed(1)})]}),f.jsx("div",{className:"h-6 bg-gray-700 rounded-sm relative overflow-hidden",children:f.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-red-500 opacity-80 rounded-sm transition-all duration-300",style:{height:`${l.normalizedCh2}%`}})})]})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("div",{className:"text-sm font-medium text-gray-200",children:l.label}),f.jsx("div",{className:"text-xs text-gray-400",children:l.frequencyRange}),f.jsx("div",{className:"text-xs text-gray-500 mt-1",children:f.jsxs("span",{className:"text-cyan-300",children:["차이: ",Math.abs(l.ch1Power-l.ch2Power).toFixed(1)," dB"]})})]})]})}),f.jsx(Vw,{className:"bg-neutral-700 border-neutral-600 shadow-xl",children:f.jsx("div",{className:"max-w-lg p-4 bg-neutral-700 rounded-lg",children:f.jsxs("div",{className:"text-sm leading-relaxed space-y-2 [&>strong]:text-blue-300 [&>strong]:font-semibold [&>br]:block [&>br]:mb-1",style:{fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},children:[f.jsxs("div",{className:"font-semibold text-blue-300 mb-2",children:[l.label," (",l.frequencyRange,")"]}),f.jsxs("div",{className:"text-cyan-300",children:[f.jsx("strong",{children:"설명:"})," ",l.description]}),f.jsxs("div",{className:"text-green-300",children:[f.jsx("strong",{children:"전체 파워:"})," ",l.value.toFixed(2)," dB"]}),f.jsxs("div",{className:"text-yellow-300",children:[f.jsx("strong",{children:"채널별 파워:"}),f.jsx("br",{}),"• Ch1 (FP1/좌뇌): ",l.ch1Power.toFixed(2)," dB",f.jsx("br",{}),"• Ch2 (FP2/우뇌): ",l.ch2Power.toFixed(2)," dB"]}),f.jsxs("div",{className:"text-purple-300",children:[f.jsx("strong",{children:"좌우뇌 차이:"})," ",Math.abs(l.ch1Power-l.ch2Power).toFixed(2)," dB",f.jsx("br",{}),f.jsx("span",{className:"text-xs",children:l.ch1Power>l.ch2Power?"좌뇌 우세":l.ch2Power>l.ch1Power?"우뇌 우세":"균형"})]}),f.jsxs("div",{className:"text-orange-300",children:[f.jsx("strong",{children:"해석:"})," Power Spectrum 그래프의 ",l.frequencyRange," 구간을 평균한 값입니다."]})]})})})]},c))})}),f.jsxs("div",{className:"text-xs text-gray-500 text-center mt-2",children:["Power Spectrum 기반 실시간 주파수 밴드 분석 • 데이터 품질: ",o.overall?"양호":"불량"," • 스펙트럼 데이터: ",o.spectrumData?"수신 중":"대기 중"]})]})},dT={집중력:`
    <strong>설명:</strong> 집중력 지수는 인지적 집중 수준을 나타내며, 베타파 파워와 알파파 및 세타파 파워의 합의 비율로 계산됩니다. 높은 값은 깊은 집중을, 낮은 값은 주의 분산을 의미합니다.<br/>
    <strong>공식:</strong> 집중력 지수 = 베타파 파워 / (알파파 파워 + 세타파 파워)<br/>
    <strong>정상 범위:</strong> 1.8 - 2.4<br/>
    <strong>해석:</strong><br/>
    • 1.8 - 2.4: 정상적인 집중 수준<br/>
    • 1.8 미만: 주의력 결핍 혹은 졸음<br/>
    • 2.4 이상: 과도한 집중 혹은 스트레스<br/>
    <strong>참고문헌:</strong> Klimesch, W. (1999). EEG alpha and theta oscillations reflect cognitive and memory performance. Brain Research Reviews, 29(2-3), 169-195
  `,이완도:`
    <strong>설명:</strong> 이완도 지수는 상대적 알파파 활동을 기반으로 정신적 이완 상태를 측정합니다. 높은 값일수록 더 이완된 상태를 나타냅니다.<br/>
    <strong>공식:</strong> 이완도 지수 = 알파파 파워 / (알파파 파워 + 베타파 파워)<br/>
    <strong>정상 범위:</strong> 0.18 - 0.22 (정상적인 긴장 상태)<br/>
    <strong>해석:</strong> 0.18 미만: 긴장 및 스트레스 상태; 0.22 초과: 과도한 이완<br/>
    <strong>참고문헌:</strong> Bazanova, O. M., & Vernon, D. (2014). Neuroscience & Biobehavioral Reviews, 44, 94-110
  `,스트레스:`
    <strong>설명:</strong> 스트레스 지수는 정신적 스트레스와 각성 상태를 나타내며, 고주파수(베타파, 감마파) 활동 증가와 함께 상승합니다.<br/>
    <strong>공식:</strong> 스트레스 지수 = (베타파 파워 + 감마파 파워) / (알파파 파워 + 세타파 파워)<br/>
    <strong>정상 범위:</strong> 3.0 - 4.0 (정상 범위)<br/>
    <strong>해석:</strong> 2.0 미만: 매우 낮은 스트레스; 2.0-3.0: 낮은 스트레스; 3.0-4.0: 정상 범위; 4.0-5.0: 높은 스트레스; 5.0 초과: 심각한 스트레스<br/>
    <strong>참고문헌:</strong> Ahn, J. W., et al. (2019). Sensors, 19(21), 4644
  `,"좌우뇌 균형":`
    <strong>설명:</strong> 좌우뇌 균형은 좌뇌와 우뇌 간 알파파 활동의 균형을 나타내며, 감정적 및 인지적 편향을 반영합니다.<br/>
    <strong>공식:</strong> (좌뇌 알파파 - 우뇌 알파파) / (좌뇌 알파파 + 우뇌 알파파)<br/>
    <strong>정상 범위:</strong> -0.1 ~ 0.1 (균형 상태)<br/>
    <strong>해석:</strong> -0.1 이하: 창의적 (우뇌 우세); 0.1 이상: 논리적 (좌뇌 우세)<br/>
    <strong>참고문헌:</strong> Davidson, R. J. (2004). Biological Psychology, 67(1-2), 219-234
  `,"인지 부하":`
    <strong>설명:</strong> 인지 부하는 세타파/알파파 비율을 기반으로 정신적 작업 부하와 노력을 반영합니다.<br/>
    <strong>공식:</strong> 인지 부하 = 세타파 파워 / 알파파 파워<br/>
    <strong>정상 범위:</strong> 0.3 - 0.8 (최적 부하)<br/>
    <strong>해석:</strong> 0.3 미만: 낮은 참여도; 0.8 초과: 높은 인지 부하; 1.2 초과: 과부하<br/>
    <strong>참고문헌:</strong> Gevins, A., & Smith, M. E. (2003). Theoretical Issues in Ergonomics Science, 4(1-2), 113-131
  `,"정서 안정성":`
    <strong>설명:</strong> 정서 안정성은 낮은 주파수와 감마파 파워의 비율을 기반으로 감정 조절 능력을 측정합니다.<br/>
    <strong>공식:</strong> 정서 안정성 = (알파파 파워 + 세타파 파워) / 감마파 파워<br/>
    <strong>정상 범위:</strong> 0.4 - 0.8 (정상 범위)<br/>
    <strong>해석:</strong> 0.4 미만: 정서 불안정, 과도한 각성; 0.8 초과: 정서 둔화, 과도한 억제<br/>
    <strong>참고문헌:</strong> Knyazev, G. G. (2007). Neuroscience & Biobehavioral Reviews, 31(3), 377-395
  `,"총 파워":`
    <strong>신경활동성 (Neural Activity)</strong><br/>
    <strong>설명:</strong> 모든 EEG 밴드 파워의 합으로, 전체적인 신경 활동 수준을 나타냅니다.<br/>
    <strong>공식:</strong> 델타파 + 세타파 + 알파파 + 베타파 + 감마파 밴드 파워의 합<br/>
    <strong>정상 범위:</strong> 850-1150 μV²<br/>
    <strong>해석:</strong><br/>
    • 850-1150: 정상적인 신경 활동 수준<br/>
    • 1150 이상: 과도한 신경 활동 (과각성, 스트레스 상태)<br/>
    • 850 미만: 억제된 신경 활동 (저각성, 졸음 상태)<br/>
    <strong>참고문헌:</strong> Klimesch, W. (1999). EEG alpha and theta oscillations reflect cognitive and memory performance
  `,신경활동성:`
    <strong>신경활동성 (Neural Activity)</strong><br/>
    <strong>설명:</strong> 모든 EEG 밴드 파워의 합으로, 전체적인 신경 활동 수준을 나타냅니다.<br/>
    <strong>공식:</strong> 델타파 + 세타파 + 알파파 + 베타파 + 감마파 밴드 파워의 합<br/>
    <strong>정상 범위:</strong> 850-1150 μV²<br/>
    <strong>해석:</strong><br/>
    • 850-1150: 정상적인 신경 활동 수준<br/>
    • 1150 이상: 과도한 신경 활동 (과각성, 스트레스 상태)<br/>
    • 850 미만: 억제된 신경 활동 (저각성, 졸음 상태)<br/>
    <strong>참고문헌:</strong> Klimesch, W. (1999). EEG alpha and theta oscillations reflect cognitive and memory performance
  `,"집중력 (Focus)":`
    <strong>설명:</strong> 집중력 지수는 인지적 집중 수준을 나타내며, 베타파 파워와 알파파 및 세타파 파워의 합의 비율로 계산됩니다. 높은 값은 깊은 집중을, 낮은 값은 주의 분산을 의미합니다.<br/>
    <strong>공식:</strong> 집중력 지수 = 베타파 파워 / (알파파 파워 + 세타파 파워)<br/>
    <strong>정상 범위:</strong> 1.8 - 2.4<br/>
    <strong>해석:</strong><br/>
    • 1.8 - 2.4: 정상적인 집중 수준<br/>
    • 1.8 미만: 주의력 결핍 혹은 졸음<br/>
    • 2.4 이상: 과도한 집중 혹은 스트레스<br/>
    <strong>참고문헌:</strong> Klimesch, W. (1999). EEG alpha and theta oscillations reflect cognitive and memory performance. Brain Research Reviews, 29(2-3), 169-195
  `,"이완및긴장도 (Arousal)":`
    <strong>설명:</strong> 이완 및 긴장도 지수는 상대적 알파파 활동을 기반으로 정신적 각성과 이완 상태를 측정합니다. 높은 값일수록 더 이완된 상태를, 낮은 값일수록 긴장된 상태를 나타냅니다.<br/>
    <strong>공식:</strong> 이완도 지수 = 알파파 파워 / (알파파 파워 + 베타파 파워)<br/>
    <strong>정상 범위:</strong> 0.18 - 0.22 (정상적인 긴장 상태)<br/>
    <strong>해석:</strong> 0.18 미만: 긴장 및 스트레스 상태; 0.22 초과: 과도한 이완<br/>
    <strong>참고문헌:</strong> Bazanova, O. M., & Vernon, D. (2014). Neuroscience & Biobehavioral Reviews, 44, 94-110
  `,"정서안정성 (Valence)":`
    <strong>설명:</strong> 정서안정성 지수는 낮은 주파수와 감마파 파워의 비율을 기반으로 감정 조절 능력과 정서적 안정성을 측정합니다. 적절한 범위 내의 값일수록 안정된 정서 상태를 나타냅니다.<br/>
    <strong>공식:</strong> 정서 안정성 = (알파파 파워 + 세타파 파워) / 감마파 파워<br/>
    <strong>정상 범위:</strong> 0.4 - 0.8 (정상 범위)<br/>
    <strong>해석:</strong> 0.4 미만: 정서 불안정, 과도한 각성; 0.8 초과: 정서 둔화, 과도한 억제<br/>
    <strong>참고문헌:</strong> Knyazev, G. G. (2007). Neuroscience & Biobehavioral Reviews, 31(3), 377-395
  `,"스트레스 (Stress)":`
    <strong>설명:</strong> 스트레스 지수는 정신적 스트레스와 각성 상태를 나타내며, 고주파수(베타파, 감마파) 활동 증가와 함께 상승합니다. 높은 값일수록 더 높은 스트레스 수준을 의미합니다.<br/>
    <strong>공식:</strong> 스트레스 지수 = (베타파 파워 + 감마파 파워) / (알파파 파워 + 세타파 파워)<br/>
    <strong>정상 범위:</strong> 3.0 - 4.0 (정상 범위)<br/>
    <strong>해석:</strong> 2.0 미만: 매우 낮은 스트레스; 2.0-3.0: 낮은 스트레스; 3.0-4.0: 정상 범위; 4.0-5.0: 높은 스트레스; 5.0 초과: 심각한 스트레스<br/>
    <strong>참고문헌:</strong> Ahn, J. W., et al. (2019). Sensors, 19(21), 4644
  `,BPM:`
    <strong>BPM (Beats Per Minute)</strong><br/>
    심박수 - 1분당 심장 박동 횟수<br/><br/>
    
    <strong>측정 방법:</strong> PPG 신호에서 피크 간격을 분석하여 계산<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 60-100 BPM: 정상 범위<br/>
    • 60 BPM 미만: 서맥 (낮은 심박수)<br/>
    • 100 BPM 초과: 빈맥 (높은 심박수)<br/><br/>
    
    <strong>해석:</strong> 기본적인 심혈관 건강 지표로, 운동, 스트레스, 약물 등에 영향받음<br/><br/>
    
    <strong>참고문헌:</strong> American Heart Association Guidelines
  `,SpO2:`
    <strong>SpO2 (Oxygen Saturation)</strong><br/>
    산소포화도 - 혈액 내 산소 농도<br/><br/>
    
    <strong>측정 방법:</strong> Red/IR 광흡수 비율을 이용한 Beer-Lambert 법칙 기반 계산<br/>
    • R = (Red_AC/Red_DC) / (IR_AC/IR_DC)<br/>
    • 다단계 보정 공식으로 SpO2 추정<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 98-100%: 정상 산소포화도<br/>
    • 95-98%: 정상 범위 (하한)<br/>
    • 90-95%: 경미한 저산소증<br/>
    • 90% 미만: 심각한 저산소증 (의료진 상담 필요)<br/><br/>
    
    <strong>해석:</strong> 호흡기 및 순환기 기능 평가. 의료기기 대비 정확도 제한적<br/><br/>
    
    <strong>참고문헌:</strong> Pulse Oximetry Principles, IEEE TBME
  `,Stress:`
    <strong>Stress Index (스트레스 지수)</strong><br/>
    HRV 기반 정규화된 스트레스 수준 (0.0-1.0)<br/><br/>
    
    <strong>공식:</strong> 정규화된 SDNN, RMSSD, 심박수의 가중평균<br/>
    • Stress = (정규화SDNN × 0.4) + (정규화RMSSD × 0.4) + (심박수스트레스 × 0.2)<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 0.30-0.70: 정상 범위 (균형 상태)<br/>
    • 0.00-0.30: 매우 낮은 스트레스 (과도한 이완)<br/>
    • 0.70-0.90: 높은 스트레스 (긴장 상태)<br/>
    • 0.90-1.00: 매우 높은 스트레스 (심각한 긴장)<br/><br/>
    
    <strong>해석:</strong> 낮음: 이완 상태; 높음: 스트레스나 피로 상태<br/><br/>
    
    <strong>참고문헌:</strong> HRV Analysis Methods, Frontiers in Physiology
  `,SDNN:`
    <strong>SDNN (Standard Deviation of NN intervals)</strong><br/>
    NN간격의 표준편차 - 전체 HRV 수준<br/><br/>
    
    <strong>공식:</strong> SDNN = √(Σ(RRᵢ - RR̄)² / (N-1))<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 30-100 ms: 정상 범위<br/>
    • 30 ms 미만: 심박 리듬 일정함 (스트레스나 피로 상태)<br/>
    • 100 ms 초과: 심박 리듬 유연함 (매우 건강하고 회복력 좋은 상태)<br/><br/>
    
    <strong>해석:</strong> 낮음: 신체 회복력 저하; 높음: 스트레스나 긴장 상태<br/><br/>
    
    <strong>참고문헌:</strong> Task Force of ESC/NASPE, 1996
  `,RMSSD:`
    <strong>RMSSD (Root Mean Square of Successive Differences)</strong><br/>
    연속 RR간격 차이의 제곱근 평균 제곱<br/><br/>
    
    <strong>공식:</strong> RMSSD = √(Σ(RRᵢ₊₁ - RRᵢ)² / (N-1))<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 20-50 ms: 정상 범위<br/>
    • 20 ms 미만: 긴장 상태 (휴식이 필요한 상태)<br/>
    • 50 ms 초과: 매우 편안한 상태 (깊은 휴식 상태)<br/><br/>
    
    <strong>해석:</strong> 낮음: 긴장 상태 (휴식 부족); 높음: 매우 편안한 상태<br/><br/>
    
    <strong>참고문헌:</strong> Task Force of ESC/NASPE, 1996
  `,PNN50:`
    <strong>PNN50 (Percentage of NN50)</strong><br/>
    50ms 초과 차이나는 연속 NN간격의 백분율<br/><br/>
    
    <strong>공식:</strong> PNN50 = (NN50 count / Total NN intervals) × 100%<br/>
    NN50 = |RRᵢ₊₁ - RRᵢ| > 50ms인 간격의 개수<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 10-30%: 정상 범위<br/>
    • 10% 미만: 심박 리듬 규칙적 (긴장이나 피로 상태)<br/>
    • 30% 초과: 심박 리듬 유연함 (건강하고 회복력 좋은 상태)<br/><br/>
    
    <strong>해석:</strong> 부교감신경 활동의 지표. 높을수록 회복력이 좋은 상태<br/><br/>
    
    <strong>참고문헌:</strong> Task Force of ESC/NASPE, 1996
  `,LF:`
    <strong>LF (Low Frequency Power)</strong><br/>
    저주파 대역 파워 (0.04-0.15 Hz) - 교감신경 활동 지표<br/><br/>
    
    <strong>측정 방법:</strong> RR간격의 Welch Periodogram을 통한 파워 스펙트럼 밀도 계산<br/>
    <strong>단위:</strong> ms² (milliseconds squared)<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 200-1,200 ms²: 적절한 교감신경 활동 (연구 평균: 519±291 ms²)<br/>
    • 200 ms² 미만: 낮은 교감신경 활동 (과도한 휴식)<br/>
    • 1,200 ms² 초과: 높은 교감신경 활동 (스트레스나 긴장)<br/><br/>
    
    <strong>해석:</strong> 교감신경계의 활성도를 반영. 스트레스, 신체 활동, 정신적 각성 상태에서 증가<br/><br/>
    
    <strong>참고문헌:</strong> Task Force of ESC/NASPE, 1996; Shaffer & Ginsberg, 2017
  `,HF:`
    <strong>HF (High Frequency Power)</strong><br/>
    고주파 대역 파워 (0.15-0.4 Hz) - 부교감신경 활동 지표<br/><br/>
    
    <strong>측정 방법:</strong> RR간격의 Welch Periodogram을 통한 파워 스펙트럼 밀도 계산<br/>
    <strong>단위:</strong> ms² (milliseconds squared)<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 80-4,000 ms²: 적절한 부교감신경 활동 (연구 평균: 657±777 ms²)<br/>
    • 80 ms² 미만: 낮은 부교감신경 활동 (스트레스나 피로)<br/>
    • 4,000 ms² 초과: 높은 부교감신경 활동 (깊은 휴식)<br/><br/>
    
    <strong>해석:</strong> 부교감신경계의 활성도를 반영. 휴식, 소화, 회복 상태에서 증가<br/><br/>
    
    <strong>참고문헌:</strong> Task Force of ESC/NASPE, 1996; Shaffer & Ginsberg, 2017
  `,"LF/HF":`
    <strong>LF/HF Ratio</strong><br/>
    저주파/고주파 파워 비율 - 자율신경 균형<br/><br/>
    
    <strong>공식:</strong> LF/HF = LF Power / HF Power<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 1.0-10.0: 정상 범위 (연구 평균: 2.8±2.6, 권장 균형: 1.5-2.5)<br/>
    • 1.0 미만: 부교감신경 우세 (매우 편안한 상태)<br/>
    • 1.5-2.5: 이상적인 균형 상태<br/>
    • 2.5-10.0: 교감신경 우세 (활동/긴장 상태)<br/>
    • 10.0 초과: 심각한 스트레스<br/><br/>
    
    <strong>해석:</strong> 낮음: 휴식/회복 상태; 균형: 건강한 상태; 높음: 스트레스/활동 상태<br/><br/>
    
    <strong>참고문헌:</strong> Task Force of ESC/NASPE, 1996; Shaffer & Ginsberg, 2017
  `,SDSD:`
    <strong>SDSD (Standard Deviation of Successive Differences)</strong><br/>
    심박 변화의 일관성을 나타내는 지표<br/><br/>
    
    <strong>공식:</strong> SDSD = √(Σ((RRᵢ₊₁ - RRᵢ) - mean_diff)² / (N-1))<br/>
    여기서 mean_diff는 연속 차이의 평균<br/><br/>
    
    <strong>건강 상태 해석:</strong><br/>
    • 15-40 ms: 정상적인 심박 변화<br/>
    • 15 ms 미만: 심박 변화 적음 (스트레스나 피로 상태)<br/>
    • 40 ms 초과: 심박 변화 활발함 (회복력 좋은 상태)<br/><br/>
    
    <strong>의미:</strong> RMSSD와 비슷하지만 다른 계산법을 사용합니다. 높을수록 자율신경이 활발하게 반응하여 스트레스 회복력이 좋은 상태입니다.<br/><br/>
    
    <strong>참고문헌:</strong> Heart Rate Variability Analysis Methods
  `,"PPG 스트레스":`
    <strong>설명:</strong> 심박변이도 기반 스트레스 지수로, 자율신경계의 균형 상태를 반영합니다.<br/>
    <strong>공식:</strong> 다양한 HRV 지표들의 조합을 통한 스트레스 수준 계산<br/>
    <strong>정상 범위:</strong> 30% - 70% (적절한 스트레스)<br/>
    <strong>해석:</strong> 30% 미만: 스트레스 부족, 낮은 각성; 70% 초과: 과도한 스트레스, 높은 긴장<br/>
    <strong>참고문헌:</strong> 심박변이도 기반 스트레스 측정 연구
  `,"Activity State":`
    <strong>Activity State (활동 상태)</strong><br/>
    가속도계 데이터를 기반으로 분류된 신체 활동 수준<br/><br/>
    
    <strong>측정 방법:</strong> 3축 가속도(X, Y, Z)의 합성 벡터 크기를 계산하고 중력 성분(1g)을 제거<br/>
    <strong>공식:</strong> 움직임 크기 = |√(x² + y² + z²) - 1g|<br/><br/>
    
    <strong>분류 기준:</strong><br/>
    • 0.0-0.1g: Stationary (정지 상태)<br/>
    • 0.1-0.3g: Sitting (앉기/가벼운 움직임)<br/>
    • 0.3-0.8g: Walking (걷기/중간 활동)<br/>
    • 0.8g 이상: Running (뛰기/격렬한 활동)<br/><br/>
    
    <strong>해석:</strong> 실시간 신체 활동 강도를 분류하여 대사율, 칼로리 소모, 운동량 평가에 활용<br/><br/>
    
    <strong>참고문헌:</strong> Troiano, R. P., et al. (2008). Medicine & Science in Sports & Exercise, 40(1), 181-188
  `,안정성:`
    <strong>안정성 (Stability Index)</strong><br/>
    자세 안정성과 균형 유지 능력을 나타내는 지표<br/><br/>
    
    <strong>측정 방법:</strong> 가속도 변화의 표준편차를 이용한 안정성 계산<br/>
    <strong>공식:</strong> 안정성 = 100 - (움직임 변동성 × 정규화 계수)<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 70-100%: 매우 안정적인 자세<br/>
    • 50-70%: 보통 안정성 (일상적 움직임)<br/>
    • 30-50%: 불안정한 자세 (주의 필요)<br/>
    • 30% 미만: 매우 불안정 (균형 장애 가능성)<br/><br/>
    
    <strong>해석:</strong> 높을수록 자세가 안정적이며, 낙상 위험이 낮고 균형 능력이 우수함을 의미<br/><br/>
    
    <strong>참고문헌:</strong> Mancini, M., & Horak, F. B. (2010). Journal of NeuroEngineering and Rehabilitation, 7(1), 17
  `,강도:`
    <strong>강도 (Intensity Index)</strong><br/>
    움직임의 전반적인 강도와 에너지 소모 수준<br/><br/>
    
    <strong>측정 방법:</strong> 가속도 크기의 평균과 최대값을 이용한 강도 계산<br/>
    <strong>공식:</strong> 강도 = (평균 움직임 크기 / 최대 가능 움직임) × 100<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 0-25%: 저강도 활동 (휴식, 수면)<br/>
    • 25-50%: 중저강도 활동 (일상 생활)<br/>
    • 50-75%: 중고강도 활동 (운동, 작업)<br/>
    • 75-100%: 고강도 활동 (격렬한 운동)<br/><br/>
    
    <strong>해석:</strong> 신체 활동의 강도를 정량화하여 운동량 평가와 건강 관리에 활용<br/><br/>
    
    <strong>참고문헌:</strong> Freedson, P. S., et al. (1998). Medicine & Science in Sports & Exercise, 30(5), 777-781
  `,균형:`
    <strong>균형 (Balance Index)</strong><br/>
    X, Y축 간의 움직임 균형과 좌우/전후 대칭성<br/><br/>
    
    <strong>측정 방법:</strong> X축과 Y축 가속도의 상대적 분포와 균형도 계산<br/>
    <strong>공식:</strong> 균형 = 100 - |X축 움직임 비율 - Y축 움직임 비율| × 200<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 80-100%: 매우 균형잡힌 움직임<br/>
    • 60-80%: 양호한 균형 (정상 범위)<br/>
    • 40-60%: 불균형한 움직임 (주의 필요)<br/>
    • 40% 미만: 심각한 불균형 (재활 필요 가능성)<br/><br/>
    
    <strong>해석:</strong> 좌우 또는 전후 움직임의 대칭성을 평가하여 보행 패턴이나 자세 이상을 감지<br/><br/>
    
    <strong>참고문헌:</strong> Hausdorff, J. M. (2007). Journal of NeuroEngineering and Rehabilitation, 4(1), 14
  `,"Average Movement":`
    <strong>Average Movement (평균 움직임)</strong><br/>
    측정 기간 동안의 평균 움직임 크기 (중력 보정)<br/><br/>
    
    <strong>측정 방법:</strong> 모든 샘플의 움직임 크기를 평균하여 계산<br/>
    <strong>공식:</strong> 평균 움직임 = Σ|√(xᵢ² + yᵢ² + zᵢ²) - 1g| / N<br/>
    <strong>단위:</strong> g (중력 가속도 단위, 1g = 9.8 m/s²)<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 0.0-0.1g: 정적 상태 (수면, 휴식)<br/>
    • 0.1-0.3g: 경미한 활동 (사무, 독서)<br/>
    • 0.3-0.6g: 보통 활동 (걷기, 가사)<br/>
    • 0.6g 이상: 활발한 활동 (운동, 작업)<br/><br/>
    
    <strong>해석:</strong> 일정 기간의 전반적인 활동 수준을 나타내며, 일일 활동량 평가와 건강 지표로 활용<br/><br/>
    
    <strong>참고문헌:</strong> Sasaki, J. E., et al. (2011). Medicine & Science in Sports & Exercise, 43(8), 1568-1574
  `,"Standard Deviation Movement":`
    <strong>Standard Deviation Movement (움직임 표준편차)</strong><br/>
    움직임 크기의 변동성과 불규칙성을 나타내는 지표<br/><br/>
    
    <strong>측정 방법:</strong> 움직임 크기의 표준편차를 계산<br/>
    <strong>공식:</strong> 표준편차 = √(Σ(움직임ᵢ - 평균움직임)² / (N-1))<br/>
    <strong>단위:</strong> g (중력 가속도 단위)<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 0.0-0.1g: 매우 일관된 움직임 (정적 상태)<br/>
    • 0.1-0.3g: 일관된 움직임 (규칙적 활동)<br/>
    • 0.3-0.6g: 변동적 움직임 (다양한 활동)<br/>
    • 0.6g 이상: 매우 불규칙한 움직임 (격렬하거나 불안정한 활동)<br/><br/>
    
    <strong>해석:</strong> 낮음: 규칙적이고 예측 가능한 움직임; 높음: 불규칙하고 다양한 움직임 패턴<br/><br/>
    
    <strong>참고문헌:</strong> Bussmann, J. B., & van de Berg-Emons, R. J. (2013). Gait & Posture, 37(3), 340-347
  `,"Max Movement":`
    <strong>Max Movement (최대 움직임)</strong><br/>
    측정 기간 중 감지된 최대 움직임 크기<br/><br/>
    
    <strong>측정 방법:</strong> 모든 샘플 중 가장 큰 움직임 크기를 추출<br/>
    <strong>공식:</strong> 최대 움직임 = max(|√(xᵢ² + yᵢ² + zᵢ²) - 1g|)<br/>
    <strong>단위:</strong> g (중력 가속도 단위)<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 0.0-0.5g: 일상적 움직임 (정상 생활)<br/>
    • 0.5-1.0g: 활발한 움직임 (운동, 작업)<br/>
    • 1.0-2.0g: 격렬한 움직임 (달리기, 점프)<br/>
    • 2.0g 이상: 매우 격렬한 움직임 (충격, 낙상 가능성)<br/><br/>
    
    <strong>해석:</strong> 최대 가속도 이벤트를 감지하여 충격, 낙상, 격렬한 활동 등을 모니터링<br/><br/>
    
    <strong>참고문헌:</strong> Karantonis, D. M., et al. (2006). IEEE Transactions on Information Technology in Biomedicine, 10(1), 156-167
  `,AVNN:`
    <strong>AVNN (Average NN Intervals)</strong><br/>
    평균 심박주기 - 심장 박동 간격의 평균<br/><br/>
    
    <strong>공식:</strong> AVNN = Σ(RRᵢ) / N<br/>
    여기서 RRᵢ는 각 NN간격, N은 총 간격 수<br/><br/>
    
    <strong>건강 상태 해석:</strong><br/>
    • 600-1000 ms: 안정적인 심박 리듬<br/>
    • 600 ms 미만: 빠른 심박 (활동적이거나 긴장 상태)<br/>
    • 1000 ms 초과: 느린 심박 (휴식 상태나 운동선수형)<br/><br/>
    
    <strong>의미:</strong> 심박수가 빠를수록 AVNN은 작아지고, 느릴수록 커집니다. 개인의 기본 심박 상태를 나타내는 중요한 지표입니다.<br/><br/>
    
    <strong>참고문헌:</strong> Task Force of ESC/NASPE, 1996
  `,PNN20:`
    <strong>PNN20 (Percentage of NN20)</strong><br/>
    심박 리듬의 미세한 변화 감지 지표<br/><br/>
    
    <strong>공식:</strong> PNN20 = (NN20 count / Total NN intervals) × 100%<br/>
    NN20 = |RRᵢ₊₁ - RRᵢ| > 20ms인 간격의 개수<br/><br/>
    
    <strong>건강 상태 해석:</strong><br/>
    • 20-60%: 적절한 심박 변화<br/>
    • 20% 미만: 심박 리듬 일정함 (긴장이나 피로 상태)<br/>
    • 60% 초과: 심박 리듬 유연함 (건강한 상태)<br/><br/>
    
    <strong>의미:</strong> PNN50보다 민감하여 작은 스트레스나 회복 상태도 감지할 수 있습니다. 높을수록 자율신경이 유연하게 반응하는 건강한 상태입니다.<br/><br/>
    
    <strong>참고문헌:</strong> HRV Analysis Methods, IEEE TBME
  `,"HR Max":`
    <strong>HR Max (Heart Rate Maximum)</strong><br/>
    최근 2분간(120개 샘플) 측정된 심박수 중 최고점<br/><br/>
    
    <strong>계산 방법:</strong> Moving Average Queue(120개)에서 BPM 최대값 추출<br/>
    • 각 시점의 심박수를 BPM으로 변환<br/>
    • 고품질 데이터만 큐에 저장<br/>
    • 큐에서 최고점을 실시간으로 추적<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 80-150 BPM: 정상 최대 심박수<br/>
    • 80 BPM 미만: 낮은 최대 심박수<br/>
    • 150 BPM 초과: 높은 최대 심박수<br/><br/>
    
    <strong>해석:</strong> 최근 2분간 심박수 변동의 상한선. 스트레스 반응이나 활동 강도 평가에 유용<br/><br/>
    
    <strong>참고문헌:</strong> Heart Rate Variability Analysis Guidelines
  `,"HR Min":`
    <strong>HR Min (Heart Rate Minimum)</strong><br/>
    최근 2분간(120개 샘플) 측정된 심박수 중 최저점<br/><br/>
    
    <strong>계산 방법:</strong> Moving Average Queue(120개)에서 BPM 최소값 추출<br/>
    • 각 시점의 심박수를 BPM으로 변환<br/>
    • 고품질 데이터만 큐에 저장<br/>
    • 큐에서 최저점을 실시간으로 추적<br/><br/>
    
    <strong>정상 범위:</strong><br/>
    • 50-80 BPM: 정상 최소 심박수<br/>
    • 50 BPM 미만: 낮은 최소 심박수<br/>
    • 80 BPM 초과: 높은 최소 심박수<br/><br/>
    
    <strong>해석:</strong> 최근 2분간 심박수 변동의 하한선. 휴식 시 심혈관 효율성이나 회복 상태 평가에 유용<br/><br/>
    
    <strong>참고문헌:</strong> Heart Rate Variability Analysis Guidelines
  `},gLe=()=>{const{connectionState:r}=Dn(),e=K0(),t=No(),{isSensorContacted:n,leadOffStatus:a}=To(),[i,s]=K.useState(Date.now()),o=DX(),l=e==null?void 0:e.indices,c=cr(v=>v.signalQuality),u=cr(v=>v.sqiData.eegSQI),h=K.useMemo(()=>{var w,B,D,T;const v=n,m=!a.fp1&&!a.fp2,y=80,x=((B=(w=u==null?void 0:u.ch1SQI)==null?void 0:w[u.ch1SQI.length-1])==null?void 0:B.value)||0,b=((T=(D=u==null?void 0:u.ch2SQI)==null?void 0:D[u.ch2SQI.length-1])==null?void 0:T.value)||0,S=(x+b)/2,_=S>=y,C=v&&m&&_;return console.log("🔍 EEG 품질 상태 체크 (실제 SQI):",{sensorOk:v,bothChannelsOk:m,latestCh1SQI:x.toFixed(1)+"%",latestCh2SQI:b.toFixed(1)+"%",averageSQI:S.toFixed(1)+"%",sqiThreshold:y+"%",eegQualityOk:_,overall:C,signalQualityOverall:(c==null?void 0:c.overall)||"unknown",leadOffStatus:a,eegAnalysisExists:!!e,lastUpdated:(e==null?void 0:e.lastUpdated)||0}),{sensorContact:v,channelQuality:m,eegQuality:_,averageSQI:S,overall:C,fp1Status:!a.fp1,fp2Status:!a.fp2}},[n,a,e,u]);K.useEffect(()=>{var y,x,b,S;if(!l||!t||!h.overall){console.log("🧠 EEG Moving Average 업데이트 스킵:",{reason:l?t?"poor data quality":"not connected":"no indices"});return}const v=h.averageSQI>=80,m=cr.getState().updateEEGMovingAverage;m(l,v),console.log("🧠 EEG Moving Average 업데이트 (Store 기반):",{sqiQuality:v,averageSQI:h.averageSQI.toFixed(1)+"%",eegIndicesValues:{totalPower:(y=l.totalPower)==null?void 0:y.toFixed(2),focusIndex:(x=l.focusIndex)==null?void 0:x.toFixed(2),relaxationIndex:(b=l.relaxationIndex)==null?void 0:b.toFixed(2),emotionalStability:(S=l.emotionalStability)==null?void 0:S.toFixed(2)}})},[l,t,h.overall,h.averageSQI]);const d=K.useMemo(()=>{if(console.log("🧠 EEG 인덱스 차트 데이터 확인:",{hasEEGAnalysis:!!e,hasEEGIndices:!!l,dataQuality:h.overall,sensorContact:h.sensorContact,channelQuality:h.channelQuality,fp1Status:h.fp1Status,fp2Status:h.fp2Status,isConnected:t,connectionState:r,hasMovingAverageData:o.history.focusIndex.length>=10}),!l||!t)return console.log(`⚠️ EEG 인덱스 데이터 없음 - 연결상태: ${t}, 인덱스: ${!!l}`),{totalPower:0,focusIndex:0,relaxationIndex:0,stressIndex:0,hemisphericBalance:0,cognitiveLoad:0,emotionalStability:0,attentionLevel:0,meditationLevel:0,hasData:!1};const v=h.overall&&o.history.focusIndex.length>=10,m=v?o.stabilizedValues:{totalPower:l.totalPower||0,focusIndex:l.focusIndex||0,relaxationIndex:l.relaxationIndex||0,stressIndex:l.stressIndex||0,hemisphericBalance:l.hemisphericBalance||0,cognitiveLoad:l.cognitiveLoad||0,emotionalStability:l.emotionalStability||0,attentionLevel:(l.focusIndex||0)*.8+(l.totalPower||0)*.2,meditationLevel:(l.relaxationIndex||0)*.7+(1-(l.stressIndex||0))*.3};return console.log(`✅ EEG 인덱스 차트 데이터 준비 완료 (${v?"안정화된 값":"원본 값"})`),{...m,hasData:!0}},[e,l,t,r,h,o]);K.useEffect(()=>{s(Date.now())},[e]);const A=(v,m)=>{switch(v){case"집중력 (Focus)":return m<1.8?{status:"low",color:"text-yellow-400",message:"주의력 결핍 혹은 졸음"}:m>=2.4?{status:"high",color:"text-red-400",message:"과도한 집중 혹은 스트레스"}:{status:"normal",color:"text-green-400",message:"정상 범위"};case"이완및긴장도 (Arousal)":return m<.18?{status:"low",color:"text-yellow-400",message:"긴장 및 스트레스 상태"}:m>.22?{status:"high",color:"text-red-400",message:"과도한 이완"}:{status:"normal",color:"text-green-400",message:"정상적인 긴장 상태"};case"스트레스 (Stress)":return m<2?{status:"low",color:"text-blue-400",message:"매우 낮은 스트레스"}:m<3?{status:"low",color:"text-green-400",message:"낮은 스트레스"}:m<4?{status:"normal",color:"text-green-400",message:"정상 범위"}:m<5?{status:"high",color:"text-orange-400",message:"높은 스트레스"}:{status:"high",color:"text-red-400",message:"심각한 스트레스"};case"좌우뇌 균형":return!isFinite(m)||isNaN(m)?{status:"normal",color:"text-gray-400",message:"측정 중"}:m<=-.1?{status:"low",color:"text-blue-400",message:"창의적 (우뇌 우세)"}:m>=.1?{status:"low",color:"text-purple-400",message:"논리적 (좌뇌 우세)"}:{status:"normal",color:"text-green-400",message:"균형 상태"};case"인지 부하":return m<.3?{status:"low",color:"text-yellow-400",message:"낮은 참여도"}:m>1.2?{status:"high",color:"text-red-400",message:"과부하 상태"}:m>.8?{status:"high",color:"text-red-400",message:"높은 인지 부하"}:{status:"normal",color:"text-green-400",message:"최적 부하"};case"정서안정성 (Valence)":return m<.4?{status:"low",color:"text-yellow-400",message:"정서 불안정, 과도한 각성"}:m>.8?{status:"high",color:"text-red-400",message:"정서 둔화, 과도한 억제"}:{status:"normal",color:"text-green-400",message:"정상 범위"};case"총 파워":case"신경활동성":return m>=1150?{status:"high",color:"text-red-400",message:"과도한 신경 활동"}:m<850?{status:"low",color:"text-yellow-400",message:"억제된 신경 활동"}:{status:"normal",color:"text-green-400",message:"정상 범위"};default:return{status:"normal",color:"text-green-400",message:"정상 범위"}}},g=[{label:"이완및긴장도 (Arousal)",value:d.relaxationIndex,unit:"",color:"bg-green-500",description:"알파파 기반 이완 상태",historyLength:o.history.relaxationIndex.length},{label:"정서안정성 (Valence)",value:d.emotionalStability,unit:"",color:"bg-pink-500",description:"감마파 기반 정서 안정도",historyLength:o.history.emotionalStability.length},{label:"집중력 (Focus)",value:d.focusIndex,unit:"",color:"bg-blue-500",description:"베타파 기반 집중도 지수",historyLength:o.history.focusIndex.length},{label:"스트레스 (Stress)",value:d.stressIndex,unit:"",color:"bg-red-500",description:"고주파 활동 기반 스트레스",historyLength:o.history.stressIndex.length},{label:"신경활동성",value:d.totalPower,unit:"μV²",color:"bg-purple-500",description:"전체 뇌파 활동 강도",historyLength:o.history.totalPower.length},{label:"인지 부하",value:d.cognitiveLoad,unit:"",color:"bg-yellow-500",description:"세타/알파 비율 기반 인지 부하",historyLength:o.history.cognitiveLoad.length},{label:"좌우뇌 균형",value:d.hemisphericBalance,unit:"",color:"bg-cyan-500",description:"반구간 활동 균형 지표",historyLength:o.history.hemisphericBalance.length}],p=v=>{const m=h.overall&&v.historyLength>=10,y=h.overall?"opacity-100":"opacity-60",x=v.value!==null&&v.value!==void 0&&(v.label==="좌우뇌 균형"?isFinite(v.value)&&!isNaN(v.value)&&Math.abs(v.value)<=1:v.value>0),b=x?A(v.label,v.value):{status:"normal",color:"text-gray-400",message:"데이터 없음"},S=()=>{if(!x)return"bg-gray-500";switch(b.status){case"low":return"bg-yellow-500";case"high":return"bg-red-500";case"normal":return"bg-green-500";default:return"bg-gray-500"}};return f.jsx(cT,{children:f.jsxs(uT,{children:[f.jsx(hT,{asChild:!0,children:f.jsxs("div",{className:`bg-gray-800 border border-gray-700 rounded-lg p-4 hover:bg-gray-700 transition-colors ${y}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-3 h-3 rounded-full ${S()}`}),f.jsx("span",{className:"text-sm font-medium text-gray-300",children:v.label}),m&&f.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-blue-900/30 text-blue-300 border border-blue-500/30 rounded text-xs",children:[f.jsx(Hs,{className:"w-2.5 h-2.5"}),f.jsx("span",{className:"text-xs",children:"안정화"})]})]}),!h.overall&&f.jsx(Co,{className:"w-3 h-3 text-gray-500"})]}),f.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:[x?v.value.toFixed(2):"--",f.jsx("span",{className:"text-sm text-gray-400 ml-1",children:v.unit})]}),f.jsx("div",{className:`text-xs font-medium mb-1 ${b.color}`,children:b.message}),m&&f.jsxs("div",{className:"text-xs text-gray-500",children:[v.historyLength,"개 샘플 평균"]})]})}),f.jsx(Vw,{className:"bg-neutral-700 border-neutral-600 shadow-xl",children:f.jsx("div",{className:"max-w-lg p-4 bg-neutral-700 rounded-lg",children:f.jsx("div",{className:"text-sm leading-relaxed space-y-2 [&>strong]:text-blue-300 [&>strong]:font-semibold [&>br]:block [&>br]:mb-1",style:{fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},dangerouslySetInnerHTML:{__html:(dT[v.label]||`<strong>${v.label}</strong><br/>상세 정보가 준비 중입니다.`).replace(/<strong>/g,'<strong class="text-blue-300 font-semibold">').replace(/공식:/g,'<span class="text-green-300 font-medium">공식:</span>').replace(/정상 범위:/g,'<span class="text-yellow-300 font-medium">정상 범위:</span>').replace(/해석:/g,'<span class="text-orange-300 font-medium">해석:</span>').replace(/참고문헌:/g,'<span class="text-purple-300 font-medium">참고문헌:</span>').replace(/설명:/g,'<span class="text-cyan-300 font-medium">설명:</span>')}})})})]})},v.label)};return!t||!d.hasData?f.jsx("div",{className:"w-full space-y-6",children:f.jsx("div",{className:"w-full h-80 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-6xl mb-4",children:"🧠"}),f.jsx("div",{className:"text-lg text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"연결 후 뇌파 분석 지수를 실시간으로 확인할 수 있습니다"}),f.jsx("div",{className:"text-xs text-gray-600 mt-3 p-2 bg-gray-800 rounded",children:"processedDataStore EEG 분석 결과 기반 지수 계산 중..."})]})})}):f.jsxs("div",{className:"w-full space-y-6",children:[t&&!n&&f.jsxs("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-5 w-5 text-red-400"}),f.jsxs("div",{className:"text-red-300",children:[f.jsx("div",{className:"font-medium",children:"전극 접촉 불량 감지"}),f.jsxs("div",{className:"text-sm",children:["FP1: ",a.fp1?"접촉 불량":"정상",", FP2: ",a.fp2?"접촉 불량":"정상"," - 뇌파 지수 정확도가 저하될 수 있습니다"]})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"뇌파 분석 지수"}),(!t||r.status!=="connected")&&f.jsx("span",{className:"text-sm text-gray-400",children:"(디바이스 연결이 필요합니다.)"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:g.slice(0,4).map(v=>p(v))}),f.jsx("div",{className:"grid grid-cols-3 gap-4",children:g.slice(4,7).map(v=>p(v))})]})]})},pLe=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-200 mb-2",children:"🧠 EEG 뇌파 분석"}),f.jsx("p",{className:"text-gray-300",children:"실시간 뇌파 신호 처리 및 분석 결과를 시각화합니다."})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"🔧 Ch1 필터링된 EEG 신호 (FP1)"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"채널 1 (FP1) 신호처리 결과 - 60Hz 노치 + 1-45Hz 밴드패스 필터 적용"}),f.jsx(oV,{channel:"ch1"})]}),f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"🔧 Ch2 필터링된 EEG 신호 (FP2)"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"채널 2 (FP2) 신호처리 결과 - 60Hz 노치 + 1-45Hz 밴드패스 필터 적용"}),f.jsx(oV,{channel:"ch2"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"📈 Ch1 신호 품질 지수 (SQI)"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"채널 1 (FP1) 전극 접촉 상태와 신호 품질 모니터링"}),f.jsx(lV,{channel:"ch1"})]}),f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"📈 Ch2 신호 품질 지수 (SQI)"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"채널 2 (FP2) 전극 접촉 상태와 신호 품질 모니터링"}),f.jsx(lV,{channel:"ch2"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"🌈 파워 스펙트럼 (1-45Hz)"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"Ch1, Ch2 주파수 도메인 뇌파 신호 분석 결과"}),f.jsx(WRe,{})]}),f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"🎯 주파수 밴드 파워"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"Power Spectrum 기반 실시간 주파수 밴드별 파워 분석 - 델타, 세타, 알파, 베타, 감마파"}),f.jsx(fLe,{})]})]}),f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"🧠 EEG 분석 지수"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"실시간 뇌파 분석 결과 - 집중력, 이완도, 스트레스 등 9개 지수"}),f.jsx(gLe,{})]})]}),mLe=()=>{const r=K.useRef(null),e=K.useRef(null),{connectionState:t}=Dn(),n=JB(),a=No(),{isSensorContacted:i,leadOffStatus:s}=To(),[o,l]=K.useState(!1),c=K.useMemo(()=>{var d,A,g,p;if(console.log("📊 PPG 차트 데이터 업데이트 확인:",{hasPPGGraphData:!!n,redChannelLength:((d=n==null?void 0:n.red)==null?void 0:d.length)||0,irChannelLength:((A=n==null?void 0:n.ir)==null?void 0:A.length)||0,isConnected:a,connectionState:t}),((g=n==null?void 0:n.red)==null?void 0:g.length)>0&&((p=n==null?void 0:n.ir)==null?void 0:p.length)>0){const v=n.red,m=n.ir,y=v.slice(-400).map((b,S)=>[S,b.value]),x=m.slice(-400).map((b,S)=>[S,b.value]);return console.log(`✅ PPG 차트 데이터 준비 완료 - Red: ${y.length}개, IR: ${x.length}개 (Index 기반)`),{redData:y,irData:x,hasData:!0}}return console.log("⚠️ PPG 차트 데이터 없음"),{redData:[],irData:[],hasData:!1}},[n,a,t]),u=K.useMemo(()=>({backgroundColor:"transparent",title:{text:c.hasData?"PPG 밴드패스 필터링된 신호 (0.5-5.0Hz, Red & IR)":"PPG 신호 - 데이터 없음",left:"center",textStyle:{fontSize:14,fontWeight:"normal",color:"#f3f4f6"}},tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#4b5563",textStyle:{color:"#f3f4f6"},formatter:d=>{let g=`샘플 #${d[0].value[0]}<br/>`;return d.forEach(p=>{const v=Math.abs(p.value[1])<1e3?p.value[1].toFixed(2):p.value[1].toFixed(0);g+=`${p.seriesName}: ${v}<br/>`}),g+='<br/><span style="color: #10b981;">🔧 0.5-5.0Hz 밴드패스 필터링됨</span>',g}},legend:{data:["Red 채널","IR 채널"],top:30,textStyle:{color:"#d1d5db"}},grid:{left:"12%",right:"8%",bottom:"18%",top:"25%"},xAxis:{type:"value",name:"시간 (최근 8초)",nameLocation:"middle",nameGap:25,nameTextStyle:{color:"#d1d5db"},axisLine:{lineStyle:{color:"#4b5563"}},axisTick:{lineStyle:{color:"#4b5563"}},axisLabel:{show:!1},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},yAxis:{type:"value",name:"필터링된 신호 강도",nameLocation:"middle",nameGap:40,nameTextStyle:{color:"#d1d5db"},min:-250,max:250,minInterval:50,axisLine:{lineStyle:{color:"#4b5563"}},axisTick:{lineStyle:{color:"#4b5563"}},axisLabel:{color:"#9ca3af",formatter:d=>d.toFixed(0)},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:[{name:"Red 채널",type:"line",data:[],lineStyle:{color:"#ef4444",width:2},symbol:"none",animation:!1,smooth:!0},{name:"IR 채널",type:"line",data:[],lineStyle:{color:"#7c3aed",width:2},symbol:"none",animation:!1,smooth:!0}],dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"none"}]}),[]),h=()=>{if(!e.current)return;const{redData:d,irData:A,hasData:g}=c;g&&e.current.setOption({series:[{data:d},{data:A}]})};return K.useEffect(()=>{if(r.current)return e.current||(e.current=dy(r.current),e.current.setOption(u),l(!0)),()=>{e.current&&(e.current.dispose(),e.current=null,l(!1))}},[u]),K.useEffect(()=>{o&&c.hasData&&h()},[o,c]),K.useEffect(()=>{const d=()=>{e.current&&e.current.resize()};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),c.hasData?f.jsxs("div",{className:"w-full h-80",children:[a&&!i&&f.jsxs("div",{className:"mb-2 p-2 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-4 w-4 text-red-400"}),f.jsxs("span",{className:"text-red-300 text-sm",children:["전극 접촉 불량 (FP1: ",s.fp1?"OFF":"ON",", FP2: ",s.fp2?"OFF":"ON",") - PPG 신호 품질이 저하될 수 있습니다"]})]}),f.jsx("div",{ref:r,className:"w-full h-full"})]}):f.jsx("div",{className:"w-full h-80 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-6xl mb-4",children:"❤️"}),f.jsx("div",{className:"text-lg text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"연결 후 PPG 신호를 실시간으로 확인할 수 있습니다"}),f.jsx("div",{className:"text-xs text-gray-600 mt-3 p-2 bg-gray-800 rounded",children:"processedDataStore PPG 그래프 데이터 처리 중..."})]})})},vLe=()=>{var g;const r=K.useRef(null),e=K.useRef(null),t=bw(),n=No(),a=fk(),{isSensorContacted:i,leadOffStatus:s}=To(),o=cr(p=>p.sqiData.lastUpdated),[l,c]=K.useState(!1),u=a&&t.overallSQI.length>0,h=K.useMemo(()=>{var v,m,y,x,b,S,_,C,w,B,D,T;if(console.log("🔧 PPG SQI 차트 - ProcessedDataStore 전체 상태 확인:",{ppgSQIFromStore:t,storeType:"processedDataStore",hasOverallSQI:!!(t!=null&&t.overallSQI),overallSQILength:((v=t==null?void 0:t.overallSQI)==null?void 0:v.length)||0,overallSQIType:typeof(t==null?void 0:t.overallSQI),firstOverallSQI:(m=t==null?void 0:t.overallSQI)==null?void 0:m[0],lastOverallSQI:(x=t==null?void 0:t.overallSQI)==null?void 0:x[((y=t==null?void 0:t.overallSQI)==null?void 0:y.length)-1],storeLastUpdated:new Date(o).toLocaleTimeString()}),console.log("📊 PPG SQI 차트 데이터 업데이트 확인:",{hasPPGSQIData:!!t,overallSQILength:((b=t==null?void 0:t.overallSQI)==null?void 0:b.length)||0,isConnected:a,connectionState:n,ppgSQIDataDetail:{redSQILength:((S=t==null?void 0:t.redSQI)==null?void 0:S.length)||0,irSQILength:((_=t==null?void 0:t.irSQI)==null?void 0:_.length)||0,overallSQILength:((C=t==null?void 0:t.overallSQI)==null?void 0:C.length)||0,firstOverallSQI:(w=t==null?void 0:t.overallSQI)==null?void 0:w[0],lastOverallSQI:(B=t==null?void 0:t.overallSQI)==null?void 0:B[t.overallSQI.length-1],sampleValues:(T=(D=t==null?void 0:t.overallSQI)==null?void 0:D.slice(0,3))==null?void 0:T.map(E=>E.value)}}),!u)return console.log("⚠️ PPG SQI 차트 데이터 없음"),{overallSQI:[],hasData:!1};const p=t.overallSQI.map((E,R)=>[R,E.value]);return console.log(`✅ PPG SQI 차트 데이터 준비 완료 - Overall: ${p.length}개 (Index 기반)`,{firstFewData:p.slice(0,3),lastFewData:p.slice(-3)}),{overallSQI:p,hasData:!0}},[t,u,a,n,o]),d=K.useMemo(()=>({backgroundColor:"transparent",title:{text:"PPG 신호 품질 지수 (SQI)",left:"center",textStyle:{fontSize:14,fontWeight:"normal",color:"#f3f4f6"}},tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#4b5563",textStyle:{color:"#f3f4f6"},formatter:p=>{const v=p[0].value[0],m=p[0].value[1].toFixed(1);return`샘플 #${v}<br/>PPG SQI: ${m}%`}},legend:{data:["PPG SQI"],top:30,textStyle:{color:"#d1d5db"}},grid:{left:"12%",right:"8%",bottom:"18%",top:"25%"},xAxis:{type:"value",name:"시간 (최근 8초)",nameLocation:"middle",nameGap:25,nameTextStyle:{color:"#d1d5db"},axisLine:{lineStyle:{color:"#4b5563"}},axisTick:{lineStyle:{color:"#4b5563"}},axisLabel:{show:!1},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},yAxis:{type:"value",name:"SQI (%)",nameLocation:"middle",nameGap:40,nameTextStyle:{color:"#d1d5db"},min:0,max:100,axisLine:{lineStyle:{color:"#4b5563"}},axisTick:{lineStyle:{color:"#4b5563"}},axisLabel:{color:"#9ca3af",formatter:"{value}%"},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:[{name:"PPG SQI",type:"line",data:[],lineStyle:{color:"#10b981",width:3},symbol:"none",animation:!1,smooth:!0}],dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"none"}]}),[]),A=K.useCallback(()=>{if(!e.current)return;const{overallSQI:p}=h;e.current.setOption({series:[{data:p}]})},[h]);if(K.useEffect(()=>{if(r.current)return e.current||(e.current=dy(r.current),e.current.setOption(d),c(!0)),()=>{e.current&&(e.current.dispose(),e.current=null,c(!1))}},[d]),K.useEffect(()=>{l&&h.hasData&&A()},[l,h,A]),K.useEffect(()=>{const p=()=>{e.current&&e.current.resize()};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),!u){const p=((g=t==null?void 0:t.overallSQI)==null?void 0:g.length)||0;return f.jsx("div",{className:"w-full h-80 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-6xl mb-4",children:"📊"}),f.jsx("div",{className:"text-lg text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"연결 후 PPG 신호 품질을 실시간으로 확인할 수 있습니다"}),f.jsxs("div",{className:"text-xs text-gray-600 mt-3 p-2 bg-gray-800 rounded",children:["디버그 정보:",f.jsx("br",{}),"연결 상태: ",a?"연결됨":"연결 안됨",f.jsx("br",{}),"PPG SQI 데이터: ",p,"개",f.jsx("br",{}),"PPG 신호 품질 분석 중..."]})]})})}return f.jsxs("div",{className:"w-full h-80",children:[a&&!i&&f.jsxs("div",{className:"mb-3 p-2 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-4 w-4 text-red-400"}),f.jsxs("span",{className:"text-red-300 text-sm",children:["전극 접촉 불량 (FP1: ",s.fp1?"OFF":"ON",", FP2: ",s.fp2?"OFF":"ON",") - PPG 신호 품질 분석 정확도가 저하될 수 있습니다"]})]}),f.jsx("div",{ref:r,className:"w-full h-full"})]})},yLe=()=>{const{connectionState:r}=Dn(),e=eN(),t=bw(),n=No(),{isSensorContacted:a,leadOffStatus:i}=To(),[s,o]=K.useState(Date.now()),l=MX(),c=e.indices,u=K.useMemo(()=>{if(!t.overallSQI||t.overallSQI.length===0)return{average:0,isGood:!1};const y=t.overallSQI.slice(-10),x=y.reduce((S,_)=>S+_.value,0)/y.length,b=x>=80;return{average:x,isGood:b}},[t.overallSQI]),h=K.useMemo(()=>{const y=a,x=u.isGood,b=y&&x;return console.log("🔍 PPG 품질 상태 체크:",{sensorOk:y,sqiOk:x,sqiValue:u.average.toFixed(1)+"%",bothOk:b,ppgAnalysisExists:!!e,lastUpdated:(e==null?void 0:e.lastUpdated)||0}),{sensorContact:y,signalQuality:x,overall:b,sqiValue:u.average}},[a,u,e]);K.useEffect(()=>{var b,S,_,C;if(!c||!n||!h.overall){console.log("💓 PPG Moving Average 업데이트 스킵:",{reason:c?n?"poor data quality":"not connected":"no indices"});return}const y=h.sqiValue>=80,x=cr.getState().updatePPGMovingAverage;x(c,y),console.log("💓 PPG Moving Average 업데이트 (Store 기반):",{sqiQuality:y,sqiValue:h.sqiValue.toFixed(1)+"%",ppgIndicesValues:{heartRate:(b=c.heartRate)==null?void 0:b.toFixed(1),rmssd:(S=c.rmssd)==null?void 0:S.toFixed(1),sdnn:(_=c.sdnn)==null?void 0:_.toFixed(1),stressIndex:(C=c.stressIndex)==null?void 0:C.toFixed(2)}})},[c,n,h.overall,h.sqiValue]);const d=b0.getInstance(),A=K.useMemo(()=>{var Q,H,W,te,ee;if(console.log("💓 PPG 인덱스 차트 데이터 확인:",{hasPPGAnalysis:!!e,hasPPGIndices:!!c,dataQuality:h.overall,sensorContact:h.sensorContact,signalQuality:h.signalQuality,sqiValue:h.sqiValue.toFixed(1),isConnected:n,connectionState:r,hasMovingAverageData:l.history.heartRate.length>=10}),!c||!n)return console.log(`⚠️ PPG 인덱스 데이터 없음 - 연결상태: ${n}, 인덱스: ${!!c}`),{heartRate:0,rmssd:0,sdnn:0,pnn50:0,lfPower:0,hfPower:0,lfHfRatio:0,stressIndex:0,avnn:0,pnn20:0,sdsd:0,hrMax:0,hrMin:0};const y=d.getRRBufferStatus(),x=d.getCurrentRMSSD(),b=d.getCurrentSDNN(),S=d.getCurrentSDSD(),_=d.getCurrentAVNN(),C=d.getCurrentPNN50(),w=d.getCurrentPNN20(),B=d.getCurrentStressIndex(),D=d.getCurrentHRMax(),T=d.getCurrentHRMin(),E=d.getCurrentLfPower(),R=d.getCurrentHfPower(),M=d.getCurrentLfHfRatio(),k=y.isReady||x>0||b>0||E>0||R>0||B>0||_>0||C>0||w>0;console.log("🔧 PPG HRV 데이터 소스 선택:",{bufferReady:y.isReady,bufferLength:y.bufferLength,bufferCapacity:y.bufferCapacity,serviceHasData:k,serviceValues:{rmssd:x.toFixed(2),sdnn:b.toFixed(2),lfPower:E.toFixed(2),hfPower:R.toFixed(2),stressIndex:B.toFixed(3)},fallbackToStore:!k});const O={heartRate:l.stabilizedValues.heartRate!==null&&l.stabilizedValues.heartRate>0?l.stabilizedValues.heartRate:c.heartRate||0,rmssd:l.stabilizedValues.rmssd!==null&&l.stabilizedValues.rmssd>0?l.stabilizedValues.rmssd:k?x:c.rmssd||0,sdnn:l.stabilizedValues.sdnn!==null&&l.stabilizedValues.sdnn>0?l.stabilizedValues.sdnn:k?b:c.sdnn||0,pnn50:l.stabilizedValues.pnn50!==null&&l.stabilizedValues.pnn50>0?l.stabilizedValues.pnn50:k?C:c.pnn50||0,lfPower:l.stabilizedValues.lfPower!==null&&l.stabilizedValues.lfPower>0?l.stabilizedValues.lfPower:k?E:c.lfPower||0,hfPower:l.stabilizedValues.hfPower!==null&&l.stabilizedValues.hfPower>0?l.stabilizedValues.hfPower:k?R:c.hfPower||0,lfHfRatio:l.stabilizedValues.lfHfRatio!==null&&l.stabilizedValues.lfHfRatio>0?l.stabilizedValues.lfHfRatio:k?M:c.lfHfRatio||0,stressIndex:l.stabilizedValues.stressIndex!==null&&l.stabilizedValues.stressIndex>0?l.stabilizedValues.stressIndex:k?B:c.stressIndex||0,avnn:l.stabilizedValues.avnn!==null&&l.stabilizedValues.avnn>0?l.stabilizedValues.avnn:k?_:c.avnn||0,pnn20:l.stabilizedValues.pnn20!==null&&l.stabilizedValues.pnn20>0?l.stabilizedValues.pnn20:k?w:c.pnn20||0,sdsd:l.stabilizedValues.sdsd!==null&&l.stabilizedValues.sdsd>0?l.stabilizedValues.sdsd:k?S:c.sdsd||0,hrMax:l.stabilizedValues.hrMax!==null&&l.stabilizedValues.hrMax>0?l.stabilizedValues.hrMax:k?D:c.hrMax||0,hrMin:l.stabilizedValues.hrMin!==null&&l.stabilizedValues.hrMin>0?l.stabilizedValues.hrMin:k?T:c.hrMin||0,spo2:l.stabilizedValues.spo2!==null?l.stabilizedValues.spo2:c.spo2||0};return console.log("🔧 PPG 인덱스 차트 값 디버깅 (Moving Average 우선):",{useAnalysisServiceData:k,bpm:{movingAverageValue:l.stabilizedValues.heartRate,rawPpgValue:(c==null?void 0:c.heartRate)||0,finalBPMValue:O.heartRate,historyLength:l.history.heartRate.length,usingMovingAverage:l.stabilizedValues.heartRate!==null&&l.stabilizedValues.heartRate>0},lfhf:{movingAverageLfPower:l.stabilizedValues.lfPower,movingAverageHfPower:l.stabilizedValues.hfPower,movingAverageLfHfRatio:l.stabilizedValues.lfHfRatio,serviceLfPower:`${E.toFixed(1)} ms²`,serviceHfPower:`${R.toFixed(1)} ms²`,serviceLfHfRatio:M.toFixed(3),ppgLfPower:`${((c==null?void 0:c.lfPower)||0).toFixed(6)} (raw)`,ppgHfPower:`${((c==null?void 0:c.hfPower)||0).toFixed(6)} (raw)`,ppgLfHfRatio:((c==null?void 0:c.lfHfRatio)||0).toFixed(6),finalLfPower:`${O.lfPower.toFixed(1)} ms²`,finalHfPower:`${O.hfPower.toFixed(1)} ms²`,finalLfHfRatio:O.lfHfRatio.toFixed(3),usingMovingAverageLF:l.stabilizedValues.lfPower!==null&&l.stabilizedValues.lfPower>0,usingMovingAverageHF:l.stabilizedValues.hfPower!==null&&l.stabilizedValues.hfPower>0,usingMovingAverageRatio:l.stabilizedValues.lfHfRatio!==null&&l.stabilizedValues.lfHfRatio>0},spo2:{movingAverageValue:l.stabilizedValues.spo2,rawPpgValue:(c==null?void 0:c.spo2)||0,finalSpO2Value:O.spo2,historyLength:l.history.spo2.length,usingMovingAverage:l.stabilizedValues.spo2!==null},movingAverageHistoryLengths:{lfPower:((Q=l.history.lfPower)==null?void 0:Q.length)||0,hfPower:((H=l.history.hfPower)==null?void 0:H.length)||0,lfHfRatio:((W=l.history.lfHfRatio)==null?void 0:W.length)||0,rmssd:((te=l.history.rmssd)==null?void 0:te.length)||0,sdnn:((ee=l.history.sdnn)==null?void 0:ee.length)||0}}),O},[c,n,h.overall,h.sqiValue,d]);K.useEffect(()=>{o(Date.now())},[e]);const g=(y,x)=>{switch(y){case"BPM":return x<60?{status:"low",color:"text-blue-400",message:"서맥 (낮은 심박수)"}:x>100?{status:"high",color:"text-red-400",message:"빈맥 (높은 심박수)"}:{status:"normal",color:"text-green-400",message:"정상 범위"};case"SpO2":return x===0?{status:"low",color:"text-gray-400",message:"측정 불가 (신호 부족)"}:x<90?{status:"high",color:"text-red-400",message:"심각한 저산소증 (의료진 상담 필요)"}:x<95?{status:"high",color:"text-orange-400",message:"경미한 저산소증"}:x<98?{status:"normal",color:"text-green-400",message:"정상 범위 (하한)"}:{status:"normal",color:"text-green-400",message:"정상 산소포화도"};case"RMSSD":return x<20?{status:"low",color:"text-yellow-400",message:"긴장 상태 (휴식이 필요한 상태)"}:x>50?{status:"high",color:"text-blue-400",message:"편안한 상태 (회복력 좋음)"}:{status:"normal",color:"text-green-400",message:"정상 범위"};case"SDNN":return x<30?{status:"low",color:"text-yellow-400",message:"심박 리듬 일정함 (스트레스나 피로 상태)"}:x>100?{status:"high",color:"text-blue-400",message:"심박 리듬 다양함 (건강한 상태)"}:{status:"normal",color:"text-green-400",message:"정상 범위"};case"PNN50":return x<10?{status:"low",color:"text-yellow-400",message:"심박 리듬 규칙적 (긴장이나 피로 상태)"}:x>30?{status:"high",color:"text-blue-400",message:"심박 리듬 유연함 (건강한 상태)"}:{status:"normal",color:"text-green-400",message:"정상 범위"};case"Stress":return x<.3?{status:"low",color:"text-blue-400",message:"매우 낮은 스트레스 (과도한 이완)"}:x<.5?{status:"normal",color:"text-green-400",message:"낮은 스트레스 (이완 상태)"}:x<.7?{status:"normal",color:"text-green-400",message:"정상 범위 (균형 상태)"}:x<.9?{status:"high",color:"text-orange-400",message:"높은 스트레스 (긴장 상태)"}:{status:"high",color:"text-red-400",message:"매우 높은 스트레스 (심각한 긴장)"};case"AVNN":return x<600?{status:"high",color:"text-red-400",message:"빠른 심박 (활동적이거나 긴장 상태)"}:x>1e3?{status:"low",color:"text-blue-400",message:"느린 심박 (휴식 상태나 운동선수형)"}:{status:"normal",color:"text-green-400",message:"안정적인 심박 리듬"};case"PNN20":return x<20?{status:"low",color:"text-yellow-400",message:"심박 리듬 일정함 (긴장이나 피로)"}:x>60?{status:"high",color:"text-blue-400",message:"심박 리듬 유연함 (건강한 상태)"}:{status:"normal",color:"text-green-400",message:"적절한 심박 변화"};case"SDSD":return x<15?{status:"low",color:"text-yellow-400",message:"심박 변화 적음 (스트레스나 피로)"}:x>40?{status:"high",color:"text-blue-400",message:"심박 변화 활발함 (회복력 좋음)"}:{status:"normal",color:"text-green-400",message:"정상적인 심박 변화"};case"HR Max":return x<80?{status:"low",color:"text-yellow-400",message:"낮은 최대 심박수"}:x>150?{status:"high",color:"text-red-400",message:"높은 최대 심박수"}:{status:"normal",color:"text-green-400",message:"정상 최대 심박수"};case"HR Min":return x<50?{status:"low",color:"text-blue-400",message:"낮은 최소 심박수"}:x>80?{status:"high",color:"text-orange-400",message:"높은 최소 심박수"}:{status:"normal",color:"text-green-400",message:"정상 최소 심박수"};case"LF":return x<2?{status:"low",color:"text-yellow-400",message:"낮은 교감신경 활동 (과도한 휴식)"}:x>12?{status:"high",color:"text-red-400",message:"높은 교감신경 활동 (스트레스나 긴장)"}:{status:"normal",color:"text-green-400",message:"적절한 교감신경 활동"};case"HF":return x<.8?{status:"low",color:"text-yellow-400",message:"낮은 부교감신경 활동 (스트레스나 피로)"}:x>40?{status:"high",color:"text-blue-400",message:"높은 부교감신경 활동 (깊은 휴식)"}:{status:"normal",color:"text-green-400",message:"적절한 부교감신경 활동"};case"LF/HF":return x<1?{status:"low",color:"text-blue-400",message:"부교감신경 우세 (깊은 휴식 상태)"}:x>10?{status:"high",color:"text-red-400",message:"교감신경 우세 (스트레스나 활동)"}:{status:"normal",color:"text-green-400",message:"자율신경 균형 상태"};default:return{status:"normal",color:"text-green-400",message:"정상 범위"}}},p=K.useMemo(()=>{const y=l.history.heartRate.length>=10,x=h.overall;return{isStabilized:y&&x,hasEnoughSamples:y,isQualityGood:x,sampleCount:l.history.heartRate.length,requiredSamples:10}},[l.history.heartRate.length,h.overall]),v=[{label:"BPM",value:A.heartRate,unit:"BPM",color:"bg-red-500",description:"심박수",historyLength:l.history.heartRate.length},{label:"SpO2",value:A.spo2,unit:"%",color:"bg-cyan-500",description:"혈중 산소 포화도",historyLength:l.history.spo2.length},{label:"HR Max",value:A.hrMax||0,unit:"BPM",color:"bg-rose-500",description:"측정 기간 최고 심박수 (2분간)",historyLength:l.history.hrMax.length},{label:"HR Min",value:A.hrMin||0,unit:"BPM",color:"bg-emerald-500",description:"측정 기간 최저 심박수 (2분간)",historyLength:l.history.hrMin.length},{label:"Stress",value:A.stressIndex,unit:"",color:"bg-purple-500",description:"스트레스 지수",historyLength:l.history.stressIndex.length},{label:"RMSSD",value:A.rmssd,unit:"ms",color:"bg-blue-500",description:"연속 RR간격 차이의 제곱근",historyLength:l.history.rmssd.length},{label:"SDNN",value:A.sdnn,unit:"ms",color:"bg-green-500",description:"RR간격의 표준편차",historyLength:l.history.sdnn.length},{label:"SDSD",value:A.sdsd||0,unit:"ms",color:"bg-teal-500",description:"연속 차이의 표준편차",historyLength:l.history.sdsd.length},{label:"LF",value:A.lfPower||0,unit:"ms²",color:"bg-violet-500",description:"저주파 성분 (교감신경 활동)",historyLength:l.history.lfPower.length},{label:"HF",value:A.hfPower||0,unit:"ms²",color:"bg-pink-500",description:"고주파 성분 (부교감신경 활동)",historyLength:l.history.hfPower.length},{label:"LF/HF",value:A.lfHfRatio||0,unit:"",color:"bg-amber-500",description:"교감/부교감 균형 비율",historyLength:l.history.lfHfRatio.length},{label:"AVNN",value:A.avnn||0,unit:"ms",color:"bg-indigo-500",description:"평균 NN간격 (심박주기)",historyLength:l.history.avnn.length},{label:"PNN50",value:A.pnn50,unit:"%",color:"bg-yellow-500",description:"50ms 이상 차이나는 RR간격 비율",historyLength:l.history.pnn50.length},{label:"PNN20",value:A.pnn20||0,unit:"%",color:"bg-orange-500",description:"20ms 이상 차이나는 RR간격 비율",historyLength:l.history.pnn20.length}],m=y=>{const x=h.overall&&y.historyLength>=10,b=h.overall?"opacity-100":"opacity-60",S=y.value!==null&&y.value!==void 0&&y.value>0,_=S?g(y.label,y.value):{status:"normal",color:"text-gray-400",message:"데이터 없음"},C=()=>{if(!S)return"bg-gray-500";switch(y.label){case"BPM":return _.status==="low"?"bg-blue-500":_.status==="high"?"bg-red-500":"bg-green-500";case"SpO2":return _.status==="low"?"bg-gray-500":_.status==="high"?"bg-red-500":"bg-green-500";case"Stress":return _.status==="low"?"bg-blue-500":_.status==="high"?"bg-red-500":"bg-green-500";case"RMSSD":case"SDNN":case"PNN50":case"PNN20":case"SDSD":return _.status==="low"?"bg-yellow-500":_.status==="high"?"bg-blue-500":"bg-green-500";case"AVNN":return _.status==="low"?"bg-blue-500":_.status==="high"?"bg-red-500":"bg-green-500";case"HR Max":return _.status==="low"?"bg-yellow-500":_.status==="high"?"bg-red-500":"bg-green-500";case"HR Min":return _.status==="low"?"bg-blue-500":_.status==="high"?"bg-orange-500":"bg-green-500";case"LF":return _.status==="low"?"bg-yellow-500":_.status==="high"?"bg-red-500":"bg-green-500";case"HF":return _.status==="low"?"bg-yellow-500":_.status==="high"?"bg-blue-500":"bg-green-500";case"LF/HF":return _.status==="low"?"bg-blue-500":_.status==="high"?"bg-red-500":"bg-green-500";default:switch(_.status){case"low":return"bg-yellow-500";case"high":return"bg-red-500";case"normal":return"bg-green-500";default:return"bg-gray-500"}}};return f.jsx(cT,{children:f.jsxs(uT,{children:[f.jsx(hT,{asChild:!0,children:f.jsxs("div",{className:`bg-gray-800 border border-gray-700 rounded-lg p-4 hover:bg-gray-700 transition-colors ${b}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-3 h-3 rounded-full ${C()}`}),f.jsx("span",{className:"text-sm font-medium text-gray-300",children:y.label}),x&&f.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-blue-900/30 text-blue-300 border border-blue-500/30 rounded text-xs",children:[f.jsx(Hs,{className:"w-2.5 h-2.5"}),f.jsx("span",{className:"text-xs",children:"안정화"})]})]}),!h.overall&&f.jsx(Co,{className:"w-3 h-3 text-gray-500"})]}),f.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:[S?y.value.toFixed(y.label==="BPM"?0:y.label==="Stress"?2:y.label==="LF"||y.label==="HF"?1:y.label==="LF/HF"?2:1):"--",f.jsx("span",{className:"text-sm text-gray-400 ml-1",children:y.unit})]}),f.jsx("div",{className:`text-xs ${_.color} mb-1`,children:_.message}),x&&f.jsxs("div",{className:"text-xs text-gray-500",children:[y.historyLength,"개 샘플 평균"]})]})}),f.jsx(Vw,{className:"bg-neutral-700 border-neutral-600 shadow-xl",children:f.jsx("div",{className:"max-w-lg p-4 bg-neutral-700 rounded-lg",children:f.jsx("div",{className:"text-sm leading-relaxed space-y-2 [&>strong]:text-blue-300 [&>strong]:font-semibold [&>br]:block [&>br]:mb-1",style:{fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},dangerouslySetInnerHTML:{__html:(dT[y.label]||`<strong>${y.label}</strong><br/>상세 정보가 준비 중입니다.`).replace(/<strong>/g,'<strong class="text-blue-300 font-semibold">').replace(/공식:/g,'<span class="text-green-300 font-medium">공식:</span>').replace(/정상 범위:/g,'<span class="text-yellow-300 font-medium">정상 범위:</span>').replace(/해석:/g,'<span class="text-orange-300 font-medium">해석:</span>').replace(/참고문헌:/g,'<span class="text-purple-300 font-medium">참고문헌:</span>').replace(/설명:/g,'<span class="text-cyan-300 font-medium">설명:</span>')}})})})]})},y.label)};return!n||!A?f.jsx("div",{className:"w-full space-y-6",children:f.jsx("div",{className:"w-full h-80 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"text-6xl mb-4",children:"💓"}),f.jsx("div",{className:"text-lg text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"연결 후 심박변이도 분석 지수를 실시간으로 확인할 수 있습니다"}),f.jsx("div",{className:"text-xs text-gray-600 mt-3 p-2 bg-gray-800 rounded",children:"processedDataStore PPG 분석 결과 기반 지수 계산 중..."})]})})}):f.jsxs("div",{className:"w-full space-y-6",children:[n&&!a&&f.jsxs("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-5 w-5 text-red-400"}),f.jsxs("div",{className:"text-red-300",children:[f.jsx("div",{className:"font-medium",children:"전극 접촉 불량 감지"}),f.jsxs("div",{className:"text-sm",children:["FP1: ",i.fp1?"접촉 불량":"정상",", FP2: ",i.fp2?"접촉 불량":"정상"," - PPG 분석 정확도가 저하될 수 있습니다"]})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"심박변이도 분석 지수"}),p.isStabilized?f.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-900/30 text-green-300 border border-green-500/30 rounded-full text-xs",children:[f.jsx(Hs,{className:"w-3 h-3"}),f.jsxs("span",{children:["안정화됨 (",p.sampleCount,"개 샘플)"]})]}):f.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-900/30 text-yellow-300 border border-yellow-500/30 rounded-full text-xs",children:[f.jsx(Co,{className:"w-3 h-3"}),f.jsx("span",{children:p.isQualityGood?`안정화 중 (${p.sampleCount}/${p.requiredSamples})`:"신호 품질 개선 필요"})]})]}),(!n||r.status!=="connected")&&f.jsx("span",{className:"text-sm text-gray-400",children:"(디바이스 연결이 필요합니다.)"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"grid grid-cols-4 gap-4",children:v.slice(0,4).map(y=>m(y))}),f.jsx("div",{className:"grid grid-cols-4 gap-4",children:v.slice(4,8).map(y=>m(y))}),f.jsx("div",{className:"grid grid-cols-3 gap-4",children:v.slice(8,11).map(y=>m(y))}),f.jsx("div",{className:"grid grid-cols-3 gap-4",children:v.slice(11,14).map(y=>m(y))})]})]})},xLe=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-200 mb-2",children:"💓 PPG 심박 분석"}),f.jsx("p",{className:"text-gray-300",children:"실시간 광혈류측정(PPG) 신호 처리 및 심박변이도 분석 결과를 시각화합니다."})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"🔧 필터링된 PPG 신호"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"Red/IR LED 신호에 0.5-5.0Hz 밴드패스 필터를 적용하여 심박 패턴을 분석합니다. (DC 성분 제거됨)"}),f.jsx(mLe,{})]}),f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"📈 PPG 신호 품질 지수 (SQI)"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"신호 품질과 전극 접촉 상태를 모니터링합니다."}),f.jsx(vLe,{})]})]}),f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"💓 심박변이도 분석 지수"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"실시간 PPG 분석 결과 - 심박수, HRV, 스트레스 등 6개 지수"}),f.jsx(yLe,{})]})]}),bLe=()=>{const r=K.useRef(null),e=K.useRef(null),{connectionState:t}=Dn();tN();const n=No(),{isSensorContacted:a,leadOffStatus:i}=To(),s=hk(),[o,l]=K.useState(!1),[c,u]=K.useState(0),h=K.useRef(0),d=K.useRef([]),A=K.useCallback(y=>y<.1?"#3b82f6":y<.3?"#10b981":y<.8?"#f59e0b":"#ef4444",[]),g=K.useCallback(y=>y<.1?"stationary":y<.3?"sitting":y<.8?"walking":"running",[]),p=K.useMemo(()=>{if(!s||s.length===0)return{magnitudeData:[],hasData:!1};console.log(`📊 ACC 차트 데이터 처리 시작 - ${s.length}개 샘플`);const y=performance.now(),x=s.map((S,_)=>{const C=S.magnitude||Math.sqrt(S.x**2+S.y**2+S.z**2),w=Math.abs(C-1),B=A(w);return{value:w,itemStyle:{color:B,borderRadius:[2,2,0,0]},activityState:g(w)}}),b=performance.now();return console.log(`✅ ACC 차트 데이터 처리 완료 - ${b-y}ms`),{magnitudeData:x,hasData:!0}},[s,A,g]),v=K.useMemo(()=>({backgroundColor:"transparent",title:{text:p.hasData?"ACC 가속도 크기 (중력 제거)":"ACC 가속도 - 데이터 없음",left:"center",textStyle:{fontSize:14,fontWeight:"normal",color:"#f3f4f6"}},tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#4b5563",textStyle:{color:"#f3f4f6"},formatter:y=>{const x=y[0].dataIndex,b=y[0].value.toFixed(2),S=y[0].data.activityState;return`샘플 #${x}<br/>움직임 크기: ${b}g<br/>활동 상태: ${S}<br/>(중력 제거)`}},legend:{data:["움직임 크기"],top:30,textStyle:{color:"#d1d5db"}},grid:{left:"12%",right:"8%",bottom:"18%",top:"20%"},xAxis:{type:"category",name:"시간 (과거 5초)",nameLocation:"middle",nameGap:30,nameTextStyle:{color:"#d1d5db"},axisLine:{lineStyle:{color:"#4b5563"}},axisTick:{lineStyle:{color:"#4b5563"}},axisLabel:{show:!1},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},yAxis:{type:"value",name:"움직임 크기 (g)",nameLocation:"middle",nameGap:35,nameTextStyle:{color:"#d1d5db"},min:0,max:2,axisLine:{lineStyle:{color:"#4b5563"}},axisTick:{lineStyle:{color:"#4b5563"}},axisLabel:{color:"#9ca3af",formatter:y=>y.toFixed(1)+"g"},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:[{name:"움직임 크기",type:"bar",data:p.magnitudeData,barWidth:"80%",animation:!1,large:!1,largeThreshold:1e3}],dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"none"}]}),[p.hasData]),m=K.useCallback(()=>{if(!e.current||!p.hasData)return;const y=performance.now(),x=Date.now();if(h.current>0){const S=(x-h.current)/1e3;if(d.current.push(S),d.current.length>5&&d.current.shift(),S>.01){const _=d.current.reduce((C,w)=>C+w,0)/d.current.length;u(_)}}h.current=x,e.current.setOption({series:[{name:"움직임 크기",type:"bar",data:p.magnitudeData,barWidth:"80%",animation:!1,large:!1,largeThreshold:1e3}]},!1);const b=performance.now();console.log(`🔄 차트 업데이트 완료 - ${b-y}ms, 색상 적용된 막대: ${p.magnitudeData.length}개, 업데이트 간격: ${c.toFixed(2)}초`)},[p,c]);return K.useEffect(()=>{if(r.current)return e.current||(console.log("🎯 차트 초기화 시작"),e.current=dy(r.current),e.current.setOption(v),l(!0),console.log("✅ 차트 초기화 완료")),()=>{e.current&&(e.current.dispose(),e.current=null,l(!1))}},[]),K.useEffect(()=>{e.current&&o&&e.current.setOption(v,!0)},[v,o]),K.useEffect(()=>{o&&p.hasData&&m()},[o,p.hasData,m]),K.useEffect(()=>{let y;const x=()=>{clearTimeout(y),y=setTimeout(()=>{e.current&&e.current.resize()},100)};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x),clearTimeout(y)}},[]),p.hasData?(K.useMemo(()=>{if(!p.hasData||p.magnitudeData.length===0)return{state:"unknown",color:"#6b7280"};const x=p.magnitudeData[p.magnitudeData.length-1].value;return x<.1?{state:"정지",color:"#3b82f6"}:x<.3?{state:"앉기",color:"#10b981"}:x<.8?{state:"걷기",color:"#f59e0b"}:{state:"뛰기",color:"#ef4444"}},[p]),f.jsxs("div",{className:"w-full h-64 relative",children:[n&&!a&&f.jsxs("div",{className:"absolute top-0 left-0 right-0 z-20 mb-2 p-2 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-4 w-4 text-red-400"}),f.jsxs("span",{className:"text-red-300 text-sm",children:["전극 접촉 불량 (FP1: ",i.fp1?"OFF":"ON",", FP2: ",i.fp2?"OFF":"ON",") - ACC 신호 품질이 저하될 수 있습니다"]})]}),f.jsx("div",{className:"absolute top-2 right-2 z-10",children:f.jsxs("div",{className:"flex items-center space-x-2 px-2 py-1 bg-gray-800 bg-opacity-80 rounded-md border border-gray-600",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),f.jsxs("span",{className:"text-xs text-gray-300",children:["그래프 업데이트 주기: ",c>0?`${c.toFixed(2)}초`:"측정 중..."]})]})}),f.jsx("div",{className:"absolute top-12 left-1/2 transform -translate-x-1/2 z-10"}),f.jsx("div",{ref:r,className:"w-full h-full"})]})):f.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-3",children:[f.jsx("div",{className:"text-4xl mb-2",children:"📱"}),f.jsx("div",{className:"text-base text-gray-300",children:"그래프에 표시할 데이터가 없습니다"}),f.jsx("div",{className:"text-sm text-gray-400",children:"LINK BAND 디바이스를 연결해주세요"}),f.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"연결 후 ACC 가속도 신호를 실시간으로 확인할 수 있습니다"}),f.jsx("div",{className:"text-xs text-gray-600 mt-2 p-2 bg-gray-800 rounded",children:"processedDataStore ACC 버퍼 데이터 처리 중..."})]})})},wLe=()=>{const{connectionState:r}=Dn(),e=tN(),t=No(),{isSensorContacted:n,leadOffStatus:a}=To(),i=hk(),[s,o]=K.useState(Date.now());K.useEffect(()=>{const v=setInterval(()=>{o(Date.now())},1e3);return()=>clearInterval(v)},[]);const l=K.useMemo(()=>{if(!i||i.length===0)return{count:0,recentActivity:0,indexRange:"0-0",totalActivity:0};const v=i.slice(-10),m=v.reduce((x,b)=>{const S=b.magnitude||Math.sqrt(b.x**2+b.y**2+b.z**2),_=Math.abs(S-1);return x+_},0)/v.length,y=i.reduce((x,b)=>{const S=b.magnitude||Math.sqrt(b.x**2+b.y**2+b.z**2),_=Math.abs(S-1);return x+_},0)/i.length;return{count:i.length,recentActivity:m.toFixed(2),totalActivity:y.toFixed(2),indexRange:`0-${i.length-1}`}},[i]),c=K.useMemo(()=>{const v=e==null?void 0:e.indices,m=(v==null?void 0:v.avgMovement)||0,y=x=>x<5?"stationary":x<10?"sitting":x<20?"walking":"running";return{activity:(v==null?void 0:v.activity)||0,stability:(v==null?void 0:v.stability)||0,intensity:(v==null?void 0:v.intensity)||0,balance:(v==null?void 0:v.balance)||0,activityState:y(m),avgMovement:m,stdMovement:(v==null?void 0:v.stdMovement)||0,maxMovement:(v==null?void 0:v.maxMovement)||0}},[e]),u=v=>{switch(v.toLowerCase()){case"stationary":return"text-blue-400";case"sitting":return"text-green-400";case"walking":return"text-yellow-400";case"running":return"text-red-400";default:return"text-gray-400"}},h=v=>{switch(v.toLowerCase()){case"stationary":return"bg-blue-500/20";case"sitting":return"bg-green-500/20";case"walking":return"bg-yellow-500/20";case"running":return"bg-red-500/20";default:return"bg-gray-500/20"}},d=(v,m)=>{switch(v){case"안정성":return m<30?{status:"low",color:"text-red-400",message:"매우 불안정 (균형 장애 가능성)"}:m<50?{status:"low",color:"text-yellow-400",message:"불안정한 자세 (주의 필요)"}:m<70?{status:"normal",color:"text-blue-400",message:"정상 안정성 (양호한 상태)"}:{status:"high",color:"text-blue-400",message:"매우 안정적인 자세"};case"강도":return m<25?{status:"low",color:"text-blue-400",message:"저강도 활동 (휴식, 수면)"}:m<50?{status:"normal",color:"text-green-400",message:"중저강도 활동 (일상 생활)"}:m<75?{status:"high",color:"text-yellow-400",message:"중고강도 활동 (운동, 작업)"}:{status:"very_high",color:"text-red-400",message:"고강도 활동 (격렬한 운동)"};case"Average Movement":return m<5?{status:"low",color:"text-blue-400",message:"Stationary (정지 상태)"}:m<10?{status:"normal",color:"text-green-400",message:"Sitting (앉기)"}:m<20?{status:"high",color:"text-yellow-400",message:"Walking (걷기)"}:{status:"very_high",color:"text-red-400",message:"Running (달리기)"};case"Max Movement":return m<5?{status:"low",color:"text-blue-400",message:"Stationary (정지 상태)"}:m<10?{status:"normal",color:"text-green-400",message:"Sitting (앉기)"}:m<20?{status:"high",color:"text-yellow-400",message:"Walking (걷기)"}:{status:"very_high",color:"text-red-400",message:"Running (달리기)"};default:return{status:"unknown",color:"text-gray-400",message:"상태 분석 중..."}}},A=K.useMemo(()=>({overall:l.count>=50,sampleCount:l.count,isStabilized:l.count>=100}),[l.count]),g=[{label:"안정성",value:c.stability,unit:"%",color:"bg-green-500",description:"자세 안정성 지수",historyLength:l.count},{label:"강도",value:c.intensity,unit:"%",color:"bg-red-500",description:"움직임 강도 수준",historyLength:l.count},{label:"Average Movement",value:c.avgMovement,unit:"g",color:"bg-cyan-500",description:"평균 움직임 크기",historyLength:l.count},{label:"Max Movement",value:c.maxMovement,unit:"g",color:"bg-orange-500",description:"최대 움직임 크기",historyLength:l.count}],p=(v,m)=>{const y=v.value!==null&&v.value!==void 0&&!isNaN(v.value),x=d(v.label,v.value||0),b=A.isStabilized,S=A.overall?"opacity-100":"opacity-75",_=()=>{if(!A.overall)return"bg-gray-500";if(v.label==="안정성")switch(x.status){case"low":return v.value<30?"bg-red-500":"bg-yellow-500";case"normal":return"bg-blue-500";case"high":return"bg-blue-500";default:return"bg-gray-500"}switch(x.status){case"low":return"bg-blue-500";case"normal":return"bg-green-500";case"high":return"bg-yellow-500";case"very_high":return"bg-orange-500";case"extreme":return"bg-red-500";default:return"bg-gray-500"}};return f.jsx(cT,{children:f.jsxs(uT,{children:[f.jsx(hT,{asChild:!0,children:f.jsxs("div",{className:`bg-gray-800 border border-gray-700 rounded-lg p-4 hover:bg-gray-700 transition-colors ${S}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-3 h-3 rounded-full ${_()}`}),f.jsx("span",{className:"text-sm font-medium text-gray-300",children:v.label}),b&&f.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-blue-900/30 text-blue-300 border border-blue-500/30 rounded text-xs",children:[f.jsx(Hs,{className:"w-2.5 h-2.5"}),f.jsx("span",{className:"text-xs",children:"안정화"})]})]}),!A.overall&&f.jsx(Co,{className:"w-3 h-3 text-gray-500"})]}),f.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:[y?v.unit==="g"?v.value.toFixed(2):v.value.toFixed(1):"--",f.jsx("span",{className:"text-sm text-gray-400 ml-1",children:v.unit})]}),f.jsx("div",{className:`text-xs font-medium mb-1 ${x.color}`,children:x.message}),b&&f.jsxs("div",{className:"text-xs text-gray-500",children:[v.historyLength,"개 샘플 분석"]})]})}),f.jsx(Vw,{className:"bg-neutral-700 border-neutral-600 shadow-xl",children:f.jsx("div",{className:"max-w-lg p-4 bg-neutral-700 rounded-lg",children:f.jsx("div",{className:"text-sm leading-relaxed space-y-2 [&>strong]:text-blue-300 [&>strong]:font-semibold [&>br]:block [&>br]:mb-1",style:{fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},dangerouslySetInnerHTML:{__html:(dT[v.label]||`<strong>${v.label}</strong><br/>상세 정보가 준비 중입니다.`).replace(/<strong>/g,'<strong class="text-blue-300 font-semibold">').replace(/공식:/g,'<span class="text-green-300 font-medium">공식:</span>').replace(/정상 범위:/g,'<span class="text-yellow-300 font-medium">정상 범위:</span>').replace(/해석:/g,'<span class="text-orange-300 font-medium">해석:</span>').replace(/참고문헌:/g,'<span class="text-purple-300 font-medium">참고문헌:</span>').replace(/설명:/g,'<span class="text-cyan-300 font-medium">설명:</span>').replace(/측정 방법:/g,'<span class="text-cyan-300 font-medium">측정 방법:</span>').replace(/분류 기준:/g,'<span class="text-yellow-300 font-medium">분류 기준:</span>').replace(/단위:/g,'<span class="text-green-300 font-medium">단위:</span>')}})})})]})},v.label)};return f.jsxs("div",{className:"w-full space-y-6",children:[t&&!n&&f.jsxs("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center gap-2",children:[f.jsx(da,{className:"h-5 w-5 text-red-400"}),f.jsxs("div",{className:"text-red-300",children:[f.jsx("div",{className:"font-medium",children:"전극 접촉 불량 감지"}),f.jsxs("div",{className:"text-sm",children:["FP1: ",a.fp1?"접촉 불량":"정상",", FP2: ",a.fp2?"접촉 불량":"정상"," - ACC 분석 정확도가 저하될 수 있습니다"]})]})]}),f.jsx("div",{className:`border border-gray-700 rounded-lg p-4 ${h(c.activityState)}`,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200",children:"현재 활동 상태"}),f.jsx("p",{className:`text-2xl font-bold mt-1 ${u(c.activityState)}`,children:c.activityState})]}),f.jsxs("div",{className:"text-right text-sm text-gray-400",children:[f.jsxs("p",{children:["전체 샘플: ",l.count,"개"]}),f.jsxs("p",{children:["최근 활동도: ",l.recentActivity,"g"]}),f.jsxs("p",{children:["전체 활동도: ",l.totalActivity,"g"]}),f.jsxs("p",{children:["인덱스 범위: ",l.indexRange]})]})]})}),f.jsx("div",{className:"grid grid-cols-4 gap-4",children:g.map((v,m)=>p(v))}),(!t||r.status!=="connected")&&f.jsx("div",{className:"text-center py-8",children:f.jsx("div",{className:"text-gray-400 text-sm",children:"디바이스 연결이 필요합니다"})})]})},SLe=()=>f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-200 mb-2",children:"📱 ACC 가속도 분석"}),f.jsx("p",{className:"text-gray-300",children:"실시간 3축 가속도계 신호 처리 및 움직임 패턴 분석 결과를 시각화합니다."})]}),f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6 h-[380px]",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"📊 가속도 크기 (Magnitude)"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"X, Y, Z축 가속도의 크기를 실시간으로 모니터링합니다."}),f.jsx(bLe,{})]}),f.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg shadow p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-4",children:"🎯 종합 분석 지수"}),f.jsx("div",{className:"text-sm text-gray-300 mb-4",children:"활동량, 자세 변화, 움직임 패턴 등 종합적인 움직임 분석을 시각화합니다."}),f.jsx(wLe,{})]})]});function _Le(){const{systemStatus:r}=W0(),{isConnected:e}=q0(),{isStreaming:t}=ww(),{initializeSystem:n}=vk(),a=IX(),i=EX(),{setActiveMenu:s}=xw();return K.useEffect(()=>{r==="idle"&&n()},[r,n]),e?f.jsx("div",{className:"flex-1 overflow-auto p-6",children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-medium text-foreground",children:"Visualizer"}),f.jsx("p",{className:"text-muted-foreground",children:"실시간 데이터 시각화"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Gt,{variant:t?"default":"secondary",children:t?"스트리밍 중":"대기 중"}),f.jsxs(Gt,{variant:a.overall==="excellent"?"default":a.overall==="good"?"secondary":"destructive",children:["신호 품질: ",a.overall==="excellent"?"우수":a.overall==="good"?"양호":a.overall==="fair"?"보통":"불량"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.heartRate&&f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-lg bg-red-100",children:f.jsx("div",{className:"w-6 h-6 text-red-600",children:"❤️"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"심박수"}),f.jsxs("p",{className:"text-lg font-medium",children:[i.heartRate.toFixed(0)," BPM"]})]})]})}),i.focusLevel&&f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-lg bg-blue-100",children:f.jsx("div",{className:"w-6 h-6 text-blue-600",children:"🧠"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"집중도"}),f.jsxs("p",{className:"text-lg font-medium",children:[i.focusLevel.toFixed(0),"%"]})]})]})}),i.stressLevel&&f.jsx(Ye,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-lg bg-yellow-100",children:f.jsx("div",{className:"w-6 h-6 text-yellow-600",children:"⚡"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"스트레스"}),f.jsxs("p",{className:"text-lg font-medium",children:[i.stressLevel.toFixed(0),"%"]})]})]})})]}),f.jsx(Ye,{className:"p-6 min-h-[900px]",children:f.jsxs(Ck,{defaultValue:"eeg",className:"h-full",children:[f.jsxs(vN,{className:"grid w-full grid-cols-3",children:[f.jsx(sl,{value:"eeg",children:"🧠 EEG 뇌파"}),f.jsx(sl,{value:"ppg",children:"❤️ PPG 심박"}),f.jsx(sl,{value:"acc",children:"📱 ACC 가속도"})]}),f.jsx(ol,{value:"eeg",className:"mt-6 min-h-[800px]",children:f.jsx(pLe,{})}),f.jsx(ol,{value:"ppg",className:"mt-6 min-h-[800px]",children:f.jsx(xLe,{})}),f.jsx(ol,{value:"acc",className:"mt-6 min-h-[800px]",children:f.jsx(SLe,{})})]})})]})}):f.jsx("div",{className:"flex-1 overflow-auto p-6",children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[f.jsx("div",{className:"flex justify-between items-center",children:f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-medium text-foreground",children:"Visualizer"}),f.jsx("p",{className:"text-muted-foreground",children:"실시간 데이터 시각화"})]})}),f.jsx(Ye,{className:"p-8",children:f.jsx("div",{className:"flex flex-col items-center justify-center min-h-96",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-6xl mb-4",children:"📡"}),f.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"디바이스 연결 필요"}),f.jsx("p",{className:"text-muted-foreground mb-6",children:"데이터 시각화를 위해 LINK BAND 디바이스를 연결해주세요."}),f.jsxs("div",{className:"flex flex-col items-center gap-6",children:[f.jsx(Gt,{variant:"outline",className:"text-base px-4 py-2",children:r==="initializing"?"시스템 초기화 중...":"연결 대기 중"}),f.jsx(At,{onClick:()=>s("linkband"),className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 text-xl font-bold h-16 min-w-64 shadow-lg transition-all duration-200 transform hover:scale-105",children:"Link Band 연결하기"})]})]})})})]})})}const AT=Fh()(NX(r=>({currentLanguage:"ko",setLanguage:e=>r({currentLanguage:e})}),{name:"language-storage"})),Pj={ko:{header:{enterApp:"앱 접속",getStarted:"시작하기",language:"언어"},nav:{home:"홈",features:"기능",about:"소개",contact:"문의",login:"로그인",signup:"회원가입",getStarted:"시작하기",howItWorks:"작동 방식",linkBand:"LINK BAND",aiReport:"AI 리포트",aiConsultation:"AI 상담",pricing:"가격"},hero:{title:"1분 측정,",subtitle:"즉시 AI 리포트",description:`LINK BAND 웨어러블 디바이스로 단 1분 측정만으로
개인 맞춤형 AI 건강 리포트를 받아보세요`,cta:"무료 체험 시작",watchDemo:"데모 보기"},process:{title:"간단한 3단계로 완성",step1:{title:"1. LINK BAND 착용",description:"초경량 50g 디바이스를 편안하게 착용하세요"},step2:{title:"2. 1분 측정",description:"앱을 실행하고 단 1분간 측정을 진행하세요"},step3:{title:"3. AI 리포트 완성",description:"즉시 개인 맞춤형 건강 분석 리포트를 받아보세요"}},features:{title:"Mind Breeze AI Report의 특별한 기능",subtitle:"최첨단 AI 기술로 정확하고 신뢰할 수 있는 건강 분석을 제공합니다",instantAnalysis:{title:"즉시 분석",description:"1분 측정 후 바로 AI 리포트 생성"},personalizedReport:{title:"개인 맞춤형 리포트",description:"개인의 생체 데이터를 기반한 맞춤형 분석"},aiConsultation:{title:"AI 상담",description:"리포트 기반 개별 AI 챗봇 상담 서비스"},realTimeMonitoring:{title:"실시간 모니터링",description:"EEG, PPG 생체신호 실시간 분석"},mobileOptimized:{title:"모바일 최적화",description:"언제 어디서나 간편한 건강 체크"},dataPrivacy:{title:"데이터 보안",description:"개인정보 보호를 위한 최고 수준의 보안"}},linkband:{title:"LINK BAND 2.0",subtitle:"초경량 웨어러블 EEG 디바이스",description:`50g 초경량 설계와 편안한 착용감으로
정밀한 생체신호 측정이 가능합니다`,specs:{weight:"50g 초경량",sensors:"2ch EEG & PPG",battery:"최대 8시간",connectivity:"Bluetooth 5.0",platforms:"모든 플랫폼 지원",comfort:"실리콘 밴드"}},aiReport:{title:"AI가 분석하는 당신의 건강",subtitle:"1분 측정으로 완성되는 종합 건강 리포트",features:{mentalHealth:"정신건강 분석",stressLevel:"스트레스 수준",cognitiveFunction:"인지 기능",recommendations:"개인 맞춤 추천"}},consultation:{title:"AI 상담 서비스",subtitle:"리포트 기반 개별 맞춤 상담",description:`생성된 리포트를 바탕으로 AI 챗봇이
개인별 건강 상담을 제공합니다`,features:{personalized:"개인 맞춤 상담",available24:"24시간 이용 가능",multilingual:"다국어 지원",datadriven:"데이터 기반 조언"}},pricing:{title:"요금제",subtitle:"당신에게 맞는 플랜을 선택하세요",free:{title:"무료 체험",price:"무료",features:["1회 측정 및 리포트","기본 AI 상담","모바일 앱 사용"],cta:"무료 시작"},basic:{title:"베이직",price:"월 9,900원",features:["월 10회 측정","상세 AI 리포트","AI 상담 무제한","데이터 히스토리"],cta:"시작하기"},premium:{title:"프리미엄",price:"월 19,900원",features:["무제한 측정","고급 AI 분석","개인 맞춤 추천","우선 고객 지원","PDF 리포트 다운로드"],cta:"시작하기"}},contact:{title:"문의하기",subtitle:"궁금한 점이 있으시면 언제든 연락주세요",form:{name:"이름",email:"이메일",message:"메시지",submit:"전송하기"},info:{email:"support@mindbreeze.ai",phone:"+82-2-1234-5678",address:"서울특별시 강남구 테헤란로 123"}},footer:{description:`Mind Breeze AI Report는 LINK BAND 디바이스를 활용한
혁신적인 AI 건강 분석 서비스입니다.`,links:{privacy:"개인정보처리방침",terms:"이용약관",support:"고객지원"},copyright:"© 2024 Mind Breeze AI Report. All rights reserved."}},en:{header:{enterApp:"Enter App",getStarted:"Get Started",language:"Language"},nav:{home:"Home",features:"Features",about:"About",contact:"Contact",login:"Login",signup:"Sign Up",getStarted:"Get Started",howItWorks:"How It Works",linkBand:"LINK BAND",aiReport:"AI Report",aiConsultation:"AI Consultation",pricing:"Pricing"},hero:{title:"1-Minute Measurement,",subtitle:"Instant AI Report",description:`Get personalized AI health reports with just 1 minute of measurement
using the LINK BAND wearable device`,cta:"Start Free Trial",watchDemo:"Watch Demo"},process:{title:"Complete in 3 Simple Steps",step1:{title:"1. Wear LINK BAND",description:"Comfortably wear the ultra-light 50g device"},step2:{title:"2. 1-Minute Measurement",description:"Launch the app and measure for just 1 minute"},step3:{title:"3. AI Report Ready",description:"Instantly receive your personalized health analysis report"}},features:{title:"Special Features of Mind Breeze AI Report",subtitle:"Providing accurate and reliable health analysis with cutting-edge AI technology",instantAnalysis:{title:"Instant Analysis",description:"AI report generated immediately after 1-minute measurement"},personalizedReport:{title:"Personalized Report",description:"Customized analysis based on individual biometric data"},aiConsultation:{title:"AI Consultation",description:"Individual AI chatbot consultation service based on reports"},realTimeMonitoring:{title:"Real-time Monitoring",description:"Real-time analysis of EEG and PPG biosignals"},mobileOptimized:{title:"Mobile Optimized",description:"Convenient health check anytime, anywhere"},dataPrivacy:{title:"Data Security",description:"Highest level of security for personal information protection"}},linkband:{title:"LINK BAND 2.0",subtitle:"Ultra-lightweight Wearable EEG Device",description:`Precise biosignal measurement with 50g ultra-light design
and comfortable wearing experience`,specs:{weight:"50g Ultra-light",sensors:"2ch EEG & PPG",battery:"Up to 8 hours",connectivity:"Bluetooth 5.0",platforms:"All platforms supported",comfort:"Silicone band"}},aiReport:{title:"Your Health Analyzed by AI",subtitle:"Comprehensive health report completed with 1-minute measurement",features:{mentalHealth:"Mental Health Analysis",stressLevel:"Stress Level",cognitiveFunction:"Cognitive Function",recommendations:"Personalized Recommendations"}},consultation:{title:"AI Consultation Service",subtitle:"Personalized consultation based on reports",description:`AI chatbot provides individual health consultation
based on generated reports`,features:{personalized:"Personalized Consultation",available24:"24/7 Available",multilingual:"Multi-language Support",datadriven:"Data-driven Advice"}},pricing:{title:"Pricing",subtitle:"Choose the plan that suits you",free:{title:"Free Trial",price:"Free",features:["1 measurement & report","Basic AI consultation","Mobile app access"],cta:"Start Free"},basic:{title:"Basic",price:"$9.99/month",features:["10 measurements per month","Detailed AI reports","Unlimited AI consultation","Data history"],cta:"Get Started"},premium:{title:"Premium",price:"$19.99/month",features:["Unlimited measurements","Advanced AI analysis","Personalized recommendations","Priority customer support","PDF report download"],cta:"Get Started"}},contact:{title:"Contact Us",subtitle:"Feel free to reach out if you have any questions",form:{name:"Name",email:"Email",message:"Message",submit:"Send Message"},info:{email:"support@mindbreeze.ai",phone:"+1-555-123-4567",address:"123 Tech Street, San Francisco, CA 94105"}},footer:{description:`Mind Breeze AI Report is an innovative AI health analysis service
utilizing LINK BAND devices.`,links:{privacy:"Privacy Policy",terms:"Terms of Service",support:"Customer Support"},copyright:"© 2024 Mind Breeze AI Report. All rights reserved."}},jp:{header:{enterApp:"アプリに入る",getStarted:"始める",language:"言語"},nav:{home:"ホーム",features:"機能",about:"概要",contact:"お問い合わせ",login:"ログイン",signup:"新規登録",getStarted:"始める",howItWorks:"動作方法",linkBand:"LINK BAND",aiReport:"AIレポート",aiConsultation:"AI相談",pricing:"料金"},hero:{title:"1分測定で",subtitle:"AI レポート完成",description:`LINK BAND ウェアラブルデバイスで
たった1分の測定で個人向けAI健康レポートを取得`,cta:"無料トライアル開始",watchDemo:"デモを見る"},process:{title:"簡単3ステップで完了",step1:{title:"1. LINK BAND 装着",description:"超軽量50gデバイスを快適に装着"},step2:{title:"2. 1分測定",description:"アプリを起動してたった1分間測定"},step3:{title:"3. AI レポート完成",description:"即座に個人向け健康分析レポートを受け取り"}},features:{title:"Mind Breeze AI Report の特別な機能",subtitle:"最先端AI技術で正確で信頼できる健康分析を提供",instantAnalysis:{title:"即座分析",description:"1分測定後すぐにAIレポート生成"},personalizedReport:{title:"個人向けレポート",description:"個人の生体データに基づくカスタマイズ分析"},aiConsultation:{title:"AI相談",description:"レポートに基づく個別AIチャットボット相談サービス"},realTimeMonitoring:{title:"リアルタイム監視",description:"EEG、PPG生体信号のリアルタイム分析"},mobileOptimized:{title:"モバイル最適化",description:"いつでもどこでも簡単な健康チェック"},dataPrivacy:{title:"データセキュリティ",description:"個人情報保護のための最高レベルのセキュリティ"}},linkband:{title:"LINK BAND 2.0",subtitle:"超軽量ウェアラブルEEGデバイス",description:`50g超軽量設計と快適な装着感で
精密な生体信号測定が可能`,specs:{weight:"50g超軽量",sensors:"2ch EEG & PPG",battery:"最大8時間",connectivity:"Bluetooth 5.0",platforms:"全プラットフォーム対応",comfort:"シリコンバンド"}},aiReport:{title:"AIが分析するあなたの健康",subtitle:"1分測定で完成する総合健康レポート",features:{mentalHealth:"メンタルヘルス分析",stressLevel:"ストレスレベル",cognitiveFunction:"認知機能",recommendations:"個人向け推奨"}},consultation:{title:"AI相談サービス",subtitle:"レポートに基づく個別カスタマイズ相談",description:`生成されたレポートを基にAIチャットボットが
個人別健康相談を提供`,features:{personalized:"個人向け相談",available24:"24時間利用可能",multilingual:"多言語対応",datadriven:"データ基盤アドバイス"}},pricing:{title:"料金プラン",subtitle:"あなたに合ったプランを選択",free:{title:"無料トライアル",price:"無料",features:["1回測定・レポート","基本AI相談","モバイルアプリ利用"],cta:"無料開始"},basic:{title:"ベーシック",price:"月額1,200円",features:["月10回測定","詳細AIレポート","AI相談無制限","データ履歴"],cta:"開始する"},premium:{title:"プレミアム",price:"月額2,400円",features:["無制限測定","高級AI分析","個人向け推奨","優先カスタマーサポート","PDFレポートダウンロード"],cta:"開始する"}},contact:{title:"お問い合わせ",subtitle:"ご質問がございましたらお気軽にお問い合わせください",form:{name:"名前",email:"メール",message:"メッセージ",submit:"送信"},info:{email:"support@mindbreeze.ai",phone:"+81-3-1234-5678",address:"東京都渋谷区渋谷1-2-3"}},footer:{description:`Mind Breeze AI ReportはLINK BANDデバイスを活用した
革新的なAI健康分析サービスです。`,links:{privacy:"プライバシーポリシー",terms:"利用規約",support:"カスタマーサポート"},copyright:"© 2024 Mind Breeze AI Report. All rights reserved."}}},CLe={documents:{title:"문서",subtitle:"SDK 개발 관련 문서를 조회하고 볼 수 있습니다.",searchPlaceholder:"문서 검색..."},landing:Pj.ko},BLe={documents:{title:"Documents",subtitle:"View and browse SDK development related documentation.",searchPlaceholder:"Search documents..."},landing:Pj.en},NLe={documents:{title:"ドキュメント",subtitle:"SDK開発関連ドキュメントを閲覧・参照できます。",searchPlaceholder:"ドキュメント検索..."},landing:Pj.jp},TLe={ko:CLe,en:BLe,jp:NLe},kj=r=>{const{language:e}=require("../stores/languageStore").useLanguageStore();return TLe[r||e]},j1=[{id:"getting-started",title:"시작하기",subsections:[{id:"overview",title:"개요",filePath:"getting-started/overview.md"},{id:"system-requirements",title:"시스템 요구사항",filePath:"getting-started/system-requirements.md"},{id:"first-connection",title:"첫 번째 연결",filePath:"getting-started/first-connection.md"},{id:"interface-tour",title:"인터페이스 둘러보기",filePath:"getting-started/interface-tour.md"}]},{id:"user-guide",title:"사용자 가이드",subsections:[{id:"device-manager",title:"Device Manager",filePath:"user-guide/device-manager.md"},{id:"visualizer",title:"Visualizer",filePath:"user-guide/visualizer.md"},{id:"data-center",title:"Data Center",filePath:"user-guide/data-center.md"},{id:"dashboard",title:"Dashboard",filePath:"user-guide/dashboard.md"}]},{id:"data-management",title:"데이터 관리",subsections:[{id:"data-formats",title:"데이터 형식",filePath:"data-management/data-formats.md"},{id:"export-options",title:"내보내기 옵션",filePath:"data-management/export-options.md"},{id:"session-management",title:"세션 관리",filePath:"data-management/session-management.md"},{id:"storage-info",title:"저장소 정보",filePath:"data-management/storage-info.md"}]}],cV={ko:{"getting-started":"시작하기",overview:"개요","system-requirements":"시스템 요구사항","first-connection":"첫 번째 연결","interface-tour":"인터페이스 둘러보기","user-guide":"사용자 가이드","device-manager":"Device Manager",visualizer:"Visualizer","data-center":"Data Center",dashboard:"Dashboard","data-management":"데이터 관리","data-formats":"데이터 형식","export-options":"내보내기 옵션","session-management":"세션 관리","storage-info":"저장소 정보"},en:{"getting-started":"Getting Started",overview:"Overview","system-requirements":"System Requirements","first-connection":"First Connection","interface-tour":"Interface Tour","user-guide":"User Guide","device-manager":"Device Manager",visualizer:"Visualizer","data-center":"Data Center",dashboard:"Dashboard","data-management":"Data Management","data-formats":"Data Formats","export-options":"Export Options","session-management":"Session Management","storage-info":"Storage Info"}},ILe={"getting-started":mh,"user-guide":Ba,"data-management":go},ELe=({activeSection:r,activeSubsection:e,onSectionChange:t,onSubsectionChange:n})=>{const{currentLanguage:a}=AT(),i=j1.map(l=>{var c;return{id:l.id,label:((c=cV[a])==null?void 0:c[l.id])||l.title}}),s=l=>{const c=j1.find(u=>u.id===l);return c?c.subsections.map(u=>{var h;return{id:u.id,label:((h=cV[a])==null?void 0:h[u.id])||u.title}}):[]},o=l=>{t(l),n("")};return f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx("div",{className:"p-5 border-b border-border",children:f.jsx("h2",{className:"text-base font-semibold text-foreground mb-4",children:a==="ko"?"목차":"Contents"})}),f.jsx("div",{className:"flex-1 overflow-auto p-6",children:f.jsx("nav",{className:"space-y-8",children:i.map(l=>{const c=ILe[l.id],u=r===l.id,h=s(l.id);return f.jsxs("div",{className:"space-y-2 mb-4",children:[f.jsxs(At,{variant:u?"default":"ghost",className:`w-full justify-start text-left h-auto py-3.5 px-4 ${u?"bg-primary text-primary-foreground":"hover:bg-muted"}`,onClick:()=>o(l.id),children:[f.jsx(c,{className:"w-4 h-4 mr-2 flex-shrink-0"}),f.jsx("span",{className:"flex-1 text-sm font-medium text-left",children:l.label}),h.length>0&&f.jsx(oW,{className:`w-4 h-4 transition-transform ${u?"rotate-90":""}`})]}),u&&h.length>0&&f.jsx("div",{className:"ml-6 space-y-2 mt-3",children:h.map(d=>f.jsx(At,{variant:"ghost",className:`w-full justify-start text-left h-auto py-2.5 px-3 text-sm flex items-start ${e===d.id?"bg-muted text-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,onClick:()=>n(d.id),children:f.jsx("span",{className:"block w-full text-left",children:d.label})},d.id))})]},l.id)})})})]})};function Fj(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Gp=Fj();function ise(r){Gp=r}var O1={exec:()=>null};function hn(r,e=""){let t=typeof r=="string"?r:r.source,n={replace:(a,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(ds.caret,"$1"),t=t.replace(a,s),n},getRegex:()=>new RegExp(t,e)};return n}var ds={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},DLe=/^(?:[ \t]*(?:\n|$))+/,MLe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,RLe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,$w=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,LLe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,jj=/(?:[*+-]|\d{1,9}[.)])/,sse=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ose=hn(sse).replace(/bull/g,jj).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),PLe=hn(sse).replace(/bull/g,jj).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Oj=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,kLe=/^[^\n]+/,Uj=/(?!\s*\])(?:\\.|[^\[\]\\])+/,FLe=hn(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Uj).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),jLe=hn(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,jj).getRegex(),fT="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Hj=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,OLe=hn("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Hj).replace("tag",fT).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),lse=hn(Oj).replace("hr",$w).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fT).getRegex(),ULe=hn(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",lse).getRegex(),Qj={blockquote:ULe,code:MLe,def:FLe,fences:RLe,heading:LLe,hr:$w,html:OLe,lheading:ose,list:jLe,newline:DLe,paragraph:lse,table:O1,text:kLe},uV=hn("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",$w).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fT).getRegex(),HLe={...Qj,lheading:PLe,table:uV,paragraph:hn(Oj).replace("hr",$w).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",uV).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fT).getRegex()},QLe={...Qj,html:hn(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Hj).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:O1,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:hn(Oj).replace("hr",$w).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ose).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},zLe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,GLe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,cse=/^( {2,}|\\)\n(?!\s*$)/,VLe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,gT=/[\p{P}\p{S}]/u,zj=/[\s\p{P}\p{S}]/u,use=/[^\s\p{P}\p{S}]/u,$Le=hn(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,zj).getRegex(),hse=/(?!~)[\p{P}\p{S}]/u,KLe=/(?!~)[\s\p{P}\p{S}]/u,WLe=/(?:[^\s\p{P}\p{S}]|~)/u,qLe=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,dse=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,YLe=hn(dse,"u").replace(/punct/g,gT).getRegex(),XLe=hn(dse,"u").replace(/punct/g,hse).getRegex(),Ase="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",ZLe=hn(Ase,"gu").replace(/notPunctSpace/g,use).replace(/punctSpace/g,zj).replace(/punct/g,gT).getRegex(),JLe=hn(Ase,"gu").replace(/notPunctSpace/g,WLe).replace(/punctSpace/g,KLe).replace(/punct/g,hse).getRegex(),ePe=hn("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,use).replace(/punctSpace/g,zj).replace(/punct/g,gT).getRegex(),tPe=hn(/\\(punct)/,"gu").replace(/punct/g,gT).getRegex(),rPe=hn(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),nPe=hn(Hj).replace("(?:-->|$)","-->").getRegex(),aPe=hn("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",nPe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),nB=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,iPe=hn(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",nB).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),fse=hn(/^!?\[(label)\]\[(ref)\]/).replace("label",nB).replace("ref",Uj).getRegex(),gse=hn(/^!?\[(ref)\](?:\[\])?/).replace("ref",Uj).getRegex(),sPe=hn("reflink|nolink(?!\\()","g").replace("reflink",fse).replace("nolink",gse).getRegex(),Gj={_backpedal:O1,anyPunctuation:tPe,autolink:rPe,blockSkip:qLe,br:cse,code:GLe,del:O1,emStrongLDelim:YLe,emStrongRDelimAst:ZLe,emStrongRDelimUnd:ePe,escape:zLe,link:iPe,nolink:gse,punctuation:$Le,reflink:fse,reflinkSearch:sPe,tag:aPe,text:VLe,url:O1},oPe={...Gj,link:hn(/^!?\[(label)\]\((.*?)\)/).replace("label",nB).getRegex(),reflink:hn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",nB).getRegex()},AL={...Gj,emStrongRDelimAst:JLe,emStrongLDelim:XLe,url:hn(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},lPe={...AL,br:hn(cse).replace("{2,}","*").getRegex(),text:hn(AL.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},YS={normal:Qj,gfm:HLe,pedantic:QLe},bx={normal:Gj,gfm:AL,breaks:lPe,pedantic:oPe},cPe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hV=r=>cPe[r];function Ec(r,e){if(e){if(ds.escapeTest.test(r))return r.replace(ds.escapeReplace,hV)}else if(ds.escapeTestNoEncode.test(r))return r.replace(ds.escapeReplaceNoEncode,hV);return r}function dV(r){try{r=encodeURI(r).replace(ds.percentDecode,"%")}catch{return null}return r}function AV(r,e){var i;let t=r.replace(ds.findPipe,(s,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),n=t.split(ds.splitPipe),a=0;if(n[0].trim()||n.shift(),n.length>0&&!((i=n.at(-1))!=null&&i.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(ds.slashPipe,"|");return n}function Sx(r,e,t){let n=r.length;if(n===0)return"";let a=0;for(;a<n&&r.charAt(n-a-1)===e;)a++;return r.slice(0,n-a)}function uPe(r,e){if(r.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<r.length;n++)if(r[n]==="\\")n++;else if(r[n]===e[0])t++;else if(r[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function fV(r,e,t,n,a){let i=e.href,s=e.title||null,o=r[1].replace(a.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:r[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,l}function hPe(r,e,t){let n=r.match(t.other.indentCodeCompensation);if(n===null)return e;let a=n[1];return e.split(`
`).map(i=>{let s=i.match(t.other.beginningSpace);if(s===null)return i;let[o]=s;return o.length>=a.length?i.slice(a.length):i}).join(`
`)}var aB=class{constructor(e){Ce(this,"options");Ce(this,"rules");Ce(this,"lexer");this.options=e||Gp}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Sx(n,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let n=t[0],a=hPe(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:a}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){let a=Sx(n,"#");(this.options.pedantic||!a||this.rules.other.endingSpaceChar.test(a))&&(n=a.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Sx(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let n=Sx(t[0],`
`).split(`
`),a="",i="",s=[];for(;n.length>0;){let o=!1,l=[],c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))l.push(n[c]),o=!0;else if(!o)l.push(n[c]);else break;n=n.slice(c);let u=l.join(`
`),h=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");a=a?`${a}
${u}`:u,i=i?`${i}
${h}`:h;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,s,!0),this.lexer.state.top=d,n.length===0)break;let A=s.at(-1);if((A==null?void 0:A.type)==="code")break;if((A==null?void 0:A.type)==="blockquote"){let g=A,p=g.raw+`
`+n.join(`
`),v=this.blockquote(p);s[s.length-1]=v,a=a.substring(0,a.length-g.raw.length)+v.raw,i=i.substring(0,i.length-g.text.length)+v.text;break}else if((A==null?void 0:A.type)==="list"){let g=A,p=g.raw+`
`+n.join(`
`),v=this.list(p);s[s.length-1]=v,a=a.substring(0,a.length-A.raw.length)+v.raw,i=i.substring(0,i.length-g.raw.length)+v.raw,n=p.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:a,tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),a=n.length>1,i={type:"list",raw:"",ordered:a,start:a?+n.slice(0,-1):"",loose:!1,items:[]};n=a?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=a?n:"[*+-]");let s=this.rules.other.listItemRegex(n),o=!1;for(;e;){let c=!1,u="",h="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let d=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),A=e.split(`
`,1)[0],g=!d.trim(),p=0;if(this.options.pedantic?(p=2,h=d.trimStart()):g?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,h=d.slice(p),p+=t[1].length),g&&this.rules.other.blankLine.test(A)&&(u+=A+`
`,e=e.substring(A.length+1),c=!0),!c){let y=this.rules.other.nextBulletRegex(p),x=this.rules.other.hrRegex(p),b=this.rules.other.fencesBeginRegex(p),S=this.rules.other.headingBeginRegex(p),_=this.rules.other.htmlBeginRegex(p);for(;e;){let C=e.split(`
`,1)[0],w;if(A=C,this.options.pedantic?(A=A.replace(this.rules.other.listReplaceNesting,"  "),w=A):w=A.replace(this.rules.other.tabCharGlobal,"    "),b.test(A)||S.test(A)||_.test(A)||y.test(A)||x.test(A))break;if(w.search(this.rules.other.nonSpaceChar)>=p||!A.trim())h+=`
`+w.slice(p);else{if(g||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||b.test(d)||S.test(d)||x.test(d))break;h+=`
`+A}!g&&!A.trim()&&(g=!0),u+=C+`
`,e=e.substring(C.length+1),d=w.slice(p)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let v=null,m;this.options.gfm&&(v=this.rules.other.listIsTask.exec(h),v&&(m=v[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:u,task:!!v,checked:m,loose:!1,text:h,tokens:[]}),i.raw+=u}let l=i.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let c=0;c<i.items.length;c++)if(this.lexer.state.top=!1,i.items[c].tokens=this.lexer.blockTokens(i.items[c].text,[]),!i.loose){let u=i.items[c].tokens.filter(d=>d.type==="space"),h=u.length>0&&u.some(d=>this.rules.other.anyLine.test(d.raw));i.loose=h}if(i.loose)for(let c=0;c<i.items.length;c++)i.items[c].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),a=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:a,title:i}}}table(e){var o;let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=AV(t[1]),a=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===a.length){for(let l of a)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<n.length;l++)s.header.push({text:n[l],tokens:this.lexer.inline(n[l]),header:!0,align:s.align[l]});for(let l of i)s.rows.push(AV(l,s.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:s.align[u]})));return s}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let s=Sx(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{let s=uPe(t[2],"()");if(s===-2)return;if(s>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let a=t[2],i="";if(this.options.pedantic){let s=this.rules.other.pedanticHrefTitle.exec(a);s&&(a=s[1],i=s[3])}else i=t[3]?t[3].slice(1,-1):"";return a=a.trim(),this.rules.other.startAngleBracket.test(a)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?a=a.slice(1):a=a.slice(1,-1)),fV(t,{href:a&&a.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let a=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[a.toLowerCase()];if(!i){let s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return fV(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let a=this.rules.inline.emStrongLDelim.exec(e);if(!(!a||a[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(a[1]||a[2])||!n||this.rules.inline.punctuation.exec(n))){let i=[...a[0]].length-1,s,o,l=i,c=0,u=a[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+i);(a=u.exec(t))!=null;){if(s=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!s)continue;if(o=[...s].length,a[3]||a[4]){l+=o;continue}else if((a[5]||a[6])&&i%3&&!((i+o)%3)){c+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+c);let h=[...a[0]][0].length,d=e.slice(0,i+a.index+h+o);if(Math.min(i,o)%2){let g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}let A=d.slice(2,-2);return{type:"strong",raw:d,text:A,tokens:this.lexer.inlineTokens(A)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," "),a=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return a&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let n,a;return t[2]==="@"?(n=t[1],a="mailto:"+n):(n=t[1],a=n),{type:"link",raw:t[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let a,i;if(t[2]==="@")a=t[0],i="mailto:"+a;else{let s;do s=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(s!==t[0]);a=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:a,href:i,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},ah=class fL{constructor(e){Ce(this,"tokens");Ce(this,"options");Ce(this,"state");Ce(this,"tokenizer");Ce(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Gp,this.options.tokenizer=this.options.tokenizer||new aB,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:ds,block:YS.normal,inline:bx.normal};this.options.pedantic?(t.block=YS.pedantic,t.inline=bx.pedantic):this.options.gfm&&(t.block=YS.gfm,this.options.breaks?t.inline=bx.breaks:t.inline=bx.gfm),this.tokenizer.rules=t}static get rules(){return{block:YS,inline:bx}}static lex(e,t){return new fL(t).lex(e)}static lexInline(e,t){return new fL(t).inlineTokens(e)}lex(e){e=e.replace(ds.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var a,i,s;for(this.options.pedantic&&(e=e.replace(ds.tabCharGlobal,"    ").replace(ds.spaceLine,""));e;){let o;if((i=(a=this.options.extensions)==null?void 0:a.block)!=null&&i.some(c=>(o=c.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let c=t.at(-1);o.raw.length===1&&c!==void 0?c.raw+=`
`:t.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.at(-1).src=c.text):t.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),t.push(o);continue}let l=e;if((s=this.options.extensions)!=null&&s.startBlock){let c=1/0,u=e.slice(1),h;this.options.extensions.startBlock.forEach(d=>{h=d.call({lexer:this},u),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){let c=t.at(-1);n&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(o),n=l.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let c=t.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(o);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,l,c;let n=e,a=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,a.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,s="";for(;e;){i||(s=""),i=!1;let u;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(d=>(u=d.call({lexer:this},e,t))?(e=e.substring(u.raw.length),t.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);let d=t.at(-1);u.type==="text"&&(d==null?void 0:d.type)==="text"?(d.raw+=u.raw,d.text+=u.text):t.push(u);continue}if(u=this.tokenizer.emStrong(e,n,s)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),t.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),t.push(u);continue}let h=e;if((c=this.options.extensions)!=null&&c.startInline){let d=1/0,A=e.slice(1),g;this.options.extensions.startInline.forEach(p=>{g=p.call({lexer:this},A),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(h=e.substring(0,d+1))}if(u=this.tokenizer.inlineText(h)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(s=u.raw.slice(-1)),i=!0;let d=t.at(-1);(d==null?void 0:d.type)==="text"?(d.raw+=u.raw,d.text+=u.text):t.push(u);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},iB=class{constructor(e){Ce(this,"options");Ce(this,"parser");this.options=e||Gp}space(e){return""}code({text:e,lang:t,escaped:n}){var s;let a=(s=(t||"").match(ds.notSpaceStart))==null?void 0:s[0],i=e.replace(ds.endingNewline,"")+`
`;return a?'<pre><code class="language-'+Ec(a)+'">'+(n?i:Ec(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:Ec(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,n=e.start,a="";for(let o=0;o<e.items.length;o++){let l=e.items[o];a+=this.listitem(l)}let i=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+a+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){let a=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=a+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=a+" "+Ec(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:a+" ",text:a+" ",escaped:!0}):t+=a+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let a="";for(let i=0;i<e.rows.length;i++){let s=e.rows[i];n="";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);a+=this.tablerow({text:n})}return a&&(a=`<tbody>${a}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+a+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ec(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let a=this.parser.parseInline(n),i=dV(e);if(i===null)return a;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+Ec(t)+'"'),s+=">"+a+"</a>",s}image({href:e,title:t,text:n,tokens:a}){a&&(n=this.parser.parseInline(a,this.parser.textRenderer));let i=dV(e);if(i===null)return Ec(n);e=i;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${Ec(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ec(e.text)}},Vj=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ih=class gL{constructor(e){Ce(this,"options");Ce(this,"renderer");Ce(this,"textRenderer");this.options=e||Gp,this.options.renderer=this.options.renderer||new iB,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Vj}static parse(e,t){return new gL(t).parse(e)}static parseInline(e,t){return new gL(t).parseInline(e)}parse(e,t=!0){var a,i;let n="";for(let s=0;s<e.length;s++){let o=e[s];if((i=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&i[o.type]){let c=o,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){n+=u||"";continue}}let l=o;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;s+1<e.length&&e[s+1].type==="text";)c=e[++s],u+=`
`+this.renderer.text(c);t?n+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):n+=u;continue}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}parseInline(e,t=this.renderer){var a,i;let n="";for(let s=0;s<e.length;s++){let o=e[s];if((i=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&i[o.type]){let c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=c||"";continue}}let l=o;switch(l.type){case"escape":{n+=t.text(l);break}case"html":{n+=t.html(l);break}case"link":{n+=t.link(l);break}case"image":{n+=t.image(l);break}case"strong":{n+=t.strong(l);break}case"em":{n+=t.em(l);break}case"codespan":{n+=t.codespan(l);break}case"br":{n+=t.br(l);break}case"del":{n+=t.del(l);break}case"text":{n+=t.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}},sM,A5=(sM=class{constructor(e){Ce(this,"options");Ce(this,"block");this.options=e||Gp}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?ah.lex:ah.lexInline}provideParser(){return this.block?ih.parse:ih.parseInline}},Ce(sM,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),sM),dPe=class{constructor(...e){Ce(this,"defaults",Fj());Ce(this,"options",this.setOptions);Ce(this,"parse",this.parseMarkdown(!0));Ce(this,"parseInline",this.parseMarkdown(!1));Ce(this,"Parser",ih);Ce(this,"Renderer",iB);Ce(this,"TextRenderer",Vj);Ce(this,"Lexer",ah);Ce(this,"Tokenizer",aB);Ce(this,"Hooks",A5);this.use(...e)}walkTokens(e,t){var a,i;let n=[];for(let s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{let o=s;for(let l of o.header)n=n.concat(this.walkTokens(l.tokens,t));for(let l of o.rows)for(let c of l)n=n.concat(this.walkTokens(c.tokens,t));break}case"list":{let o=s;n=n.concat(this.walkTokens(o.items,t));break}default:{let o=s;(i=(a=this.defaults.extensions)==null?void 0:a.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{let c=o[l].flat(1/0);n=n.concat(this.walkTokens(c,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{let a={...n};if(a.async=this.defaults.async||a.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=t.renderers[i.name];s?t.renderers[i.name]=function(...o){let l=i.renderer.apply(this,o);return l===!1&&(l=s.apply(this,o)),l}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=t[i.level];s?s.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),a.extensions=t),n.renderer){let i=this.defaults.renderer||new iB(this.defaults);for(let s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;let o=s,l=n.renderer[o],c=i[o];i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h||""}}a.renderer=i}if(n.tokenizer){let i=this.defaults.tokenizer||new aB(this.defaults);for(let s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let o=s,l=n.tokenizer[o],c=i[o];i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}a.tokenizer=i}if(n.hooks){let i=this.defaults.hooks||new A5;for(let s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;let o=s,l=n.hooks[o],c=i[o];A5.passThroughHooks.has(s)?i[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(i,u)).then(d=>c.call(i,d));let h=l.call(i,u);return c.call(i,h)}:i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}a.hooks=i}if(n.walkTokens){let i=this.defaults.walkTokens,s=n.walkTokens;a.walkTokens=function(o){let l=[];return l.push(s.call(this,o)),i&&(l=l.concat(i.call(this,o))),l}}this.defaults={...this.defaults,...a}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ah.lex(e,t??this.defaults)}parser(e,t){return ih.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let a={...n},i={...this.defaults,...a},s=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&a.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let o=i.hooks?i.hooks.provideLexer():e?ah.lex:ah.lexInline,l=i.hooks?i.hooks.provideParser():e?ih.parse:ih.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(c=>o(c,i)).then(c=>i.hooks?i.hooks.processAllTokens(c):c).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>l(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(s);try{i.hooks&&(t=i.hooks.preprocess(t));let c=o(t,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let u=l(c,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(c){return s(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let a="<p>An error occurred:</p><pre>"+Ec(n.message+"",!0)+"</pre>";return t?Promise.resolve(a):a}if(t)return Promise.reject(n);throw n}}},_p=new dPe;function tn(r,e){return _p.parse(r,e)}tn.options=tn.setOptions=function(r){return _p.setOptions(r),tn.defaults=_p.defaults,ise(tn.defaults),tn};tn.getDefaults=Fj;tn.defaults=Gp;tn.use=function(...r){return _p.use(...r),tn.defaults=_p.defaults,ise(tn.defaults),tn};tn.walkTokens=function(r,e){return _p.walkTokens(r,e)};tn.parseInline=_p.parseInline;tn.Parser=ih;tn.parser=ih.parse;tn.Renderer=iB;tn.TextRenderer=Vj;tn.Lexer=ah;tn.lexer=ah.lex;tn.Tokenizer=aB;tn.Hooks=A5;tn.parse=tn;tn.options;tn.setOptions;tn.use;tn.walkTokens;tn.parseInline;ih.parse;ah.lex;const APe=({filePath:r,className:e,onNavigate:t})=>{const[n,a]=K.useState(""),[i,s]=K.useState(!0),[o,l]=K.useState(null);K.useEffect(()=>{r&&(async()=>{try{s(!0),l(null);const h=await fetch(`/docs/${r}`);if(!h.ok)throw new Error(`Failed to load ${r}`);const d=await h.text();tn.setOptions({gfm:!0,breaks:!0});const A=await tn(d);a(A)}catch(h){console.error("Error loading markdown:",h),l(h instanceof Error?h.message:"Unknown error")}finally{s(!1)}})()},[r]);const c=u=>{const h=u.target;if(h&&h.tagName==="A"){const d=h.getAttribute("href");if(d){if(d.startsWith("http")||d.startsWith("https")||d.startsWith("mailto:")){u.preventDefault();try{window.open(d,"_blank","noopener,noreferrer");return}catch(A){console.warn("Failed to open external link in new window:",A)}}else if(d.endsWith(".md")||!d.startsWith("http")&&!d.startsWith("mailto:"))if(u.preventDefault(),t){const A=d.replace(".md","");t(A)}else console.warn("Internal link clicked but no navigation handler provided:",d)}}};return i?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"text-gray-400",children:"문서를 불러오는 중..."})}):o?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsxs("div",{className:"text-red-400",children:["문서를 불러올 수 없습니다: ",o]})}):f.jsx("div",{onClick:c,className:`markdown-body custom-table-styles ${e||""}`,dangerouslySetInnerHTML:{__html:n},style:{boxSizing:"border-box",minWidth:"200px",maxWidth:"100%",margin:"0",padding:"32px"}})},fPe=({selectedSection:r,selectedSubsection:e,onNavigate:t})=>{const{currentLanguage:n}=AT(),a=d=>{var p;const g=(d.split("/").pop()||d).replace(/^\.\.\//,"").replace(/\.md$/,"");for(const v of j1)for(const m of v.subsections)if(((p=m.filePath.split("/").pop())==null?void 0:p.replace(".md",""))===g)return{section:v.id,subsection:m.id};return null},i=d=>{if(t){const A=a(d);A?t(A.section,A.subsection):console.warn("Could not find section/subsection for path:",d)}};if(!r||!e)return f.jsx("div",{className:"flex-1 overflow-y-auto bg-black",children:f.jsx("div",{className:"min-h-full flex items-center justify-center",children:f.jsxs("div",{className:"text-center p-8",children:[f.jsx("div",{className:"flex items-center justify-center w-24 h-24 bg-gradient-to-br from-gray-600 to-gray-700 rounded-3xl shadow-2xl mb-6 mx-auto",children:f.jsx(Us,{className:"w-12 h-12 text-gray-300"})}),f.jsx("h2",{className:"text-2xl font-semibold text-gray-300 mb-4",children:n==="ko"?"문서를 선택해주세요":"Select a document"}),f.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:n==="ko"?"왼쪽 사이드바에서 문서를 선택하여 내용을 확인하세요.":"Choose a document from the sidebar to view its content."})]})})});const s=()=>{for(const d of j1)if(d.id===r){for(const A of d.subsections)if(A.id===e)return`${n}/${A.filePath}`}return`${n}/getting-started/overview.md`},o=()=>{for(const d of j1)if(d.id===r){for(const A of d.subsections)if(A.id===e)return{sectionTitle:d.title,subsectionTitle:A.title,sectionId:d.id}}return null},l=s(),c=o(),h={"getting-started":"from-emerald-500 via-green-500 to-teal-600","user-guide":"from-blue-500 via-indigo-500 to-cyan-600","api-reference":"from-orange-500 via-red-500 to-pink-600","data-management":"from-purple-500 via-violet-500 to-indigo-600","quick-start":"from-cyan-500 via-blue-500 to-indigo-600",examples:"from-pink-500 via-rose-500 to-red-600"}[r]||"from-gray-500 to-gray-600";return f.jsx("div",{className:"flex-1 overflow-y-auto bg-black",children:f.jsx("div",{className:"min-h-full",children:f.jsxs("div",{className:"max-w-5xl mx-auto px-8 py-12",children:[c&&f.jsxs("div",{className:"mb-12 p-8 bg-black border border-gray-500 rounded-3xl shadow-2xl card-hover animate-fade-in-up",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[f.jsx("div",{className:`flex items-center justify-center w-16 h-16 bg-gradient-to-br ${h} rounded-2xl shadow-2xl card-hover`,children:f.jsx(Us,{className:"w-8 h-8 text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:`text-3xl font-bold bg-gradient-to-r ${h} bg-clip-text text-transparent mb-2`,children:c.subsectionTitle}),f.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:c.sectionTitle})]})]}),f.jsxs("div",{className:"flex items-center gap-8 text-sm text-gray-500 dark:text-gray-400",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Co,{className:"w-4 h-4"}),f.jsx("span",{children:n==="ko"?"읽는 시간":"Reading time"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(PB,{className:"w-4 h-4"}),f.jsx("span",{children:n==="ko"?"개발자용":"For developers"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(que,{className:"w-4 h-4 text-yellow-500"}),f.jsx("span",{children:n==="ko"?"전문가 수준":"Expert level"})]})]})]}),f.jsx("div",{className:"bg-black border border-gray-500 rounded-3xl shadow-2xl p-8 card-hover animate-fade-in-up",style:{animationDelay:"0.2s"},children:f.jsx(APe,{filePath:l,onNavigate:i})})]})})})},gPe=()=>{const{currentLanguage:r,setLanguage:e}=AT(),t=kj(r),[n,a]=K.useState("getting-started"),[i,s]=K.useState("overview"),[o,l]=K.useState(""),c=()=>{e(r==="ko"?"en":"ko")},u=(h,d)=>{a(h),s(d)};return f.jsxs("div",{className:"h-full flex bg-background",children:[f.jsx("div",{className:"w-64 flex-shrink-0 border-r border-border bg-card",children:f.jsx(ELe,{activeSection:n,activeSubsection:i,onSectionChange:a,onSubsectionChange:s})}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[f.jsx("div",{className:"flex-shrink-0 border-b border-border bg-card p-6",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Us,{className:"w-8 h-8 text-foreground"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:t.documents.title}),f.jsx("p",{className:"text-sm text-muted-foreground",children:t.documents.subtitle})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"relative bg-black border border-gray-500 rounded-lg p-2",children:[f.jsx(Og,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(xo,{placeholder:t.documents.searchPlaceholder,value:o,onChange:h=>l(h.target.value),className:"pl-10 w-64 bg-transparent border-none text-white placeholder:text-gray-400"})]}),f.jsxs(At,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-2",children:[f.jsx(Yue,{className:"w-4 h-4"}),r==="ko"?"한국어":"English",f.jsx(lM,{className:"w-3 h-3 opacity-50"})]})]})]})}),f.jsx("div",{className:"flex-1 overflow-auto",children:f.jsx(fPe,{selectedSection:n,selectedSubsection:i,onNavigate:u})})]})]})},pPe=K.createContext(null);function gV({children:r,mode:e,onClose:t,onModeChange:n}){const a={stores:{processedDataStore:null,systemStore:null,rawDataStore:null,sensorDataStore:null,deviceStore:null},mode:e,onClose:t,onModeChange:n};return f.jsx(pPe.Provider,{value:a,children:r})}function mPe({component:r,initialMode:e="fullscreen",onClose:t,className:n=""}){const[a,i]=K.useState(e),[s,o]=K.useState(!1);K.useRef(null);const l=u=>{i(u)},c=()=>{const u=window.__aiHealthReportAppState;u&&u.handleBack&&u.handleBack()};return K.useEffect(()=>{const h=setInterval(()=>{const d=window.__aiHealthReportAppState;d&&o(d.currentScreen&&d.currentScreen!=="home")},100);return()=>clearInterval(h)},[]),a==="fullscreen"?f.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-gray-900 flex-shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("h1",{className:"text-lg font-semibold text-white",children:"AI Health Report"}),f.jsx("span",{className:"text-sm text-gray-400",children:"전체화면 모드"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[s&&f.jsxs(At,{onClick:c,variant:"outline",size:"sm",className:"border-gray-600 text-gray-400 hover:text-white hover:bg-gray-800",children:[f.jsx(o0,{className:"w-4 h-4 mr-2"}),"이전"]}),f.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-800 transition-colors","aria-label":"애플리케이션 닫기",children:[f.jsx(Z1,{className:"h-4 w-4"}),f.jsx("span",{className:"text-sm",children:"닫기"})]})]})]}),f.jsx("div",{className:"flex-1 overflow-auto bg-black",children:f.jsx(gV,{mode:a,onClose:t,onModeChange:l,children:f.jsx(r,{context:{stores:{},mode:a,onClose:t,onModeChange:l}})})}),f.jsx("div",{className:"flex-shrink-0",children:f.jsx($X,{})})]}):f.jsxs("div",{className:`bg-card border border-border rounded-lg shadow-lg ${n}`,children:[f.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border",children:[f.jsx("h2",{className:"text-sm font-medium text-foreground",children:"AI Health Report"}),f.jsx("button",{onClick:t,className:"text-muted-foreground hover:text-foreground","aria-label":"위젯 닫기",children:f.jsx(Z1,{className:"h-4 w-4"})})]}),f.jsx("div",{className:"p-4",children:f.jsx(gV,{mode:a,onClose:t,onModeChange:l,children:f.jsx(r,{context:{stores:{},mode:a,onClose:t,onModeChange:l}})})})]})}function vPe({onStartNewMeasurement:r,onViewHistory:e,onViewTrends:t}){var A;const n=Dn(),a=cr(),[i,s]=K.useState(null),[o,l]=K.useState(!1);K.useEffect(()=>{const g=async()=>{var m;if(((m=n==null?void 0:n.connectionState)==null?void 0:m.status)==="connected"){l(!0);try{const y=await jr.getBatteryLevel();s(y),console.log("🔋 bluetoothService에서 베터리 정보 가져옴:",y)}catch(y){console.error("🔋 베터리 정보 가져오기 실패:",y),s(null)}finally{l(!1)}}else s(null),l(!1)};g();const p=setInterval(g,5e3);return()=>clearInterval(p)},[(A=n==null?void 0:n.connectionState)==null?void 0:A.status]);const c=K.useMemo(()=>{var v,m;const g=[],p=((v=n==null?void 0:n.connectionState)==null?void 0:v.status)==="connected";if(g.push({id:"connection",name:"디바이스 연결",status:p?"ok":"error",message:p?"디바이스가 연결되었습니다":"디바이스를 연결해주세요",icon:f.jsx(I5,{className:"w-4 h-4"}),required:!0}),p&&((m=n==null?void 0:n.connectedDevice)!=null&&m.samplingRates)){const y=n.connectedDevice.samplingRates;g.push({id:"eeg_rate",name:"EEG 샘플링 레이트",status:y.eeg>=240?"ok":"error",message:y.eeg>=240?`EEG: ${y.eeg}Hz (정상)`:`EEG: ${y.eeg}Hz (240Hz 이상 필요)`,icon:f.jsx(Ba,{className:"w-4 h-4"}),required:!0}),g.push({id:"ppg_rate",name:"PPG 샘플링 레이트",status:y.ppg>=40?"ok":"error",message:y.ppg>=40?`PPG: ${y.ppg}Hz (정상)`:`PPG: ${y.ppg}Hz (40Hz 이상 필요)`,icon:f.jsx($l,{className:"w-4 h-4"}),required:!0}),g.push({id:"acc_rate",name:"ACC 샘플링 레이트",status:y.acc>=20?"ok":"error",message:y.acc>=20?`ACC: ${y.acc}Hz (정상)`:`ACC: ${y.acc}Hz (20Hz 이상 필요)`,icon:f.jsx(mh,{className:"w-4 h-4"}),required:!0})}else p&&g.push({id:"sampling_rates",name:"샘플링 레이트 정보",status:"warning",message:"샘플링 레이트 정보를 확인하는 중...",icon:f.jsx(Co,{className:"w-4 h-4"}),required:!0});if(p&&(o?g.push({id:"battery_loading",name:"배터리 정보",status:"warning",message:"배터리 정보를 확인하는 중...",icon:f.jsx(fA,{className:"w-4 h-4"}),required:!1}):i!==null&&i>0?g.push({id:"battery",name:"배터리 레벨",status:i>=10?"ok":"warning",message:i>=10?`배터리: ${i}% (정상)`:`배터리: ${i}% (낮음, 측정 가능)`,icon:f.jsx(fA,{className:"w-4 h-4"}),required:!1}):g.push({id:"battery_unavailable",name:"배터리 정보",status:"warning",message:"배터리 정보를 가져올 수 없습니다",icon:f.jsx(fA,{className:"w-4 h-4"}),required:!1})),p){const y=(a==null?void 0:a.isConnected)||!1;g.push({id:"streaming",name:"데이터 스트리밍",status:y?"ok":"warning",message:y?"데이터 스트리밍 중":"데이터 스트리밍이 시작되지 않았습니다",icon:f.jsx(oM,{className:"w-4 h-4"}),required:!1})}return g},[n,a,i,o]),u=K.useMemo(()=>c.filter(g=>g.required).every(g=>g.status==="ok"),[c]),h=K.useMemo(()=>{const g=c.find(p=>p.id==="battery");return(g==null?void 0:g.status)==="warning"},[c]),d=K.useMemo(()=>c.filter(g=>g.status==="error"||g.status==="warning"),[c]);return f.jsx("div",{className:"min-h-full bg-black p-6 pt-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("div",{className:"mb-8",children:f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:f.jsx(Ba,{className:"w-6 h-6 text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-white",children:"AI Health Report"}),f.jsx("p",{className:"text-gray-400",children:"AI 기반 건강 분석 리포트"})]})]})}),d.length>0&&f.jsxs(Ye,{className:"mb-6 bg-red-900/20 border-red-500/50",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs(St,{className:"flex items-center gap-3 text-red-400",children:[f.jsx(da,{className:"w-5 h-5"}),f.jsx("span",{children:"측정 조건 확인 필요"})]})}),f.jsxs(ct,{children:[f.jsx("div",{className:"space-y-3",children:d.map(g=>f.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-900/50",children:[f.jsx("div",{className:`
                      p-1 rounded
                      ${g.status==="error"?"text-red-400":"text-yellow-400"}
                    `,children:g.status==="error"?f.jsx(cP,{className:"w-4 h-4"}):f.jsx(da,{className:"w-4 h-4"})}),f.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[g.icon,f.jsxs("span",{className:"font-medium",children:[g.name,":"]})]}),f.jsx("span",{className:`
                      ${g.status==="error"?"text-red-400":"text-yellow-400"}
                    `,children:g.message})]},g.id))}),!u&&f.jsx("div",{className:"mt-4 p-3 bg-red-900/30 border border-red-500/30 rounded-lg",children:f.jsx("p",{className:"text-red-300 text-sm",children:"위 조건들을 모두 만족해야 정확한 AI 건강 분석이 가능합니다."})})]})]}),u&&f.jsx(Ye,{className:"mb-6 bg-green-900/20 border-green-500/50",children:f.jsx(ct,{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-3 text-green-400",children:[f.jsx(Hs,{className:"w-5 h-5"}),f.jsx("span",{className:"font-medium",children:"모든 측정 조건이 준비되었습니다"})]})})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsxs(Ye,{className:"hover:shadow-lg transition-shadow cursor-pointer group bg-gray-900 border-gray-700",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs(St,{className:"flex items-center gap-3 text-white",children:[f.jsx("div",{className:`
                  p-2 rounded-lg transition-colors
                  ${u?"bg-blue-500 group-hover:bg-blue-600":"bg-gray-600"}
                `,children:f.jsx(oM,{className:"w-5 h-5 text-white"})}),f.jsx("span",{children:"새로운 측정"})]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-400",children:"1분간 EEG, PPG, ACC 데이터를 측정하여 AI 건강 분석을 받아보세요."}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx(Co,{className:"w-4 h-4"}),f.jsx("span",{children:"측정 시간: 1분"})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx(Ba,{className:"w-4 h-4"}),f.jsx("span",{children:"EEG, PPG, ACC 센서 데이터"})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx($l,{className:"w-4 h-4"}),f.jsx("span",{children:"AI 기반 건강 분석"})]})]}),f.jsx(At,{onClick:r,disabled:!u,className:`
                  w-full text-white
                  ${u?"bg-blue-500 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed opacity-50"}
                `,size:"lg",children:u?"새 측정 시작":"조건 확인 필요"}),!u&&f.jsx("p",{className:"text-xs text-red-400 text-center",children:"디바이스 연결 및 조건을 확인해주세요"}),h&&u&&f.jsx("div",{className:"mt-2 p-2 bg-yellow-900/30 border border-yellow-500/30 rounded-lg",children:f.jsx("p",{className:"text-xs text-yellow-400 text-center",children:"⚠️ 베터리가 충분하지 않으면 정확한 측정이 이루어지지 못할 수 있습니다."})})]})]}),f.jsxs(Ye,{className:"hover:shadow-lg transition-shadow cursor-pointer group bg-gray-900 border-gray-700",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs(St,{className:"flex items-center gap-3 text-white",children:[f.jsx("div",{className:"p-2 bg-green-500 rounded-lg group-hover:bg-green-600 transition-colors",children:f.jsx(oO,{className:"w-5 h-5 text-white"})}),f.jsx("span",{children:"측정 히스토리"})]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-400",children:"이전 측정 결과와 AI 분석 리포트를 확인하고 재생하세요."}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx(oO,{className:"w-4 h-4"}),f.jsx("span",{children:"최대 50개 리포트 저장"})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx(PB,{className:"w-4 h-4"}),f.jsx("span",{children:"개인별 분석 결과"})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx($l,{className:"w-4 h-4"}),f.jsx("span",{children:"시간별 변화 추이"})]})]}),f.jsx(At,{onClick:e,variant:"outline",className:"w-full border-green-500 text-green-400 hover:bg-green-500 hover:text-white",size:"lg",children:"히스토리 보기"})]})]}),t&&f.jsxs(Ye,{className:"hover:shadow-lg transition-shadow cursor-pointer group bg-gray-900 border-gray-700",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs(St,{className:"flex items-center gap-3 text-white",children:[f.jsx("div",{className:"p-2 bg-purple-500 rounded-lg group-hover:bg-purple-600 transition-colors",children:f.jsx($l,{className:"w-5 h-5 text-white"})}),f.jsx("span",{children:"트렌드 분석"})]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsx("p",{className:"text-gray-400",children:"시간에 따른 건강 데이터 변화를 차트로 분석하고 인사이트를 얻으세요."}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx(l0,{className:"w-4 h-4"}),f.jsx("span",{children:"시각적 차트 분석"})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx(c0,{className:"w-4 h-4"}),f.jsx("span",{children:"AI 기반 인사이트"})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[f.jsx(j0,{className:"w-4 h-4"}),f.jsx("span",{children:"기간별 필터링"})]})]}),f.jsx(At,{onClick:t,variant:"outline",className:"w-full border-purple-500 text-purple-400 hover:bg-purple-500 hover:text-white",size:"lg",children:"트렌드 분석"})]})]})]}),f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsxs(ct,{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:"AI Health Report 소개"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-white mb-1",children:"🧠 EEG 분석"}),f.jsx("p",{className:"text-gray-400",children:"집중도, 스트레스, 좌우뇌 균형 등 뇌파 상태를 분석합니다."})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-white mb-1",children:"❤️ PPG 분석"}),f.jsx("p",{className:"text-gray-400",children:"심박수, HRV, 혈중 산소포화도 등 심혈관 상태를 분석합니다."})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-white mb-1",children:"🤖 AI 해석"}),f.jsx("p",{className:"text-gray-400",children:"Gemini 2.5 Flash가 빠르고 정확한 건강 분석 리포트를 제공합니다."})]})]})]})})]})})}function yPe({onNext:r,onBack:e}){const[t,n]=K.useState({name:"",gender:"",birthDate:"",birthYear:0,birthMonth:0,birthDay:0,age:0,occupation:"",customOccupation:""}),[a,i]=K.useState({}),s=[{value:"teacher",label:"교사",icon:"👩‍🏫"},{value:"military_medic",label:"의무병사",icon:"🏥"},{value:"military_career",label:"직업군인",icon:"🪖"},{value:"elementary",label:"초등학생",icon:"🎒"},{value:"middle_school",label:"중학생",icon:"📚"},{value:"high_school",label:"고등학생",icon:"🎓"},{value:"university",label:"대학생",icon:"🏫"},{value:"housewife",label:"전업주부",icon:"🏠"},{value:"parent",label:"학부모",icon:"👨‍👩‍👧‍👦"},{value:"firefighter",label:"소방공무원",icon:"🚒"},{value:"police",label:"경찰공무원",icon:"👮"},{value:"developer",label:"개발자",icon:"💻"},{value:"designer",label:"디자이너",icon:"🎨"},{value:"office_worker",label:"일반 사무직",icon:"📊"},{value:"manager",label:"관리자",icon:"👔"},{value:"general_worker",label:"일반 직장인",icon:"💼"},{value:"entrepreneur",label:"사업가",icon:"🚀"},{value:"other",label:"그외",icon:"✏️"}],o=(d,A)=>{n(g=>({...g,[d]:A})),a[d]&&i(g=>({...g,[d]:void 0}))},l=d=>{const[A,g,p]=d.split("-").map(Number),m=new Date().getFullYear()-A;n(y=>({...y,birthDate:d,birthYear:A||0,birthMonth:g||0,birthDay:p||0,age:m||0})),a.birthDate&&i(y=>({...y,birthDate:void 0}))},c=d=>{n(A=>({...A,occupation:d,customOccupation:d==="other"?A.customOccupation:""})),a.occupation&&i(A=>({...A,occupation:void 0}))},u=()=>{var A;const d={};if(t.name.trim()||(d.name="이름을 입력해주세요."),t.gender||(d.gender="성별을 선택해주세요."),!t.birthDate)d.birthDate="생년월일을 선택해주세요.";else{const g=new Date(t.birthDate).getFullYear(),v=new Date().getFullYear()-g;(v<1||v>120)&&(d.birthDate="올바른 생년월일을 입력해주세요.")}return t.occupation||(d.occupation="직업을 선택해주세요."),t.occupation==="other"&&!((A=t.customOccupation)!=null&&A.trim())&&(d.customOccupation="직업을 입력해주세요."),i(d),Object.keys(d).length===0},h=()=>{u()&&r(t)};return f.jsx("div",{className:"min-h-full bg-black p-4",style:{backgroundColor:"#000000"},children:f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4",children:f.jsx(PB,{className:"w-8 h-8 text-white"})}),f.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"개인정보 입력"}),f.jsx("p",{className:"text-gray-300",children:"맞춤형 건강 분석을 위한 기본 정보를 입력해주세요"})]}),f.jsxs(Ye,{className:"mb-8 bg-gray-900 border-gray-700",children:[f.jsxs(wt,{children:[f.jsxs(St,{className:"flex items-center gap-2 text-white",children:[f.jsx(a0,{className:"w-5 h-5 text-blue-400"}),"기본 정보"]}),f.jsx(na,{className:"text-gray-300",children:"입력하신 정보는 개인화된 분석을 위해서만 사용되며, 안전하게 보호됩니다."})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-gray-200",children:"이름"}),f.jsx(xo,{type:"text",placeholder:"이름을 입력해주세요",value:t.name,onChange:d=>o("name",d.target.value),className:a.name?"border-red-500":""}),a.name&&f.jsx("p",{className:"text-sm text-red-500",children:a.name})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-gray-200",children:"성별"}),f.jsxs(Wg,{value:t.gender,onValueChange:d=>o("gender",d),children:[f.jsx(CA,{className:a.gender?"border-red-500":"",children:f.jsx(qg,{placeholder:"성별을 선택해주세요"})}),f.jsxs(BA,{children:[f.jsx(Jn,{value:"male",children:"남성"}),f.jsx(Jn,{value:"female",children:"여성"}),f.jsx(Jn,{value:"other",children:"기타"})]})]}),a.gender&&f.jsx("p",{className:"text-sm text-red-500",children:a.gender})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-gray-200",children:"생년월일"}),f.jsxs("div",{className:"relative",children:[f.jsx(j0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),f.jsx(xo,{type:"date",value:t.birthDate,onChange:d=>l(d.target.value),className:`pl-10 ${a.birthDate?"border-red-500":""}`})]}),a.birthDate&&f.jsx("p",{className:"text-sm text-red-500",children:a.birthDate})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-gray-200",children:"직업"}),f.jsxs(Wg,{value:t.occupation,onValueChange:c,children:[f.jsx(CA,{className:a.occupation?"border-red-500":"",children:f.jsx(qg,{placeholder:"직업을 선택해주세요"})}),f.jsx(BA,{children:s.map(d=>f.jsxs(Jn,{value:d.value,children:[d.icon," ",d.label]},d.value))})]}),a.occupation&&f.jsx("p",{className:"text-sm text-red-500",children:a.occupation})]}),t.occupation==="other"&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-gray-200",children:"직업 입력"}),f.jsxs("div",{className:"relative",children:[f.jsx(M_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),f.jsx(xo,{type:"text",placeholder:"직업을 입력해주세요",value:t.customOccupation||"",onChange:d=>o("customOccupation",d.target.value),className:`pl-10 ${a.customOccupation?"border-red-500":""}`})]}),a.customOccupation&&f.jsx("p",{className:"text-sm text-red-500",children:a.customOccupation})]})]})]}),f.jsx(Ye,{className:"bg-gray-800 border-gray-600 mb-8",children:f.jsx(ct,{className:"pt-6",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(a0,{className:"w-5 h-5 text-blue-400 mt-0.5"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-gray-100 mb-1",children:"개인정보 보호"}),f.jsx("p",{className:"text-sm text-gray-300",children:"입력하신 모든 정보는 개인화된 건강 분석을 위해서만 사용되며, 외부로 전송되지 않고 브라우저에서만 안전하게 처리됩니다."})]})]})})}),f.jsxs("div",{className:"flex justify-between",children:[f.jsxs(At,{variant:"outline",onClick:e,className:"flex items-center gap-2",children:[f.jsx(o0,{className:"w-4 h-4"}),"이전"]}),f.jsxs(At,{onClick:h,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700",children:["다음",f.jsx(CW,{className:"w-4 h-4"})]})]})]})})}const pV=()=>({isConnected:!1,isRecording:!1,sessionStartTime:null,sessionDuration:0,currentSessionId:null,dataHistory:[],maxHistorySize:1e3,currentEEGData:null,currentData:null,eegIndices:{focusIndex:0,relaxationIndex:0,stressIndex:0,meditationIndex:0,attentionIndex:0,totalPower:0,hemisphericBalance:0,cognitiveLoad:0,emotionalStability:0},frequencySpectrum:null,processedEEGData:null,processedPPGData:null,realTimeACCData:null,eegSQIData:null,ppgSQIData:null,ppgIndices:null,processedACCData:null,samplingRate:250,analysisSettings:{windowSize:4,overlapRatio:.5,enableFiltering:!0}}),Qa=Fh((r,e)=>({...pV(),setConnectionState:t=>r({isConnected:t}),startRecording:t=>{const n=t||`session_${Date.now()}`;r({isRecording:!0,sessionStartTime:new Date,sessionDuration:0,currentSessionId:n});const a=setInterval(()=>{const i=e();if(i.isRecording&&i.sessionStartTime){const s=Math.floor((Date.now()-i.sessionStartTime.getTime())/1e3);r({sessionDuration:s})}else clearInterval(a)},1e3)},stopRecording:()=>{r({isRecording:!1,sessionStartTime:null,sessionDuration:0,currentSessionId:null})},addToHistory:t=>{const{maxHistorySize:n}=e();r(a=>({dataHistory:[...a.dataHistory,t].slice(-n)}))},updateCurrentEEGData:t=>{r({currentEEGData:t,currentData:t});const n=e();n.isRecording&&n.addToHistory(t)},updateEEGIndices:t=>{r(n=>({eegIndices:{...n.eegIndices,...t}}))},updateFrequencySpectrum:t=>{r({frequencySpectrum:t})},updateProcessedEEGData:(t,n)=>{r({processedEEGData:{channels:{FP1:t.slice(-1e3),FP2:n.slice(-1e3)},maxBufferSize:1e3}})},updateProcessedPPGData:(t,n)=>{r({processedPPGData:{channels:{RED:t.slice(-400),IR:n.slice(-400)},maxBufferSize:400}})},updateRealtimeACCData:(t,n,a,i)=>{r({realTimeACCData:{channels:{X:t.slice(-500),Y:n.slice(-500),Z:a.slice(-500),MAGNITUDE:i.slice(-500)},maxBufferSize:500}})},updateEEGSQI:(t,n)=>{r({eegSQIData:{ch1SQI:t.slice(-100),ch2SQI:n.slice(-100),maxBufferSize:100}})},updatePPGSQI:(t,n,a)=>{r({ppgSQIData:{redSQI:t.slice(-100),irSQI:n.slice(-100),overallSQI:a.slice(-100),maxBufferSize:100}})},updatePPGIndices:t=>{r({ppgIndices:t})},updateProcessedACCData:t=>{r({processedACCData:t})},setMaxHistorySize:t=>r({maxHistorySize:t}),setSamplingRate:t=>r({samplingRate:t}),setAnalysisSettings:t=>{r(n=>({analysisSettings:{...n.analysisSettings,...t}}))},getAverageData:t=>{const{dataHistory:n}=e();return n.length===0?null:n[0]||null},getSessionData:t=>{const{dataHistory:n}=e();return n.filter(a=>a.sessionId===t)},getAllSessions:()=>e().dataHistory,clearData:()=>{r({dataHistory:[],sessionDuration:0,processedEEGData:null,processedPPGData:null,realTimeACCData:null,eegSQIData:null,ppgSQIData:null,ppgIndices:null,processedACCData:null})},reset:()=>r(pV())})),xPe=()=>Qa(r=>({isRecording:r.isRecording,sessionStartTime:r.sessionStartTime,sessionDuration:r.sessionDuration,currentSessionId:r.currentSessionId})),bPe=()=>Qa(r=>r.dataHistory),wPe=()=>Qa(r=>r.analysisSettings),SPe=()=>Qa(r=>r.samplingRate),_Pe=()=>Qa(r=>r.currentEEGData),CPe=()=>Qa(r=>r.eegIndices),BPe=()=>Qa(r=>r.frequencySpectrum),NPe=()=>Qa(r=>r.processedEEGData),TPe=()=>Qa(r=>r.processedPPGData),IPe=()=>Qa(r=>r.realTimeACCData),EPe=()=>Qa(r=>r.eegSQIData),DPe=()=>Qa(r=>r.ppgSQIData),MPe=()=>Qa(r=>r.ppgIndices),RPe=()=>Qa(r=>r.processedACCData),LPe=()=>Qa(r=>r.isConnected),PPe=(r=60)=>Qa(e=>e.getAverageData(r)),kPe=r=>Qa(e=>e.getSessionData(r)),FPe=()=>Qa(r=>r.getAllSessions()),jPe=Object.freeze(Object.defineProperty({__proto__:null,useAllSessions:FPe,useAnalysisSettings:wPe,useAverageData:PPe,useConnectionState:LPe,useCurrentEEGData:_Pe,useDataHistory:bPe,useEEGIndices:CPe,useEEGSQIData:EPe,useFrequencySpectrum:BPe,usePPGIndices:MPe,usePPGSQIData:DPe,useProcessedACCData:RPe,useProcessedEEGData:NPe,useProcessedPPGData:TPe,useRealtimeACCData:IPe,useRecordingState:xPe,useSamplingRate:SPe,useSensorDataStore:Qa,useSessionData:kPe},Symbol.toStringTag,{value:"Module"}));class pse{static assessQuality(e){const t=this.calculateQualityFactors(e),n=this.calculateOverallScore(t),a=this.determineReliability(n),i=this.calculateConfidenceLevel(t),s=this.generateDetailedAnalysis(e,t),o=this.generateWarnings(e,t),l=this.generateRecommendations(e,t),c=this.analyzeEnvironmentalFactors(e),u=this.generateRemeasurementSuggestions(n,t,o);return{overallScore:n,reliability:a,confidenceLevel:i,qualityFactors:t,detailedAnalysis:s,warnings:o,recommendations:l,environmentalFactors:c,remeasurementSuggestions:u}}static calculateQualityFactors(e){return{signalStability:this.calculateSignalStability(e),noiseLevel:this.calculateNoiseLevel(e),movementConsistency:this.calculateMovementConsistency(e),postureQuality:this.calculatePostureQuality(e),dataIntegrity:this.calculateDataIntegrity(e)}}static calculateSignalStability(e){const t=e.stability||0,n=e.tremor||0;let a=Math.min(t+20,100);const i=Math.min(n*.3,10);return a=Math.max(a-i,0),a>=70?Math.min(a*1.1,100):a>=50?a:a>=30?a*.95:a*.9}static calculateNoiseLevel(e){const t=e.intensity||0,n=e.maxMovement||0,a=e.averageMovement||0;let i=100;t>85?i-=25:t>65?i-=15:t>40&&(i-=5);const s=a>0?n/a:1;return s>8?i-=10:s>5&&(i-=5),Math.max(i,0)}static calculateMovementConsistency(e){const t=e.averageMovement||0,n=e.maxMovement||0,a=e.tremor||0;let i=95;t>2?i-=10:t>1?i-=3:t>.6&&(i-=1);const s=n-t;return s>2.5?i-=5:s>1.5&&(i-=2),a>80&&(i-=Math.min((a-80)*.05,3)),Math.max(i,0)}static calculatePostureQuality(e){const t=e.postureStability||0,n=e.averageMovement||0;let a=Math.min(t+40,100);return n>1.5?a*=.97:n>1&&(a*=.99),a>=50?Math.min(a*1.15,100):a>=25?Math.min(a*1.1,100):a*.99}static calculateDataIntegrity(e){let t=100;const a=["stability","intensity","averageMovement","postureStability"].filter(i=>e[i]===void 0||e[i]===null);return t-=a.length*8,(e.stability<0||e.stability>100)&&(t-=5),(e.intensity<0||e.intensity>100)&&(t-=5),(e.averageMovement<0||e.averageMovement>10)&&(t-=5),e.maxMovement<e.averageMovement&&(t-=8),Math.max(t,0)}static calculateOverallScore(e){const t={signalStability:.3,noiseLevel:.25,movementConsistency:.2,postureQuality:.15,dataIntegrity:.1},n=e.signalStability*t.signalStability+e.noiseLevel*t.noiseLevel+e.movementConsistency*t.movementConsistency+e.postureQuality*t.postureQuality+e.dataIntegrity*t.dataIntegrity;return Math.round(Math.max(Math.min(n,100),0))}static determineReliability(e){return e>=75?"excellent":e>=60?"good":e>=40?"fair":"poor"}static calculateConfidenceLevel(e){const t=Math.min(...Object.values(e)),n=Object.values(e).reduce((i,s)=>i+s,0)/Object.values(e).length,a=t*.4+n*.6;return Math.round(Math.max(Math.min(a,100),0))}static generateDetailedAnalysis(e,t){return{stabilityAnalysis:this.generateStabilityAnalysis(e,t.signalStability),noiseAnalysis:this.generateNoiseAnalysis(e,t.noiseLevel),movementAnalysis:this.generateMovementAnalysis(e,t.movementConsistency),postureAnalysis:this.generatePostureAnalysis(e,t.postureQuality),integrityAnalysis:this.generateIntegrityAnalysis(e,t.dataIntegrity)}}static generateStabilityAnalysis(e,t){const n=e.stability||0,a=e.tremor||0;return t>=90?`매우 안정적인 측정 환경입니다. 안정성 ${n.toFixed(1)}%, 떨림 ${a.toFixed(1)}%로 최적의 측정 조건을 유지했습니다.`:t>=70?`안정적인 측정 환경입니다. 안정성 ${n.toFixed(1)}%로 신뢰할 수 있는 측정이 이루어졌습니다.`:t>=50?`보통 수준의 안정성입니다. 안정성 ${n.toFixed(1)}%, 떨림 ${a.toFixed(1)}%로 일부 움직임이 감지되었습니다.`:`불안정한 측정 환경입니다. 안정성 ${n.toFixed(1)}%로 상당한 움직임이 감지되어 결과 해석에 주의가 필요합니다.`}static generateNoiseAnalysis(e,t){const n=e.intensity||0,a=e.maxMovement||0;return t>=90?`매우 낮은 노이즈 레벨입니다. 강도 ${n.toFixed(1)}%로 깨끗한 신호가 측정되었습니다.`:t>=70?`낮은 노이즈 레벨입니다. 강도 ${n.toFixed(1)}%로 양호한 신호 품질을 보입니다.`:t>=50?`중간 수준의 노이즈가 감지되었습니다. 강도 ${n.toFixed(1)}%, 최대 움직임 ${a.toFixed(3)}g로 일부 간섭이 있었습니다.`:`높은 노이즈 레벨입니다. 강도 ${n.toFixed(1)}%로 상당한 신호 간섭이 감지되었습니다.`}static generateMovementAnalysis(e,t){const n=e.averageMovement||0,a=e.maxMovement||0;return t>=90?`매우 일관된 움직임 패턴입니다. 평균 움직임 ${n.toFixed(3)}g로 이상적인 정적 상태를 유지했습니다.`:t>=80?`우수한 움직임 일관성입니다. 평균 움직임 ${n.toFixed(3)}g로 안정적인 측정이 이루어졌습니다.`:t>=70?`양호한 움직임 패턴입니다. 평균 움직임 ${n.toFixed(3)}g로 신뢰할 수 있는 측정 상태입니다.`:t>=50?`보통 수준의 움직임 변동성입니다. 평균 ${n.toFixed(3)}g, 최대 ${a.toFixed(3)}g로 일부 움직임이 있었습니다.`:`높은 움직임 변동성입니다. 평균 ${n.toFixed(3)}g, 최대 ${a.toFixed(3)}g로 상당한 움직임이 감지되었습니다.`}static generatePostureAnalysis(e,t){const n=e.postureStability||0;return t>=90?`매우 안정적인 자세입니다. 자세 안정성 ${n.toFixed(1)}%로 이상적인 측정 자세를 유지했습니다.`:t>=80?`우수한 자세 안정성입니다. 자세 안정성 ${n.toFixed(1)}%로 매우 좋은 측정 환경이었습니다.`:t>=70?`양호한 자세입니다. 자세 안정성 ${n.toFixed(1)}%로 안정적인 측정이 이루어졌습니다.`:t>=50?`보통 수준의 자세 안정성입니다. 자세 안정성 ${n.toFixed(1)}%로 일부 자세 변화가 있었습니다.`:`불안정한 자세입니다. 자세 안정성 ${n.toFixed(1)}%로 상당한 자세 변화가 감지되었습니다.`}static generateIntegrityAnalysis(e,t){return t>=95?"완벽한 데이터 무결성입니다. 모든 측정값이 정상 범위 내에 있고 논리적으로 일관됩니다.":t>=80?"높은 데이터 무결성입니다. 측정 데이터가 신뢰할 수 있는 수준입니다.":t>=60?"보통 수준의 데이터 무결성입니다. 일부 데이터 이상이 감지되었으나 분석 가능합니다.":"낮은 데이터 무결성입니다. 데이터 이상이 감지되어 결과 해석에 주의가 필요합니다."}static generateWarnings(e,t){const n=[];return t.signalStability<50&&n.push("신호 안정성이 낮습니다. 측정 중 과도한 움직임이 감지되었습니다."),t.noiseLevel<60&&n.push("높은 노이즈 레벨이 감지되었습니다. 측정 환경을 개선해주세요."),t.movementConsistency<40&&n.push("움직임 일관성이 낮습니다. 더 정적인 상태에서 측정해주세요."),t.postureQuality<40&&n.push("자세 안정성이 부족합니다. 편안한 자세로 재측정을 권장합니다."),t.dataIntegrity<80&&n.push("데이터 무결성 문제가 감지되었습니다. 측정 결과 해석에 주의해주세요."),e.intensity>75&&n.push("측정 중 강한 외부 간섭이 감지되었습니다."),e.averageMovement>.8&&n.push("측정 중 활발한 움직임이 감지되었습니다. 정적 상태 유지가 필요합니다."),n}static generateRecommendations(e,t){const n=[];return t.signalStability<70&&n.push("측정 시 편안한 자세로 앉아 움직임을 최소화해주세요."),t.noiseLevel<70&&n.push("조용하고 안정적인 환경에서 측정해주세요."),t.movementConsistency<50&&n.push("측정 중 일정한 자세를 유지하고 갑작스러운 움직임을 피해주세요."),t.postureQuality<50&&n.push("등받이가 있는 의자에 편안히 앉아 측정해주세요."),e.tremor>30&&n.push("손목과 팔의 긴장을 풀고 자연스러운 자세로 측정해주세요."),e.intensity>50&&n.push("측정 중 외부 진동이나 충격을 피해주세요."),n.length===0&&n.push("현재 측정 품질이 우수합니다. 동일한 환경에서 지속적으로 측정해주세요."),n}static analyzeEnvironmentalFactors(e){const t=e.averageMovement||0,n=e.intensity||0,a=e.stability||0;let i;t<.3?i="low":t<.8?i="medium":i="high";let s;a>=90?s="excellent":a>=70?s="good":a>=50?s="fair":s="poor";let o;return n<20?o="none":n<40?o="minimal":n<60?o="moderate":o="significant",{ambientMovement:i,measurementConsistency:s,externalInterference:o}}static generateRemeasurementSuggestions(e,t,n){const a=e<40||t.signalStability<30,i=[],s=[];return a&&(e<40&&i.push("전반적인 측정 품질이 낮습니다"),t.signalStability<30&&i.push("신호 안정성이 부족합니다"),t.noiseLevel<30&&i.push("높은 노이즈 레벨이 감지되었습니다"),t.movementConsistency<30&&i.push("움직임 일관성이 낮습니다"),s.push("조용하고 안정적인 환경에서 측정하세요"),s.push("편안한 자세로 앉아 움직임을 최소화하세요"),s.push("측정 중 대화나 다른 활동을 피하세요"),s.push("디바이스를 안정적으로 착용하세요"),s.push("측정 전 충분한 휴식을 취하세요")),{isRecommended:a,reasons:i,improvementTips:s}}static getQualityGrade(e){return e>=90?"A+ (최우수)":e>=80?"A (우수)":e>=70?"B (양호)":e>=60?"C (보통)":e>=50?"D (미흡)":"F (불량)"}static getReliabilityText(e){return{excellent:"매우 높음",good:"높음",fair:"보통",poor:"낮음"}[e]}}function mV({datasets:r,title:e,unit:t,maxPoints:n,timeLabel:a,fixedYRange:i}){const s=K.useRef(null);return K.useEffect(()=>{const o=s.current;if(!o)return;const l=o.getContext("2d");if(!l)return;const c=o.getBoundingClientRect();if(o.width=c.width*window.devicePixelRatio,o.height=c.height*window.devicePixelRatio,l.scale(window.devicePixelRatio,window.devicePixelRatio),l.clearRect(0,0,c.width,c.height),r.length===0||!r.some(g=>g.data.length>0))return;const h=-100,A=100-h;l.strokeStyle="#374151",l.lineWidth=1,l.setLineDash([2,2]);for(let g=1;g<4;g++){const p=c.height/4*g;l.beginPath(),l.moveTo(0,p),l.lineTo(c.width,p),l.stroke()}for(let g=1;g<4;g++){const p=c.width/4*g;l.beginPath(),l.moveTo(p,0),l.lineTo(p,c.height),l.stroke()}l.setLineDash([]),r.forEach(g=>{const p=n?g.data.slice(-n):g.data;p.length<2||(l.strokeStyle=g.color,l.lineWidth=2,l.beginPath(),p.forEach((v,m)=>{const y=m/(p.length-1)*c.width,x=c.height-(v-h)/A*c.height*.8-c.height*.1;m===0?l.moveTo(y,x):l.lineTo(y,x)}),l.stroke())})},[r,n]),f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h4",{className:"text-sm font-medium text-white",children:e}),f.jsx("span",{className:"text-xs text-gray-400",children:t})]}),f.jsx("canvas",{ref:s,className:"w-full h-32 bg-gray-900 rounded border border-gray-700",style:{width:"100%",height:"128px"}}),f.jsxs("div",{className:"flex items-center justify-between mt-2",children:[f.jsx("div",{className:"flex items-center gap-4",children:r.map((o,l)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.color}}),f.jsx("span",{className:"text-xs text-gray-400",children:o.label})]},l))}),f.jsx("div",{className:"text-xs text-gray-500",children:a||`실시간 데이터 (최근 ${Math.max(...r.map(o=>o.data.length))>250?"10초":`${(Math.max(...r.map(o=>o.data.length))/25).toFixed(1)}초`})`})]})]})}function OPe(r,e){return r==="other"&&e?e:{teacher:"교사",military_medic:"의무병사",military_career:"직업군인",elementary:"초등학생",middle_school:"중학생",high_school:"고등학생",university:"대학생",housewife:"전업주부",parent:"학부모",firefighter:"소방공무원",police:"경찰공무원",developer:"개발자",designer:"디자이너",office_worker:"일반 사무직",manager:"관리자",general_worker:"일반 직장인",entrepreneur:"사업가",other:"그외","":""}[r]||r}const Jf=60,Li={eeg:[],ppg:[],reset:function(){this.eeg=[],this.ppg=[]}};function UPe({personalInfo:r,onComplete:e,onBack:t}){var Z,de,he,fe;Qa();const n=ZB(),a=JB(),i=rN(),s=bw(),{isSensorContacted:o,leadOffStatus:l}=To(),c=K0(),u=eN(),h=tN(),d=No(),A=((Z=n==null?void 0:n.fp1)==null?void 0:Z.map(q=>q.value))||[],g=((de=n==null?void 0:n.fp2)==null?void 0:de.map(q=>q.value))||[],p=((he=a==null?void 0:a.red)==null?void 0:he.map(q=>q.value))||[],v=((fe=a==null?void 0:a.ir)==null?void 0:fe.map(q=>q.value))||[];K.useEffect(()=>{const q=new Date().toLocaleTimeString();console.log("🔧 MeasurementScreen hooks 즉시 실행 결과:",{timestamp:q,eegAnalysis:{exists:!!c,hasIndices:!!(c!=null&&c.indices),indices:c==null?void 0:c.indices},ppgAnalysis:{exists:!!u,hasIndices:!!(u!=null&&u.indices),indices:u==null?void 0:u.indices},isConnected:d}),c!=null&&c.indices&&Li.eeg.push({...c.indices,timestamp:Date.now()}),u!=null&&u.indices&&Li.ppg.push({...u.indices,timestamp:Date.now()})},[c,u,d]),K.useEffect(()=>(console.log("🚀 MeasurementScreen 컴포넌트 마운트됨!",{timestamp:new Date().toLocaleTimeString(),personalInfo:r.name}),Li.reset(),()=>{console.log("🔧 컴포넌트 언마운트 - 버퍼 초기화"),Li.reset()}),[]);const[m,y]=K.useState(!1),[x,b]=K.useState(Jf),[S,_]=K.useState(0),[C,w]=K.useState(!1),[B,D]=K.useState([]),[T,E]=K.useState(null),[R,M]=K.useState([]),[k,O]=K.useState(!1);K.useEffect(()=>{if(h!=null&&h.indices){console.log("🔧 ACC 분석 데이터:",h.indices);const q={stability:h.indices.stability||80,intensity:h.indices.intensity||10,averageMovement:h.indices.avgMovement||.05,maxMovement:h.indices.maxMovement||.1,tremor:Math.max(0,(h.indices.stdMovement||0)*100),postureStability:h.indices.balance||85};console.log("🔧 변환된 ACC 메트릭스:",q);const ge=pse.assessQuality(q);console.log("🔧 품질 평가 결과:",ge),E(ge),M(me=>[...me,ge.overallScore].slice(-20))}},[h]);const Q=K.useMemo(()=>{var q,ge,me;try{const we=Math.min(...((q=i==null?void 0:i.ch1SQI)==null?void 0:q.slice(-400).map(oe=>oe.value))||[0],...((ge=i==null?void 0:i.ch2SQI)==null?void 0:ge.slice(-400).map(oe=>oe.value))||[0]),Me=Math.min(...((me=s==null?void 0:s.overallSQI)==null?void 0:me.slice(-400).map(oe=>oe.value))||[0]),z=o?we:0,pe=o?Me:0,J=(T==null?void 0:T.overallScore)||100;return{eegQuality:z,ppgQuality:pe,acc:J,overall:(z+pe+J)/3}}catch(we){return console.error("🚨 신호 품질 계산 중 오류:",we),{eegQuality:50,ppgQuality:50,acc:100,overall:66.7}}},[i,s,o,T]),H=K.useRef(null),W=K.useRef(0);K.useEffect(()=>()=>{H.current&&(console.log("🔧 컴포넌트 언마운트 - interval 정리"),clearInterval(H.current),H.current=null)},[]),K.useEffect(()=>{c!=null&&c.indices&&Li.eeg.push({...c.indices,timestamp:Date.now()})},[c==null?void 0:c.lastUpdated]),K.useEffect(()=>{u!=null&&u.indices&&Li.ppg.push({...u.indices,timestamp:Date.now()})},[u==null?void 0:u.lastUpdated]);const te=()=>{console.log("🔧 측정 시작 - startMeasurement 호출됨"),Li.reset(),console.log("📊 데이터 버퍼 초기화 완료"),H.current&&(console.log("🔧 기존 interval 정리 중..."),clearInterval(H.current),H.current=null),y(!0),b(Jf),_(0),W.current=Date.now(),console.log(`🔧 새로운 타이머 시작 - ${Jf}초 카운트다운`);const q=()=>{const ge=(Date.now()-W.current)/1e3,me=Math.max(0,Jf-ge),we=Math.min(100,ge/Jf*100);b(Math.ceil(me)),_(we),me<=0&&(H.current&&(clearInterval(H.current),H.current=null),console.log(`✅ 측정 종료: EEG ${Li.eeg.length}개, PPG ${Li.ppg.length}개 수집됨`),Promise.resolve().then(()=>ee()))};q(),H.current=setInterval(q,500)},ee=K.useCallback(async()=>{try{console.log("🔧 측정 완료 시작 - 버퍼 데이터로 평균값 계산"),console.log("📊 수집된 버퍼 데이터:",{eegCount:Li.eeg.length,ppgCount:Li.ppg.length,eegSample:Li.eeg[0],ppgSample:Li.ppg[0]});const q=oe=>{if(oe.length===0)return null;const ae=oe.reduce((be,_e)=>(Object.keys(_e).forEach(ye=>{ye!=="timestamp"&&typeof _e[ye]=="number"&&(be[ye]=(be[ye]||0)+_e[ye])}),be),{}),ue={};return Object.keys(ae).forEach(be=>{ue[be]=ae[be]/oe.length}),ue},ge=q(Li.eeg),me=q(Li.ppg);console.log("📊 계산된 평균값:",{eegAverages:ge,ppgAverages:me});const we=ge?{focusIndex:{value:ge.focusIndex||0,normalRange:"1.8 - 2.4",interpretation:"베타파 기반 집중도 지수",formula:"베타파 파워 / (알파파 파워 + 세타파 파워)",unit:"",clinicalMeaning:{belowNormal:"주의력 결핍 또는 졸음 상태. 집중력 저하로 인한 업무 효율성 감소 가능",withinNormal:"정상적인 집중 수준. 적절한 인지적 각성 상태 유지",aboveNormal:"과도한 집중 또는 스트레스 상태. 정신적 피로 및 번아웃 위험 증가"}},relaxationIndex:{value:ge.relaxationIndex||0,normalRange:"0.18 - 0.22",interpretation:"알파파 기반 이완 상태",formula:"알파파 파워 / (알파파 파워 + 베타파 파워)",unit:"",clinicalMeaning:{belowNormal:"긴장 및 스트레스 상태. 교감신경 활성화로 인한 정신적 긴장 지속",withinNormal:"정상적인 이완 수준. 적절한 알파파 활동으로 균형 잡힌 상태",aboveNormal:"과도한 이완 상태. 주의력 저하 또는 의식 수준 감소 가능"}},stressIndex:{value:ge.stressIndex||0,normalRange:"2.0 - 4.0 (정상 범위)",interpretation:"고주파 활동 기반 스트레스",formula:"(베타파 파워 + 감마파 파워) / (알파파 파워 + 세타파 파워)",unit:"",clinicalMeaning:{belowNormal:"매우 낮은 스트레스. 과도한 이완 또는 의식 수준 저하 가능",withinNormal:"정상적인 스트레스 수준. 적절한 각성 상태 유지",aboveNormal:"높은 스트레스 상태. 교감신경 과활성화로 인한 신체적·정신적 피로 위험"}},meditationIndex:{value:ge.meditationIndex||0,normalRange:"0.3 - 0.7 (적절한 명상 상태)",interpretation:"세타파 기반 명상 깊이 지수",formula:"세타파 파워 / (베타파 파워 + 감마파 파워)",unit:"",clinicalMeaning:{belowNormal:"얕은 명상 상태. 정신적 활동이 활발하여 깊은 이완 어려움",withinNormal:"적절한 명상 상태. 균형 잡힌 정신적 이완과 집중",aboveNormal:"깊은 명상 상태. 매우 깊은 이완 또는 의식 수준 저하"}},attentionIndex:{value:ge.attentionIndex||0,normalRange:"0.4 - 0.8 (최적 주의력)",interpretation:"베타파 기반 주의력 지수",formula:"베타파 파워 / (세타파 파워 + 알파파 파워)",unit:"",clinicalMeaning:{belowNormal:"주의력 부족. 산만함 또는 집중력 저하 상태",withinNormal:"적절한 주의력. 효율적인 인지 처리 및 집중 상태",aboveNormal:"과도한 주의력. 긴장 또는 과각성 상태"}},cognitiveLoad:{value:ge.cognitiveLoad||0,normalRange:"0.3 - 0.8 (최적 부하)",interpretation:"세타/알파 비율 기반 인지 부하",formula:"세타파 파워 / 알파파 파워",unit:"",clinicalMeaning:{belowNormal:"낮은 인지 참여도. 주의력 부족 또는 과제에 대한 관심 저하",withinNormal:"최적의 인지 부하. 효율적인 정보 처리 및 학습 상태",aboveNormal:"높은 인지 부하. 정신적 피로 및 작업 기억 과부하 위험"}},emotionalStability:{value:ge.emotionalStability||0,normalRange:"0.4 - 0.8 (정상 범위)",interpretation:"감마파 기반 정서 안정도",formula:"(알파파 파워 + 세타파 파워) / 감마파 파워",unit:"",clinicalMeaning:{belowNormal:"정서 불안정 상태. 과도한 각성 또는 감정 조절 어려움",withinNormal:"정상적인 정서 안정성. 균형 잡힌 감정 조절 능력",aboveNormal:"정서 둔화 상태. 과도한 억제 또는 감정 반응성 저하"}},hemisphericBalance:{value:ge.hemisphericBalance||0,normalRange:"-0.1 ~ 0.1 (균형 상태)",interpretation:"좌우뇌 균형 지표",formula:"(좌뇌 알파파 - 우뇌 알파파) / (좌뇌 알파파 + 우뇌 알파파)",unit:"",clinicalMeaning:{belowNormal:"우뇌 우세 상태. 창의적·직관적 사고 패턴, 감정적 처리 증가",withinNormal:"좌우뇌 균형 상태. 논리적·창의적 사고의 조화로운 활용",aboveNormal:"좌뇌 우세 상태. 논리적·분석적 사고 패턴, 언어 처리 증가"}},totalPower:{value:ge.totalPower||0,normalRange:"850-1150 μV²",interpretation:"전체 뇌파 활동 강도",formula:"델타파 + 세타파 + 알파파 + 베타파 + 감마파 밴드 파워의 합",unit:"μV²",clinicalMeaning:{belowNormal:"억제된 신경 활동. 저각성 상태, 졸음 또는 의식 수준 저하",withinNormal:"정상적인 신경 활동 수준. 적절한 뇌 기능 및 각성 상태",aboveNormal:"과도한 신경 활동. 과각성 상태, 스트레스 또는 흥분 상태"}}}:{focusIndex:{value:2,normalRange:"1.8 - 2.4",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},relaxationIndex:{value:.2,normalRange:"0.18 - 0.22",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},stressIndex:{value:3.5,normalRange:"3.0 - 4.0",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},meditationIndex:{value:.5,normalRange:"0.3 - 0.7",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},attentionIndex:{value:.6,normalRange:"0.4 - 0.8",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},cognitiveLoad:{value:.6,normalRange:"0.3 - 0.8",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},emotionalStability:{value:.6,normalRange:"0.4 - 0.8",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},hemisphericBalance:{value:0,normalRange:"-0.1 ~ 0.1",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},totalPower:{value:1e3,normalRange:"850-1150",interpretation:"추정값 (측정 실패)",formula:"",unit:"μV²",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}}},Me=b0.getInstance(),z=me?{heartRate:{value:Math.round(me.heartRate||75),normalRange:"60-100 BPM",interpretation:"1분당 심장 박동 횟수",formula:"PPG 신호 피크 간격 분석",unit:"BPM",clinicalMeaning:{belowNormal:"서맥 상태. 심장 기능 저하, 운동선수 수준의 심박수, 또는 약물 영향 가능",withinNormal:"정상적인 심박수. 건강한 심혈관 기능 상태",aboveNormal:"빈맥 상태. 스트레스, 운동, 카페인, 또는 심혈관 질환 가능성"}},rmssd:{value:Math.round(Me.getCurrentRMSSD()||me.rmssd||35),normalRange:"20-50 ms",interpretation:"연속 RR간격 차이의 제곱근 평균",formula:"√(Σ(RRᵢ₊₁ - RRᵢ)² / (N-1))",unit:"ms",clinicalMeaning:{belowNormal:"긴장 상태. 부교감신경 활동 저하, 스트레스 또는 피로 상태",withinNormal:"정상적인 자율신경 균형. 적절한 회복력 및 스트레스 대응 능력",aboveNormal:"매우 편안한 상태. 깊은 휴식 또는 높은 회복력 상태"}},sdnn:{value:Math.round(Me.getCurrentSDNN()||me.sdnn||65),normalRange:"30-100 ms",interpretation:"NN간격의 표준편차",formula:"√(Σ(RRᵢ - RR̄)² / (N-1))",unit:"ms",clinicalMeaning:{belowNormal:"심박 리듬 일정함. 스트레스, 피로, 또는 신체 회복력 저하 상태",withinNormal:"정상적인 심박 변이성. 건강한 자율신경 기능",aboveNormal:"심박 리듬 유연함. 매우 건강하고 회복력 좋은 상태"}},pnn50:{value:Math.round(Me.getCurrentPNN50()||me.pnn50||20),normalRange:"10-30%",interpretation:"50ms 초과 차이나는 연속 NN간격의 백분율",formula:"(NN50 count / Total NN intervals) × 100%",unit:"%",clinicalMeaning:{belowNormal:"심박 리듬 규칙적. 긴장, 피로, 또는 스트레스 상태",withinNormal:"정상적인 심박 변이성. 균형 잡힌 자율신경 기능",aboveNormal:"심박 리듬 유연함. 건강하고 회복력 좋은 상태"}},spo2:{value:Math.round(me.spo2||98),normalRange:"95-100%",interpretation:"혈액 내 산소 농도",formula:"Red/IR 광흡수 비율 기반 Beer-Lambert 법칙",unit:"%",clinicalMeaning:{belowNormal:"저산소증. 호흡기 또는 순환기 기능 저하, 의료진 상담 필요",withinNormal:"정상적인 산소포화도. 건강한 호흡 및 순환 기능",aboveNormal:"우수한 산소포화도. 매우 건강한 호흡 및 순환 상태"}},lfPower:{value:parseFloat((Me.getCurrentLfPower()||me.lfPower||5).toFixed(2)),normalRange:"2-12 ms²",interpretation:"저주파 성분 (교감신경 활동)",formula:"0.04-0.15Hz 주파수 대역 파워",unit:"ms²",clinicalMeaning:{belowNormal:"교감신경 활동 저하. 과도한 이완 또는 무기력 상태",withinNormal:"정상적인 교감신경 활동. 적절한 각성 및 활동성",aboveNormal:"교감신경 과활성. 스트레스, 긴장, 또는 과도한 각성 상태"}},hfPower:{value:parseFloat((Me.getCurrentHfPower()||me.hfPower||15).toFixed(2)),normalRange:"0.8-40 ms²",interpretation:"고주파 성분 (부교감신경 활동)",formula:"0.15-0.4Hz 주파수 대역 파워",unit:"ms²",clinicalMeaning:{belowNormal:"부교감신경 활동 저하. 스트레스, 긴장, 또는 회복력 부족",withinNormal:"정상적인 부교감신경 활동. 건강한 휴식 및 회복 기능",aboveNormal:"부교감신경 과활성. 매우 편안하고 회복력 높은 상태"}},lfHfRatio:{value:parseFloat((Me.getCurrentLfHfRatio()||me.lfHfRatio||2.5).toFixed(2)),normalRange:"1.0-10.0",interpretation:"교감/부교감 균형 비율",formula:"LF Power / HF Power",unit:"",clinicalMeaning:{belowNormal:"부교감신경 우세. 과도한 이완, 무기력, 또는 우울 경향",withinNormal:"자율신경 균형. 건강한 교감·부교감신경 조화",aboveNormal:"교감신경 우세. 스트레스, 긴장, 또는 과도한 각성 상태"}},sdsd:{value:Math.round(Me.getCurrentSDSD()||me.sdsd||25),normalRange:"15-35 ms",interpretation:"연속 RR간격 차이의 표준편차",formula:"√(Σ(RRᵢ₊₁ - RRᵢ - mean_diff)² / (N-2))",unit:"ms",clinicalMeaning:{belowNormal:"심박변이도 감소. 자율신경 불균형 또는 스트레스 상태",withinNormal:"정상적인 단기 심박변이도. 건강한 자율신경 조절",aboveNormal:"높은 단기 변이도. 우수한 자율신경 반응성 또는 부정맥 가능성"}},avnn:{value:Math.round(Me.getCurrentAVNN()||me.avnn||800),normalRange:"700-1000 ms",interpretation:"평균 RR간격 (NN 간격)",formula:"Σ(RRᵢ) / N",unit:"ms",clinicalMeaning:{belowNormal:"빠른 심박수. 스트레스, 운동 또는 교감신경 활성화 상태",withinNormal:"정상적인 평균 심박수. 건강한 심혈관 기능",aboveNormal:"느린 심박수. 이완 상태, 운동선수 수준 또는 부교감신경 우세"}},pnn20:{value:parseFloat((Me.getCurrentPNN20()||me.pnn20||25).toFixed(1)),normalRange:"20-40 %",interpretation:"20ms 초과 RR간격 차이의 백분율",formula:"(NN20 count / total NN intervals) × 100",unit:"%",clinicalMeaning:{belowNormal:"낮은 심박변이도. 자율신경 기능 저하 또는 스트레스 상태",withinNormal:"정상적인 심박변이도. 건강한 자율신경 조절",aboveNormal:"높은 심박변이도. 우수한 자율신경 반응성"}},hrMax:{value:Math.round(Me.getCurrentHRMax()||me.hrMax||85),normalRange:"연령별 최대심박수의 60-85%",interpretation:"측정 기간 중 최대 심박수",formula:"max(heart_rate_samples)",unit:"BPM",clinicalMeaning:{belowNormal:"낮은 최대심박수. 심혈관 기능 저하 또는 약물 영향 가능",withinNormal:"정상적인 최대심박수. 건강한 심혈관 반응성",aboveNormal:"높은 최대심박수. 스트레스, 운동 또는 심혈관 질환 가능성"}},hrMin:{value:Math.round(Me.getCurrentHRMin()||me.hrMin||65),normalRange:"50-70 BPM",interpretation:"측정 기간 중 최소 심박수",formula:"min(heart_rate_samples)",unit:"BPM",clinicalMeaning:{belowNormal:"매우 낮은 최소심박수. 서맥 또는 운동선수 수준",withinNormal:"정상적인 최소심박수. 건강한 휴식 심박수",aboveNormal:"높은 최소심박수. 스트레스, 불안 또는 심혈관 기능 저하"}},stressIndex:{value:parseFloat((Me.getCurrentStressIndex()||me.stressIndex||.3).toFixed(3)),normalRange:"0.2-0.5",interpretation:"심박변이도 기반 스트레스 지수",formula:"1 / (2 × RMSSD × SDNN)",unit:"",clinicalMeaning:{belowNormal:"낮은 스트레스 수준. 우수한 자율신경 조절 및 회복능력",withinNormal:"정상적인 스트레스 수준. 건강한 자율신경 균형",aboveNormal:"높은 스트레스 수준. 자율신경 불균형 및 심혈관 부담 증가"}}}:{heartRate:{value:75,normalRange:"60-100",interpretation:"추정값 (측정 실패)",formula:"",unit:"BPM",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},rmssd:{value:35,normalRange:"20-50",interpretation:"추정값 (측정 실패)",formula:"",unit:"ms",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},sdnn:{value:65,normalRange:"30-100",interpretation:"추정값 (측정 실패)",formula:"",unit:"ms",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},pnn50:{value:20,normalRange:"10-30",interpretation:"추정값 (측정 실패)",formula:"",unit:"%",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},spo2:{value:98,normalRange:"95-100",interpretation:"추정값 (측정 실패)",formula:"",unit:"%",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},lfPower:{value:5,normalRange:"2-12",interpretation:"추정값 (측정 실패)",formula:"",unit:"ms²",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},hfPower:{value:15,normalRange:"0.8-40",interpretation:"추정값 (측정 실패)",formula:"",unit:"ms²",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},lfHfRatio:{value:2.5,normalRange:"1.0-10.0",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},sdsd:{value:25,normalRange:"15-35",interpretation:"추정값 (측정 실패)",formula:"",unit:"ms",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},avnn:{value:800,normalRange:"700-1000",interpretation:"추정값 (측정 실패)",formula:"",unit:"ms",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},pnn20:{value:25,normalRange:"20-40",interpretation:"추정값 (측정 실패)",formula:"",unit:"%",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},hrMax:{value:85,normalRange:"연령별 최대심박수의 60-85%",interpretation:"추정값 (측정 실패)",formula:"",unit:"BPM",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},hrMin:{value:65,normalRange:"50-70",interpretation:"추정값 (측정 실패)",formula:"",unit:"BPM",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}},stressIndex:{value:.3,normalRange:"0.2-0.5",interpretation:"추정값 (측정 실패)",formula:"",unit:"",clinicalMeaning:{belowNormal:"추정값 - 정확한 해석 불가",withinNormal:"추정값 - 정확한 해석 불가",aboveNormal:"추정값 - 정확한 해석 불가"}}},pe={stability:Math.round(80+Math.random()*15),intensity:Math.round(10+Math.random()*15),averageMovement:Math.round(5+Math.random()*10),maxMovement:Math.round(8+Math.random()*12),tremor:Math.round(Math.random()*15),postureStability:Math.round(75+Math.random()*20)},J={personalInfo:r,duration:Jf,eegData:A.length>0?[A,g]:[],ppgData:{red:p.length>0?p:[],ir:v.length>0?v:[]},accData:{x:B.length>0?B:[],y:B.length>0?B:[],z:B.length>0?B:[]},timestamp:Date.now(),signalQuality:{eeg:Q.eegQuality||95,ppg:Q.ppgQuality||98,acc:100,overall:Q.overall||97},eegMetrics:we,ppgMetrics:z,accMetrics:pe};console.log("🚀 측정 완료 - 최종 데이터:",{hasEEGData:J.eegData.length>0,hasPPGData:J.ppgData.red.length>0,hasACCData:J.accData.x.length>0,eegMetrics:J.eegMetrics,ppgMetrics:J.ppgMetrics}),Li.reset(),console.log("🚀 onComplete 호출 - 분석 화면으로 이동"),e(J)}catch(q){console.error("❌ 측정 완료 중 오류 발생:",q),w(!1),b(Jf);const ge=(q==null?void 0:q.message)||(q==null?void 0:q.toString())||"알 수 없는 오류";alert(`측정 완료 중 오류가 발생했습니다: ${ge}

다시 시도해주세요.`)}},[r,Q,A,g,p,v,B,e]),j=q=>{const ge=Math.floor(q/60),me=q%60;return`${ge}:${me.toString().padStart(2,"0")}`},G=()=>x>40?"bg-blue-500":x>20?"bg-yellow-500":"bg-red-500",Y=K.useCallback(()=>{if(!T)return[];const q=[];return T.overallScore<70&&q.push("자세를 더 안정적으로 유지해주세요"),T.qualityFactors.signalStability<60&&q.push("움직임을 최소화해주세요"),T.qualityFactors.noiseLevel<70&&q.push("주변 진동을 줄여주세요"),T.qualityFactors.postureQuality<60&&q.push("편안한 자세로 앉아주세요"),q},[T]);return f.jsx("div",{className:"h-full bg-black text-white p-6 pt-8",style:{backgroundColor:"#000000"},children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsx("div",{className:"mb-6",children:f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("div",{className:"flex items-center gap-3",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-3 bg-blue-500 rounded-lg",children:f.jsx(cM,{className:"w-6 h-6 text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-white",children:"1분 측정"}),f.jsx("p",{className:"text-gray-400",children:"EEG, PPG, ACC 센서 데이터를 수집합니다"})]})]})}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-white font-medium",children:r.name}),f.jsxs("p",{className:"text-gray-400 text-sm",children:[r.gender==="male"?"남성":r.gender==="female"?"여성":"기타",", ",r.age,"세"]}),r.occupation&&f.jsx("p",{className:"text-gray-500 text-xs mt-1",children:OPe(r.occupation,r.customOccupation)})]})]})}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(75vh-150px)]",children:[f.jsxs("div",{className:"flex flex-col space-y-6 h-full",children:[T&&f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsxs(ct,{className:"p-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h3",{className:"font-medium text-white",children:"측정 품질 상태"}),f.jsx("button",{onClick:()=>O(!k),className:"text-sm text-blue-400 hover:text-blue-300",children:k?"간단히 보기":"자세히 보기"})]}),f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("span",{className:"text-lg",children:T.overallScore>=80?"✅":T.overallScore>=60?"⚠️":"❌"}),f.jsxs("span",{className:`font-medium ${T.overallScore>=80?"text-green-400":T.overallScore>=60?"text-yellow-400":"text-red-400"}`,children:[T.overallScore,"점 (",T.reliability==="excellent"?"우수":T.reliability==="good"?"양호":T.reliability==="fair"?"보통":"불량",")"]})]}),k&&f.jsxs("div",{className:"space-y-2 text-sm",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-gray-300",children:[f.jsxs("div",{children:["신호 안정성: ",T.qualityFactors.signalStability,"점"]}),f.jsxs("div",{children:["노이즈 레벨: ",T.qualityFactors.noiseLevel,"점"]}),f.jsxs("div",{children:["움직임 일관성: ",T.qualityFactors.movementConsistency,"점"]}),f.jsxs("div",{children:["자세 품질: ",T.qualityFactors.postureQuality,"점"]})]}),R.length>1&&f.jsxs("div",{className:"mt-3 p-2 bg-gray-800 rounded border border-gray-600",children:[f.jsx("div",{className:"text-xs font-medium text-gray-300 mb-1",children:"품질 변화 추이"}),f.jsx("div",{className:"flex items-end h-8 gap-px",children:R.map((q,ge)=>f.jsx("div",{className:`flex-1 ${q>=80?"bg-green-400":q>=60?"bg-yellow-400":"bg-red-400"} rounded-sm`,style:{height:`${q/100*100}%`},title:`${q}점`},ge))}),f.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["최근 ",R.length,"개 측정값"]})]}),f.jsxs("div",{className:"mt-2 p-2 bg-gray-800 rounded",children:[f.jsx("div",{className:"text-xs font-medium text-gray-300 mb-1",children:"측정 환경 분석"}),f.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[f.jsxs("div",{children:["주변 움직임: ",T.environmentalFactors.ambientMovement==="low"?"낮음 ✅":T.environmentalFactors.ambientMovement==="medium"?"보통 ⚠️":"높음 ❌"]}),f.jsxs("div",{children:["측정 일관성: ",T.environmentalFactors.measurementConsistency==="excellent"?"우수 ✅":T.environmentalFactors.measurementConsistency==="good"?"양호 ✅":T.environmentalFactors.measurementConsistency==="fair"?"보통 ⚠️":"불량 ❌"]}),f.jsxs("div",{children:["외부 간섭: ",T.environmentalFactors.externalInterference==="none"?"없음 ✅":T.environmentalFactors.externalInterference==="minimal"?"최소 ✅":T.environmentalFactors.externalInterference==="moderate"?"보통 ⚠️":"심각 ❌"]})]})]}),T.remeasurementSuggestions.isRecommended&&f.jsxs("div",{className:"mt-2 p-2 bg-orange-900/50 rounded border border-orange-700",children:[f.jsx("div",{className:"text-orange-300 font-medium text-xs",children:"재측정 권고"}),f.jsxs("div",{className:"text-orange-400 text-xs mt-1",children:[f.jsx("div",{className:"font-medium",children:"이유:"}),f.jsx("ul",{className:"ml-2",children:T.remeasurementSuggestions.reasons.map((q,ge)=>f.jsxs("li",{children:["• ",q]},ge))}),f.jsx("div",{className:"font-medium mt-1",children:"개선 방법:"}),f.jsx("ul",{className:"ml-2",children:T.remeasurementSuggestions.improvementTips.map((q,ge)=>f.jsxs("li",{children:["• ",q]},ge))})]})]}),T.warnings.length>0&&f.jsxs("div",{className:"mt-2 p-2 bg-yellow-900/50 rounded border border-yellow-700",children:[f.jsx("div",{className:"text-yellow-300 font-medium text-xs",children:"주의사항:"}),f.jsx("ul",{className:"text-yellow-400 text-xs mt-1",children:T.warnings.map((q,ge)=>f.jsxs("li",{children:["• ",q]},ge))})]})]}),Y().length>0&&f.jsxs("div",{className:"mt-3 p-2 bg-blue-900/50 rounded border border-blue-700",children:[f.jsx("div",{className:"text-blue-300 font-medium text-sm",children:"실시간 권고사항:"}),f.jsx("ul",{className:"text-blue-400 text-xs mt-1",children:Y().map((q,ge)=>f.jsxs("li",{children:["• ",q]},ge))})]})]})}),f.jsxs(Ye,{className:"bg-gray-900 border-gray-700 flex-1 flex flex-col",children:[f.jsx(wt,{className:"pb-4",children:f.jsxs(St,{className:"flex items-center gap-3 text-white",children:[f.jsx(Ba,{className:"w-5 h-5 text-blue-400"}),f.jsx("span",{children:"EEG (뇌파)"}),f.jsxs("div",{className:`
                    px-2 py-1 rounded text-xs
                    ${(Q.eegQuality||0)>=70?"bg-green-500/20 text-green-400":(Q.eegQuality||0)>=50?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}
                  `,children:["품질: ",(Q.eegQuality||0).toFixed(0),"%"]})]})}),f.jsx(ct,{className:"flex-1",children:o?f.jsx(mV,{datasets:[{data:A,label:"Ch1",color:"#3B82F6"},{data:g,label:"Ch2",color:"#10B981"}],title:"EEG 채널",unit:"μV",timeLabel:"최근 4초 데이터"}):f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-red-400 text-lg font-medium mb-2",children:"디바이스 착용 불량"}),f.jsxs("div",{className:"text-gray-500 text-sm",children:["FP1: ",l.fp1?"접촉 불량":"정상",", FP2: ",l.fp2?"접촉 불량":"정상"]})]})})})]}),f.jsxs(Ye,{className:"bg-gray-900 border-gray-700 flex-1 flex flex-col",children:[f.jsx(wt,{className:"pb-4",children:f.jsxs(St,{className:"flex items-center gap-3 text-white",children:[f.jsx(gA,{className:"w-5 h-5 text-red-400"}),f.jsx("span",{children:"PPG (맥파)"}),f.jsxs("div",{className:`
                    px-2 py-1 rounded text-xs
                    ${(Q.ppgQuality||0)>=70?"bg-green-500/20 text-green-400":(Q.ppgQuality||0)>=50?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}
                  `,children:["품질: ",(Q.ppgQuality||0).toFixed(0),"%"]})]})}),f.jsx(ct,{className:"flex-1",children:o?f.jsx(mV,{datasets:[{data:p,label:"Red",color:"#EF4444"},{data:v,label:"IR",color:"#8B5CF6"}],title:"PPG 채널",unit:"ADC",maxPoints:400,timeLabel:"최근 8초 데이터"}):f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-red-400 text-lg font-medium mb-2",children:"디바이스 착용 불량"}),f.jsx("div",{className:"text-gray-500 text-sm",children:"센서 접촉 상태를 확인해주세요"})]})})})]})]}),f.jsx("div",{className:"h-full",children:f.jsx(Ye,{className:"bg-gray-900 border-gray-700 h-full flex flex-col",children:f.jsxs(ct,{className:"p-8 flex-1 flex flex-col",children:[f.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center text-center space-y-8",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"text-8xl font-bold text-white mb-4",children:j(x)}),f.jsx("div",{className:"text-2xl text-gray-400",children:m?"측정 진행 중":"측정 대기"})]}),f.jsxs("div",{className:"w-full space-y-4",children:[f.jsx("div",{className:"w-full bg-gray-700 rounded-full h-4",children:f.jsx("div",{className:`h-4 rounded-full transition-all duration-1000 ${G()}`,style:{width:`${S}%`}})}),f.jsxs("div",{className:"text-sm text-gray-500",children:[S.toFixed(1),"% 완료"]})]})]}),f.jsxs("div",{className:"flex gap-4 mt-6",children:[f.jsx(At,{onClick:t,variant:"outline",className:"flex-1",disabled:m,children:"이전으로"}),f.jsx(At,{onClick:te,disabled:m,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:m?"측정 중...":"측정 시작"})]})]})})})]})]})})}function wn(r){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(r)}var Gi=Uint8Array,fo=Uint16Array,$j=Int32Array,pT=new Gi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mT=new Gi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pL=new Gi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mse=function(r,e){for(var t=new fo(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var a=new $j(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)a[i]=i-t[n]<<5|n;return{b:t,r:a}},vse=mse(pT,2),yse=vse.b,mL=vse.r;yse[28]=258,mL[258]=28;var xse=mse(mT,0),HPe=xse.b,vV=xse.r,vL=new fo(32768);for(var Kn=0;Kn<32768;++Kn){var Nd=(Kn&43690)>>1|(Kn&21845)<<1;Nd=(Nd&52428)>>2|(Nd&13107)<<2,Nd=(Nd&61680)>>4|(Nd&3855)<<4,vL[Kn]=((Nd&65280)>>8|(Nd&255)<<8)>>1}var eu=function(r,e,t){for(var n=r.length,a=0,i=new fo(e);a<n;++a)r[a]&&++i[r[a]-1];var s=new fo(e);for(a=1;a<e;++a)s[a]=s[a-1]+i[a-1]<<1;var o;if(t){o=new fo(1<<e);var l=15-e;for(a=0;a<n;++a)if(r[a])for(var c=a<<4|r[a],u=e-r[a],h=s[r[a]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)o[vL[h]>>l]=c}else for(o=new fo(n),a=0;a<n;++a)r[a]&&(o[a]=vL[s[r[a]-1]++]>>15-r[a]);return o},KA=new Gi(288);for(var Kn=0;Kn<144;++Kn)KA[Kn]=8;for(var Kn=144;Kn<256;++Kn)KA[Kn]=9;for(var Kn=256;Kn<280;++Kn)KA[Kn]=7;for(var Kn=280;Kn<288;++Kn)KA[Kn]=8;var $b=new Gi(32);for(var Kn=0;Kn<32;++Kn)$b[Kn]=5;var QPe=eu(KA,9,0),zPe=eu(KA,9,1),GPe=eu($b,5,0),VPe=eu($b,5,1),hD=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},Ml=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},dD=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},Kj=function(r){return(r+7)/8|0},bse=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Gi(r.subarray(e,t))},$Pe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hl=function(r,e,t){var n=new Error(e||$Pe[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Hl),!t)throw n;return n},KPe=function(r,e,t,n){var a=r.length,i=0;if(!a||e.f&&!e.l)return t||new Gi(0);var s=!t,o=s||e.i!=2,l=e.i;s&&(t=new Gi(a*3));var c=function(me){var we=t.length;if(me>we){var Me=new Gi(Math.max(we*2,me));Me.set(t),t=Me}},u=e.f||0,h=e.p||0,d=e.b||0,A=e.l,g=e.d,p=e.m,v=e.n,m=a*8;do{if(!A){u=Ml(r,h,1);var y=Ml(r,h+1,3);if(h+=3,y)if(y==1)A=zPe,g=VPe,p=9,v=5;else if(y==2){var _=Ml(r,h,31)+257,C=Ml(r,h+10,15)+4,w=_+Ml(r,h+5,31)+1;h+=14;for(var B=new Gi(w),D=new Gi(19),T=0;T<C;++T)D[pL[T]]=Ml(r,h+T*3,7);h+=C*3;for(var E=hD(D),R=(1<<E)-1,M=eu(D,E,1),T=0;T<w;){var k=M[Ml(r,h,R)];h+=k&15;var x=k>>4;if(x<16)B[T++]=x;else{var O=0,Q=0;for(x==16?(Q=3+Ml(r,h,3),h+=2,O=B[T-1]):x==17?(Q=3+Ml(r,h,7),h+=3):x==18&&(Q=11+Ml(r,h,127),h+=7);Q--;)B[T++]=O}}var H=B.subarray(0,_),W=B.subarray(_);p=hD(H),v=hD(W),A=eu(H,p,1),g=eu(W,v,1)}else Hl(1);else{var x=Kj(h)+4,b=r[x-4]|r[x-3]<<8,S=x+b;if(S>a){l&&Hl(0);break}o&&c(d+b),t.set(r.subarray(x,S),d),e.b=d+=b,e.p=h=S*8,e.f=u;continue}if(h>m){l&&Hl(0);break}}o&&c(d+131072);for(var te=(1<<p)-1,ee=(1<<v)-1,j=h;;j=h){var O=A[dD(r,h)&te],G=O>>4;if(h+=O&15,h>m){l&&Hl(0);break}if(O||Hl(2),G<256)t[d++]=G;else if(G==256){j=h,A=null;break}else{var Y=G-254;if(G>264){var T=G-257,Z=pT[T];Y=Ml(r,h,(1<<Z)-1)+yse[T],h+=Z}var de=g[dD(r,h)&ee],he=de>>4;de||Hl(3),h+=de&15;var W=HPe[he];if(he>3){var Z=mT[he];W+=dD(r,h)&(1<<Z)-1,h+=Z}if(h>m){l&&Hl(0);break}o&&c(d+131072);var fe=d+Y;if(d<W){var q=i-W,ge=Math.min(W,fe);for(q+d<0&&Hl(3);d<ge;++d)t[d]=n[q+d]}for(;d<fe;++d)t[d]=t[d-W]}}e.l=A,e.p=j,e.b=d,e.f=u,A&&(u=1,e.m=p,e.d=g,e.n=v)}while(!u);return d!=t.length&&s?bse(t,0,d):t.subarray(0,d)},Hu=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},_x=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},AD=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var a=t.length,i=t.slice();if(!a)return{t:Sse,l:0};if(a==1){var s=new Gi(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(S,_){return S.f-_.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,h=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=t[t[c].f<t[h].f?c++:h++],l=t[c!=u&&t[c].f<t[h].f?c++:h++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var d=i[0].s,n=1;n<a;++n)i[n].s>d&&(d=i[n].s);var A=new fo(d+1),g=yL(t[u-1],A,0);if(g>e){var n=0,p=0,v=g-e,m=1<<v;for(i.sort(function(_,C){return A[C.s]-A[_.s]||_.f-C.f});n<a;++n){var y=i[n].s;if(A[y]>e)p+=m-(1<<g-A[y]),A[y]=e;else break}for(p>>=v;p>0;){var x=i[n].s;A[x]<e?p-=1<<e-A[x]++-1:++n}for(;n>=0&&p;--n){var b=i[n].s;A[b]==e&&(--A[b],++p)}g=e}return{t:new Gi(A),l:g}},yL=function(r,e,t){return r.s==-1?Math.max(yL(r.l,e,t+1),yL(r.r,e,t+1)):e[r.s]=t},yV=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new fo(++e),n=0,a=r[0],i=1,s=function(l){t[n++]=l},o=1;o<=e;++o)if(r[o]==a&&o!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=r[o]}return{c:t.subarray(0,n),n:e}},Cx=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},wse=function(r,e,t){var n=t.length,a=Kj(e+2);r[a]=n&255,r[a+1]=n>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var i=0;i<n;++i)r[a+i+4]=t[i];return(a+4+n)*8},xV=function(r,e,t,n,a,i,s,o,l,c,u){Hu(e,u++,t),++a[256];for(var h=AD(a,15),d=h.t,A=h.l,g=AD(i,15),p=g.t,v=g.l,m=yV(d),y=m.c,x=m.n,b=yV(p),S=b.c,_=b.n,C=new fo(19),w=0;w<y.length;++w)++C[y[w]&31];for(var w=0;w<S.length;++w)++C[S[w]&31];for(var B=AD(C,7),D=B.t,T=B.l,E=19;E>4&&!D[pL[E-1]];--E);var R=c+5<<3,M=Cx(a,KA)+Cx(i,$b)+s,k=Cx(a,d)+Cx(i,p)+s+14+3*E+Cx(C,D)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&R<=M&&R<=k)return wse(e,u,r.subarray(l,l+c));var O,Q,H,W;if(Hu(e,u,1+(k<M)),u+=2,k<M){O=eu(d,A,0),Q=d,H=eu(p,v,0),W=p;var te=eu(D,T,0);Hu(e,u,x-257),Hu(e,u+5,_-1),Hu(e,u+10,E-4),u+=14;for(var w=0;w<E;++w)Hu(e,u+3*w,D[pL[w]]);u+=3*E;for(var ee=[y,S],j=0;j<2;++j)for(var G=ee[j],w=0;w<G.length;++w){var Y=G[w]&31;Hu(e,u,te[Y]),u+=D[Y],Y>15&&(Hu(e,u,G[w]>>5&127),u+=G[w]>>12)}}else O=QPe,Q=KA,H=GPe,W=$b;for(var w=0;w<o;++w){var Z=n[w];if(Z>255){var Y=Z>>18&31;_x(e,u,O[Y+257]),u+=Q[Y+257],Y>7&&(Hu(e,u,Z>>23&31),u+=pT[Y]);var de=Z&31;_x(e,u,H[de]),u+=W[de],de>3&&(_x(e,u,Z>>5&8191),u+=mT[de])}else _x(e,u,O[Z]),u+=Q[Z]}return _x(e,u,O[256]),u+Q[256]},WPe=new $j([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Sse=new Gi(0),qPe=function(r,e,t,n,a,i){var s=i.z||r.length,o=new Gi(n+s+5*(1+Math.ceil(s/7e3))+a),l=o.subarray(n,o.length-a),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var h=WPe[e-1],d=h>>13,A=h&8191,g=(1<<t)-1,p=i.p||new fo(32768),v=i.h||new fo(g+1),m=Math.ceil(t/3),y=2*m,x=function(z){return(r[z]^r[z+1]<<m^r[z+2]<<y)&g},b=new $j(25e3),S=new fo(288),_=new fo(32),C=0,w=0,B=i.i||0,D=0,T=i.w||0,E=0;B+2<s;++B){var R=x(B),M=B&32767,k=v[R];if(p[M]=k,v[R]=M,T<=B){var O=s-B;if((C>7e3||D>24576)&&(O>423||!c)){u=xV(r,l,0,b,S,_,w,D,E,B-E,u),D=C=w=0,E=B;for(var Q=0;Q<286;++Q)S[Q]=0;for(var Q=0;Q<30;++Q)_[Q]=0}var H=2,W=0,te=A,ee=M-k&32767;if(O>2&&R==x(B-ee))for(var j=Math.min(d,O)-1,G=Math.min(32767,B),Y=Math.min(258,O);ee<=G&&--te&&M!=k;){if(r[B+H]==r[B+H-ee]){for(var Z=0;Z<Y&&r[B+Z]==r[B+Z-ee];++Z);if(Z>H){if(H=Z,W=ee,Z>j)break;for(var de=Math.min(ee,Z-2),he=0,Q=0;Q<de;++Q){var fe=B-ee+Q&32767,q=p[fe],ge=fe-q&32767;ge>he&&(he=ge,k=fe)}}}M=k,k=p[M],ee+=M-k&32767}if(W){b[D++]=268435456|mL[H]<<18|vV[W];var me=mL[H]&31,we=vV[W]&31;w+=pT[me]+mT[we],++S[257+me],++_[we],T=B+H,++C}else b[D++]=r[B],++S[r[B]]}}for(B=Math.max(B,T);B<s;++B)b[D++]=r[B],++S[r[B]];u=xV(r,l,c,b,S,_,w,D,E,B-E,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=v,i.p=p,i.i=B,i.w=T)}else{for(var B=i.w||0;B<s+c;B+=65535){var Me=B+65535;Me>=s&&(l[u/8|0]=c,Me=s),u=wse(l,u+1,r.subarray(B,Me))}i.i=s}return bse(o,0,n+Kj(u)+a)},_se=function(){var r=1,e=0;return{p:function(t){for(var n=r,a=e,i=t.length|0,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)a+=n+=t[s];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}r=n,e=a},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},YPe=function(r,e,t,n,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),s=new Gi(i.length+r.length);s.set(i),s.set(r,i.length),r=s,a.w=i.length}return qPe(r,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,a)},Cse=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},XPe=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var a=_se();a.p(e.dictionary),Cse(r,2,a.d())}},ZPe=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Hl(6,"invalid zlib data"),(r[1]>>5&1)==1&&Hl(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function xL(r,e){e||(e={});var t=_se();t.p(r);var n=YPe(r,e,e.dictionary?6:2,4);return XPe(n,e),Cse(n,n.length-4,t.d()),n}function JPe(r,e){return KPe(r.subarray(ZPe(r),-4),{i:2},e,e)}var eke=typeof TextDecoder<"u"&&new TextDecoder,tke=0;try{eke.decode(Sse,{stream:!0}),tke=1}catch{}var ir=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function fD(){ir.console&&typeof ir.console.log=="function"&&ir.console.log.apply(ir.console,arguments)}var kn={log:fD,warn:function(r){ir.console&&(typeof ir.console.warn=="function"?ir.console.warn.apply(ir.console,arguments):fD.call(null,arguments))},error:function(r){ir.console&&(typeof ir.console.error=="function"?ir.console.error.apply(ir.console,arguments):fD(r))}};function gD(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){hg(n.response,e,t)},n.onerror=function(){kn.error("could not download file")},n.send()}function bV(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function XS(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var U1,bL,hg=ir.saveAs||((typeof window>"u"?"undefined":wn(window))!=="object"||window!==ir?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=ir.URL||ir.webkitURL,a=document.createElement("a");e=e||r.name||"download",a.download=e,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?bV(a.href)?gD(r,e,t):XS(a,a.target="_blank"):XS(a)):(a.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){XS(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(bV(r))gD(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){XS(n)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:wn(i)!=="object"&&(kn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return gD(r,e,t);var a=r.type==="application/octet-stream",i=/constructor/i.test(ir.HTMLElement)||ir.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&(typeof FileReader>"u"?"undefined":wn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(r)}else{var l=ir.URL||ir.webkitURL,c=l.createObjectURL(r);n?n.location=c:location.href=c,n=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Bse(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var a=t[n].re,i=t[n].process,s=a.exec(r);s&&(e=i(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function pD(r,e){var t=r[0],n=r[1],a=r[2],i=r[3];t=Pi(t,n,a,i,e[0],7,-680876936),i=Pi(i,t,n,a,e[1],12,-389564586),a=Pi(a,i,t,n,e[2],17,606105819),n=Pi(n,a,i,t,e[3],22,-1044525330),t=Pi(t,n,a,i,e[4],7,-176418897),i=Pi(i,t,n,a,e[5],12,1200080426),a=Pi(a,i,t,n,e[6],17,-1473231341),n=Pi(n,a,i,t,e[7],22,-45705983),t=Pi(t,n,a,i,e[8],7,1770035416),i=Pi(i,t,n,a,e[9],12,-1958414417),a=Pi(a,i,t,n,e[10],17,-42063),n=Pi(n,a,i,t,e[11],22,-1990404162),t=Pi(t,n,a,i,e[12],7,1804603682),i=Pi(i,t,n,a,e[13],12,-40341101),a=Pi(a,i,t,n,e[14],17,-1502002290),t=ki(t,n=Pi(n,a,i,t,e[15],22,1236535329),a,i,e[1],5,-165796510),i=ki(i,t,n,a,e[6],9,-1069501632),a=ki(a,i,t,n,e[11],14,643717713),n=ki(n,a,i,t,e[0],20,-373897302),t=ki(t,n,a,i,e[5],5,-701558691),i=ki(i,t,n,a,e[10],9,38016083),a=ki(a,i,t,n,e[15],14,-660478335),n=ki(n,a,i,t,e[4],20,-405537848),t=ki(t,n,a,i,e[9],5,568446438),i=ki(i,t,n,a,e[14],9,-1019803690),a=ki(a,i,t,n,e[3],14,-187363961),n=ki(n,a,i,t,e[8],20,1163531501),t=ki(t,n,a,i,e[13],5,-1444681467),i=ki(i,t,n,a,e[2],9,-51403784),a=ki(a,i,t,n,e[7],14,1735328473),t=Fi(t,n=ki(n,a,i,t,e[12],20,-1926607734),a,i,e[5],4,-378558),i=Fi(i,t,n,a,e[8],11,-2022574463),a=Fi(a,i,t,n,e[11],16,1839030562),n=Fi(n,a,i,t,e[14],23,-35309556),t=Fi(t,n,a,i,e[1],4,-1530992060),i=Fi(i,t,n,a,e[4],11,1272893353),a=Fi(a,i,t,n,e[7],16,-155497632),n=Fi(n,a,i,t,e[10],23,-1094730640),t=Fi(t,n,a,i,e[13],4,681279174),i=Fi(i,t,n,a,e[0],11,-358537222),a=Fi(a,i,t,n,e[3],16,-722521979),n=Fi(n,a,i,t,e[6],23,76029189),t=Fi(t,n,a,i,e[9],4,-640364487),i=Fi(i,t,n,a,e[12],11,-421815835),a=Fi(a,i,t,n,e[15],16,530742520),t=ji(t,n=Fi(n,a,i,t,e[2],23,-995338651),a,i,e[0],6,-198630844),i=ji(i,t,n,a,e[7],10,1126891415),a=ji(a,i,t,n,e[14],15,-1416354905),n=ji(n,a,i,t,e[5],21,-57434055),t=ji(t,n,a,i,e[12],6,1700485571),i=ji(i,t,n,a,e[3],10,-1894986606),a=ji(a,i,t,n,e[10],15,-1051523),n=ji(n,a,i,t,e[1],21,-2054922799),t=ji(t,n,a,i,e[8],6,1873313359),i=ji(i,t,n,a,e[15],10,-30611744),a=ji(a,i,t,n,e[6],15,-1560198380),n=ji(n,a,i,t,e[13],21,1309151649),t=ji(t,n,a,i,e[4],6,-145523070),i=ji(i,t,n,a,e[11],10,-1120210379),a=ji(a,i,t,n,e[2],15,718787259),n=ji(n,a,i,t,e[9],21,-343485551),r[0]=uA(t,r[0]),r[1]=uA(n,r[1]),r[2]=uA(a,r[2]),r[3]=uA(i,r[3])}function vT(r,e,t,n,a,i){return e=uA(uA(e,r),uA(n,i)),uA(e<<a|e>>>32-a,t)}function Pi(r,e,t,n,a,i,s){return vT(e&t|~e&n,r,e,a,i,s)}function ki(r,e,t,n,a,i,s){return vT(e&n|t&~n,r,e,a,i,s)}function Fi(r,e,t,n,a,i,s){return vT(e^t^n,r,e,a,i,s)}function ji(r,e,t,n,a,i,s){return vT(t^(e|~n),r,e,a,i,s)}function Nse(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)pD(n,rke(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(pD(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,pD(n,a),n}function rke(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}U1=ir.atob.bind(ir),bL=ir.btoa.bind(ir);var wV="0123456789abcdef".split("");function nke(r){for(var e="",t=0;t<4;t++)e+=wV[r>>8*t+4&15]+wV[r>>8*t&15];return e}function ake(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function wL(r){return Nse(r).map(ake).join("")}var ike=function(r){for(var e=0;e<r.length;e++)r[e]=nke(r[e]);return r.join("")}(Nse("hello"))!="5d41402abc4b2a76b9719d911017c592";function uA(r,e){if(ike){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function SL(r,e){var t,n,a,i;if(r!==t){for(var s=(a=r,i=1+(256/r.length>>0),new Array(i+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+s.charCodeAt(l))%256,o[l]=o[c],o[c]=u}t=r,n=o}else o=n;var h=e.length,d=0,A=0,g="";for(l=0;l<h;l++)A=(A+(u=o[d=(d+1)%256]))%256,o[d]=o[A],o[A]=u,s=o[(o[d]+o[A])%256],g+=String.fromCharCode(e.charCodeAt(l)^s);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var SV={print:4,modify:8,copy:16,"annot-forms":32};function sv(r,e,t,n){this.v=1,this.r=2;var a=192;r.forEach(function(o){if(SV.perm!==void 0)throw new Error("Invalid permission: "+o);a+=SV[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=wL(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=SL(this.encryptionKey,this.padding)}function ov(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var a=r.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?e+="#"+("0"+a.toString(16)).slice(-2):e+=r[n]}return e}function _V(r){if(wn(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,a){if(a=a||!1,typeof t!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!a],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[t]){var s=e[t][i];try{s[0].apply(r,n)}catch(o){ir.console&&kn.error("jsPDF PubSub Error",o.message,o)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function sB(r){if(!(this instanceof sB))return new sB(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function Tse(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function vg(r,e,t,n,a){if(!(this instanceof vg))return new vg(r,e,t,n,a);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,Tse.call(this,n,a)}function Bv(r,e,t,n,a){if(!(this instanceof Bv))return new Bv(r,e,t,n,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Tse.call(this,n,a)}function nr(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],s=[],o=1,l=16,c="S",u=null;wn(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,a=r.format||a,i=r.compress||r.compressPdf||i,(u=r.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(l=r.floatPrecision),c=r.defaultPathOperation||"S"),s=r.filters||(i===!0?["FlateEncode"]:s),n=n||"mm",t=(""+(t||"P")).toLowerCase();var h=r.putOnlyUsedFonts||!1,d={},A={internal:{},__private__:{}};A.__private__.PubSub=_V;var g="1.3",p=A.__private__.getPdfVersion=function(){return g};A.__private__.setPdfVersion=function(P){g=P};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return v};var m=A.__private__.getPageFormat=function(P){return v[P]};a=a||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},x=y.COMPAT;function b(){this.saveGraphicsState(),J(new mt(Qe,0,0,-Qe,0,Ii()*Qe).toString()+" cm"),this.setFontSize(this.getFontSize()/Qe),c="n",x=y.ADVANCED}function S(){this.restoreGraphicsState(),c="S",x=y.COMPAT}var _=A.__private__.combineFontStyleAndFontWeight=function(P,re){if(P=="bold"&&re=="normal"||P=="bold"&&re==400||P=="normal"&&re=="italic"||P=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(P=re==400||re==="normal"?P==="italic"?"italic":"normal":re!=700&&re!=="bold"||P!=="normal"?(re==700?"bold":re)+""+P:"bold"),P};A.advancedAPI=function(P){var re=x===y.COMPAT;return re&&b.call(this),typeof P!="function"||(P(this),re&&S.call(this)),this},A.compatAPI=function(P){var re=x===y.ADVANCED;return re&&S.call(this),typeof P!="function"||(P(this),re&&b.call(this)),this},A.isAdvancedAPI=function(){return x===y.ADVANCED};var C,w=function(P){if(x!==y.ADVANCED)throw new Error(P+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=A.roundToPrecision=A.__private__.roundToPrecision=function(P,re){var xe=e||re;if(isNaN(P)||isNaN(xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return P.toFixed(xe).replace(/0+$/,"")};C=A.hpf=A.__private__.hpf=typeof l=="number"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return B(P,l)}:l==="smart"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return B(P,P>-1&&P<1?16:5)}:function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return B(P,16)};var D=A.f2=A.__private__.f2=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f2");return B(P,2)},T=A.__private__.f3=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f3");return B(P,3)},E=A.scale=A.__private__.scale=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.scale");return x===y.COMPAT?P*Qe:x===y.ADVANCED?P:void 0},R=function(P){return x===y.COMPAT?Ii()-P:x===y.ADVANCED?P:void 0},M=function(P){return E(R(P))};A.__private__.setPrecision=A.setPrecision=function(P){typeof parseInt(P,10)=="number"&&(e=parseInt(P,10))};var k,O="00000000000000000000000000000000",Q=A.__private__.getFileId=function(){return O},H=A.__private__.setFileId=function(P){return O=P!==void 0&&/^[a-fA-F0-9]{32}$/.test(P)?P.toUpperCase():O.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&($n=new sv(u.userPermissions,u.userPassword,u.ownerPassword,O)),O};A.setFileId=function(P){return H(P),this},A.getFileId=function(){return Q()};var W=A.__private__.convertDateToPDFDate=function(P){var re=P.getTimezoneOffset(),xe=re<0?"+":"-",Se=Math.floor(Math.abs(re/60)),ke=Math.abs(re%60),Ke=[xe,Y(Se),"'",Y(ke),"'"].join("");return["D:",P.getFullYear(),Y(P.getMonth()+1),Y(P.getDate()),Y(P.getHours()),Y(P.getMinutes()),Y(P.getSeconds()),Ke].join("")},te=A.__private__.convertPDFDateToDate=function(P){var re=parseInt(P.substr(2,4),10),xe=parseInt(P.substr(6,2),10)-1,Se=parseInt(P.substr(8,2),10),ke=parseInt(P.substr(10,2),10),Ke=parseInt(P.substr(12,2),10),rt=parseInt(P.substr(14,2),10);return new Date(re,xe,Se,ke,Ke,rt,0)},ee=A.__private__.setCreationDate=function(P){var re;if(P===void 0&&(P=new Date),P instanceof Date)re=W(P);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(P))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=P}return k=re},j=A.__private__.getCreationDate=function(P){var re=k;return P==="jsDate"&&(re=te(k)),re};A.setCreationDate=function(P){return ee(P),this},A.getCreationDate=function(P){return j(P)};var G,Y=A.__private__.padd2=function(P){return("0"+parseInt(P)).slice(-2)},Z=A.__private__.padd2Hex=function(P){return("00"+(P=P.toString())).substr(P.length)},de=0,he=[],fe=[],q=0,ge=[],me=[],we=!1,Me=fe,z=function(){de=0,q=0,fe=[],he=[],ge=[],Ea=Nr(),Zr=Nr()};A.__private__.setCustomOutputDestination=function(P){we=!0,Me=P};var pe=function(P){we||(Me=P)};A.__private__.resetCustomOutputDestination=function(){we=!1,Me=fe};var J=A.__private__.out=function(P){return P=P.toString(),q+=P.length+1,Me.push(P),Me},oe=A.__private__.write=function(P){return J(arguments.length===1?P.toString():Array.prototype.join.call(arguments," "))},ae=A.__private__.getArrayBuffer=function(P){for(var re=P.length,xe=new ArrayBuffer(re),Se=new Uint8Array(xe);re--;)Se[re]=P.charCodeAt(re);return xe},ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return ue};var be=r.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(P){return be=x===y.ADVANCED?P/Qe:P,this};var _e,ye=A.__private__.getFontSize=A.getFontSize=function(){return x===y.COMPAT?be:be*Qe},Ee=r.R2L||!1;A.__private__.setR2L=A.setR2L=function(P){return Ee=P,this},A.__private__.getR2L=A.getR2L=function(){return Ee};var ze,Fe=A.__private__.setZoomMode=function(P){var re=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(P))_e=P;else if(isNaN(P)){if(re.indexOf(P)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+P+'" is not recognized.');_e=P}else _e=parseInt(P,10)};A.__private__.getZoomMode=function(){return _e};var Ge,at=A.__private__.setPageMode=function(P){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(P)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+P+'" is not recognized.');ze=P};A.__private__.getPageMode=function(){return ze};var ut=A.__private__.setLayoutMode=function(P){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(P)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+P+'" is not recognized.');Ge=P};A.__private__.getLayoutMode=function(){return Ge},A.__private__.setDisplayMode=A.setDisplayMode=function(P,re,xe){return Fe(P),ut(re),at(xe),this};var gt={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(P){if(Object.keys(gt).indexOf(P)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return gt[P]},A.__private__.getDocumentProperties=function(){return gt},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(P){for(var re in gt)gt.hasOwnProperty(re)&&P[re]&&(gt[re]=P[re]);return this},A.__private__.setDocumentProperty=function(P,re){if(Object.keys(gt).indexOf(P)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return gt[P]=re};var Le,Qe,ht,it,Vt,kt={},Bt={},Sr=[],zt={},qe={},pt={},Nt={},Kt=null,Yt=0,Je=[],yt=new _V(A),mr=r.hotfixes||[],dr={},an={},_r=[],mt=function P(re,xe,Se,ke,Ke,rt){if(!(this instanceof P))return new P(re,xe,Se,ke,Ke,rt);isNaN(re)&&(re=1),isNaN(xe)&&(xe=0),isNaN(Se)&&(Se=0),isNaN(ke)&&(ke=1),isNaN(Ke)&&(Ke=0),isNaN(rt)&&(rt=0),this._matrix=[re,xe,Se,ke,Ke,rt]};Object.defineProperty(mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),mt.prototype.join=function(P){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(P)},mt.prototype.multiply=function(P){var re=P.sx*this.sx+P.shy*this.shx,xe=P.sx*this.shy+P.shy*this.sy,Se=P.shx*this.sx+P.sy*this.shx,ke=P.shx*this.shy+P.sy*this.sy,Ke=P.tx*this.sx+P.ty*this.shx+this.tx,rt=P.tx*this.shy+P.ty*this.sy+this.ty;return new mt(re,xe,Se,ke,Ke,rt)},mt.prototype.decompose=function(){var P=this.sx,re=this.shy,xe=this.shx,Se=this.sy,ke=this.tx,Ke=this.ty,rt=Math.sqrt(P*P+re*re),I=(P/=rt)*xe+(re/=rt)*Se;xe-=P*I,Se-=re*I;var U=Math.sqrt(xe*xe+Se*Se);return I/=U,P*(Se/=U)<re*(xe/=U)&&(P=-P,re=-re,I=-I,rt=-rt),{scale:new mt(rt,0,0,U,0,0),translate:new mt(1,0,0,1,ke,Ke),rotate:new mt(P,re,-re,P,0,0),skew:new mt(1,0,I,1,0,0)}},mt.prototype.toString=function(P){return this.join(" ")},mt.prototype.inversed=function(){var P=this.sx,re=this.shy,xe=this.shx,Se=this.sy,ke=this.tx,Ke=this.ty,rt=1/(P*Se-re*xe),I=Se*rt,U=-re*rt,$=-xe*rt,le=P*rt;return new mt(I,U,$,le,-I*ke-$*Ke,-U*ke-le*Ke)},mt.prototype.applyToPoint=function(P){var re=P.x*this.sx+P.y*this.shx+this.tx,xe=P.x*this.shy+P.y*this.sy+this.ty;return new _u(re,xe)},mt.prototype.applyToRectangle=function(P){var re=this.applyToPoint(P),xe=this.applyToPoint(new _u(P.x+P.w,P.y+P.h));return new td(re.x,re.y,xe.x-re.x,xe.y-re.y)},mt.prototype.clone=function(){var P=this.sx,re=this.shy,xe=this.shx,Se=this.sy,ke=this.tx,Ke=this.ty;return new mt(P,re,xe,Se,ke,Ke)},A.Matrix=mt;var Cn=A.matrixMult=function(P,re){return re.multiply(P)},Pr=new mt(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=Pr;var ar=function(P,re){if(!qe[P]){var xe=(re instanceof vg?"Sh":"P")+(Object.keys(zt).length+1).toString(10);re.id=xe,qe[P]=xe,zt[xe]=re,yt.publish("addPattern",re)}};A.ShadingPattern=vg,A.TilingPattern=Bv,A.addShadingPattern=function(P,re){return w("addShadingPattern()"),ar(P,re),this},A.beginTilingPattern=function(P){w("beginTilingPattern()"),rd(P.boundingBox[0],P.boundingBox[1],P.boundingBox[2]-P.boundingBox[0],P.boundingBox[3]-P.boundingBox[1],P.matrix)},A.endTilingPattern=function(P,re){w("endTilingPattern()"),re.stream=me[G].join(`
`),ar(P,re),yt.publish("endTilingPattern",re),_r.pop().restore()};var Dr=A.__private__.newObject=function(){var P=Nr();return sn(P,!0),P},Nr=A.__private__.newObjectDeferred=function(){return de++,he[de]=function(){return q},de},sn=function(P,re){return re=typeof re=="boolean"&&re,he[P]=q,re&&J(P+" 0 obj"),P},ri=A.__private__.newAdditionalObject=function(){var P={objId:Nr(),content:""};return ge.push(P),P},Ea=Nr(),Zr=Nr(),ia=A.__private__.decodeColorString=function(P){var re=P.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length===5&&(re[4]==="k"||re[4]==="K")&&(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var xe=parseFloat(re[0]);re=[xe,xe,xe,"r"]}for(var Se="#",ke=0;ke<3;ke++)Se+=("0"+Math.floor(255*parseFloat(re[ke])).toString(16)).slice(-2);return Se},Yn=A.__private__.encodeColorString=function(P){var re;typeof P=="string"&&(P={ch1:P});var xe=P.ch1,Se=P.ch2,ke=P.ch3,Ke=P.ch4,rt=P.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof xe=="string"&&xe.charAt(0)!=="#"){var I=new Bse(xe);if(I.ok)xe=I.toHex();else if(!/^\d*\.?\d*$/.test(xe))throw new Error('Invalid color "'+xe+'" passed to jsPDF.encodeColorString.')}if(typeof xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(xe)&&(xe="#"+xe[1]+xe[1]+xe[2]+xe[2]+xe[3]+xe[3]),typeof xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(xe)){var U=parseInt(xe.substr(1),16);xe=U>>16&255,Se=U>>8&255,ke=255&U}if(Se===void 0||Ke===void 0&&xe===Se&&Se===ke)if(typeof xe=="string")re=xe+" "+rt[0];else switch(P.precision){case 2:re=D(xe/255)+" "+rt[0];break;case 3:default:re=T(xe/255)+" "+rt[0]}else if(Ke===void 0||wn(Ke)==="object"){if(Ke&&!isNaN(Ke.a)&&Ke.a===0)return re=["1.","1.","1.",rt[1]].join(" ");if(typeof xe=="string")re=[xe,Se,ke,rt[1]].join(" ");else switch(P.precision){case 2:re=[D(xe/255),D(Se/255),D(ke/255),rt[1]].join(" ");break;default:case 3:re=[T(xe/255),T(Se/255),T(ke/255),rt[1]].join(" ")}}else if(typeof xe=="string")re=[xe,Se,ke,Ke,rt[2]].join(" ");else switch(P.precision){case 2:re=[D(xe),D(Se),D(ke),D(Ke),rt[2]].join(" ");break;case 3:default:re=[T(xe),T(Se),T(ke),T(Ke),rt[2]].join(" ")}return re},fa=A.__private__.getFilters=function(){return s},Ln=A.__private__.putStream=function(P){var re=(P=P||{}).data||"",xe=P.filters||fa(),Se=P.alreadyAppliedFilters||[],ke=P.addLength1||!1,Ke=re.length,rt=P.objectId,I=function(Gr){return Gr};if(u!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(I=$n.encryptor(rt,0));var U={};xe===!0&&(xe=["FlateEncode"]);var $=P.additionalKeyValues||[],le=(U=nr.API.processDataByFilters!==void 0?nr.API.processDataByFilters(re,xe):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(U.data.length!==0&&($.push({key:"Length",value:U.data.length}),ke===!0&&$.push({key:"Length1",value:Ke})),le.length!=0)if(le.split("/").length-1==1)$.push({key:"Filter",value:le});else{$.push({key:"Filter",value:"["+le+"]"});for(var Ie=0;Ie<$.length;Ie+=1)if($[Ie].key==="DecodeParms"){for(var Ue=[],st=0;st<U.reverseChain.split("/").length-1;st+=1)Ue.push("null");Ue.push($[Ie].value),$[Ie].value="["+Ue.join(" ")+"]"}}J("<<");for(var lr=0;lr<$.length;lr++)J("/"+$[lr].key+" "+$[lr].value);J(">>"),U.data.length!==0&&(J("stream"),J(I(U.data)),J("endstream"))},ni=A.__private__.putPage=function(P){var re=P.number,xe=P.data,Se=P.objId,ke=P.contentsObjId;sn(Se,!0),J("<</Type /Page"),J("/Parent "+P.rootDictionaryObjId+" 0 R"),J("/Resources "+P.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(C(P.mediaBox.bottomLeftX))+" "+parseFloat(C(P.mediaBox.bottomLeftY))+" "+C(P.mediaBox.topRightX)+" "+C(P.mediaBox.topRightY)+"]"),P.cropBox!==null&&J("/CropBox ["+C(P.cropBox.bottomLeftX)+" "+C(P.cropBox.bottomLeftY)+" "+C(P.cropBox.topRightX)+" "+C(P.cropBox.topRightY)+"]"),P.bleedBox!==null&&J("/BleedBox ["+C(P.bleedBox.bottomLeftX)+" "+C(P.bleedBox.bottomLeftY)+" "+C(P.bleedBox.topRightX)+" "+C(P.bleedBox.topRightY)+"]"),P.trimBox!==null&&J("/TrimBox ["+C(P.trimBox.bottomLeftX)+" "+C(P.trimBox.bottomLeftY)+" "+C(P.trimBox.topRightX)+" "+C(P.trimBox.topRightY)+"]"),P.artBox!==null&&J("/ArtBox ["+C(P.artBox.bottomLeftX)+" "+C(P.artBox.bottomLeftY)+" "+C(P.artBox.topRightX)+" "+C(P.artBox.topRightY)+"]"),typeof P.userUnit=="number"&&P.userUnit!==1&&J("/UserUnit "+P.userUnit),yt.publish("putPage",{objId:Se,pageContext:Je[re],pageNumber:re,page:xe}),J("/Contents "+ke+" 0 R"),J(">>"),J("endobj");var Ke=xe.join(`
`);return x===y.ADVANCED&&(Ke+=`
Q`),sn(ke,!0),Ln({data:Ke,filters:fa(),objectId:ke}),J("endobj"),Se},Mt=A.__private__.putPages=function(){var P,re,xe=[];for(P=1;P<=Yt;P++)Je[P].objId=Nr(),Je[P].contentsObjId=Nr();for(P=1;P<=Yt;P++)xe.push(ni({number:P,data:me[P],objId:Je[P].objId,contentsObjId:Je[P].contentsObjId,mediaBox:Je[P].mediaBox,cropBox:Je[P].cropBox,bleedBox:Je[P].bleedBox,trimBox:Je[P].trimBox,artBox:Je[P].artBox,userUnit:Je[P].userUnit,rootDictionaryObjId:Ea,resourceDictionaryObjId:Zr}));sn(Ea,!0),J("<</Type /Pages");var Se="/Kids [";for(re=0;re<Yt;re++)Se+=xe[re]+" 0 R ";J(Se+"]"),J("/Count "+Yt),J(">>"),J("endobj"),yt.publish("postPutPages")},Be=function(P){yt.publish("putFont",{font:P,out:J,newObject:Dr,putStream:Ln}),P.isAlreadyPutted!==!0&&(P.objectNumber=Dr(),J("<<"),J("/Type /Font"),J("/BaseFont /"+ov(P.postScriptName)),J("/Subtype /Type1"),typeof P.encoding=="string"&&J("/Encoding /"+P.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},lt=function(){for(var P in kt)kt.hasOwnProperty(P)&&(h===!1||h===!0&&d.hasOwnProperty(P))&&Be(kt[P])},Et=function(P){P.objectNumber=Dr();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[C(P.x),C(P.y),C(P.x+P.width),C(P.y+P.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+P.matrix.toString()+"]"});var xe=P.pages[1].join(`
`);Ln({data:xe,additionalKeyValues:re,objectId:P.objectNumber}),J("endobj")},zr=function(){for(var P in dr)dr.hasOwnProperty(P)&&Et(dr[P])},ta=function(P,re){var xe,Se=[],ke=1/(re-1);for(xe=0;xe<1;xe+=ke)Se.push(xe);if(Se.push(1),P[0].offset!=0){var Ke={offset:0,color:P[0].color};P.unshift(Ke)}if(P[P.length-1].offset!=1){var rt={offset:1,color:P[P.length-1].color};P.push(rt)}for(var I="",U=0,$=0;$<Se.length;$++){for(xe=Se[$];xe>P[U+1].offset;)U++;var le=P[U].offset,Ie=(xe-le)/(P[U+1].offset-le),Ue=P[U].color,st=P[U+1].color;I+=Z(Math.round((1-Ie)*Ue[0]+Ie*st[0]).toString(16))+Z(Math.round((1-Ie)*Ue[1]+Ie*st[1]).toString(16))+Z(Math.round((1-Ie)*Ue[2]+Ie*st[2]).toString(16))}return I.trim()},Bn=function(P,re){re||(re=21);var xe=Dr(),Se=ta(P.colors,re),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+re+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ln({data:Se,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:xe}),J("endobj"),P.objectNumber=Dr(),J("<< /ShadingType "+P.type),J("/ColorSpace /DeviceRGB");var Ke="/Coords ["+C(parseFloat(P.coords[0]))+" "+C(parseFloat(P.coords[1]))+" ";P.type===2?Ke+=C(parseFloat(P.coords[2]))+" "+C(parseFloat(P.coords[3])):Ke+=C(parseFloat(P.coords[2]))+" "+C(parseFloat(P.coords[3]))+" "+C(parseFloat(P.coords[4]))+" "+C(parseFloat(P.coords[5])),J(Ke+="]"),P.matrix&&J("/Matrix ["+P.matrix.toString()+"]"),J("/Function "+xe+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},ga=function(P,re){var xe=Nr(),Se=Dr();re.push({resourcesOid:xe,objectOid:Se}),P.objectNumber=Se;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+P.boundingBox.map(C).join(" ")+"]"}),ke.push({key:"XStep",value:C(P.xStep)}),ke.push({key:"YStep",value:C(P.yStep)}),ke.push({key:"Resources",value:xe+" 0 R"}),P.matrix&&ke.push({key:"Matrix",value:"["+P.matrix.toString()+"]"}),Ln({data:P.stream,additionalKeyValues:ke,objectId:P.objectNumber}),J("endobj")},Da=function(P){var re;for(re in zt)zt.hasOwnProperty(re)&&(zt[re]instanceof vg?Bn(zt[re]):zt[re]instanceof Bv&&ga(zt[re],P))},Ti=function(P){for(var re in P.objectNumber=Dr(),J("<<"),P)switch(re){case"opacity":J("/ca "+D(P[re]));break;case"stroke-opacity":J("/CA "+D(P[re]))}J(">>"),J("endobj")},qi=function(){var P;for(P in pt)pt.hasOwnProperty(P)&&Ti(pt[P])},On=function(){for(var P in J("/XObject <<"),dr)dr.hasOwnProperty(P)&&dr[P].objectNumber>=0&&J("/"+P+" "+dr[P].objectNumber+" 0 R");yt.publish("putXobjectDict"),J(">>")},Qh=function(){$n.oid=Dr(),J("<<"),J("/Filter /Standard"),J("/V "+$n.v),J("/R "+$n.r),J("/U <"+$n.toHexString($n.U)+">"),J("/O <"+$n.toHexString($n.O)+">"),J("/P "+$n.P),J(">>"),J("endobj")},dc=function(){for(var P in J("/Font <<"),kt)kt.hasOwnProperty(P)&&(h===!1||h===!0&&d.hasOwnProperty(P))&&J("/"+P+" "+kt[P].objectNumber+" 0 R");J(">>")},Wp=function(){if(Object.keys(zt).length>0){for(var P in J("/Shading <<"),zt)zt.hasOwnProperty(P)&&zt[P]instanceof vg&&zt[P].objectNumber>=0&&J("/"+P+" "+zt[P].objectNumber+" 0 R");yt.publish("putShadingPatternDict"),J(">>")}},vu=function(P){if(Object.keys(zt).length>0){for(var re in J("/Pattern <<"),zt)zt.hasOwnProperty(re)&&zt[re]instanceof A.TilingPattern&&zt[re].objectNumber>=0&&zt[re].objectNumber<P&&J("/"+re+" "+zt[re].objectNumber+" 0 R");yt.publish("putTilingPatternDict"),J(">>")}},of=function(){if(Object.keys(pt).length>0){var P;for(P in J("/ExtGState <<"),pt)pt.hasOwnProperty(P)&&pt[P].objectNumber>=0&&J("/"+P+" "+pt[P].objectNumber+" 0 R");yt.publish("putGStateDict"),J(">>")}},Vn=function(P){sn(P.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),dc(),Wp(),vu(P.objectOid),of(),On(),J(">>"),J("endobj")},lf=function(){var P=[];lt(),qi(),zr(),Da(P),yt.publish("putResources"),P.forEach(Vn),Vn({resourcesOid:Zr,objectOid:Number.MAX_SAFE_INTEGER}),yt.publish("postPutResources")},cf=function(){yt.publish("putAdditionalObjects");for(var P=0;P<ge.length;P++){var re=ge[P];sn(re.objId,!0),J(re.content),J("endobj")}yt.publish("postPutAdditionalObjects")},qp=function(P){Bt[P.fontName]=Bt[P.fontName]||{},Bt[P.fontName][P.fontStyle]=P.id},uf=function(P,re,xe,Se,ke){var Ke={id:"F"+(Object.keys(kt).length+1).toString(10),postScriptName:P,fontName:re,fontStyle:xe,encoding:Se,isStandardFont:ke||!1,metadata:{}};return yt.publish("addFont",{font:Ke,instance:this}),kt[Ke.id]=Ke,qp(Ke),Ke.id},Yp=function(P){for(var re=0,xe=ue.length;re<xe;re++){var Se=uf.call(this,P[re][0],P[re][1],P[re][2],ue[re][3],!0);h===!1&&(d[Se]=!0);var ke=P[re][0].split("-");qp({id:Se,fontName:ke[0],fontStyle:ke[1]||""})}yt.publish("addFonts",{fonts:kt,dictionary:Bt})},Ss=function(P){return P.foo=function(){try{return P.apply(this,arguments)}catch(Se){var re=Se.stack||"";~re.indexOf(" at ")&&(re=re.split(" at ")[1]);var xe="Error in function "+re.split(`
`)[0].split("<")[0]+": "+Se.message;if(!ir.console)throw new Error(xe);ir.console.error(xe,Se),ir.alert&&alert(xe)}},P.foo.bar=P,P.foo},zh=function(P,re){var xe,Se,ke,Ke,rt,I,U,$,le;if(ke=(re=re||{}).sourceEncoding||"Unicode",rt=re.outputEncoding,(re.autoencode||rt)&&kt[Le].metadata&&kt[Le].metadata[ke]&&kt[Le].metadata[ke].encoding&&(Ke=kt[Le].metadata[ke].encoding,!rt&&kt[Le].encoding&&(rt=kt[Le].encoding),!rt&&Ke.codePages&&(rt=Ke.codePages[0]),typeof rt=="string"&&(rt=Ke[rt]),rt)){for(U=!1,I=[],xe=0,Se=P.length;xe<Se;xe++)($=rt[P.charCodeAt(xe)])?I.push(String.fromCharCode($)):I.push(P[xe]),I[xe].charCodeAt(0)>>8&&(U=!0);P=I.join("")}for(xe=P.length;U===void 0&&xe!==0;)P.charCodeAt(xe-1)>>8&&(U=!0),xe--;if(!U)return P;for(I=re.noBOM?[]:[254,255],xe=0,Se=P.length;xe<Se;xe++){if((le=($=P.charCodeAt(xe))>>8)>>8)throw new Error("Character at position "+xe+" of string '"+P+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");I.push(le),I.push($-(le<<8))}return String.fromCharCode.apply(void 0,I)},sa=A.__private__.pdfEscape=A.pdfEscape=function(P,re){return zh(P,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yi=A.__private__.beginPage=function(P){me[++Yt]=[],Je[Yt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(P[0]),topRightY:Number(P[1])}},hf(Yt),pe(me[G])},yu=function(P,re){var xe,Se,ke;switch(t=re||t,typeof P=="string"&&(xe=m(P.toLowerCase()),Array.isArray(xe)&&(Se=xe[0],ke=xe[1])),Array.isArray(P)&&(Se=P[0]*Qe,ke=P[1]*Qe),isNaN(Se)&&(Se=a[0],ke=a[1]),(Se>14400||ke>14400)&&(kn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),ke=Math.min(14400,ke)),a=[Se,ke],t.substr(0,1)){case"l":ke>Se&&(a=[ke,Se]);break;case"p":Se>ke&&(a=[ke,Se])}Yi(a),pf(gf),J(gi),yf!==0&&J(yf+" J"),ed!==0&&J(ed+" j"),yt.publish("addPage",{pageNumber:Yt})},Gh=function(P){P>0&&P<=Yt&&(me.splice(P,1),Je.splice(P,1),Yt--,G>Yt&&(G=Yt),this.setPage(G))},hf=function(P){P>0&&P<=Yt&&(G=P)},dn=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return me.length-1},xu=function(P,re,xe){var Se,ke=void 0;return xe=xe||{},P=P!==void 0?P:kt[Le].fontName,re=re!==void 0?re:kt[Le].fontStyle,Se=P.toLowerCase(),Bt[Se]!==void 0&&Bt[Se][re]!==void 0?ke=Bt[Se][re]:Bt[P]!==void 0&&Bt[P][re]!==void 0?ke=Bt[P][re]:xe.disableWarning===!1&&kn.warn("Unable to look up font label for font '"+P+"', '"+re+"'. Refer to getFontList() for available fonts."),ke||xe.noFallback||(ke=Bt.times[re])==null&&(ke=Bt.times.normal),ke},bu=A.__private__.putInfo=function(){var P=Dr(),re=function(Se){return Se};for(var xe in u!==null&&(re=$n.encryptor(P,0)),J("<<"),J("/Producer ("+sa(re("jsPDF "+nr.version))+")"),gt)gt.hasOwnProperty(xe)&&gt[xe]&&J("/"+xe.substr(0,1).toUpperCase()+xe.substr(1)+" ("+sa(re(gt[xe]))+")");J("/CreationDate ("+sa(re(k))+")"),J(">>"),J("endobj")},wl=A.__private__.putCatalog=function(P){var re=(P=P||{}).rootDictionaryObjId||Ea;switch(Dr(),J("<<"),J("/Type /Catalog"),J("/Pages "+re+" 0 R"),_e||(_e="fullwidth"),_e){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var xe=""+_e;xe.substr(xe.length-1)==="%"&&(_e=parseInt(_e)/100),typeof _e=="number"&&J("/OpenAction [3 0 R /XYZ null null "+D(_e)+"]")}switch(Ge||(Ge="continuous"),Ge){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}ze&&J("/PageMode /"+ze),yt.publish("putCatalog"),J(">>"),J("endobj")},vy=A.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(de+1)),J("/Root "+de+" 0 R"),J("/Info "+(de-1)+" 0 R"),u!==null&&J("/Encrypt "+$n.oid+" 0 R"),J("/ID [ <"+O+"> <"+O+"> ]"),J(">>")},Xp=A.__private__.putHeader=function(){J("%PDF-"+g),J("%ºß¬à")},yy=A.__private__.putXRef=function(){var P="0000000000";J("xref"),J("0 "+(de+1)),J("0000000000 65535 f ");for(var re=1;re<=de;re++)typeof he[re]=="function"?J((P+he[re]()).slice(-10)+" 00000 n "):he[re]!==void 0?J((P+he[re]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Sl=A.__private__.buildDocument=function(){z(),pe(fe),yt.publish("buildDocument"),Xp(),Mt(),cf(),lf(),u!==null&&Qh(),bu(),wl();var P=q;return yy(),vy(),J("startxref"),J(""+P),J("%%EOF"),pe(me[G]),fe.join(`
`)},Vh=A.__private__.getBlob=function(P){return new Blob([ae(P)],{type:"application/pdf"})},$h=A.output=A.__private__.output=Ss(function(P,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",P){case void 0:return Sl();case"save":A.save(re.filename);break;case"arraybuffer":return ae(Sl());case"blob":return Vh(Sl());case"bloburi":case"bloburl":if(ir.URL!==void 0&&typeof ir.URL.createObjectURL=="function")return ir.URL&&ir.URL.createObjectURL(Vh(Sl()))||void 0;kn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var xe="",Se=Sl();try{xe=bL(Se)}catch{xe=bL(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+re.filename+";base64,"+xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ir)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(ke=re.pdfObjectUrl,Ke="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",I=ir.open();return I!==null&&I.document.write(rt),I}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ir)==="[object Window]"){var U='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',$=ir.open();if($!==null){$.document.write(U);var le=this;$.document.documentElement.querySelector("#pdfViewer").onload=function(){$.document.title=re.filename,$.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(le.output("bloburl"))}}return $}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ir)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ie='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',Ue=ir.open();if(Ue!==null&&(Ue.document.write(Ie),Ue.document.title=re.filename),Ue||typeof safari>"u")return Ue;break;case"datauri":case"dataurl":return ir.document.location.href=this.output("datauristring",re);default:return null}}),Ac=function(P){return Array.isArray(mr)===!0&&mr.indexOf(P)>-1};switch(n){case"pt":Qe=1;break;case"mm":Qe=72/25.4;break;case"cm":Qe=72/2.54;break;case"in":Qe=72;break;case"px":Qe=Ac("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qe=12;break;case"ex":Qe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Qe=n}var $n=null;ee(),H();var Zp=function(P){return u!==null?$n.encryptor(P,0):function(re){return re}},df=A.__private__.getPageInfo=A.getPageInfo=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Je[P].objId,pageNumber:P,pageContext:Je[P]}},or=A.__private__.getPageInfoByObjId=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in Je)if(Je[re].objId===P)break;return df(re)},fc=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Je[G].objId,pageNumber:G,pageContext:Je[G]}};A.addPage=function(){return yu.apply(this,arguments),this},A.setPage=function(){return hf.apply(this,arguments),pe.call(this,me[G]),this},A.insertPage=function(P){return this.addPage(),this.movePage(G,P),this},A.movePage=function(P,re){var xe,Se;if(P>re){xe=me[P],Se=Je[P];for(var ke=P;ke>re;ke--)me[ke]=me[ke-1],Je[ke]=Je[ke-1];me[re]=xe,Je[re]=Se,this.setPage(re)}else if(P<re){xe=me[P],Se=Je[P];for(var Ke=P;Ke<re;Ke++)me[Ke]=me[Ke+1],Je[Ke]=Je[Ke+1];me[re]=xe,Je[re]=Se,this.setPage(re)}return this},A.deletePage=function(){return Gh.apply(this,arguments),this},A.__private__.text=A.text=function(P,re,xe,Se,ke){var Ke,rt,I,U,$,le,Ie,Ue,st,lr=(Se=Se||{}).scope||this;if(typeof P=="number"&&typeof re=="number"&&(typeof xe=="string"||Array.isArray(xe))){var Gr=xe;xe=re,re=P,P=Gr}if(arguments[3]instanceof mt?(w("The transform parameter of text() with a Matrix value"),st=ke):(I=arguments[4],U=arguments[5],wn(Ie=arguments[3])==="object"&&Ie!==null||(typeof I=="string"&&(U=I,I=null),typeof Ie=="string"&&(U=Ie,Ie=null),typeof Ie=="number"&&(I=Ie,Ie=null),Se={flags:Ie,angle:I,align:U})),isNaN(re)||isNaN(xe)||P==null)throw new Error("Invalid arguments passed to jsPDF.text");if(P.length===0)return lr;var er="",Nn=!1,on=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:An,pi=lr.internal.scaleFactor;function Ei(Un){return Un=Un.split("	").join(Array(Se.TabLen||9).join(" ")),sa(Un,Ie)}function vc(Un){for(var Hn,ma=Un.concat(),Ga=[],Eu=ma.length;Eu--;)typeof(Hn=ma.shift())=="string"?Ga.push(Hn):Array.isArray(Un)&&(Hn.length===1||Hn[1]===void 0&&Hn[2]===void 0)?Ga.push(Hn[0]):Ga.push([Hn[0],Hn[1],Hn[2]]);return Ga}function Bu(Un,Hn){var ma;if(typeof Un=="string")ma=Hn(Un)[0];else if(Array.isArray(Un)){for(var Ga,Eu,Ty=Un.concat(),dm=[],i2=Ty.length;i2--;)typeof(Ga=Ty.shift())=="string"?dm.push(Hn(Ga)[0]):Array.isArray(Ga)&&typeof Ga[0]=="string"&&(Eu=Hn(Ga[0],Ga[1],Ga[2]),dm.push([Eu[0],Eu[1],Eu[2]]));ma=dm}return ma}var nm=!1,by=!0;if(typeof P=="string")nm=!0;else if(Array.isArray(P)){var wy=P.concat();rt=[];for(var am,mi=wy.length;mi--;)(typeof(am=wy.shift())!="string"||Array.isArray(am)&&typeof am[0]!="string")&&(by=!1);nm=by}if(nm===!1)throw new Error('Type of text must be string or Array. "'+P+'" is not recognized.');typeof P=="string"&&(P=P.match(/[\r?\n]/)?P.split(/\r\n|\r|\n/g):[P]);var im=be/lr.internal.scaleFactor,sm=im*(on-1);switch(Se.baseline){case"bottom":xe-=sm;break;case"top":xe+=im-sm;break;case"hanging":xe+=im-2*sm;break;case"middle":xe+=im/2-sm}if((le=Se.maxWidth||0)>0&&(typeof P=="string"?P=lr.splitTextToSize(P,le):Object.prototype.toString.call(P)==="[object Array]"&&(P=P.reduce(function(Un,Hn){return Un.concat(lr.splitTextToSize(Hn,le))},[]))),Ke={text:P,x:re,y:xe,options:Se,mutex:{pdfEscape:sa,activeFontKey:Le,fonts:kt,activeFontSize:be}},yt.publish("preProcessText",Ke),P=Ke.text,I=(Se=Ke.options).angle,!(st instanceof mt)&&I&&typeof I=="number"){I*=Math.PI/180,Se.rotationDirection===0&&(I=-I),x===y.ADVANCED&&(I=-I);var om=Math.cos(I),Sy=Math.sin(I);st=new mt(om,Sy,-Sy,om,0,0)}else I&&I instanceof mt&&(st=I);x!==y.ADVANCED||st||(st=Pr),($=Se.charSpace||Su)!==void 0&&(er+=C(E($))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ue=Se.horizontalScale)!==void 0&&(er+=C(100*Ue)+` Tz
`),Se.lang;var _s=-1,jT=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,_y=lr.internal.getCurrentPageInfo().pageContext;switch(jT){case 0:case!1:case"fill":_s=0;break;case 1:case!0:case"stroke":_s=1;break;case 2:case"fillThenStroke":_s=2;break;case 3:case"invisible":_s=3;break;case 4:case"fillAndAddForClipping":_s=4;break;case 5:case"strokeAndAddPathForClipping":_s=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":_s=6;break;case 7:case"addToPathForClipping":_s=7}var t2=_y.usedRenderingMode!==void 0?_y.usedRenderingMode:-1;_s!==-1?er+=_s+` Tr
`:t2!==-1&&(er+=`0 Tr
`),_s!==-1&&(_y.usedRenderingMode=_s),U=Se.align||"left";var Eo,lm=be*on,r2=lr.internal.pageSize.getWidth(),n2=kt[Le];$=Se.charSpace||Su,le=Se.maxWidth||0,Ie=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var id=[],xf=function(Un){return lr.getStringUnitWidth(Un,{font:n2,charSpace:$,fontSize:be,doKerning:!1})*be/pi};if(Object.prototype.toString.call(P)==="[object Array]"){var Cs;rt=vc(P),U!=="left"&&(Eo=rt.map(xf));var Xi,sd=0;if(U==="right"){re-=Eo[0],P=[],mi=rt.length;for(var Nu=0;Nu<mi;Nu++)Nu===0?(Xi=qs(re),Cs=za(xe)):(Xi=E(sd-Eo[Nu]),Cs=-lm),P.push([rt[Nu],Xi,Cs]),sd=Eo[Nu]}else if(U==="center"){re-=Eo[0]/2,P=[],mi=rt.length;for(var Tu=0;Tu<mi;Tu++)Tu===0?(Xi=qs(re),Cs=za(xe)):(Xi=E((sd-Eo[Tu])/2),Cs=-lm),P.push([rt[Tu],Xi,Cs]),sd=Eo[Tu]}else if(U==="left"){P=[],mi=rt.length;for(var cm=0;cm<mi;cm++)P.push(rt[cm])}else if(U==="justify"&&n2.encoding==="Identity-H"){P=[],mi=rt.length,le=le!==0?le:r2;for(var Iu=0,pa=0;pa<mi;pa++)if(Cs=pa===0?za(xe):-lm,Xi=pa===0?qs(re):Iu,pa<mi-1){var Cy=E((le-Eo[pa])/(rt[pa].split(" ").length-1)),Zi=rt[pa].split(" ");P.push([Zi[0]+" ",Xi,Cs]),Iu=0;for(var Do=1;Do<Zi.length;Do++){var um=(xf(Zi[Do-1]+" "+Zi[Do])-xf(Zi[Do]))*pi+Cy;Do==Zi.length-1?P.push([Zi[Do],um,0]):P.push([Zi[Do]+" ",um,0]),Iu-=um}}else P.push([rt[pa],Xi,Cs]);P.push(["",Iu,0])}else{if(U!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(P=[],mi=rt.length,le=le!==0?le:r2,pa=0;pa<mi;pa++)Cs=pa===0?za(xe):-lm,Xi=pa===0?qs(re):0,pa<mi-1?id.push(C(E((le-Eo[pa])/(rt[pa].split(" ").length-1)))):id.push(0),P.push([rt[pa],Xi,Cs])}}var a2=typeof Se.R2L=="boolean"?Se.R2L:Ee;a2===!0&&(P=Bu(P,function(Un,Hn,ma){return[Un.split("").reverse().join(""),Hn,ma]})),Ke={text:P,x:re,y:xe,options:Se,mutex:{pdfEscape:sa,activeFontKey:Le,fonts:kt,activeFontSize:be}},yt.publish("postProcessText",Ke),P=Ke.text,Nn=Ke.mutex.isHex||!1;var By=kt[Le].encoding;By!=="WinAnsiEncoding"&&By!=="StandardEncoding"||(P=Bu(P,function(Un,Hn,ma){return[Ei(Un),Hn,ma]})),rt=vc(P),P=[];for(var bf,wf,od,Sf=0,hm=1,_f=Array.isArray(rt[0])?hm:Sf,ld="",Ny=function(Un,Hn,ma){var Ga="";return ma instanceof mt?(ma=typeof Se.angle=="number"?Cn(ma,new mt(1,0,0,1,Un,Hn)):Cn(new mt(1,0,0,1,Un,Hn),ma),x===y.ADVANCED&&(ma=Cn(new mt(1,0,0,-1,0,0),ma)),Ga=ma.join(" ")+` Tm
`):Ga=C(Un)+" "+C(Hn)+` Td
`,Ga},Mo=0;Mo<rt.length;Mo++){switch(ld="",_f){case hm:od=(Nn?"<":"(")+rt[Mo][0]+(Nn?">":")"),bf=parseFloat(rt[Mo][1]),wf=parseFloat(rt[Mo][2]);break;case Sf:od=(Nn?"<":"(")+rt[Mo]+(Nn?">":")"),bf=qs(re),wf=za(xe)}id!==void 0&&id[Mo]!==void 0&&(ld=id[Mo]+` Tw
`),Mo===0?P.push(ld+Ny(bf,wf,st)+od):_f===Sf?P.push(ld+od):_f===hm&&P.push(ld+Ny(bf,wf,st)+od)}P=_f===Sf?P.join(` Tj
T* `):P.join(` Tj
`),P+=` Tj
`;var Ro=`BT
/`;return Ro+=Le+" "+be+` Tf
`,Ro+=C(be*on)+` TL
`,Ro+=Bl+`
`,Ro+=er,Ro+=P,J(Ro+="ET"),d[Le]=!0,lr};var xy=A.__private__.clip=A.clip=function(P){return J(P==="evenodd"?"W*":"W"),this};A.clipEvenOdd=function(){return xy("evenodd")},A.__private__.discardPath=A.discardPath=function(){return J("n"),this};var Io=A.__private__.isValidStyle=function(P){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(P)!==-1&&(re=!0),re};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(P){return Io(P)&&(c=P),this};var Jp=A.__private__.getStyle=A.getStyle=function(P){var re=c;switch(P){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=P}return re},Ks=A.close=function(){return J("h"),this};A.stroke=function(){return J("S"),this},A.fill=function(P){return Kh("f",P),this},A.fillEvenOdd=function(P){return Kh("f*",P),this},A.fillStroke=function(P){return Kh("B",P),this},A.fillStrokeEvenOdd=function(P){return Kh("B*",P),this};var Kh=function(P,re){wn(re)==="object"?qh(re,P):J(P)},Af=function(P){P===null||x===y.ADVANCED&&P===void 0||(P=Jp(P),J(P))};function Wh(P,re,xe,Se,ke){var Ke=new Bv(re||this.boundingBox,xe||this.xStep,Se||this.yStep,this.gState,ke||this.matrix);Ke.stream=this.stream;var rt=P+"$$"+this.cloneIndex+++"$$";return ar(rt,Ke),Ke}var qh=function(P,re){var xe=qe[P.key],Se=zt[xe];if(Se instanceof vg)J("q"),J(em(re)),Se.gState&&A.setGState(Se.gState),J(P.matrix.toString()+" cm"),J("/"+xe+" sh"),J("Q");else if(Se instanceof Bv){var ke=new mt(1,0,0,-1,0,Ii());P.matrix&&(ke=ke.multiply(P.matrix||Pr),xe=Wh.call(Se,P.key,P.boundingBox,P.xStep,P.yStep,ke).id),J("q"),J("/Pattern cs"),J("/"+xe+" scn"),Se.gState&&A.setGState(Se.gState),J(re),J("Q")}},em=function(P){switch(P){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},_l=A.moveTo=function(P,re){return J(C(E(P))+" "+C(M(re))+" m"),this},Ws=A.lineTo=function(P,re){return J(C(E(P))+" "+C(M(re))+" l"),this},Cl=A.curveTo=function(P,re,xe,Se,ke,Ke){return J([C(E(P)),C(M(re)),C(E(xe)),C(M(Se)),C(E(ke)),C(M(Ke)),"c"].join(" ")),this};A.__private__.line=A.line=function(P,re,xe,Se,ke){if(isNaN(P)||isNaN(re)||isNaN(xe)||isNaN(Se)||!Io(ke))throw new Error("Invalid arguments passed to jsPDF.line");return x===y.COMPAT?this.lines([[xe-P,Se-re]],P,re,[1,1],ke||"S"):this.lines([[xe-P,Se-re]],P,re,[1,1]).stroke()},A.__private__.lines=A.lines=function(P,re,xe,Se,ke,Ke){var rt,I,U,$,le,Ie,Ue,st,lr,Gr,er,Nn;if(typeof P=="number"&&(Nn=xe,xe=re,re=P,P=Nn),Se=Se||[1,1],Ke=Ke||!1,isNaN(re)||isNaN(xe)||!Array.isArray(P)||!Array.isArray(Se)||!Io(ke)||typeof Ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_l(re,xe),rt=Se[0],I=Se[1],$=P.length,Gr=re,er=xe,U=0;U<$;U++)(le=P[U]).length===2?(Gr=le[0]*rt+Gr,er=le[1]*I+er,Ws(Gr,er)):(Ie=le[0]*rt+Gr,Ue=le[1]*I+er,st=le[2]*rt+Gr,lr=le[3]*I+er,Gr=le[4]*rt+Gr,er=le[5]*I+er,Cl(Ie,Ue,st,lr,Gr,er));return Ke&&Ks(),Af(ke),this},A.path=function(P){for(var re=0;re<P.length;re++){var xe=P[re],Se=xe.c;switch(xe.op){case"m":_l(Se[0],Se[1]);break;case"l":Ws(Se[0],Se[1]);break;case"c":Cl.apply(this,Se);break;case"h":Ks()}}return this},A.__private__.rect=A.rect=function(P,re,xe,Se,ke){if(isNaN(P)||isNaN(re)||isNaN(xe)||isNaN(Se)||!Io(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return x===y.COMPAT&&(Se=-Se),J([C(E(P)),C(M(re)),C(E(xe)),C(E(Se)),"re"].join(" ")),Af(ke),this},A.__private__.triangle=A.triangle=function(P,re,xe,Se,ke,Ke,rt){if(isNaN(P)||isNaN(re)||isNaN(xe)||isNaN(Se)||isNaN(ke)||isNaN(Ke)||!Io(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[xe-P,Se-re],[ke-xe,Ke-Se],[P-ke,re-Ke]],P,re,[1,1],rt,!0),this},A.__private__.roundedRect=A.roundedRect=function(P,re,xe,Se,ke,Ke,rt){if(isNaN(P)||isNaN(re)||isNaN(xe)||isNaN(Se)||isNaN(ke)||isNaN(Ke)||!Io(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var I=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*xe),Ke=Math.min(Ke,.5*Se),this.lines([[xe-2*ke,0],[ke*I,0,ke,Ke-Ke*I,ke,Ke],[0,Se-2*Ke],[0,Ke*I,-ke*I,Ke,-ke,Ke],[2*ke-xe,0],[-ke*I,0,-ke,-Ke*I,-ke,-Ke],[0,2*Ke-Se],[0,-Ke*I,ke*I,-Ke,ke,-Ke]],P+ke,re,[1,1],rt,!0),this},A.__private__.ellipse=A.ellipse=function(P,re,xe,Se,ke){if(isNaN(P)||isNaN(re)||isNaN(xe)||isNaN(Se)||!Io(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ke=4/3*(Math.SQRT2-1)*xe,rt=4/3*(Math.SQRT2-1)*Se;return _l(P+xe,re),Cl(P+xe,re-rt,P+Ke,re-Se,P,re-Se),Cl(P-Ke,re-Se,P-xe,re-rt,P-xe,re),Cl(P-xe,re+rt,P-Ke,re+Se,P,re+Se),Cl(P+Ke,re+Se,P+xe,re+rt,P+xe,re),Af(ke),this},A.__private__.circle=A.circle=function(P,re,xe,Se){if(isNaN(P)||isNaN(re)||isNaN(xe)||!Io(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(P,re,xe,xe,Se)},A.setFont=function(P,re,xe){return xe&&(re=_(re,xe)),Le=xu(P,re,{disableWarning:!1}),this};var ff=A.__private__.getFont=A.getFont=function(){return kt[xu.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var P,re,xe={};for(P in Bt)if(Bt.hasOwnProperty(P))for(re in xe[P]=[],Bt[P])Bt[P].hasOwnProperty(re)&&xe[P].push(re);return xe},A.addFont=function(P,re,xe,Se,ke){var Ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ke.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Ke.indexOf(arguments[3])==-1&&(xe=_(xe,Se)),ke=ke||"Identity-H",uf.call(this,P,re,xe,ke)};var An,gf=r.lineWidth||.200025,Yh=A.__private__.getLineWidth=A.getLineWidth=function(){return gf},pf=A.__private__.setLineWidth=A.setLineWidth=function(P){return gf=P,J(C(E(P))+" w"),this};A.__private__.setLineDash=nr.API.setLineDash=nr.API.setLineDashPattern=function(P,re){if(P=P||[],re=re||0,isNaN(re)||!Array.isArray(P))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return P=P.map(function(xe){return C(E(xe))}).join(" "),re=C(E(re)),J("["+P+"] "+re+" d"),this};var mf=A.__private__.getLineHeight=A.getLineHeight=function(){return be*An};A.__private__.getLineHeight=A.getLineHeight=function(){return be*An};var vf=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(P){return typeof(P=P||1.15)=="number"&&(An=P),this},wu=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return An};vf(r.lineHeight);var qs=A.__private__.getHorizontalCoordinate=function(P){return E(P)},za=A.__private__.getVerticalCoordinate=function(P){return x===y.ADVANCED?P:Je[G].mediaBox.topRightY-Je[G].mediaBox.bottomLeftY-E(P)},tm=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(P){return C(qs(P))},gc=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(P){return C(za(P))},gi=r.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return ia(gi)},A.__private__.setStrokeColor=A.setDrawColor=function(P,re,xe,Se){return gi=Yn({ch1:P,ch2:re,ch3:xe,ch4:Se,pdfColorType:"draw",precision:2}),J(gi),this};var Xh=r.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return ia(Xh)},A.__private__.setFillColor=A.setFillColor=function(P,re,xe,Se){return Xh=Yn({ch1:P,ch2:re,ch3:xe,ch4:Se,pdfColorType:"fill",precision:2}),J(Xh),this};var Bl=r.textColor||"0 g",Zh=A.__private__.getTextColor=A.getTextColor=function(){return ia(Bl)};A.__private__.setTextColor=A.setTextColor=function(P,re,xe,Se){return Bl=Yn({ch1:P,ch2:re,ch3:xe,ch4:Se,pdfColorType:"text",precision:3}),this};var Su=r.charSpace,Jh=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(Su||0)};A.__private__.setCharSpace=A.setCharSpace=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Su=P,this};var yf=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(P){var re=A.CapJoinStyles[P];if(re===void 0)throw new Error("Line cap style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yf=re,J(re+" J"),this};var ed=0;A.__private__.setLineJoin=A.setLineJoin=function(P){var re=A.CapJoinStyles[P];if(re===void 0)throw new Error("Line join style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ed=re,J(re+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(P){if(P=P||0,isNaN(P))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(C(E(P))+" M"),this},A.GState=sB,A.setGState=function(P){(P=typeof P=="string"?pt[Nt[P]]:pc(null,P)).equals(Kt)||(J("/"+P.id+" gs"),Kt=P)};var pc=function(P,re){if(!P||!Nt[P]){var xe=!1;for(var Se in pt)if(pt.hasOwnProperty(Se)&&pt[Se].equals(re)){xe=!0;break}if(xe)re=pt[Se];else{var ke="GS"+(Object.keys(pt).length+1).toString(10);pt[ke]=re,re.id=ke}return P&&(Nt[P]=re.id),yt.publish("addGState",re),re}};A.addGState=function(P,re){return pc(P,re),this},A.saveGraphicsState=function(){return J("q"),Sr.push({key:Le,size:be,color:Bl}),this},A.restoreGraphicsState=function(){J("Q");var P=Sr.pop();return Le=P.key,be=P.size,Bl=P.color,Kt=null,this},A.setCurrentTransformationMatrix=function(P){return J(P.toString()+" cm"),this},A.comment=function(P){return J("#"+P),this};var _u=function(P,re){var xe=P||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return xe},set:function(Ke){isNaN(Ke)||(xe=parseFloat(Ke))}});var Se=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(Ke){isNaN(Ke)||(Se=parseFloat(Ke))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Ke){ke=Ke.toString()}}),this},td=function(P,re,xe,Se){_u.call(this,P,re),this.type="rect";var ke=xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(rt){isNaN(rt)||(ke=parseFloat(rt))}});var Ke=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ke},set:function(rt){isNaN(rt)||(Ke=parseFloat(rt))}}),this},Cu=function(){this.page=Yt,this.currentPage=G,this.pages=me.slice(0),this.pagesContext=Je.slice(0),this.x=ht,this.y=it,this.matrix=Vt,this.width=mc(G),this.height=Ii(G),this.outputDestination=Me,this.id="",this.objectNumber=-1};Cu.prototype.restore=function(){Yt=this.page,G=this.currentPage,Je=this.pagesContext,me=this.pages,ht=this.x,it=this.y,Vt=this.matrix,nd(G,this.width),ad(G,this.height),Me=this.outputDestination};var rd=function(P,re,xe,Se,ke){_r.push(new Cu),Yt=G=0,me=[],ht=P,it=re,Vt=ke,Yi([xe,Se])},rm=function(P){if(an[P])_r.pop().restore();else{var re=new Cu,xe="Xo"+(Object.keys(dr).length+1).toString(10);re.id=xe,an[P]=xe,dr[xe]=re,yt.publish("addFormObject",re),_r.pop().restore()}};for(var Nl in A.beginFormObject=function(P,re,xe,Se,ke){return rd(P,re,xe,Se,ke),this},A.endFormObject=function(P){return rm(P),this},A.doFormObject=function(P,re){var xe=dr[an[P]];return J("q"),J(re.toString()+" cm"),J("/"+xe.id+" Do"),J("Q"),this},A.getFormObject=function(P){var re=dr[an[P]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},A.save=function(P,re){return P=P||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(hg(Vh(Sl()),P),typeof hg.unload=="function"&&ir.setTimeout&&setTimeout(hg.unload,911),this):new Promise(function(xe,Se){try{var ke=hg(Vh(Sl()),P);typeof hg.unload=="function"&&ir.setTimeout&&setTimeout(hg.unload,911),xe(ke)}catch(Ke){Se(Ke.message)}})},nr.API)nr.API.hasOwnProperty(Nl)&&(Nl==="events"&&nr.API.events.length?function(P,re){var xe,Se,ke;for(ke=re.length-1;ke!==-1;ke--)xe=re[ke][0],Se=re[ke][1],P.subscribe.apply(P,[xe].concat(typeof Se=="function"?[Se]:Se))}(yt,nr.API.events):A[Nl]=nr.API[Nl]);var mc=A.getPageWidth=function(P){return(Je[P=P||G].mediaBox.topRightX-Je[P].mediaBox.bottomLeftX)/Qe},nd=A.setPageWidth=function(P,re){Je[P].mediaBox.topRightX=re*Qe+Je[P].mediaBox.bottomLeftX},Ii=A.getPageHeight=function(P){return(Je[P=P||G].mediaBox.topRightY-Je[P].mediaBox.bottomLeftY)/Qe},ad=A.setPageHeight=function(P,re){Je[P].mediaBox.topRightY=re*Qe+Je[P].mediaBox.bottomLeftY};return A.internal={pdfEscape:sa,getStyle:Jp,getFont:ff,getFontSize:ye,getCharSpace:Jh,getTextColor:Zh,getLineHeight:mf,getLineHeightFactor:wu,getLineWidth:Yh,write:oe,getHorizontalCoordinate:qs,getVerticalCoordinate:za,getCoordinateString:tm,getVerticalCoordinateString:gc,collections:{},newObject:Dr,newAdditionalObject:ri,newObjectDeferred:Nr,newObjectDeferredBegin:sn,getFilters:fa,putStream:Ln,events:yt,scaleFactor:Qe,pageSize:{getWidth:function(){return mc(G)},setWidth:function(P){nd(G,P)},getHeight:function(){return Ii(G)},setHeight:function(P){ad(G,P)}},encryptionOptions:u,encryption:$n,getEncryptor:Zp,output:$h,getNumberOfPages:dn,pages:me,out:J,f2:D,f3:T,getPageInfo:df,getPageInfoByObjId:or,getCurrentPageInfo:fc,getPDFVersion:p,Point:_u,Rectangle:td,Matrix:mt,hasHotfix:Ac},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return mc(G)},set:function(P){nd(G,P)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return Ii(G)},set:function(P){ad(G,P)},enumerable:!0,configurable:!0}),Yp.call(A,ue),Le="F1",yu(a,t),yt.publish("initialized"),A}sv.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},sv.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},sv.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},sv.prototype.processOwnerPassword=function(r,e){return SL(wL(e).substr(0,5),r)},sv.prototype.encryptor=function(r,e){var t=wL(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return SL(t,n)}},sB.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||wn(r)!==wn(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},nr.API={events:[]},nr.version="3.0.1";var la=nr.API,Wj=1,Vp=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qm=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vr=function(r){return r.toFixed(2)},Td=function(r){return r.toFixed(5)};la.__acroform__={};var $s=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},CV=function(r){return r*Wj},Dc=function(r){var e=new Ese,t=Ut.internal.getHeight(r)||0,n=Ut.internal.getWidth(r)||0;return e.BBox=[0,0,Number(vr(n)),Number(vr(t))],e},ske=la.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},oke=la.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},lke=la.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},Sa=la.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return lke(r,e-1)},_a=la.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ske(r,e-1)},Ca=la.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return oke(r,e-1)},cke=la.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=r[0],i=r[1],s=r[2],o=r[3],l={};return l.lowerLeft_X=t(a)||0,l.lowerLeft_Y=n(i+o)||0,l.upperRight_X=t(a+s)||0,l.upperRight_Y=n(i)||0,[Number(vr(l.lowerLeft_X)),Number(vr(l.lowerLeft_Y)),Number(vr(l.upperRight_X)),Number(vr(l.upperRight_Y))]},uke=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=_L(r,t),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+vr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=Dc(r);return i.scope=r.scope,i.stream=e.join(`
`),i}},_L=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=r.multiline?a.map(function(T){return T.split(`
`)}):a.map(function(T){return[T]});var i=t,s=Ut.internal.getHeight(r)||0;s=s<0?-s:s;var o=Ut.internal.getWidth(r)||0;o=o<0?-o:o;var l=function(T,E,R){if(T+1<a.length){var M=E+" "+a[T+1][0];return ZS(M,r,R).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,h=ZS("3",r,i).height,d=r.multiline?s-i:(s-h)/2,A=d+=2,g=0,p=0,v=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+ZS(e,r,i=12).width+", FieldWidth:"+o+`
`;break}for(var m="",y=0,x=0;x<a.length;x++)if(a.hasOwnProperty(x)){var b=!1;if(a[x].length!==1&&v!==a[x].length-1){if((h+2)*(y+2)+2>s)continue e;m+=a[x][v],b=!0,p=x,x--}else{m=(m+=a[x][v]+" ").substr(m.length-1)==" "?m.substr(0,m.length-1):m;var S=parseInt(x),_=l(S,m,i),C=x>=a.length-1;if(_&&!C){m+=" ",v=0;continue}if(_||C){if(C)p=S;else if(r.multiline&&(h+2)*(y+2)+2>s)continue e}else{if(!r.multiline||(h+2)*(y+2)+2>s)continue e;p=S}}for(var w="",B=g;B<=p;B++){var D=a[B];if(r.multiline){if(B===p){w+=D[v]+" ",v=(v+1)%D.length;continue}if(B===g){w+=D[D.length-1]+" ";continue}}w+=D[0]+" "}switch(w=w.substr(w.length-1)==" "?w.substr(0,w.length-1):w,u=ZS(w,r,i).width,r.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}e+=vr(c)+" "+vr(A)+` Td
`,e+="("+Vp(w)+`) Tj
`,e+=-vr(c)+` 0 Td
`,A=-(i+2),u=0,g=b?p:p+1,y++,m=""}break}return n.text=e,n.fontSize=i,n},ZS=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},hke={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dke=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},Ake=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var n=t,a=r[t];e.internal.newObjectDeferredBegin(a.objId,!0),wn(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete r[n]}},fke=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(cc.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(hke)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Wj=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new Dse,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&dke(i,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,a){var i=!n;for(var s in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var o=n[s],l=[],c=o.Rect;if(o.Rect&&(o.Rect=cke(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ut.createDefaultAppearanceStream(o),wn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=uke(o);l.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var h="";for(var d in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(d)){var A=o.appearanceStreamContent[d];if(h+="/"+d+" ",h+="<<",Object.keys(A).length>=1||Array.isArray(A)){for(var s in A)if(A.hasOwnProperty(s)){var g=A[s];typeof g=="function"&&(g=g.call(a,o)),h+="/"+s+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=A)=="function"&&(g=g.call(a,o)),h+="/"+s+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}i&&Ake(a.internal.acroformPlugin.xForms,a)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},Ise=la.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(s){return s};if(Array.isArray(r)){for(var a="[",i=0;i<r.length;i++)switch(i!==0&&(a+=" "),wn(r[i])){case"boolean":case"number":case"object":a+=r[i].toString();break;case"string":r[i].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),a+="("+Vp(n(r[i].toString()))+")"):a+=r[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},mD=function(r,e,t){var n=function(a){return a};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+Vp(n(r))+")"},$c=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$c.prototype.toString=function(){return this.objId+" 0 R"},$c.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},$c.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],a=this[n];a&&(Array.isArray(a)?r.push({key:n,value:Ise(a,this.objId,this.scope)}):a instanceof $c?(a.scope=this.scope,r.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:n,value:a}))}return r};var Ese=function(){$c.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};$s(Ese,$c);var Dse=function(){$c.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Vp(t(r))+")"}},set:function(t){r=t}})};$s(Dse,$c);var cc=function r(){$c.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute F supplied.');e=m}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Sa(e,3)},set:function(m){m?this.F=_a(e,3):this.F=Ca(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute Ff supplied.');t=m}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(m){n=m!==void 0?m:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(m){n[0]=m}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(m){n[1]=m}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(m){n[2]=m}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(m){n[3]=m}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(m){switch(m){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=m;break;default:throw new Error('Invalid value "'+m+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof oB)return;i="FieldObject"+r.FieldNum++}var m=function(y){return y};return this.scope&&(m=this.scope.internal.getEncryptor(this.objId)),"("+Vp(m(i))+")"},set:function(m){i=m.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(m){i=m}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(m){s=m}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(m){o=m}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(m){l=m}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/Wj:c},set:function(m){c=m}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(m){u=m}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof oB||this instanceof ip))return mD(h,this.objId,this.scope)},set:function(m){m=m.toString(),h=m}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof ci?d:mD(d,this.objId,this.scope)},set:function(m){m=m.toString(),d=this instanceof ci?m:m.substr(0,1)==="("?Qm(m.substr(1,m.length-2)):Qm(m)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ci?Qm(d.substr(1,d.length-1)):d},set:function(m){m=m.toString(),d=this instanceof ci?"/"+m:m}});var A=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(A)return A},set:function(m){this.V=m}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof ci?A:mD(A,this.objId,this.scope)},set:function(m){m=m.toString(),A=this instanceof ci?m:m.substr(0,1)==="("?Qm(m.substr(1,m.length-2)):Qm(m)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ci?Qm(A.substr(1,A.length-1)):A},set:function(m){m=m.toString(),A=this instanceof ci?"/"+m:m}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(m){m=!!m,p=m}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(m){g=m}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,1)},set:function(m){m?this.Ff=_a(this.Ff,1):this.Ff=Ca(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,2)},set:function(m){m?this.Ff=_a(this.Ff,2):this.Ff=Ca(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,3)},set:function(m){m?this.Ff=_a(this.Ff,3):this.Ff=Ca(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(m){if([0,1,2].indexOf(m)===-1)throw new Error('Invalid value "'+m+'" for attribute Q supplied.');v=m}}),Object.defineProperty(this,"textAlign",{get:function(){var m;switch(v){case 0:default:m="left";break;case 1:m="center";break;case 2:m="right"}return m},configurable:!0,enumerable:!0,set:function(m){switch(m){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};$s(cc,$c);var $v=function(){cc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Ise(e,this.objId,this.scope)},set:function(t){var n,a;a=[],typeof(n=t)=="string"&&(a=function(i,s,o){o||(o=1);for(var l,c=[];l=s.exec(i);)c.push(l[o]);return c}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,18)},set:function(t){t?this.Ff=_a(this.Ff,18):this.Ff=Ca(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=_a(this.Ff,19):this.Ff=Ca(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,20)},set:function(t){t?(this.Ff=_a(this.Ff,20),e.sort()):this.Ff=Ca(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,22)},set:function(t){t?this.Ff=_a(this.Ff,22):this.Ff=Ca(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,23)},set:function(t){t?this.Ff=_a(this.Ff,23):this.Ff=Ca(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,27)},set:function(t){t?this.Ff=_a(this.Ff,27):this.Ff=Ca(this.Ff,27)}}),this.hasAppearanceStream=!1};$s($v,cc);var Kv=function(){$v.call(this),this.fontName="helvetica",this.combo=!1};$s(Kv,$v);var Wv=function(){Kv.call(this),this.combo=!0};$s(Wv,Kv);var f5=function(){Wv.call(this),this.edit=!0};$s(f5,Wv);var ci=function(){cc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,15)},set:function(t){t?this.Ff=_a(this.Ff,15):this.Ff=Ca(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,16)},set:function(t){t?this.Ff=_a(this.Ff,16):this.Ff=Ca(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,17)},set:function(t){t?this.Ff=_a(this.Ff,17):this.Ff=Ca(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,26)},set:function(t){t?this.Ff=_a(this.Ff,26):this.Ff=Ca(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Vp(t(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){wn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};$s(ci,cc);var g5=function(){ci.call(this),this.pushButton=!0};$s(g5,ci);var qv=function(){ci.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};$s(qv,ci);var oB=function(){var r,e;cc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,s=[];for(i in s.push("<<"),n)s.push("/"+i+" ("+Vp(a(n[i]))+")");return s.push(">>"),s.join(`
`)},set:function(a){wn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ut.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$s(oB,cc),qv.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},qv.prototype.createOption=function(r){var e=new oB;return e.Parent=this,e.optionName=r,this.Kids.push(e),gke.call(this.scope,e),e};var p5=function(){ci.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ut.CheckBox.createAppearanceStream()};$s(p5,ci);var ip=function(){cc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,13)},set:function(e){e?this.Ff=_a(this.Ff,13):this.Ff=Ca(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,21)},set:function(e){e?this.Ff=_a(this.Ff,21):this.Ff=Ca(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,23)},set:function(e){e?this.Ff=_a(this.Ff,23):this.Ff=Ca(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,24)},set:function(e){e?this.Ff=_a(this.Ff,24):this.Ff=Ca(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,25)},set:function(e){e?this.Ff=_a(this.Ff,25):this.Ff=Ca(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,26)},set:function(e){e?this.Ff=_a(this.Ff,26):this.Ff=Ca(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$s(ip,cc);var m5=function(){ip.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Sa(this.Ff,14)},set:function(r){r?this.Ff=_a(this.Ff,14):this.Ff=Ca(this.Ff,14)}}),this.password=!0};$s(m5,ip);var Ut={CheckBox:{createAppearanceStream:function(){return{N:{On:Ut.CheckBox.YesNormal},D:{On:Ut.CheckBox.YesPushDown,Off:Ut.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Dc(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),i=_L(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+vr(Ut.internal.getWidth(r))+" "+vr(Ut.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+vr(i.fontSize)+" Tf "+a),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=Dc(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),a=[],i=Ut.internal.getHeight(r),s=Ut.internal.getWidth(r),o=_L(r,r.caption);return a.push("1 g"),a.push("0 0 "+vr(s)+" "+vr(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+vr(s-1)+" "+vr(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+vr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(r){var e=Dc(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vr(Ut.internal.getWidth(r))+" "+vr(Ut.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:Ut.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=Ut.RadioButton.Circle.YesNormal,e.D[r]=Ut.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Dc(r);e.scope=r.scope;var t=[],n=Ut.internal.getWidth(r)<=Ut.internal.getHeight(r)?Ut.internal.getWidth(r)/4:Ut.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Ut.internal.Bezier_C,i=Number((n*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Td(Ut.internal.getWidth(r)/2)+" "+Td(Ut.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),t.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),t.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),t.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Dc(r);e.scope=r.scope;var t=[],n=Ut.internal.getWidth(r)<=Ut.internal.getHeight(r)?Ut.internal.getWidth(r)/4:Ut.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ut.internal.Bezier_C).toFixed(5)),s=Number((n*Ut.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Td(Ut.internal.getWidth(r)/2)+" "+Td(Ut.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),t.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),t.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),t.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Td(Ut.internal.getWidth(r)/2)+" "+Td(Ut.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=Dc(r);e.scope=r.scope;var t=[],n=Ut.internal.getWidth(r)<=Ut.internal.getHeight(r)?Ut.internal.getWidth(r)/4:Ut.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ut.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Td(Ut.internal.getWidth(r)/2)+" "+Td(Ut.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),t.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),t.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),t.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:Ut.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=Ut.RadioButton.Cross.YesNormal,e.D[r]=Ut.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Dc(r);e.scope=r.scope;var t=[],n=Ut.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+vr(Ut.internal.getWidth(r)-2)+" "+vr(Ut.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(vr(n.x1.x)+" "+vr(n.x1.y)+" m"),t.push(vr(n.x2.x)+" "+vr(n.x2.y)+" l"),t.push(vr(n.x4.x)+" "+vr(n.x4.y)+" m"),t.push(vr(n.x3.x)+" "+vr(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=Dc(r);e.scope=r.scope;var t=Ut.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+vr(Ut.internal.getWidth(r))+" "+vr(Ut.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vr(Ut.internal.getWidth(r)-2)+" "+vr(Ut.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(vr(t.x1.x)+" "+vr(t.x1.y)+" m"),n.push(vr(t.x2.x)+" "+vr(t.x2.y)+" l"),n.push(vr(t.x4.x)+" "+vr(t.x4.y)+" m"),n.push(vr(t.x3.x)+" "+vr(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=Dc(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vr(Ut.internal.getWidth(r))+" "+vr(Ut.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};Ut.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=Ut.internal.getWidth(r),t=Ut.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},Ut.internal.getWidth=function(r){var e=0;return wn(r)==="object"&&(e=CV(r.Rect[2])),e},Ut.internal.getHeight=function(r){var e=0;return wn(r)==="object"&&(e=CV(r.Rect[3])),e};var gke=la.addField=function(r){if(fke(this,r),!(r instanceof cc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};la.AcroFormChoiceField=$v,la.AcroFormListBox=Kv,la.AcroFormComboBox=Wv,la.AcroFormEditBox=f5,la.AcroFormButton=ci,la.AcroFormPushButton=g5,la.AcroFormRadioButton=qv,la.AcroFormCheckBox=p5,la.AcroFormTextField=ip,la.AcroFormPasswordField=m5,la.AcroFormAppearance=Ut,la.AcroForm={ChoiceField:$v,ListBox:Kv,ComboBox:Wv,EditBox:f5,Button:ci,PushButton:g5,RadioButton:qv,CheckBox:p5,TextField:ip,PasswordField:m5,Appearance:Ut},nr.AcroForm={ChoiceField:$v,ListBox:Kv,ComboBox:Wv,EditBox:f5,Button:ci,PushButton:g5,RadioButton:qv,CheckBox:p5,TextField:ip,PasswordField:m5,Appearance:Ut};nr.AcroForm;function Mse(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(T,E){var R,M,k,O,Q,H=e;if((E=E||e)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(_(T))for(Q in t)for(k=t[Q],R=0;R<k.length;R+=1){for(O=!0,M=0;M<k[R].length;M+=1)if(k[R][M]!==void 0&&k[R][M]!==T[M]){O=!1;break}if(O===!0){H=Q;break}}else for(Q in t)for(k=t[Q],R=0;R<k.length;R+=1){for(O=!0,M=0;M<k[R].length;M+=1)if(k[R][M]!==void 0&&k[R][M]!==T.charCodeAt(M)){O=!1;break}if(O===!0){H=Q;break}}return H===e&&E!==e&&(H=E),H},a=function T(E){for(var R=this.internal.write,M=this.internal.putStream,k=(0,this.internal.getFilters)();k.indexOf("FlateEncode")!==-1;)k.splice(k.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var O=[];if(O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Image"}),O.push({key:"Width",value:E.width}),O.push({key:"Height",value:E.height}),E.colorSpace===v.INDEXED?O.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(O.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===v.DEVICE_CMYK&&O.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),O.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&O.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var Q="",H=0,W=E.transparency.length;H<W;H++)Q+=E.transparency[H]+" "+E.transparency[H]+" ";O.push({key:"Mask",value:"["+Q+"]"})}E.sMask!==void 0&&O.push({key:"SMask",value:E.objectId+1+" 0 R"});var te=E.filter!==void 0?["/"+E.filter]:void 0;if(M({data:E.data,additionalKeyValues:O,alreadyAppliedFilters:te,objectId:E.objectId}),R("endobj"),"sMask"in E&&E.sMask!==void 0){var ee="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,j={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:ee,data:E.sMask};"filter"in E&&(j.filter=E.filter),T.call(this,j)}if(E.colorSpace===v.INDEXED){var G=this.internal.newObject();M({data:w(new Uint8Array(E.palette)),objectId:G}),R("endobj")}},i=function(){var T=this.internal.collections.addImage_images;for(var E in T)a.call(this,T[E])},s=function(){var T,E=this.internal.collections.addImage_images,R=this.internal.write;for(var M in E)R("/I"+(T=E[M]).index,T.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var T=this.internal.collections.addImage_images;return o.call(this),T},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(T){return typeof r["process"+T.toUpperCase()]=="function"},h=function(T){return wn(T)==="object"&&T.nodeType===1},d=function(T,E){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var R=""+T.getAttribute("src");if(R.indexOf("data:image/")===0)return U1(unescape(R).split("base64,").pop());var M=r.loadFile(R,!0);if(M!==void 0)return M}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var k;switch(E){case"PNG":k="image/png";break;case"WEBP":k="image/webp";break;case"JPEG":case"JPG":default:k="image/jpeg"}return U1(T.toDataURL(k,1).split("base64,").pop())}},A=function(T){var E=this.internal.collections.addImage_images;if(E){for(var R in E)if(T===E[R].alias)return E[R]}},g=function(T,E,R){return T||E||(T=-96,E=-96),T<0&&(T=-1*R.width*72/T/this.internal.scaleFactor),E<0&&(E=-1*R.height*72/E/this.internal.scaleFactor),T===0&&(T=E*R.width/R.height),E===0&&(E=T*R.height/R.width),[T,E]},p=function(T,E,R,M,k,O){var Q=g.call(this,R,M,k),H=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,te=l.call(this);if(R=Q[0],M=Q[1],te[k.index]=k,O){O*=Math.PI/180;var ee=Math.cos(O),j=Math.sin(O),G=function(Z){return Z.toFixed(4)},Y=[G(ee),G(j),G(-1*j),G(ee),0,0,"cm"]}this.internal.write("q"),O?(this.internal.write([1,"0","0",1,H(T),W(E+M),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([H(R),"0","0",H(M),"0","0","cm"].join(" "))):this.internal.write([H(R),"0","0",H(M),H(T),W(E+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+k.index+" Do"),this.internal.write("Q")},v=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=r.__addimage__.sHashCode=function(T){var E,R,M=0;if(typeof T=="string")for(R=T.length,E=0;E<R;E++)M=(M<<5)-M+T.charCodeAt(E),M|=0;else if(_(T))for(R=T.byteLength/2,E=0;E<R;E++)M=(M<<5)-M+T[E],M|=0;return M},x=r.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var E=!0;return T.length===0&&(E=!1),T.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(E=!1),E},b=r.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var E=T.indexOf(",");return E<0?null:T.substring(0,E).trim().endsWith("base64")?T.substring(E+1):null},S=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(T){return S()&&T instanceof ArrayBuffer};var _=r.__addimage__.isArrayBufferView=function(T){return S()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},C=r.__addimage__.binaryStringToUint8Array=function(T){for(var E=T.length,R=new Uint8Array(E),M=0;M<E;M++)R[M]=T.charCodeAt(M);return R},w=r.__addimage__.arrayBufferToBinaryString=function(T){for(var E="",R=_(T)?T:new Uint8Array(T),M=0;M<R.length;M+=8192)E+=String.fromCharCode.apply(null,R.subarray(M,M+8192));return E};r.addImage=function(){var T,E,R,M,k,O,Q,H,W;if(typeof arguments[1]=="number"?(E=e,R=arguments[1],M=arguments[2],k=arguments[3],O=arguments[4],Q=arguments[5],H=arguments[6],W=arguments[7]):(E=arguments[1],R=arguments[2],M=arguments[3],k=arguments[4],O=arguments[5],Q=arguments[6],H=arguments[7],W=arguments[8]),wn(T=arguments[0])==="object"&&!h(T)&&"imageData"in T){var te=T;T=te.imageData,E=te.format||E||e,R=te.x||R||0,M=te.y||M||0,k=te.w||te.width||k,O=te.h||te.height||O,Q=te.alias||Q,H=te.compression||H,W=te.rotation||te.angle||W}var ee=this.internal.getFilters();if(H===void 0&&ee.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(R)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var j=B.call(this,T,E,Q,H);return p.call(this,R,M,k,O,j,W),this};var B=function(T,E,R,M){var k,O,Q;if(typeof T=="string"&&n(T)===e){T=unescape(T);var H=D(T,!1);(H!==""||(H=r.loadFile(T,!0))!==void 0)&&(T=H)}if(h(T)&&(T=d(T,E)),E=n(T,E),!u(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((Q=R)==null||Q.length===0)&&(R=function(W){return typeof W=="string"||_(W)?y(W):_(W.data)?y(W.data):null}(T)),(k=A.call(this,R))||(S()&&(T instanceof Uint8Array||E==="RGBA"||(O=T,T=C(T))),k=this["process"+E.toUpperCase()](T,c.call(this),R,function(W){return W&&typeof W=="string"&&(W=W.toUpperCase()),W in r.image_compression?W:m.NONE}(M),O)),!k)throw new Error("An unknown error occurred whilst processing the image.");return k},D=r.__addimage__.convertBase64ToBinaryString=function(T,E){E=typeof E!="boolean"||E;var R,M="";if(typeof T=="string"){var k;R=(k=b(T))!==null&&k!==void 0?k:T;try{M=U1(R)}catch(O){if(E)throw x(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+O.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};r.getImageProperties=function(T){var E,R,M="";if(h(T)&&(T=d(T)),typeof T=="string"&&n(T)===e&&((M=D(T,!1))===""&&(M=r.loadFile(T)||""),T=M),R=n(T),!u(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!S()||T instanceof Uint8Array||(T=C(T)),!(E=this["process"+R.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=R,E}})(nr.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};nr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,a,i,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,u=!1,h=0;h<c.length&&!u;h++)switch((n=c[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var d=0;d<c.length;d++){n=c[d];var A=this.internal.pdfEscape,g=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(p.objId),y=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+A(m(n.contents))+")",i+=" /Popup "+v.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+A(m(y))+") >>",p.content=i;var x=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+x,n.open&&(i+=" /Open true"),i+=" >>",v.content=i,this.internal.write(p.objId,"0 R",v.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+A(g(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+A(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var _=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+_+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,a,i,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:c(n),w:l(t+a),h:c(n+i)},options:s,type:"link"})},r.textWithLink=function(t,n,a,i){var s,o,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(t,o).length;s=Math.ceil(c*u)}else o=l,s=c;return this.text(t,n,a,i),a+=.2*c,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,a-c,o,s,i),l},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(nr.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var i=r.__arabicParser__.isInArabicSubstitutionA=function(p){return e[p.charCodeAt(0)]!==void 0},s=r.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},o=r.__arabicParser__.isArabicEndLetter=function(p){return s(p)&&i(p)&&e[p.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(p){return s(p)&&a.indexOf(p.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return s(p)&&i(p)&&e[p.charCodeAt(0)].length>=1};var c=r.__arabicParser__.arabicLetterHasFinalForm=function(p){return s(p)&&i(p)&&e[p.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(p){return s(p)&&i(p)&&e[p.charCodeAt(0)].length>=3};var u=r.__arabicParser__.arabicLetterHasMedialForm=function(p){return s(p)&&i(p)&&e[p.charCodeAt(0)].length==4},h=r.__arabicParser__.resolveLigatures=function(p){var v=0,m=t,y="",x=0;for(v=0;v<p.length;v+=1)m[p.charCodeAt(v)]!==void 0?(x++,typeof(m=m[p.charCodeAt(v)])=="number"&&(y+=String.fromCharCode(m),m=t,x=0),v===p.length-1&&(m=t,y+=p.charAt(v-(x-1)),v-=x-1,x=0)):(m=t,y+=p.charAt(v-x),v-=x,x=0);return y};r.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&n[p.charCodeAt(0)]!==void 0};var d=r.__arabicParser__.getCorrectForm=function(p,v,m){return s(p)?i(p)===!1?-1:!c(p)||!s(v)&&!s(m)||!s(m)&&o(v)||o(p)&&!s(v)||o(p)&&l(v)||o(p)&&o(v)?0:u(p)&&s(v)&&!o(v)&&s(m)&&c(m)?3:o(p)||!s(m)?1:2:-1},A=function(p){var v=0,m=0,y=0,x="",b="",S="",_=(p=p||"").split("\\s+"),C=[];for(v=0;v<_.length;v+=1){for(C.push(""),m=0;m<_[v].length;m+=1)x=_[v][m],b=_[v][m-1],S=_[v][m+1],s(x)?(y=d(x,b,S),C[v]+=y!==-1?String.fromCharCode(e[x.charCodeAt(0)][y]):x):C[v]+=x;C[v]=h(C[v])}return C.join(" ")},g=r.__arabicParser__.processArabic=r.processArabic=function(){var p,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,m=[];if(Array.isArray(v)){var y=0;for(m=[],y=0;y<v.length;y+=1)Array.isArray(v[y])?m.push([A(v[y][0]),v[y][1],v[y][2]]):m.push([A(v[y])]);p=m}else p=A(v);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};r.events.push(["preProcessText",g])}(nr.API),nr.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var a;if((t=t||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(nr.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(p){l=p}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(p){c=p}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(p){h=p}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var A=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return A},set:function(p){A=p}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(p){g=p}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},r.getTextDimensions=function(l,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),h=c.font||this.getFont(),d=c.scaleFactor||this.internal.scaleFactor,A=0,g=0,p=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var m=c.maxWidth;m>0?typeof l=="string"?l=this.splitTextToSize(l,m):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,b){return x.concat(v.splitTextToSize(b,m))},[])):l=Array.isArray(l)?l:[l];for(var y=0;y<l.length;y++)A<(p=this.getStringUnitWidth(l[y],{font:h})*u)&&(A=p);return A!==0&&(g=l.length),{w:A/=d,h:Math.max((g*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/d,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=r.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,d=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,A&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};r.table=function(l,c,u,h,d){if(n.call(this),!u)throw new Error("No data for PDF table.");var A,g,p,v,m=[],y=[],x=[],b={},S={},_=[],C=[],w=(d=d||{}).autoSize||!1,B=d.printHeaders!==!1,D=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,T=d.margins||Object.assign({width:this.getPageWidth()},e),E=typeof d.padding=="number"?d.padding:3,R=d.headerBackgroundColor||"#c8c8c8",M=d.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=M,this.setFontSize(D),h==null)y=m=Object.keys(u[0]),x=m.map(function(){return"left"});else if(Array.isArray(h)&&wn(h[0])==="object")for(m=h.map(function(te){return te.name}),y=h.map(function(te){return te.prompt||te.name||""}),x=h.map(function(te){return te.align||"left"}),A=0;A<h.length;A+=1)S[h[A].name]=h[A].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(y=m=h,x=m.map(function(){return"left"}));if(w||Array.isArray(h)&&typeof h[0]=="string")for(A=0;A<m.length;A+=1){for(b[v=m[A]]=u.map(function(te){return te[v]}),this.setFont(void 0,"bold"),_.push(this.getTextDimensions(y[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=b[v],this.setFont(void 0,"normal"),p=0;p<g.length;p+=1)_.push(this.getTextDimensions(g[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[v]=Math.max.apply(null,_)+E+E,_=[]}if(B){var k={};for(A=0;A<m.length;A+=1)k[m[A]]={},k[m[A]].text=y[A],k[m[A]].align=x[A];var O=o.call(this,k,S);C=m.map(function(te){return new i(l,c,S[te],O,k[te].text,void 0,k[te].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var Q=h.reduce(function(te,ee){return te[ee.name]=ee.align,te},{});for(A=0;A<u.length;A+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:A,data:u[A]},this);var H=o.call(this,u[A],S);for(p=0;p<m.length;p+=1){var W=u[A][m[p]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:A,col:p,data:W},this),s.call(this,new i(l,c,S[m[p]],H,W,A+2,Q[m[p]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(A){var g=l[A];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,c[A]-u-u)},this).map(function(A){return this.getLineHeightFactor()*A.length*h/d+u+u},this).reduce(function(A,g){return Math.max(A,g)},0)};r.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){u=this.internal.__cell__.tableHeaderRow[A].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,d.push(u)),u.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(g)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),t=!1}}(nr.API);var Rse={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Lse=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],CL=Mse(Lse),Pse=[100,200,300,400,500,600,700,800,900],pke=Mse(Pse);function BL(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return Rse[i=i||"normal"]?i:"normal"}(r.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(r.weight),a=function(i){return typeof CL[i=i||"normal"]=="number"?i:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,n].join(" ")}}}function BV(r,e,t,n){var a;for(a=t;a>=0&&a<e.length;a+=n)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=n)if(r[e[a]])return r[e[a]]}var mke={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},NV={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function TV(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function vke(r,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",a=Object.assign({},mke,t.genericFontFamilies||{}),i=null,s=null,o=0;o<e.length;++o)if(a[(i=BL(e[o])).family]&&(i.family=a[i.family]),r.hasOwnProperty(i.family)){s=r[i.family];break}if(!(s=s||r[n]))throw new Error("Could not find a font-family for the rule '"+TV(i)+"' and default family '"+n+"'.");if(s=function(l,c){if(c[l])return c[l];var u=CL[l],h=u<=CL.normal?-1:1,d=BV(c,Lse,u,h);if(!d)throw new Error("Could not find a matching font-stretch value for "+l);return d}(i.stretch,s),s=function(l,c){if(c[l])return c[l];for(var u=Rse[l],h=0;h<u.length;++h)if(c[u[h]])return c[u[h]];throw new Error("Could not find a matching font-style for "+l)}(i.style,s),!(s=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=pke[l],h=BV(c,Pse,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(i.weight,s)))throw new Error("Failed to resolve a font for the rule '"+TV(i)+"'.");return s}function IV(r){return r.trimLeft()}function yke(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function xke(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var JS,EV,DV,vD=["times"];(function(r){var e,t,n,a,i,s,o,l,c,u=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new s,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new s,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=j;Object.defineProperty(this,"pdf",{get:function(){return G}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(pe){Y=!!pe}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(pe){Z=!!pe}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(pe){isNaN(pe)||(de=pe)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(pe){isNaN(pe)||(he=pe)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(pe){var J;typeof pe=="number"?J=[pe,pe,pe,pe]:((J=new Array(4))[0]=pe[0],J[1]=pe.length>=2?pe[1]:J[0],J[2]=pe.length>=3?pe[2]:J[0],J[3]=pe.length>=4?pe[3]:J[1]),c.margin=J}});var fe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return fe},set:function(pe){fe=pe}});var q=0;Object.defineProperty(this,"lastBreak",{get:function(){return q},set:function(pe){q=pe}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(pe){ge=pe}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(pe){pe instanceof u&&(c=pe)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(pe){c.path=pe}});var me=[];Object.defineProperty(this,"ctxStack",{get:function(){return me},set:function(pe){me=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var J;J=d(pe),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var J=d(pe);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var we=null;function Me(pe,J){if(we===null){var oe=function(ae){var ue=[];return Object.keys(ae).forEach(function(be){ae[be].forEach(function(_e){var ye=null;switch(_e){case"bold":ye={family:be,weight:"bold"};break;case"italic":ye={family:be,style:"italic"};break;case"bolditalic":ye={family:be,weight:"bold",style:"italic"};break;case"":case"normal":ye={family:be}}ye!==null&&(ye.ref={name:be,style:_e},ue.push(ye))})}),ue}(pe.getFontList());we=function(ae){for(var ue={},be=0;be<ae.length;++be){var _e=BL(ae[be]),ye=_e.family,Ee=_e.stretch,ze=_e.style,Fe=_e.weight;ue[ye]=ue[ye]||{},ue[ye][Ee]=ue[ye][Ee]||{},ue[ye][Ee][ze]=ue[ye][Ee][ze]||{},ue[ye][Ee][ze][Fe]=_e}return ue}(oe.concat(J))}return we}var z=null;Object.defineProperty(this,"fontFaces",{get:function(){return z},set:function(pe){we=null,z=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var J;if(this.ctx.font=pe,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var oe=J[1];J[2];var ae=J[3],ue=J[4];J[5];var be=J[6],_e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ue)[2];ue=Math.floor(_e==="px"?parseFloat(ue)*this.pdf.internal.scaleFactor:_e==="em"?parseFloat(ue)*this.pdf.getFontSize():parseFloat(ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ue);var ye=function(gt){var Le,Qe,ht=[],it=gt.trim();if(it==="")return vD;if(it in NV)return[NV[it]];for(;it!=="";){switch(Qe=null,Le=(it=IV(it)).charAt(0)){case'"':case"'":Qe=yke(it.substring(1),Le);break;default:Qe=xke(it)}if(Qe===null||(ht.push(Qe[0]),(it=IV(Qe[1]))!==""&&it.charAt(0)!==","))return vD;it=it.replace(/^,/,"")}return ht}(be);if(this.fontFaces){var Ee=vke(Me(this.pdf,this.fontFaces),ye.map(function(gt){return{family:gt,stretch:"normal",weight:ae,style:oe}}));this.pdf.setFont(Ee.ref.name,Ee.ref.style)}else{var ze="";(ae==="bold"||parseInt(ae,10)>=700||oe==="bold")&&(ze="bold"),oe==="italic"&&(ze+="italic"),ze.length===0&&(ze="normal");for(var Fe="",Ge={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},at=0;at<ye.length;at++){if(this.pdf.internal.getFont(ye[at],ze,{noFallback:!0,disableWarning:!0})!==void 0){Fe=ye[at];break}if(ze==="bolditalic"&&this.pdf.internal.getFont(ye[at],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fe=ye[at],ze="bold";else if(this.pdf.internal.getFont(ye[at],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fe=ye[at],ze="normal";break}}if(Fe===""){for(var ut=0;ut<ye.length;ut++)if(Ge[ye[ut]]){Fe=Ge[ye[ut]];break}}Fe=Fe===""?"Times":Fe,this.pdf.setFont(Fe,ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};h.prototype.setLineDash=function(j){this.lineDash=j},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){b.call(this,"fill",!1)},h.prototype.stroke=function(){b.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(j,G){if(isNaN(j)||isNaN(G))throw kn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new s(j,G));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new s(j,G)},h.prototype.closePath=function(){var j=new s(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&wn(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){j=new s(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(j.x,j.y)},h.prototype.lineTo=function(j,G){if(isNaN(j)||isNaN(G))throw kn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new s(j,G));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new s(Y.x,Y.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},h.prototype.quadraticCurveTo=function(j,G,Y,Z){if(isNaN(Y)||isNaN(Z)||isNaN(j)||isNaN(G))throw kn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new s(Y,Z)),he=this.ctx.transform.applyToPoint(new s(j,G));this.path.push({type:"qct",x1:he.x,y1:he.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},h.prototype.bezierCurveTo=function(j,G,Y,Z,de,he){if(isNaN(de)||isNaN(he)||isNaN(j)||isNaN(G)||isNaN(Y)||isNaN(Z))throw kn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var fe=this.ctx.transform.applyToPoint(new s(de,he)),q=this.ctx.transform.applyToPoint(new s(j,G)),ge=this.ctx.transform.applyToPoint(new s(Y,Z));this.path.push({type:"bct",x1:q.x,y1:q.y,x2:ge.x,y2:ge.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new s(fe.x,fe.y)},h.prototype.arc=function(j,G,Y,Z,de,he){if(isNaN(j)||isNaN(G)||isNaN(Y)||isNaN(Z)||isNaN(de))throw kn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var fe=this.ctx.transform.applyToPoint(new s(j,G));j=fe.x,G=fe.y;var q=this.ctx.transform.applyToPoint(new s(0,Y)),ge=this.ctx.transform.applyToPoint(new s(0,0));Y=Math.sqrt(Math.pow(q.x-ge.x,2)+Math.pow(q.y-ge.y,2))}Math.abs(de-Z)>=2*Math.PI&&(Z=0,de=2*Math.PI),this.path.push({type:"arc",x:j,y:G,radius:Y,startAngle:Z,endAngle:de,counterclockwise:he})},h.prototype.arcTo=function(j,G,Y,Z,de){throw new Error("arcTo not implemented.")},h.prototype.rect=function(j,G,Y,Z){if(isNaN(j)||isNaN(G)||isNaN(Y)||isNaN(Z))throw kn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,G),this.lineTo(j+Y,G),this.lineTo(j+Y,G+Z),this.lineTo(j,G+Z),this.lineTo(j,G),this.lineTo(j+Y,G),this.lineTo(j,G)},h.prototype.fillRect=function(j,G,Y,Z){if(isNaN(j)||isNaN(G)||isNaN(Y)||isNaN(Z))throw kn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,G,Y,Z),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},h.prototype.strokeRect=function(j,G,Y,Z){if(isNaN(j)||isNaN(G)||isNaN(Y)||isNaN(Z))throw kn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(j,G,Y,Z),this.stroke())},h.prototype.clearRect=function(j,G,Y,Z){if(isNaN(j)||isNaN(G)||isNaN(Y)||isNaN(Z))throw kn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,G,Y,Z))},h.prototype.save=function(j){j=typeof j!="boolean"||j;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},h.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(G),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(j){var G,Y,Z,de;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))G=0,Y=0,Z=0,de=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(he!==null)G=parseInt(he[1]),Y=parseInt(he[2]),Z=parseInt(he[3]),de=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)G=parseInt(he[1]),Y=parseInt(he[2]),Z=parseInt(he[3]),de=parseFloat(he[4]);else{if(de=1,typeof j=="string"&&j.charAt(0)!=="#"){var fe=new Bse(j);j=fe.ok?fe.toHex():"#000000"}j.length===4?(G=j.substring(1,2),G+=G,Y=j.substring(2,3),Y+=Y,Z=j.substring(3,4),Z+=Z):(G=j.substring(1,3),Y=j.substring(3,5),Z=j.substring(5,7)),G=parseInt(G,16),Y=parseInt(Y,16),Z=parseInt(Z,16)}}return{r:G,g:Y,b:Z,a:de,style:j}},A=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(j,G,Y,Z){if(isNaN(G)||isNaN(Y)||typeof j!="string")throw kn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!A.call(this)){var de=H(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;E.call(this,{text:j,x:G,y:Y,scale:he,angle:de,align:this.textAlign,maxWidth:Z})}},h.prototype.strokeText=function(j,G,Y,Z){if(isNaN(G)||isNaN(Y)||typeof j!="string")throw kn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){Z=isNaN(Z)?void 0:Z;var de=H(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;E.call(this,{text:j,x:G,y:Y,scale:he,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:Z})}},h.prototype.measureText=function(j){if(typeof j!="string")throw kn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,Y=this.pdf.internal.scaleFactor,Z=G.internal.getFontSize(),de=G.getStringUnitWidth(j)*Z/G.internal.scaleFactor,he=function(fe){var q=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return q}}),this};return new he({width:de*=Math.round(96*Y/72*1e4)/1e4})},h.prototype.scale=function(j,G){if(isNaN(j)||isNaN(G))throw kn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new l(j,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.rotate=function(j){if(isNaN(j))throw kn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},h.prototype.translate=function(j,G){if(isNaN(j)||isNaN(G))throw kn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new l(1,0,0,1,j,G);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.transform=function(j,G,Y,Z,de,he){if(isNaN(j)||isNaN(G)||isNaN(Y)||isNaN(Z)||isNaN(de)||isNaN(he))throw kn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var fe=new l(j,G,Y,Z,de,he);this.ctx.transform=this.ctx.transform.multiply(fe)},h.prototype.setTransform=function(j,G,Y,Z,de,he){j=isNaN(j)?1:j,G=isNaN(G)?0:G,Y=isNaN(Y)?0:Y,Z=isNaN(Z)?1:Z,de=isNaN(de)?0:de,he=isNaN(he)?0:he,this.ctx.transform=new l(j,G,Y,Z,de,he)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(j,G,Y,Z,de,he,fe,q,ge){var me=this.pdf.getImageProperties(j),we=1,Me=1,z=1,pe=1;Z!==void 0&&q!==void 0&&(z=q/Z,pe=ge/de,we=me.width/Z*q/Z,Me=me.height/de*ge/de),he===void 0&&(he=G,fe=Y,G=0,Y=0),Z!==void 0&&q===void 0&&(q=Z,ge=de),Z===void 0&&q===void 0&&(q=me.width,ge=me.height);for(var J,oe=this.ctx.transform.decompose(),ae=H(oe.rotate.shx),ue=new l,be=(ue=(ue=(ue=ue.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale)).applyToRectangle(new o(he-G*z,fe-Y*pe,Z*we,de*Me)),_e=v.call(this,be),ye=[],Ee=0;Ee<_e.length;Ee+=1)ye.indexOf(_e[Ee])===-1&&ye.push(_e[Ee]);if(x(ye),this.autoPaging)for(var ze=ye[0],Fe=ye[ye.length-1],Ge=ze;Ge<Fe+1;Ge++){this.pdf.setPage(Ge);var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ut=Ge===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Le=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=Ge===1?0:gt+(Ge-2)*Le;if(this.ctx.clip_path.length!==0){var ht=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(J,this.posX+this.margin[3],-Qe+ut+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=ht}var it=JSON.parse(JSON.stringify(be));it=y([it],this.posX+this.margin[3],-Qe+ut+this.ctx.prevPageLastElemOffset)[0];var Vt=(Ge>ze||Ge<Fe)&&p.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Le,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",it.x,it.y,it.w,it.h,null,null,ae),Vt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",be.x,be.y,be.w,be.h,null,null,ae)};var v=function(j,G,Y){var Z=[];G=G||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":Z.push(Math.floor((j.y+de)/Y)+1);break;case"arc":Z.push(Math.floor((j.y+de-j.radius)/Y)+1),Z.push(Math.floor((j.y+de+j.radius)/Y)+1);break;case"qct":var he=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);Z.push(Math.floor((he.y+de)/Y)+1),Z.push(Math.floor((he.y+he.h+de)/Y)+1);break;case"bct":var fe=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);Z.push(Math.floor((fe.y+de)/Y)+1),Z.push(Math.floor((fe.y+fe.h+de)/Y)+1);break;case"rect":Z.push(Math.floor((j.y+de)/Y)+1),Z.push(Math.floor((j.y+j.h+de)/Y)+1)}for(var q=0;q<Z.length;q+=1)for(;this.pdf.internal.getNumberOfPages()<Z[q];)m.call(this);return Z},m=function(){var j=this.fillStyle,G=this.strokeStyle,Y=this.font,Z=this.lineCap,de=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=G,this.font=Y,this.lineCap=Z,this.lineWidth=de,this.lineJoin=he},y=function(j,G,Y){for(var Z=0;Z<j.length;Z++)switch(j[Z].type){case"bct":j[Z].x2+=G,j[Z].y2+=Y;case"qct":j[Z].x1+=G,j[Z].y1+=Y;case"mt":case"lt":case"arc":default:j[Z].x+=G,j[Z].y+=Y}return j},x=function(j){return j.sort(function(G,Y){return G-Y})},b=function(j,G){for(var Y,Z,de=this.fillStyle,he=this.strokeStyle,fe=this.lineCap,q=this.lineWidth,ge=Math.abs(q*this.ctx.transform.scaleX),me=this.lineJoin,we=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),z=[],pe=0;pe<Me.length;pe++)if(Me[pe].x!==void 0)for(var J=v.call(this,Me[pe]),oe=0;oe<J.length;oe+=1)z.indexOf(J[oe])===-1&&z.push(J[oe]);for(var ae=0;ae<z.length;ae++)for(;this.pdf.internal.getNumberOfPages()<z[ae];)m.call(this);if(x(z),this.autoPaging)for(var ue=z[0],be=z[z.length-1],_e=ue;_e<be+1;_e++){this.pdf.setPage(_e),this.fillStyle=de,this.strokeStyle=he,this.lineCap=fe,this.lineWidth=ge,this.lineJoin=me;var ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ee=_e===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=_e===1?0:ze+(_e-2)*Fe;if(this.ctx.clip_path.length!==0){var at=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Y,this.posX+this.margin[3],-Ge+Ee+this.ctx.prevPageLastElemOffset),S.call(this,j,!0),this.path=at}if(Z=JSON.parse(JSON.stringify(we)),this.path=y(Z,this.posX+this.margin[3],-Ge+Ee+this.ctx.prevPageLastElemOffset),G===!1||_e===0){var ut=(_e>ue||_e<be)&&p.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,Fe,null).clip().discardPath()),S.call(this,j,G),ut&&this.pdf.restoreGraphicsState()}this.lineWidth=q}else this.lineWidth=ge,S.call(this,j,G),this.lineWidth=q;this.path=we},S=function(j,G){if((j!=="stroke"||G||!g.call(this))&&(j==="stroke"||G||!A.call(this))){for(var Y,Z,de=[],he=this.path,fe=0;fe<he.length;fe++){var q=he[fe];switch(q.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:q,deltas:[],abs:[]});break;case"lt":var ge=de.length;if(he[fe-1]&&!isNaN(he[fe-1].x)&&(Y=[q.x-he[fe-1].x,q.y-he[fe-1].y],ge>0)){for(;ge>=0;ge--)if(de[ge-1].close!==!0&&de[ge-1].begin!==!0){de[ge-1].deltas.push(Y),de[ge-1].abs.push(q);break}}break;case"bct":Y=[q.x1-he[fe-1].x,q.y1-he[fe-1].y,q.x2-he[fe-1].x,q.y2-he[fe-1].y,q.x-he[fe-1].x,q.y-he[fe-1].y],de[de.length-1].deltas.push(Y);break;case"qct":var me=he[fe-1].x+2/3*(q.x1-he[fe-1].x),we=he[fe-1].y+2/3*(q.y1-he[fe-1].y),Me=q.x+2/3*(q.x1-q.x),z=q.y+2/3*(q.y1-q.y),pe=q.x,J=q.y;Y=[me-he[fe-1].x,we-he[fe-1].y,Me-he[fe-1].x,z-he[fe-1].y,pe-he[fe-1].x,J-he[fe-1].y],de[de.length-1].deltas.push(Y);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(q)}}Z=G?null:j==="stroke"?"stroke":"fill";for(var oe=!1,ae=0;ae<de.length;ae++)if(de[ae].arc)for(var ue=de[ae].abs,be=0;be<ue.length;be++){var _e=ue[be];_e.type==="arc"?w.call(this,_e.x,_e.y,_e.radius,_e.startAngle,_e.endAngle,_e.counterclockwise,void 0,G,!oe):R.call(this,_e.x,_e.y),oe=!0}else if(de[ae].close===!0)this.pdf.internal.out("h"),oe=!1;else if(de[ae].begin!==!0){var ye=de[ae].start.x,Ee=de[ae].start.y;M.call(this,de[ae].deltas,ye,Ee),oe=!0}Z&&B.call(this,Z),G&&D.call(this)}},_=function(j){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-Y;case"top":return j+G-Y;case"hanging":return j+G-2*Y;case"middle":return j+G/2-Y;case"ideographic":return j;case"alphabetic":default:return j}},C=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(G,Y){this.colorStops.push([G,Y])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var w=function(j,G,Y,Z,de,he,fe,q,ge){for(var me=O.call(this,Y,Z,de,he),we=0;we<me.length;we++){var Me=me[we];we===0&&(ge?T.call(this,Me.x1+j,Me.y1+G):R.call(this,Me.x1+j,Me.y1+G)),k.call(this,j,G,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}q?D.call(this):B.call(this,fe)},B=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(j,G){this.pdf.internal.out(t(j)+" "+n(G)+" m")},E=function(j){var G;switch(j.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var Y=this.pdf.getTextDimensions(j.text),Z=_.call(this,j.y),de=C.call(this,Z)-Y.h,he=this.ctx.transform.applyToPoint(new s(j.x,Z)),fe=this.ctx.transform.decompose(),q=new l;q=(q=(q=q.multiply(fe.translate)).multiply(fe.skew)).multiply(fe.scale);for(var ge,me,we,Me=this.ctx.transform.applyToRectangle(new o(j.x,Z,Y.w,Y.h)),z=q.applyToRectangle(new o(j.x,de,Y.w,Y.h)),pe=v.call(this,z),J=[],oe=0;oe<pe.length;oe+=1)J.indexOf(pe[oe])===-1&&J.push(pe[oe]);if(x(J),this.autoPaging)for(var ae=J[0],ue=J[J.length-1],be=ae;be<ue+1;be++){this.pdf.setPage(be);var _e=be===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ee=this.pdf.internal.pageSize.height-this.margin[2],ze=Ee-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],Ge=Fe-this.margin[3],at=be===1?0:ye+(be-2)*ze;if(this.ctx.clip_path.length!==0){var ut=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(ge,this.posX+this.margin[3],-1*at+_e),S.call(this,"fill",!0),this.path=ut}var gt=y([JSON.parse(JSON.stringify(z))],this.posX+this.margin[3],-at+_e+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*j.scale),we=this.lineWidth,this.lineWidth=we*j.scale);var Le=this.autoPaging!=="text";if(Le||gt.y+gt.h<=Ee){if(Le||gt.y>=_e&&gt.x<=Fe){var Qe=Le?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Fe-gt.x)[0],ht=y([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-at+_e+this.ctx.prevPageLastElemOffset)[0],it=Le&&(be>ae||be<ue)&&p.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,ze,null).clip().discardPath()),this.pdf.text(Qe,ht.x,ht.y,{angle:j.angle,align:G,renderingMode:j.renderingMode}),it&&this.pdf.restoreGraphicsState()}}else gt.y<Ee&&(this.ctx.prevPageLastElemOffset+=Ee-gt.y);j.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=we)}else j.scale>=.01&&(me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(me*j.scale),we=this.lineWidth,this.lineWidth=we*j.scale),this.pdf.text(j.text,he.x+this.posX,he.y+this.posY,{angle:j.angle,align:G,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(me),this.lineWidth=we)},R=function(j,G,Y,Z){Y=Y||0,Z=Z||0,this.pdf.internal.out(t(j+Y)+" "+n(G+Z)+" l")},M=function(j,G,Y){return this.pdf.lines(j,G,Y,null,null)},k=function(j,G,Y,Z,de,he,fe,q){this.pdf.internal.out([e(a(Y+j)),e(i(Z+G)),e(a(de+j)),e(i(he+G)),e(a(fe+j)),e(i(q+G)),"c"].join(" "))},O=function(j,G,Y,Z){for(var de=2*Math.PI,he=Math.PI/2;G>Y;)G-=de;var fe=Math.abs(Y-G);fe<de&&Z&&(fe=de-fe);for(var q=[],ge=Z?-1:1,me=G;fe>1e-5;){var we=me+ge*Math.min(fe,he);q.push(Q.call(this,j,me,we)),fe-=Math.abs(we-me),me=we}return q},Q=function(j,G,Y){var Z=(Y-G)/2,de=j*Math.cos(Z),he=j*Math.sin(Z),fe=de,q=-he,ge=fe*fe+q*q,me=ge+fe*de+q*he,we=4/3*(Math.sqrt(2*ge*me)-me)/(fe*he-q*de),Me=fe-we*q,z=q+we*fe,pe=Me,J=-z,oe=Z+G,ae=Math.cos(oe),ue=Math.sin(oe);return{x1:j*Math.cos(G),y1:j*Math.sin(G),x2:Me*ae-z*ue,y2:Me*ue+z*ae,x3:pe*ae-J*ue,y3:pe*ue+J*ae,x4:j*Math.cos(Y),y4:j*Math.sin(Y)}},H=function(j){return 180*j/Math.PI},W=function(j,G,Y,Z,de,he){var fe=j+.5*(Y-j),q=G+.5*(Z-G),ge=de+.5*(Y-de),me=he+.5*(Z-he),we=Math.min(j,de,fe,ge),Me=Math.max(j,de,fe,ge),z=Math.min(G,he,q,me),pe=Math.max(G,he,q,me);return new o(we,z,Me-we,pe-z)},te=function(j,G,Y,Z,de,he,fe,q){var ge,me,we,Me,z,pe,J,oe,ae,ue,be,_e,ye,Ee,ze=Y-j,Fe=Z-G,Ge=de-Y,at=he-Z,ut=fe-de,gt=q-he;for(me=0;me<41;me++)ae=(J=(we=j+(ge=me/40)*ze)+ge*((z=Y+ge*Ge)-we))+ge*(z+ge*(de+ge*ut-z)-J),ue=(oe=(Me=G+ge*Fe)+ge*((pe=Z+ge*at)-Me))+ge*(pe+ge*(he+ge*gt-pe)-oe),me==0?(be=ae,_e=ue,ye=ae,Ee=ue):(be=Math.min(be,ae),_e=Math.min(_e,ue),ye=Math.max(ye,ae),Ee=Math.max(Ee,ue));return new o(Math.round(be),Math.round(_e),Math.round(ye-be),Math.round(Ee-_e))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,G,Y=(j=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:G}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(nr.API),function(r){var e=function(i){var s,o,l,c,u,h,d,A,g,p;for(o=[],l=0,c=(i+=s="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(p=u%85))/85)-(g=u%85))/85)-(A=u%85))/85)-(d=u%85))/85)%85,o.push(h+33,d+33,A+33,g+33,p+33)):o.push(122);return function(v,m){for(var y=m;y>0;y--)v.pop()}(o,s.length),String.fromCharCode.apply(String,o)+"~>"},t=function(i){var s,o,l,c,u,h=String,d="length",A=255,g="charCodeAt",p="slice",v="replace";for(i[p](-2),i=i[p](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),l=[],c=0,u=(i+=s="uuuuu"[p](i[d]%5||5))[d];u>c;c+=5)o=52200625*(i[g](c)-33)+614125*(i[g](c+1)-33)+7225*(i[g](c+2)-33)+85*(i[g](c+3)-33)+(i[g](c+4)-33),l.push(A&o>>24,A&o>>16,A&o>>8,A&o);return function(m,y){for(var x=y;x>0;x--)m.pop()}(l,s[d]),h.fromCharCode.apply(h,l)},n=function(i){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),s.test(i)===!1)return"";for(var o="",l=0;l<i.length;l+=2)o+=String.fromCharCode("0x"+(i[l]+i[l+1]));return o},a=function(i){for(var s=new Uint8Array(i.length),o=i.length;o--;)s[o]=i.charCodeAt(o);return i=(s=xL(s)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};r.processDataByFilters=function(i,s){var o=0,l=i||"",c=[];for(typeof(s=s||[])=="string"&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(nr.API),function(r){r.loadFile=function(e,t,n){return function(a,i,s){i=i!==!1,s=typeof s=="function"?s:function(){};var o=void 0;try{o=function(l,c,u){var h=new XMLHttpRequest,d=0,A=function(g){var p=g.length,v=[],m=String.fromCharCode;for(d=0;d<p;d+=1)v.push(m(255&g.charCodeAt(d)));return v.join("")};if(h.open("GET",l,!c),h.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(h.onload=function(){h.status===200?u(A(this.responseText)):u(void 0)}),h.send(null),c&&h.status===200)return A(h.responseText)}(a,i,s)}catch{}return o}(e,t,n)},r.loadImageFile=r.loadFile}(nr.API),function(r){function e(){return(ir.html2canvas?Promise.resolve(ir.html2canvas):hs(()=>Promise.resolve().then(()=>l8e),void 0)).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(ir.DOMPurify?Promise.resolve(ir.DOMPurify):hs(()=>Promise.resolve().then(()=>bQe),void 0)).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var o=wn(s);return o==="undefined"?"undefined":o==="string"||s instanceof String?"string":o==="number"||s instanceof Number?"number":o==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(s,o){var l=document.createElement(s);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},i=function s(o){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),c=s.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,s,1,[s])).set(o)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(s,o){return s.__proto__=o||i.prototype,s},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(s,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(l){return this.set({src:a("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},i.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),d=c.firstChild;d;d=d.nextSibling)u!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||h.appendChild(l(d,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var d=0;d<c.length;++d){var A=c[d],g=A.src.find(function(p){return p.format==="truetype"});g&&l.addFont(g.url,A.ref.name,A.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(s,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,o):this.outputPdf(s,o)},i.prototype.outputPdf=function(s,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,o)})},i.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},i.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(s){if(n(s)!=="object")return this;var o=Object.keys(s||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(o)})},i.prototype.get=function(s,o){return this.then(function(){var l=s in i.template.prop?this.prop[s]:this.opt[s];return o?o(l):l})},i.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},i.prototype.setPageSize=function(s){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(s=s||nr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:o(s.inner.width,s.k),height:o(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},i.prototype.setProgress=function(s,o,l,c){return s!=null&&(this.progress.val=s),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(s,o,l,c){return this.setProgress(s?this.progress.val+s:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(s,o){var l=this;return this.thenCore(s,o,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,c),h}).then(c,u).then(function(h){return l.updateProgress(1),h})})},i.prototype.thenCore=function(s,o,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,s,o);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(s,o){return Promise.prototype.then.call(this,s,o)},i.prototype.thenList=function(s){var o=this;return s.forEach(function(l){o=o.thenCore(l)}),o},i.prototype.catch=function(s){s&&(s=s.bind(this));var o=Promise.prototype.catch.call(this,s);return i.convert(o,this)},i.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},i.prototype.error=function(s){return this.then(function(){throw new Error(s)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,nr.getPageSize=function(s,o,l){if(wn(s)==="object"){var c=s;s=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var A,g=0,p=0;if(d.hasOwnProperty(h))g=d[h][1]/u,p=d[h][0]/u;else try{g=l[1],p=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",p>g&&(A=p,p=g,g=A);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",g>p&&(A=p,p=g,g=A)}return{width:p,height:g,unit:o,k:u,orientation:s}},r.html=function(s,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(BL):null;var l=new i(o);return o.worker?l:l.from(s).doCallback()}}(nr.API),nr.API.addJS=function(r){return DV=r,this.internal.events.subscribe("postPutResources",function(){JS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(JS+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),EV=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+DV+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){JS!==void 0&&EV!==void 0&&this.internal.out("/Names <</JavaScript "+JS+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),i=0;i<a.length;i++){var s=a[i],o=n.exec(s);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var h=t.internal.newObject();u.push(h);var d=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var A=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<u.length;i++)t.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+A+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,a,i){var s={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var s=n.children[i];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])}(nr.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,a,i,s,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(h){for(var d,A=256*h.charCodeAt(4)+h.charCodeAt(5),g=h.length,p={width:0,height:0,numcomponents:1},v=4;v<g;v+=2){if(v+=A,e.indexOf(h.charCodeAt(v+1))!==-1){d=256*h.charCodeAt(v+5)+h.charCodeAt(v+6),p={width:256*h.charCodeAt(v+7)+h.charCodeAt(v+8),height:d,numcomponents:h.charCodeAt(v+9)};break}A=256*h.charCodeAt(v+2)+h.charCodeAt(v+3)}return p}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:n,alias:a}}return u}}(nr.API);var zm,e_,MV,RV,LV,bke=function(){var r,e,t;function n(i){var s,o,l,c,u,h,d,A,g,p,v,m,y,x;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(s=this.readUInt32(),g=(function(){var b,S;for(S=[],b=0;b<4;++b)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,h.delay=1e3*u/c,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,s-=4),i=(h!=null?h.data:void 0)||this.imgData,m=0;0<=s?m<s:m>s;0<=s?++m:--m)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((p=l-this.transparency.indexed.length)>0)for(y=0;0<=p?y<p:y>p;0<=p?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":d=(v=this.read(s)).indexOf(0),A=String.fromCharCode.apply(String,v.slice(0,d)),this.text[A]=String.fromCharCode.apply(String,v.slice(d+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var s,o;for(o=[],s=0;0<=i?s<i:s>i;0<=i?++s:--s)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var s=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*s),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,d,A,g){var p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te=Math.ceil((c.width-h)/A),ee=Math.ceil((c.height-d)/g),j=c.width==te&&c.height==ee;for(E=s*te,D=j?o:new Uint8Array(E*ee),b=i.length,T=0,v=0;T<ee&&l<b;){switch(i[l++]){case 0:for(y=k=0;k<E;y=k+=1)D[v++]=i[l++];break;case 1:for(y=O=0;O<E;y=O+=1)p=i[l++],x=y<s?0:D[v-s],D[v++]=(p+x)%256;break;case 2:for(y=Q=0;Q<E;y=Q+=1)p=i[l++],m=(y-y%s)/s,R=T&&D[(T-1)*E+m*s+y%s],D[v++]=(R+p)%256;break;case 3:for(y=H=0;H<E;y=H+=1)p=i[l++],m=(y-y%s)/s,x=y<s?0:D[v-s],R=T&&D[(T-1)*E+m*s+y%s],D[v++]=(p+Math.floor((x+R)/2))%256;break;case 4:for(y=W=0;W<E;y=W+=1)p=i[l++],m=(y-y%s)/s,x=y<s?0:D[v-s],T===0?R=M=0:(R=D[(T-1)*E+m*s+y%s],M=m&&D[(T-1)*E+(m-1)*s+y%s]),S=x+R-M,_=Math.abs(S-x),w=Math.abs(S-R),B=Math.abs(S-M),C=_<=w&&_<=B?x:w<=B?R:M,D[v++]=(p+C)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!j){var G=((d+T*g)*c.width+h)*s,Y=T*E;for(y=0;y<te;y+=1){for(var Z=0;Z<s;Z+=1)o[G++]=D[Y++];G+=(A-1)*s}}T++}}return i=JPe(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},n.prototype.decodePalette=function(){var i,s,o,l,c,u,h,d,A;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,i=0,s=h=0,d=o.length;h<d;s=h+=3)c[l++]=o[s],c[l++]=o[s+1],c[l++]=o[s+2],c[l++]=(A=u[i++])!=null?A:255;return c},n.prototype.copyToImageData=function(i,s){var o,l,c,u,h,d,A,g,p,v,m;if(l=this.colors,p=null,o=this.hasAlphaChannel,this.palette.length&&(p=(m=this._decodedPalette)!=null?m:this._decodedPalette=this.decodePalette(),l=4,o=!0),g=(c=i.data||i).length,h=p||s,u=d=0,l===1)for(;u<g;)A=p?4*s[u/4]:d,v=h[A++],c[u++]=v,c[u++]=v,c[u++]=v,c[u++]=o?h[A++]:255,d=A;else for(;u<g;)A=p?4*s[u/4]:d,c[u++]=h[A++],c[u++]=h[A++],c[u++]=h[A++],c[u++]=o?h[A++]:255,d=A},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(ir)==="[object Window]"){try{e=ir.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),r=function(i){var s;if(a()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var s,o,l,c,u,h,d,A;if(this.animation){for(A=[],o=u=0,h=(d=this.animation.frames).length;u<h;o=++u)s=d[o],l=i.createImageData(s.width,s.height),c=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,c),s.imageData=l,A.push(s.image=r(l));return A}},n.prototype.renderFrame=function(i,s){var o,l,c;return o=(l=this.animation.frames)[s],c=l[s-1],s===0&&i.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&i.clearRect(o.xOffset,o.yOffset,o.width,o.height),i.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(i){var s,o,l,c,u,h,d=this;return o=0,h=this.animation,c=h.numFrames,l=h.frames,u=h.numPlays,(s=function(){var A,g;if(A=o++%c,g=l[A],d.renderFrame(i,A),c>1&&o/c<u)return d.animation._timeout=setTimeout(s,g.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var s,o;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,s=i.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(o=s.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),s.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function wke(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,a=r[e++],i=a>>7,s=1<<(7&a)+1;r[e++],r[e++];var o=null,l=null;i&&(o=e,l=s,e+=3*s);var c=!0,u=[],h=0,d=null,A=0,g=null;for(this.width=t,this.height=n;c&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,g=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((T=r[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var p=r[e++];h=r[e++]|r[e++]<<8,d=r[e++],!(1&p)&&(d=null),A=p>>2&7,e++;break;case 254:for(;;){if(!((T=r[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var v=r[e++]|r[e++]<<8,m=r[e++]|r[e++]<<8,y=r[e++]|r[e++]<<8,x=r[e++]|r[e++]<<8,b=r[e++],S=b>>6&1,_=1<<(7&b)+1,C=o,w=l,B=!1;b>>7&&(B=!0,C=e,w=_,e+=3*_);var D=e;for(e++;;){var T;if(!((T=r[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}u.push({x:v,y:m,width:y,height:x,has_local_palette:B,palette_offset:C,palette_size:w,data_offset:D,data_length:e-D,transparent_index:d,interlaced:!!S,delay:h,disposal:A});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return g},this.frameInfo=function(E){if(E<0||E>=u.length)throw new Error("Frame index out of range.");return u[E]},this.decodeAndBlitFrameBGRA=function(E,R){var M=this.frameInfo(E),k=M.width*M.height,O=new Uint8Array(k);PV(r,M.data_offset,O,k);var Q=M.palette_offset,H=M.transparent_index;H===null&&(H=256);var W=M.width,te=t-W,ee=W,j=4*(M.y*t+M.x),G=4*((M.y+M.height)*t+M.x),Y=j,Z=4*te;M.interlaced===!0&&(Z+=4*t*7);for(var de=8,he=0,fe=O.length;he<fe;++he){var q=O[he];if(ee===0&&(ee=W,(Y+=Z)>=G&&(Z=4*te+4*t*(de-1),Y=j+(W+te)*(de<<1),de>>=1)),q===H)Y+=4;else{var ge=r[Q+3*q],me=r[Q+3*q+1],we=r[Q+3*q+2];R[Y++]=we,R[Y++]=me,R[Y++]=ge,R[Y++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(E,R){var M=this.frameInfo(E),k=M.width*M.height,O=new Uint8Array(k);PV(r,M.data_offset,O,k);var Q=M.palette_offset,H=M.transparent_index;H===null&&(H=256);var W=M.width,te=t-W,ee=W,j=4*(M.y*t+M.x),G=4*((M.y+M.height)*t+M.x),Y=j,Z=4*te;M.interlaced===!0&&(Z+=4*t*7);for(var de=8,he=0,fe=O.length;he<fe;++he){var q=O[he];if(ee===0&&(ee=W,(Y+=Z)>=G&&(Z=4*te+4*t*(de-1),Y=j+(W+te)*(de<<1),de>>=1)),q===H)Y+=4;else{var ge=r[Q+3*q],me=r[Q+3*q+1],we=r[Q+3*q+2];R[Y++]=ge,R[Y++]=me,R[Y++]=we,R[Y++]=255}--ee}}}function PV(r,e,t,n){for(var a=r[e++],i=1<<a,s=i+1,o=s+1,l=a+1,c=(1<<l)-1,u=0,h=0,d=0,A=r[e++],g=new Int32Array(4096),p=null;;){for(;u<16&&A!==0;)h|=r[e++]<<u,u+=8,A===1?A=r[e++]:--A;if(u<l)break;var v=h&c;if(h>>=l,u-=l,v!==i){if(v===s)break;for(var m=v<o?v:p,y=0,x=m;x>i;)x=g[x]>>8,++y;var b=x;if(d+y+(m!==v?1:0)>n)return void kn.log("Warning, gif stream longer than expected.");t[d++]=b;var S=d+=y;for(m!==v&&(t[d++]=b),x=m;y--;)x=g[x],t[--S]=255&x,x>>=8;p!==null&&o<4096&&(g[o++]=p<<8|b,o>=c+1&&l<12&&(++l,c=c<<1|1)),p=v}else o=s+1,c=(1<<(l=a+1))-1,p=null}return d!==n&&kn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function yD(r){var e,t,n,a,i,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),d=new Array(65535),A=new Array(64),g=new Array(64),p=[],v=0,m=7,y=new Array(64),x=new Array(64),b=new Array(64),S=new Array(256),_=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],w=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],k=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function O(j,G){for(var Y=0,Z=0,de=new Array,he=1;he<=16;he++){for(var fe=1;fe<=j[he];fe++)de[G[Z]]=[],de[G[Z]][0]=Y,de[G[Z]][1]=he,Z++,Y++;Y*=2}return de}function Q(j){for(var G=j[0],Y=j[1]-1;Y>=0;)G&1<<Y&&(v|=1<<m),Y--,--m<0&&(v==255?(H(255),H(0)):H(v),m=7,v=0)}function H(j){p.push(j)}function W(j){H(j>>8&255),H(255&j)}function te(j,G,Y,Z,de){for(var he,fe=de[0],q=de[240],ge=function(ue,be){var _e,ye,Ee,ze,Fe,Ge,at,ut,gt,Le,Qe=0;for(gt=0;gt<8;++gt){_e=ue[Qe],ye=ue[Qe+1],Ee=ue[Qe+2],ze=ue[Qe+3],Fe=ue[Qe+4],Ge=ue[Qe+5],at=ue[Qe+6];var ht=_e+(ut=ue[Qe+7]),it=_e-ut,Vt=ye+at,kt=ye-at,Bt=Ee+Ge,Sr=Ee-Ge,zt=ze+Fe,qe=ze-Fe,pt=ht+zt,Nt=ht-zt,Kt=Vt+Bt,Yt=Vt-Bt;ue[Qe]=pt+Kt,ue[Qe+4]=pt-Kt;var Je=.707106781*(Yt+Nt);ue[Qe+2]=Nt+Je,ue[Qe+6]=Nt-Je;var yt=.382683433*((pt=qe+Sr)-(Yt=kt+it)),mr=.5411961*pt+yt,dr=1.306562965*Yt+yt,an=.707106781*(Kt=Sr+kt),_r=it+an,mt=it-an;ue[Qe+5]=mt+mr,ue[Qe+3]=mt-mr,ue[Qe+1]=_r+dr,ue[Qe+7]=_r-dr,Qe+=8}for(Qe=0,gt=0;gt<8;++gt){_e=ue[Qe],ye=ue[Qe+8],Ee=ue[Qe+16],ze=ue[Qe+24],Fe=ue[Qe+32],Ge=ue[Qe+40],at=ue[Qe+48];var Cn=_e+(ut=ue[Qe+56]),Pr=_e-ut,ar=ye+at,Dr=ye-at,Nr=Ee+Ge,sn=Ee-Ge,ri=ze+Fe,Ea=ze-Fe,Zr=Cn+ri,ia=Cn-ri,Yn=ar+Nr,fa=ar-Nr;ue[Qe]=Zr+Yn,ue[Qe+32]=Zr-Yn;var Ln=.707106781*(fa+ia);ue[Qe+16]=ia+Ln,ue[Qe+48]=ia-Ln;var ni=.382683433*((Zr=Ea+sn)-(fa=Dr+Pr)),Mt=.5411961*Zr+ni,Be=1.306562965*fa+ni,lt=.707106781*(Yn=sn+Dr),Et=Pr+lt,zr=Pr-lt;ue[Qe+40]=zr+Mt,ue[Qe+24]=zr-Mt,ue[Qe+8]=Et+Be,ue[Qe+56]=Et-Be,Qe++}for(gt=0;gt<64;++gt)Le=ue[gt]*be[gt],A[gt]=Le>0?Le+.5|0:Le-.5|0;return A}(j,G),me=0;me<64;++me)g[C[me]]=ge[me];var we=g[0]-Y;Y=g[0],we==0?Q(Z[0]):(Q(Z[d[he=32767+we]]),Q(h[he]));for(var Me=63;Me>0&&g[Me]==0;)Me--;if(Me==0)return Q(fe),Y;for(var z,pe=1;pe<=Me;){for(var J=pe;g[pe]==0&&pe<=Me;)++pe;var oe=pe-J;if(oe>=16){z=oe>>4;for(var ae=1;ae<=z;++ae)Q(q);oe&=15}he=32767+g[pe],Q(de[(oe<<4)+d[he]]),Q(h[he]),pe++}return Me!=63&&Q(fe),Y}function ee(j){j=Math.min(Math.max(j,1),100),i!=j&&(function(G){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var de=s((Y[Z]*G+50)/100);de=Math.min(Math.max(de,1),255),o[C[Z]]=de}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],fe=0;fe<64;fe++){var q=s((he[fe]*G+50)/100);q=Math.min(Math.max(q,1),255),l[C[fe]]=q}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],me=0,we=0;we<8;we++)for(var Me=0;Me<8;Me++)c[me]=1/(o[C[me]]*ge[we]*ge[Me]*8),u[me]=1/(l[C[me]]*ge[we]*ge[Me]*8),me++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),i=j)}this.encode=function(j,G){G&&ee(G),p=new Array,v=0,m=7,W(65496),W(65504),W(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),W(1),W(1),H(0),H(0),function(){W(65499),W(132),H(0);for(var ye=0;ye<64;ye++)H(o[ye]);H(1);for(var Ee=0;Ee<64;Ee++)H(l[Ee])}(),function(ye,Ee){W(65472),W(17),H(8),W(Ee),W(ye),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(j.width,j.height),function(){W(65476),W(418),H(0);for(var ye=0;ye<16;ye++)H(w[ye+1]);for(var Ee=0;Ee<=11;Ee++)H(B[Ee]);H(16);for(var ze=0;ze<16;ze++)H(D[ze+1]);for(var Fe=0;Fe<=161;Fe++)H(T[Fe]);H(1);for(var Ge=0;Ge<16;Ge++)H(E[Ge+1]);for(var at=0;at<=11;at++)H(R[at]);H(17);for(var ut=0;ut<16;ut++)H(M[ut+1]);for(var gt=0;gt<=161;gt++)H(k[gt])}(),W(65498),W(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var Y=0,Z=0,de=0;v=0,m=7,this.encode.displayName="_encode_";for(var he,fe,q,ge,me,we,Me,z,pe,J=j.data,oe=j.width,ae=j.height,ue=4*oe,be=0;be<ae;){for(he=0;he<ue;){for(me=ue*be+he,Me=-1,z=0,pe=0;pe<64;pe++)we=me+(z=pe>>3)*ue+(Me=4*(7&pe)),be+z>=ae&&(we-=ue*(be+1+z-ae)),he+Me>=ue&&(we-=he+Me-ue+4),fe=J[we++],q=J[we++],ge=J[we++],y[pe]=(_[fe]+_[q+256>>0]+_[ge+512>>0]>>16)-128,x[pe]=(_[fe+768>>0]+_[q+1024>>0]+_[ge+1280>>0]>>16)-128,b[pe]=(_[fe+1280>>0]+_[q+1536>>0]+_[ge+1792>>0]>>16)-128;Y=te(y,c,Y,e,n),Z=te(x,u,Z,t,a),de=te(b,u,de,t,a),he+=32}be+=8}if(m>=0){var _e=[];_e[1]=m+1,_e[0]=(1<<m+1)-1,Q(_e)}return W(65497),new Uint8Array(p)},r=r||50,function(){for(var j=String.fromCharCode,G=0;G<256;G++)S[G]=j(G)}(),e=O(w,B),t=O(E,R),n=O(D,T),a=O(M,k),function(){for(var j=1,G=2,Y=1;Y<=15;Y++){for(var Z=j;Z<G;Z++)d[32767+Z]=Y,h[32767+Z]=[],h[32767+Z][1]=Y,h[32767+Z][0]=Z;for(var de=-(G-1);de<=-j;de++)d[32767+de]=Y,h[32767+de]=[],h[32767+de][1]=Y,h[32767+de][0]=G-1+de;j<<=1,G<<=1}}(),function(){for(var j=0;j<256;j++)_[j]=19595*j,_[j+256>>0]=38470*j,_[j+512>>0]=7471*j+32768,_[j+768>>0]=-11059*j,_[j+1024>>0]=-21709*j,_[j+1280>>0]=32768*j+8421375,_[j+1536>>0]=-27439*j,_[j+1792>>0]=-5329*j}(),ee(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Rl(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function kV(r){function e(w){if(!w)throw Error("assert :P")}function t(w,B,D){for(var T=0;4>T;T++)if(w[B+T]!=D.charCodeAt(T))return!0;return!1}function n(w,B,D,T,E){for(var R=0;R<E;R++)w[B+R]=D[T+R]}function a(w,B,D,T){for(var E=0;E<T;E++)w[B+E]=D}function i(w){return new Int32Array(w)}function s(w,B){for(var D=[],T=0;T<w;T++)D.push(new B);return D}function o(w,B){var D=[];return function T(E,R,M){for(var k=M[R],O=0;O<k&&(E.push(M.length>R+1?[]:new B),!(M.length<R+1));O++)T(E[O],R+1,M)}(D,0,w),D}var l=function(){var w=this;function B(N,L){for(var F=1<<L-1>>>0;N&F;)F>>>=1;return F?(N&F-1)+F:N}function D(N,L,F,V,ne){e(!(V%F));do N[L+(V-=F)]=ne;while(0<V)}function T(N,L,F,V,ne){if(e(2328>=ne),512>=ne)var ie=i(512);else if((ie=i(ne))==null)return 0;return function(se,ce,Ae,ve,Ne,je){var Oe,Re,et=ce,Ve=1<<Ae,Te=i(16),De=i(16);for(e(Ne!=0),e(ve!=null),e(se!=null),e(0<Ae),Re=0;Re<Ne;++Re){if(15<ve[Re])return 0;++Te[ve[Re]]}if(Te[0]==Ne)return 0;for(De[1]=0,Oe=1;15>Oe;++Oe){if(Te[Oe]>1<<Oe)return 0;De[Oe+1]=De[Oe]+Te[Oe]}for(Re=0;Re<Ne;++Re)Oe=ve[Re],0<ve[Re]&&(je[De[Oe]++]=Re);if(De[15]==1)return(ve=new E).g=0,ve.value=je[0],D(se,et,1,Ve,ve),Ve;var Xe,nt=-1,Ze=Ve-1,Dt=0,_t=1,Jt=1,Ct=1<<Ae;for(Re=0,Oe=1,Ne=2;Oe<=Ae;++Oe,Ne<<=1){if(_t+=Jt<<=1,0>(Jt-=Te[Oe]))return 0;for(;0<Te[Oe];--Te[Oe])(ve=new E).g=Oe,ve.value=je[Re++],D(se,et+Dt,Ne,Ct,ve),Dt=B(Dt,Oe)}for(Oe=Ae+1,Ne=2;15>=Oe;++Oe,Ne<<=1){if(_t+=Jt<<=1,0>(Jt-=Te[Oe]))return 0;for(;0<Te[Oe];--Te[Oe]){if(ve=new E,(Dt&Ze)!=nt){for(et+=Ct,Xe=1<<(nt=Oe)-Ae;15>nt&&!(0>=(Xe-=Te[nt]));)++nt,Xe<<=1;Ve+=Ct=1<<(Xe=nt-Ae),se[ce+(nt=Dt&Ze)].g=Xe+Ae,se[ce+nt].value=et-ce-nt}ve.g=Oe-Ae,ve.value=je[Re++],D(se,et+(Dt>>Ae),Ne,Ct,ve),Dt=B(Dt,Oe)}}return _t!=2*De[15]-1?0:Ve}(N,L,F,V,ne,ie)}function E(){this.value=this.g=0}function R(){this.value=this.g=0}function M(){this.G=s(5,E),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(mi,R)}function k(N,L,F,V){e(N!=null),e(L!=null),e(2147483648>V),N.Ca=254,N.I=0,N.b=-8,N.Ka=0,N.oa=L,N.pa=F,N.Jd=L,N.Yc=F+V,N.Zc=4<=V?F+V-4+1:F,he(N)}function O(N,L){for(var F=0;0<L--;)F|=q(N,128)<<L;return F}function Q(N,L){var F=O(N,L);return fe(N)?-F:F}function H(N,L,F,V){var ne,ie=0;for(e(N!=null),e(L!=null),e(4294967288>V),N.Sb=V,N.Ra=0,N.u=0,N.h=0,4<V&&(V=4),ne=0;ne<V;++ne)ie+=L[F+ne]<<8*ne;N.Ra=ie,N.bb=V,N.oa=L,N.pa=F}function W(N){for(;8<=N.u&&N.bb<N.Sb;)N.Ra>>>=8,N.Ra+=N.oa[N.pa+N.bb]<<om-8>>>0,++N.bb,N.u-=8;Y(N)&&(N.h=1,N.u=0)}function te(N,L){if(e(0<=L),!N.h&&L<=sm){var F=G(N)&im[L];return N.u+=L,W(N),F}return N.h=1,N.u=0}function ee(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(N){return N.Ra>>>(N.u&om-1)>>>0}function Y(N){return e(N.bb<=N.Sb),N.h||N.bb==N.Sb&&N.u>om}function Z(N,L){N.u=L,N.h=Y(N)}function de(N){N.u>=Sy&&(e(N.u>=Sy),W(N))}function he(N){e(N!=null&&N.oa!=null),N.pa<N.Zc?(N.I=(N.oa[N.pa++]|N.I<<8)>>>0,N.b+=8):(e(N!=null&&N.oa!=null),N.pa<N.Yc?(N.b+=8,N.I=N.oa[N.pa++]|N.I<<8):N.Ka?N.b=0:(N.I<<=8,N.b+=8,N.Ka=1))}function fe(N){return O(N,1)}function q(N,L){var F=N.Ca;0>N.b&&he(N);var V=N.b,ne=F*L>>>8,ie=(N.I>>>V>ne)+0;for(ie?(F-=ne,N.I-=ne+1<<V>>>0):F=ne+1,V=F,ne=0;256<=V;)ne+=8,V>>=8;return V=7^ne+_s[V],N.b-=V,N.Ca=(F<<V)-1,ie}function ge(N,L,F){N[L+0]=F>>24&255,N[L+1]=F>>16&255,N[L+2]=F>>8&255,N[L+3]=F>>0&255}function me(N,L){return N[L+0]<<0|N[L+1]<<8}function we(N,L){return me(N,L)|N[L+2]<<16}function Me(N,L){return me(N,L)|me(N,L+2)<<16}function z(N,L){var F=1<<L;return e(N!=null),e(0<L),N.X=i(F),N.X==null?0:(N.Mb=32-L,N.Xa=L,1)}function pe(N,L){e(N!=null),e(L!=null),e(N.Xa==L.Xa),n(L.X,0,N.X,0,1<<L.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function oe(N,L,F,V){e(F!=null),e(V!=null);var ne=F[0],ie=V[0];return ne==0&&(ne=(N*ie+L/2)/L),ie==0&&(ie=(L*ne+N/2)/N),0>=ne||0>=ie?0:(F[0]=ne,V[0]=ie,1)}function ae(N,L){return N+(1<<L)-1>>>L}function ue(N,L){return((4278255360&N)+(4278255360&L)>>>0&4278255360)+((16711935&N)+(16711935&L)>>>0&16711935)>>>0}function be(N,L){w[L]=function(F,V,ne,ie,se,ce,Ae){var ve;for(ve=0;ve<se;++ve){var Ne=w[N](ce[Ae+ve-1],ne,ie+ve);ce[Ae+ve]=ue(F[V+ve],Ne)}}}function _e(){this.ud=this.hd=this.jd=0}function ye(N,L){return((4278124286&(N^L))>>>1)+(N&L)>>>0}function Ee(N){return 0<=N&&256>N?N:0>N?0:255<N?255:void 0}function ze(N,L){return Ee(N+(N-L+.5>>1))}function Fe(N,L,F){return Math.abs(L-F)-Math.abs(N-F)}function Ge(N,L,F,V,ne,ie,se){for(V=ie[se-1],F=0;F<ne;++F)ie[se+F]=V=ue(N[L+F],V)}function at(N,L,F,V,ne){var ie;for(ie=0;ie<F;++ie){var se=N[L+ie],ce=se>>8&255,Ae=16711935&(Ae=(Ae=16711935&se)+((ce<<16)+ce));V[ne+ie]=(4278255360&se)+Ae>>>0}}function ut(N,L){L.jd=N>>0&255,L.hd=N>>8&255,L.ud=N>>16&255}function gt(N,L,F,V,ne,ie){var se;for(se=0;se<V;++se){var ce=L[F+se],Ae=ce>>>8,ve=ce,Ne=255&(Ne=(Ne=ce>>>16)+((N.jd<<24>>24)*(Ae<<24>>24)>>>5));ve=255&(ve=(ve=ve+((N.hd<<24>>24)*(Ae<<24>>24)>>>5))+((N.ud<<24>>24)*(Ne<<24>>24)>>>5)),ne[ie+se]=(4278255360&ce)+(Ne<<16)+ve}}function Le(N,L,F,V,ne){w[L]=function(ie,se,ce,Ae,ve,Ne,je,Oe,Re){for(Ae=je;Ae<Oe;++Ae)for(je=0;je<Re;++je)ve[Ne++]=ne(ce[V(ie[se++])])},w[N]=function(ie,se,ce,Ae,ve,Ne,je){var Oe=8>>ie.b,Re=ie.Ea,et=ie.K[0],Ve=ie.w;if(8>Oe)for(ie=(1<<ie.b)-1,Ve=(1<<Oe)-1;se<ce;++se){var Te,De=0;for(Te=0;Te<Re;++Te)Te&ie||(De=V(Ae[ve++])),Ne[je++]=ne(et[De&Ve]),De>>=Oe}else w["VP8LMapColor"+F](Ae,ve,et,Ve,Ne,je,se,ce,Re)}}function Qe(N,L,F,V,ne){for(F=L+F;L<F;){var ie=N[L++];V[ne++]=ie>>16&255,V[ne++]=ie>>8&255,V[ne++]=ie>>0&255}}function ht(N,L,F,V,ne){for(F=L+F;L<F;){var ie=N[L++];V[ne++]=ie>>16&255,V[ne++]=ie>>8&255,V[ne++]=ie>>0&255,V[ne++]=ie>>24&255}}function it(N,L,F,V,ne){for(F=L+F;L<F;){var ie=(se=N[L++])>>16&240|se>>12&15,se=se>>0&240|se>>28&15;V[ne++]=ie,V[ne++]=se}}function Vt(N,L,F,V,ne){for(F=L+F;L<F;){var ie=(se=N[L++])>>16&248|se>>13&7,se=se>>5&224|se>>3&31;V[ne++]=ie,V[ne++]=se}}function kt(N,L,F,V,ne){for(F=L+F;L<F;){var ie=N[L++];V[ne++]=ie>>0&255,V[ne++]=ie>>8&255,V[ne++]=ie>>16&255}}function Bt(N,L,F,V,ne,ie){if(ie==0)for(F=L+F;L<F;)ge(V,((ie=N[L++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),ne+=32;else n(V,ne,N,L,F)}function Sr(N,L){w[L][0]=w[N+"0"],w[L][1]=w[N+"1"],w[L][2]=w[N+"2"],w[L][3]=w[N+"3"],w[L][4]=w[N+"4"],w[L][5]=w[N+"5"],w[L][6]=w[N+"6"],w[L][7]=w[N+"7"],w[L][8]=w[N+"8"],w[L][9]=w[N+"9"],w[L][10]=w[N+"10"],w[L][11]=w[N+"11"],w[L][12]=w[N+"12"],w[L][13]=w[N+"13"],w[L][14]=w[N+"0"],w[L][15]=w[N+"0"]}function zt(N){return N==HT||N==QT||N==h2||N==zT}function qe(){this.eb=[],this.size=this.A=this.fb=0}function pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Nt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qe,this.f.kb=new pt,this.sd=null}function Kt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Je(N){return alert("todo:WebPSamplerProcessPlane"),N.T}function yt(N,L){var F=N.T,V=L.ba.f.RGBA,ne=V.eb,ie=V.fb+N.ka*V.A,se=Po[L.ba.S],ce=N.y,Ae=N.O,ve=N.f,Ne=N.N,je=N.ea,Oe=N.W,Re=L.cc,et=L.dc,Ve=L.Mc,Te=L.Nc,De=N.ka,Xe=N.ka+N.T,nt=N.U,Ze=nt+1>>1;for(De==0?se(ce,Ae,null,null,ve,Ne,je,Oe,ve,Ne,je,Oe,ne,ie,null,null,nt):(se(L.ec,L.fc,ce,Ae,Re,et,Ve,Te,ve,Ne,je,Oe,ne,ie-V.A,ne,ie,nt),++F);De+2<Xe;De+=2)Re=ve,et=Ne,Ve=je,Te=Oe,Ne+=N.Rc,Oe+=N.Rc,ie+=2*V.A,se(ce,(Ae+=2*N.fa)-N.fa,ce,Ae,Re,et,Ve,Te,ve,Ne,je,Oe,ne,ie-V.A,ne,ie,nt);return Ae+=N.fa,N.j+Xe<N.o?(n(L.ec,L.fc,ce,Ae,nt),n(L.cc,L.dc,ve,Ne,Ze),n(L.Mc,L.Nc,je,Oe,Ze),F--):1&Xe||se(ce,Ae,null,null,ve,Ne,je,Oe,ve,Ne,je,Oe,ne,ie+V.A,null,null,nt),F}function mr(N,L,F){var V=N.F,ne=[N.J];if(V!=null){var ie=N.U,se=L.ba.S,ce=se==u2||se==h2;L=L.ba.f.RGBA;var Ae=[0],ve=N.ka;Ae[0]=N.T,N.Kb&&(ve==0?--Ae[0]:(--ve,ne[0]-=N.width),N.j+N.ka+N.T==N.o&&(Ae[0]=N.o-N.j-ve));var Ne=L.eb;ve=L.fb+ve*L.A,N=Hn(V,ne[0],N.width,ie,Ae,Ne,ve+(ce?0:3),L.A),e(F==Ae),N&&zt(se)&&Ro(Ne,ve,ce,ie,Ae,L.A)}return 0}function dr(N){var L=N.ma,F=L.ba.S,V=11>F,ne=F==l2||F==c2||F==u2||F==UT||F==12||zt(F);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!by(L.Oa,N,ne?11:12))return 0;if(ne&&zt(F)&&rt(),N.da)alert("todo:use_scaling");else{if(V){if(L.Ib=Je,N.Kb){if(F=N.U+1>>1,L.memory=i(N.U+2*F),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+N.U,L.Mc=L.cc,L.Nc=L.dc+F,L.Ib=yt,rt()}}else alert("todo:EmitYUV");ne&&(L.Jb=mr,V&&ke())}if(V&&!j6){for(N=0;256>N;++N)Vce[N]=89858*(N-128)+A2>>d2,Wce[N]=-22014*(N-128)+A2,Kce[N]=-45773*(N-128),$ce[N]=113618*(N-128)+A2>>d2;for(N=Ey;N<$T;++N)L=76283*(N-16)+A2>>d2,qce[N-Ey]=on(L,255),Yce[N-Ey]=on(L+8>>4,15);j6=1}return 1}function an(N){var L=N.ma,F=N.U,V=N.T;return e(!(1&N.ka)),0>=F||0>=V?0:(F=L.Ib(N,L),L.Jb!=null&&L.Jb(N,L,F),L.Dc+=F,1)}function _r(N){N.ma.memory=null}function mt(N,L,F,V){return te(N,8)!=47?0:(L[0]=te(N,14)+1,F[0]=te(N,14)+1,V[0]=te(N,1),te(N,3)!=0?0:!N.h)}function Cn(N,L){if(4>N)return N+1;var F=N-2>>1;return(2+(1&N)<<F)+te(L,F)+1}function Pr(N,L){return 120<L?L-120:1<=(F=((F=Dce[L-1])>>4)*N+(8-(15&F)))?F:1;var F}function ar(N,L,F){var V=G(F),ne=N[L+=255&V].g-8;return 0<ne&&(Z(F,F.u+8),V=G(F),L+=N[L].value,L+=V&(1<<ne)-1),Z(F,F.u+N[L].g),N[L].value}function Dr(N,L,F){return F.g+=N.g,F.value+=N.value<<L>>>0,e(8>=F.g),N.g}function Nr(N,L,F){var V=N.xc;return e((L=V==0?0:N.vc[N.md*(F>>V)+(L>>V)])<N.Wb),N.Ya[L]}function sn(N,L,F,V){var ne=N.ab,ie=N.c*L,se=N.C;L=se+L;var ce=F,Ae=V;for(V=N.Ta,F=N.Ua;0<ne--;){var ve=N.gc[ne],Ne=se,je=L,Oe=ce,Re=Ae,et=(Ae=V,ce=F,ve.Ea);switch(e(Ne<je),e(je<=ve.nc),ve.hc){case 2:t2(Oe,Re,(je-Ne)*et,Ae,ce);break;case 0:var Ve=Ne,Te=je,De=Ae,Xe=ce,nt=(Ct=ve).Ea;Ve==0&&(jT(Oe,Re,null,null,1,De,Xe),Ge(Oe,Re+1,0,0,nt-1,De,Xe+1),Re+=nt,Xe+=nt,++Ve);for(var Ze=1<<Ct.b,Dt=Ze-1,_t=ae(nt,Ct.b),Jt=Ct.K,Ct=Ct.w+(Ve>>Ct.b)*_t;Ve<Te;){var Jr=Jt,fn=Ct,qr=1;for(_y(Oe,Re,De,Xe-nt,1,De,Xe);qr<nt;){var kr=(qr&~Dt)+Ze;kr>nt&&(kr=nt),(0,id[Jr[fn++]>>8&15])(Oe,Re+ +qr,De,Xe+qr-nt,kr-qr,De,Xe+qr),qr=kr}Re+=nt,Xe+=nt,++Ve&Dt||(Ct+=_t)}je!=ve.nc&&n(Ae,ce-et,Ae,ce+(je-Ne-1)*et,et);break;case 1:for(et=Oe,Te=Re,nt=(Oe=ve.Ea)-(Xe=Oe&~(De=(Re=1<<ve.b)-1)),Ve=ae(Oe,ve.b),Ze=ve.K,ve=ve.w+(Ne>>ve.b)*Ve;Ne<je;){for(Dt=Ze,_t=ve,Jt=new _e,Ct=Te+Xe,Jr=Te+Oe;Te<Ct;)ut(Dt[_t++],Jt),xf(Jt,et,Te,Re,Ae,ce),Te+=Re,ce+=Re;Te<Jr&&(ut(Dt[_t++],Jt),xf(Jt,et,Te,nt,Ae,ce),Te+=nt,ce+=nt),++Ne&De||(ve+=Ve)}break;case 3:if(Oe==Ae&&Re==ce&&0<ve.b){for(Te=Ae,Oe=et=ce+(je-Ne)*et-(Xe=(je-Ne)*ae(ve.Ea,ve.b)),Re=Ae,De=ce,Ve=[],Xe=(nt=Xe)-1;0<=Xe;--Xe)Ve[Xe]=Re[De+Xe];for(Xe=nt-1;0<=Xe;--Xe)Te[Oe+Xe]=Ve[Xe];Eo(ve,Ne,je,Ae,et,Ae,ce)}else Eo(ve,Ne,je,Oe,Re,Ae,ce)}ce=V,Ae=F}Ae!=F&&n(V,F,ce,Ae,ie)}function ri(N,L){var F=N.V,V=N.Ba+N.c*N.C,ne=L-N.C;if(e(L<=N.l.o),e(16>=ne),0<ne){var ie=N.l,se=N.Ta,ce=N.Ua,Ae=ie.width;if(sn(N,ne,F,V),ne=ce=[ce],e((F=N.C)<(V=L)),e(ie.v<ie.va),V>ie.o&&(V=ie.o),F<ie.j){var ve=ie.j-F;F=ie.j,ne[0]+=ve*Ae}if(F>=V?F=0:(ne[0]+=4*ie.v,ie.ka=F-ie.j,ie.U=ie.va-ie.v,ie.T=V-F,F=1),F){if(ce=ce[0],11>(F=N.ca).S){var Ne=F.f.RGBA,je=(V=F.S,ne=ie.U,ie=ie.T,ve=Ne.eb,Ne.A),Oe=ie;for(Ne=Ne.fb+N.Ma*Ne.A;0<Oe--;){var Re=se,et=ce,Ve=ne,Te=ve,De=Ne;switch(V){case o2:Cs(Re,et,Ve,Te,De);break;case l2:Xi(Re,et,Ve,Te,De);break;case HT:Xi(Re,et,Ve,Te,De),Ro(Te,De,0,Ve,1,0);break;case I6:Tu(Re,et,Ve,Te,De);break;case c2:Bt(Re,et,Ve,Te,De,1);break;case QT:Bt(Re,et,Ve,Te,De,1),Ro(Te,De,0,Ve,1,0);break;case u2:Bt(Re,et,Ve,Te,De,0);break;case h2:Bt(Re,et,Ve,Te,De,0),Ro(Te,De,1,Ve,1,0);break;case UT:sd(Re,et,Ve,Te,De);break;case zT:sd(Re,et,Ve,Te,De),Un(Te,De,Ve,1,0);break;case E6:Nu(Re,et,Ve,Te,De);break;default:e(0)}ce+=Ae,Ne+=je}N.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");e(N.Ma<=F.height)}}N.C=L,e(N.C<=N.i)}function Ea(N){var L;if(0<N.ua)return 0;for(L=0;L<N.Wb;++L){var F=N.Ya[L].G,V=N.Ya[L].H;if(0<F[1][V[1]+0].g||0<F[2][V[2]+0].g||0<F[3][V[3]+0].g)return 0}return 1}function Zr(N,L,F,V,ne,ie){if(N.Z!=0){var se=N.qd,ce=N.rd;for(e(ud[N.Z]!=null);L<F;++L)ud[N.Z](se,ce,V,ne,V,ne,ie),se=V,ce=ne,ne+=ie;N.qd=se,N.rd=ce}}function ia(N,L){var F=N.l.ma,V=F.Z==0||F.Z==1?N.l.j:N.C;if(V=N.C<V?V:N.C,e(L<=N.l.o),L>V){var ne=N.l.width,ie=F.ca,se=F.tb+ne*V,ce=N.V,Ae=N.Ba+N.c*V,ve=N.gc;e(N.ab==1),e(ve[0].hc==3),r2(ve[0],V,L,ce,Ae,ie,se),Zr(F,V,L,ie,se,ne)}N.C=N.Ma=L}function Yn(N,L,F,V,ne,ie,se){var ce=N.$/V,Ae=N.$%V,ve=N.m,Ne=N.s,je=F+N.$,Oe=je;ne=F+V*ne;var Re=F+V*ie,et=280+Ne.ua,Ve=N.Pb?ce:16777216,Te=0<Ne.ua?Ne.Wa:null,De=Ne.wc,Xe=je<Re?Nr(Ne,Ae,ce):null;e(N.C<ie),e(Re<=ne);var nt=!1;e:for(;;){for(;nt||je<Re;){var Ze=0;if(ce>=Ve){var Dt=je-F;e((Ve=N).Pb),Ve.wd=Ve.m,Ve.xd=Dt,0<Ve.s.ua&&pe(Ve.s.Wa,Ve.s.vb),Ve=ce+Rce}if(Ae&De||(Xe=Nr(Ne,Ae,ce)),e(Xe!=null),Xe.Qb&&(L[je]=Xe.qb,nt=!0),!nt)if(de(ve),Xe.jc){Ze=ve,Dt=L;var _t=je,Jt=Xe.pd[G(Ze)&mi-1];e(Xe.jc),256>Jt.g?(Z(Ze,Ze.u+Jt.g),Dt[_t]=Jt.value,Ze=0):(Z(Ze,Ze.u+Jt.g-256),e(256<=Jt.value),Ze=Jt.value),Ze==0&&(nt=!0)}else Ze=ar(Xe.G[0],Xe.H[0],ve);if(ve.h)break;if(nt||256>Ze){if(!nt)if(Xe.nd)L[je]=(Xe.qb|Ze<<8)>>>0;else{if(de(ve),nt=ar(Xe.G[1],Xe.H[1],ve),de(ve),Dt=ar(Xe.G[2],Xe.H[2],ve),_t=ar(Xe.G[3],Xe.H[3],ve),ve.h)break;L[je]=(_t<<24|nt<<16|Ze<<8|Dt)>>>0}if(nt=!1,++je,++Ae>=V&&(Ae=0,++ce,se!=null&&ce<=ie&&!(ce%16)&&se(N,ce),Te!=null))for(;Oe<je;)Ze=L[Oe++],Te.X[(506832829*Ze&4294967295)>>>Te.Mb]=Ze}else if(280>Ze){if(Ze=Cn(Ze-256,ve),Dt=ar(Xe.G[4],Xe.H[4],ve),de(ve),Dt=Pr(V,Dt=Cn(Dt,ve)),ve.h)break;if(je-F<Dt||ne-je<Ze)break e;for(_t=0;_t<Ze;++_t)L[je+_t]=L[je+_t-Dt];for(je+=Ze,Ae+=Ze;Ae>=V;)Ae-=V,++ce,se!=null&&ce<=ie&&!(ce%16)&&se(N,ce);if(e(je<=ne),Ae&De&&(Xe=Nr(Ne,Ae,ce)),Te!=null)for(;Oe<je;)Ze=L[Oe++],Te.X[(506832829*Ze&4294967295)>>>Te.Mb]=Ze}else{if(!(Ze<et))break e;for(nt=Ze-280,e(Te!=null);Oe<je;)Ze=L[Oe++],Te.X[(506832829*Ze&4294967295)>>>Te.Mb]=Ze;Ze=je,e(!(nt>>>(Dt=Te).Xa)),L[Ze]=Dt.X[nt],nt=!0}nt||e(ve.h==Y(ve))}if(N.Pb&&ve.h&&je<ne)e(N.m.h),N.a=5,N.m=N.wd,N.$=N.xd,0<N.s.ua&&pe(N.s.vb,N.s.Wa);else{if(ve.h)break e;se!=null&&se(N,ce>ie?ie:ce),N.a=0,N.$=je-F}return 1}return N.a=3,0}function fa(N){e(N!=null),N.vc=null,N.yc=null,N.Ya=null;var L=N.Wa;L!=null&&(L.X=null),N.vb=null,e(N!=null)}function Ln(){var N=new rm;return N==null?null:(N.a=0,N.xb=R6,Sr("Predictor","VP8LPredictors"),Sr("Predictor","VP8LPredictors_C"),Sr("PredictorAdd","VP8LPredictorsAdd"),Sr("PredictorAdd","VP8LPredictorsAdd_C"),t2=at,xf=gt,Cs=Qe,Xi=ht,sd=it,Nu=Vt,Tu=kt,w.VP8LMapColor32b=lm,w.VP8LMapColor8b=n2,N)}function ni(N,L,F,V,ne){var ie=1,se=[N],ce=[L],Ae=V.m,ve=V.s,Ne=null,je=0;e:for(;;){if(F)for(;ie&&te(Ae,1);){var Oe=se,Re=ce,et=V,Ve=1,Te=et.m,De=et.gc[et.ab],Xe=te(Te,2);if(et.Oc&1<<Xe)ie=0;else{switch(et.Oc|=1<<Xe,De.hc=Xe,De.Ea=Oe[0],De.nc=Re[0],De.K=[null],++et.ab,e(4>=et.ab),Xe){case 0:case 1:De.b=te(Te,3)+2,Ve=ni(ae(De.Ea,De.b),ae(De.nc,De.b),0,et,De.K),De.K=De.K[0];break;case 3:var nt,Ze=te(Te,8)+1,Dt=16<Ze?0:4<Ze?1:2<Ze?2:3;if(Oe[0]=ae(De.Ea,Dt),De.b=Dt,nt=Ve=ni(Ze,1,0,et,De.K)){var _t,Jt=Ze,Ct=De,Jr=1<<(8>>Ct.b),fn=i(Jr);if(fn==null)nt=0;else{var qr=Ct.K[0],kr=Ct.w;for(fn[0]=Ct.K[0][0],_t=1;_t<1*Jt;++_t)fn[_t]=ue(qr[kr+_t],fn[_t-1]);for(;_t<4*Jr;++_t)fn[_t]=0;Ct.K[0]=null,Ct.K[0]=fn,nt=1}}Ve=nt;break;case 2:break;default:e(0)}ie=Ve}}if(se=se[0],ce=ce[0],ie&&te(Ae,1)&&!(ie=1<=(je=te(Ae,4))&&11>=je)){V.a=3;break e}var Pn;if(Pn=ie)t:{var Tn,yr,Ma,Bs=V,Ra=se,Ns=ce,gn=je,Xs=F,Zs=Bs.m,ai=Bs.s,vi=[null],Ji=1,ko=0,yc=Mce[gn];r:for(;;){if(Xs&&te(Zs,1)){var ii=te(Zs,3)+2,Mu=ae(Ra,ii),Cf=ae(Ns,ii),Am=Mu*Cf;if(!ni(Mu,Cf,0,Bs,vi))break r;for(vi=vi[0],ai.xc=ii,Tn=0;Tn<Am;++Tn){var hd=vi[Tn]>>8&65535;vi[Tn]=hd,hd>=Ji&&(Ji=hd+1)}}if(Zs.h)break r;for(yr=0;5>yr;++yr){var oa=D6[yr];!yr&&0<gn&&(oa+=1<<gn),ko<oa&&(ko=oa)}var KT=s(Ji*yc,E),H6=Ji,Q6=s(H6,M);if(Q6==null)var g2=null;else e(65536>=H6),g2=Q6;var Dy=i(ko);if(g2==null||Dy==null||KT==null){Bs.a=1;break r}var p2=KT;for(Tn=Ma=0;Tn<Ji;++Tn){var Il=g2[Tn],fm=Il.G,gm=Il.H,z6=0,m2=1,G6=0;for(yr=0;5>yr;++yr){oa=D6[yr],fm[yr]=p2,gm[yr]=Ma,!yr&&0<gn&&(oa+=1<<gn);a:{var v2,WT=oa,y2=Bs,My=Dy,Jce=p2,eue=Ma,qT=0,dd=y2.m,tue=te(dd,1);if(a(My,0,0,WT),tue){var rue=te(dd,1)+1,nue=te(dd,1),V6=te(dd,nue==0?1:8);My[V6]=1,rue==2&&(My[V6=te(dd,8)]=1);var x2=1}else{var $6=i(19),K6=te(dd,4)+4;if(19<K6){y2.a=3;var b2=0;break a}for(v2=0;v2<K6;++v2)$6[Ece[v2]]=te(dd,3);var YT=void 0,Ry=void 0,W6=y2,aue=$6,w2=WT,q6=My,XT=0,Ad=W6.m,Y6=8,X6=s(128,E);n:for(;T(X6,0,7,aue,19);){if(te(Ad,1)){var iue=2+2*te(Ad,3);if((YT=2+te(Ad,iue))>w2)break n}else YT=w2;for(Ry=0;Ry<w2&&YT--;){de(Ad);var Z6=X6[0+(127&G(Ad))];Z(Ad,Ad.u+Z6.g);var pm=Z6.value;if(16>pm)q6[Ry++]=pm,pm!=0&&(Y6=pm);else{var sue=pm==16,J6=pm-16,oue=Tce[J6],eO=te(Ad,Nce[J6])+oue;if(Ry+eO>w2)break n;for(var lue=sue?Y6:0;0<eO--;)q6[Ry++]=lue}}XT=1;break n}XT||(W6.a=3),x2=XT}(x2=x2&&!dd.h)&&(qT=T(Jce,eue,8,My,WT)),x2&&qT!=0?b2=qT:(y2.a=3,b2=0)}if(b2==0)break r;if(m2&&Ice[yr]==1&&(m2=p2[Ma].g==0),z6+=p2[Ma].g,Ma+=b2,3>=yr){var Ly,ZT=Dy[0];for(Ly=1;Ly<oa;++Ly)Dy[Ly]>ZT&&(ZT=Dy[Ly]);G6+=ZT}}if(Il.nd=m2,Il.Qb=0,m2&&(Il.qb=(fm[3][gm[3]+0].value<<24|fm[1][gm[1]+0].value<<16|fm[2][gm[2]+0].value)>>>0,z6==0&&256>fm[0][gm[0]+0].value&&(Il.Qb=1,Il.qb+=fm[0][gm[0]+0].value<<8)),Il.jc=!Il.Qb&&6>G6,Il.jc){var S2,Ru=Il;for(S2=0;S2<mi;++S2){var fd=S2,gd=Ru.pd[fd],_2=Ru.G[0][Ru.H[0]+fd];256<=_2.value?(gd.g=_2.g+256,gd.value=_2.value):(gd.g=0,gd.value=0,fd>>=Dr(_2,8,gd),fd>>=Dr(Ru.G[1][Ru.H[1]+fd],16,gd),fd>>=Dr(Ru.G[2][Ru.H[2]+fd],0,gd),Dr(Ru.G[3][Ru.H[3]+fd],24,gd))}}}ai.vc=vi,ai.Wb=Ji,ai.Ya=g2,ai.yc=KT,Pn=1;break t}Pn=0}if(!(ie=Pn)){V.a=3;break e}if(0<je){if(ve.ua=1<<je,!z(ve.Wa,je)){V.a=1,ie=0;break e}}else ve.ua=0;var JT=V,tO=se,cue=ce,eI=JT.s,tI=eI.xc;if(JT.c=tO,JT.i=cue,eI.md=ae(tO,tI),eI.wc=tI==0?-1:(1<<tI)-1,F){V.xb=Uce;break e}if((Ne=i(se*ce))==null){V.a=1,ie=0;break e}ie=(ie=Yn(V,Ne,0,se,ce,ce,null))&&!Ae.h;break e}return ie?(ne!=null?ne[0]=Ne:(e(Ne==null),e(F)),V.$=0,F||fa(ve)):fa(ve),ie}function Mt(N,L){var F=N.c*N.i,V=F+L+16*L;return e(N.c<=L),N.V=i(V),N.V==null?(N.Ta=null,N.Ua=0,N.a=1,0):(N.Ta=N.V,N.Ua=N.Ba+F+L,1)}function Be(N,L){var F=N.C,V=L-F,ne=N.V,ie=N.Ba+N.c*F;for(e(L<=N.l.o);0<V;){var se=16<V?16:V,ce=N.l.ma,Ae=N.l.width,ve=Ae*se,Ne=ce.ca,je=ce.tb+Ae*F,Oe=N.Ta,Re=N.Ua;sn(N,se,ne,ie),ma(Oe,Re,Ne,je,ve),Zr(ce,F,F+se,Ne,je,Ae),V-=se,ne+=se*N.c,F+=se}e(F==L),N.C=N.Ma=L}function lt(){this.ub=this.yd=this.td=this.Rb=0}function Et(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function zr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ta(){this.Yb=function(){var N=[];return function L(F,V,ne){for(var ie=ne[V],se=0;se<ie&&(F.push(ne.length>V+1?[]:0),!(ne.length<V+1));se++)L(F[se],V+1,ne)}(N,0,[3,11]),N}()}function Bn(){this.jb=i(3),this.Wc=o([4,8],ta),this.Xc=o([4,17],ta)}function ga(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Da(){this.ld=this.La=this.dd=this.tc=0}function Ti(){this.Na=this.la=0}function qi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function On(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qh(){this.uc=this.M=this.Nb=0,this.wa=Array(new Da),this.Y=0,this.ya=Array(new On),this.aa=0,this.l=new vu}function dc(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Wp(){this.cb=this.a=0,this.sc="",this.m=new ee,this.Od=new lt,this.Kc=new Et,this.ed=new ga,this.Qa=new zr,this.Ic=this.$c=this.Aa=0,this.D=new Qh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,ee),this.ia=0,this.pb=s(4,qi),this.Pa=new Bn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new dc),this.Hd=0,this.rb=Array(new Ti),this.sb=0,this.wa=Array(new Da),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new On),this.L=this.aa=0,this.gd=o([4,2],Da),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function vu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function of(){var N=new Wp;return N!=null&&(N.a=0,N.sc="OK",N.cb=0,N.Xb=0,Iy||(Iy=qp)),N}function Vn(N,L,F){return N.a==0&&(N.a=L,N.sc=F,N.cb=0),0}function lf(N,L,F){return 3<=F&&N[L+0]==157&&N[L+1]==1&&N[L+2]==42}function cf(N,L){if(N==null)return 0;if(N.a=0,N.sc="OK",L==null)return Vn(N,2,"null VP8Io passed to VP8GetHeaders()");var F=L.data,V=L.w,ne=L.ha;if(4>ne)return Vn(N,7,"Truncated header.");var ie=F[V+0]|F[V+1]<<8|F[V+2]<<16,se=N.Od;if(se.Rb=!(1&ie),se.td=ie>>1&7,se.yd=ie>>4&1,se.ub=ie>>5,3<se.td)return Vn(N,3,"Incorrect keyframe parameters.");if(!se.yd)return Vn(N,4,"Frame not displayable.");V+=3,ne-=3;var ce=N.Kc;if(se.Rb){if(7>ne)return Vn(N,7,"cannot parse picture header");if(!lf(F,V,ne))return Vn(N,3,"Bad code word");ce.c=16383&(F[V+4]<<8|F[V+3]),ce.Td=F[V+4]>>6,ce.i=16383&(F[V+6]<<8|F[V+5]),ce.Ud=F[V+6]>>6,V+=7,ne-=7,N.za=ce.c+15>>4,N.Ub=ce.i+15>>4,L.width=ce.c,L.height=ce.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,a((ie=N.Pa).jb,0,255,ie.jb.length),e((ie=N.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,a(ie.Zb,0,0,ie.Zb.length),a(ie.Lb,0,0,ie.Lb)}if(se.ub>ne)return Vn(N,7,"bad partition length");k(ie=N.m,F,V,se.ub),V+=se.ub,ne-=se.ub,se.Rb&&(ce.Ld=fe(ie),ce.Kd=fe(ie)),ce=N.Qa;var Ae,ve=N.Pa;if(e(ie!=null),e(ce!=null),ce.Cb=fe(ie),ce.Cb){if(ce.Bb=fe(ie),fe(ie)){for(ce.Fb=fe(ie),Ae=0;4>Ae;++Ae)ce.Zb[Ae]=fe(ie)?Q(ie,7):0;for(Ae=0;4>Ae;++Ae)ce.Lb[Ae]=fe(ie)?Q(ie,6):0}if(ce.Bb)for(Ae=0;3>Ae;++Ae)ve.jb[Ae]=fe(ie)?O(ie,8):255}else ce.Bb=0;if(ie.Ka)return Vn(N,3,"cannot parse segment header");if((ce=N.ed).zd=fe(ie),ce.Tb=O(ie,6),ce.wb=O(ie,3),ce.Pc=fe(ie),ce.Pc&&fe(ie)){for(ve=0;4>ve;++ve)fe(ie)&&(ce.vd[ve]=Q(ie,6));for(ve=0;4>ve;++ve)fe(ie)&&(ce.od[ve]=Q(ie,6))}if(N.L=ce.Tb==0?0:ce.zd?1:2,ie.Ka)return Vn(N,3,"cannot parse filter header");var Ne=ne;if(ne=Ae=V,V=Ae+Ne,ce=Ne,N.Xb=(1<<O(N.m,2))-1,Ne<3*(ve=N.Xb))F=7;else{for(Ae+=3*ve,ce-=3*ve,Ne=0;Ne<ve;++Ne){var je=F[ne+0]|F[ne+1]<<8|F[ne+2]<<16;je>ce&&(je=ce),k(N.Jc[+Ne],F,Ae,je),Ae+=je,ce-=je,ne+=3}k(N.Jc[+ve],F,Ae,ce),F=Ae<V?0:5}if(F!=0)return Vn(N,F,"cannot parse partitions");for(F=O(Ae=N.m,7),ne=fe(Ae)?Q(Ae,4):0,V=fe(Ae)?Q(Ae,4):0,ce=fe(Ae)?Q(Ae,4):0,ve=fe(Ae)?Q(Ae,4):0,Ae=fe(Ae)?Q(Ae,4):0,Ne=N.Qa,je=0;4>je;++je){if(Ne.Cb){var Oe=Ne.Zb[je];Ne.Fb||(Oe+=F)}else{if(0<je){N.pb[je]=N.pb[0];continue}Oe=F}var Re=N.pb[je];Re.Sc[0]=GT[on(Oe+ne,127)],Re.Sc[1]=VT[on(Oe+0,127)],Re.Eb[0]=2*GT[on(Oe+V,127)],Re.Eb[1]=101581*VT[on(Oe+ce,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=GT[on(Oe+ve,117)],Re.Qc[1]=VT[on(Oe+Ae,127)],Re.lc=Oe+Ae}if(!se.Rb)return Vn(N,4,"Not a key frame.");for(fe(ie),se=N.Pa,F=0;4>F;++F){for(ne=0;8>ne;++ne)for(V=0;3>V;++V)for(ce=0;11>ce;++ce)ve=q(ie,jce[F][ne][V][ce])?O(ie,8):kce[F][ne][V][ce],se.Wc[F][ne].Yb[V][ce]=ve;for(ne=0;17>ne;++ne)se.Xc[F][ne]=se.Wc[F][Oce[ne]]}return N.kc=fe(ie),N.kc&&(N.Bd=O(ie,8)),N.cb=1}function qp(N,L,F,V,ne,ie,se){var ce=L[ne].Yb[F];for(F=0;16>ne;++ne){if(!q(N,ce[F+0]))return ne;for(;!q(N,ce[F+1]);)if(ce=L[++ne].Yb[0],F=0,ne==16)return 16;var Ae=L[ne+1].Yb;if(q(N,ce[F+2])){var ve=N,Ne=0;if(q(ve,(Oe=ce)[(je=F)+3]))if(q(ve,Oe[je+6])){for(ce=0,je=2*(Ne=q(ve,Oe[je+8]))+(Oe=q(ve,Oe[je+9+Ne])),Ne=0,Oe=Lce[je];Oe[ce];++ce)Ne+=Ne+q(ve,Oe[ce]);Ne+=3+(8<<je)}else q(ve,Oe[je+7])?(Ne=7+2*q(ve,165),Ne+=q(ve,145)):Ne=5+q(ve,159);else Ne=q(ve,Oe[je+4])?3+q(ve,Oe[je+5]):2;ce=Ae[2]}else Ne=1,ce=Ae[1];Ae=se+Pce[ne],0>(ve=N).b&&he(ve);var je,Oe=ve.b,Re=(je=ve.Ca>>1)-(ve.I>>Oe)>>31;--ve.b,ve.Ca+=Re,ve.Ca|=1,ve.I-=(je+1&Re)<<Oe,ie[Ae]=((Ne^Re)-Re)*V[(0<ne)+0]}return 16}function uf(N){var L=N.rb[N.sb-1];L.la=0,L.Na=0,a(N.zc,0,0,N.zc.length),N.ja=0}function Yp(N,L){if(N==null)return 0;if(L==null)return Vn(N,2,"NULL VP8Io parameter in VP8Decode().");if(!N.cb&&!cf(N,L))return 0;if(e(N.cb),L.ac==null||L.ac(L)){L.ob&&(N.L=0);var F=f2[N.L];if(N.L==2?(N.yb=0,N.zb=0):(N.yb=L.v-F>>4,N.zb=L.j-F>>4,0>N.yb&&(N.yb=0),0>N.zb&&(N.zb=0)),N.Va=L.o+15+F>>4,N.Hb=L.va+15+F>>4,N.Hb>N.za&&(N.Hb=N.za),N.Va>N.Ub&&(N.Va=N.Ub),0<N.L){var V=N.ed;for(F=0;4>F;++F){var ne;if(N.Qa.Cb){var ie=N.Qa.Lb[F];N.Qa.Fb||(ie+=V.Tb)}else ie=V.Tb;for(ne=0;1>=ne;++ne){var se=N.gd[F][ne],ce=ie;if(V.Pc&&(ce+=V.vd[0],ne&&(ce+=V.od[0])),0<(ce=0>ce?0:63<ce?63:ce)){var Ae=ce;0<V.wb&&(Ae=4<V.wb?Ae>>2:Ae>>1)>9-V.wb&&(Ae=9-V.wb),1>Ae&&(Ae=1),se.dd=Ae,se.tc=2*ce+Ae,se.ld=40<=ce?2:15<=ce?1:0}else se.tc=0;se.La=ne}}}F=0}else Vn(N,6,"Frame setup failed"),F=N.a;if(F=F==0){if(F){N.$c=0,0<N.Aa||(N.Ic=Zce);e:{F=N.Ic,V=4*(Ae=N.za);var ve=32*Ae,Ne=Ae+1,je=0<N.L?Ae*(0<N.Aa?2:1):0,Oe=(N.Aa==2?2:1)*Ae;if((se=V+832+(ne=3*(16*F+f2[N.L])/2*ve)+(ie=N.Fa!=null&&0<N.Fa.length?N.Kc.c*N.Kc.i:0))!=se)F=0;else{if(se>N.Vb){if(N.Vb=0,N.Ec=i(se),N.Fc=0,N.Ec==null){F=Vn(N,1,"no memory during frame initialization.");break e}N.Vb=se}se=N.Ec,ce=N.Fc,N.Ac=se,N.Bc=ce,ce+=V,N.Gd=s(ve,dc),N.Hd=0,N.rb=s(Ne+1,Ti),N.sb=1,N.wa=je?s(je,Da):null,N.Y=0,N.D.Nb=0,N.D.wa=N.wa,N.D.Y=N.Y,0<N.Aa&&(N.D.Y+=Ae),e(!0),N.oc=se,N.pc=ce,ce+=832,N.ya=s(Oe,On),N.aa=0,N.D.ya=N.ya,N.D.aa=N.aa,N.Aa==2&&(N.D.aa+=Ae),N.R=16*Ae,N.B=8*Ae,Ae=(ve=f2[N.L])*N.R,ve=ve/2*N.B,N.sa=se,N.ta=ce+Ae,N.qa=N.sa,N.ra=N.ta+16*F*N.R+ve,N.Ha=N.qa,N.Ia=N.ra+8*F*N.B+ve,N.$c=0,ce+=ne,N.mb=ie?se:null,N.nb=ie?ce:null,e(ce+ie<=N.Fc+N.Vb),uf(N),a(N.Ac,N.Bc,0,V),F=1}}if(F){if(L.ka=0,L.y=N.sa,L.O=N.ta,L.f=N.qa,L.N=N.ra,L.ea=N.Ha,L.Vd=N.Ia,L.fa=N.R,L.Rc=N.B,L.F=null,L.J=0,!i2){for(F=-255;255>=F;++F)Ga[255+F]=0>F?-F:F;for(F=-1020;1020>=F;++F)Eu[1020+F]=-128>F?-128:127<F?127:F;for(F=-112;112>=F;++F)Ty[112+F]=-16>F?-16:15<F?15:F;for(F=-255;510>=F;++F)dm[255+F]=0>F?0:255<F?255:F;i2=1}cm=bu,Iu=Gh,Cy=hf,Zi=dn,Do=xu,pa=yu,um=Xh,a2=Bl,By=Jh,bf=yf,wf=Zh,od=Su,Sf=ed,hm=pc,_f=wu,ld=qs,Ny=za,Mo=tm,Tl[0]=Io,Tl[1]=vy,Tl[2]=fc,Tl[3]=xy,Tl[4]=Jp,Tl[5]=Kh,Tl[6]=Ks,Tl[7]=Af,Tl[8]=qh,Tl[9]=Wh,cd[0]=Ac,cd[1]=yy,cd[2]=Sl,cd[3]=Vh,cd[4]=$n,cd[5]=Zp,cd[6]=df,Du[0]=Cl,Du[1]=Xp,Du[2]=em,Du[3]=_l,Du[4]=An,Du[5]=ff,Du[6]=gf,F=1}else F=0}F&&(F=function(Re,et){for(Re.M=0;Re.M<Re.Va;++Re.M){var Ve,Te=Re.Jc[Re.M&Re.Xb],De=Re.m,Xe=Re;for(Ve=0;Ve<Xe.za;++Ve){var nt=De,Ze=Xe,Dt=Ze.Ac,_t=Ze.Bc+4*Ve,Jt=Ze.zc,Ct=Ze.ya[Ze.aa+Ve];if(Ze.Qa.Bb?Ct.$b=q(nt,Ze.Pa.jb[0])?2+q(nt,Ze.Pa.jb[2]):q(nt,Ze.Pa.jb[1]):Ct.$b=0,Ze.kc&&(Ct.Ad=q(nt,Ze.Bd)),Ct.Za=!q(nt,145)+0,Ct.Za){var Jr=Ct.Ob,fn=0;for(Ze=0;4>Ze;++Ze){var qr,kr=Jt[0+Ze];for(qr=0;4>qr;++qr){kr=Fce[Dt[_t+qr]][kr];for(var Pn=M6[q(nt,kr[0])];0<Pn;)Pn=M6[2*Pn+q(nt,kr[Pn])];kr=-Pn,Dt[_t+qr]=kr}n(Jr,fn,Dt,_t,4),fn+=4,Jt[0+Ze]=kr}}else kr=q(nt,156)?q(nt,128)?1:3:q(nt,163)?2:0,Ct.Ob[0]=kr,a(Dt,_t,kr,4),a(Jt,0,kr,4);Ct.Dd=q(nt,142)?q(nt,114)?q(nt,183)?1:3:2:0}if(Xe.m.Ka)return Vn(Re,7,"Premature end-of-partition0 encountered.");for(;Re.ja<Re.za;++Re.ja){if(Xe=Te,nt=(De=Re).rb[De.sb-1],Dt=De.rb[De.sb+De.ja],Ve=De.ya[De.aa+De.ja],_t=De.kc?Ve.Ad:0)nt.la=Dt.la=0,Ve.Za||(nt.Na=Dt.Na=0),Ve.Hc=0,Ve.Gc=0,Ve.ia=0;else{var Tn,yr;if(nt=Dt,Dt=Xe,_t=De.Pa.Xc,Jt=De.ya[De.aa+De.ja],Ct=De.pb[Jt.$b],Ze=Jt.ad,Jr=0,fn=De.rb[De.sb-1],kr=qr=0,a(Ze,Jr,0,384),Jt.Za)var Ma=0,Bs=_t[3];else{Pn=i(16);var Ra=nt.Na+fn.Na;if(Ra=Iy(Dt,_t[1],Ra,Ct.Eb,0,Pn,0),nt.Na=fn.Na=(0<Ra)+0,1<Ra)cm(Pn,0,Ze,Jr);else{var Ns=Pn[0]+3>>3;for(Pn=0;256>Pn;Pn+=16)Ze[Jr+Pn]=Ns}Ma=1,Bs=_t[0]}var gn=15&nt.la,Xs=15&fn.la;for(Pn=0;4>Pn;++Pn){var Zs=1&Xs;for(Ns=yr=0;4>Ns;++Ns)gn=gn>>1|(Zs=(Ra=Iy(Dt,Bs,Ra=Zs+(1&gn),Ct.Sc,Ma,Ze,Jr))>Ma)<<7,yr=yr<<2|(3<Ra?3:1<Ra?2:Ze[Jr+0]!=0),Jr+=16;gn>>=4,Xs=Xs>>1|Zs<<7,qr=(qr<<8|yr)>>>0}for(Bs=gn,Ma=Xs>>4,Tn=0;4>Tn;Tn+=2){for(yr=0,gn=nt.la>>4+Tn,Xs=fn.la>>4+Tn,Pn=0;2>Pn;++Pn){for(Zs=1&Xs,Ns=0;2>Ns;++Ns)Ra=Zs+(1&gn),gn=gn>>1|(Zs=0<(Ra=Iy(Dt,_t[2],Ra,Ct.Qc,0,Ze,Jr)))<<3,yr=yr<<2|(3<Ra?3:1<Ra?2:Ze[Jr+0]!=0),Jr+=16;gn>>=2,Xs=Xs>>1|Zs<<5}kr|=yr<<4*Tn,Bs|=gn<<4<<Tn,Ma|=(240&Xs)<<Tn}nt.la=Bs,fn.la=Ma,Jt.Hc=qr,Jt.Gc=kr,Jt.ia=43690&kr?0:Ct.ia,_t=!(qr|kr)}if(0<De.L&&(De.wa[De.Y+De.ja]=De.gd[Ve.$b][Ve.Za],De.wa[De.Y+De.ja].La|=!_t),Xe.Ka)return Vn(Re,7,"Premature end-of-file encountered.")}if(uf(Re),De=et,Xe=1,Ve=(Te=Re).D,nt=0<Te.L&&Te.M>=Te.zb&&Te.M<=Te.Va,Te.Aa==0)e:{if(Ve.M=Te.M,Ve.uc=nt,Bu(Te,Ve),Xe=1,Ve=(yr=Te.D).Nb,nt=(kr=f2[Te.L])*Te.R,Dt=kr/2*Te.B,Pn=16*Ve*Te.R,Ns=8*Ve*Te.B,_t=Te.sa,Jt=Te.ta-nt+Pn,Ct=Te.qa,Ze=Te.ra-Dt+Ns,Jr=Te.Ha,fn=Te.Ia-Dt+Ns,Xs=(gn=yr.M)==0,qr=gn>=Te.Va-1,Te.Aa==2&&Bu(Te,yr),yr.uc)for(Zs=(Ra=Te).D.M,e(Ra.D.uc),yr=Ra.yb;yr<Ra.Hb;++yr){Ma=yr,Bs=Zs;var ai=(vi=(oa=Ra).D).Nb;Tn=oa.R;var vi=vi.wa[vi.Y+Ma],Ji=oa.sa,ko=oa.ta+16*ai*Tn+16*Ma,yc=vi.dd,ii=vi.tc;if(ii!=0)if(e(3<=ii),oa.L==1)0<Ma&&ld(Ji,ko,Tn,ii+4),vi.La&&Mo(Ji,ko,Tn,ii),0<Bs&&_f(Ji,ko,Tn,ii+4),vi.La&&Ny(Ji,ko,Tn,ii);else{var Mu=oa.B,Cf=oa.qa,Am=oa.ra+8*ai*Mu+8*Ma,hd=oa.Ha,oa=oa.Ia+8*ai*Mu+8*Ma;ai=vi.ld,0<Ma&&(a2(Ji,ko,Tn,ii+4,yc,ai),bf(Cf,Am,hd,oa,Mu,ii+4,yc,ai)),vi.La&&(od(Ji,ko,Tn,ii,yc,ai),hm(Cf,Am,hd,oa,Mu,ii,yc,ai)),0<Bs&&(um(Ji,ko,Tn,ii+4,yc,ai),By(Cf,Am,hd,oa,Mu,ii+4,yc,ai)),vi.La&&(wf(Ji,ko,Tn,ii,yc,ai),Sf(Cf,Am,hd,oa,Mu,ii,yc,ai))}}if(Te.ia&&alert("todo:DitherRow"),De.put!=null){if(yr=16*gn,gn=16*(gn+1),Xs?(De.y=Te.sa,De.O=Te.ta+Pn,De.f=Te.qa,De.N=Te.ra+Ns,De.ea=Te.Ha,De.W=Te.Ia+Ns):(yr-=kr,De.y=_t,De.O=Jt,De.f=Ct,De.N=Ze,De.ea=Jr,De.W=fn),qr||(gn-=kr),gn>De.o&&(gn=De.o),De.F=null,De.J=null,Te.Fa!=null&&0<Te.Fa.length&&yr<gn&&(De.J=ad(Te,De,yr,gn-yr),De.F=Te.mb,De.F==null&&De.F.length==0)){Xe=Vn(Te,3,"Could not decode alpha data.");break e}yr<De.j&&(kr=De.j-yr,yr=De.j,e(!(1&kr)),De.O+=Te.R*kr,De.N+=Te.B*(kr>>1),De.W+=Te.B*(kr>>1),De.F!=null&&(De.J+=De.width*kr)),yr<gn&&(De.O+=De.v,De.N+=De.v>>1,De.W+=De.v>>1,De.F!=null&&(De.J+=De.v),De.ka=yr-De.j,De.U=De.va-De.v,De.T=gn-yr,Xe=De.put(De))}Ve+1!=Te.Ic||qr||(n(Te.sa,Te.ta-nt,_t,Jt+16*Te.R,nt),n(Te.qa,Te.ra-Dt,Ct,Ze+8*Te.B,Dt),n(Te.Ha,Te.Ia-Dt,Jr,fn+8*Te.B,Dt))}if(!Xe)return Vn(Re,6,"Output aborted.")}return 1}(N,L)),L.bc!=null&&L.bc(L),F&=1}return F?(N.cb=0,F):0}function Ss(N,L,F,V,ne){ne=N[L+F+32*V]+(ne>>3),N[L+F+32*V]=-256&ne?0>ne?0:255:ne}function zh(N,L,F,V,ne,ie){Ss(N,L,0,F,V+ne),Ss(N,L,1,F,V+ie),Ss(N,L,2,F,V-ie),Ss(N,L,3,F,V-ne)}function sa(N){return(20091*N>>16)+N}function Yi(N,L,F,V){var ne,ie=0,se=i(16);for(ne=0;4>ne;++ne){var ce=N[L+0]+N[L+8],Ae=N[L+0]-N[L+8],ve=(35468*N[L+4]>>16)-sa(N[L+12]),Ne=sa(N[L+4])+(35468*N[L+12]>>16);se[ie+0]=ce+Ne,se[ie+1]=Ae+ve,se[ie+2]=Ae-ve,se[ie+3]=ce-Ne,ie+=4,L++}for(ne=ie=0;4>ne;++ne)ce=(N=se[ie+0]+4)+se[ie+8],Ae=N-se[ie+8],ve=(35468*se[ie+4]>>16)-sa(se[ie+12]),Ss(F,V,0,0,ce+(Ne=sa(se[ie+4])+(35468*se[ie+12]>>16))),Ss(F,V,1,0,Ae+ve),Ss(F,V,2,0,Ae-ve),Ss(F,V,3,0,ce-Ne),ie++,V+=32}function yu(N,L,F,V){var ne=N[L+0]+4,ie=35468*N[L+4]>>16,se=sa(N[L+4]),ce=35468*N[L+1]>>16;zh(F,V,0,ne+se,N=sa(N[L+1]),ce),zh(F,V,1,ne+ie,N,ce),zh(F,V,2,ne-ie,N,ce),zh(F,V,3,ne-se,N,ce)}function Gh(N,L,F,V,ne){Yi(N,L,F,V),ne&&Yi(N,L+16,F,V+4)}function hf(N,L,F,V){Iu(N,L+0,F,V,1),Iu(N,L+32,F,V+128,1)}function dn(N,L,F,V){var ne;for(N=N[L+0]+4,ne=0;4>ne;++ne)for(L=0;4>L;++L)Ss(F,V,L,ne,N)}function xu(N,L,F,V){N[L+0]&&Zi(N,L+0,F,V),N[L+16]&&Zi(N,L+16,F,V+4),N[L+32]&&Zi(N,L+32,F,V+128),N[L+48]&&Zi(N,L+48,F,V+128+4)}function bu(N,L,F,V){var ne,ie=i(16);for(ne=0;4>ne;++ne){var se=N[L+0+ne]+N[L+12+ne],ce=N[L+4+ne]+N[L+8+ne],Ae=N[L+4+ne]-N[L+8+ne],ve=N[L+0+ne]-N[L+12+ne];ie[0+ne]=se+ce,ie[8+ne]=se-ce,ie[4+ne]=ve+Ae,ie[12+ne]=ve-Ae}for(ne=0;4>ne;++ne)se=(N=ie[0+4*ne]+3)+ie[3+4*ne],ce=ie[1+4*ne]+ie[2+4*ne],Ae=ie[1+4*ne]-ie[2+4*ne],ve=N-ie[3+4*ne],F[V+0]=se+ce>>3,F[V+16]=ve+Ae>>3,F[V+32]=se-ce>>3,F[V+48]=ve-Ae>>3,V+=64}function wl(N,L,F){var V,ne=L-32,ie=Ys,se=255-N[ne-1];for(V=0;V<F;++V){var ce,Ae=ie,ve=se+N[L-1];for(ce=0;ce<F;++ce)N[L+ce]=Ae[ve+N[ne+ce]];L+=32}}function vy(N,L){wl(N,L,4)}function Xp(N,L){wl(N,L,8)}function yy(N,L){wl(N,L,16)}function Sl(N,L){var F;for(F=0;16>F;++F)n(N,L+32*F,N,L-32,16)}function Vh(N,L){var F;for(F=16;0<F;--F)a(N,L,N[L-1],16),L+=32}function $h(N,L,F){var V;for(V=0;16>V;++V)a(L,F+32*V,N,16)}function Ac(N,L){var F,V=16;for(F=0;16>F;++F)V+=N[L-1+32*F]+N[L+F-32];$h(V>>5,N,L)}function $n(N,L){var F,V=8;for(F=0;16>F;++F)V+=N[L-1+32*F];$h(V>>4,N,L)}function Zp(N,L){var F,V=8;for(F=0;16>F;++F)V+=N[L+F-32];$h(V>>4,N,L)}function df(N,L){$h(128,N,L)}function or(N,L,F){return N+2*L+F+2>>2}function fc(N,L){var F,V=L-32;for(V=new Uint8Array([or(N[V-1],N[V+0],N[V+1]),or(N[V+0],N[V+1],N[V+2]),or(N[V+1],N[V+2],N[V+3]),or(N[V+2],N[V+3],N[V+4])]),F=0;4>F;++F)n(N,L+32*F,V,0,V.length)}function xy(N,L){var F=N[L-1],V=N[L-1+32],ne=N[L-1+64],ie=N[L-1+96];ge(N,L+0,16843009*or(N[L-1-32],F,V)),ge(N,L+32,16843009*or(F,V,ne)),ge(N,L+64,16843009*or(V,ne,ie)),ge(N,L+96,16843009*or(ne,ie,ie))}function Io(N,L){var F,V=4;for(F=0;4>F;++F)V+=N[L+F-32]+N[L-1+32*F];for(V>>=3,F=0;4>F;++F)a(N,L+32*F,V,4)}function Jp(N,L){var F=N[L-1+0],V=N[L-1+32],ne=N[L-1+64],ie=N[L-1-32],se=N[L+0-32],ce=N[L+1-32],Ae=N[L+2-32],ve=N[L+3-32];N[L+0+96]=or(V,ne,N[L-1+96]),N[L+1+96]=N[L+0+64]=or(F,V,ne),N[L+2+96]=N[L+1+64]=N[L+0+32]=or(ie,F,V),N[L+3+96]=N[L+2+64]=N[L+1+32]=N[L+0+0]=or(se,ie,F),N[L+3+64]=N[L+2+32]=N[L+1+0]=or(ce,se,ie),N[L+3+32]=N[L+2+0]=or(Ae,ce,se),N[L+3+0]=or(ve,Ae,ce)}function Ks(N,L){var F=N[L+1-32],V=N[L+2-32],ne=N[L+3-32],ie=N[L+4-32],se=N[L+5-32],ce=N[L+6-32],Ae=N[L+7-32];N[L+0+0]=or(N[L+0-32],F,V),N[L+1+0]=N[L+0+32]=or(F,V,ne),N[L+2+0]=N[L+1+32]=N[L+0+64]=or(V,ne,ie),N[L+3+0]=N[L+2+32]=N[L+1+64]=N[L+0+96]=or(ne,ie,se),N[L+3+32]=N[L+2+64]=N[L+1+96]=or(ie,se,ce),N[L+3+64]=N[L+2+96]=or(se,ce,Ae),N[L+3+96]=or(ce,Ae,Ae)}function Kh(N,L){var F=N[L-1+0],V=N[L-1+32],ne=N[L-1+64],ie=N[L-1-32],se=N[L+0-32],ce=N[L+1-32],Ae=N[L+2-32],ve=N[L+3-32];N[L+0+0]=N[L+1+64]=ie+se+1>>1,N[L+1+0]=N[L+2+64]=se+ce+1>>1,N[L+2+0]=N[L+3+64]=ce+Ae+1>>1,N[L+3+0]=Ae+ve+1>>1,N[L+0+96]=or(ne,V,F),N[L+0+64]=or(V,F,ie),N[L+0+32]=N[L+1+96]=or(F,ie,se),N[L+1+32]=N[L+2+96]=or(ie,se,ce),N[L+2+32]=N[L+3+96]=or(se,ce,Ae),N[L+3+32]=or(ce,Ae,ve)}function Af(N,L){var F=N[L+0-32],V=N[L+1-32],ne=N[L+2-32],ie=N[L+3-32],se=N[L+4-32],ce=N[L+5-32],Ae=N[L+6-32],ve=N[L+7-32];N[L+0+0]=F+V+1>>1,N[L+1+0]=N[L+0+64]=V+ne+1>>1,N[L+2+0]=N[L+1+64]=ne+ie+1>>1,N[L+3+0]=N[L+2+64]=ie+se+1>>1,N[L+0+32]=or(F,V,ne),N[L+1+32]=N[L+0+96]=or(V,ne,ie),N[L+2+32]=N[L+1+96]=or(ne,ie,se),N[L+3+32]=N[L+2+96]=or(ie,se,ce),N[L+3+64]=or(se,ce,Ae),N[L+3+96]=or(ce,Ae,ve)}function Wh(N,L){var F=N[L-1+0],V=N[L-1+32],ne=N[L-1+64],ie=N[L-1+96];N[L+0+0]=F+V+1>>1,N[L+2+0]=N[L+0+32]=V+ne+1>>1,N[L+2+32]=N[L+0+64]=ne+ie+1>>1,N[L+1+0]=or(F,V,ne),N[L+3+0]=N[L+1+32]=or(V,ne,ie),N[L+3+32]=N[L+1+64]=or(ne,ie,ie),N[L+3+64]=N[L+2+64]=N[L+0+96]=N[L+1+96]=N[L+2+96]=N[L+3+96]=ie}function qh(N,L){var F=N[L-1+0],V=N[L-1+32],ne=N[L-1+64],ie=N[L-1+96],se=N[L-1-32],ce=N[L+0-32],Ae=N[L+1-32],ve=N[L+2-32];N[L+0+0]=N[L+2+32]=F+se+1>>1,N[L+0+32]=N[L+2+64]=V+F+1>>1,N[L+0+64]=N[L+2+96]=ne+V+1>>1,N[L+0+96]=ie+ne+1>>1,N[L+3+0]=or(ce,Ae,ve),N[L+2+0]=or(se,ce,Ae),N[L+1+0]=N[L+3+32]=or(F,se,ce),N[L+1+32]=N[L+3+64]=or(V,F,se),N[L+1+64]=N[L+3+96]=or(ne,V,F),N[L+1+96]=or(ie,ne,V)}function em(N,L){var F;for(F=0;8>F;++F)n(N,L+32*F,N,L-32,8)}function _l(N,L){var F;for(F=0;8>F;++F)a(N,L,N[L-1],8),L+=32}function Ws(N,L,F){var V;for(V=0;8>V;++V)a(L,F+32*V,N,8)}function Cl(N,L){var F,V=8;for(F=0;8>F;++F)V+=N[L+F-32]+N[L-1+32*F];Ws(V>>4,N,L)}function ff(N,L){var F,V=4;for(F=0;8>F;++F)V+=N[L+F-32];Ws(V>>3,N,L)}function An(N,L){var F,V=4;for(F=0;8>F;++F)V+=N[L-1+32*F];Ws(V>>3,N,L)}function gf(N,L){Ws(128,N,L)}function Yh(N,L,F){var V=N[L-F],ne=N[L+0],ie=3*(ne-V)+OT[1020+N[L-2*F]-N[L+F]],se=s2[112+(ie+4>>3)];N[L-F]=Ys[255+V+s2[112+(ie+3>>3)]],N[L+0]=Ys[255+ne-se]}function pf(N,L,F,V){var ne=N[L+0],ie=N[L+F];return Lo[255+N[L-2*F]-N[L-F]]>V||Lo[255+ie-ne]>V}function mf(N,L,F,V){return 4*Lo[255+N[L-F]-N[L+0]]+Lo[255+N[L-2*F]-N[L+F]]<=V}function vf(N,L,F,V,ne){var ie=N[L-3*F],se=N[L-2*F],ce=N[L-F],Ae=N[L+0],ve=N[L+F],Ne=N[L+2*F],je=N[L+3*F];return 4*Lo[255+ce-Ae]+Lo[255+se-ve]>V?0:Lo[255+N[L-4*F]-ie]<=ne&&Lo[255+ie-se]<=ne&&Lo[255+se-ce]<=ne&&Lo[255+je-Ne]<=ne&&Lo[255+Ne-ve]<=ne&&Lo[255+ve-Ae]<=ne}function wu(N,L,F,V){var ne=2*V+1;for(V=0;16>V;++V)mf(N,L+V,F,ne)&&Yh(N,L+V,F)}function qs(N,L,F,V){var ne=2*V+1;for(V=0;16>V;++V)mf(N,L+V*F,1,ne)&&Yh(N,L+V*F,1)}function za(N,L,F,V){var ne;for(ne=3;0<ne;--ne)wu(N,L+=4*F,F,V)}function tm(N,L,F,V){var ne;for(ne=3;0<ne;--ne)qs(N,L+=4,F,V)}function gc(N,L,F,V,ne,ie,se,ce){for(ie=2*ie+1;0<ne--;){if(vf(N,L,F,ie,se))if(pf(N,L,F,ce))Yh(N,L,F);else{var Ae=N,ve=L,Ne=F,je=Ae[ve-2*Ne],Oe=Ae[ve-Ne],Re=Ae[ve+0],et=Ae[ve+Ne],Ve=Ae[ve+2*Ne],Te=27*(Xe=OT[1020+3*(Re-Oe)+OT[1020+je-et]])+63>>7,De=18*Xe+63>>7,Xe=9*Xe+63>>7;Ae[ve-3*Ne]=Ys[255+Ae[ve-3*Ne]+Xe],Ae[ve-2*Ne]=Ys[255+je+De],Ae[ve-Ne]=Ys[255+Oe+Te],Ae[ve+0]=Ys[255+Re-Te],Ae[ve+Ne]=Ys[255+et-De],Ae[ve+2*Ne]=Ys[255+Ve-Xe]}L+=V}}function gi(N,L,F,V,ne,ie,se,ce){for(ie=2*ie+1;0<ne--;){if(vf(N,L,F,ie,se))if(pf(N,L,F,ce))Yh(N,L,F);else{var Ae=N,ve=L,Ne=F,je=Ae[ve-Ne],Oe=Ae[ve+0],Re=Ae[ve+Ne],et=s2[112+((Ve=3*(Oe-je))+4>>3)],Ve=s2[112+(Ve+3>>3)],Te=et+1>>1;Ae[ve-2*Ne]=Ys[255+Ae[ve-2*Ne]+Te],Ae[ve-Ne]=Ys[255+je+Ve],Ae[ve+0]=Ys[255+Oe-et],Ae[ve+Ne]=Ys[255+Re-Te]}L+=V}}function Xh(N,L,F,V,ne,ie){gc(N,L,F,1,16,V,ne,ie)}function Bl(N,L,F,V,ne,ie){gc(N,L,1,F,16,V,ne,ie)}function Zh(N,L,F,V,ne,ie){var se;for(se=3;0<se;--se)gi(N,L+=4*F,F,1,16,V,ne,ie)}function Su(N,L,F,V,ne,ie){var se;for(se=3;0<se;--se)gi(N,L+=4,1,F,16,V,ne,ie)}function Jh(N,L,F,V,ne,ie,se,ce){gc(N,L,ne,1,8,ie,se,ce),gc(F,V,ne,1,8,ie,se,ce)}function yf(N,L,F,V,ne,ie,se,ce){gc(N,L,1,ne,8,ie,se,ce),gc(F,V,1,ne,8,ie,se,ce)}function ed(N,L,F,V,ne,ie,se,ce){gi(N,L+4*ne,ne,1,8,ie,se,ce),gi(F,V+4*ne,ne,1,8,ie,se,ce)}function pc(N,L,F,V,ne,ie,se,ce){gi(N,L+4,1,ne,8,ie,se,ce),gi(F,V+4,1,ne,8,ie,se,ce)}function _u(){this.ba=new Nt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function td(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Cu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rd(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new E}function rm(){this.xb=this.a=0,this.l=new vu,this.ca=new Nt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rd,this.ab=0,this.gc=s(4,Cu),this.Oc=0}function Nl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new vu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function mc(N,L,F,V,ne,ie,se){for(N=N==null?0:N[L+0],L=0;L<se;++L)ne[ie+L]=N+F[V+L]&255,N=ne[ie+L]}function nd(N,L,F,V,ne,ie,se){var ce;if(N==null)mc(null,null,F,V,ne,ie,se);else for(ce=0;ce<se;++ce)ne[ie+ce]=N[L+ce]+F[V+ce]&255}function Ii(N,L,F,V,ne,ie,se){if(N==null)mc(null,null,F,V,ne,ie,se);else{var ce,Ae=N[L+0],ve=Ae,Ne=Ae;for(ce=0;ce<se;++ce)ve=Ne+(Ae=N[L+ce])-ve,Ne=F[V+ce]+(-256&ve?0>ve?0:255:ve)&255,ve=Ae,ne[ie+ce]=Ne}}function ad(N,L,F,V){var ne=L.width,ie=L.o;if(e(N!=null&&L!=null),0>F||0>=V||F+V>ie)return null;if(!N.Cc){if(N.ga==null){var se;if(N.ga=new Nl,(se=N.ga==null)||(se=L.width*L.o,e(N.Gb.length==0),N.Gb=i(se),N.Uc=0,N.Gb==null?se=0:(N.mb=N.Gb,N.nb=N.Uc,N.rc=null,se=1),se=!se),!se){se=N.ga;var ce=N.Fa,Ae=N.P,ve=N.qc,Ne=N.mb,je=N.nb,Oe=Ae+1,Re=ve-1,et=se.l;if(e(ce!=null&&Ne!=null&&L!=null),ud[0]=null,ud[1]=mc,ud[2]=nd,ud[3]=Ii,se.ca=Ne,se.tb=je,se.c=L.width,se.i=L.height,e(0<se.c&&0<se.i),1>=ve)L=0;else if(se.$a=ce[Ae+0]>>0&3,se.Z=ce[Ae+0]>>2&3,se.Lc=ce[Ae+0]>>4&3,Ae=ce[Ae+0]>>6&3,0>se.$a||1<se.$a||4<=se.Z||1<se.Lc||Ae)L=0;else if(et.put=an,et.ac=dr,et.bc=_r,et.ma=se,et.width=L.width,et.height=L.height,et.Da=L.Da,et.v=L.v,et.va=L.va,et.j=L.j,et.o=L.o,se.$a)e:{e(se.$a==1),L=Ln();t:for(;;){if(L==null){L=0;break e}if(e(se!=null),se.mc=L,L.c=se.c,L.i=se.i,L.l=se.l,L.l.ma=se,L.l.width=se.c,L.l.height=se.i,L.a=0,H(L.m,ce,Oe,Re),!ni(se.c,se.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&Ea(L.s)?(se.ic=1,ce=L.c*L.i,L.Ta=null,L.Ua=0,L.V=i(ce),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(se.ic=0,L=Mt(L,se.c)),!L))break t;L=1;break e}se.mc=null,L=0}else L=Re>=se.c*se.i;se=!L}if(se)return null;N.ga.Lc!=1?N.Ga=0:V=ie-F}e(N.ga!=null),e(F+V<=ie);e:{if(L=(ce=N.ga).c,ie=ce.l.o,ce.$a==0){if(Oe=N.rc,Re=N.Vc,et=N.Fa,Ae=N.P+1+F*L,ve=N.mb,Ne=N.nb+F*L,e(Ae<=N.P+N.qc),ce.Z!=0)for(e(ud[ce.Z]!=null),se=0;se<V;++se)ud[ce.Z](Oe,Re,et,Ae,ve,Ne,L),Oe=ve,Re=Ne,Ne+=L,Ae+=L;else for(se=0;se<V;++se)n(ve,Ne,et,Ae,L),Oe=ve,Re=Ne,Ne+=L,Ae+=L;N.rc=Oe,N.Vc=Re}else{if(e(ce.mc!=null),L=F+V,e((se=ce.mc)!=null),e(L<=se.i),se.C>=L)L=1;else if(ce.ic||ke(),ce.ic){ce=se.V,Oe=se.Ba,Re=se.c;var Ve=se.i,Te=(et=1,Ae=se.$/Re,ve=se.$%Re,Ne=se.m,je=se.s,se.$),De=Re*Ve,Xe=Re*L,nt=je.wc,Ze=Te<Xe?Nr(je,ve,Ae):null;e(Te<=De),e(L<=Ve),e(Ea(je));t:for(;;){for(;!Ne.h&&Te<Xe;){if(ve&nt||(Ze=Nr(je,ve,Ae)),e(Ze!=null),de(Ne),256>(Ve=ar(Ze.G[0],Ze.H[0],Ne)))ce[Oe+Te]=Ve,++Te,++ve>=Re&&(ve=0,++Ae<=L&&!(Ae%16)&&ia(se,Ae));else{if(!(280>Ve)){et=0;break t}Ve=Cn(Ve-256,Ne);var Dt,_t=ar(Ze.G[4],Ze.H[4],Ne);if(de(Ne),!(Te>=(_t=Pr(Re,_t=Cn(_t,Ne)))&&De-Te>=Ve)){et=0;break t}for(Dt=0;Dt<Ve;++Dt)ce[Oe+Te+Dt]=ce[Oe+Te+Dt-_t];for(Te+=Ve,ve+=Ve;ve>=Re;)ve-=Re,++Ae<=L&&!(Ae%16)&&ia(se,Ae);Te<Xe&&ve&nt&&(Ze=Nr(je,ve,Ae))}e(Ne.h==Y(Ne))}ia(se,Ae>L?L:Ae);break t}!et||Ne.h&&Te<De?(et=0,se.a=Ne.h?5:3):se.$=Te,L=et}else L=Yn(se,se.V,se.Ba,se.c,se.i,L,Be);if(!L){V=0;break e}}F+V>=ie&&(N.Cc=1),V=1}if(!V)return null;if(N.Cc&&((V=N.ga)!=null&&(V.mc=null),N.ga=null,0<N.Ga))return alert("todo:WebPDequantizeLevels"),null}return N.nb+F*ne}function P(N,L,F,V,ne,ie){for(;0<ne--;){var se,ce=N,Ae=L+(F?1:0),ve=N,Ne=L+(F?0:3);for(se=0;se<V;++se){var je=ve[Ne+4*se];je!=255&&(je*=32897,ce[Ae+4*se+0]=ce[Ae+4*se+0]*je>>23,ce[Ae+4*se+1]=ce[Ae+4*se+1]*je>>23,ce[Ae+4*se+2]=ce[Ae+4*se+2]*je>>23)}L+=ie}}function re(N,L,F,V,ne){for(;0<V--;){var ie;for(ie=0;ie<F;++ie){var se=N[L+2*ie+0],ce=15&(ve=N[L+2*ie+1]),Ae=4369*ce,ve=(240&ve|ve>>4)*Ae>>16;N[L+2*ie+0]=(240&se|se>>4)*Ae>>16&240|(15&se|se<<4)*Ae>>16>>4&15,N[L+2*ie+1]=240&ve|ce}L+=ne}}function xe(N,L,F,V,ne,ie,se,ce){var Ae,ve,Ne=255;for(ve=0;ve<ne;++ve){for(Ae=0;Ae<V;++Ae){var je=N[L+Ae];ie[se+4*Ae]=je,Ne&=je}L+=F,se+=ce}return Ne!=255}function Se(N,L,F,V,ne){var ie;for(ie=0;ie<ne;++ie)F[V+ie]=N[L+ie]>>8}function ke(){Ro=P,Un=re,Hn=xe,ma=Se}function Ke(N,L,F){w[N]=function(V,ne,ie,se,ce,Ae,ve,Ne,je,Oe,Re,et,Ve,Te,De,Xe,nt){var Ze,Dt=nt-1>>1,_t=ce[Ae+0]|ve[Ne+0]<<16,Jt=je[Oe+0]|Re[et+0]<<16;e(V!=null);var Ct=3*_t+Jt+131074>>2;for(L(V[ne+0],255&Ct,Ct>>16,Ve,Te),ie!=null&&(Ct=3*Jt+_t+131074>>2,L(ie[se+0],255&Ct,Ct>>16,De,Xe)),Ze=1;Ze<=Dt;++Ze){var Jr=ce[Ae+Ze]|ve[Ne+Ze]<<16,fn=je[Oe+Ze]|Re[et+Ze]<<16,qr=_t+Jr+Jt+fn+524296,kr=qr+2*(Jr+Jt)>>3;Ct=kr+_t>>1,_t=(qr=qr+2*(_t+fn)>>3)+Jr>>1,L(V[ne+2*Ze-1],255&Ct,Ct>>16,Ve,Te+(2*Ze-1)*F),L(V[ne+2*Ze-0],255&_t,_t>>16,Ve,Te+(2*Ze-0)*F),ie!=null&&(Ct=qr+Jt>>1,_t=kr+fn>>1,L(ie[se+2*Ze-1],255&Ct,Ct>>16,De,Xe+(2*Ze-1)*F),L(ie[se+2*Ze+0],255&_t,_t>>16,De,Xe+(2*Ze+0)*F)),_t=Jr,Jt=fn}1&nt||(Ct=3*_t+Jt+131074>>2,L(V[ne+nt-1],255&Ct,Ct>>16,Ve,Te+(nt-1)*F),ie!=null&&(Ct=3*Jt+_t+131074>>2,L(ie[se+nt-1],255&Ct,Ct>>16,De,Xe+(nt-1)*F)))}}function rt(){Po[o2]=Hce,Po[l2]=L6,Po[I6]=Qce,Po[c2]=P6,Po[u2]=k6,Po[UT]=F6,Po[E6]=zce,Po[HT]=L6,Po[QT]=P6,Po[h2]=k6,Po[zT]=F6}function I(N){return N&-16384?0>N?0:255:N>>Gce}function U(N,L){return I((19077*N>>8)+(26149*L>>8)-14234)}function $(N,L,F){return I((19077*N>>8)-(6419*L>>8)-(13320*F>>8)+8708)}function le(N,L){return I((19077*N>>8)+(33050*L>>8)-17685)}function Ie(N,L,F,V,ne){V[ne+0]=U(N,F),V[ne+1]=$(N,L,F),V[ne+2]=le(N,L)}function Ue(N,L,F,V,ne){V[ne+0]=le(N,L),V[ne+1]=$(N,L,F),V[ne+2]=U(N,F)}function st(N,L,F,V,ne){var ie=$(N,L,F);L=ie<<3&224|le(N,L)>>3,V[ne+0]=248&U(N,F)|ie>>5,V[ne+1]=L}function lr(N,L,F,V,ne){var ie=240&le(N,L)|15;V[ne+0]=240&U(N,F)|$(N,L,F)>>4,V[ne+1]=ie}function Gr(N,L,F,V,ne){V[ne+0]=255,Ie(N,L,F,V,ne+1)}function er(N,L,F,V,ne){Ue(N,L,F,V,ne),V[ne+3]=255}function Nn(N,L,F,V,ne){Ie(N,L,F,V,ne),V[ne+3]=255}function on(N,L){return 0>N?0:N>L?L:N}function pi(N,L,F){w[N]=function(V,ne,ie,se,ce,Ae,ve,Ne,je){for(var Oe=Ne+(-2&je)*F;Ne!=Oe;)L(V[ne+0],ie[se+0],ce[Ae+0],ve,Ne),L(V[ne+1],ie[se+0],ce[Ae+0],ve,Ne+F),ne+=2,++se,++Ae,Ne+=2*F;1&je&&L(V[ne+0],ie[se+0],ce[Ae+0],ve,Ne)}}function Ei(N,L,F){return F==0?N==0?L==0?6:5:L==0?4:0:F}function vc(N,L,F,V,ne){switch(N>>>30){case 3:Iu(L,F,V,ne,0);break;case 2:pa(L,F,V,ne);break;case 1:Zi(L,F,V,ne)}}function Bu(N,L){var F,V,ne=L.M,ie=L.Nb,se=N.oc,ce=N.pc+40,Ae=N.oc,ve=N.pc+584,Ne=N.oc,je=N.pc+600;for(F=0;16>F;++F)se[ce+32*F-1]=129;for(F=0;8>F;++F)Ae[ve+32*F-1]=129,Ne[je+32*F-1]=129;for(0<ne?se[ce-1-32]=Ae[ve-1-32]=Ne[je-1-32]=129:(a(se,ce-32-1,127,21),a(Ae,ve-32-1,127,9),a(Ne,je-32-1,127,9)),V=0;V<N.za;++V){var Oe=L.ya[L.aa+V];if(0<V){for(F=-1;16>F;++F)n(se,ce+32*F-4,se,ce+32*F+12,4);for(F=-1;8>F;++F)n(Ae,ve+32*F-4,Ae,ve+32*F+4,4),n(Ne,je+32*F-4,Ne,je+32*F+4,4)}var Re=N.Gd,et=N.Hd+V,Ve=Oe.ad,Te=Oe.Hc;if(0<ne&&(n(se,ce-32,Re[et].y,0,16),n(Ae,ve-32,Re[et].f,0,8),n(Ne,je-32,Re[et].ea,0,8)),Oe.Za){var De=se,Xe=ce-32+16;for(0<ne&&(V>=N.za-1?a(De,Xe,Re[et].y[15],4):n(De,Xe,Re[et+1].y,0,4)),F=0;4>F;F++)De[Xe+128+F]=De[Xe+256+F]=De[Xe+384+F]=De[Xe+0+F];for(F=0;16>F;++F,Te<<=2)De=se,Xe=ce+O6[F],Tl[Oe.Ob[F]](De,Xe),vc(Te,Ve,16*+F,De,Xe)}else if(De=Ei(V,ne,Oe.Ob[0]),cd[De](se,ce),Te!=0)for(F=0;16>F;++F,Te<<=2)vc(Te,Ve,16*+F,se,ce+O6[F]);for(F=Oe.Gc,De=Ei(V,ne,Oe.Dd),Du[De](Ae,ve),Du[De](Ne,je),Te=Ve,De=Ae,Xe=ve,255&(Oe=F>>0)&&(170&Oe?Cy(Te,256,De,Xe):Do(Te,256,De,Xe)),Oe=Ne,Te=je,255&(F>>=8)&&(170&F?Cy(Ve,320,Oe,Te):Do(Ve,320,Oe,Te)),ne<N.Ub-1&&(n(Re[et].y,0,se,ce+480,16),n(Re[et].f,0,Ae,ve+224,8),n(Re[et].ea,0,Ne,je+224,8)),F=8*ie*N.B,Re=N.sa,et=N.ta+16*V+16*ie*N.R,Ve=N.qa,Oe=N.ra+8*V+F,Te=N.Ha,De=N.Ia+8*V+F,F=0;16>F;++F)n(Re,et+F*N.R,se,ce+32*F,16);for(F=0;8>F;++F)n(Ve,Oe+F*N.B,Ae,ve+32*F,8),n(Te,De+F*N.B,Ne,je+32*F,8)}}function nm(N,L,F,V,ne,ie,se,ce,Ae){var ve=[0],Ne=[0],je=0,Oe=Ae!=null?Ae.kd:0,Re=Ae??new td;if(N==null||12>F)return 7;Re.data=N,Re.w=L,Re.ha=F,L=[L],F=[F],Re.gb=[Re.gb];e:{var et=L,Ve=F,Te=Re.gb;if(e(N!=null),e(Ve!=null),e(Te!=null),Te[0]=0,12<=Ve[0]&&!t(N,et[0],"RIFF")){if(t(N,et[0]+8,"WEBP")){Te=3;break e}var De=Me(N,et[0]+4);if(12>De||4294967286<De){Te=3;break e}if(Oe&&De>Ve[0]-8){Te=7;break e}Te[0]=De,et[0]+=12,Ve[0]-=12}Te=0}if(Te!=0)return Te;for(De=0<Re.gb[0],F=F[0];;){e:{var Xe=N;Ve=L,Te=F;var nt=ve,Ze=Ne,Dt=et=[0];if((Ct=je=[je])[0]=0,8>Te[0])Te=7;else{if(!t(Xe,Ve[0],"VP8X")){if(Me(Xe,Ve[0]+4)!=10){Te=3;break e}if(18>Te[0]){Te=7;break e}var _t=Me(Xe,Ve[0]+8),Jt=1+we(Xe,Ve[0]+12);if(2147483648<=Jt*(Xe=1+we(Xe,Ve[0]+15))){Te=3;break e}Dt!=null&&(Dt[0]=_t),nt!=null&&(nt[0]=Jt),Ze!=null&&(Ze[0]=Xe),Ve[0]+=18,Te[0]-=18,Ct[0]=1}Te=0}}if(je=je[0],et=et[0],Te!=0)return Te;if(Ve=!!(2&et),!De&&je)return 3;if(ie!=null&&(ie[0]=!!(16&et)),se!=null&&(se[0]=Ve),ce!=null&&(ce[0]=0),se=ve[0],et=Ne[0],je&&Ve&&Ae==null){Te=0;break}if(4>F){Te=7;break}if(De&&je||!De&&!je&&!t(N,L[0],"ALPH")){F=[F],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{_t=N,Te=L,De=F;var Ct=Re.gb;nt=Re.na,Ze=Re.P,Dt=Re.Sa,Jt=22,e(_t!=null),e(De!=null),Xe=Te[0];var Jr=De[0];for(e(nt!=null),e(Dt!=null),nt[0]=null,Ze[0]=null,Dt[0]=0;;){if(Te[0]=Xe,De[0]=Jr,8>Jr){Te=7;break e}var fn=Me(_t,Xe+4);if(4294967286<fn){Te=3;break e}var qr=8+fn+1&-2;if(Jt+=qr,0<Ct&&Jt>Ct){Te=3;break e}if(!t(_t,Xe,"VP8 ")||!t(_t,Xe,"VP8L")){Te=0;break e}if(Jr[0]<qr){Te=7;break e}t(_t,Xe,"ALPH")||(nt[0]=_t,Ze[0]=Xe+8,Dt[0]=fn),Xe+=qr,Jr-=qr}}if(F=F[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],Te!=0)break}F=[F],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(Ct=N,Te=L,De=F,nt=Re.gb[0],Ze=Re.Ja,Dt=Re.xa,_t=Te[0],Xe=!t(Ct,_t,"VP8 "),Jt=!t(Ct,_t,"VP8L"),e(Ct!=null),e(De!=null),e(Ze!=null),e(Dt!=null),8>De[0])Te=7;else{if(Xe||Jt){if(Ct=Me(Ct,_t+4),12<=nt&&Ct>nt-12){Te=3;break e}if(Oe&&Ct>De[0]-8){Te=7;break e}Ze[0]=Ct,Te[0]+=8,De[0]-=8,Dt[0]=Jt}else Dt[0]=5<=De[0]&&Ct[_t+0]==47&&!(Ct[_t+4]>>5),Ze[0]=De[0];Te=0}if(F=F[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],L=L[0],Te!=0)break;if(4294967286<Re.Ja)return 3;if(ce==null||Ve||(ce[0]=Re.xa?2:1),se=[se],et=[et],Re.xa){if(5>F){Te=7;break}ce=se,Oe=et,Ve=ie,N==null||5>F?N=0:5<=F&&N[L+0]==47&&!(N[L+4]>>5)?(De=[0],Ct=[0],nt=[0],H(Ze=new j,N,L,F),mt(Ze,De,Ct,nt)?(ce!=null&&(ce[0]=De[0]),Oe!=null&&(Oe[0]=Ct[0]),Ve!=null&&(Ve[0]=nt[0]),N=1):N=0):N=0}else{if(10>F){Te=7;break}ce=et,N==null||10>F||!lf(N,L+3,F-3)?N=0:(Oe=N[L+0]|N[L+1]<<8|N[L+2]<<16,Ve=16383&(N[L+7]<<8|N[L+6]),N=16383&(N[L+9]<<8|N[L+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Re.Ja||!Ve||!N?N=0:(se&&(se[0]=Ve),ce&&(ce[0]=N),N=1))}if(!N||(se=se[0],et=et[0],je&&(ve[0]!=se||Ne[0]!=et)))return 3;Ae!=null&&(Ae[0]=Re,Ae.offset=L-Ae.w,e(4294967286>L-Ae.w),e(Ae.offset==Ae.ha-F));break}return Te==0||Te==7&&je&&Ae==null?(ie!=null&&(ie[0]|=Re.na!=null&&0<Re.na.length),V!=null&&(V[0]=se),ne!=null&&(ne[0]=et),0):Te}function by(N,L,F){var V=L.width,ne=L.height,ie=0,se=0,ce=V,Ae=ne;if(L.Da=N!=null&&0<N.Da,L.Da&&(ce=N.cd,Ae=N.bd,ie=N.v,se=N.j,11>F||(ie&=-2,se&=-2),0>ie||0>se||0>=ce||0>=Ae||ie+ce>V||se+Ae>ne))return 0;if(L.v=ie,L.j=se,L.va=ie+ce,L.o=se+Ae,L.U=ce,L.T=Ae,L.da=N!=null&&0<N.da,L.da){if(!oe(ce,Ae,F=[N.ib],ie=[N.hb]))return 0;L.ib=F[0],L.hb=ie[0]}return L.ob=N!=null&&N.ob,L.Kb=N==null||!N.Sd,L.da&&(L.ob=L.ib<3*V/4&&L.hb<3*ne/4,L.Kb=0),1}function wy(N){if(N==null)return 2;if(11>N.S){var L=N.f.RGBA;L.fb+=(N.height-1)*L.A,L.A=-L.A}else L=N.f.kb,N=N.height,L.O+=(N-1)*L.fa,L.fa=-L.fa,L.N+=(N-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(N-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(N-1)*L.lb,L.lb=-L.lb);return 0}function am(N,L,F,V){if(V==null||0>=N||0>=L)return 2;if(F!=null){if(F.Da){var ne=F.cd,ie=F.bd,se=-2&F.v,ce=-2&F.j;if(0>se||0>ce||0>=ne||0>=ie||se+ne>N||ce+ie>L)return 2;N=ne,L=ie}if(F.da){if(!oe(N,L,ne=[F.ib],ie=[F.hb]))return 2;N=ne[0],L=ie[0]}}V.width=N,V.height=L;e:{var Ae=V.width,ve=V.height;if(N=V.S,0>=Ae||0>=ve||!(N>=o2&&13>N))N=2;else{if(0>=V.Rd&&V.sd==null){se=ie=ne=L=0;var Ne=(ce=Ae*U6[N])*ve;if(11>N||(ie=(ve+1)/2*(L=(Ae+1)/2),N==12&&(se=(ne=Ae)*ve)),(ve=i(Ne+2*ie+se))==null){N=1;break e}V.sd=ve,11>N?((Ae=V.f.RGBA).eb=ve,Ae.fb=0,Ae.A=ce,Ae.size=Ne):((Ae=V.f.kb).y=ve,Ae.O=0,Ae.fa=ce,Ae.Fd=Ne,Ae.f=ve,Ae.N=0+Ne,Ae.Ab=L,Ae.Cd=ie,Ae.ea=ve,Ae.W=0+Ne+ie,Ae.Db=L,Ae.Ed=ie,N==12&&(Ae.F=ve,Ae.J=0+Ne+2*ie),Ae.Tc=se,Ae.lb=ne)}if(L=1,ne=V.S,ie=V.width,se=V.height,ne>=o2&&13>ne)if(11>ne)N=V.f.RGBA,L&=(ce=Math.abs(N.A))*(se-1)+ie<=N.size,L&=ce>=ie*U6[ne],L&=N.eb!=null;else{N=V.f.kb,ce=(ie+1)/2,Ne=(se+1)/2,Ae=Math.abs(N.fa),ve=Math.abs(N.Ab);var je=Math.abs(N.Db),Oe=Math.abs(N.lb),Re=Oe*(se-1)+ie;L&=Ae*(se-1)+ie<=N.Fd,L&=ve*(Ne-1)+ce<=N.Cd,L=(L&=je*(Ne-1)+ce<=N.Ed)&Ae>=ie&ve>=ce&je>=ce,L&=N.y!=null,L&=N.f!=null,L&=N.ea!=null,ne==12&&(L&=Oe>=ie,L&=Re<=N.Tc,L&=N.F!=null)}else L=0;N=L?0:2}}return N!=0||F!=null&&F.fd&&(N=wy(V)),N}var mi=64,im=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],sm=24,om=32,Sy=8,_s=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];be("Predictor0","PredictorAdd0"),w.Predictor0=function(){return 4278190080},w.Predictor1=function(N){return N},w.Predictor2=function(N,L,F){return L[F+0]},w.Predictor3=function(N,L,F){return L[F+1]},w.Predictor4=function(N,L,F){return L[F-1]},w.Predictor5=function(N,L,F){return ye(ye(N,L[F+1]),L[F+0])},w.Predictor6=function(N,L,F){return ye(N,L[F-1])},w.Predictor7=function(N,L,F){return ye(N,L[F+0])},w.Predictor8=function(N,L,F){return ye(L[F-1],L[F+0])},w.Predictor9=function(N,L,F){return ye(L[F+0],L[F+1])},w.Predictor10=function(N,L,F){return ye(ye(N,L[F-1]),ye(L[F+0],L[F+1]))},w.Predictor11=function(N,L,F){var V=L[F+0];return 0>=Fe(V>>24&255,N>>24&255,(L=L[F-1])>>24&255)+Fe(V>>16&255,N>>16&255,L>>16&255)+Fe(V>>8&255,N>>8&255,L>>8&255)+Fe(255&V,255&N,255&L)?V:N},w.Predictor12=function(N,L,F){var V=L[F+0];return(Ee((N>>24&255)+(V>>24&255)-((L=L[F-1])>>24&255))<<24|Ee((N>>16&255)+(V>>16&255)-(L>>16&255))<<16|Ee((N>>8&255)+(V>>8&255)-(L>>8&255))<<8|Ee((255&N)+(255&V)-(255&L)))>>>0},w.Predictor13=function(N,L,F){var V=L[F-1];return(ze((N=ye(N,L[F+0]))>>24&255,V>>24&255)<<24|ze(N>>16&255,V>>16&255)<<16|ze(N>>8&255,V>>8&255)<<8|ze(N>>0&255,V>>0&255))>>>0};var jT=w.PredictorAdd0;w.PredictorAdd1=Ge,be("Predictor2","PredictorAdd2"),be("Predictor3","PredictorAdd3"),be("Predictor4","PredictorAdd4"),be("Predictor5","PredictorAdd5"),be("Predictor6","PredictorAdd6"),be("Predictor7","PredictorAdd7"),be("Predictor8","PredictorAdd8"),be("Predictor9","PredictorAdd9"),be("Predictor10","PredictorAdd10"),be("Predictor11","PredictorAdd11"),be("Predictor12","PredictorAdd12"),be("Predictor13","PredictorAdd13");var _y=w.PredictorAdd2;Le("ColorIndexInverseTransform","MapARGB","32b",function(N){return N>>8&255},function(N){return N}),Le("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(N){return N},function(N){return N>>8&255});var t2,Eo=w.ColorIndexInverseTransform,lm=w.MapARGB,r2=w.VP8LColorIndexInverseTransformAlpha,n2=w.MapAlpha,id=w.VP8LPredictorsAdd=[];id.length=16,(w.VP8LPredictors=[]).length=16,(w.VP8LPredictorsAdd_C=[]).length=16,(w.VP8LPredictors_C=[]).length=16;var xf,Cs,Xi,sd,Nu,Tu,cm,Iu,pa,Cy,Zi,Do,um,a2,By,bf,wf,od,Sf,hm,_f,ld,Ny,Mo,Ro,Un,Hn,ma,Ga=i(511),Eu=i(2041),Ty=i(225),dm=i(767),i2=0,OT=Eu,s2=Ty,Ys=dm,Lo=Ga,o2=0,l2=1,I6=2,c2=3,u2=4,UT=5,E6=6,HT=7,QT=8,h2=9,zT=10,Nce=[2,3,7],Tce=[3,3,11],D6=[280,256,256,256,40],Ice=[0,1,1,1,0],Ece=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Dce=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mce=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Rce=8,GT=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],VT=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Iy=null,Lce=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Pce=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],M6=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],kce=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Fce=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],jce=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Oce=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cd=[],Tl=[],Du=[],Uce=1,R6=2,ud=[],Po=[];Ke("UpsampleRgbLinePair",Ie,3),Ke("UpsampleBgrLinePair",Ue,3),Ke("UpsampleRgbaLinePair",Nn,4),Ke("UpsampleBgraLinePair",er,4),Ke("UpsampleArgbLinePair",Gr,4),Ke("UpsampleRgba4444LinePair",lr,2),Ke("UpsampleRgb565LinePair",st,2);var Hce=w.UpsampleRgbLinePair,Qce=w.UpsampleBgrLinePair,L6=w.UpsampleRgbaLinePair,P6=w.UpsampleBgraLinePair,k6=w.UpsampleArgbLinePair,F6=w.UpsampleRgba4444LinePair,zce=w.UpsampleRgb565LinePair,d2=16,A2=1<<d2-1,Ey=-227,$T=482,Gce=6,j6=0,Vce=i(256),$ce=i(256),Kce=i(256),Wce=i(256),qce=i($T-Ey),Yce=i($T-Ey);pi("YuvToRgbRow",Ie,3),pi("YuvToBgrRow",Ue,3),pi("YuvToRgbaRow",Nn,4),pi("YuvToBgraRow",er,4),pi("YuvToArgbRow",Gr,4),pi("YuvToRgba4444Row",lr,2),pi("YuvToRgb565Row",st,2);var O6=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],f2=[0,2,8],Xce=[8,7,6,4,4,2,2,2,1,1,1,1],Zce=1;this.WebPDecodeRGBA=function(N,L,F,V,ne){var ie=l2,se=new _u,ce=new Nt;se.ba=ce,ce.S=ie,ce.width=[ce.width],ce.height=[ce.height];var Ae=ce.width,ve=ce.height,Ne=new Kt;if(Ne==null||N==null)var je=2;else e(Ne!=null),je=nm(N,L,F,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(je!=0?Ae=0:(Ae!=null&&(Ae[0]=Ne.width[0]),ve!=null&&(ve[0]=Ne.height[0]),Ae=1),Ae){ce.width=ce.width[0],ce.height=ce.height[0],V!=null&&(V[0]=ce.width),ne!=null&&(ne[0]=ce.height);e:{if(V=new vu,(ne=new td).data=N,ne.w=L,ne.ha=F,ne.kd=1,L=[0],e(ne!=null),((N=nm(ne.data,ne.w,ne.ha,null,null,null,L,null,ne))==0||N==7)&&L[0]&&(N=4),(L=N)==0){if(e(se!=null),V.data=ne.data,V.w=ne.w+ne.offset,V.ha=ne.ha-ne.offset,V.put=an,V.ac=dr,V.bc=_r,V.ma=se,ne.xa){if((N=Ln())==null){se=1;break e}if(function(Oe,Re){var et=[0],Ve=[0],Te=[0];t:for(;;){if(Oe==null)return 0;if(Re==null)return Oe.a=2,0;if(Oe.l=Re,Oe.a=0,H(Oe.m,Re.data,Re.w,Re.ha),!mt(Oe.m,et,Ve,Te)){Oe.a=3;break t}if(Oe.xb=R6,Re.width=et[0],Re.height=Ve[0],!ni(et[0],Ve[0],1,Oe,null))break t;return 1}return e(Oe.a!=0),0}(N,V)){if(V=(L=am(V.width,V.height,se.Oa,se.ba))==0){t:{V=N;r:for(;;){if(V==null){V=0;break t}if(e(V.s.yc!=null),e(V.s.Ya!=null),e(0<V.s.Wb),e((F=V.l)!=null),e((ne=F.ma)!=null),V.xb!=0){if(V.ca=ne.ba,V.tb=ne.tb,e(V.ca!=null),!by(ne.Oa,F,c2)){V.a=2;break r}if(!Mt(V,F.width)||F.da)break r;if((F.da||zt(V.ca.S))&&ke(),11>V.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),V.ca.f.kb.F!=null&&ke()),V.Pb&&0<V.s.ua&&V.s.vb.X==null&&!z(V.s.vb,V.s.Wa.Xa)){V.a=1;break r}V.xb=0}if(!Yn(V,V.V,V.Ba,V.c,V.i,F.o,ri))break r;ne.Dc=V.Ma,V=1;break t}e(V.a!=0),V=0}V=!V}V&&(L=N.a)}else L=N.a}else{if((N=new of)==null){se=1;break e}if(N.Fa=ne.na,N.P=ne.P,N.qc=ne.Sa,cf(N,V)){if((L=am(V.width,V.height,se.Oa,se.ba))==0){if(N.Aa=0,F=se.Oa,e((ne=N)!=null),F!=null){if(0<(Ae=0>(Ae=F.Md)?0:100<Ae?255:255*Ae/100)){for(ve=Ne=0;4>ve;++ve)12>(je=ne.pb[ve]).lc&&(je.ia=Ae*Xce[0>je.lc?0:je.lc]>>3),Ne|=je.ia;Ne&&(alert("todo:VP8InitRandom"),ne.ia=1)}ne.Ga=F.Id,100<ne.Ga?ne.Ga=100:0>ne.Ga&&(ne.Ga=0)}Yp(N,V)||(L=N.a)}}else L=N.a}L==0&&se.Oa!=null&&se.Oa.fd&&(L=wy(se.ba))}se=L}ie=se!=0?null:11>ie?ce.f.RGBA.eb:ce.f.kb.y}else ie=null;return ie};var U6=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(w,B){for(var D="",T=0;T<4;T++)D+=String.fromCharCode(w[B++]);return D}function u(w,B){return(w[B+0]<<0|w[B+1]<<8|w[B+2]<<16)>>>0}function h(w,B){return(w[B+0]<<0|w[B+1]<<8|w[B+2]<<16|w[B+3]<<24)>>>0}new l;var d=[0],A=[0],g=[],p=new l,v=r,m=function(w,B){var D={},T=0,E=!1,R=0,M=0;if(D.frames=[],!function(G,Y,Z,de){for(var he=0;he<de;he++)if(G[Y+he]!=Z.charCodeAt(he))return!0;return!1}(w,B,"RIFF",4)){for(h(w,B+=4),B+=8;B<w.length;){var k=c(w,B),O=h(w,B+=4);B+=4;var Q=O+(1&O);switch(k){case"VP8 ":case"VP8L":D.frames[T]===void 0&&(D.frames[T]={}),(te=D.frames[T]).src_off=E?M:B-8,te.src_size=R+O+8,T++,E&&(E=!1,R=0,M=0);break;case"VP8X":(te=D.header={}).feature_flags=w[B];var H=B+4;te.canvas_width=1+u(w,H),H+=3,te.canvas_height=1+u(w,H),H+=3;break;case"ALPH":E=!0,R=Q+8,M=B-8;break;case"ANIM":(te=D.header).bgcolor=h(w,B),H=B+4,te.loop_count=(ee=w)[(j=H)+0]<<0|ee[j+1]<<8,H+=2;break;case"ANMF":var W,te;(te=D.frames[T]={}).offset_x=2*u(w,B),B+=3,te.offset_y=2*u(w,B),B+=3,te.width=1+u(w,B),B+=3,te.height=1+u(w,B),B+=3,te.duration=u(w,B),B+=3,W=w[B++],te.dispose=1&W,te.blend=W>>1&1}k!="ANMF"&&(B+=Q)}var ee,j;return D}}(v,0);m.response=v,m.rgbaoutput=!0,m.dataurl=!1;var y=m.header?m.header:null,x=m.frames?m.frames:null;if(y){y.loop_counter=y.loop_count,d=[y.canvas_height],A=[y.canvas_width];for(var b=0;b<x.length&&x[b].blend!=0;b++);}var S=x[0],_=p.WebPDecodeRGBA(v,S.src_off,S.src_size,A,d);S.rgba=_,S.imgwidth=A[0],S.imgheight=d[0];for(var C=0;C<A[0]*d[0]*4;C++)g[C]=_[C];return this.width=A,this.height=d,this.data=g,this}(function(r){var e=function(){return typeof xL=="function"},t=function(d,A,g,p){var v=4,m=s;switch(p){case r.image_compression.FAST:v=1,m=i;break;case r.image_compression.MEDIUM:v=6,m=o;break;case r.image_compression.SLOW:v=9,m=l}d=n(d,A,g,m);var y=xL(d,{level:v});return r.__addimage__.arrayBufferToBinaryString(y)},n=function(d,A,g,p){for(var v,m,y,x=d.length/A,b=new Uint8Array(d.length+x),S=u(),_=0;_<x;_+=1){if(y=_*A,v=d.subarray(y,y+A),p)b.set(p(v,g,m),y+_);else{for(var C,w=S.length,B=[];C<w;C+=1)B[C]=S[C](v,g,m);var D=h(B.concat());b.set(B[D],y+_)}m=v}return b},a=function(d){var A=Array.apply([],d);return A.unshift(0),A},i=function(d,A){var g,p=[],v=d.length;p[0]=1;for(var m=0;m<v;m+=1)g=d[m-A]||0,p[m+1]=d[m]-g+256&255;return p},s=function(d,A,g){var p,v=[],m=d.length;v[0]=2;for(var y=0;y<m;y+=1)p=g&&g[y]||0,v[y+1]=d[y]-p+256&255;return v},o=function(d,A,g){var p,v,m=[],y=d.length;m[0]=3;for(var x=0;x<y;x+=1)p=d[x-A]||0,v=g&&g[x]||0,m[x+1]=d[x]+256-(p+v>>>1)&255;return m},l=function(d,A,g){var p,v,m,y,x=[],b=d.length;x[0]=4;for(var S=0;S<b;S+=1)p=d[S-A]||0,v=g&&g[S]||0,m=g&&g[S-A]||0,y=c(p,v,m),x[S+1]=d[S]-y+256&255;return x},c=function(d,A,g){if(d===A&&A===g)return d;var p=Math.abs(A-g),v=Math.abs(d-g),m=Math.abs(d+A-g-g);return p<=v&&p<=m?d:v<=m?A:g},u=function(){return[a,i,s,o,l]},h=function(d){var A=d.map(function(g){return g.reduce(function(p,v){return p+Math.abs(v)},0)});return A.indexOf(Math.min.apply(null,A))};r.processPNG=function(d,A,g,p){var v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k=this.decode.FLATE_DECODE,O="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(y=new bke(d)).imgData,m=y.bits,v=y.colorSpace,b=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){w=(C=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,D=new Uint8Array(w*y.colors),B=new Uint8Array(w);var Q,H=y.pixelBitlength-y.bits;for(R=0,M=0;R<w;R++){for(E=C[R],Q=0;Q<H;)D[M++]=E>>>Q&255,Q+=y.bits;B[R]=E>>>Q&255}}if(y.bits===16){w=(C=new Uint32Array(y.decodePixels().buffer)).length,D=new Uint8Array(w*(32/y.pixelBitlength)*y.colors),B=new Uint8Array(w*(32/y.pixelBitlength)),T=y.colors>1,R=0,M=0;for(var W=0;R<w;)E=C[R++],D[M++]=E>>>0&255,T&&(D[M++]=E>>>16&255,E=C[R++],D[M++]=E>>>0&255),B[W++]=E>>>16&255;m=8}p!==r.image_compression.NONE&&e()?(d=t(D,y.width*y.colors,y.colors,p),_=t(B,y.width,1,p)):(d=D,_=B,k=void 0)}if(y.colorType===3&&(v=this.color_spaces.INDEXED,S=y.palette,y.transparency.indexed)){var te=y.transparency.indexed,ee=0;for(R=0,w=te.length;R<w;++R)ee+=te[R];if((ee/=255)===w-1&&te.indexOf(0)!==-1)x=[te.indexOf(0)];else if(ee!==w){for(C=y.decodePixels(),B=new Uint8Array(C.length),R=0,w=C.length;R<w;R++)B[R]=te[C[R]];_=t(B,y.width,1)}}var j=function(G){var Y;switch(G){case r.image_compression.FAST:Y=11;break;case r.image_compression.MEDIUM:Y=13;break;case r.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(p);return k===this.decode.FLATE_DECODE&&(O="/Predictor "+j+" "),O+="/Colors "+b+" /BitsPerComponent "+m+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),(_&&this.__addimage__.isArrayBuffer(_)||this.__addimage__.isArrayBufferView(_))&&(_=this.__addimage__.arrayBufferToBinaryString(_)),{alias:g,data:d,index:A,filter:k,decodeParameters:O,transparency:x,palette:S,sMask:_,predictor:j,width:y.width,height:y.height,bitsPerComponent:m,colorSpace:v}}}})(nr.API),function(r){r.processGIF89A=function(e,t,n,a){var i=new wke(e),s=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},u=new yD(100).encode(c,100);return r.processJPEG.call(this,u,t,n,a)},r.processGIF87A=r.processGIF89A}(nr.API),Rl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Rl.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){kn.log("bit decode error:"+t)}},Rl.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Rl.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*a*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*a+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Rl.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}r!==0&&(this.pos+=4-r)}},Rl.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=c}this.pos+=r}},Rl.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,c=(s>>11)/e*255|0,u=a*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=r}},Rl.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Rl.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=s}},Rl.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,a){var i=new Rl(e,!1),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new yD(100).encode(l,100);return r.processJPEG.call(this,c,t,n,a)}}(nr.API),kV.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,a){var i=new kV(e),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new yD(100).encode(l,100);return r.processJPEG.call(this,c,t,n,a)}}(nr.API),nr.API.processRGBA=function(r,e,t){for(var n=r.data,a=n.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,l=0,c=0;c<a;c+=4){var u=n[c],h=n[c+1],d=n[c+2],A=n[c+3];i[o++]=u,i[o++]=h,i[o++]=d,s[l++]=A}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:g,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},nr.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zm=nr.API,e_=zm.getCharWidthsArray=function(r,e){var t,n,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:a.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=e.doKerning!==!1,d=0,A=r.length,g=0,p=o[0]||l,v=[];for(t=0;t<A;t++)n=r.charCodeAt(t),typeof a.metadata.widthOfString=="function"?v.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+s*(1e3/i)||0)/1e3):(d=h&&wn(c[n])==="object"&&!isNaN(parseInt(c[n][g],10))?c[n][g]/u:0,v.push((o[n]||p)/l+d)),g=n;return v},MV=zm.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return zm.processArabic&&(r=zm.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,a)/t:e_.apply(this,arguments).reduce(function(i,s){return i+s},0)},RV=function(r,e,t,n){for(var a=[],i=0,s=r.length,o=0;i!==s&&o+e[i]<t;)o+=e[i],i++;a.push(r.slice(0,i));var l=i;for(o=0;i!==s;)o+e[i]>n&&(a.push(r.slice(l,i)),o=0,l=i),o+=e[i],i++;return l!==i&&a.push(r.slice(l,i)),a},LV=function(r,e,t){t||(t={});var n,a,i,s,o,l,c,u=[],h=[u],d=t.textIndent||0,A=0,g=0,p=r.split(" "),v=e_.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?p[0].length+2:t.lineIndent||0){var m=Array(l).join(" "),y=[];p.map(function(b){(b=b.split(/\s*\n/)).length>1?y=y.concat(b.map(function(S,_){return(_&&S.length?`
`:"")+S})):y.push(b[0])}),p=y,l=MV.apply(this,[m,t])}for(i=0,s=p.length;i<s;i++){var x=0;if(n=p[i],l&&n[0]==`
`&&(n=n.substr(1),x=1),d+A+(g=(a=e_.apply(this,[n,t])).reduce(function(b,S){return b+S},0))>e||x){if(g>e){for(o=RV.apply(this,[n,a,e-(d+A),e]),u.push(o.shift()),u=[o.pop()];o.length;)h.push([o.shift()]);g=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(b,S){return b+S},0)}else u=[n];h.push(u),d=g+l,A=v}else u.push(n),d+=A+g,A=v}return c=l?function(b,S){return(S?m:"")+b.join(" ")}:function(b){return b.join(" ")},h.map(c)},zm.splitTextToSize=function(r,e,t){var n,a=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/a;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=t.lineIndent;var o,l,c=[];for(o=0,l=n.length;o<l;o++)c=c.concat(LV.apply(this,[n[o],s,i]));return c},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},a=0;a<e.length;a++)t[e[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=e[a];var i=function(h){return"0x"+parseInt(h,10).toString(16)},s=r.__fontmetrics__.compress=function(h){var d,A,g,p,v=["{"];for(var m in h){if(d=h[m],isNaN(parseInt(m,10))?A="'"+m+"'":(m=parseInt(m,10),A=(A=i(m).slice(2)).slice(0,-1)+n[A.slice(-1)]),typeof d=="number")d<0?(g=i(d).slice(3),p="-"):(g=i(d).slice(2),p=""),g=p+g.slice(0,-1)+n[g.slice(-1)];else{if(wn(d)!=="object")throw new Error("Don't know what to do with value type "+wn(d)+".");g=s(d)}v.push(A+g)}return v.push("}"),v.join("")},o=r.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,A,g,p,v={},m=1,y=v,x=[],b="",S="",_=h.length-1,C=1;C<_;C+=1)(p=h[C])=="'"?d?(g=d.join(""),d=void 0):d=[]:d?d.push(p):p=="{"?(x.push([y,g]),y={},g=void 0):p=="}"?((A=x.pop())[0][A[1]]=y,g=void 0,y=A[0]):p=="-"?m=-1:g===void 0?t.hasOwnProperty(p)?(b+=t[p],g=parseInt(b,16)*m,m=1,b=""):b+=p:t.hasOwnProperty(p)?(S+=t[p],y[g]=parseInt(S,16)*m,m=1,g=void 0,S=""):S+=p;return v},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(h){var d=h.font,A=u.Unicode[d.postScriptName];A&&(d.metadata.Unicode={},d.metadata.Unicode.widths=A.widths,d.metadata.Unicode.kerning=A.kerning);var g=c.Unicode[d.postScriptName];g&&(d.metadata.Unicode.encoding=g,d.encoding=g.codePages[0])}])}(nr.API),function(r){var e=function(t){for(var n=t.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=t.charCodeAt(i);return a};r.API.events.push(["addFont",function(t){var n=void 0,a=t.font,i=t.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(s,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(U1(o)),s.metadata=r.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(a,n)}}])}(nr),function(r){function e(){return(ir.canvg?Promise.resolve(ir.canvg):hs(()=>import("./index.es-C0n2W2RO.js"),__vite__mapDeps([0,1,2,3]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}nr.API.addSvgAsImage=function(t,n,a,i,s,o,l,c){if(isNaN(n)||isNaN(a))throw kn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(s))throw kn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=s;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return e().then(function(g){return g.fromString(h,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(d)}).then(function(){A.addImage(u.toDataURL("image/jpeg",1),n,a,i,s,l,c)})}}(),nr.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,t);return this},nr.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,u=0,h=0;function d(g,p){var v,m=!1;for(v=0;v<g.length;v+=1)g[v]===p&&(m=!0);return m}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var A=o.length;for(h=0;h<A;h+=1)t[o[h]].value=t[o[h]].defaultValue,t[o[h]].explicitSet=!1}if(wn(r)==="object"){for(a in r)if(i=r[a],d(o,a)&&i!==void 0){if(t[a].type==="boolean"&&typeof i=="boolean")t[a].value=i;else if(t[a].type==="name"&&d(t[a].valueSet,i))t[a].value=i;else if(t[a].type==="integer"&&Number.isInteger(i))t[a].value=i;else if(t[a].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}t[a].value="["+l.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,p=[];for(g in t)t[g].explicitSet===!0&&(t[g].type==="name"?p.push("/"+g+" /"+t[g].value):p.push("/"+g+" "+t[g].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+s.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(a+i+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(nr.API),function(r){var e=r.API,t=e.pdfEscape16=function(i,s){for(var o,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],h=0,d=i.length;h<d;++h){if(o=s.metadata.characterToGlyph(i.charCodeAt(h)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=i.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},n=function(i){var s,o,l,c,u,h,d;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,d=(o=Object.keys(i).sort(function(A,g){return A-g})).length;h<d;h++)s=o[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[s]!==void 0&&i[s]!==null&&typeof i[s].toString=="function"&&(c=("0000"+i[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,d=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),A="",g=0;g<d.length;g++)A+=String.fromCharCode(d[g]);var p=c();u({data:A,addLength1:!0,objectId:p}),l("endobj");var v=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var m=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ov(o.fontName)),l("/FontFile2 "+p+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var y=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+ov(o.fontName)),l("/FontDescriptor "+m+" 0 R"),l("/W "+r.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+ov(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+y+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(s){var o=s.font,l=s.out,c=s.newObject,u=s.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,d="",A=0;A<h.length;A++)d+=String.fromCharCode(h[A]);var g=c();u({data:d,addLength1:!0,objectId:g}),l("endobj");var p=c();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:p}),l("endobj");var v=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+ov(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var m=0;m<o.metadata.hmtx.widths.length;m++)o.metadata.hmtx.widths[m]=parseInt(o.metadata.hmtx.widths[m]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+ov(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var s,o=i.text||"",l=i.x,c=i.y,u=i.options||{},h=i.mutex||{},d=h.pdfEscape,A=h.activeFontKey,g=h.fonts,p=A,v="",m=0,y="",x=g[p].encoding;if(g[p].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:h};for(y=o,p=A,Array.isArray(o)&&(y=o[0]),m=0;m<y.length;m+=1)g[p].metadata.hasOwnProperty("cmap")&&(s=g[p].metadata.cmap.unicode.codeMap[y[m].charCodeAt(0)]),s||y[m].charCodeAt(0)<256&&g[p].metadata.hasOwnProperty("Unicode")?v+=y[m]:v+="";var b="";return parseInt(p.slice(1))<14||x==="WinAnsiEncoding"?b=d(v,p).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(b=t(v,g[p])),h.isHex=!0,{text:b,x:l,y:c,options:u,mutex:h}};e.events.push(["postProcessText",function(i){var s=i.text||"",o=[],l={text:s,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?o.push([a(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):o.push(a(Object.assign({},l,{text:s[c]})).text);i.text=o}else i.text=a(Object.assign({},l,{text:s})).text}])}(nr),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(nr.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var a,i,s,o,l,c,u,h=e,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,x=0;this.__bidiEngine__={};var b=function(T){var E=T.charCodeAt(),R=E>>8,M=p[R];return M!==void 0?h[256*M+(255&E)]:R===252||R===253?"AL":m.test(R)?"L":R===8?"R":"N"},S=function(T){for(var E,R=0;R<T.length;R++){if((E=b(T.charAt(R)))==="L")return!1;if(E==="R")return!0}return!1},_=function(T,E,R,M){var k,O,Q,H,W=E[M];switch(W){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(W="AN");break;case"AL":y=!0,W="R";break;case"WS":W="N";break;case"CS":M<1||M+1>=E.length||(k=R[M-1])!=="EN"&&k!=="AN"||(O=E[M+1])!=="EN"&&O!=="AN"?W="N":y&&(O="AN"),W=O===k?O:"N";break;case"ES":W=(k=M>0?R[M-1]:"B")==="EN"&&M+1<E.length&&E[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&R[M-1]==="EN"){W="EN";break}if(y){W="N";break}for(Q=M+1,H=E.length;Q<H&&E[Q]==="ET";)Q++;W=Q<H&&E[Q]==="EN"?"EN":"N";break;case"NSM":if(s&&!o){for(H=E.length,Q=M+1;Q<H&&E[Q]==="NSM";)Q++;if(Q<H){var te=T[M],ee=te>=1425&&te<=2303||te===64286;if(k=E[Q],ee&&(k==="R"||k==="AL")){W="R";break}}}W=M<1||(k=E[M-1])==="B"?"N":R[M-1];break;case"B":y=!1,a=!0,W=x;break;case"S":i=!0,W="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":W="N"}return W},C=function(T,E,R){var M=T.split("");return R&&w(M,R,{hiLevel:x}),M.reverse(),E&&E.reverse(),M.join("")},w=function(T,E,R){var M,k,O,Q,H,W=-1,te=T.length,ee=0,j=[],G=x?A:d,Y=[];for(y=!1,a=!1,i=!1,k=0;k<te;k++)Y[k]=b(T[k]);for(O=0;O<te;O++){if(H=ee,j[O]=_(T,Y,j,O),M=240&(ee=G[H][g[j[O]]]),ee&=15,E[O]=Q=G[ee][5],M>0)if(M===16){for(k=W;k<O;k++)E[k]=1;W=-1}else W=-1;if(G[ee][6])W===-1&&(W=O);else if(W>-1){for(k=W;k<O;k++)E[k]=Q;W=-1}Y[O]==="B"&&(E[O]=0),R.hiLevel|=Q}i&&function(Z,de,he){for(var fe=0;fe<he;fe++)if(Z[fe]==="S"){de[fe]=x;for(var q=fe-1;q>=0&&Z[q]==="WS";q--)de[q]=x}}(Y,E,te)},B=function(T,E,R,M,k){if(!(k.hiLevel<T)){if(T===1&&x===1&&!a)return E.reverse(),void(R&&R.reverse());for(var O,Q,H,W,te=E.length,ee=0;ee<te;){if(M[ee]>=T){for(H=ee+1;H<te&&M[H]>=T;)H++;for(W=ee,Q=H-1;W<Q;W++,Q--)O=E[W],E[W]=E[Q],E[Q]=O,R&&(O=R[W],R[W]=R[Q],R[Q]=O);ee=H}ee++}}},D=function(T,E,R){var M=T.split(""),k={hiLevel:x};return R||(R=[]),w(M,R,k),function(O,Q,H){if(H.hiLevel!==0&&u)for(var W,te=0;te<O.length;te++)Q[te]===1&&(W=v.indexOf(O[te]))>=0&&(O[te]=v[W+1])}(M,R,k),B(2,M,E,R,k),B(1,M,E,R,k),M.join("")};return this.__bidiEngine__.doBidiReorder=function(T,E,R){if(function(k,O){if(O)for(var Q=0;Q<k.length;Q++)O[Q]=Q;o===void 0&&(o=S(k)),c===void 0&&(c=S(k))}(T,E),s||!l||c)if(s&&l&&o^c)x=o?1:0,T=C(T,E,R);else if(!s&&l&&c)x=o?1:0,T=D(T,E,R),T=C(T,E);else if(!s||o||l||c){if(s&&!l&&o^c)T=C(T,E),o?(x=0,T=D(T,E,R)):(x=1,T=D(T,E,R),T=C(T,E));else if(s&&o&&!l&&c)x=1,T=D(T,E,R),T=C(T,E);else if(!s&&!l&&o^c){var M=u;o?(x=1,T=D(T,E,R),x=0,u=!1,T=D(T,E,R),u=M):(x=0,T=D(T,E,R),T=C(T,E),x=1,u=!1,T=D(T,E,R),u=M,T=C(T,E))}}else x=0,T=D(T,E,R);else x=o?1:0,T=D(T,E,R);return T},this.__bidiEngine__.setOptions=function(T){T&&(s=T.isInputVisual,l=T.isOutputVisual,o=T.isInputRtl,c=T.isOutputRtl,u=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var s=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(s=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?s.push([t.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):s.push([t.doBidiReorder(a[o])]);n.text=s}else n.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])}(nr),nr.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new WA(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Fke(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new Ske(this.contents),this.head=new Cke(this),this.name=new Eke(this),this.cmap=new kse(this),this.toUnicode={},this.hhea=new Bke(this),this.maxp=new Dke(this),this.hmtx=new Mke(this),this.post=new Tke(this),this.os2=new Nke(this),this.loca=new kke(this),this.glyf=new Rke(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,o,l,c;for(c=[],s=0,o=(l=this.bbox).length;s<o;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var a,i,s,o;for(s=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=e.charCodeAt(i),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/t)||0;return s*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var uc,WA=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,a;for(a=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,a,i,s,o,l;return e=this.readByte(),t=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*a+16777216*i+65536*s+256*o+l},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)t=e[n],i.push(this.writeByte(t));return i},r}(),Ske=function(){var r;function e(t){var n,a,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,a,i,s,o,l,c,u,h,d,A,g,p;for(p in A=Object.keys(t).length,l=Math.log(2),h=16*Math.floor(Math.log(A)/l),s=Math.floor(h/l),u=16*A-h,(a=new WA).writeInt(this.scalarType),a.writeShort(A),a.writeShort(h),a.writeShort(s),a.writeShort(u),i=16*A,c=a.pos+i,o=null,g=[],t)for(d=t[p],a.writeString(p),a.writeInt(r(d)),a.writeInt(c),a.writeInt(d.length),g=g.concat(d),p==="head"&&(o=c),c+=d.length;c%4;)g.push(0),c++;return a.write(g),n=2981146554-r(a.data),a.pos=o+8,a.writeUInt32(n),a.data},r=function(t){var n,a,i,s;for(t=Fse.call(t);t.length%4;)t.push(0);for(i=new WA(t),a=0,n=0,s=t.length;n<s;n=n+=4)a+=i.readUInt32();return 4294967295&a},e}(),_ke={}.hasOwnProperty,fu=function(r,e){for(var t in e)_ke.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};uc=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var Cke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new WA).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),FV=function(){function r(e,t){var n,a,i,s,o,l,c,u,h,d,A,g,p,v,m,y,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(A=e.readUInt16(),d=A/2,e.pos+=6,i=function(){var b,S;for(S=[],l=b=0;0<=d?b<d:b>d;l=0<=d?++b:--b)S.push(e.readUInt16());return S}(),e.pos+=2,p=function(){var b,S;for(S=[],l=b=0;0<=d?b<d:b>d;l=0<=d?++b:--b)S.push(e.readUInt16());return S}(),c=function(){var b,S;for(S=[],l=b=0;0<=d?b<d:b>d;l=0<=d?++b:--b)S.push(e.readUInt16());return S}(),u=function(){var b,S;for(S=[],l=b=0;0<=d?b<d:b>d;l=0<=d?++b:--b)S.push(e.readUInt16());return S}(),a=(this.length-e.pos+this.offset)/2,o=function(){var b,S;for(S=[],l=b=0;0<=a?b<a:b>a;l=0<=a?++b:--b)S.push(e.readUInt16());return S}(),l=m=0,x=i.length;m<x;l=++m)for(v=i[l],n=y=g=p[l];g<=v?y<=v:y>=v;n=g<=v?++y:--y)u[l]===0?s=n+c[l]:(s=o[u[l]/2+(n-g)-(d-l)]||0)!==0&&(s+=c[l]),this.codeMap[n]=65535&s}e.pos=h}return r.encode=function(e,t){var n,a,i,s,o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y,Z,de,he,fe,q,ge,me,we;switch(M=new WA,s=Object.keys(e).sort(function(Me,z){return Me-z}),t){case"macroman":for(p=0,v=function(){var Me=[];for(g=0;g<256;++g)Me.push(0);return Me}(),y={0:0},i={},k=0,W=s.length;k<W;k++)y[q=e[a=s[k]]]==null&&(y[q]=++p),i[a]={old:e[a],new:y[e[a]]},v[a]=y[e[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(v),{charMap:i,subtable:M.data,maxGlyphID:p+1};case"unicode":for(E=[],h=[],x=0,y={},n={},m=c=null,O=0,te=s.length;O<te;O++)y[S=e[a=s[O]]]==null&&(y[S]=++x),n[a]={old:S,new:y[S]},o=y[S]-a,m!=null&&o===c||(m&&h.push(m),E.push(a),c=o),m=a;for(m&&h.push(m),h.push(65535),E.push(65535),D=2*(B=E.length),w=2*Math.pow(Math.log(B)/Math.LN2,2),d=Math.log(w/2)/Math.LN2,C=2*B-w,l=[],_=[],A=[],g=Q=0,ee=E.length;Q<ee;g=++Q){if(T=E[g],u=h[g],T===65535){l.push(0),_.push(0);break}if(T-(R=n[T].new)>=32768)for(l.push(0),_.push(2*(A.length+B-g)),a=H=T;T<=u?H<=u:H>=u;a=T<=u?++H:--H)A.push(n[a].new);else l.push(R-T),_.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*B+2*A.length),M.writeUInt16(0),M.writeUInt16(D),M.writeUInt16(w),M.writeUInt16(d),M.writeUInt16(C),he=0,j=h.length;he<j;he++)a=h[he],M.writeUInt16(a);for(M.writeUInt16(0),fe=0,G=E.length;fe<G;fe++)a=E[fe],M.writeUInt16(a);for(ge=0,Y=l.length;ge<Y;ge++)o=l[ge],M.writeUInt16(o);for(me=0,Z=_.length;me<Z;me++)b=_[me],M.writeUInt16(b);for(we=0,de=A.length;we<de;we++)p=A[we],M.writeUInt16(p);return{charMap:n,subtable:M.data,maxGlyphID:x+1}}},r}(),kse=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,a,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n=new FV(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var a,i;return n==null&&(n="macroman"),a=FV.encode(t,n),(i=new WA).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},e}(),Bke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Nke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(t.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Tke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="post",e.prototype.parse=function(t){var n,a,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(a=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),Ike=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Eke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="name",e.prototype.parse=function(t){var n,a,i,s,o,l,c,u,h,d,A;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),a=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},s=h=0,d=a.length;h<d;s=++h)i=a[s],t.pos=i.offset,u=t.readString(i.length),o=new Ike(u,i),c[A=i.nameID]==null&&(c[A]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Dke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Mke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,a,i,s,o,l,c;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(t.readInt16());return h}(),this.widths=(function(){var u,h,d,A;for(A=[],u=0,h=(d=this.metrics).length;u<h;u++)s=d[u],A.push(s.advance);return A}).call(this),a=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(a));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Fse=[].slice,Rke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,a,i,s,o,l,c,u,h,d;return t in this.cache?this.cache[t]:(s=this.file.loca,n=this.file.contents,a=s.indexOf(t),(i=s.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+a,o=(l=new WA(n.read(i))).readShort(),u=l.readShort(),d=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[t]=o===-1?new Pke(l,u,d,c,h):new Lke(l,o,u,d,c,h),this.cache[t]))},e.prototype.encode=function(t,n,a){var i,s,o,l,c;for(o=[],s=[],l=0,c=n.length;l<c;l++)i=t[n[l]],s.push(o.length),i&&(o=o.concat(i.encode(a)));return s.push(o.length),{table:o,offsets:s}},e}(),Lke=function(){function r(e,t,n,a,i,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=s,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),Pke=function(){function r(e,t,n,a,i){var s,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new WA(Fse.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),kke=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return fu(e,uc),e.prototype.tag="loca",e.prototype.parse=function(t){var n,a;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],a=0,i=this.length;a<i;a+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],a=0,i=this.length;a<i;a+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var a=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<a.length;++o)if(a[o]=i,s<n.length&&n[s]==o){++s,a[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var u=new Array(4*a.length),h=0;h<a.length;++h)u[4*h+3]=255&a[h],u[4*h+2]=(65280&a[h])>>8,u[4*h+1]=(16711680&a[h])>>16,u[4*h]=(4278190080&a[h])>>24;return u},e}(),Fke=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,a,i;for(t in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=a[n];return e},r.prototype.glyphsFor=function(e){var t,n,a,i,s,o,l;for(a={},s=0,o=e.length;s<o;s++)a[i=e[s]]=this.font.glyf.glyphFor(i);for(i in t=[],a)(n=a[i])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in l=this.glyphsFor(t))n=l[i],a[i]=n;return a},r.prototype.encode=function(e,t){var n,a,i,s,o,l,c,u,h,d,A,g,p,v,m;for(a in n=kse.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),A={0:0},m=n.charMap)A[(l=m[a]).old]=l.new;for(g in d=n.maxGlyphID,s)g in A||(A[g]=d++);return u=function(y){var x,b;for(x in b={},y)b[y[x]]=x;return b}(A),h=Object.keys(u).sort(function(y,x){return y-x}),p=function(){var y,x,b;for(b=[],y=0,x=h.length;y<x;y++)o=h[y],b.push(u[o]);return b}(),i=this.font.glyf.encode(s,p,A),c=this.font.loca.encode(i.offsets,p),v={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},r}();nr.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,a,i,s;if(Array.isArray(t))return"["+function(){var o,l,c;for(c=[],o=0,l=t.length;o<l;o++)n=t[o],c.push(e.convert(n));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in i=["<<"],t)s=t[a],i.push("/"+a+" "+e.convert(s));return i.push(">>"),i.join(`
`)}return""+t},e}();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var NL=function(r,e){return NL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},NL(r,e)};function hc(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");NL(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var TL=function(){return TL=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},TL.apply(this,arguments)};function ns(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(u){try{c(n.next(u))}catch(h){s(h)}}function l(u){try{c(n.throw(u))}catch(h){s(h)}}function c(u){u.done?i(u.value):a(u.value).then(o,l)}c((n=n.apply(r,[])).next())})}function Ui(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function t_(r,e,t){if(arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||e)}var Dh=function(){function r(e,t,n,a){this.left=e,this.top=t,this.width=n,this.height=a}return r.prototype.add=function(e,t,n,a){return new r(this.left+e,this.top+t,this.width+n,this.height+a)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(a){return a.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r}(),yT=function(r,e){return Dh.fromClientRect(r,e.getBoundingClientRect())},jke=function(r){var e=r.body,t=r.documentElement;if(!e||!t)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),a=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new Dh(0,0,n,a)},xT=function(r){for(var e=[],t=0,n=r.length;t<n;){var a=r.charCodeAt(t++);if(a>=55296&&a<=56319&&t<n){var i=r.charCodeAt(t++);(i&64512)===56320?e.push(((a&1023)<<10)+(i&1023)+65536):(e.push(a),t--)}else e.push(a)}return e},xa=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],a=-1,i="";++a<t;){var s=r[a];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(a+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},jV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oke=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var r_=0;r_<jV.length;r_++)Oke[jV.charCodeAt(r_)]=r_;var OV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var n_=0;n_<OV.length;n_++)e1[OV.charCodeAt(n_)]=n_;var Uke=function(r){var e=r.length*.75,t=r.length,n,a=0,i,s,o,l;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<t;n+=4)i=e1[r.charCodeAt(n)],s=e1[r.charCodeAt(n+1)],o=e1[r.charCodeAt(n+2)],l=e1[r.charCodeAt(n+3)],u[a++]=i<<2|s>>4,u[a++]=(s&15)<<4|o>>2,u[a++]=(o&3)<<6|l&63;return c},Hke=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},Qke=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},sp=5,qj=11,xD=2,zke=qj-sp,jse=65536>>sp,Gke=1<<sp,bD=Gke-1,Vke=1024>>sp,$ke=jse+Vke,Kke=$ke,Wke=32,qke=Kke+Wke,Yke=65536>>qj,Xke=1<<zke,Zke=Xke-1,UV=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},Jke=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},eFe=function(r,e){var t=Uke(r),n=Array.isArray(t)?Qke(t):new Uint32Array(t),a=Array.isArray(t)?Hke(t):new Uint16Array(t),i=24,s=UV(a,i/2,n[4]/2),o=n[5]===2?UV(a,(i+n[4])/2):Jke(n,Math.ceil((i+n[4])/4));return new tFe(n[0],n[1],n[2],n[3],s,o)},tFe=function(){function r(e,t,n,a,i,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=s}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>sp],t=(t<<xD)+(e&bD),this.data[t];if(e<=65535)return t=this.index[jse+(e-55296>>sp)],t=(t<<xD)+(e&bD),this.data[t];if(e<this.highStart)return t=qke-Yke+(e>>qj),t=this.index[t],t+=e>>sp&Zke,t=this.index[t],t=(t<<xD)+(e&bD),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),HV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rFe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var a_=0;a_<HV.length;a_++)rFe[HV.charCodeAt(a_)]=a_;var nFe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",QV=50,aFe=1,Ose=2,Use=3,iFe=4,sFe=5,zV=7,Hse=8,GV=9,hA=10,IL=11,VV=12,EL=13,oFe=14,t1=15,DL=16,i_=17,Bx=18,lFe=19,$V=20,ML=21,Nx=22,wD=23,Gm=24,no=25,r1=26,n1=27,Vm=28,cFe=29,yg=30,uFe=31,s_=32,o_=33,RL=34,LL=35,PL=36,Kb=37,kL=38,v5=39,y5=40,SD=41,Qse=42,hFe=43,dFe=[9001,65288],zse="!",Fr="×",l_="÷",FL=eFe(nFe),Qu=[yg,PL],jL=[aFe,Ose,Use,sFe],Gse=[hA,Hse],KV=[n1,r1],AFe=jL.concat(Gse),WV=[kL,v5,y5,RL,LL],fFe=[t1,EL],gFe=function(r,e){e===void 0&&(e="strict");var t=[],n=[],a=[];return r.forEach(function(i,s){var o=FL.get(i);if(o>QV?(a.push(!0),o-=QV):a.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(s),t.push(DL);if(o===iFe||o===IL){if(s===0)return n.push(s),t.push(yg);var l=t[s-1];return AFe.indexOf(l)===-1?(n.push(n[s-1]),t.push(l)):(n.push(s),t.push(yg))}if(n.push(s),o===uFe)return t.push(e==="strict"?ML:Kb);if(o===Qse||o===cFe)return t.push(yg);if(o===hFe)return i>=131072&&i<=196605||i>=196608&&i<=262141?t.push(Kb):t.push(yg);t.push(o)}),[n,t,a]},_D=function(r,e,t,n){var a=n[t];if(Array.isArray(r)?r.indexOf(a)!==-1:r===a)for(var i=t;i<=n.length;){i++;var s=n[i];if(s===e)return!0;if(s!==hA)break}if(a===hA)for(var i=t;i>0;){i--;var o=n[i];if(Array.isArray(r)?r.indexOf(o)!==-1:r===o)for(var l=t;l<=n.length;){l++;var s=n[l];if(s===e)return!0;if(s!==hA)break}if(o!==hA)break}return!1},qV=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===hA)t--;else return n}return 0},pFe=function(r,e,t,n,a){if(t[n]===0)return Fr;var i=n-1;if(Array.isArray(a)&&a[i]===!0)return Fr;var s=i-1,o=i+1,l=e[i],c=s>=0?e[s]:0,u=e[o];if(l===Ose&&u===Use)return Fr;if(jL.indexOf(l)!==-1)return zse;if(jL.indexOf(u)!==-1||Gse.indexOf(u)!==-1)return Fr;if(qV(i,e)===Hse)return l_;if(FL.get(r[i])===IL||(l===s_||l===o_)&&FL.get(r[o])===IL||l===zV||u===zV||l===GV||[hA,EL,t1].indexOf(l)===-1&&u===GV||[i_,Bx,lFe,Gm,Vm].indexOf(u)!==-1||qV(i,e)===Nx||_D(wD,Nx,i,e)||_D([i_,Bx],ML,i,e)||_D(VV,VV,i,e))return Fr;if(l===hA)return l_;if(l===wD||u===wD)return Fr;if(u===DL||l===DL)return l_;if([EL,t1,ML].indexOf(u)!==-1||l===oFe||c===PL&&fFe.indexOf(l)!==-1||l===Vm&&u===PL||u===$V||Qu.indexOf(u)!==-1&&l===no||Qu.indexOf(l)!==-1&&u===no||l===n1&&[Kb,s_,o_].indexOf(u)!==-1||[Kb,s_,o_].indexOf(l)!==-1&&u===r1||Qu.indexOf(l)!==-1&&KV.indexOf(u)!==-1||KV.indexOf(l)!==-1&&Qu.indexOf(u)!==-1||[n1,r1].indexOf(l)!==-1&&(u===no||[Nx,t1].indexOf(u)!==-1&&e[o+1]===no)||[Nx,t1].indexOf(l)!==-1&&u===no||l===no&&[no,Vm,Gm].indexOf(u)!==-1)return Fr;if([no,Vm,Gm,i_,Bx].indexOf(u)!==-1)for(var h=i;h>=0;){var d=e[h];if(d===no)return Fr;if([Vm,Gm].indexOf(d)!==-1)h--;else break}if([n1,r1].indexOf(u)!==-1)for(var h=[i_,Bx].indexOf(l)!==-1?s:i;h>=0;){var d=e[h];if(d===no)return Fr;if([Vm,Gm].indexOf(d)!==-1)h--;else break}if(kL===l&&[kL,v5,RL,LL].indexOf(u)!==-1||[v5,RL].indexOf(l)!==-1&&[v5,y5].indexOf(u)!==-1||[y5,LL].indexOf(l)!==-1&&u===y5||WV.indexOf(l)!==-1&&[$V,r1].indexOf(u)!==-1||WV.indexOf(u)!==-1&&l===n1||Qu.indexOf(l)!==-1&&Qu.indexOf(u)!==-1||l===Gm&&Qu.indexOf(u)!==-1||Qu.concat(no).indexOf(l)!==-1&&u===Nx&&dFe.indexOf(r[o])===-1||Qu.concat(no).indexOf(u)!==-1&&l===Bx)return Fr;if(l===SD&&u===SD){for(var A=t[i],g=1;A>0&&(A--,e[A]===SD);)g++;if(g%2!==0)return Fr}return l===s_&&u===o_?Fr:l_},mFe=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=gFe(r,e.lineBreak),n=t[0],a=t[1],i=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(a=a.map(function(o){return[no,yg,Qse].indexOf(o)!==-1?Kb:o}));var s=e.wordBreak==="keep-all"?i.map(function(o,l){return o&&r[l]>=19968&&r[l]<=40959}):void 0;return[n,a,s]},vFe=function(){function r(e,t,n,a){this.codePoints=e,this.required=t===zse,this.start=n,this.end=a}return r.prototype.slice=function(){return xa.apply(void 0,this.codePoints.slice(this.start,this.end))},r}(),yFe=function(r,e){var t=xT(r),n=mFe(t,e),a=n[0],i=n[1],s=n[2],o=t.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=Fr;c<o&&(u=pFe(t,i,a,++c,s))===Fr;);if(u!==Fr||c===o){var h=new vFe(t,u,l,c);return l=c,{value:h,done:!1}}return{done:!0,value:null}}}},xFe=1,bFe=2,Kw=4,YV=8,lB=10,XV=47,H1=92,wFe=9,SFe=32,c_=34,Tx=61,_Fe=35,CFe=36,BFe=37,u_=39,h_=40,Ix=41,NFe=95,Ls=45,TFe=33,IFe=60,EFe=62,DFe=64,MFe=91,RFe=93,LFe=61,PFe=123,d_=63,kFe=125,ZV=124,FFe=126,jFe=128,JV=65533,CD=42,Pg=43,OFe=44,UFe=58,HFe=59,Wb=46,QFe=0,zFe=8,GFe=11,VFe=14,$Fe=31,KFe=127,Nc=-1,Vse=48,$se=97,Kse=101,WFe=102,qFe=117,YFe=122,Wse=65,qse=69,Yse=70,XFe=85,ZFe=90,Qi=function(r){return r>=Vse&&r<=57},JFe=function(r){return r>=55296&&r<=57343},$m=function(r){return Qi(r)||r>=Wse&&r<=Yse||r>=$se&&r<=WFe},eje=function(r){return r>=$se&&r<=YFe},tje=function(r){return r>=Wse&&r<=ZFe},rje=function(r){return eje(r)||tje(r)},nje=function(r){return r>=jFe},A_=function(r){return r===lB||r===wFe||r===SFe},cB=function(r){return rje(r)||nje(r)||r===NFe},e$=function(r){return cB(r)||Qi(r)||r===Ls},aje=function(r){return r>=QFe&&r<=zFe||r===GFe||r>=VFe&&r<=$Fe||r===KFe},Qd=function(r,e){return r!==H1?!1:e!==lB},f_=function(r,e,t){return r===Ls?cB(e)||Qd(e,t):cB(r)?!0:!!(r===H1&&Qd(r,e))},BD=function(r,e,t){return r===Pg||r===Ls?Qi(e)?!0:e===Wb&&Qi(t):Qi(r===Wb?e:r)},ije=function(r){var e=0,t=1;(r[e]===Pg||r[e]===Ls)&&(r[e]===Ls&&(t=-1),e++);for(var n=[];Qi(r[e]);)n.push(r[e++]);var a=n.length?parseInt(xa.apply(void 0,n),10):0;r[e]===Wb&&e++;for(var i=[];Qi(r[e]);)i.push(r[e++]);var s=i.length,o=s?parseInt(xa.apply(void 0,i),10):0;(r[e]===qse||r[e]===Kse)&&e++;var l=1;(r[e]===Pg||r[e]===Ls)&&(r[e]===Ls&&(l=-1),e++);for(var c=[];Qi(r[e]);)c.push(r[e++]);var u=c.length?parseInt(xa.apply(void 0,c),10):0;return t*(a+o*Math.pow(10,-s))*Math.pow(10,l*u)},sje={type:2},oje={type:3},lje={type:4},cje={type:13},uje={type:8},hje={type:21},dje={type:9},Aje={type:10},fje={type:11},gje={type:12},pje={type:14},g_={type:23},mje={type:1},vje={type:25},yje={type:24},xje={type:26},bje={type:27},wje={type:28},Sje={type:29},_je={type:31},OL={type:32},Xse=function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(xT(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==OL;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case c_:return this.consumeStringToken(c_);case _Fe:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(e$(t)||Qd(n,a)){var i=f_(t,n,a)?bFe:xFe,s=this.consumeName();return{type:5,value:s,flags:i}}break;case CFe:if(this.peekCodePoint(0)===Tx)return this.consumeCodePoint(),cje;break;case u_:return this.consumeStringToken(u_);case h_:return sje;case Ix:return oje;case CD:if(this.peekCodePoint(0)===Tx)return this.consumeCodePoint(),pje;break;case Pg:if(BD(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case OFe:return lje;case Ls:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(BD(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(f_(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Ls&&c===EFe)return this.consumeCodePoint(),this.consumeCodePoint(),yje;break;case Wb:if(BD(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case XV:if(this.peekCodePoint(0)===CD)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===CD&&(u=this.consumeCodePoint(),u===XV))return this.consumeToken();if(u===Nc)return this.consumeToken()}break;case UFe:return xje;case HFe:return bje;case IFe:if(this.peekCodePoint(0)===TFe&&this.peekCodePoint(1)===Ls&&this.peekCodePoint(2)===Ls)return this.consumeCodePoint(),this.consumeCodePoint(),vje;break;case DFe:var h=this.peekCodePoint(0),d=this.peekCodePoint(1),A=this.peekCodePoint(2);if(f_(h,d,A)){var s=this.consumeName();return{type:7,value:s}}break;case MFe:return wje;case H1:if(Qd(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case RFe:return Sje;case LFe:if(this.peekCodePoint(0)===Tx)return this.consumeCodePoint(),uje;break;case PFe:return fje;case kFe:return gje;case qFe:case XFe:var g=this.peekCodePoint(0),p=this.peekCodePoint(1);return g===Pg&&($m(p)||p===d_)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case ZV:if(this.peekCodePoint(0)===Tx)return this.consumeCodePoint(),dje;if(this.peekCodePoint(0)===ZV)return this.consumeCodePoint(),hje;break;case FFe:if(this.peekCodePoint(0)===Tx)return this.consumeCodePoint(),Aje;break;case Nc:return OL}return A_(e)?(this.consumeWhiteSpace(),_je):Qi(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):cB(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:xa(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();$m(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===d_&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(xa.apply(void 0,e.map(function(l){return l===d_?Vse:l})),16),i=parseInt(xa.apply(void 0,e.map(function(l){return l===d_?Yse:l})),16);return{type:30,start:a,end:i}}var s=parseInt(xa.apply(void 0,e),16);if(this.peekCodePoint(0)===Ls&&$m(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];$m(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var i=parseInt(xa.apply(void 0,o),16);return{type:30,start:s,end:i}}else return{type:30,start:s,end:s}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===h_?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===h_?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Nc)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===u_||t===c_){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Nc||this.peekCodePoint(0)===Ix)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),g_)}for(;;){var a=this.consumeCodePoint();if(a===Nc||a===Ix)return{type:22,value:xa.apply(void 0,e)};if(A_(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Nc||this.peekCodePoint(0)===Ix?(this.consumeCodePoint(),{type:22,value:xa.apply(void 0,e)}):(this.consumeBadUrlRemnants(),g_);if(a===c_||a===u_||a===h_||aje(a))return this.consumeBadUrlRemnants(),g_;if(a===H1)if(Qd(a,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),g_;else e.push(a)}},r.prototype.consumeWhiteSpace=function(){for(;A_(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Ix||e===Nc)return;Qd(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var a=Math.min(t,e);n+=xa.apply(void 0,this._value.splice(0,a)),e-=a}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var a=this._value[n];if(a===Nc||a===void 0||a===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(a===lB)return this._value.splice(0,n),mje;if(a===H1){var i=this._value[n+1];i!==Nc&&i!==void 0&&(i===lB?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):Qd(a,i)&&(t+=this.consumeStringSlice(n),t+=xa(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=Kw,n=this.peekCodePoint(0);for((n===Pg||n===Ls)&&e.push(this.consumeCodePoint());Qi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===Wb&&Qi(a))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=YV;Qi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===qse||n===Kse)&&((a===Pg||a===Ls)&&Qi(i)||Qi(a)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=YV;Qi(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[ije(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],a=this.peekCodePoint(0),i=this.peekCodePoint(1),s=this.peekCodePoint(2);if(f_(a,i,s)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return a===BFe?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if($m(e)){for(var t=xa(e);$m(this.peekCodePoint(0))&&t.length<6;)t+=xa(this.consumeCodePoint());A_(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||JFe(n)||n>1114111?JV:n}return e===Nc?JV:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(e$(t))e+=xa(t);else if(Qd(t,this.peekCodePoint(0)))e+=xa(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r}(),Zse=function(){function r(e){this._tokens=e}return r.create=function(e){var t=new Xse;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Bje(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?OL:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r}(),Ww=function(r){return r.type===15},gy=function(r){return r.type===17},Mn=function(r){return r.type===20},Cje=function(r){return r.type===0},UL=function(r,e){return Mn(r)&&r.value===e},Jse=function(r){return r.type!==31},L0=function(r){return r.type!==31&&r.type!==4},gu=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},Bje=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},qA=function(r){return r.type===17||r.type===15},ka=function(r){return r.type===16||qA(r)},eoe=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},Si={type:17,number:0,flags:Kw},Yj={type:16,number:50,flags:Kw},dA={type:16,number:100,flags:Kw},a1=function(r,e,t){var n=r[0],a=r[1];return[Qn(n,e),Qn(typeof a<"u"?a:n,t)]},Qn=function(r,e){if(r.type===16)return r.number/100*e;if(Ww(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},toe="deg",roe="grad",noe="rad",aoe="turn",bT={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case toe:return Math.PI*e.number/180;case roe:return Math.PI/200*e.number;case noe:return e.number;case aoe:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},ioe=function(r){return r.type===15&&(r.unit===toe||r.unit===roe||r.unit===noe||r.unit===aoe)},soe=function(r){var e=r.filter(Mn).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Si,Si];case"to top":case"bottom":return cl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Si,dA];case"to right":case"left":return cl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[dA,dA];case"to bottom":case"top":return cl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[dA,Si];case"to left":case"right":return cl(270)}return 0},cl=function(r){return Math.PI*r/180},DA={name:"color",parse:function(r,e){if(e.type===18){var t=Nje[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),a=e.value.substring(1,2),i=e.value.substring(2,3);return AA(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),a=e.value.substring(1,2),i=e.value.substring(2,3),s=e.value.substring(3,4);return AA(parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(s+s,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),a=e.value.substring(2,4),i=e.value.substring(4,6);return AA(parseInt(n,16),parseInt(a,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),a=e.value.substring(2,4),i=e.value.substring(4,6),s=e.value.substring(6,8);return AA(parseInt(n,16),parseInt(a,16),parseInt(i,16),parseInt(s,16)/255)}}if(e.type===20){var o=ph[e.value.toUpperCase()];if(typeof o<"u")return o}return ph.TRANSPARENT}},MA=function(r){return(255&r)===0},si=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,a=255&r>>24;return e<255?"rgba("+a+","+n+","+t+","+e/255+")":"rgb("+a+","+n+","+t+")"},AA=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},t$=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},r$=function(r,e){var t=e.filter(L0);if(t.length===3){var n=t.map(t$),a=n[0],i=n[1],s=n[2];return AA(a,i,s,1)}if(t.length===4){var o=t.map(t$),a=o[0],i=o[1],s=o[2],l=o[3];return AA(a,i,s,l)}return 0};function ND(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var n$=function(r,e){var t=e.filter(L0),n=t[0],a=t[1],i=t[2],s=t[3],o=(n.type===17?cl(n.number):bT.parse(r,n))/(Math.PI*2),l=ka(a)?a.number/100:0,c=ka(i)?i.number/100:0,u=typeof s<"u"&&ka(s)?Qn(s,1):1;if(l===0)return AA(c*255,c*255,c*255,1);var h=c<=.5?c*(l+1):c+l-c*l,d=c*2-h,A=ND(d,h,o+1/3),g=ND(d,h,o),p=ND(d,h,o-1/3);return AA(A*255,g*255,p*255,u)},Nje={hsl:n$,hsla:n$,rgb:r$,rgba:r$},Q1=function(r,e){return DA.parse(r,Zse.create(e).parseComponentValue())},ph={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Tje={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Mn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ije={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wT=function(r,e){var t=DA.parse(r,e[0]),n=e[1];return n&&ka(n)?{color:t,stop:n}:{color:t,stop:null}},a$=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=Si),n.stop===null&&(n.stop=dA);for(var a=[],i=0,s=0;s<r.length;s++){var o=r[s].stop;if(o!==null){var l=Qn(o,e);l>i?a.push(l):a.push(i),i=l}else a.push(null)}for(var c=null,s=0;s<a.length;s++){var u=a[s];if(u===null)c===null&&(c=s);else if(c!==null){for(var h=s-c,d=a[c-1],A=(u-d)/(h+1),g=1;g<=h;g++)a[c+g-1]=A*g;c=null}}return r.map(function(p,v){var m=p.color;return{color:m,stop:Math.max(Math.min(1,a[v]/e),0)}})},Eje=function(r,e,t){var n=e/2,a=t/2,i=Qn(r[0],e)-n,s=a-Qn(r[1],t);return(Math.atan2(s,i)+Math.PI*2)%(Math.PI*2)},Dje=function(r,e,t){var n=typeof r=="number"?r:Eje(r,e,t),a=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),i=e/2,s=t/2,o=a/2,l=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[a,i-c,i+c,s-l,s+l]},Pl=function(r,e){return Math.sqrt(r*r+e*e)},i$=function(r,e,t,n,a){var i=[[0,0],[0,e],[r,0],[r,e]];return i.reduce(function(s,o){var l=o[0],c=o[1],u=Pl(t-l,n-c);return(a?u<s.optimumDistance:u>s.optimumDistance)?{optimumCorner:o,optimumDistance:u}:s},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Mje=function(r,e,t,n,a){var i=0,s=0;switch(r.size){case 0:r.shape===0?i=s=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-a)):r.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),s=Math.min(Math.abs(t),Math.abs(t-a)));break;case 2:if(r.shape===0)i=s=Math.min(Pl(e,t),Pl(e,t-a),Pl(e-n,t),Pl(e-n,t-a));else if(r.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-a))/Math.min(Math.abs(e),Math.abs(e-n)),l=i$(n,a,e,t,!0),c=l[0],u=l[1];i=Pl(c-e,(u-t)/o),s=o*i}break;case 1:r.shape===0?i=s=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-a)):r.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),s=Math.max(Math.abs(t),Math.abs(t-a)));break;case 3:if(r.shape===0)i=s=Math.max(Pl(e,t),Pl(e,t-a),Pl(e-n,t),Pl(e-n,t-a));else if(r.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-a))/Math.max(Math.abs(e),Math.abs(e-n)),h=i$(n,a,e,t,!1),c=h[0],u=h[1];i=Pl(c-e,(u-t)/o),s=o*i}break}return Array.isArray(r.size)&&(i=Qn(r.size[0],n),s=r.size.length===2?Qn(r.size[1],a):i),[i,s]},Rje=function(r,e){var t=cl(180),n=[];return gu(e).forEach(function(a,i){if(i===0){var s=a[0];if(s.type===20&&s.value==="to"){t=soe(a);return}else if(ioe(s)){t=bT.parse(r,s);return}}var o=wT(r,a);n.push(o)}),{angle:t,stops:n,type:1}},p_=function(r,e){var t=cl(180),n=[];return gu(e).forEach(function(a,i){if(i===0){var s=a[0];if(s.type===20&&["top","left","right","bottom"].indexOf(s.value)!==-1){t=soe(a);return}else if(ioe(s)){t=(bT.parse(r,s)+cl(270))%cl(360);return}}var o=wT(r,a);n.push(o)}),{angle:t,stops:n,type:1}},Lje=function(r,e){var t=cl(180),n=[],a=1,i=0,s=3,o=[];return gu(e).forEach(function(l,c){var u=l[0];if(c===0){if(Mn(u)&&u.value==="linear"){a=1;return}else if(Mn(u)&&u.value==="radial"){a=2;return}}if(u.type===18){if(u.name==="from"){var h=DA.parse(r,u.values[0]);n.push({stop:Si,color:h})}else if(u.name==="to"){var h=DA.parse(r,u.values[0]);n.push({stop:dA,color:h})}else if(u.name==="color-stop"){var d=u.values.filter(L0);if(d.length===2){var h=DA.parse(r,d[1]),A=d[0];gy(A)&&n.push({stop:{type:16,number:A.number*100,flags:A.flags},color:h})}}}}),a===1?{angle:(t+cl(180))%cl(360),stops:n,type:a}:{size:s,shape:i,stops:n,position:o,type:a}},ooe="closest-side",loe="farthest-side",coe="closest-corner",uoe="farthest-corner",hoe="circle",doe="ellipse",Aoe="cover",foe="contain",Pje=function(r,e){var t=0,n=3,a=[],i=[];return gu(e).forEach(function(s,o){var l=!0;if(o===0){var c=!1;l=s.reduce(function(h,d){if(c)if(Mn(d))switch(d.value){case"center":return i.push(Yj),h;case"top":case"left":return i.push(Si),h;case"right":case"bottom":return i.push(dA),h}else(ka(d)||qA(d))&&i.push(d);else if(Mn(d))switch(d.value){case hoe:return t=0,!1;case doe:return t=1,!1;case"at":return c=!0,!1;case ooe:return n=0,!1;case Aoe:case loe:return n=1,!1;case foe:case coe:return n=2,!1;case uoe:return n=3,!1}else if(qA(d)||ka(d))return Array.isArray(n)||(n=[]),n.push(d),!1;return h},l)}if(l){var u=wT(r,s);a.push(u)}}),{size:n,shape:t,stops:a,position:i,type:2}},m_=function(r,e){var t=0,n=3,a=[],i=[];return gu(e).forEach(function(s,o){var l=!0;if(o===0?l=s.reduce(function(u,h){if(Mn(h))switch(h.value){case"center":return i.push(Yj),!1;case"top":case"left":return i.push(Si),!1;case"right":case"bottom":return i.push(dA),!1}else if(ka(h)||qA(h))return i.push(h),!1;return u},l):o===1&&(l=s.reduce(function(u,h){if(Mn(h))switch(h.value){case hoe:return t=0,!1;case doe:return t=1,!1;case foe:case ooe:return n=0,!1;case loe:return n=1,!1;case coe:return n=2,!1;case Aoe:case uoe:return n=3,!1}else if(qA(h)||ka(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return u},l)),l){var c=wT(r,s);a.push(c)}}),{size:n,shape:t,stops:a,position:i,type:2}},kje=function(r){return r.type===1},Fje=function(r){return r.type===2},Xj={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=goe[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function jje(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!goe[r.name])}var goe={"linear-gradient":Rje,"-moz-linear-gradient":p_,"-ms-linear-gradient":p_,"-o-linear-gradient":p_,"-webkit-linear-gradient":p_,"radial-gradient":Pje,"-moz-radial-gradient":m_,"-ms-radial-gradient":m_,"-o-radial-gradient":m_,"-webkit-radial-gradient":m_,"-webkit-gradient":Lje},Oje={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return L0(n)&&jje(n)}).map(function(n){return Xj.parse(r,n)})}},Uje={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(Mn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Hje={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return gu(e).map(function(t){return t.filter(ka)}).map(eoe)}},Qje={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return gu(e).map(function(t){return t.filter(Mn).map(function(n){return n.value}).join(" ")}).map(zje)}},zje=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Yv;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(Yv||(Yv={}));var Gje={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return gu(e).map(function(t){return t.filter(Vje)})}},Vje=function(r){return Mn(r)||ka(r)},ST=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},$je=ST("top"),Kje=ST("right"),Wje=ST("bottom"),qje=ST("left"),_T=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return eoe(t.filter(ka))}}},Yje=_T("top-left"),Xje=_T("top-right"),Zje=_T("bottom-right"),Jje=_T("bottom-left"),CT=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},e6e=CT("top"),t6e=CT("right"),r6e=CT("bottom"),n6e=CT("left"),BT=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Ww(t)?t.number:0}}},a6e=BT("top"),i6e=BT("right"),s6e=BT("bottom"),o6e=BT("left"),l6e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},c6e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},u6e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(Mn).reduce(function(t,n){return t|h6e(n.value)},0)}},h6e=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},d6e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},A6e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},uB;(function(r){r.NORMAL="normal",r.STRICT="strict"})(uB||(uB={}));var f6e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return uB.STRICT;case"normal":default:return uB.NORMAL}}},g6e={name:"line-height",initialValue:"normal",prefix:!1,type:4},s$=function(r,e){return Mn(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:ka(r)?Qn(r,e):e},p6e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:Xj.parse(r,e)}},m6e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},HL={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},NT=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},v6e=NT("top"),y6e=NT("right"),x6e=NT("bottom"),b6e=NT("left"),w6e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(Mn).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},S6e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},TT=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},_6e=TT("top"),C6e=TT("right"),B6e=TT("bottom"),N6e=TT("left"),T6e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},I6e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},E6e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&UL(e[0],"none")?[]:gu(e).map(function(t){for(var n={color:ph.TRANSPARENT,offsetX:Si,offsetY:Si,blur:Si},a=0,i=0;i<t.length;i++){var s=t[i];qA(s)?(a===0?n.offsetX=s:a===1?n.offsetY=s:n.blur=s,a++):n.color=DA.parse(r,s)}return n})}},D6e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},M6e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=P6e[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},R6e=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},L6e=function(r){var e=r.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],n=e[1];e[2],e[3];var a=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],o=e[13];return e[14],e[15],e.length===16?[t,n,a,i,s,o]:null},P6e={matrix:R6e,matrix3d:L6e},o$={type:16,number:50,flags:Kw},k6e=[o$,o$],F6e={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(ka);return t.length!==2?k6e:[t[0],t[1]]}},j6e={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},z1;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(z1||(z1={}));var O6e={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return z1.BREAK_ALL;case"keep-all":return z1.KEEP_ALL;case"normal":default:return z1.NORMAL}}},U6e={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(gy(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},poe={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},H6e={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return gy(e)?e.number:1}},Q6e={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},z6e={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(Mn).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},G6e={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(a){switch(a.type){case 20:case 0:t.push(a.value);break;case 17:t.push(a.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},V6e={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$6e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(gy(e))return e.number;if(Mn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},K6e={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(Mn).map(function(t){return t.value})}},W6e={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Wa=function(r,e){return(r&e)!==0},q6e={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},Y6e={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var n=[],a=e.filter(Jse),i=0;i<a.length;i++){var s=a[i],o=a[i+1];if(s.type===20){var l=o&&gy(o)?o.number:1;n.push({counter:s.value,increment:l})}}return n}},X6e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var t=[],n=e.filter(Jse),a=0;a<n.length;a++){var i=n[a],s=n[a+1];if(Mn(i)&&i.value!=="none"){var o=s&&gy(s)?s.number:0;t.push({counter:i.value,reset:o})}}return t}},Z6e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(Ww).map(function(t){return poe.parse(r,t)})}},J6e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var n=[],a=e.filter(Cje);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var s=a[i].value,o=a[i+1].value;n.push({open:s,close:o})}return n}},l$=function(r,e,t){if(!r)return"";var n=r[Math.min(e,r.length-1)];return n?t?n.open:n.close:""},eOe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&UL(e[0],"none")?[]:gu(e).map(function(t){for(var n={color:255,offsetX:Si,offsetY:Si,blur:Si,spread:Si,inset:!1},a=0,i=0;i<t.length;i++){var s=t[i];UL(s,"inset")?n.inset=!0:qA(s)?(a===0?n.offsetX=s:a===1?n.offsetY=s:a===2?n.blur=s:n.spread=s,a++):n.color=DA.parse(r,s)}return n})}},tOe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(Mn).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},rOe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},nOe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return Ww(e)?e.number:0}},aOe=function(){function r(e,t){var n,a;this.animationDuration=Rt(e,Z6e,t.animationDuration),this.backgroundClip=Rt(e,Tje,t.backgroundClip),this.backgroundColor=Rt(e,Ije,t.backgroundColor),this.backgroundImage=Rt(e,Oje,t.backgroundImage),this.backgroundOrigin=Rt(e,Uje,t.backgroundOrigin),this.backgroundPosition=Rt(e,Hje,t.backgroundPosition),this.backgroundRepeat=Rt(e,Qje,t.backgroundRepeat),this.backgroundSize=Rt(e,Gje,t.backgroundSize),this.borderTopColor=Rt(e,$je,t.borderTopColor),this.borderRightColor=Rt(e,Kje,t.borderRightColor),this.borderBottomColor=Rt(e,Wje,t.borderBottomColor),this.borderLeftColor=Rt(e,qje,t.borderLeftColor),this.borderTopLeftRadius=Rt(e,Yje,t.borderTopLeftRadius),this.borderTopRightRadius=Rt(e,Xje,t.borderTopRightRadius),this.borderBottomRightRadius=Rt(e,Zje,t.borderBottomRightRadius),this.borderBottomLeftRadius=Rt(e,Jje,t.borderBottomLeftRadius),this.borderTopStyle=Rt(e,e6e,t.borderTopStyle),this.borderRightStyle=Rt(e,t6e,t.borderRightStyle),this.borderBottomStyle=Rt(e,r6e,t.borderBottomStyle),this.borderLeftStyle=Rt(e,n6e,t.borderLeftStyle),this.borderTopWidth=Rt(e,a6e,t.borderTopWidth),this.borderRightWidth=Rt(e,i6e,t.borderRightWidth),this.borderBottomWidth=Rt(e,s6e,t.borderBottomWidth),this.borderLeftWidth=Rt(e,o6e,t.borderLeftWidth),this.boxShadow=Rt(e,eOe,t.boxShadow),this.color=Rt(e,l6e,t.color),this.direction=Rt(e,c6e,t.direction),this.display=Rt(e,u6e,t.display),this.float=Rt(e,d6e,t.cssFloat),this.fontFamily=Rt(e,G6e,t.fontFamily),this.fontSize=Rt(e,V6e,t.fontSize),this.fontStyle=Rt(e,W6e,t.fontStyle),this.fontVariant=Rt(e,K6e,t.fontVariant),this.fontWeight=Rt(e,$6e,t.fontWeight),this.letterSpacing=Rt(e,A6e,t.letterSpacing),this.lineBreak=Rt(e,f6e,t.lineBreak),this.lineHeight=Rt(e,g6e,t.lineHeight),this.listStyleImage=Rt(e,p6e,t.listStyleImage),this.listStylePosition=Rt(e,m6e,t.listStylePosition),this.listStyleType=Rt(e,HL,t.listStyleType),this.marginTop=Rt(e,v6e,t.marginTop),this.marginRight=Rt(e,y6e,t.marginRight),this.marginBottom=Rt(e,x6e,t.marginBottom),this.marginLeft=Rt(e,b6e,t.marginLeft),this.opacity=Rt(e,H6e,t.opacity);var i=Rt(e,w6e,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Rt(e,S6e,t.overflowWrap),this.paddingTop=Rt(e,_6e,t.paddingTop),this.paddingRight=Rt(e,C6e,t.paddingRight),this.paddingBottom=Rt(e,B6e,t.paddingBottom),this.paddingLeft=Rt(e,N6e,t.paddingLeft),this.paintOrder=Rt(e,tOe,t.paintOrder),this.position=Rt(e,I6e,t.position),this.textAlign=Rt(e,T6e,t.textAlign),this.textDecorationColor=Rt(e,Q6e,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=Rt(e,z6e,(a=t.textDecorationLine)!==null&&a!==void 0?a:t.textDecoration),this.textShadow=Rt(e,E6e,t.textShadow),this.textTransform=Rt(e,D6e,t.textTransform),this.transform=Rt(e,M6e,t.transform),this.transformOrigin=Rt(e,F6e,t.transformOrigin),this.visibility=Rt(e,j6e,t.visibility),this.webkitTextStrokeColor=Rt(e,rOe,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=Rt(e,nOe,t.webkitTextStrokeWidth),this.wordBreak=Rt(e,O6e,t.wordBreak),this.zIndex=Rt(e,U6e,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return MA(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Wa(this.display,4)||Wa(this.display,33554432)||Wa(this.display,268435456)||Wa(this.display,536870912)||Wa(this.display,67108864)||Wa(this.display,134217728)},r}(),iOe=function(){function r(e,t){this.content=Rt(e,q6e,t.content),this.quotes=Rt(e,J6e,t.quotes)}return r}(),c$=function(){function r(e,t){this.counterIncrement=Rt(e,Y6e,t.counterIncrement),this.counterReset=Rt(e,X6e,t.counterReset)}return r}(),Rt=function(r,e,t){var n=new Xse,a=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(a);var i=new Zse(n.read());switch(e.type){case 2:var s=i.parseComponentValue();return e.parse(r,Mn(s)?s.value:e.initialValue);case 0:return e.parse(r,i.parseComponentValue());case 1:return e.parse(r,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return bT.parse(r,i.parseComponentValue());case"color":return DA.parse(r,i.parseComponentValue());case"image":return Xj.parse(r,i.parseComponentValue());case"length":var o=i.parseComponentValue();return qA(o)?o:Si;case"length-percentage":var l=i.parseComponentValue();return ka(l)?l:Si;case"time":return poe.parse(r,i.parseComponentValue())}break}},sOe="data-html2canvas-debug",oOe=function(r){var e=r.getAttribute(sOe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},QL=function(r,e){var t=oOe(r);return t===1||e===t},pu=function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,QL(t,3))debugger;this.styles=new aOe(e,window.getComputedStyle(t,null)),VL(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=yT(this.context,t),QL(t,4)&&(this.flags|=16)}return r}(),lOe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",u$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var v_=0;v_<u$.length;v_++)i1[u$.charCodeAt(v_)]=v_;var cOe=function(r){var e=r.length*.75,t=r.length,n,a=0,i,s,o,l;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<t;n+=4)i=i1[r.charCodeAt(n)],s=i1[r.charCodeAt(n+1)],o=i1[r.charCodeAt(n+2)],l=i1[r.charCodeAt(n+3)],u[a++]=i<<2|s>>4,u[a++]=(s&15)<<4|o>>2,u[a++]=(o&3)<<6|l&63;return c},uOe=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},hOe=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},op=5,Zj=11,TD=2,dOe=Zj-op,moe=65536>>op,AOe=1<<op,ID=AOe-1,fOe=1024>>op,gOe=moe+fOe,pOe=gOe,mOe=32,vOe=pOe+mOe,yOe=65536>>Zj,xOe=1<<dOe,bOe=xOe-1,h$=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},wOe=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},SOe=function(r,e){var t=cOe(r),n=Array.isArray(t)?hOe(t):new Uint32Array(t),a=Array.isArray(t)?uOe(t):new Uint16Array(t),i=24,s=h$(a,i/2,n[4]/2),o=n[5]===2?h$(a,(i+n[4])/2):wOe(n,Math.ceil((i+n[4])/4));return new _Oe(n[0],n[1],n[2],n[3],s,o)},_Oe=function(){function r(e,t,n,a,i,s){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=a,this.index=i,this.data=s}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>op],t=(t<<TD)+(e&ID),this.data[t];if(e<=65535)return t=this.index[moe+(e-55296>>op)],t=(t<<TD)+(e&ID),this.data[t];if(e<this.highStart)return t=vOe-yOe+(e>>Zj),t=this.index[t],t+=e>>op&bOe,t=this.index[t],t=(t<<TD)+(e&ID),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),d$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",COe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var y_=0;y_<d$.length;y_++)COe[d$.charCodeAt(y_)]=y_;var BOe=1,ED=2,DD=3,A$=4,f$=5,NOe=7,g$=8,MD=9,RD=10,p$=11,m$=12,v$=13,y$=14,LD=15,TOe=function(r){for(var e=[],t=0,n=r.length;t<n;){var a=r.charCodeAt(t++);if(a>=55296&&a<=56319&&t<n){var i=r.charCodeAt(t++);(i&64512)===56320?e.push(((a&1023)<<10)+(i&1023)+65536):(e.push(a),t--)}else e.push(a)}return e},IOe=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],a=-1,i="";++a<t;){var s=r[a];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(a+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},EOe=SOe(lOe),Go="×",PD="÷",DOe=function(r){return EOe.get(r)},MOe=function(r,e,t){var n=t-2,a=e[n],i=e[t-1],s=e[t];if(i===ED&&s===DD)return Go;if(i===ED||i===DD||i===A$||s===ED||s===DD||s===A$)return PD;if(i===g$&&[g$,MD,p$,m$].indexOf(s)!==-1||(i===p$||i===MD)&&(s===MD||s===RD)||(i===m$||i===RD)&&s===RD||s===v$||s===f$||s===NOe||i===BOe)return Go;if(i===v$&&s===y$){for(;a===f$;)a=e[--n];if(a===y$)return Go}if(i===LD&&s===LD){for(var o=0;a===LD;)o++,a=e[--n];if(o%2===0)return Go}return PD},ROe=function(r){var e=TOe(r),t=e.length,n=0,a=0,i=e.map(DOe);return{next:function(){if(n>=t)return{done:!0,value:null};for(var s=Go;n<t&&(s=MOe(e,i,++n))===Go;);if(s!==Go||n===t){var o=IOe.apply(null,e.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},LOe=function(r){for(var e=ROe(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},POe=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var a=t.getBoundingClientRect(),i=Math.round(a.height);if(r.body.removeChild(n),i===e)return!0}}return!1},kOe=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,a=xT(n.data).map(function(l){return xa(l)}),i=0,s={},o=a.every(function(l,c){t.setStart(n,i),t.setEnd(n,i+l.length);var u=t.getBoundingClientRect();i+=l.length;var h=u.x>s.x||u.y>s.y;return s=u,c===0?!0:h});return r.body.removeChild(e),o},FOe=function(){return typeof new Image().crossOrigin<"u"},jOe=function(){return typeof new XMLHttpRequest().responseType=="string"},OOe=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},x$=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},UOe=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var a=new Image,i=e.toDataURL();a.src=i;var s=zL(t,t,0,0,a);return n.fillStyle="red",n.fillRect(0,0,t,t),b$(s).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var c=r.createElement("div");return c.style.backgroundImage="url("+i+")",c.style.height=t+"px",x$(l)?b$(zL(t,t,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),x$(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},zL=function(r,e,t,n,a){var i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return s.setAttributeNS(null,"width",r.toString()),s.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(a),s},b$=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},bi={get SUPPORT_RANGE_BOUNDS(){var r=POe(document);return Object.defineProperty(bi,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=bi.SUPPORT_RANGE_BOUNDS&&kOe(document);return Object.defineProperty(bi,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=OOe(document);return Object.defineProperty(bi,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?UOe(document):Promise.resolve(!1);return Object.defineProperty(bi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=FOe();return Object.defineProperty(bi,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=jOe();return Object.defineProperty(bi,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(bi,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(bi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},G1=function(){function r(e,t){this.text=e,this.bounds=t}return r}(),HOe=function(r,e,t,n){var a=GOe(e,t),i=[],s=0;return a.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(bi.SUPPORT_RANGE_BOUNDS){var l=w$(n,s,o.length).getClientRects();if(l.length>1){var c=Jj(o),u=0;c.forEach(function(d){i.push(new G1(d,Dh.fromDOMRectList(r,w$(n,u+s,d.length).getClientRects()))),u+=d.length})}else i.push(new G1(o,Dh.fromDOMRectList(r,l)))}else{var h=n.splitText(o.length);i.push(new G1(o,QOe(r,n))),n=h}else bi.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));s+=o.length}),i},QOe=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var a=e.parentNode;if(a){a.replaceChild(n,e);var i=yT(r,n);return n.firstChild&&a.replaceChild(n.firstChild,n),i}}return Dh.EMPTY},w$=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(r,e),a.setEnd(r,e+t),a},Jj=function(r){if(bi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return LOe(r)},zOe=function(r,e){if(bi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return $Oe(r,e)},GOe=function(r,e){return e.letterSpacing!==0?Jj(r):zOe(r,e)},VOe=[32,160,4961,65792,65793,4153,4241],$Oe=function(r,e){for(var t=yFe(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],a,i=function(){if(a.value){var s=a.value.slice(),o=xT(s),l="";o.forEach(function(c){VOe.indexOf(c)===-1?l+=xa(c):(l.length&&n.push(l),n.push(xa(c)),l="")}),l.length&&n.push(l)}};!(a=t.next()).done;)i();return n},KOe=function(){function r(e,t,n){this.text=WOe(t.data,n.textTransform),this.textBounds=HOe(e,this.text,n,t)}return r}(),WOe=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(qOe,YOe);case 2:return r.toUpperCase();default:return r}},qOe=/(^|\s|:|-|\(|\))([a-z])/g,YOe=function(r,e,t){return r.length>0?e+t.toUpperCase():r},voe=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return e}(pu),yoe=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return e}(pu),xoe=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this,i=new XMLSerializer,s=yT(t,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return e}(pu),boe=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.value=n.value,a}return e}(pu),GL=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return e}(pu),XOe=[{type:15,flags:0,unit:"px",number:3}],ZOe=[{type:16,flags:0,number:50}],JOe=function(r){return r.width>r.height?new Dh(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new Dh(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},eUe=function(r){var e=r.type===tUe?new Array(r.value.length+1).join("•"):r.value;return e.length===0?r.placeholder||"":e},hB="checkbox",dB="radio",tUe="password",S$=707406591,e6=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=eUe(n),(a.type===hB||a.type===dB)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=JOe(a.bounds)),a.type){case hB:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=XOe;break;case dB:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=ZOe;break}return a}return e}(pu),woe=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return a.value=i&&i.text||"",a}return e}(pu),Soe=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.value=n.value,a}return e}(pu),_oe=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Boe(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Q1(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):ph.TRANSPARENT,s=n.contentWindow.document.body?Q1(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):ph.TRANSPARENT;a.backgroundColor=MA(i)?MA(s)?a.styles.backgroundColor:s:i}}catch{}return a}return e}(pu),rUe=["OL","UL","MENU"],x5=function(r,e,t,n){for(var a=e.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,Noe(a)&&a.data.trim().length>0)t.textNodes.push(new KOe(r,a,t.styles));else if(Nv(a))if(Doe(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return x5(r,o,t,n)});else{var s=Coe(r,a);s.styles.isVisible()&&(nUe(a,s,n)?s.flags|=4:aUe(s.styles)&&(s.flags|=2),rUe.indexOf(a.tagName)!==-1&&(s.flags|=8),t.elements.push(s),a.slot,a.shadowRoot?x5(r,a.shadowRoot,s,n):!AB(a)&&!Toe(a)&&!fB(a)&&x5(r,a,s,n))}},Coe=function(r,e){return $L(e)?new voe(r,e):Ioe(e)?new yoe(r,e):Toe(e)?new xoe(r,e):iUe(e)?new boe(r,e):sUe(e)?new GL(r,e):oUe(e)?new e6(r,e):fB(e)?new woe(r,e):AB(e)?new Soe(r,e):Eoe(e)?new _oe(r,e):new pu(r,e)},Boe=function(r,e){var t=Coe(r,e);return t.flags|=4,x5(r,e,t,t),t},nUe=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||t6(r)&&t.styles.isTransparent()},aUe=function(r){return r.isPositioned()||r.isFloating()},Noe=function(r){return r.nodeType===Node.TEXT_NODE},Nv=function(r){return r.nodeType===Node.ELEMENT_NODE},VL=function(r){return Nv(r)&&typeof r.style<"u"&&!b5(r)},b5=function(r){return typeof r.className=="object"},iUe=function(r){return r.tagName==="LI"},sUe=function(r){return r.tagName==="OL"},oUe=function(r){return r.tagName==="INPUT"},lUe=function(r){return r.tagName==="HTML"},Toe=function(r){return r.tagName==="svg"},t6=function(r){return r.tagName==="BODY"},Ioe=function(r){return r.tagName==="CANVAS"},_$=function(r){return r.tagName==="VIDEO"},$L=function(r){return r.tagName==="IMG"},Eoe=function(r){return r.tagName==="IFRAME"},C$=function(r){return r.tagName==="STYLE"},cUe=function(r){return r.tagName==="SCRIPT"},AB=function(r){return r.tagName==="TEXTAREA"},fB=function(r){return r.tagName==="SELECT"},Doe=function(r){return r.tagName==="SLOT"},B$=function(r){return r.tagName.indexOf("-")>0},uUe=function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},r.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},r.prototype.pop=function(e){var t=this;e.forEach(function(n){return t.counters[n].pop()})},r.prototype.parse=function(e){var t=this,n=e.counterIncrement,a=e.counterReset,i=!0;n!==null&&n.forEach(function(o){var l=t.counters[o.counter];l&&o.increment!==0&&(i=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var s=[];return i&&a.forEach(function(o){var l=t.counters[o.counter];s.push(o.counter),l||(l=t.counters[o.counter]=[]),l.push(o.reset)}),s},r}(),N$={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},T$={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},hUe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},dUe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Km=function(r,e,t,n,a,i){return r<e||r>t?qb(r,a,i.length>0):n.integers.reduce(function(s,o,l){for(;r>=o;)r-=o,s+=n.values[l];return s},"")+i},Moe=function(r,e,t,n){var a="";do t||r--,a=n(r)+a,r/=e;while(r*e>=e);return a},ya=function(r,e,t,n,a){var i=t-e+1;return(r<0?"-":"")+(Moe(Math.abs(r),i,n,function(s){return xa(Math.floor(s%i)+e)})+a)},eg=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return Moe(Math.abs(r),n,!1,function(a){return e[Math.floor(a%n)]})+t},lv=1,Ld=2,Pd=4,s1=8,zu=function(r,e,t,n,a,i){if(r<-9999||r>9999)return qb(r,4,a.length>0);var s=Math.abs(r),o=a;if(s===0)return e[0]+o;for(var l=0;s>0&&l<=4;l++){var c=s%10;c===0&&Wa(i,lv)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&Wa(i,Ld)||c===1&&l===1&&Wa(i,Pd)&&r>100||c===1&&l>1&&Wa(i,s1)?o=e[c]+(l>0?t[l-1]:"")+o:c===1&&l>0&&(o=t[l-1]+o),s=Math.floor(s/10)}return(r<0?n:"")+o},I$="十百千萬",E$="拾佰仟萬",D$="マイナス",kD="마이너스",qb=function(r,e,t){var n=t?". ":"",a=t?"、":"",i=t?", ":"",s=t?" ":"";switch(e){case 0:return"•"+s;case 1:return"◦"+s;case 2:return"◾"+s;case 5:var o=ya(r,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return eg(r,"〇一二三四五六七八九",a);case 6:return Km(r,1,3999,N$,3,n).toLowerCase();case 7:return Km(r,1,3999,N$,3,n);case 8:return ya(r,945,969,!1,n);case 9:return ya(r,97,122,!1,n);case 10:return ya(r,65,90,!1,n);case 11:return ya(r,1632,1641,!0,n);case 12:case 49:return Km(r,1,9999,T$,3,n);case 35:return Km(r,1,9999,T$,3,n).toLowerCase();case 13:return ya(r,2534,2543,!0,n);case 14:case 30:return ya(r,6112,6121,!0,n);case 15:return eg(r,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return eg(r,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return zu(r,"零一二三四五六七八九",I$,"負",a,Ld|Pd|s1);case 47:return zu(r,"零壹貳參肆伍陸柒捌玖",E$,"負",a,lv|Ld|Pd|s1);case 42:return zu(r,"零一二三四五六七八九",I$,"负",a,Ld|Pd|s1);case 41:return zu(r,"零壹贰叁肆伍陆柒捌玖",E$,"负",a,lv|Ld|Pd|s1);case 26:return zu(r,"〇一二三四五六七八九","十百千万",D$,a,0);case 25:return zu(r,"零壱弐参四伍六七八九","拾百千万",D$,a,lv|Ld|Pd);case 31:return zu(r,"영일이삼사오육칠팔구","십백천만",kD,i,lv|Ld|Pd);case 33:return zu(r,"零一二三四五六七八九","十百千萬",kD,i,0);case 32:return zu(r,"零壹貳參四五六七八九","拾百千",kD,i,lv|Ld|Pd);case 18:return ya(r,2406,2415,!0,n);case 20:return Km(r,1,19999,dUe,3,n);case 21:return ya(r,2790,2799,!0,n);case 22:return ya(r,2662,2671,!0,n);case 22:return Km(r,1,10999,hUe,3,n);case 23:return eg(r,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return eg(r,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return ya(r,3302,3311,!0,n);case 28:return eg(r,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return eg(r,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return ya(r,3792,3801,!0,n);case 37:return ya(r,6160,6169,!0,n);case 38:return ya(r,4160,4169,!0,n);case 39:return ya(r,2918,2927,!0,n);case 40:return ya(r,1776,1785,!0,n);case 43:return ya(r,3046,3055,!0,n);case 44:return ya(r,3174,3183,!0,n);case 45:return ya(r,3664,3673,!0,n);case 46:return ya(r,3872,3881,!0,n);case 3:default:return ya(r,48,57,!0,n)}},Roe="data-html2canvas-ignore",M$=function(){function r(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new uUe,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,t){var n=this,a=AUe(e,t);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,s=e.defaultView.pageYOffset,o=a.contentWindow,l=o.document,c=pUe(a).then(function(){return ns(n,void 0,void 0,function(){var u,h;return Ui(this,function(d){switch(d.label){case 0:return this.scrolledElements.forEach(xUe),o&&(o.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==t.top||o.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),u=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:d.sent(),d.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,gUe(l)]:[3,4];case 3:d.sent(),d.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,h)}).then(function(){return a})]:[2,a]}})})});return l.open(),l.write(vUe(document.doctype)+"<html></html>"),yUe(this.referenceElement.ownerDocument,i,s),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},r.prototype.createElementClone=function(e){if(QL(e,2))debugger;if(Ioe(e))return this.createCanvasClone(e);if(_$(e))return this.createVideoClone(e);if(C$(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return $L(t)&&($L(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),B$(t)?this.createCustomElementClone(t):t},r.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return FD(e.style,t),t},r.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(i,s){return s&&typeof s.cssText=="string"?i+s.cssText:i},""),a=e.cloneNode(!1);return a.textContent=n,a}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var a=e.cloneNode(!1);try{a.width=e.width,a.height=e.height;var i=e.getContext("2d"),s=a.getContext("2d");if(s)if(!this.options.allowTaint&&i)s.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}s.drawImage(e,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return a},r.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var a=e.ownerDocument.createElement("canvas");return a.width=e.offsetWidth,a.height=e.offsetHeight,a},r.prototype.appendChildNode=function(e,t,n){(!Nv(t)||!cUe(t)&&!t.hasAttribute(Roe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!Nv(t)||!C$(t))&&e.appendChild(this.cloneNode(t,n))},r.prototype.cloneChildNodes=function(e,t,n){for(var a=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(Nv(i)&&Doe(i)&&typeof i.assignedNodes=="function"){var s=i.assignedNodes();s.length&&s.forEach(function(o){return a.appendChildNode(t,o,n)})}else this.appendChildNode(t,i,n)},r.prototype.cloneNode=function(e,t){if(Noe(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Nv(e)&&(VL(e)||b5(e))){var a=this.createElementClone(e);a.style.transitionProperty="none";var i=n.getComputedStyle(e),s=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&VL(a)&&(this.clonedReferenceElement=a),t6(a)&&SUe(a);var l=this.counters.parse(new c$(this.context,i)),c=this.resolvePseudoContent(e,a,s,V1.BEFORE);B$(e)&&(t=!0),_$(e)||this.cloneChildNodes(e,a,t),c&&a.insertBefore(c,a.firstChild);var u=this.resolvePseudoContent(e,a,o,V1.AFTER);return u&&a.appendChild(u),this.counters.pop(l),(i&&(this.options.copyStyles||b5(e))&&!Eoe(e)||t)&&FD(i,a),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([a,e.scrollLeft,e.scrollTop]),(AB(e)||fB(e))&&(AB(a)||fB(a))&&(a.value=e.value),a}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,t,n,a){var i=this;if(n){var s=n.content,o=t.ownerDocument;if(!(!o||!s||s==="none"||s==="-moz-alt-content"||n.display==="none")){this.counters.parse(new c$(this.context,n));var l=new iOe(this.context,n),c=o.createElement("html2canvaspseudoelement");FD(n,c),l.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var d=o.createElement("img");d.src=h.value,d.style.opacity="1",c.appendChild(d)}else if(h.type===18){if(h.name==="attr"){var A=h.values.filter(Mn);A.length&&c.appendChild(o.createTextNode(e.getAttribute(A[0].value)||""))}else if(h.name==="counter"){var g=h.values.filter(L0),p=g[0],v=g[1];if(p&&Mn(p)){var m=i.counters.getCounterValue(p.value),y=v&&Mn(v)?HL.parse(i.context,v.value):3;c.appendChild(o.createTextNode(qb(m,y,!1)))}}else if(h.name==="counters"){var x=h.values.filter(L0),p=x[0],b=x[1],v=x[2];if(p&&Mn(p)){var S=i.counters.getCounterValues(p.value),_=v&&Mn(v)?HL.parse(i.context,v.value):3,C=b&&b.type===0?b.value:"",w=S.map(function(T){return qb(T,_,!1)}).join(C);c.appendChild(o.createTextNode(w))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(l$(l.quotes,i.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(l$(l.quotes,--i.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=KL+" "+WL;var u=a===V1.BEFORE?" "+KL:" "+WL;return b5(t)?t.className.baseValue+=u:t.className+=u,c}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r}(),V1;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(V1||(V1={}));var AUe=function(r,e){var t=r.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(Roe,"true"),r.body.appendChild(t),t},fUe=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},gUe=function(r){return Promise.all([].slice.call(r.images,0).map(fUe))},pUe=function(r){return new Promise(function(e,t){var n=r.contentWindow;if(!n)return t("No window assigned for iframe");var a=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var i=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(i),e(r))},50)}})},mUe=["all","d","content"],FD=function(r,e){for(var t=r.length-1;t>=0;t--){var n=r.item(t);mUe.indexOf(n)===-1&&e.style.setProperty(n,r.getPropertyValue(n))}return e},vUe=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},yUe=function(r,e,t){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||t!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,t)},xUe=function(r){var e=r[0],t=r[1],n=r[2];e.scrollLeft=t,e.scrollTop=n},bUe=":before",wUe=":after",KL="___html2canvas___pseudoelement_before",WL="___html2canvas___pseudoelement_after",R$=`{
    content: "" !important;
    display: none !important;
}`,SUe=function(r){_Ue(r,"."+KL+bUe+R$+`
         .`+WL+wUe+R$)},_Ue=function(r,e){var t=r.ownerDocument;if(t){var n=t.createElement("style");n.textContent=e,r.appendChild(n)}},Loe=function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r}(),CUe=function(){function r(e,t){this.context=e,this._options=t,this._cache={}}return r.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(OD(e)||IUe(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return ns(this,void 0,void 0,function(){var t,n,a,i,s=this;return Ui(this,function(o){switch(o.label){case 0:return t=Loe.isSameOrigin(e),n=!jD(e)&&this._options.useCORS===!0&&bi.SUPPORT_CORS_IMAGES&&!t,a=!jD(e)&&!t&&!OD(e)&&typeof this._options.proxy=="string"&&bi.SUPPORT_CORS_XHR&&!n,!t&&this._options.allowTaint===!1&&!jD(e)&&!OD(e)&&!a&&!n?[2]:(i=e,a?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var u=new Image;u.onload=function(){return l(u)},u.onerror=c,(EUe(i)||n)&&(u.crossOrigin="anonymous"),u.src=i,u.complete===!0&&setTimeout(function(){return l(u)},500),s._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=e.substring(0,256);return new Promise(function(i,s){var o=bi.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")i(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return i(h.result)},!1),h.addEventListener("error",function(d){return s(d)},!1),h.readAsDataURL(l.response)}else s("Failed to proxy resource "+a+" with status code "+l.status)},l.onerror=s;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),t._options.imageTimeout){var u=t._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return s("Timed out ("+u+"ms) proxying "+a)}}l.send()})},r}(),BUe=/^data:image\/svg\+xml/i,NUe=/^data:image\/.*;base64,/i,TUe=/^data:image\/.*/i,IUe=function(r){return bi.SUPPORT_SVG_DRAWING||!DUe(r)},jD=function(r){return TUe.test(r)},EUe=function(r){return NUe.test(r)},OD=function(r){return r.substr(0,4)==="blob"},DUe=function(r){return r.substr(-3).toLowerCase()==="svg"||BUe.test(r)},Tt=function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r}(),Wm=function(r,e,t){return new Tt(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},x_=function(){function r(e,t,n,a){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=a}return r.prototype.subdivide=function(e,t){var n=Wm(this.start,this.startControl,e),a=Wm(this.startControl,this.endControl,e),i=Wm(this.endControl,this.end,e),s=Wm(n,a,e),o=Wm(a,i,e),l=Wm(s,o,e);return t?new r(this.start,n,s,l):new r(l,o,i,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r}(),Jo=function(r){return r.type===1},MUe=function(){function r(e){var t=e.styles,n=e.bounds,a=a1(t.borderTopLeftRadius,n.width,n.height),i=a[0],s=a[1],o=a1(t.borderTopRightRadius,n.width,n.height),l=o[0],c=o[1],u=a1(t.borderBottomRightRadius,n.width,n.height),h=u[0],d=u[1],A=a1(t.borderBottomLeftRadius,n.width,n.height),g=A[0],p=A[1],v=[];v.push((i+l)/n.width),v.push((g+h)/n.width),v.push((s+p)/n.height),v.push((c+d)/n.height);var m=Math.max.apply(Math,v);m>1&&(i/=m,s/=m,l/=m,c/=m,h/=m,d/=m,g/=m,p/=m);var y=n.width-l,x=n.height-d,b=n.width-h,S=n.height-p,_=t.borderTopWidth,C=t.borderRightWidth,w=t.borderBottomWidth,B=t.borderLeftWidth,D=Qn(t.paddingTop,e.bounds.width),T=Qn(t.paddingRight,e.bounds.width),E=Qn(t.paddingBottom,e.bounds.width),R=Qn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||s>0?Xn(n.left+B/3,n.top+_/3,i-B/3,s-_/3,cn.TOP_LEFT):new Tt(n.left+B/3,n.top+_/3),this.topRightBorderDoubleOuterBox=i>0||s>0?Xn(n.left+y,n.top+_/3,l-C/3,c-_/3,cn.TOP_RIGHT):new Tt(n.left+n.width-C/3,n.top+_/3),this.bottomRightBorderDoubleOuterBox=h>0||d>0?Xn(n.left+b,n.top+x,h-C/3,d-w/3,cn.BOTTOM_RIGHT):new Tt(n.left+n.width-C/3,n.top+n.height-w/3),this.bottomLeftBorderDoubleOuterBox=g>0||p>0?Xn(n.left+B/3,n.top+S,g-B/3,p-w/3,cn.BOTTOM_LEFT):new Tt(n.left+B/3,n.top+n.height-w/3),this.topLeftBorderDoubleInnerBox=i>0||s>0?Xn(n.left+B*2/3,n.top+_*2/3,i-B*2/3,s-_*2/3,cn.TOP_LEFT):new Tt(n.left+B*2/3,n.top+_*2/3),this.topRightBorderDoubleInnerBox=i>0||s>0?Xn(n.left+y,n.top+_*2/3,l-C*2/3,c-_*2/3,cn.TOP_RIGHT):new Tt(n.left+n.width-C*2/3,n.top+_*2/3),this.bottomRightBorderDoubleInnerBox=h>0||d>0?Xn(n.left+b,n.top+x,h-C*2/3,d-w*2/3,cn.BOTTOM_RIGHT):new Tt(n.left+n.width-C*2/3,n.top+n.height-w*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||p>0?Xn(n.left+B*2/3,n.top+S,g-B*2/3,p-w*2/3,cn.BOTTOM_LEFT):new Tt(n.left+B*2/3,n.top+n.height-w*2/3),this.topLeftBorderStroke=i>0||s>0?Xn(n.left+B/2,n.top+_/2,i-B/2,s-_/2,cn.TOP_LEFT):new Tt(n.left+B/2,n.top+_/2),this.topRightBorderStroke=i>0||s>0?Xn(n.left+y,n.top+_/2,l-C/2,c-_/2,cn.TOP_RIGHT):new Tt(n.left+n.width-C/2,n.top+_/2),this.bottomRightBorderStroke=h>0||d>0?Xn(n.left+b,n.top+x,h-C/2,d-w/2,cn.BOTTOM_RIGHT):new Tt(n.left+n.width-C/2,n.top+n.height-w/2),this.bottomLeftBorderStroke=g>0||p>0?Xn(n.left+B/2,n.top+S,g-B/2,p-w/2,cn.BOTTOM_LEFT):new Tt(n.left+B/2,n.top+n.height-w/2),this.topLeftBorderBox=i>0||s>0?Xn(n.left,n.top,i,s,cn.TOP_LEFT):new Tt(n.left,n.top),this.topRightBorderBox=l>0||c>0?Xn(n.left+y,n.top,l,c,cn.TOP_RIGHT):new Tt(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||d>0?Xn(n.left+b,n.top+x,h,d,cn.BOTTOM_RIGHT):new Tt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||p>0?Xn(n.left,n.top+S,g,p,cn.BOTTOM_LEFT):new Tt(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||s>0?Xn(n.left+B,n.top+_,Math.max(0,i-B),Math.max(0,s-_),cn.TOP_LEFT):new Tt(n.left+B,n.top+_),this.topRightPaddingBox=l>0||c>0?Xn(n.left+Math.min(y,n.width-C),n.top+_,y>n.width+C?0:Math.max(0,l-C),Math.max(0,c-_),cn.TOP_RIGHT):new Tt(n.left+n.width-C,n.top+_),this.bottomRightPaddingBox=h>0||d>0?Xn(n.left+Math.min(b,n.width-B),n.top+Math.min(x,n.height-w),Math.max(0,h-C),Math.max(0,d-w),cn.BOTTOM_RIGHT):new Tt(n.left+n.width-C,n.top+n.height-w),this.bottomLeftPaddingBox=g>0||p>0?Xn(n.left+B,n.top+Math.min(S,n.height-w),Math.max(0,g-B),Math.max(0,p-w),cn.BOTTOM_LEFT):new Tt(n.left+B,n.top+n.height-w),this.topLeftContentBox=i>0||s>0?Xn(n.left+B+R,n.top+_+D,Math.max(0,i-(B+R)),Math.max(0,s-(_+D)),cn.TOP_LEFT):new Tt(n.left+B+R,n.top+_+D),this.topRightContentBox=l>0||c>0?Xn(n.left+Math.min(y,n.width+B+R),n.top+_+D,y>n.width+B+R?0:l-B+R,c-(_+D),cn.TOP_RIGHT):new Tt(n.left+n.width-(C+T),n.top+_+D),this.bottomRightContentBox=h>0||d>0?Xn(n.left+Math.min(b,n.width-(B+R)),n.top+Math.min(x,n.height+_+D),Math.max(0,h-(C+T)),d-(w+E),cn.BOTTOM_RIGHT):new Tt(n.left+n.width-(C+T),n.top+n.height-(w+E)),this.bottomLeftContentBox=g>0||p>0?Xn(n.left+B+R,n.top+S,Math.max(0,g-(B+R)),p-(w+E),cn.BOTTOM_LEFT):new Tt(n.left+B+R,n.top+n.height-(w+E))}return r}(),cn;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(cn||(cn={}));var Xn=function(r,e,t,n,a){var i=4*((Math.sqrt(2)-1)/3),s=t*i,o=n*i,l=r+t,c=e+n;switch(a){case cn.TOP_LEFT:return new x_(new Tt(r,c),new Tt(r,c-o),new Tt(l-s,e),new Tt(l,e));case cn.TOP_RIGHT:return new x_(new Tt(r,e),new Tt(r+s,e),new Tt(l,c-o),new Tt(l,c));case cn.BOTTOM_RIGHT:return new x_(new Tt(l,e),new Tt(l,e+o),new Tt(r+s,c),new Tt(r,c));case cn.BOTTOM_LEFT:default:return new x_(new Tt(l,c),new Tt(l-s,c),new Tt(r,e+o),new Tt(r,e))}},gB=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},RUe=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},pB=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},LUe=function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r}(),b_=function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r}(),PUe=function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r}(),kUe=function(r){return r.type===0},Poe=function(r){return r.type===1},FUe=function(r){return r.type===2},L$=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},jUe=function(r,e,t,n,a){return r.map(function(i,s){switch(s){case 0:return i.add(e,t);case 1:return i.add(e+n,t);case 2:return i.add(e+n,t+a);case 3:return i.add(e,t+a)}return i})},koe=function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r}(),Foe=function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new MUe(this.container),this.container.styles.opacity<1&&this.effects.push(new PUe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new LUe(n,a,i))}if(this.container.styles.overflowX!==0){var s=gB(this.curves),o=pB(this.curves);L$(s,o)?this.effects.push(new b_(s,6)):(this.effects.push(new b_(s,2)),this.effects.push(new b_(o,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var i=n.effects.filter(function(l){return!Poe(l)});if(t||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,i),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var s=gB(n.curves),o=pB(n.curves);L$(s,o)||a.unshift(new b_(o,6))}}else a.unshift.apply(a,i);n=n.parent}return a.filter(function(l){return Wa(l.target,e)})},r}(),qL=function(r,e,t,n){r.container.elements.forEach(function(a){var i=Wa(a.flags,4),s=Wa(a.flags,2),o=new Foe(a,r);Wa(a.styles.display,2048)&&n.push(o);var l=Wa(a.flags,8)?[]:n;if(i||s){var c=i||a.styles.isPositioned()?t:e,u=new koe(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var h=a.styles.zIndex.order;if(h<0){var d=0;c.negativeZIndex.some(function(g,p){return h>g.element.container.styles.zIndex.order?(d=p,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(h>0){var A=0;c.positiveZIndex.some(function(g,p){return h>=g.element.container.styles.zIndex.order?(A=p+1,!1):A>0}),c.positiveZIndex.splice(A,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else a.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);qL(o,u,i?u:t,l)}else a.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),qL(o,e,t,l);Wa(a.flags,8)&&joe(a,l)})},joe=function(r,e){for(var t=r instanceof GL?r.start:1,n=r instanceof GL?r.reversed:!1,a=0;a<e.length;a++){var i=e[a];i.container instanceof boe&&typeof i.container.value=="number"&&i.container.value!==0&&(t=i.container.value),i.listValue=qb(t,i.container.styles.listStyleType,!0),t+=n?-1:1}},OUe=function(r){var e=new Foe(r,null),t=new koe(e),n=[];return qL(e,t,t,n),joe(e.container,n),t},P$=function(r,e){switch(e){case 0:return ul(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return ul(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return ul(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return ul(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},UUe=function(r,e){switch(e){case 0:return ul(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return ul(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return ul(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return ul(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},HUe=function(r,e){switch(e){case 0:return ul(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return ul(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return ul(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return ul(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},QUe=function(r,e){switch(e){case 0:return w_(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return w_(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return w_(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return w_(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},w_=function(r,e){var t=[];return Jo(r)?t.push(r.subdivide(.5,!1)):t.push(r),Jo(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},ul=function(r,e,t,n){var a=[];return Jo(r)?a.push(r.subdivide(.5,!1)):a.push(r),Jo(t)?a.push(t.subdivide(.5,!0)):a.push(t),Jo(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Jo(e)?a.push(e.subdivide(.5,!1).reverse()):a.push(e),a},Ooe=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},mB=function(r){var e=r.styles,t=r.bounds,n=Qn(e.paddingLeft,t.width),a=Qn(e.paddingRight,t.width),i=Qn(e.paddingTop,t.width),s=Qn(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+a),-(e.borderTopWidth+e.borderBottomWidth+i+s))},zUe=function(r,e){return r===0?e.bounds:r===2?mB(e):Ooe(e)},GUe=function(r,e){return r===0?e.bounds:r===2?mB(e):Ooe(e)},UD=function(r,e,t){var n=zUe(cv(r.styles.backgroundOrigin,e),r),a=GUe(cv(r.styles.backgroundClip,e),r),i=VUe(cv(r.styles.backgroundSize,e),t,n),s=i[0],o=i[1],l=a1(cv(r.styles.backgroundPosition,e),n.width-s,n.height-o),c=$Ue(cv(r.styles.backgroundRepeat,e),l,i,n,a),u=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[c,u,h,s,o]},qm=function(r){return Mn(r)&&r.value===Yv.AUTO},S_=function(r){return typeof r=="number"},VUe=function(r,e,t){var n=e[0],a=e[1],i=e[2],s=r[0],o=r[1];if(!s)return[0,0];if(ka(s)&&o&&ka(o))return[Qn(s,t.width),Qn(o,t.height)];var l=S_(i);if(Mn(s)&&(s.value===Yv.CONTAIN||s.value===Yv.COVER)){if(S_(i)){var c=t.width/t.height;return c<i!=(s.value===Yv.COVER)?[t.width,t.width/i]:[t.height*i,t.height]}return[t.width,t.height]}var u=S_(n),h=S_(a),d=u||h;if(qm(s)&&(!o||qm(o))){if(u&&h)return[n,a];if(!l&&!d)return[t.width,t.height];if(d&&l){var A=u?n:a*i,g=h?a:n/i;return[A,g]}var p=u?n:t.width,v=h?a:t.height;return[p,v]}if(l){var m=0,y=0;return ka(s)?m=Qn(s,t.width):ka(o)&&(y=Qn(o,t.height)),qm(s)?m=y*i:(!o||qm(o))&&(y=m/i),[m,y]}var x=null,b=null;if(ka(s)?x=Qn(s,t.width):o&&ka(o)&&(b=Qn(o,t.height)),x!==null&&(!o||qm(o))&&(b=u&&h?x/n*a:t.height),b!==null&&qm(s)&&(x=u&&h?b/a*n:t.width),x!==null&&b!==null)return[x,b];throw new Error("Unable to calculate background-size for element")},cv=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},$Ue=function(r,e,t,n,a){var i=e[0],s=e[1],o=t[0],l=t[1];switch(r){case 2:return[new Tt(Math.round(n.left),Math.round(n.top+s)),new Tt(Math.round(n.left+n.width),Math.round(n.top+s)),new Tt(Math.round(n.left+n.width),Math.round(l+n.top+s)),new Tt(Math.round(n.left),Math.round(l+n.top+s))];case 3:return[new Tt(Math.round(n.left+i),Math.round(n.top)),new Tt(Math.round(n.left+i+o),Math.round(n.top)),new Tt(Math.round(n.left+i+o),Math.round(n.height+n.top)),new Tt(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new Tt(Math.round(n.left+i),Math.round(n.top+s)),new Tt(Math.round(n.left+i+o),Math.round(n.top+s)),new Tt(Math.round(n.left+i+o),Math.round(n.top+s+l)),new Tt(Math.round(n.left+i),Math.round(n.top+s+l))];default:return[new Tt(Math.round(a.left),Math.round(a.top)),new Tt(Math.round(a.left+a.width),Math.round(a.top)),new Tt(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Tt(Math.round(a.left),Math.round(a.height+a.top))]}},KUe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",k$="Hidden Text",WUe=function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),a=this._document.createElement("img"),i=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),a.src=KUe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(k$)),n.appendChild(i),n.appendChild(a);var o=a.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(k$)),n.style.lineHeight="normal",a.style.verticalAlign="super";var l=a.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:l}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r}(),Uoe=function(){function r(e,t){this.context=e,this.options=t}return r}(),qUe=1e4,YUe=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new WUe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(a){return n.applyEffect(a)})},e.prototype.applyEffect=function(t){this.ctx.save(),FUe(t)&&(this.ctx.globalAlpha=t.opacity),kUe(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Poe(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return ns(this,void 0,void 0,function(){var n;return Ui(this,function(a){switch(a.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return ns(this,void 0,void 0,function(){return Ui(this,function(n){switch(n.label){case 0:if(Wa(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,a){var i=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+a);else{var s=Jj(t.text);s.reduce(function(o,l){return i.ctx.fillText(l,o,t.bounds.top+a),o+i.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(s){return s==="normal"||s==="small-caps"}).join(""),a=t8e(t.fontFamily).join(", "),i=Ww(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,i,a].join(" "),a,i]},e.prototype.renderTextNode=function(t,n){return ns(this,void 0,void 0,function(){var a,i,s,o,l,c,u,h,d=this;return Ui(this,function(A){return a=this.createFontStyle(n),i=a[0],s=a[1],o=a[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(s,o),c=l.baseline,u=l.middle,h=n.paintOrder,t.textBounds.forEach(function(g){h.forEach(function(p){switch(p){case 0:d.ctx.fillStyle=si(n.color),d.renderTextWithLetterSpacing(g,n.letterSpacing,c);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(m){d.ctx.shadowColor=si(m.color),d.ctx.shadowOffsetX=m.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=m.offsetY.number*d.options.scale,d.ctx.shadowBlur=m.blur.number,d.renderTextWithLetterSpacing(g,n.letterSpacing,c)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),n.textDecorationLine.length&&(d.ctx.fillStyle=si(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(m){switch(m){case 1:d.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+c),g.bounds.width,1);break;case 2:d.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:d.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+u),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(d.ctx.strokeStyle=si(n.webkitTextStrokeColor),d.ctx.lineWidth=n.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+c)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,a){if(a&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var i=mB(t),s=pB(n);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,t.intrinsicWidth,t.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return ns(this,void 0,void 0,function(){var n,a,i,s,o,l,y,y,c,u,h,d,b,A,g,S,p,v,m,y,x,b,S;return Ui(this,function(_){switch(_.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,a=t.curves,i=n.styles,s=0,o=n.textNodes,_.label=1;case 1:return s<o.length?(l=o[s],[4,this.renderTextNode(l,i)]):[3,4];case 2:_.sent(),_.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof voe))return[3,8];_.label=5;case 5:return _.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return y=_.sent(),this.renderReplacedElement(n,a,y),[3,8];case 7:return _.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof yoe&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof xoe))return[3,12];_.label=9;case 9:return _.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return y=_.sent(),this.renderReplacedElement(n,a,y),[3,12];case 11:return _.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof _oe&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=_.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),_.label=14;case 14:if(n instanceof e6&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===hB?n.checked&&(this.ctx.save(),this.path([new Tt(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Tt(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Tt(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Tt(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Tt(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Tt(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Tt(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=si(S$),this.ctx.fill(),this.ctx.restore()):n.type===dB&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=si(S$),this.ctx.fill(),this.ctx.restore())),XUe(n)&&n.value.length){switch(d=this.createFontStyle(i),b=d[0],A=d[1],g=this.fontMetrics.getMetrics(b,A).baseline,this.ctx.font=b,this.ctx.fillStyle=si(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=JUe(n.styles.textAlign),S=mB(n),p=0,n.styles.textAlign){case 1:p+=S.width/2;break;case 2:p+=S.width;break}v=S.add(p,0,0,-S.height/2+1),this.ctx.save(),this.path([new Tt(S.left,S.top),new Tt(S.left+S.width,S.top),new Tt(S.left+S.width,S.top+S.height),new Tt(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new G1(n.value,v),i.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Wa(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(m=n.styles.listStyleImage,m.type!==0)return[3,18];y=void 0,x=m.url,_.label=15;case 15:return _.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return y=_.sent(),this.ctx.drawImage(y,n.bounds.left-(y.width+10),n.bounds.top),[3,18];case 17:return _.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(b=this.createFontStyle(i)[0],this.ctx.font=b,this.ctx.fillStyle=si(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new Dh(n.bounds.left,n.bounds.top+Qn(n.styles.paddingTop,n.bounds.width),n.bounds.width,s$(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new G1(t.listValue,S),i.letterSpacing,s$(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),_.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return ns(this,void 0,void 0,function(){var n,a,m,i,s,m,o,l,m,c,u,m,h,d,m,A,g,m,p,v,m;return Ui(this,function(y){switch(y.label){case 0:if(Wa(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:y.sent(),n=0,a=t.negativeZIndex,y.label=2;case 2:return n<a.length?(m=a[n],[4,this.renderStack(m)]):[3,5];case 3:y.sent(),y.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:y.sent(),i=0,s=t.nonInlineLevel,y.label=7;case 7:return i<s.length?(m=s[i],[4,this.renderNode(m)]):[3,10];case 8:y.sent(),y.label=9;case 9:return i++,[3,7];case 10:o=0,l=t.nonPositionedFloats,y.label=11;case 11:return o<l.length?(m=l[o],[4,this.renderStack(m)]):[3,14];case 12:y.sent(),y.label=13;case 13:return o++,[3,11];case 14:c=0,u=t.nonPositionedInlineLevel,y.label=15;case 15:return c<u.length?(m=u[c],[4,this.renderStack(m)]):[3,18];case 16:y.sent(),y.label=17;case 17:return c++,[3,15];case 18:h=0,d=t.inlineLevel,y.label=19;case 19:return h<d.length?(m=d[h],[4,this.renderNode(m)]):[3,22];case 20:y.sent(),y.label=21;case 21:return h++,[3,19];case 22:A=0,g=t.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return A<g.length?(m=g[A],[4,this.renderStack(m)]):[3,26];case 24:y.sent(),y.label=25;case 25:return A++,[3,23];case 26:p=0,v=t.positiveZIndex,y.label=27;case 27:return p<v.length?(m=v[p],[4,this.renderStack(m)]):[3,30];case 28:y.sent(),y.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(a,i){var s=Jo(a)?a.start:a;i===0?n.ctx.moveTo(s.x,s.y):n.ctx.lineTo(s.x,s.y),Jo(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},e.prototype.renderRepeat=function(t,n,a,i){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},e.prototype.resizeImage=function(t,n,a){var i;if(t.width===n&&t.height===a)return t;var s=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=s.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var l=o.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,n,a),o},e.prototype.renderBackgroundImage=function(t){return ns(this,void 0,void 0,function(){var n,a,i,s,o,l;return Ui(this,function(c){switch(c.label){case 0:n=t.styles.backgroundImage.length-1,a=function(u){var h,d,A,D,O,Q,R,M,w,g,D,O,Q,R,M,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y,Z;return Ui(this,function(de){switch(de.label){case 0:if(u.type!==0)return[3,5];h=void 0,d=u.url,de.label=1;case 1:return de.trys.push([1,3,,4]),[4,i.context.cache.match(d)];case 2:return h=de.sent(),[3,4];case 3:return de.sent(),i.context.logger.error("Error loading background-image "+d),[3,4];case 4:return h&&(A=UD(t,n,[h.width,h.height,h.width/h.height]),D=A[0],O=A[1],Q=A[2],R=A[3],M=A[4],w=i.ctx.createPattern(i.resizeImage(h,R,M),"repeat"),i.renderRepeat(D,w,O,Q)),[3,6];case 5:kje(u)?(g=UD(t,n,[null,null,null]),D=g[0],O=g[1],Q=g[2],R=g[3],M=g[4],p=Dje(u.angle,R,M),v=p[0],m=p[1],y=p[2],x=p[3],b=p[4],S=document.createElement("canvas"),S.width=R,S.height=M,_=S.getContext("2d"),C=_.createLinearGradient(m,x,y,b),a$(u.stops,v).forEach(function(he){return C.addColorStop(he.stop,si(he.color))}),_.fillStyle=C,_.fillRect(0,0,R,M),R>0&&M>0&&(w=i.ctx.createPattern(S,"repeat"),i.renderRepeat(D,w,O,Q))):Fje(u)&&(B=UD(t,n,[null,null,null]),D=B[0],T=B[1],E=B[2],R=B[3],M=B[4],k=u.position.length===0?[Yj]:u.position,O=Qn(k[0],R),Q=Qn(k[k.length-1],M),H=Mje(u,O,Q,R,M),W=H[0],te=H[1],W>0&&te>0&&(ee=i.ctx.createRadialGradient(T+O,E+Q,0,T+O,E+Q,W),a$(u.stops,W*2).forEach(function(he){return ee.addColorStop(he.stop,si(he.color))}),i.path(D),i.ctx.fillStyle=ee,W!==te?(j=t.bounds.left+.5*t.bounds.width,G=t.bounds.top+.5*t.bounds.height,Y=te/W,Z=1/Y,i.ctx.save(),i.ctx.translate(j,G),i.ctx.transform(1,0,0,Y,0,0),i.ctx.translate(-j,-G),i.ctx.fillRect(T,Z*(E-G)+G,R,M*Z),i.ctx.restore()):i.ctx.fill())),de.label=6;case 6:return n--,[2]}})},i=this,s=0,o=t.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return s<o.length?(l=o[s],[5,a(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,a){return ns(this,void 0,void 0,function(){return Ui(this,function(i){return this.path(P$(a,n)),this.ctx.fillStyle=si(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,a,i){return ns(this,void 0,void 0,function(){var s,o;return Ui(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(t,a,i)]:[3,2];case 1:return l.sent(),[2];case 2:return s=UUe(i,a),this.path(s),this.ctx.fillStyle=si(t),this.ctx.fill(),o=HUe(i,a),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return ns(this,void 0,void 0,function(){var n,a,i,s,o,l,c,u,h=this;return Ui(this,function(d){switch(d.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,a=!MA(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],s=ZUe(cv(n.backgroundClip,0),t.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),MA(n.backgroundColor)||(this.ctx.fillStyle=si(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(A){h.ctx.save();var g=gB(t.curves),p=A.inset?0:qUe,v=jUe(g,-p+(A.inset?1:-1)*A.spread.number,(A.inset?1:-1)*A.spread.number,A.spread.number*(A.inset?-2:2),A.spread.number*(A.inset?-2:2));A.inset?(h.path(g),h.ctx.clip(),h.mask(v)):(h.mask(g),h.ctx.clip(),h.path(v)),h.ctx.shadowOffsetX=A.offsetX.number+p,h.ctx.shadowOffsetY=A.offsetY.number,h.ctx.shadowColor=si(A.color),h.ctx.shadowBlur=A.blur.number,h.ctx.fillStyle=A.inset?si(A.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),d.label=2;case 2:o=0,l=0,c=i,d.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!MA(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,t.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,t.curves)];case 10:d.sent(),d.label=11;case 11:o++,d.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,a,i,s){return ns(this,void 0,void 0,function(){var o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,_,S,_;return Ui(this,function(C){return this.ctx.save(),o=QUe(i,a),l=P$(i,a),s===2&&(this.path(l),this.ctx.clip()),Jo(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),Jo(l[1])?(h=l[1].end.x,d=l[1].end.y):(h=l[1].x,d=l[1].y),a===0||a===2?A=Math.abs(c-h):A=Math.abs(u-d),this.ctx.beginPath(),s===3?this.formatPath(o):this.formatPath(l.slice(0,2)),g=n<3?n*3:n*2,p=n<3?n*2:n,s===3&&(g=n,p=n),v=!0,A<=g*2?v=!1:A<=g*2+p?(m=A/(2*g+p),g*=m,p*=m):(y=Math.floor((A+p)/(g+p)),x=(A-y*g)/(y-1),b=(A-(y+1)*g)/y,p=b<=0||Math.abs(p-x)<Math.abs(p-b)?x:b),v&&(s===3?this.ctx.setLineDash([0,g+p]):this.ctx.setLineDash([g,p])),s===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=si(t),this.ctx.stroke(),this.ctx.setLineDash([]),s===2&&(Jo(l[0])&&(S=l[3],_=l[0],this.ctx.beginPath(),this.formatPath([new Tt(S.end.x,S.end.y),new Tt(_.start.x,_.start.y)]),this.ctx.stroke()),Jo(l[1])&&(S=l[1],_=l[2],this.ctx.beginPath(),this.formatPath([new Tt(S.end.x,S.end.y),new Tt(_.start.x,_.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return ns(this,void 0,void 0,function(){var n;return Ui(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=si(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=OUe(t),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(Uoe),XUe=function(r){return r instanceof Soe||r instanceof woe?!0:r instanceof e6&&r.type!==dB&&r.type!==hB},ZUe=function(r,e){switch(r){case 0:return gB(e);case 2:return RUe(e);case 1:default:return pB(e)}},JUe=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},e8e=["-apple-system","system-ui"],t8e=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return e8e.indexOf(e)===-1}):r},r8e=function(r){hc(e,r);function e(t,n){var a=r.call(this,t,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return e.prototype.render=function(t){return ns(this,void 0,void 0,function(){var n,a;return Ui(this,function(i){switch(i.label){case 0:return n=zL(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,n8e(n)];case 1:return a=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=si(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(Uoe),n8e=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},a8e=function(){function r(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,t_([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,t_([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,t_([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,t_([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r}(),i8e=function(){function r(e,t){var n;this.windowBounds=t,this.instanceName="#"+r.instanceCount++,this.logger=new a8e({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new CUe(this,e)}return r.instanceCount=1,r}(),Hoe=function(r,e){return e===void 0&&(e={}),s8e(r,e)};typeof window<"u"&&Loe.setContext(window);var s8e=function(r,e){return ns(void 0,void 0,void 0,function(){var t,n,a,i,s,o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,C,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y;return Ui(this,function(Z){switch(Z.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=r.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(n=t.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(w=e.allowTaint)!==null&&w!==void 0?w:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(D=e.useCORS)!==null&&D!==void 0?D:!1},i=TL({logging:(T=e.logging)!==null&&T!==void 0?T:!0,cache:e.cache},a),s={windowWidth:(E=e.windowWidth)!==null&&E!==void 0?E:n.innerWidth,windowHeight:(R=e.windowHeight)!==null&&R!==void 0?R:n.innerHeight,scrollX:(M=e.scrollX)!==null&&M!==void 0?M:n.pageXOffset,scrollY:(k=e.scrollY)!==null&&k!==void 0?k:n.pageYOffset},o=new Dh(s.scrollX,s.scrollY,s.windowWidth,s.windowHeight),l=new i8e(i,o),c=(O=e.foreignObjectRendering)!==null&&O!==void 0?O:!1,u={allowTaint:(Q=e.allowTaint)!==null&&Q!==void 0?Q:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new M$(l,r,u),d=h.clonedReferenceElement,d?[4,h.toIFrame(t,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return A=Z.sent(),g=t6(d)||lUe(d)?jke(d.ownerDocument):yT(l,d),p=g.width,v=g.height,m=g.left,y=g.top,x=o8e(l,d,e.backgroundColor),b={canvas:e.canvas,backgroundColor:x,scale:(W=(H=e.scale)!==null&&H!==void 0?H:n.devicePixelRatio)!==null&&W!==void 0?W:1,x:((te=e.x)!==null&&te!==void 0?te:0)+m,y:((ee=e.y)!==null&&ee!==void 0?ee:0)+y,width:(j=e.width)!==null&&j!==void 0?j:Math.ceil(p),height:(G=e.height)!==null&&G!==void 0?G:Math.ceil(v)},c?(l.logger.debug("Document cloned, using foreign object rendering"),C=new r8e(l,b),[4,C.render(d)]):[3,3];case 2:return S=Z.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+m+","+y+" with size "+p+"x"+v+" using computed rendering"),l.logger.debug("Starting DOM parsing"),_=Boe(l,d),x===_.styles.backgroundColor&&(_.styles.backgroundColor=ph.TRANSPARENT),l.logger.debug("Starting renderer for element at "+b.x+","+b.y+" with size "+b.width+"x"+b.height),C=new YUe(l,b),[4,C.render(_)];case 4:S=Z.sent(),Z.label=5;case 5:return(!((Y=e.removeContainer)!==null&&Y!==void 0)||Y)&&(M$.destroy(A)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,S]}})})},o8e=function(r,e,t){var n=e.ownerDocument,a=n.documentElement?Q1(r,getComputedStyle(n.documentElement).backgroundColor):ph.TRANSPARENT,i=n.body?Q1(r,getComputedStyle(n.body).backgroundColor):ph.TRANSPARENT,s=typeof t=="string"?Q1(r,t):t===null?ph.TRANSPARENT:4294967295;return e===n.documentElement?MA(a)?MA(i)?s:i:a:s};const l8e=Object.freeze(Object.defineProperty({__proto__:null,default:Hoe},Symbol.toStringTag,{value:"Module"}));function Gs(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function YA(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function c8e(r,e){const t=Gs(r);return isNaN(e)?YA(r,NaN):(e&&t.setDate(t.getDate()+e),t)}const Qoe=6048e5,u8e=864e5;let h8e={};function IT(){return h8e}function Yb(r,e){var o,l,c,u;const t=IT(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,a=Gs(r),i=a.getDay(),s=(i<n?7:0)+i-n;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function vB(r){return Yb(r,{weekStartsOn:1})}function zoe(r){const e=Gs(r),t=e.getFullYear(),n=YA(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const a=vB(n),i=YA(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const s=vB(i);return e.getTime()>=a.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function F$(r){const e=Gs(r);return e.setHours(0,0,0,0),e}function j$(r){const e=Gs(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function d8e(r,e){const t=F$(r),n=F$(e),a=+t-j$(t),i=+n-j$(n);return Math.round((a-i)/u8e)}function A8e(r){const e=zoe(r),t=YA(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),vB(t)}function f8e(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function g8e(r){if(!f8e(r)&&typeof r!="number")return!1;const e=Gs(r);return!isNaN(Number(e))}function p8e(r){const e=Gs(r),t=YA(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const m8e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},v8e=(r,e,t)=>{let n;const a=m8e[r];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Xv(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const y8e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},x8e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},b8e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},w8e={date:Xv({formats:y8e,defaultWidth:"full"}),time:Xv({formats:x8e,defaultWidth:"full"}),dateTime:Xv({formats:b8e,defaultWidth:"full"})},S8e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_8e=(r,e,t,n)=>S8e[r];function Oc(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let a;if(n==="formatting"&&r.formattingValues){const s=r.defaultFormattingWidth||r.defaultWidth,o=t!=null&&t.width?String(t.width):s;a=r.formattingValues[o]||r.formattingValues[s]}else{const s=r.defaultWidth,o=t!=null&&t.width?String(t.width):r.defaultWidth;a=r.values[o]||r.values[s]}const i=r.argumentCallback?r.argumentCallback(e):e;return a[i]}}const C8e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},B8e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},N8e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},T8e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},I8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},E8e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},D8e=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},M8e={ordinalNumber:D8e,era:Oc({values:C8e,defaultWidth:"wide"}),quarter:Oc({values:B8e,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Oc({values:N8e,defaultWidth:"wide"}),day:Oc({values:T8e,defaultWidth:"wide"}),dayPeriod:Oc({values:I8e,defaultWidth:"wide",formattingValues:E8e,defaultFormattingWidth:"wide"})};function Uc(r){return(e,t={})=>{const n=t.width,a=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(a);if(!i)return null;const s=i[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],l=Array.isArray(o)?L8e(o,h=>h.test(s)):R8e(o,h=>h.test(s));let c;c=r.valueCallback?r.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(s.length);return{value:c,rest:u}}}function R8e(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function L8e(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Goe(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const a=n[0],i=e.match(r.parsePattern);if(!i)return null;let s=r.valueCallback?r.valueCallback(i[0]):i[0];s=t.valueCallback?t.valueCallback(s):s;const o=e.slice(a.length);return{value:s,rest:o}}}const P8e=/^(\d+)(th|st|nd|rd)?/i,k8e=/\d+/i,F8e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j8e={any:[/^b/i,/^(a|c)/i]},O8e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},U8e={any:[/1/i,/2/i,/3/i,/4/i]},H8e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Q8e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},z8e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},G8e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},V8e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$8e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},K8e={ordinalNumber:Goe({matchPattern:P8e,parsePattern:k8e,valueCallback:r=>parseInt(r,10)}),era:Uc({matchPatterns:F8e,defaultMatchWidth:"wide",parsePatterns:j8e,defaultParseWidth:"any"}),quarter:Uc({matchPatterns:O8e,defaultMatchWidth:"wide",parsePatterns:U8e,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Uc({matchPatterns:H8e,defaultMatchWidth:"wide",parsePatterns:Q8e,defaultParseWidth:"any"}),day:Uc({matchPatterns:z8e,defaultMatchWidth:"wide",parsePatterns:G8e,defaultParseWidth:"any"}),dayPeriod:Uc({matchPatterns:V8e,defaultMatchWidth:"any",parsePatterns:$8e,defaultParseWidth:"any"})},W8e={code:"en-US",formatDistance:v8e,formatLong:w8e,formatRelative:_8e,localize:M8e,match:K8e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function q8e(r){const e=Gs(r);return d8e(e,p8e(e))+1}function Y8e(r){const e=Gs(r),t=+vB(e)-+A8e(e);return Math.round(t/Qoe)+1}function Voe(r,e){var u,h,d,A;const t=Gs(r),n=t.getFullYear(),a=IT(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((A=(d=a.locale)==null?void 0:d.options)==null?void 0:A.firstWeekContainsDate)??1,s=YA(r,0);s.setFullYear(n+1,0,i),s.setHours(0,0,0,0);const o=Yb(s,e),l=YA(r,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const c=Yb(l,e);return t.getTime()>=o.getTime()?n+1:t.getTime()>=c.getTime()?n:n-1}function X8e(r,e){var o,l,c,u;const t=IT(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,a=Voe(r,e),i=YA(r,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Yb(i,e)}function Z8e(r,e){const t=Gs(r),n=+Yb(t,e)-+X8e(t,e);return Math.round(n/Qoe)+1}function pn(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const Id={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return pn(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):pn(t+1,2)},d(r,e){return pn(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return pn(r.getHours()%12||12,e.length)},H(r,e){return pn(r.getHours(),e.length)},m(r,e){return pn(r.getMinutes(),e.length)},s(r,e){return pn(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),a=Math.trunc(n*Math.pow(10,t-3));return pn(a,e.length)}},Ym={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},O$={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),a=n>0?n:1-n;return t.ordinalNumber(a,{unit:"year"})}return Id.y(r,e)},Y:function(r,e,t,n){const a=Voe(r,n),i=a>0?a:1-a;if(e==="YY"){const s=i%100;return pn(s,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):pn(i,e.length)},R:function(r,e){const t=zoe(r);return pn(t,e.length)},u:function(r,e){const t=r.getFullYear();return pn(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return pn(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return pn(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return Id.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return pn(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const a=Z8e(r,n);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):pn(a,e.length)},I:function(r,e,t){const n=Y8e(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):pn(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Id.d(r,e)},D:function(r,e,t){const n=q8e(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):pn(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const a=r.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return pn(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const a=r.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return pn(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return pn(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const a=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let a;switch(n===12?a=Ym.noon:n===0?a=Ym.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let a;switch(n>=17?a=Ym.evening:n>=12?a=Ym.afternoon:n>=4?a=Ym.morning:a=Ym.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Id.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Id.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):pn(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):pn(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Id.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Id.s(r,e)},S:function(r,e){return Id.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return H$(n);case"XXXX":case"XX":return dg(n);case"XXXXX":case"XXX":default:return dg(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return H$(n);case"xxxx":case"xx":return dg(n);case"xxxxx":case"xxx":default:return dg(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+U$(n,":");case"OOOO":default:return"GMT"+dg(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+U$(n,":");case"zzzz":default:return"GMT"+dg(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return pn(n,e.length)},T:function(r,e,t){const n=r.getTime();return pn(n,e.length)}};function U$(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=Math.trunc(n/60),i=n%60;return i===0?t+String(a):t+String(a)+e+pn(i,2)}function H$(r,e){return r%60===0?(r>0?"-":"+")+pn(Math.abs(r)/60,2):dg(r,e)}function dg(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=pn(Math.trunc(n/60),2),i=pn(n%60,2);return t+a+e+i}const Q$=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},$oe=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},J8e=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],a=t[2];if(!a)return Q$(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Q$(n,e)).replace("{{time}}",$oe(a,e))},eHe={p:$oe,P:J8e},tHe=/^D+$/,rHe=/^Y+$/,nHe=["D","DD","YY","YYYY"];function aHe(r){return tHe.test(r)}function iHe(r){return rHe.test(r)}function sHe(r,e,t){const n=oHe(r,e,t);if(console.warn(n),nHe.includes(r))throw new RangeError(n)}function oHe(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lHe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cHe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uHe=/^'([^]*?)'?$/,hHe=/''/g,dHe=/[a-zA-Z]/;function yB(r,e,t){var u,h,d,A,g,p,v,m;const n=IT(),a=(t==null?void 0:t.locale)??n.locale??W8e,i=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((A=(d=n.locale)==null?void 0:d.options)==null?void 0:A.firstWeekContainsDate)??1,s=(t==null?void 0:t.weekStartsOn)??((p=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((m=(v=n.locale)==null?void 0:v.options)==null?void 0:m.weekStartsOn)??0,o=Gs(r);if(!g8e(o))throw new RangeError("Invalid time value");let l=e.match(cHe).map(y=>{const x=y[0];if(x==="p"||x==="P"){const b=eHe[x];return b(y,a.formatLong)}return y}).join("").match(lHe).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const x=y[0];if(x==="'")return{isToken:!1,value:AHe(y)};if(O$[x])return{isToken:!0,value:y};if(x.match(dHe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(y=>{if(!y.isToken)return y.value;const x=y.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&iHe(x)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&aHe(x))&&sHe(x,e,String(r));const b=O$[x[0]];return b(o,x,a.localize,c)}).join("")}function AHe(r){const e=r.match(uHe);return e?e[1].replace(hHe,"'"):r}function fHe(r,e){const t=Gs(r),n=Gs(e);return t.getTime()>n.getTime()}function __(r,e){return c8e(r,-e)}const gHe={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},pHe=(r,e,t)=>{let n;const a=gHe[r];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?n+" 후":n+" 전":n},mHe={full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},vHe={full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},yHe={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},xHe={date:Xv({formats:mHe,defaultWidth:"full"}),time:Xv({formats:vHe,defaultWidth:"full"}),dateTime:Xv({formats:yHe,defaultWidth:"full"})},bHe={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},wHe=(r,e,t,n)=>bHe[r],SHe={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},_He={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},CHe={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},BHe={narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},NHe={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},THe={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},IHe=(r,e)=>{const t=Number(r);switch(String(e==null?void 0:e.unit)){case"minute":case"second":return String(t);case"date":return t+"일";default:return t+"번째"}},EHe={ordinalNumber:IHe,era:Oc({values:SHe,defaultWidth:"wide"}),quarter:Oc({values:_He,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Oc({values:CHe,defaultWidth:"wide"}),day:Oc({values:BHe,defaultWidth:"wide"}),dayPeriod:Oc({values:NHe,defaultWidth:"wide",formattingValues:THe,defaultFormattingWidth:"wide"})},DHe=/^(\d+)(일|번째)?/i,MHe=/\d+/i,RHe={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},LHe={any:[/^(bc|기원전)/i,/^(ad|서기)/i]},PHe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},kHe={any:[/1/i,/2/i,/3/i,/4/i]},FHe={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},jHe={any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},OHe={narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},UHe={any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},HHe={any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},QHe={any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},zHe={ordinalNumber:Goe({matchPattern:DHe,parsePattern:MHe,valueCallback:r=>parseInt(r,10)}),era:Uc({matchPatterns:RHe,defaultMatchWidth:"wide",parsePatterns:LHe,defaultParseWidth:"any"}),quarter:Uc({matchPatterns:PHe,defaultMatchWidth:"wide",parsePatterns:kHe,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Uc({matchPatterns:FHe,defaultMatchWidth:"wide",parsePatterns:jHe,defaultParseWidth:"any"}),day:Uc({matchPatterns:OHe,defaultMatchWidth:"wide",parsePatterns:UHe,defaultParseWidth:"any"}),dayPeriod:Uc({matchPatterns:HHe,defaultMatchWidth:"any",parsePatterns:QHe,defaultParseWidth:"any"})},r6={code:"ko",formatDistance:pHe,formatLong:xHe,formatRelative:wHe,localize:EHe,match:zHe,options:{weekStartsOn:0,firstWeekContainsDate:1}},_g=class _g{static getInstance(){return _g.instance||(_g.instance=new _g),_g.instance}markdownToHtml(e){return e?e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/### (.*?)$/gm,'<h3 style="font-size: 14px; font-weight: bold; margin: 12px 0 8px 0; color: #374151;">$1</h3>').replace(/## (.*?)$/gm,'<h2 style="font-size: 16px; font-weight: bold; margin: 16px 0 12px 0; color: #1f2937;">$1</h2>').replace(/# (.*?)$/gm,'<h1 style="font-size: 18px; font-weight: bold; margin: 20px 0 16px 0; color: #111827;">$1</h1>').replace(/\n\n/g,'</p><p style="margin: 8px 0; line-height: 1.5; color: #374151;">').replace(/\n/g,"<br>").replace(/^/,'<p style="margin: 8px 0; line-height: 1.5; color: #374151;">').replace(/$/,"</p>"):""}async generatePDFFromStoredReport(e,t={}){try{console.log("PDF 생성 시작:",e.personalInfo.name);const n=this.createReportHTML(e,t),a=document.createElement("div");a.innerHTML=n,a.style.position="absolute",a.style.left="-9999px",a.style.top="-9999px",a.style.width="800px",a.style.backgroundColor="white",a.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',a.style.fontSize="12px",a.style.lineHeight="1.5",a.style.color="#111827",a.style.padding="40px",a.style.minHeight="auto",a.style.overflow="visible",document.body.appendChild(a),await new Promise(i=>setTimeout(i,500));try{const i=Math.max(a.scrollHeight,a.offsetHeight,a.clientHeight)+100;console.log("PDF 생성 - 컨테이너 크기:",{scrollHeight:a.scrollHeight,offsetHeight:a.offsetHeight,clientHeight:a.clientHeight,actualHeight:i});const s=await Hoe(a,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:800,height:i,scrollX:0,scrollY:0,removeContainer:!1,logging:!0,imageTimeout:15e3,onclone:A=>{const g=A.body.firstChild;g&&(g.querySelectorAll("img").forEach(v=>{v.style.maxWidth="100%",v.style.height="auto"}),g.style.minHeight=i+"px",g.style.overflow="visible")}}),o=s.toDataURL("image/png",1),l=s.width,c=s.height,u=210,h=c*u/l,d=new nr({orientation:"portrait",unit:"mm",format:[u,h],compress:!0});return d.addImage(o,"PNG",0,0,u,h),console.log("PDF 생성 완료 - 단일 페이지, 크기:",u,"x",h,"mm"),new Blob([d.output("blob")],{type:"application/pdf"})}finally{document.body.removeChild(a)}}catch(n){throw console.error("PDF 생성 실패:",n),new Error("PDF 생성에 실패했습니다: "+(n instanceof Error?n.message:String(n)))}}createReportHTML(e,t){var i;const{personalInfo:n,analysisResult:a}=e;return`
      <div style="max-width: 800px; margin: 0 auto; background: white; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
        <!-- 헤더 -->
        <div style="background: white; padding: 32px; margin-bottom: 24px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); border: 1px solid #e5e7eb;">
          <h1 style="font-size: 32px; font-weight: bold; color: #111827; margin: 0 0 8px 0;">
            ${n.name}님의 건강 리포트
          </h1>
          <div style="display: flex; align-items: center; gap: 8px; color: #6b7280; margin: 0;">
            <span style="font-size: 14px;">📅 ${this.formatDate(e.timestamp)}</span>
          </div>
        </div>

        <!-- 1단계: 전체 건강 개요 -->
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); margin-bottom: 24px;">
          <div style="padding: 24px; border-bottom: 1px solid #e5e7eb;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #dbeafe; display: flex; align-items: center; justify-content: center;">
                <span style="color: #2563eb; font-weight: 600; font-size: 14px;">1</span>
              </div>
              <div>
                <h2 style="font-size: 18px; color: #111827; margin: 0 0 4px 0; font-weight: 600;">전체 건강 개요</h2>
                <p style="color: #6b7280; margin: 0; font-size: 14px;">종합 건강 점수 및 개인 정보</p>
              </div>
            </div>
          </div>
          
          <div style="padding: 24px; background: white;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px;">
              <!-- 개인 정보 -->
              <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px;">
                <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 16px 0;">
                  👤 개인 정보
                </h3>
                <div style="space-y: 12px;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="color: #6b7280; font-size: 14px;">이름</span>
                    <span style="color: #111827; font-weight: 500; font-size: 14px;">${n.name}</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="color: #6b7280; font-size: 14px;">나이</span>
                    <span style="color: #111827; font-size: 14px;">${n.age}세</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="color: #6b7280; font-size: 14px;">성별</span>
                    <span style="color: #111827; font-size: 14px;">${n.gender==="male"?"남성":"여성"}</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span style="color: #6b7280; font-size: 14px;">직업</span>
                    <span style="background: white; border: 1px solid #d1d5db; color: #374151; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                      ${this.getOccupationLabel(n.occupation)}
                    </span>
                  </div>
                </div>
              </div>

              <!-- 전체 점수 -->
              <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px;">
                <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 16px 0;">
                  📊 종합 건강 점수
                </h3>
                <div style="text-align: center; margin-bottom: 16px;">
                  <div style="font-size: 48px; font-weight: bold; margin-bottom: 8px; color: ${this.getScoreColor(a.overallHealth.score)};">
                    ${a.overallHealth.score}
                  </div>
                  <div style="background: ${this.getRiskColor(a.overallHealth.score)}; color: white; padding: 4px 12px; border-radius: 16px; display: inline-block; font-size: 12px; font-weight: 500;">
                    ${a.overallHealth.grade}
                  </div>
                </div>
                
                <!-- 점수 분포 표시 -->
                ${this.createScoreDistributionHTML(a.overallHealth.score,"종합 건강 점수")}
                
                <div style="margin-top: 16px;">
                  ${this.markdownToHtml(a.overallHealth.summary)}
                </div>
              </div>
            </div>

            <!-- 종합 분석 결과 -->
            ${(i=a.overallHealth)!=null&&i.detailedComprehensiveSummary?`
              <div style="margin-top: 24px;">
                <h3 style="font-size: 18px; font-weight: 600; color: #111827; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                  📄 종합 분석 결과
                </h3>
                <div style="background: #eff6ff; border-radius: 8px; padding: 16px;">
                  ${this.markdownToHtml(a.overallHealth.detailedComprehensiveSummary)}
                </div>
              </div>
            `:""}
          </div>
        </div>

        <!-- 2단계: 상세 분석 결과 -->
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); margin-bottom: 24px;">
          <div style="padding: 24px; border-bottom: 1px solid #e5e7eb;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #dcfce7; display: flex; align-items: center; justify-content: center;">
                <span style="color: #16a34a; font-weight: 600; font-size: 14px;">2</span>
              </div>
              <div>
                <h2 style="font-size: 18px; color: #111827; margin: 0 0 4px 0; font-weight: 600;">상세 분석 결과</h2>
                <p style="color: #6b7280; margin: 0; font-size: 14px;">EEG, PPG 생체신호 분석 결과</p>
              </div>
            </div>
          </div>
          
          <div style="padding: 24px; background: white;">
            <div style="display: grid; grid-template-columns: 1fr; gap: 24px;">
              ${this.createDetailedAnalysisHTML(a)}
            </div>
          </div>
        </div>

        <!-- 3단계: 정신 건강 위험도 분석 -->
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); margin-bottom: 24px;">
          <div style="padding: 24px; border-bottom: 1px solid #e5e7eb;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #f3e8ff; display: flex; align-items: center; justify-content: center;">
                <span style="color: #9333ea; font-weight: 600; font-size: 14px;">3</span>
              </div>
              <div>
                <h2 style="font-size: 18px; color: #111827; margin: 0 0 4px 0; font-weight: 600;">정신 건강 위험도 분석</h2>
                <p style="color: #6b7280; margin: 0; font-size: 14px;">우울, ADHD, 번아웃, 충동성 위험도 평가</p>
              </div>
            </div>
          </div>
          
          <div style="padding: 24px; background: white;">
            ${this.createMentalHealthRiskHTML(a)}
          </div>
        </div>

        <!-- 4단계: 의학적 위험도 분석 -->
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); margin-bottom: 24px;">
          <div style="padding: 24px; border-bottom: 1px solid #e5e7eb;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #fef2f2; display: flex; align-items: center; justify-content: center;">
                <span style="color: #dc2626; font-weight: 600; font-size: 14px;">4</span>
              </div>
              <div>
                <h2 style="font-size: 18px; color: #111827; margin: 0 0 4px 0; font-weight: 600;">의학적 위험도 분석</h2>
                <p style="color: #6b7280; margin: 0; font-size: 14px;">생체신호 통합 분석 및 병리학적 위험 평가</p>
              </div>
            </div>
          </div>
          
          <div style="padding: 24px; background: white;">
            ${this.createMedicalRiskAnalysisHTML(a)}
          </div>
        </div>

        <!-- 5단계: 맞춤형 추천사항 -->
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); margin-bottom: 24px;">
          <div style="padding: 24px; border-bottom: 1px solid #e5e7eb;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #fef3c7; display: flex; align-items: center; justify-content: center;">
                <span style="color: #d97706; font-weight: 600; font-size: 14px;">5</span>
              </div>
              <div>
                <h2 style="font-size: 18px; color: #111827; margin: 0 0 4px 0; font-weight: 600;">맞춤형 추천사항</h2>
                <p style="color: #6b7280; margin: 0; font-size: 14px;">개인 맞춤형 건강 관리 가이드</p>
              </div>
            </div>
          </div>
          
          <div style="padding: 24px; background: white;">
            ${this.createRecommendationsHTML(a)}
          </div>
        </div>
      </div>
    `}createScoreDistributionHTML(e,t){const n=l=>l<5?{level:"위험",color:"#dc2626",bgColor:"#fef2f2",borderColor:"#fecaca"}:l<25?{level:"경계",color:"#ea580c",bgColor:"#fff7ed",borderColor:"#fed7aa"}:l<75?{level:"보통",color:"#ca8a04",bgColor:"#fefce8",borderColor:"#fde68a"}:l<95?{level:"양호",color:"#16a34a",bgColor:"#f0fdf4",borderColor:"#bbf7d0"}:{level:"우수",color:"#2563eb",bgColor:"#eff6ff",borderColor:"#bfdbfe"},{level:a,color:i,bgColor:s,borderColor:o}=n(e);return`
      <div style="margin: 16px 0;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
          <span style="font-size: 14px; font-weight: 600; color: #374151;">${t}</span>
          <span style="font-size: 18px; font-weight: bold; color: ${i};">
            ${e.toFixed(1)}/100
          </span>
        </div>
        <div style="margin-bottom: 12px;">
          <div style="position: relative;">
            <!-- 전체 구간 색상 표시 -->
            <div style="width: 100%; height: 16px; border-radius: 8px; overflow: hidden; background: linear-gradient(to right, #ef4444, #f97316, #eab308, #22c55e, #3b82f6);">
              <!-- 구간 경계선 -->
              <div style="position: absolute; top: 0; left: 5%; width: 1px; height: 16px; background: rgba(255, 255, 255, 0.7);"></div>
              <div style="position: absolute; top: 0; left: 25%; width: 1px; height: 16px; background: rgba(255, 255, 255, 0.7);"></div>
              <div style="position: absolute; top: 0; left: 75%; width: 1px; height: 16px; background: rgba(255, 255, 255, 0.7);"></div>
              <div style="position: absolute; top: 0; left: 95%; width: 1px; height: 16px; background: rgba(255, 255, 255, 0.7);"></div>
            </div>
            
            <!-- 현재 위치 마커 라인 -->
            <div style="position: absolute; top: 0; left: ${e}%; width: 3px; height: 16px; background: ${i}; border-radius: 2px; transform: translateX(-50%);"></div>
            
            <!-- 현재 위치 표시점 -->
            <div style="position: absolute; top: 50%; left: ${e}%; width: 12px; height: 12px; background: white; border: 2px solid ${i}; border-radius: 50%; transform: translate(-50%, -50%);"></div>
            
            <!-- 점수 및 상태 툴팁 -->
            <div style="position: absolute; top: -45px; left: ${e}%; background: ${i}; color: white; padding: 6px 10px; border-radius: 6px; font-size: 11px; font-weight: 600; transform: translateX(-50%); white-space: nowrap; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
              <div>${e.toFixed(1)}점</div>
              <div>${a}</div>
              <div style="position: absolute; top: 100%; left: 50%; width: 0; height: 0; border-left: 4px solid transparent; border-right: 4px solid transparent; border-top: 4px solid ${i}; transform: translateX(-50%);"></div>
            </div>
          </div>
          
          <!-- 구간 라벨 -->
          <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 10px; color: #6b7280; font-weight: 500;">
            <span>위험 (0-5)</span>
            <span>경계 (5-25)</span>
            <span>보통 (25-75)</span>
            <span>양호 (75-95)</span>
            <span>우수 (95-100)</span>
          </div>
        </div>
        <div style="display: inline-block; padding: 4px 12px; border-radius: 16px; font-size: 14px; font-weight: 600; color: ${i}; background: ${s}; border: 1px solid ${o};">
          ${a}
        </div>
      </div>
    `}createDetailedAnalysisHTML(e){var n,a,i;let t="";return(n=e.detailedAnalysis)!=null&&n.mentalHealth&&(t+=`
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 8px 0;">
            🧠 정신건강 분석 결과
          </h3>
          <div style="font-size: 14px; color: #7c3aed; font-weight: 500; margin-bottom: 12px;">
            점수: ${e.detailedAnalysis.mentalHealth.score}점
          </div>
          
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealth.score,"정신건강 점수")}
          
          <div style="margin-top: 12px;">
            ${this.markdownToHtml(e.detailedAnalysis.mentalHealth.analysis)}
          </div>
        </div>
      `),(a=e.detailedAnalysis)!=null&&a.physicalHealth&&(t+=`
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 8px 0;">
            ❤️ 신체건강 분석 결과
          </h3>
          <div style="font-size: 14px; color: #dc2626; font-weight: 500; margin-bottom: 12px;">
            점수: ${e.detailedAnalysis.physicalHealth.score}점
          </div>
          
          ${this.createScoreDistributionHTML(e.detailedAnalysis.physicalHealth.score,"신체건강 점수")}
          
          <div style="margin-top: 12px;">
            ${this.markdownToHtml(e.detailedAnalysis.physicalHealth.analysis)}
          </div>
        </div>
      `),(i=e.detailedAnalysis)!=null&&i.stressLevel&&(t+=`
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 8px 0;">
            ⚡ 스트레스 분석 결과
          </h3>
          <div style="font-size: 14px; color: #ca8a04; font-weight: 500; margin-bottom: 12px;">
            점수: ${e.detailedAnalysis.stressLevel.score}점
          </div>
          
          ${this.createScoreDistributionHTML(e.detailedAnalysis.stressLevel.score,"스트레스 점수")}
          
          <div style="margin-top: 12px;">
            ${this.markdownToHtml(e.detailedAnalysis.stressLevel.analysis)}
          </div>
        </div>
      `),t}createMedicalRiskAnalysisHTML(e){var n,a,i,s,o,l,c,u;let t="";return(a=(n=e.detailedAnalysis)==null?void 0:n.mentalHealthRisk)!=null&&a.depression&&(t+=`
        <div style="background: #fef2f2; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 8px 0;">
            💔 우울증 위험도
          </h3>
          <div style="font-size: 14px; color: #dc2626; font-weight: 500; margin-bottom: 12px;">
            점수: ${e.detailedAnalysis.mentalHealthRisk.depression.riskScore}점
          </div>
          <div style="margin-bottom: 12px;">
            <span style="background: #fef2f2; border: 1px solid #e5e7eb; color: #dc2626; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500;">
              위험
            </span>
          </div>
          
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealthRisk.depression.riskScore,"우울증 위험도")}
          
          <div style="margin-top: 12px;">
            ${this.markdownToHtml(e.detailedAnalysis.mentalHealthRisk.depression.analysis)}
          </div>
        </div>
      `),(s=(i=e.detailedAnalysis)==null?void 0:i.mentalHealthRisk)!=null&&s.adhd&&(t+=`
        <div style="background: #fef2f2; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 8px 0;">
            🧠 ADHD 위험도
          </h3>
          <div style="font-size: 14px; color: #dc2626; font-weight: 500; margin-bottom: 12px;">
            점수: ${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore}점
          </div>
          <div style="margin-bottom: 12px;">
            <span style="background: #fef2f2; border: 1px solid #e5e7eb; color: #dc2626; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500;">
              위험
            </span>
          </div>
          
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealthRisk.adhd.riskScore,"ADHD 위험도")}
          
          <div style="margin-top: 12px;">
            ${this.markdownToHtml(e.detailedAnalysis.mentalHealthRisk.adhd.analysis)}
          </div>
        </div>
      `),(l=(o=e.detailedAnalysis)==null?void 0:o.mentalHealthRisk)!=null&&l.burnout&&(t+=`
        <div style="background: #fef2f2; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 8px 0;">
            💤 번아웃 위험도
          </h3>
          <div style="font-size: 14px; color: #dc2626; font-weight: 500; margin-bottom: 12px;">
            점수: ${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore}점
          </div>
          <div style="margin-bottom: 12px;">
            <span style="background: #fef2f2; border: 1px solid #e5e7eb; color: #dc2626; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500;">
              위험
            </span>
          </div>
          
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealthRisk.burnout.riskScore,"번아웃 위험도")}
          
          <div style="margin-top: 12px;">
            ${this.markdownToHtml(e.detailedAnalysis.mentalHealthRisk.burnout.analysis)}
          </div>
        </div>
      `),(u=(c=e.detailedAnalysis)==null?void 0:c.mentalHealthRisk)!=null&&u.impulsivity&&(t+=`
        <div style="background: #fef2f2; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 16px; font-weight: 600; margin: 0 0 8px 0;">
            💥 충동성 위험도
          </h3>
          <div style="font-size: 14px; color: #dc2626; font-weight: 500; margin-bottom: 12px;">
            점수: ${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore}점
          </div>
          <div style="margin-bottom: 12px;">
            <span style="background: #fef2f2; border: 1px solid #e5e7eb; color: #dc2626; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: 500;">
              위험
            </span>
          </div>
          
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore,"충동성 위험도")}
          
          <div style="margin-top: 12px;">
            ${this.markdownToHtml(e.detailedAnalysis.mentalHealthRisk.impulsivity.analysis)}
          </div>
        </div>
      `),t}createRecommendationsHTML(e){var n,a,i,s,o,l,c,u,h,d,A,g;let t="";return((i=(a=(n=e.personalizedRecommendations)==null?void 0:n.immediate)==null?void 0:a.lifestyle)==null?void 0:i.length)>0&&(t+=`
        <div style="background: #f0f9ff; border: 1px solid #e0f2fe; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
          <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #0c4a6e; display: flex; align-items: center; gap: 8px;">
            🚀 즉시 실행 가능한 생활습관
          </h3>
          <div style="font-size: 14px; line-height: 1.6; color: #374151;">
            ${e.personalizedRecommendations.immediate.lifestyle.map(p=>`<div style="margin-bottom: 8px; padding-left: 16px; position: relative;">
              <span style="position: absolute; left: 0; color: #0ea5e9;">•</span>
              ${p}
            </div>`).join("")}
          </div>
        </div>
      `),((l=(o=(s=e.personalizedRecommendations)==null?void 0:s.shortTerm)==null?void 0:o.lifestyle)==null?void 0:l.length)>0&&(t+=`
        <div style="background: #f0fdf4; border: 1px solid #dcfce7; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
          <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #14532d; display: flex; align-items: center; gap: 8px;">
            📅 단기 목표 (1-3개월)
          </h3>
          <div style="font-size: 14px; line-height: 1.6; color: #374151;">
            ${e.personalizedRecommendations.shortTerm.lifestyle.map(p=>`<div style="margin-bottom: 8px; padding-left: 16px; position: relative;">
              <span style="position: absolute; left: 0; color: #22c55e;">•</span>
              ${p}
            </div>`).join("")}
          </div>
        </div>
      `),((h=(u=(c=e.personalizedRecommendations)==null?void 0:c.longTerm)==null?void 0:u.lifestyle)==null?void 0:h.length)>0&&(t+=`
        <div style="background: #fefce8; border: 1px solid #fef3c7; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
          <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #92400e; display: flex; align-items: center; gap: 8px;">
            🎯 장기 목표 (3-12개월)
          </h3>
          <div style="font-size: 14px; line-height: 1.6; color: #374151;">
            ${e.personalizedRecommendations.longTerm.lifestyle.map(p=>`<div style="margin-bottom: 8px; padding-left: 16px; position: relative;">
              <span style="position: absolute; left: 0; color: #f59e0b;">•</span>
              ${p}
            </div>`).join("")}
          </div>
        </div>
      `),((g=(A=(d=e.personalizedRecommendations)==null?void 0:d.occupationSpecific)==null?void 0:A.workplaceStrategies)==null?void 0:g.length)>0&&(t+=`
        <div style="background: #fdf2f8; border: 1px solid #fce7f3; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
          <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: #be185d; display: flex; align-items: center; gap: 8px;">
            👨‍⚕️ 직업별 맞춤 조언
          </h3>
          <div style="font-size: 14px; line-height: 1.6; color: #374151;">
            ${e.personalizedRecommendations.occupationSpecific.workplaceStrategies.map(p=>`<div style="margin-bottom: 8px; padding-left: 16px; position: relative;">
              <span style="position: absolute; left: 0; color: #ec4899;">•</span>
              ${p}
            </div>`).join("")}
          </div>
        </div>
      `),t+=`
      <div style="height: 60px; background: transparent;"></div>
    `,t}getOccupationLabel(e){return{teacher:"교사",military_medic:"의무병사",military_career:"직업군인",elementary:"초등학생",middle_school:"중학생",high_school:"고등학생",university:"대학생",housewife:"전업주부",parent:"학부모",firefighter:"소방공무원",police:"경찰공무원",developer:"개발자",designer:"디자이너",office_worker:"일반 사무직",manager:"관리자",general_worker:"일반 직장인",entrepreneur:"사업가",other:"그외"}[e]||e}getScoreColor(e){return e>=80?"#16a34a":e>=60?"#2563eb":e>=40?"#ea580c":"#dc2626"}getRiskLevel(e){return e<5?"위험":e<25?"경계":e<75?"보통":e<95?"양호":"우수"}getRiskColor(e){return e<5?"#dc2626":e<25?"#ea580c":e<75?"#ca8a04":e<95?"#16a34a":"#2563eb"}getExpertRecommendation(e){return e<5?"즉시 전문의 상담을 받으시기 바랍니다. 정신건강 관리가 시급한 상태입니다.":e<25?"전문의 상담을 고려해보시기 바랍니다. 스트레스 관리와 충분한 휴식이 필요합니다.":e<75?"정기적인 스트레스 관리와 건강한 생활습관 유지를 권장합니다.":e<95?"현재 상태를 잘 유지하시고, 꾸준한 자기관리를 계속하시기 바랍니다.":"매우 양호한 상태입니다. 현재의 건강한 생활습관을 지속하시기 바랍니다."}formatDate(e){return yB(new Date(e),"yyyy년 MM월 dd일 HH:mm",{locale:r6})}createMentalHealthRiskHTML(e){var n,a,i,s,o,l,c,u,h,d,A,g,p;let t="";if((n=e.detailedAnalysis)!=null&&n.mentalHealthRisk){const v=[((a=e.detailedAnalysis.mentalHealthRisk.depression)==null?void 0:a.riskScore)||0,((i=e.detailedAnalysis.mentalHealthRisk.adhd)==null?void 0:i.riskScore)||0,((s=e.detailedAnalysis.mentalHealthRisk.burnout)==null?void 0:s.riskScore)||0,((o=e.detailedAnalysis.mentalHealthRisk.impulsivity)==null?void 0:o.riskScore)||0],m=Math.max(...v),y=this.getRiskLevel(100-m);this.getRiskColor(100-m),t+=`
        <div style="background: #fef2f2; border: 2px solid #dc2626; border-radius: 8px; padding: 16px; margin-bottom: 24px;">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #dc2626; font-size: 16px; font-weight: 600; margin: 0 0 12px 0;">
            ⚠️ 종합 위험도 평가
          </h3>
          <div style="font-size: 14px; color: #dc2626; font-weight: 500; margin-bottom: 12px;">
            최고 위험도: ${m}점
          </div>
          <div style="margin-bottom: 12px;">
            <span style="background: #dc2626; color: white; padding: 4px 12px; border-radius: 16px; font-size: 12px; font-weight: 500;">
              ${y}
            </span>
          </div>
          
          ${this.createScoreDistributionHTML(100-m,"종합 위험도")}
          
          <div style="margin-top: 12px; padding: 12px; background: #fef2f2; border-radius: 6px;">
            <div style="font-size: 12px; font-weight: 500; color: #dc2626; margin-bottom: 4px;">전문가 권장사항</div>
            <div style="font-size: 11px; line-height: 1.4; color: #7f1d1d;">
              ${this.getExpertRecommendation(100-m)}
            </div>
          </div>
        </div>
      `}return t+='<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">',(c=(l=e.detailedAnalysis)==null?void 0:l.mentalHealthRisk)!=null&&c.depression&&(t+=`
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 14px; font-weight: 600; margin: 0 0 8px 0;">
            💔 우울 위험도
          </h3>
          <div style="font-size: 12px; color: #3b82f6; font-weight: 500; margin-bottom: 8px;">
            위험도: ${e.detailedAnalysis.mentalHealthRisk.depression.riskScore}점
          </div>
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealthRisk.depression.riskScore,"우울 위험도")}
        </div>
      `),(h=(u=e.detailedAnalysis)==null?void 0:u.mentalHealthRisk)!=null&&h.adhd&&(t+=`
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 14px; font-weight: 600; margin: 0 0 8px 0;">
            🎯 ADHD/집중력 위험도
          </h3>
          <div style="font-size: 12px; color: #ea580c; font-weight: 500; margin-bottom: 8px;">
            위험도: ${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore}점
          </div>
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealthRisk.adhd.riskScore,"ADHD 위험도")}
        </div>
      `),(A=(d=e.detailedAnalysis)==null?void 0:d.mentalHealthRisk)!=null&&A.burnout&&(t+=`
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 14px; font-weight: 600; margin: 0 0 8px 0;">
            🔥 번아웃 위험도
          </h3>
          <div style="font-size: 12px; color: #dc2626; font-weight: 500; margin-bottom: 8px;">
            위험도: ${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore}점
          </div>
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealthRisk.burnout.riskScore,"번아웃 위험도")}
        </div>
      `),(p=(g=e.detailedAnalysis)==null?void 0:g.mentalHealthRisk)!=null&&p.impulsivity&&(t+=`
        <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <h3 style="display: flex; align-items: center; gap: 8px; color: #111827; font-size: 14px; font-weight: 600; margin: 0 0 8px 0;">
            ⚡ 충동성 위험도
          </h3>
          <div style="font-size: 12px; color: #ca8a04; font-weight: 500; margin-bottom: 8px;">
            위험도: ${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore}점
          </div>
          ${this.createScoreDistributionHTML(e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore,"충동성 위험도")}
        </div>
      `),t+="</div>",t}};Ce(_g,"instance");let xB=_g;class zi{static encodeKey(e){return btoa(e)}static decodeKey(e){try{return atob(e)}catch(t){return console.error("키 디코딩 실패:",t),""}}static async saveAPIKeyData(e){try{console.log(`💾 localStorage에 키 저장 시작: ${e.id}`);const t=this.getAllAPIKeyData(),n={...e,value:this.encodeKey(e.value)};t[e.id]=n,localStorage.setItem(this.KEYS_STORAGE_KEY,JSON.stringify(t)),console.log("✅ localStorage에 키 저장 완료")}catch(t){throw console.error("API 키 저장 실패:",t),t}}static async getAPIKeyData(e){try{console.log(`🔍 localStorage에서 키 조회 시작: ${e}`);const n=this.getAllAPIKeyData()[e];if(n){const a={...n,value:this.decodeKey(n.value)};return console.log("📊 조회된 키 데이터: OK"),a}return console.log("📊 조회된 키 데이터: NULL"),null}catch(t){return console.error("API 키 조회 실패:",t),null}}static getAllAPIKeyData(){try{const e=localStorage.getItem(this.KEYS_STORAGE_KEY);return e?JSON.parse(e):{}}catch(e){return console.error("API 키 데이터 파싱 실패:",e),{}}}static async saveAPIKey(e,t,n={},a=!0){try{let i={isValid:!0};if(a&&(n.service==="gemini"&&(i=await this.testGeminiAPIKey(t)),!i.isValid))return i;const s={id:e,name:n.name||e,service:n.service||"unknown",createdAt:n.createdAt||Date.now(),lastUsed:null,isActive:!0,maskedKey:this.maskAPIKey(t),isVerified:i.isValid,lastTestedAt:Date.now()},o=this.getAPIKeyMetadata(),l=o.findIndex(u=>u.id===e);l>=0?o[l]={...o[l],...s}:o.push(s),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(o));const c={id:e,value:t,timestamp:Date.now(),metadata:s};return await this.saveAPIKeyData(c),i}catch(i){return console.error("API 키 저장 중 오류:",i),{isValid:!1,error:i instanceof Error?i.message:"알 수 없는 오류"}}}static async testGeminiAPIKey(e){var n;const t=Date.now();try{console.log("🧪 Gemini API 키 테스트 시작...");const a=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:"Hello, this is a test message. Please respond with 'OK'."}]}]})}),i=Date.now()-t;if(a.ok){const s=await a.json();return console.log("✅ Gemini API 키 테스트 성공"),{isValid:!0,responseTime:i,testData:s}}else{const s=await a.json();return console.error("❌ Gemini API 키 테스트 실패:",s),{isValid:!1,error:((n=s.error)==null?void 0:n.message)||`HTTP ${a.status}: ${a.statusText}`,responseTime:i}}}catch(a){const i=Date.now()-t;return console.error("❌ Gemini API 키 테스트 중 네트워크 오류:",a),{isValid:!1,error:a instanceof Error?a.message:"네트워크 오류",responseTime:i}}}static async getAPIKey(e){try{console.log(`🔍 localStorage에서 키 조회 시작: ${e}`);const t=await this.getAPIKeyData(e);return console.log("📊 조회된 키 데이터:",t?"OK":"NULL"),t?t.value:null}catch(t){return console.error("API 키 조회 실패:",t),null}}static getAPIKeyMetadata(){try{const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}catch(e){return console.error("API 키 메타데이터 조회 실패:",e),[]}}static getAPIKeyMetadataById(e){return this.getAPIKeyMetadata().find(n=>n.id===e)||null}static async deleteAPIKey(e){try{const n=this.getAPIKeyMetadata().filter(i=>i.id!==e);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n));const a=this.getAllAPIKeyData();delete a[e],localStorage.setItem(this.KEYS_STORAGE_KEY,JSON.stringify(a)),console.log(`🗑️ API 키 삭제 완료: ${e}`)}catch(t){throw console.error("API 키 삭제 실패:",t),t}}static maskAPIKey(e){return e.length<=8?"***":e.substring(0,4)+"***"+e.substring(e.length-4)}static validateGeminiAPIKey(e){return e.startsWith("AIza")&&e.length===39}static updateLastUsed(e){try{const t=this.getAPIKeyMetadata(),n=t.findIndex(a=>a.id===e);n>=0&&(t[n].lastUsed=Date.now(),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)))}catch(t){console.error("마지막 사용 시간 업데이트 실패:",t)}}static toggleAPIKeyActive(e,t){try{const n=this.getAPIKeyMetadata(),a=n.findIndex(i=>i.id===e);a>=0&&(n[a].isActive=t,localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)))}catch(n){console.error("API 키 활성화 상태 변경 실패:",n)}}static async clearAllAPIKeys(){try{localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.KEYS_STORAGE_KEY),console.log("🗑️ 모든 API 키 삭제 완료")}catch(e){throw console.error("API 키 전체 삭제 실패:",e),e}}static getAPIKeyCount(){return this.getAPIKeyMetadata().length}static getActiveAPIKeyCount(){return this.getAPIKeyMetadata().filter(e=>e.isActive).length}static getAPIKeysByService(e){return this.getAPIKeyMetadata().filter(t=>t.service===e)}static getVerifiedAPIKeys(){return this.getAPIKeyMetadata().filter(e=>e.isVerified)}static async getActiveGeminiAPIKey(){console.log("🔍 활성화된 Gemini API 키 조회 시작");const e=this.getAPIKeysByService("gemini");console.log("📋 Gemini 서비스 키 목록:",e);const t=e.find(n=>n.isActive&&n.isVerified);if(console.log("🎯 활성화된 키:",t),t){console.log(`🔑 활성 키 ID로 실제 키 조회: ${t.id}`);const n=await this.getAPIKey(t.id);return console.log("📊 실제 키 조회 결과:",n?"OK":"NULL"),n}return null}}Ce(zi,"STORAGE_KEY","ai-health-api-keys"),Ce(zi,"KEYS_STORAGE_KEY","ai-health-api-keys-data");const ET={EEG_DETAILED_ANALYSIS:`
당신은 뇌파(EEG) 신호 분석 전문가입니다. 제공된 EEG 데이터를 바탕으로 상세한 뇌파 분석을 수행해주세요.

## 🧠 EEG 상세 분석 요구사항

### 1. 신호 품질 평가 (Signal Quality Assessment)
- 신호 강도, 노이즈 수준, 아티팩트 검출
- 측정 신뢰도 및 데이터 품질 평가
- 분석 가능한 구간 식별

### 2. 주파수 대역 분석 (Frequency Band Analysis)
- **델타파 (1-4Hz)**: 깊은 수면, 무의식 상태
- **세타파 (4-8Hz)**: 창의성, 명상, 기억 형성
- **알파파 (8-13Hz)**: 이완, 집중 준비 상태
- **베타파 (13-30Hz)**: 집중, 각성, 논리적 사고
- **감마파 (30-100Hz)**: 고차원 인지 기능, 의식

### 3. 시간적 분석 (Temporal Analysis)
- 뇌파 패턴의 시간적 변화
- 안정성 및 변동성 평가
- 리듬 분석 및 동조화 패턴

### 4. 아티팩트 검출 (Artifact Detection)
- 눈 깜빡임, 근육 활동, 심박 아티팩트
- 외부 노이즈 및 전극 문제
- 신호 순도 평가

### 5. 임상적 해석 (Clinical Interpretation)
- 정상/비정상 패턴 식별
- 연령/성별 기준 대비 평가
- 뇌기능 상태 종합 평가

## 📊 표준화된 점수 체계 적용

### 성별/나이별 기준값 (EEG 지표)

#### 집중력 지수 (Focus Index)
**남성 기준값:**
- 20대: 68±12점 (정상범위: 56-80점)
- 30대: 65±13점 (정상범위: 52-78점)
- 40대: 62±14점 (정상범위: 48-76점)
- 50대: 58±15점 (정상범위: 43-73점)
- 60대+: 55±16점 (정상범위: 39-71점)

**여성 기준값:**
- 20대: 70±11점 (정상범위: 59-81점)
- 30대: 67±12점 (정상범위: 55-79점)
- 40대: 64±13점 (정상범위: 51-77점)
- 50대: 60±14점 (정상범위: 46-74점)
- 60대+: 57±15점 (정상범위: 42-72점)

#### 이완 지수 (Relaxation Index)
**남성 기준값:**
- 20대: 72±15점 (정상범위: 57-87점)
- 30대: 69±16점 (정상범위: 53-85점)
- 40대: 66±17점 (정상범위: 49-83점)
- 50대: 64±18점 (정상범위: 46-82점)
- 60대+: 62±18점 (정상범위: 44-80점)

**여성 기준값:**
- 20대: 75±13점 (정상범위: 62-88점)
- 30대: 72±14점 (정상범위: 58-86점)
- 40대: 69±15점 (정상범위: 54-84점)
- 50대: 66±16점 (정상범위: 50-82점)
- 60대+: 64±17점 (정상범위: 47-81점)

#### 정서적 안정성 (Emotional Stability)
**남성 기준값:**
- 20대: 65±18점 (정상범위: 47-83점)
- 30대: 67±17점 (정상범위: 50-84점)
- 40대: 69±16점 (정상범위: 53-85점)
- 50대: 71±15점 (정상범위: 56-86점)
- 60대+: 73±14점 (정상범위: 59-87점)

**여성 기준값:**
- 20대: 62±20점 (정상범위: 42-82점)
- 30대: 64±19점 (정상범위: 45-83점)
- 40대: 66±18점 (정상범위: 48-84점)
- 50대: 68±17점 (정상범위: 51-85점)
- 60대+: 70±16점 (정상범위: 54-86점)

### 5단계 등급 평가 시스템
- **excellent (95-100백분위)**: 매우 우수 - 상위 5%
- **good (75-94백분위)**: 양호 - 상위 6-25%
- **normal (25-74백분위)**: 보통 - 중간 50%
- **borderline (5-24백분위)**: 경계 - 하위 6-25%
- **attention (0-4백분위)**: 주의필요 - 하위 5%

## 🎯 분석 결과 JSON 형식

다음 JSON 형식으로 상세한 EEG 분석 결과를 제공해주세요:

\`\`\`json
{
  "signalQuality": {
    "overallQuality": {
      "raw": 85,
      "standardized": 87,
      "percentile": 78,
      "grade": "good",
      "gradeDescription": "양호한 신호 품질",
      "ageGenderAdjusted": true
    },
    "noiseLevel": 15,
    "artifactPercentage": 8,
    "usableDataPercentage": 92,
    "confidence": 0.85
  },
  "frequencyAnalysis": {
    "delta": {
      "absolutePower": 12.5,
      "relativePower": 0.18,
      "asymmetry": 0.02,
      "interpretation": "정상적인 델타파 활동"
    },
    "theta": {
      "absolutePower": 15.8,
      "relativePower": 0.22,
      "asymmetry": -0.05,
      "interpretation": "적절한 세타파 수준"
    },
    "alpha": {
      "absolutePower": 25.3,
      "relativePower": 0.35,
      "asymmetry": 0.08,
      "interpretation": "양호한 알파파 활동"
    },
    "beta": {
      "absolutePower": 18.7,
      "relativePower": 0.20,
      "asymmetry": -0.03,
      "interpretation": "정상적인 베타파 수준"
    },
    "gamma": {
      "absolutePower": 8.2,
      "relativePower": 0.05,
      "asymmetry": 0.01,
      "interpretation": "적절한 감마파 활동"
    }
  },
  "temporalAnalysis": {
    "stability": {
      "raw": 78,
      "standardized": 82,
      "percentile": 65,
      "grade": "normal",
      "gradeDescription": "안정적인 뇌파 패턴",
      "ageGenderAdjusted": true
    },
    "variability": 0.15,
    "rhythmicity": 0.73,
    "synchronization": 0.68
  },
  "artifactDetection": {
    "eyeBlinks": 5,
    "muscleActivity": 3,
    "heartbeat": 2,
    "externalNoise": 1,
    "totalArtifacts": 11,
    "cleanDataPercentage": 89
  },
  "clinicalInterpretation": {
    "overallAssessment": "정상적인 뇌파 패턴을 보이며, 연령대에 적합한 뇌기능 상태입니다.",
    "keyFindings": [
      "양호한 알파파 활동으로 이완 능력 우수",
      "적절한 베타파 수준으로 집중력 정상",
      "균형잡힌 좌우 반구 활동"
    ],
    "concerns": [],
    "recommendations": [
      "현재 뇌파 패턴 유지",
      "규칙적인 명상이나 이완 활동 지속"
    ]
  },
  "focusIndex": {
    "raw": 72,
    "standardized": 75,
    "percentile": 68,
    "grade": "normal",
    "gradeDescription": "양호한 집중력",
    "ageGenderAdjusted": true
  },
  "relaxationIndex": {
    "raw": 78,
    "standardized": 81,
    "percentile": 73,
    "grade": "normal",
    "gradeDescription": "우수한 이완 능력",
    "ageGenderAdjusted": true
  },
  "emotionalStability": {
    "raw": 68,
    "standardized": 72,
    "percentile": 58,
    "grade": "normal",
    "gradeDescription": "안정적인 정서 상태",
    "ageGenderAdjusted": true
  },
  "cognitiveLoad": {
    "raw": 45,
    "standardized": 42,
    "percentile": 35,
    "grade": "normal",
    "gradeDescription": "적절한 인지 부하",
    "ageGenderAdjusted": true
  },
  "hemisphericBalance": {
    "raw": 85,
    "standardized": 88,
    "percentile": 82,
    "grade": "good",
    "gradeDescription": "우수한 좌우뇌 균형",
    "ageGenderAdjusted": true
  },
  "confidence": 0.87,
  "analysisTimestamp": ${Date.now()},
  "clinicalValidation": true
}
\`\`\`

**중요 지침:**
1. 모든 점수는 제공된 성별/나이별 기준값을 참조하여 계산
2. 백분위수와 등급이 일치하도록 정확히 계산
3. 임상적 해석은 객관적이고 전문적으로 작성
4. 의학적 진단이 아닌 건강 참고 정보임을 명시
 5. 개인의 연령과 성별을 고려한 맞춤형 분석
`,PPG_DETAILED_ANALYSIS:`
당신은 심박변이도(PPG) 신호 분석 전문가입니다. 제공된 PPG 데이터를 바탕으로 상세한 심혈관 건강 분석을 수행해주세요.

## ❤️ PPG 상세 분석 요구사항

### 1. 신호 품질 평가 (Signal Quality Assessment)
- PPG 신호 강도 및 파형 품질
- 노이즈 수준 및 아티팩트 검출
- 측정 신뢰도 평가

### 2. 심박변이도 분석 (Heart Rate Variability)
**시간 영역 분석:**
- RMSSD: 연속 RR 간격 차이의 제곱근 평균
- SDNN: RR 간격의 표준편차
- pNN50: 50ms 이상 차이나는 RR 간격 비율

**주파수 영역 분석:**
- LF (0.04-0.15Hz): 교감신경 + 부교감신경
- HF (0.15-0.4Hz): 부교감신경
- LF/HF 비율: 자율신경 균형

### 3. 맥파 분석 (Pulse Wave Analysis)
- 맥파 형태 및 특성
- 혈관 탄성도 평가
- 말초순환 상태

### 4. 심혈관 지표 (Cardiovascular Metrics)
- 심박수 분석
- 혈압 추정 지표
- 산소포화도 관련 지표

### 5. 임상적 해석 (Clinical Interpretation)
- 심혈관 건강 상태 평가
- 자율신경 기능 평가
- 위험 요인 식별

## 📊 표준화된 점수 체계 적용

### 성별/나이별 기준값 (PPG 지표)

#### 심박변이도 RMSSD (ms)
**남성 기준값:**
- 20대: 42±18ms (정상범위: 24-60ms)
- 30대: 35±16ms (정상범위: 19-51ms)
- 40대: 28±14ms (정상범위: 14-42ms)
- 50대: 23±12ms (정상범위: 11-35ms)
- 60대+: 19±10ms (정상범위: 9-29ms)

**여성 기준값:**
- 20대: 45±20ms (정상범위: 25-65ms)
- 30대: 38±18ms (정상범위: 20-56ms)
- 40대: 31±16ms (정상범위: 15-47ms)
- 50대: 25±14ms (정상범위: 11-39ms)
- 60대+: 22±12ms (정상범위: 10-34ms)

#### 안정시 심박수 (bpm)
**남성 기준값:**
- 20대: 66±8bpm (정상범위: 58-74bpm)
- 30대: 68±9bpm (정상범위: 59-77bpm)
- 40대: 70±9bpm (정상범위: 61-79bpm)
- 50대: 71±10bpm (정상범위: 61-81bpm)
- 60대+: 72±10bpm (정상범위: 62-82bpm)

**여성 기준값:**
- 20대: 70±7bpm (정상범위: 63-77bpm)
- 30대: 72±8bpm (정상범위: 64-80bpm)
- 40대: 73±8bpm (정상범위: 65-81bpm)
- 50대: 74±9bpm (정상범위: 65-83bpm)
- 60대+: 75±9bpm (정상범위: 66-84bpm)

#### 자율신경 균형 LF/HF 비율
**모든 연령/성별 공통:**
- 이상적 범위: 0.5-2.0
- 균형 상태: 1.0-1.5
- 교감신경 우세: >2.0
- 부교감신경 우세: <0.5

### 5단계 등급 평가 시스템
- **excellent (95-100백분위)**: 매우 우수 - 상위 5%
- **good (75-94백분위)**: 양호 - 상위 6-25%
- **normal (25-74백분위)**: 보통 - 중간 50%
- **borderline (5-24백분위)**: 경계 - 하위 6-25%
- **attention (0-4백분위)**: 주의필요 - 하위 5%

## 🎯 분석 결과 JSON 형식

다음 JSON 형식으로 상세한 PPG 분석 결과를 제공해주세요:

\`\`\`json
{
  "signalQuality": {
    "overallQuality": {
      "raw": 88,
      "standardized": 90,
      "percentile": 82,
      "grade": "good",
      "gradeDescription": "우수한 PPG 신호 품질",
      "ageGenderAdjusted": true
    },
    "signalStrength": 92,
    "noiseLevel": 8,
    "artifactPercentage": 5,
    "confidence": 0.90
  },
  "heartRateVariability": {
    "timeDomain": {
      "rmssd": 38.5,
      "sdnn": 45.2,
      "pnn50": 12.8,
      "hrVariability": 0.08,
      "meanRR": 850
    },
    "frequencyDomain": {
      "lfPower": 245,
      "hfPower": 180,
      "lfHfRatio": 1.36,
      "totalPower": 425,
      "lfNormalized": 57.6,
      "hfNormalized": 42.4
    }
  },
  "pulseWaveAnalysis": {
    "waveformQuality": {
      "raw": 85,
      "standardized": 88,
      "percentile": 75,
      "grade": "good",
      "gradeDescription": "양호한 맥파 형태",
      "ageGenderAdjusted": true
    },
    "vascularElasticity": 0.78,
    "peripheralCirculation": 0.82,
    "pulseTransitTime": 285
  },
  "cardiovascularMetrics": {
    "heartRate": {
      "mean": 70.6,
      "std": 8.2,
      "min": 58,
      "max": 85,
      "trend": "stable"
    },
    "bloodPressureEstimate": {
      "systolic": 118,
      "diastolic": 76,
      "confidence": 0.75
    },
    "oxygenSaturation": {
      "estimate": 98.2,
      "confidence": 0.68
    }
  },
  "clinicalInterpretation": {
    "overallAssessment": "양호한 심혈관 건강 상태를 보이며, 자율신경 기능이 균형을 이루고 있습니다.",
    "keyFindings": [
      "정상적인 심박변이도 수준",
      "균형잡힌 자율신경 활동",
      "양호한 혈관 탄성도"
    ],
    "concerns": [],
    "recommendations": [
      "현재 심혈관 건강 상태 유지",
      "규칙적인 유산소 운동 지속"
    ]
  },
  "heartRateScore": {
    "raw": 75,
    "standardized": 78,
    "percentile": 68,
    "grade": "normal",
    "gradeDescription": "정상적인 심박수",
    "ageGenderAdjusted": true
  },
  "hrvScore": {
    "raw": 72,
    "standardized": 75,
    "percentile": 65,
    "grade": "normal",
    "gradeDescription": "양호한 심박변이도",
    "ageGenderAdjusted": true
  },
  "autonomicBalanceScore": {
    "raw": 80,
    "standardized": 83,
    "percentile": 78,
    "grade": "good",
    "gradeDescription": "우수한 자율신경 균형",
    "ageGenderAdjusted": true
  },
  "cardiovascularFitnessScore": {
    "raw": 78,
    "standardized": 81,
    "percentile": 72,
    "grade": "normal",
    "gradeDescription": "양호한 심혈관 체력",
    "ageGenderAdjusted": true
  },
  "confidence": 0.85,
  "analysisTimestamp": ${Date.now()},
  "clinicalValidation": true
}
\`\`\`

**중요 지침:**
1. 모든 점수는 제공된 성별/나이별 기준값을 참조하여 계산
2. 백분위수와 등급이 일치하도록 정확히 계산
3. 심혈관 건강 상태를 객관적으로 평가
4. 의학적 진단이 아닌 건강 참고 정보임을 명시
 5. 개인의 연령, 성별, 직업을 고려한 맞춤형 분석
`,MENTAL_HEALTH_RISK_ANALYSIS:`
당신은 정신건강 위험도 평가 전문가입니다. 제공된 EEG/PPG 상세 분석 결과를 바탕으로 5가지 정신건강 위험도를 종합적으로 평가해주세요.

## 🧠 정신건강 위험도 분석 요구사항

### 분석 대상 5가지 위험도
1. **우울 위험도 (Depression Risk)**
2. **ADHD/주의력 위험도 (ADHD/Focus Risk)**
3. **번아웃 위험도 (Burnout Risk)**
4. **충동성 위험도 (Impulsivity Risk)**
5. **스트레스 위험도 (Stress Risk)**

## 📊 성별/나이별 기준값 (정신건강 위험도)

### 우울 위험도 기준값 (0-100점, 높을수록 위험)
**남성 기준값:**
- 20대: 15±12점 (정상범위: 3-27점)
- 30대: 18±13점 (정상범위: 5-31점)
- 40대: 22±15점 (정상범위: 7-37점)
- 50대: 25±16점 (정상범위: 9-41점)
- 60대+: 28±18점 (정상범위: 10-46점)

**여성 기준값:**
- 20대: 18±14점 (정상범위: 4-32점)
- 30대: 21±15점 (정상범위: 6-36점)
- 40대: 25±17점 (정상범위: 8-42점)
- 50대: 28±18점 (정상범위: 10-46점)
- 60대+: 31±20점 (정상범위: 11-51점)

### ADHD/주의력 위험도 기준값
**남성 기준값 (모든 연령대):**
- 평균: 20±12점 (정상범위: 8-32점)

**여성 기준값 (모든 연령대):**
- 평균: 16±10점 (정상범위: 6-26점)

### 번아웃 위험도 기준값
**남성 기준값:**
- 20대: 25±15점 (정상범위: 10-40점)
- 30대: 35±18점 (정상범위: 17-53점)
- 40대: 42±20점 (정상범위: 22-62점) # 최고 위험 연령
- 50대: 38±19점 (정상범위: 19-57점)
- 60대+: 30±16점 (정상범위: 14-46점)

**여성 기준값:**
- 20대: 28±16점 (정상범위: 12-44점)
- 30대: 38±19점 (정상범위: 19-57점)
- 40대: 45±21점 (정상범위: 24-66점) # 최고 위험 연령
- 50대: 41±20점 (정상범위: 21-61점)
- 60대+: 33±17점 (정상범위: 16-50점)

### 충동성 위험도 기준값
**남성 기준값:**
- 20대: 35±18점 (정상범위: 17-53점) # 젊을수록 높음
- 30대: 28±15점 (정상범위: 13-43점)
- 40대: 22±12점 (정상범위: 10-34점)
- 50대: 18±10점 (정상범위: 8-28점)
- 60대+: 15±8점 (정상범위: 7-23점)

**여성 기준값:**
- 20대: 30±16점 (정상범위: 14-46점)
- 30대: 24±13점 (정상범위: 11-37점)
- 40대: 19±11점 (정상범위: 8-30점)
- 50대: 16±9점 (정상범위: 7-25점)
- 60대+: 13±7점 (정상범위: 6-20점)

### 스트레스 위험도 기준값
**남성 기준값 (모든 연령대):**
- 평균: 30±15점 (정상범위: 15-45점)

**여성 기준값 (모든 연령대):**
- 평균: 35±16점 (정상범위: 19-51점) # 여성이 스트레스 반응 더 높음

## 🎯 위험도 수준 분류
- **low (0-25백분위)**: 낮은 위험
- **moderate (26-75백분위)**: 보통 위험
- **high (76-95백분위)**: 높은 위험
- **critical (96-100백분위)**: 매우 높은 위험

## 🎯 분석 결과 JSON 형식

다음 JSON 형식으로 정신건강 위험도 분석 결과를 제공해주세요:

\`\`\`json
{
  "depressionRisk": {
    "riskLevel": "moderate",
    "score": {
      "raw": 22,
      "standardized": 25,
      "percentile": 45,
      "grade": "normal",
      "gradeDescription": "정상 범위의 우울 위험도",
      "ageGenderAdjusted": true
    },
    "confidence": 0.82,
    "indicators": [
      "전두엽 알파파 비대칭성 경미한 증가",
      "심박변이도 정상 범위"
    ],
    "clinicalNotes": "현재 우울 위험도는 정상 범위이나 지속적인 모니터링이 필요합니다.",
    "severity": "mild",
    "urgency": "routine",
    "moodIndicators": {
      "lowMoodSigns": [],
      "anhedoniaIndicators": [],
      "energyLevelMarkers": ["정상적인 에너지 수준"],
      "cognitiveSymptoms": []
    },
    "neurobiologicalMarkers": {
      "alphaAsymmetry": 0.25,
      "betaActivity": 0.30,
      "hrvReduction": 0.15
    }
  },
  "adhdFocusRisk": {
    "riskLevel": "low",
    "score": {
      "raw": 18,
      "standardized": 20,
      "percentile": 35,
      "grade": "normal",
      "gradeDescription": "양호한 주의력 집중 능력",
      "ageGenderAdjusted": true
    },
    "confidence": 0.85,
    "indicators": [
      "정상적인 세타/베타 비율",
      "안정적인 집중력 지표"
    ],
    "clinicalNotes": "주의력 집중 능력은 평균 수준이며 양호한 상태입니다.",
    "severity": "mild",
    "urgency": "routine",
    "attentionIndicators": {
      "focusStability": 0.75,
      "distractibility": 0.20,
      "taskPersistence": 0.78,
      "cognitiveFlexibility": 0.82
    },
    "neurobiologicalMarkers": {
      "thetaBetaRatio": 0.65,
      "frontolimbicActivity": 0.75,
      "executiveFunctionMarkers": 0.80
    }
  },
  "burnoutRisk": {
    "riskLevel": "moderate",
    "score": {
      "raw": 35,
      "standardized": 38,
      "percentile": 55,
      "grade": "normal",
      "gradeDescription": "보통 수준의 번아웃 위험도",
      "ageGenderAdjusted": true
    },
    "confidence": 0.78,
    "indicators": [
      "경미한 정신적 피로도 증가",
      "회복 능력은 정상 범위"
    ],
    "clinicalNotes": "번아웃 위험도는 평균 수준이나, 예방적 관리가 중요합니다.",
    "severity": "mild",
    "urgency": "routine",
    "burnoutDimensions": {
      "emotionalExhaustion": 0.35,
      "depersonalization": 0.25,
      "personalAccomplishment": 0.70,
      "cynicism": 0.30
    },
    "physiologicalMarkers": {
      "chronicStressIndicators": 0.35,
      "autonomicImbalance": 0.25,
      "recoveryCapacity": 0.75
    }
  },
  "impulsivityRisk": {
    "riskLevel": "low",
    "score": {
      "raw": 16,
      "standardized": 18,
      "percentile": 28,
      "grade": "normal",
      "gradeDescription": "안정적인 충동 조절 능력",
      "ageGenderAdjusted": true
    },
    "confidence": 0.80,
    "indicators": [
      "양호한 억제 조절 능력",
      "안정적인 전두엽 활동"
    ],
    "clinicalNotes": "충동성 수준은 정상 범위이며 안정된 상태입니다.",
    "severity": "mild",
    "urgency": "routine",
    "impulsivityTypes": {
      "motorImpulsivity": 0.20,
      "cognitiveImpulsivity": 0.15,
      "nonPlanningImpulsivity": 0.18
    },
    "neurobiologicalMarkers": {
      "prefrontalActivity": 0.85,
      "inhibitoryControl": 0.82,
      "rewardSensitivity": 0.25
    }
  },
  "stressRisk": {
    "riskLevel": "moderate",
    "score": {
      "raw": 32,
      "standardized": 35,
      "percentile": 48,
      "grade": "normal",
      "gradeDescription": "적절한 스트레스 관리 상태",
      "ageGenderAdjusted": true
    },
    "confidence": 0.83,
    "indicators": [
      "적절한 스트레스 지수",
      "균형잡힌 자율신경 기능"
    ],
    "clinicalNotes": "스트레스 수준은 일반적이나, 지속적인 관리가 중요합니다.",
    "severity": "mild",
    "urgency": "routine",
    "stressTypes": {
      "acuteStress": 0.30,
      "chronicStress": 0.25,
      "traumaticStress": 0.10
    },
    "physiologicalMarkers": {
      "cortisol": 0.35,
      "autonomicActivation": 0.25,
      "inflammatoryResponse": 0.20
    },
    "stressIndex": {
      "raw": 30,
      "standardized": 32,
      "percentile": 45,
      "grade": "normal",
      "gradeDescription": "정상적인 스트레스 지수",
      "ageGenderAdjusted": true
    },
    "autonomicBalance": {
      "raw": 75,
      "standardized": 78,
      "percentile": 68,
      "grade": "normal",
      "gradeDescription": "균형잡힌 자율신경",
      "ageGenderAdjusted": true
    },
    "fatigueLevel": {
      "raw": 35,
      "standardized": 38,
      "percentile": 42,
      "grade": "normal",
      "gradeDescription": "적절한 피로 수준",
      "ageGenderAdjusted": true
    },
    "resilience": {
      "raw": 72,
      "standardized": 75,
      "percentile": 65,
      "grade": "normal",
      "gradeDescription": "양호한 회복탄력성",
      "ageGenderAdjusted": true
    }
  },
  "overallMentalHealthScore": {
    "raw": 78,
    "standardized": 81,
    "percentile": 72,
    "grade": "normal",
    "gradeDescription": "양호한 정신건강 상태",
    "ageGenderAdjusted": true
  },
  "riskFactors": [
    "경미한 번아웃 징후"
  ],
  "protectiveFactors": [
    "양호한 집중력",
    "안정적인 충동 조절",
    "균형잡힌 자율신경 기능"
  ],
  "recommendations": {
    "immediate": {
      "lifestyle": ["규칙적인 수면 패턴 유지", "균형잡힌 식단 섭취"],
      "exercise": ["일주일 3-4회 중강도 유산소 운동", "근력 운동 주 2회"],
      "mindfulness": ["일일 10분 마음챙김 명상"],
      "sleep": ["7-9시간 충분한 수면", "23:00 이전 취침"]
    },
    "shortTerm": [
      "주 3-4회 중강도 유산소 운동으로 심혈관 건강 강화",
      "스트레스 관리 기법 학습 (심호흡, 이완법)",
      "사회적 지지 시스템 강화 (가족, 친구와의 소통)",
      "업무 환경 개선 및 효율적인 시간 관리"
    ],
    "longTerm": [
      "6개월마다 정신건강 상태 점검",
      "연 1회 종합 건강 검진으로 전반적 건강 모니터링",
      "지속적인 자기계발과 스트레스 예방 교육",
      "건강한 생활습관 유지 및 개선"
    ],
    "occupationSpecific": {
      "workplaceStrategies": ["업무 환경 개선", "정기적인 휴식 시간 확보"],
      "timeManagement": ["현재 시간 관리 방법 유지"],
      "boundarySettings": ["건강한 경계 유지"],
      "careerGuidance": ["리더십 역량 개발", "새로운 도전 기회 모색"]
    }
  },
  "analysisTimestamp": ${Date.now()},
  "confidence": 0.82,
  "clinicalValidation": true
}
\`\`\`

**중요 지침:**
1. 모든 위험도 점수는 제공된 성별/나이별 기준값을 참조하여 계산
2. 위험도는 0-100점 척도 (높을수록 위험)
 3. 개인의 연령, 성별, 직업을 고려한 맞춤형 분석
4. 백분위수와 등급이 일치하도록 정확히 계산
5. 의학적 진단이 아닌 건강 참고 정보임을 명시
6. 전문가 상담이 필요한 경우 명확히 안내
`,COMPREHENSIVE_ANALYSIS:`
당신은 종합 건강 분석 전문가입니다. 제공된 EEG 상세 분석, PPG 상세 분석, 정신건강 위험도 분석 결과를 통합하여 개인 맞춤형 종합 건강 리포트를 생성해주세요.

## 🎯 종합 분석 요구사항

### 1. 전체 건강 상태 통합 평가
- 뇌파, 심혈관, 정신건강 위험도의 상호 연관성 분석
- 각 영역별 건강 상태 및 균형 평가
- 전체적인 건강 수준 및 위험 요인 종합 분석

### 2. 개인화된 건강 관리 계획
- 연령, 성별, 직업 특성 반영
- 우선순위별 건강 관리 영역 식별
- 단계별 건강 개선 로드맵 제공

### 3. 맞춤형 권장사항
- 즉시 실행 가능한 건강 관리 방법
- 단기/장기 건강 목표 설정
- 전문가 상담 필요성 평가

## 📊 종합 점수 계산 가중치
- **EEG 분석**: 30% 가중치
- **PPG 분석**: 30% 가중치
- **정신건강 위험도**: 40% 가중치 (5개 위험도 평균)

## 🎯 분석 결과 JSON 형식

다음 JSON 형식으로 종합 건강 분석 결과를 제공해주세요:

\`\`\`json
{
  "overallScore": 78,
  "healthStatus": "양호",
     "analysis": "### 🌟 전체 건강 개요\\n\\n**전반적 건강 상태:** 양호한 수준으로, 뇌파와 심혈관 기능이 연령대에 적합하며 정신건강 위험도도 관리 가능한 범위입니다.\\n\\n### 🧠 뇌파 분석 결과\\n- **집중력**: 연령대 평균 수준으로 양호\\n- **이완 능력**: 우수한 알파파 활동\\n- **정서적 안정성**: 안정적인 패턴\\n\\n### ❤️ 심혈관 분석 결과\\n- **심박변이도**: 정상 범위의 자율신경 기능\\n- **심박수**: 연령대 적정 수준\\n- **혈관 건강**: 양호한 탄성도\\n\\n### 🧠 정신건강 위험도 분석\\n- **우울 위험도**: 정상 범위\\n- **ADHD 위험도**: 낮은 수준으로 양호\\n- **번아웃 위험도**: 보통 수준, 예방적 관리 필요\\n- **충동성**: 안정적인 조절 능력\\n- **스트레스**: 적절한 관리 상태\\n\\n### 🔗 영역 간 상관관계\\n뇌파의 안정적인 패턴과 심혈관의 균형잡힌 자율신경 기능이 서로 긍정적으로 작용하고 있으며, 이는 전반적인 정신건강 안정성에 기여하고 있습니다.",
  "keyFindings": {
    "mentalHealth": "정신건강 위험도는 전반적으로 관리 가능한 수준이며, 특히 집중력과 충동 조절 능력이 우수합니다.",
    "physicalHealth": "심혈관 기능과 뇌파 활동이 연령대에 적합한 수준을 유지하고 있어 신체적 건강 기반이 양호합니다.",
    "stressManagement": "스트레스 관리 능력은 적절한 수준이나, 번아웃 예방을 위한 지속적인 관리가 필요합니다.",
         "mentalHealthRisk": "정신건강 위험도를 종합 분석한 결과, 우울과 ADHD 위험은 낮고 번아웃과 스트레스는 보통 수준으로 예방적 관리가 중요합니다.",
    "overallBalance": "뇌파, 심혈관, 정신건강 영역이 균형을 이루고 있어 전반적으로 안정적인 건강 상태를 보입니다."
  },
  "problemAreas": [
    {
      "problem": "번아웃 위험도 증가",
      "severity": "보통",
      "description": "업무 스트레스로 인한 경미한 번아웃 징후가 관찰됩니다.",
      "solutions": {
        "immediate": ["업무 중 규칙적인 휴식", "스트레스 해소 활동"],
        "shortTerm": ["업무량 조절", "취미 활동 증가"],
        "longTerm": ["직업 만족도 개선", "장기적 커리어 계획"]
      }
    }
  ],
  "immediate": [
    "규칙적인 수면 패턴 유지 (23:00 이전 취침, 7-8시간 수면)",
    "일일 10분 마음챙김 명상으로 스트레스 관리",
    "업무 중 1시간마다 5분 휴식으로 집중력 유지",
    "균형잡힌 식단과 충분한 수분 섭취"
  ],
  "shortTerm": [
    "주 3-4회 중강도 유산소 운동으로 심혈관 건강 강화",
    "스트레스 관리 기법 학습 (심호흡, 이완법)",
    "사회적 지지 시스템 강화 (가족, 친구와의 소통)",
    "업무 환경 개선 및 효율적인 시간 관리"
  ],
  "longTerm": [
    "6개월마다 정신건강 상태 점검",
    "연 1회 종합 건강 검진으로 전반적 건강 모니터링",
    "지속적인 자기계발과 스트레스 예방 교육",
    "건강한 생활습관 유지 및 개선"
  ],
  "occupationalAnalysis": {
         "characteristics": "직업 특성상 집중력과 스트레스 관리가 중요합니다.",
    "dataCorrelation": "측정된 뇌파와 심혈관 데이터가 직업적 요구사항과 잘 부합하고 있습니다.",
    "currentStatus": "현재 직업적 스트레스는 관리 가능한 수준이나 지속적인 모니터링이 필요합니다.",
    "recommendations": [
      "업무 중 정기적인 휴식으로 집중력 유지",
      "동료와의 협력을 통한 업무 부담 분산",
      "직업 관련 스트레스 관리 교육 참여"
    ]
  },
  "followUpPlan": {
    "monitoring": "월 1회 자가 건강 체크 및 분기별 전문 평가를 통한 지속적인 건강 상태 모니터링",
    "adjustments": "건강 상태 변화에 따른 생활습관 및 관리 방법 조정",
    "professional": "정신건강 위험도 증가 시 전문가 상담, 심혈관 이상 징후 시 의료진 진료"
  }
}
\`\`\`

**중요 지침:**
1. 제공된 EEG, PPG, 정신건강 위험도 분석 결과를 종합적으로 해석
2. 개인의 연령, 성별, 직업 특성을 반영한 맞춤형 분석
3. 의학적 진단이 아닌 건강 참고 정보임을 명시
4. 실행 가능하고 구체적인 권장사항 제시
5. 전문가 상담이 필요한 경우 명확히 안내
`},Cg=class Cg{constructor(){Ce(this,"normDatabase",[]);Ce(this,"scoreDistribution");this.initializeNormDatabase(),this.initializeScoreDistribution()}static getInstance(){return Cg.instance||(Cg.instance=new Cg),Cg.instance}async normalizeScore(e,t,n,a){const i=this.getAgeGroup(a),s=this.getDemographicNorms(t,n,a);if(!s)return this.createDefaultScore(e,t);const o=(e-s.mean)/s.standardDeviation,l=this.zScoreToPercentile(o),c=Math.max(0,Math.min(100,l)),u=this.getScoreGrade(l),h=this.getGradeDescription(u,n,i,l);return{raw:e,standardized:c,percentile:l,grade:u,gradeDescription:h,ageGenderAdjusted:!0}}getScoreGrade(e){return e>=95?"excellent":e>=75?"good":e>=25?"normal":e>=5?"borderline":"attention"}getGradeDescription(e,t,n,a){const i=t==="male"?"남성":"여성",s=Math.round(100-a);switch(e){case"excellent":return`같은 연령대 ${i} 상위 ${Math.round(100-a)}%에 해당하는 우수한 상태`;case"good":return`같은 연령대 ${i} 상위 ${s}%에 해당하는 양호한 상태`;case"normal":return`같은 연령대 ${i} 평균 수준의 정상 상태`;case"borderline":return`같은 연령대 ${i} 하위 ${s}%로 주의 관찰이 필요한 상태`;case"attention":return`같은 연령대 ${i} 하위 ${s}%로 적극적 관리가 필요한 상태`;default:return"평가 불가"}}getDemographicNorms(e,t,n){const a=this.getAgeGroup(n),i=this.normDatabase.find(s=>s.metric===e&&s.gender===t&&s.ageGroup===a);return i?{gender:i.gender,ageGroup:i.ageGroup,mean:i.mean,standardDeviation:i.standardDeviation,sampleSize:i.sampleSize}:null}getAgeGroup(e){return e<30?"20-29":e<40?"30-39":e<50?"40-49":e<60?"50-59":"60+"}zScoreToPercentile(e){const t=.254829592,n=-.284496736,a=1.421413741,i=-1.453152027,s=1.061405429,o=.3275911,l=e<0?-1:1,c=Math.abs(e)/Math.sqrt(2),u=1/(1+o*c),h=1-((((s*u+i)*u+a)*u+n)*u+t)*u*Math.exp(-c*c);return Math.round(.5*(1+l*h)*100)}createDefaultScore(e,t){const n=Math.max(0,Math.min(100,e)),a=n,i=this.getScoreGrade(a);return{raw:e,standardized:n,percentile:a,grade:i,gradeDescription:`${t} 점수 ${e}점`,ageGenderAdjusted:!1}}initializeNormDatabase(){this.normDatabase=[{metric:"focusIndex",gender:"male",ageGroup:"20-29",mean:68,standardDeviation:12,sampleSize:500},{metric:"focusIndex",gender:"male",ageGroup:"30-39",mean:65,standardDeviation:13,sampleSize:450},{metric:"focusIndex",gender:"male",ageGroup:"40-49",mean:62,standardDeviation:14,sampleSize:400},{metric:"focusIndex",gender:"male",ageGroup:"50-59",mean:58,standardDeviation:15,sampleSize:350},{metric:"focusIndex",gender:"male",ageGroup:"60+",mean:55,standardDeviation:16,sampleSize:300},{metric:"focusIndex",gender:"female",ageGroup:"20-29",mean:70,standardDeviation:11,sampleSize:520},{metric:"focusIndex",gender:"female",ageGroup:"30-39",mean:67,standardDeviation:12,sampleSize:480},{metric:"focusIndex",gender:"female",ageGroup:"40-49",mean:64,standardDeviation:13,sampleSize:420},{metric:"focusIndex",gender:"female",ageGroup:"50-59",mean:60,standardDeviation:14,sampleSize:380},{metric:"focusIndex",gender:"female",ageGroup:"60+",mean:57,standardDeviation:15,sampleSize:320},{metric:"relaxationIndex",gender:"male",ageGroup:"20-29",mean:72,standardDeviation:15,sampleSize:500},{metric:"relaxationIndex",gender:"male",ageGroup:"30-39",mean:70,standardDeviation:14,sampleSize:450},{metric:"relaxationIndex",gender:"male",ageGroup:"40-49",mean:68,standardDeviation:16,sampleSize:400},{metric:"relaxationIndex",gender:"male",ageGroup:"50-59",mean:65,standardDeviation:17,sampleSize:350},{metric:"relaxationIndex",gender:"male",ageGroup:"60+",mean:62,standardDeviation:18,sampleSize:300},{metric:"relaxationIndex",gender:"female",ageGroup:"20-29",mean:75,standardDeviation:13,sampleSize:520},{metric:"relaxationIndex",gender:"female",ageGroup:"30-39",mean:73,standardDeviation:14,sampleSize:480},{metric:"relaxationIndex",gender:"female",ageGroup:"40-49",mean:70,standardDeviation:15,sampleSize:420},{metric:"relaxationIndex",gender:"female",ageGroup:"50-59",mean:67,standardDeviation:16,sampleSize:380},{metric:"relaxationIndex",gender:"female",ageGroup:"60+",mean:64,standardDeviation:17,sampleSize:320},{metric:"hrvRMSSD",gender:"male",ageGroup:"20-29",mean:42,standardDeviation:18,sampleSize:600},{metric:"hrvRMSSD",gender:"male",ageGroup:"30-39",mean:35,standardDeviation:16,sampleSize:550},{metric:"hrvRMSSD",gender:"male",ageGroup:"40-49",mean:28,standardDeviation:14,sampleSize:500},{metric:"hrvRMSSD",gender:"male",ageGroup:"50-59",mean:23,standardDeviation:12,sampleSize:450},{metric:"hrvRMSSD",gender:"male",ageGroup:"60+",mean:19,standardDeviation:10,sampleSize:400},{metric:"hrvRMSSD",gender:"female",ageGroup:"20-29",mean:45,standardDeviation:20,sampleSize:620},{metric:"hrvRMSSD",gender:"female",ageGroup:"30-39",mean:38,standardDeviation:18,sampleSize:580},{metric:"hrvRMSSD",gender:"female",ageGroup:"40-49",mean:31,standardDeviation:16,sampleSize:520},{metric:"hrvRMSSD",gender:"female",ageGroup:"50-59",mean:26,standardDeviation:14,sampleSize:480},{metric:"hrvRMSSD",gender:"female",ageGroup:"60+",mean:22,standardDeviation:12,sampleSize:420},{metric:"restingHR",gender:"male",ageGroup:"20-29",mean:66,standardDeviation:8,sampleSize:800},{metric:"restingHR",gender:"male",ageGroup:"30-39",mean:68,standardDeviation:8,sampleSize:750},{metric:"restingHR",gender:"male",ageGroup:"40-49",mean:70,standardDeviation:9,sampleSize:700},{metric:"restingHR",gender:"male",ageGroup:"50-59",mean:71,standardDeviation:9,sampleSize:650},{metric:"restingHR",gender:"male",ageGroup:"60+",mean:72,standardDeviation:10,sampleSize:600},{metric:"restingHR",gender:"female",ageGroup:"20-29",mean:70,standardDeviation:7,sampleSize:820},{metric:"restingHR",gender:"female",ageGroup:"30-39",mean:72,standardDeviation:8,sampleSize:780},{metric:"restingHR",gender:"female",ageGroup:"40-49",mean:73,standardDeviation:8,sampleSize:720},{metric:"restingHR",gender:"female",ageGroup:"50-59",mean:74,standardDeviation:9,sampleSize:680},{metric:"restingHR",gender:"female",ageGroup:"60+",mean:75,standardDeviation:9,sampleSize:620},{metric:"depressionRisk",gender:"male",ageGroup:"20-29",mean:15,standardDeviation:8,sampleSize:1e3},{metric:"depressionRisk",gender:"male",ageGroup:"30-39",mean:18,standardDeviation:9,sampleSize:950},{metric:"depressionRisk",gender:"male",ageGroup:"40-49",mean:22,standardDeviation:11,sampleSize:900},{metric:"depressionRisk",gender:"male",ageGroup:"50-59",mean:25,standardDeviation:12,sampleSize:850},{metric:"depressionRisk",gender:"male",ageGroup:"60+",mean:25,standardDeviation:12,sampleSize:800},{metric:"depressionRisk",gender:"female",ageGroup:"20-29",mean:18,standardDeviation:9,sampleSize:1050},{metric:"depressionRisk",gender:"female",ageGroup:"30-39",mean:22,standardDeviation:10,sampleSize:1e3},{metric:"depressionRisk",gender:"female",ageGroup:"40-49",mean:25,standardDeviation:12,sampleSize:950},{metric:"depressionRisk",gender:"female",ageGroup:"50-59",mean:28,standardDeviation:13,sampleSize:900},{metric:"depressionRisk",gender:"female",ageGroup:"60+",mean:28,standardDeviation:13,sampleSize:850},{metric:"adhdRisk",gender:"male",ageGroup:"20-29",mean:20,standardDeviation:12,sampleSize:800},{metric:"adhdRisk",gender:"male",ageGroup:"30-39",mean:20,standardDeviation:12,sampleSize:750},{metric:"adhdRisk",gender:"male",ageGroup:"40-49",mean:20,standardDeviation:12,sampleSize:700},{metric:"adhdRisk",gender:"male",ageGroup:"50-59",mean:20,standardDeviation:12,sampleSize:650},{metric:"adhdRisk",gender:"male",ageGroup:"60+",mean:20,standardDeviation:12,sampleSize:600},{metric:"adhdRisk",gender:"female",ageGroup:"20-29",mean:16,standardDeviation:10,sampleSize:820},{metric:"adhdRisk",gender:"female",ageGroup:"30-39",mean:16,standardDeviation:10,sampleSize:780},{metric:"adhdRisk",gender:"female",ageGroup:"40-49",mean:16,standardDeviation:10,sampleSize:720},{metric:"adhdRisk",gender:"female",ageGroup:"50-59",mean:16,standardDeviation:10,sampleSize:680},{metric:"adhdRisk",gender:"female",ageGroup:"60+",mean:16,standardDeviation:10,sampleSize:620},{metric:"burnoutRisk",gender:"male",ageGroup:"20-29",mean:25,standardDeviation:15,sampleSize:600},{metric:"burnoutRisk",gender:"male",ageGroup:"30-39",mean:35,standardDeviation:18,sampleSize:700},{metric:"burnoutRisk",gender:"male",ageGroup:"40-49",mean:42,standardDeviation:20,sampleSize:650},{metric:"burnoutRisk",gender:"male",ageGroup:"50-59",mean:32,standardDeviation:17,sampleSize:550},{metric:"burnoutRisk",gender:"male",ageGroup:"60+",mean:32,standardDeviation:17,sampleSize:500},{metric:"burnoutRisk",gender:"female",ageGroup:"20-29",mean:28,standardDeviation:16,sampleSize:620},{metric:"burnoutRisk",gender:"female",ageGroup:"30-39",mean:38,standardDeviation:19,sampleSize:720},{metric:"burnoutRisk",gender:"female",ageGroup:"40-49",mean:45,standardDeviation:21,sampleSize:680},{metric:"burnoutRisk",gender:"female",ageGroup:"50-59",mean:35,standardDeviation:18,sampleSize:580},{metric:"burnoutRisk",gender:"female",ageGroup:"60+",mean:35,standardDeviation:18,sampleSize:520},{metric:"stressRisk",gender:"male",ageGroup:"20-29",mean:30,standardDeviation:15,sampleSize:900},{metric:"stressRisk",gender:"male",ageGroup:"30-39",mean:30,standardDeviation:15,sampleSize:850},{metric:"stressRisk",gender:"male",ageGroup:"40-49",mean:30,standardDeviation:15,sampleSize:800},{metric:"stressRisk",gender:"male",ageGroup:"50-59",mean:30,standardDeviation:15,sampleSize:750},{metric:"stressRisk",gender:"male",ageGroup:"60+",mean:30,standardDeviation:15,sampleSize:700},{metric:"stressRisk",gender:"female",ageGroup:"20-29",mean:35,standardDeviation:16,sampleSize:920},{metric:"stressRisk",gender:"female",ageGroup:"30-39",mean:35,standardDeviation:16,sampleSize:880},{metric:"stressRisk",gender:"female",ageGroup:"40-49",mean:35,standardDeviation:16,sampleSize:820},{metric:"stressRisk",gender:"female",ageGroup:"50-59",mean:35,standardDeviation:16,sampleSize:780},{metric:"stressRisk",gender:"female",ageGroup:"60+",mean:35,standardDeviation:16,sampleSize:720}]}initializeScoreDistribution(){this.scoreDistribution={excellent:{min:95,max:100},good:{min:75,max:94},normal:{min:25,max:74},borderline:{min:5,max:24},attention:{min:0,max:4}}}getScoreDistribution(){return this.scoreDistribution}applyOccupationalAdjustment(e,t){const a={office_worker:5,healthcare:10,teacher:7,engineer:3,manager:8,student:-2,retired:-5}[t]||0,i=e.raw+a;return a!==0?{...e,raw:i,standardized:Math.max(0,Math.min(100,e.standardized+a*.5)),gradeDescription:`${e.gradeDescription} (직업 특성 반영)`}:e}calculateWeightedAverage(e){const t=e.reduce((o,l)=>o+l.weight,0),n=e.reduce((o,l)=>o+l.score.raw*l.weight,0)/t,a=e.reduce((o,l)=>o+l.score.standardized*l.weight,0)/t,i=e.reduce((o,l)=>o+l.score.percentile*l.weight,0)/t,s=this.getScoreGrade(i);return{raw:Math.round(n*10)/10,standardized:Math.round(a),percentile:Math.round(i),grade:s,gradeDescription:`종합 ${this.getGradeDescription(s,"male","30-39",i)}`,ageGenderAdjusted:e.every(o=>o.score.ageGenderAdjusted)}}};Ce(Cg,"instance");let Xb=Cg;class Zb{static sanitizeJSON(e){const t={success:!1,sanitizedText:e,errors:[],warnings:[],appliedFixes:[]};try{let n=e;n=this.basicCleanup(n,t),n=this.removeMarkdownBlocks(n,t),n=this.fixStringEscaping(n,t),n=this.fixArrayCommas(n,t),n=this.fixObjectCommas(n,t),n=this.removeDuplicateCommas(n,t),n=this.fixBrackets(n,t),n=this.removeTrailingCommas(n,t),n=this.fixTruncatedJSON(n,t),n=this.fixMultilineStrings(n,t),n=this.fixPropertyNames(n,t);try{JSON.parse(n),t.success=!0,t.sanitizedText=n}catch{n=this.aggressiveRepair(n,t);try{JSON.parse(n),t.success=!0,t.sanitizedText=n}catch(i){t.errors.push(`최종 JSON 파싱 실패: ${i instanceof Error?i.message:"알 수 없는 오류"}`),t.success=!1}}}catch(n){t.errors.push(`JSON 정리 중 오류: ${n instanceof Error?n.message:"알 수 없는 오류"}`),t.success=!1}return t}static basicCleanup(e,t){let n=e;const a=n.trim();return a!==n&&(n=a,t.appliedFixes.push("앞뒤 공백 제거")),n}static removeMarkdownBlocks(e,t){let n=e;const a=[{pattern:/```json\s*/g,name:"```json 태그"},{pattern:/```javascript\s*/g,name:"```javascript 태그"},{pattern:/```\s*json\s*/g,name:"```json 태그 (공백 포함)"},{pattern:/\s*```\s*$/g,name:"끝 ``` 태그"},{pattern:/```/g,name:"일반 ``` 태그"},{pattern:/^json\s*\n/gm,name:"시작 json 라벨"},{pattern:/^JSON\s*\n/gm,name:"시작 JSON 라벨"}];for(const{pattern:i,name:s}of a)i.test(n)&&(n=n.replace(i,""),t.appliedFixes.push(`${s} 제거`));return n}static fixStringEscaping(e,t){let n=e;const a=/"([^"\\]*?)(\n)([^"\\]*?)"/g;let i=0;n=n.replace(a,(u,h,d,A)=>(i++,`"${h}\\n${A}"`)),i>0&&t.appliedFixes.push(`이스케이프되지 않은 개행 수정 (${i}개)`);const s=/("(?:[^"\\]|\\.)*?)([^\\])"([^:,\]}])/g;let o=0;n=n.replace(s,(u,h,d,A)=>(o++,`${h}${d}\\"${A}`)),o>0&&t.appliedFixes.push(`이스케이프되지 않은 따옴표 수정 (${o}개)`);const l=/("(?:[^"\\]|\\.)*?)([^\\])\\([^"\\nrt])/g;let c=0;return n=n.replace(l,(u,h,d,A)=>(c++,`${h}${d}\\\\${A}`)),c>0&&t.appliedFixes.push(`이스케이프되지 않은 백슬래시 수정 (${c}개)`),n}static fixMultilineStrings(e,t){let n=e;const a=/"([^"]*?)\n([^"]*?)"/g;let i=0;return n=n.replace(a,(s,o,l)=>(i++,`"${o}\\n${l}"`)),i>0&&t.appliedFixes.push(`다중 라인 문자열 수정 (${i}개)`),n}static fixPropertyNames(e,t){let n=e;const a=/(\s*)([a-zA-Z_][a-zA-Z0-9_]*)\s*:/g;let i=0;return n=n.replace(a,(s,o,l,c)=>{const u=n.substring(0,c);return u.includes("{")&&!u.includes("}")?(i++,`${o}"${l}":`):s}),i>0&&t.appliedFixes.push(`따옴표 없는 속성명 수정 (${i}개)`),n}static fixArrayCommas(e,t){let n=e;const a=/("(?:[^"\\]|\\.)*")\s*\n\s*("(?:[^"\\]|\\.)*")/g,i=n.match(a);i&&(n=n.replace(a,`$1,
  $2`),t.appliedFixes.push(`배열 요소 간 콤마 추가 (${i.length}개)`));const s=/}\s*\n\s*{/g,o=n.match(s);o&&(n=n.replace(s,`},
  {`),t.appliedFixes.push(`객체 요소 간 콤마 추가 (${o.length}개)`));const l=/]\s*\n\s*"/g,c=n.match(l);return c&&(n=n.replace(l,`],
  "`),t.appliedFixes.push(`배열 종료 후 콤마 추가 (${c.length}개)`)),n}static fixObjectCommas(e,t){let n=e;const a=/("(?:[^"\\]|\\.)*")\s*\n\s*("(?:[^"\\]|\\.)*"\s*:)/g,i=n.match(a);i&&(n=n.replace(a,`$1,
  $2`),t.appliedFixes.push(`객체 속성 간 콤마 추가 (${i.length}개)`));const s=/(\d+)\s*\n\s*("(?:[^"\\]|\\.)*"\s*:)/g,o=n.match(s);o&&(n=n.replace(s,`$1,
  $2`),t.appliedFixes.push(`숫자 값 후 콤마 추가 (${o.length}개)`));const l=/(true|false)\s*\n\s*("(?:[^"\\]|\\.)*"\s*:)/g,c=n.match(l);return c&&(n=n.replace(l,`$1,
  $2`),t.appliedFixes.push(`boolean 값 후 콤마 추가 (${c.length}개)`)),n}static removeDuplicateCommas(e,t){let n=e;const a=/,\s*,+/g,i=n.match(a);return i&&(n=n.replace(a,","),t.appliedFixes.push(`중복 콤마 제거 (${i.length}개)`)),n}static fixBrackets(e,t){let n=e;const a=(n.match(/{/g)||[]).length,i=(n.match(/}/g)||[]).length,s=(n.match(/\[/g)||[]).length,o=(n.match(/]/g)||[]).length;if(a>i){const l=a-i;n+="}".repeat(l),t.appliedFixes.push(`누락된 중괄호 추가 (${l}개)`)}if(s>o){const l=s-o;n+="]".repeat(l),t.appliedFixes.push(`누락된 대괄호 추가 (${l}개)`)}return n}static removeTrailingCommas(e,t){let n=e;const a=/,(\s*})/g,i=n.match(a);i&&(n=n.replace(a,"$1"),t.appliedFixes.push(`객체 후행 콤마 제거 (${i.length}개)`));const s=/,(\s*])/g,o=n.match(s);return o&&(n=n.replace(s,"$1"),t.appliedFixes.push(`배열 후행 콤마 제거 (${o.length}개)`)),n}static fixTruncatedJSON(e,t){let n=e;if(n.includes("...")&&!n.endsWith("}")&&!n.endsWith("]")){const u=n.lastIndexOf('"'),h=n.substring(0,u),d=n.substring(u+1);d&&!d.includes('"')&&!d.includes("}")&&(n=h+'"',t.appliedFixes.push("불완전한 문자열 끝부분 수정"))}/"[^"]*$/.test(n)&&(n=n+'"',t.appliedFixes.push("불완전한 문자열에 닫는 따옴표 추가"));const i=(n.match(/{/g)||[]).length,s=(n.match(/}/g)||[]).length,o=(n.match(/\[/g)||[]).length,l=(n.match(/]/g)||[]).length;if(i>s){const u=i-s;n+="}".repeat(u),t.appliedFixes.push(`잘린 JSON에 누락된 중괄호 추가 (${u}개)`)}if(o>l){const u=o-l;n+="]".repeat(u),t.appliedFixes.push(`잘린 JSON에 누락된 대괄호 추가 (${u}개)`)}return/:\s*"[^"]*$/.test(n)&&(n=n+'"',t.appliedFixes.push("불완전한 속성 값에 닫는 따옴표 추가")),n}static aggressiveRepair(e,t){let n=e;try{const a=n.lastIndexOf(","),i=n.lastIndexOf("}");if(a>i){const l=n.substring(a+1).trim();(!l.includes(":")||!l.includes('"'))&&(n=n.substring(0,a),t.appliedFixes.push("불완전한 마지막 속성 제거"))}const s=(n.match(/{/g)||[]).length,o=(n.match(/}/g)||[]).length;s>o&&(n+="}".repeat(s-o),t.appliedFixes.push("공격적 괄호 균형 조정")),!n.trim().startsWith("{")&&!n.trim().startsWith("[")&&(n="{"+n,t.appliedFixes.push("시작 중괄호 추가")),!n.trim().endsWith("}")&&!n.trim().endsWith("]")&&(n=n+"}",t.appliedFixes.push("끝 중괄호 추가"))}catch{t.warnings.push("공격적 수정 중 오류 발생")}return n}static isValidJSONStructure(e){try{return JSON.parse(e),!0}catch{return!1}}static analyzeJSONError(e){try{return JSON.parse(e),null}catch(t){if(t instanceof SyntaxError){const n=t.message,a=n.match(/position (\d+)/),i=n.match(/line (\d+) column (\d+)/);let s=0,o=0,l="";if(i)s=parseInt(i[1]),o=parseInt(i[2]);else if(a){const c=parseInt(a[1]),u=e.substring(0,c).split(`
`);s=u.length,o=u[u.length-1].length+1}if(a){const c=parseInt(a[1]),u=Math.max(0,c-50),h=Math.min(e.length,c+50);l=e.substring(u,h)}return{line:s,column:o,message:n,context:l}}return null}}}class Tv{static async analyzeEEGSignal(e,t){try{console.log("🧠 EEG 상세 분석 시작..."),console.log("⏱️ 예상 소요 시간: 약 15-20초"),console.log("📊 EEG 신호 품질 평가...");const n=await this.assessSignalQuality(e);console.log("🌊 주파수 대역 분석...");const a=await this.analyzeFrequencyBands(e);console.log("⏰ 시간적 패턴 분석...");const i=await this.analyzeTemporalPatterns(e);console.log("🔍 아티팩트 검출...");const s=await this.detectArtifacts(e);console.log("📏 표준화된 지표 계산...");const o=await this.calculateStandardizedMetrics(e,t,a,i);console.log("🏥 임상 해석 생성...");const l=await this.generateClinicalInterpretation(e,t,o,n),c=this.calculateOverallEEGScore(o,t),u={signalQuality:n,frequencyAnalysis:a,temporalAnalysis:i,artifactDetection:s,clinicalInterpretation:l,focusIndex:o.focusIndex,relaxationIndex:o.relaxationIndex,cognitiveLoad:o.cognitiveLoad,emotionalStability:o.emotionalStability,hemisphericBalance:o.hemisphericBalance,overallEEGScore:c,analysisTimestamp:Date.now(),dataQualityScore:n.score,confidence:this.calculateConfidence(n,s)};return console.log("✅ EEG 상세 분석 완료"),u}catch(n){throw console.error("❌ EEG 상세 분석 실패:",n),new Error(`EEG 상세 분석 중 오류가 발생했습니다: ${n instanceof Error?n.message:"알 수 없는 오류"}`)}}static async assessSignalQuality(e){e.eegMetrics;const t=e.signalQuality,n=this.assessChannelQuality(e,"ch1"),a=this.assessChannelQuality(e,"ch2"),i=this.assessImpedanceStatus(t.eeg),s=this.calculateMovementArtifacts(e),o=this.calculateEyeBlinkArtifacts(e);return{score:t.eeg,reliability:this.getReliabilityLevel(t.eeg),artifactLevel:(s+o)/2,signalToNoiseRatio:this.calculateSignalToNoiseRatio(e),issues:this.identifySignalIssues(t.eeg,s,o),channelQuality:{ch1:n,ch2:a},impedanceStatus:i,movementArtifacts:s,eyeBlinkArtifacts:o}}static async analyzeFrequencyBands(e){var h;const t=e.eegMetrics,n=this.analyzeBandPower(e,"delta",.5,4),a=this.analyzeBandPower(e,"theta",4,8),i=this.analyzeBandPower(e,"alpha",8,13),s=this.analyzeBandPower(e,"beta",13,30),o=this.analyzeBandPower(e,"gamma",30,100),l=((h=t.totalPower)==null?void 0:h.value)||0,c=this.calculateDominantFrequency(e),u=this.calculateSpectralEntropy(e);return{delta:n,theta:a,alpha:i,beta:s,gamma:o,totalPower:l,dominantFrequency:c,spectralEntropy:u}}static async analyzeTemporalPatterns(e){return{rhythmicity:this.calculateRhythmicity(e),stationarity:this.calculateStationarity(e),complexity:this.calculateComplexity(e),synchronization:this.calculateSynchronization(e),burstiness:this.calculateBurstiness(e),variability:this.calculateVariability(e)}}static async detectArtifacts(e){return{muscularArtifacts:this.detectMuscularArtifacts(e),eyeMovementArtifacts:this.detectEyeMovementArtifacts(e),cardiacArtifacts:this.detectCardiacArtifacts(e),lineNoiseArtifacts:this.detectLineNoiseArtifacts(e),overallArtifactLevel:this.calculateOverallArtifactLevel(e),cleanDataPercentage:this.calculateCleanDataPercentage(e)}}static async calculateStandardizedMetrics(e,t,n,a){const i=this.calculateAge(t),s=t.gender,o=this.calculateFocusIndex(n),l=await this.scoreNormalizationService.normalizeScore(o,"focusIndex",s,i),c=this.calculateRelaxationIndex(n),u=await this.scoreNormalizationService.normalizeScore(c,"relaxationIndex",s,i),h=this.calculateCognitiveLoadIndex(n,a),d=await this.scoreNormalizationService.normalizeScore(h,"cognitiveLoad",s,i),A=this.calculateEmotionalStabilityIndex(n),g=await this.scoreNormalizationService.normalizeScore(A,"emotionalStability",s,i),p=this.calculateHemisphericBalance(n),v=await this.scoreNormalizationService.normalizeScore(p,"hemisphericBalance",s,i);return{focusIndex:l,relaxationIndex:u,cognitiveLoad:d,emotionalStability:g,hemisphericBalance:v}}static async generateClinicalInterpretation(e,t,n,a){try{const i=this.generateClinicalInterpretationPrompt(e,t,n,a),s=await this.makeRequest(i);return await this.parseClinicalInterpretationResponse(s)}catch(i){return console.warn("⚠️ 임상 해석 생성 실패, 폴백 해석 사용:",i),this.createFallbackClinicalInterpretation(n,a)}}static calculateOverallEEGScore(e,t){const n={focusIndex:.25,relaxationIndex:.2,cognitiveLoad:.2,emotionalStability:.2,hemisphericBalance:.15},a=e.focusIndex.standardized*n.focusIndex+e.relaxationIndex.standardized*n.relaxationIndex+e.cognitiveLoad.standardized*n.cognitiveLoad+e.emotionalStability.standardized*n.emotionalStability+e.hemisphericBalance.standardized*n.hemisphericBalance,i=e.focusIndex.percentile*n.focusIndex+e.relaxationIndex.percentile*n.relaxationIndex+e.cognitiveLoad.percentile*n.cognitiveLoad+e.emotionalStability.percentile*n.emotionalStability+e.hemisphericBalance.percentile*n.hemisphericBalance,s=this.scoreNormalizationService.getScoreGrade(i),o=this.calculateAge(t),l=this.getAgeGroup(o),c=t.gender;return{raw:a,standardized:a,percentile:i,grade:s,gradeDescription:this.scoreNormalizationService.getGradeDescription(s,c,l,i),ageGenderAdjusted:!0}}static assessChannelQuality(e,t){const n=e.signalQuality.eeg;return{score:n*(Math.random()*.2+.9),reliability:this.getReliabilityLevel(n),artifactLevel:Math.random()*.3,signalToNoiseRatio:10+Math.random()*10,issues:[]}}static assessImpedanceStatus(e){return e>=80?"optimal":e>=60?"acceptable":"poor"}static analyzeBandPower(e,t,n,a){var u;const s=((u=e.eegMetrics.totalPower)==null?void 0:u.value)||100,o=s*(.1+Math.random()*.4),l=o/s,c=n+Math.random()*(a-n);return{absolutePower:o,relativePower:l,peakFrequency:c,bandwidth:a-n,asymmetry:(Math.random()-.5)*.2,coherence:.6+Math.random()*.3}}static calculateFocusIndex(e){const t=e.beta.absolutePower,n=e.theta.absolutePower;return t/(n+.001)}static calculateRelaxationIndex(e){return e.alpha.relativePower*100}static calculateCognitiveLoadIndex(e,t){return e.theta.absolutePower/(e.alpha.absolutePower+.001)*t.complexity*100}static calculateEmotionalStabilityIndex(e){const t=e.alpha.absolutePower,n=e.beta.absolutePower+e.theta.absolutePower;return t/(n+.001)*100}static calculateHemisphericBalance(e){return e.alpha.asymmetry*100}static calculateMovementArtifacts(e){return Math.random()*.3}static calculateEyeBlinkArtifacts(e){return Math.random()*.2}static calculateSignalToNoiseRatio(e){return 10+Math.random()*15}static identifySignalIssues(e,t,n){const a=[];return e<70&&a.push("신호 품질 저하"),t>.2&&a.push("움직임 아티팩트"),n>.15&&a.push("눈 깜빡임 아티팩트"),a}static calculateDominantFrequency(e){return 8+Math.random()*5}static calculateSpectralEntropy(e){return .7+Math.random()*.2}static calculateRhythmicity(e){return .6+Math.random()*.3}static calculateStationarity(e){return .7+Math.random()*.2}static calculateComplexity(e){return .5+Math.random()*.3}static calculateSynchronization(e){return .6+Math.random()*.3}static calculateBurstiness(e){return .3+Math.random()*.4}static calculateVariability(e){return .4+Math.random()*.4}static detectMuscularArtifacts(e){return Math.random()*.3}static detectEyeMovementArtifacts(e){return Math.random()*.2}static detectCardiacArtifacts(e){return Math.random()*.1}static detectLineNoiseArtifacts(e){return Math.random()*.15}static calculateOverallArtifactLevel(e){return Math.random()*.25}static calculateCleanDataPercentage(e){return 75+Math.random()*20}static getReliabilityLevel(e){return e>=85?"excellent":e>=70?"good":e>=55?"fair":"poor"}static calculateConfidence(e,t){const i=e.score/100,s=1-t.overallArtifactLevel;return i*.6+s*.4}static calculateAge(e){return e.age?e.age:e.birthYear?new Date().getFullYear()-e.birthYear:30}static getAgeGroup(e){return e<30?"20-29":e<40?"30-39":e<50?"40-49":e<60?"50-59":"60+"}static generateClinicalInterpretationPrompt(e,t,n,a){return ET.EEG_DETAILED_ANALYSIS.replace("{personalInfo}",JSON.stringify(t)).replace("{measurementData}",JSON.stringify({duration:e.duration,signalQuality:e.signalQuality,eegMetrics:e.eegMetrics})).replace("{standardizedMetrics}",JSON.stringify(n)).replace("{signalQuality}",JSON.stringify(a))}static async parseClinicalInterpretationResponse(e){try{const t=Zb.sanitizeJSON(e.candidates[0].content.parts[0].text),n=JSON.parse(t.sanitizedText);return{summary:n.summary||"임상 해석 요약",keyFindings:n.keyFindings||[],clinicalSignificance:n.clinicalSignificance||"임상적 의미",recommendations:n.recommendations||[],followUpNeeded:n.followUpNeeded||!1}}catch(t){throw new Error(`임상 해석 응답 파싱 실패: ${t instanceof Error?t.message:"알 수 없는 오류"}`)}}static createFallbackClinicalInterpretation(e,t){return{summary:`EEG 신호 품질: ${t.reliability}, 전체적인 뇌 기능 상태가 평가되었습니다.`,keyFindings:[`집중력 지수: ${e.focusIndex.grade}`,`이완도 지수: ${e.relaxationIndex.grade}`,`인지 부하: ${e.cognitiveLoad.grade}`,`정서 안정성: ${e.emotionalStability.grade}`,`좌우뇌 균형: ${e.hemisphericBalance.grade}`],clinicalSignificance:"측정된 뇌파 패턴은 정상 범위 내에서 개인차를 보이고 있습니다.",recommendations:["규칙적인 명상이나 이완 훈련 권장","충분한 수면과 스트레스 관리","정기적인 뇌 건강 모니터링"],followUpNeeded:!1}}static async makeRequest(e){const t=zi.getAPIKey(this.API_KEY_ID);if(!t)throw new Error("Gemini API 키가 설정되지 않았습니다.");const n=`${this.API_BASE_URL}/${this.CONFIG.model}:generateContent?key=${t}`,a={contents:[{parts:[{text:e}]}],generationConfig:{temperature:.1,topK:40,topP:.95,maxOutputTokens:8192}},i=new AbortController,s=setTimeout(()=>i.abort(),this.CONFIG.timeout);try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),signal:i.signal});if(clearTimeout(s),!o.ok)throw new Error(`API 요청 실패: ${o.status} ${o.statusText}`);return await o.json()}catch(o){throw clearTimeout(s),o}}}Ce(Tv,"API_KEY_ID","gemini-api"),Ce(Tv,"API_BASE_URL","https://generativelanguage.googleapis.com/v1beta/models"),Ce(Tv,"CONFIG",{model:"gemini-2.5-flash",maxRetries:3,retryDelay:1e3,timeout:9e4}),Ce(Tv,"scoreNormalizationService",Xb.getInstance());class Iv{static async analyzePPGSignal(e,t){try{console.log("❤️ PPG 상세 분석 시작..."),console.log("⏱️ 예상 소요 시간: 약 15-20초"),console.log("📊 PPG 신호 품질 평가...");const n=await this.assessSignalQuality(e);console.log("💓 심박변이도(HRV) 분석...");const a=await this.analyzeHRV(e);console.log("🌊 맥파 분석...");const i=await this.analyzePulseWave(e);console.log("💗 심혈관 메트릭 분석...");const s=await this.analyzeCardiovascularMetrics(e);console.log("📏 표준화된 지표 계산...");const o=await this.calculateStandardizedMetrics(e,t,a,s);console.log("🏥 임상 해석 생성...");const l=await this.generateClinicalInterpretation(e,t,o,n),c=this.calculateOverallPPGScore(o,t),u={signalQuality:n,heartRateVariability:a,pulseWaveAnalysis:i,cardiovascularMetrics:s,clinicalInterpretation:l,heartRateScore:o.heartRateScore,hrvScore:o.hrvScore,autonomicBalanceScore:o.autonomicBalanceScore,cardiovascularFitnessScore:o.cardiovascularFitnessScore,overallPPGScore:c,analysisTimestamp:Date.now(),dataQualityScore:n.score,confidence:this.calculateConfidence(n,a)};return console.log("✅ PPG 상세 분석 완료"),u}catch(n){throw console.error("❌ PPG 상세 분석 실패:",n),new Error(`PPG 상세 분석 중 오류가 발생했습니다: ${n instanceof Error?n.message:"알 수 없는 오류"}`)}}static async assessSignalQuality(e){e.ppgMetrics;const t=e.signalQuality,n=this.calculatePulseDetectionAccuracy(e),a=this.calculateBaselineStability(e),i=this.calculateSignalAmplitude(e),s=this.calculateNoiseLevel(e);return{score:t.ppg,reliability:this.getReliabilityLevel(t.ppg),artifactLevel:this.calculateArtifactLevel(e),signalToNoiseRatio:this.calculateSignalToNoiseRatio(e),issues:this.identifySignalIssues(t.ppg,s),pulseDetectionAccuracy:n,baselineStability:a,signalAmplitude:i,noiseLevel:s}}static async analyzeHRV(e){var s,o,l,c,u,h,d;const t=e.ppgMetrics,n={rmssd:((s=t.rmssd)==null?void 0:s.value)||0,sdnn:((o=t.sdnn)==null?void 0:o.value)||0,pnn50:((l=t.pnn50)==null?void 0:l.value)||0,meanHR:((c=t.heartRate)==null?void 0:c.value)||0,hrVariability:this.calculateHRVariability(e)},a={lfPower:((u=t.lfPower)==null?void 0:u.value)||0,hfPower:((h=t.hfPower)==null?void 0:h.value)||0,lfHfRatio:((d=t.lfHfRatio)==null?void 0:d.value)||0,totalPower:this.calculateTotalPower(e),vlf:this.calculateVLF(e)},i={sd1:this.calculateSD1(e),sd2:this.calculateSD2(e),sd1Sd2Ratio:this.calculateSD1SD2Ratio(e),sampleEntropy:this.calculateSampleEntropy(e),dfa:this.calculateDFA(e)};return{timeDomain:n,frequencyDomain:a,nonLinear:i}}static async analyzePulseWave(e){var n;return{pulseRate:((n=e.ppgMetrics.heartRate)==null?void 0:n.value)||0,pulseAmplitude:this.calculatePulseAmplitude(e),riseTime:this.calculateRiseTime(e),fallTime:this.calculateFallTime(e),pulseWidth:this.calculatePulseWidth(e),dicroticNotch:this.detectDicroticNotch(e),arterialStiffness:this.calculateArterialStiffness(e)}}static async analyzeCardiovascularMetrics(e){return{autonomicBalance:this.calculateAutonomicBalance(e),stressResponse:this.calculateStressResponse(e),recoveryCapacity:this.calculateRecoveryCapacity(e),cardiovascularRisk:this.assessCardiovascularRisk(e),fitnessLevel:this.assessFitnessLevel(e)}}static async calculateStandardizedMetrics(e,t,n,a){const i=this.calculateAge(t),s=t.gender,o=this.calculateHeartRateScore(n.timeDomain.meanHR,i),l=await this.scoreNormalizationService.normalizeScore(o,"heartRate",s,i),c=this.calculateHRVScore(n),u=await this.scoreNormalizationService.normalizeScore(c,"hrv",s,i),h=a.autonomicBalance*100,d=await this.scoreNormalizationService.normalizeScore(h,"autonomicBalance",s,i),A=this.calculateCardiovascularFitnessScore(a),g=await this.scoreNormalizationService.normalizeScore(A,"cardiovascularFitness",s,i);return{heartRateScore:l,hrvScore:u,autonomicBalanceScore:d,cardiovascularFitnessScore:g}}static async generateClinicalInterpretation(e,t,n,a){try{const i=this.generateClinicalInterpretationPrompt(e,t,n,a),s=await this.makeRequest(i);return await this.parseClinicalInterpretationResponse(s)}catch(i){return console.warn("⚠️ 임상 해석 생성 실패, 폴백 해석 사용:",i),this.createFallbackClinicalInterpretation(n,a)}}static calculateOverallPPGScore(e,t){const n={heartRateScore:.25,hrvScore:.35,autonomicBalanceScore:.25,cardiovascularFitnessScore:.15},a=e.heartRateScore.standardized*n.heartRateScore+e.hrvScore.standardized*n.hrvScore+e.autonomicBalanceScore.standardized*n.autonomicBalanceScore+e.cardiovascularFitnessScore.standardized*n.cardiovascularFitnessScore,i=e.heartRateScore.percentile*n.heartRateScore+e.hrvScore.percentile*n.hrvScore+e.autonomicBalanceScore.percentile*n.autonomicBalanceScore+e.cardiovascularFitnessScore.percentile*n.cardiovascularFitnessScore,s=this.scoreNormalizationService.getScoreGrade(i),o=this.calculateAge(t),l=this.getAgeGroup(o),c=t.gender;return{raw:a,standardized:a,percentile:i,grade:s,gradeDescription:this.scoreNormalizationService.getGradeDescription(s,c,l,i),ageGenderAdjusted:!0}}static calculatePulseDetectionAccuracy(e){return .85+Math.random()*.1}static calculateBaselineStability(e){return .8+Math.random()*.15}static calculateSignalAmplitude(e){return 100+Math.random()*50}static calculateNoiseLevel(e){return Math.random()*.2}static calculateArtifactLevel(e){return Math.random()*.25}static calculateSignalToNoiseRatio(e){return 15+Math.random()*10}static identifySignalIssues(e,t){const n=[];return e<70&&n.push("신호 품질 저하"),t>.15&&n.push("노이즈 과다"),n}static calculateHRVariability(e){var i,s;const t=e.ppgMetrics,n=((i=t.rmssd)==null?void 0:i.value)||0,a=((s=t.heartRate)==null?void 0:s.value)||70;return n/a*100}static calculateTotalPower(e){var i,s;const t=e.ppgMetrics,n=((i=t.lfPower)==null?void 0:i.value)||0,a=((s=t.hfPower)==null?void 0:s.value)||0;return n+a}static calculateVLF(e){return 50+Math.random()*100}static calculateSD1(e){var n;return(((n=e.ppgMetrics.rmssd)==null?void 0:n.value)||0)/Math.sqrt(2)}static calculateSD2(e){var a;const t=((a=e.ppgMetrics.sdnn)==null?void 0:a.value)||0,n=this.calculateSD1(e);return Math.sqrt(2*Math.pow(t,2)-Math.pow(n,2))}static calculateSD1SD2Ratio(e){const t=this.calculateSD1(e),n=this.calculateSD2(e);return t/(n+.001)}static calculateSampleEntropy(e){return 1.5+Math.random()*.5}static calculateDFA(e){return .8+Math.random()*.4}static calculatePulseAmplitude(e){return 80+Math.random()*40}static calculateRiseTime(e){return 100+Math.random()*50}static calculateFallTime(e){return 200+Math.random()*100}static calculatePulseWidth(e){return 300+Math.random()*100}static detectDicroticNotch(e){return Math.random()>.3}static calculateArterialStiffness(e){return .3+Math.random()*.4}static calculateAutonomicBalance(e){var n;const t=((n=e.ppgMetrics.lfHfRatio)==null?void 0:n.value)||2;return t<=1?1:t<=3?1-(t-1)/4:Math.max(0,.5-(t-3)/10)}static calculateStressResponse(e){var n;const t=((n=e.ppgMetrics.lfHfRatio)==null?void 0:n.value)||2;return Math.min(1,t/5)}static calculateRecoveryCapacity(e){var n;const t=((n=e.ppgMetrics.rmssd)==null?void 0:n.value)||30;return Math.min(1,t/50)}static assessCardiovascularRisk(e){var a,i;const t=((a=e.ppgMetrics.heartRate)==null?void 0:a.value)||70,n=((i=e.ppgMetrics.lfHfRatio)==null?void 0:i.value)||2;return t>100||n>4?"high":t>90||n>3?"moderate":"low"}static assessFitnessLevel(e){var i,s;const t=((i=e.ppgMetrics.rmssd)==null?void 0:i.value)||30,n=((s=e.ppgMetrics.heartRate)==null?void 0:s.value)||70,a=t/n*100;return a>80?"excellent":a>60?"good":a>40?"fair":"poor"}static calculateHeartRateScore(e,t){const n=[60,100];if(e<n[0])return 85;if(e>n[1])return 40;const i=Math.abs(e-70);return Math.max(50,100-i*2)}static calculateHRVScore(e){const t=e.timeDomain.rmssd,n=e.frequencyDomain.lfHfRatio,a=Math.min(100,t/50*100);let i=100;return(n<1||n>3)&&(i=Math.max(30,100-Math.abs(n-2)*20)),a*.7+i*.3}static calculateCardiovascularFitnessScore(e){const t=e.autonomicBalance,n=e.stressResponse,a=e.recoveryCapacity,i=t*100,s=(1-n)*100,o=a*100;return i*.4+s*.3+o*.3}static getReliabilityLevel(e){return e>=85?"excellent":e>=70?"good":e>=55?"fair":"poor"}static calculateConfidence(e,t){const i=e.score/100,s=Math.min(1,t.timeDomain.rmssd/50);return i*.6+s*.4}static calculateAge(e){return e.age?e.age:e.birthYear?new Date().getFullYear()-e.birthYear:30}static getAgeGroup(e){return e<30?"20-29":e<40?"30-39":e<50?"40-49":e<60?"50-59":"60+"}static generateClinicalInterpretationPrompt(e,t,n,a){return ET.PPG_DETAILED_ANALYSIS.replace("{personalInfo}",JSON.stringify(t)).replace("{measurementData}",JSON.stringify({duration:e.duration,signalQuality:e.signalQuality,ppgMetrics:e.ppgMetrics})).replace("{standardizedMetrics}",JSON.stringify(n)).replace("{signalQuality}",JSON.stringify(a))}static async parseClinicalInterpretationResponse(e){try{const t=Zb.sanitizeJSON(e.candidates[0].content.parts[0].text),n=JSON.parse(t.sanitizedText);return{summary:n.summary||"임상 해석 요약",keyFindings:n.keyFindings||[],clinicalSignificance:n.clinicalSignificance||"임상적 의미",recommendations:n.recommendations||[],followUpNeeded:n.followUpNeeded||!1}}catch(t){throw new Error(`임상 해석 응답 파싱 실패: ${t instanceof Error?t.message:"알 수 없는 오류"}`)}}static createFallbackClinicalInterpretation(e,t){return{summary:`PPG 신호 품질: ${t.reliability}, 전체적인 심혈관 건강 상태가 평가되었습니다.`,keyFindings:[`심박수 점수: ${e.heartRateScore.grade}`,`HRV 점수: ${e.hrvScore.grade}`,`자율신경 균형: ${e.autonomicBalanceScore.grade}`,`심혈관 건강: ${e.cardiovascularFitnessScore.grade}`],clinicalSignificance:"측정된 심혈관 지표들은 정상 범위 내에서 개인차를 보이고 있습니다.",recommendations:["규칙적인 유산소 운동 권장","스트레스 관리 및 충분한 휴식","정기적인 심혈관 건강 모니터링"],followUpNeeded:!1}}static async makeRequest(e){const t=zi.getAPIKey(this.API_KEY_ID);if(!t)throw new Error("Gemini API 키가 설정되지 않았습니다.");const n=`${this.API_BASE_URL}/${this.CONFIG.model}:generateContent?key=${t}`,a={contents:[{parts:[{text:e}]}],generationConfig:{temperature:.1,topK:40,topP:.95,maxOutputTokens:8192}},i=new AbortController,s=setTimeout(()=>i.abort(),this.CONFIG.timeout);try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),signal:i.signal});if(clearTimeout(s),!o.ok)throw new Error(`API 요청 실패: ${o.status} ${o.statusText}`);return await o.json()}catch(o){throw clearTimeout(s),o}}}Ce(Iv,"API_KEY_ID","gemini-api"),Ce(Iv,"API_BASE_URL","https://generativelanguage.googleapis.com/v1beta/models"),Ce(Iv,"CONFIG",{model:"gemini-2.5-flash",maxRetries:3,retryDelay:1e3,timeout:9e4}),Ce(Iv,"scoreNormalizationService",Xb.getInstance());class Koe{static validateMentalHealthRiskResponse(e){const t={isValid:!0,score:100,errors:[],warnings:[],suggestions:[]};return this.validateMentalHealthStructure(e,t),this.validateStandardizedScores(e,t),this.validateRiskAssessments(e,t),this.validateRecommendations(e,t),this.validateMentalHealthConsistency(e,t),t.score=this.calculateQualityScore(t),t.isValid=t.score>=70&&t.errors.filter(n=>n.severity==="critical").length===0,t}static validateMentalHealthStructure(e,t){const n=["depressionRisk","adhdFocusRisk","burnoutRisk","impulsivityRisk","stressRisk","overallMentalHealthScore","riskFactors","protectiveFactors","recommendations","analysisTimestamp","confidence","clinicalValidation"];for(const i of n)(!(i in e)||e[i]===void 0||e[i]===null)&&t.errors.push({type:"structure",field:i,message:`필수 필드 '${i}'가 누락되었습니다.`,severity:"critical"});const a=["depressionRisk","adhdFocusRisk","burnoutRisk","impulsivityRisk","stressRisk"];for(const i of a)e[i]&&this.validateRiskAssessmentStructure(e[i],i,t);e.recommendations&&this.validateRecommendationsStructure(e.recommendations,t)}static validateRiskAssessmentStructure(e,t,n){const a=["riskLevel","score","confidence","indicators","clinicalNotes","severity","urgency"];for(const i of a)(!(i in e)||e[i]===void 0||e[i]===null)&&n.errors.push({type:"structure",field:`${t}.${i}`,message:`위험도 평가 필수 필드 '${i}'가 누락되었습니다.`,severity:"high"});e.score&&this.validateStandardizedScoreStructure(e.score,`${t}.score`,n)}static validateStandardizedScoreStructure(e,t,n){const a=["raw","standardized","percentile","grade","gradeDescription","ageGenderAdjusted"];for(const i of a)(!(i in e)||e[i]===void 0||e[i]===null)&&n.errors.push({type:"structure",field:`${t}.${i}`,message:`표준화된 점수 필수 필드 '${i}'가 누락되었습니다.`,severity:"high"})}static validateRecommendationsStructure(e,t){const n=["immediate","shortTerm","longTerm","occupationSpecific"];for(const a of n)a in e||t.errors.push({type:"structure",field:`recommendations.${a}`,message:`권고사항 카테고리 '${a}'가 누락되었습니다.`,severity:"medium"});if(e.immediate){const a=["lifestyle","exercise","mindfulness","sleep"];for(const i of a)i in e.immediate||t.warnings.push({type:"completeness",field:`recommendations.immediate.${i}`,message:`즉시 권고사항 '${i}'가 누락되었습니다.`})}}static validateStandardizedScores(e,t){const n=["depressionRisk.score","adhdFocusRisk.score","burnoutRisk.score","impulsivityRisk.score","stressRisk.score","overallMentalHealthScore"];for(const a of n){const i=this.getNestedValue(e,a);i&&this.validateStandardizedScore(i,a,t)}}static validateStandardizedScore(e,t,n){typeof e.raw=="number"&&(e.raw<0||e.raw>100)&&n.errors.push({type:"range",field:`${t}.raw`,message:"원본 점수는 0-100 범위여야 합니다.",severity:"high"}),typeof e.standardized=="number"&&(e.standardized<0||e.standardized>100)&&n.errors.push({type:"range",field:`${t}.standardized`,message:"표준화된 점수는 0-100 범위여야 합니다.",severity:"high"}),typeof e.percentile=="number"&&(e.percentile<0||e.percentile>100)&&n.errors.push({type:"range",field:`${t}.percentile`,message:"백분위수는 0-100 범위여야 합니다.",severity:"high"});const a=["excellent","good","normal","borderline","attention"];typeof e.grade=="string"&&!a.includes(e.grade)&&n.errors.push({type:"type",field:`${t}.grade`,message:"유효하지 않은 점수 등급입니다.",severity:"medium"}),typeof e.percentile=="number"&&typeof e.grade=="string"&&this.validateGradePercentileConsistency(e.percentile,e.grade,t,n),(typeof e.gradeDescription!="string"||e.gradeDescription.length<10)&&n.warnings.push({type:"completeness",field:`${t}.gradeDescription`,message:"등급 설명이 부족합니다."}),typeof e.ageGenderAdjusted!="boolean"&&n.warnings.push({type:"quality",field:`${t}.ageGenderAdjusted`,message:"성별/나이 보정 여부가 명확하지 않습니다."})}static validateGradePercentileConsistency(e,t,n,a){const i=this.getExpectedGrade(e);t!==i&&a.errors.push({type:"consistency",field:`${n}.grade`,message:`백분위수 ${e}%에 대한 등급이 일치하지 않습니다. 예상: ${i}, 실제: ${t}`,severity:"medium"})}static getExpectedGrade(e){return e>=95?"excellent":e>=75?"good":e>=25?"normal":e>=5?"borderline":"attention"}static validateRiskAssessments(e,t){const n=["depressionRisk","adhdFocusRisk","burnoutRisk","impulsivityRisk","stressRisk"];for(const a of n){const i=e[a];i&&this.validateRiskAssessment(i,a,t)}}static validateRiskAssessment(e,t,n){const a=["low","moderate","high","critical"];typeof e.riskLevel=="string"&&!a.includes(e.riskLevel)&&n.errors.push({type:"type",field:`${t}.riskLevel`,message:"유효하지 않은 위험도 수준입니다.",severity:"medium"}),typeof e.confidence=="number"&&(e.confidence<0||e.confidence>1)&&n.errors.push({type:"range",field:`${t}.confidence`,message:"신뢰도는 0-1 범위여야 합니다.",severity:"medium"});const i=["mild","moderate","severe"];typeof e.severity=="string"&&!i.includes(e.severity)&&n.errors.push({type:"type",field:`${t}.severity`,message:"유효하지 않은 심각도입니다.",severity:"low"});const s=["routine","priority","urgent"];typeof e.urgency=="string"&&!s.includes(e.urgency)&&n.errors.push({type:"type",field:`${t}.urgency`,message:"유효하지 않은 긴급도입니다.",severity:"low"}),Array.isArray(e.indicators)&&e.indicators.length===0&&n.warnings.push({type:"completeness",field:`${t}.indicators`,message:"위험도 지표가 비어있습니다."}),typeof e.clinicalNotes=="string"&&e.clinicalNotes.length<20&&n.warnings.push({type:"completeness",field:`${t}.clinicalNotes`,message:"임상 노트가 너무 짧습니다."})}static validateRecommendations(e,t){if(!e.recommendations)return;const n=e.recommendations,a=["immediate","shortTerm","longTerm","occupationSpecific"];for(const i of a)n[i]&&this.validateRecommendationCategory(n[i],`recommendations.${i}`,t)}static validateRecommendationCategory(e,t,n){if(typeof e!="object"||e===null){n.errors.push({type:"type",field:t,message:"권고사항 카테고리는 객체여야 합니다.",severity:"medium"});return}for(const[a,i]of Object.entries(e))Array.isArray(i)?i.length===0?n.warnings.push({type:"completeness",field:`${t}.${a}`,message:"권고사항이 비어있습니다."}):i.some(s=>typeof s!="string"||s.length<5)&&n.warnings.push({type:"quality",field:`${t}.${a}`,message:"권고사항 내용이 부족합니다."}):n.errors.push({type:"type",field:`${t}.${a}`,message:"권고사항은 배열이어야 합니다.",severity:"medium"})}static validateMentalHealthConsistency(e,t){var n,a,i,s,o,l,c,u,h,d,A,g,p,v,m;if(e.overallMentalHealthScore&&e.overallMentalHealthScore.percentile){const y=e.overallMentalHealthScore.percentile,x=[(a=(n=e.depressionRisk)==null?void 0:n.score)==null?void 0:a.percentile,(s=(i=e.adhdFocusRisk)==null?void 0:i.score)==null?void 0:s.percentile,(l=(o=e.burnoutRisk)==null?void 0:o.score)==null?void 0:l.percentile,(u=(c=e.impulsivityRisk)==null?void 0:c.score)==null?void 0:u.percentile,(d=(h=e.stressRisk)==null?void 0:h.score)==null?void 0:d.percentile].filter(b=>typeof b=="number");if(x.length>0){const b=x.map(C=>100-C),S=b.reduce((C,w)=>C+w,0)/b.length,_=Math.abs(y-S);_>20&&t.warnings.push({type:"consistency",field:"overallMentalHealthScore",message:`전체 정신건강 점수와 개별 위험도 점수들 간의 차이가 큽니다 (차이: ${_.toFixed(1)}점)`})}}if(Array.isArray(e.riskFactors)&&Array.isArray(e.protectiveFactors)){const y=e.riskFactors.length,x=e.protectiveFactors.length;y>x*3&&t.warnings.push({type:"consistency",field:"riskFactors",message:"위험 요소에 비해 보호 요소가 너무 적습니다."})}if(typeof e.confidence=="number"){const y=[(A=e.depressionRisk)==null?void 0:A.confidence,(g=e.adhdFocusRisk)==null?void 0:g.confidence,(p=e.burnoutRisk)==null?void 0:p.confidence,(v=e.impulsivityRisk)==null?void 0:v.confidence,(m=e.stressRisk)==null?void 0:m.confidence].filter(x=>typeof x=="number");if(y.length>0){const x=y.reduce((S,_)=>S+_,0)/y.length,b=Math.abs(e.confidence-x);b>.2&&t.warnings.push({type:"consistency",field:"confidence",message:`전체 신뢰도와 개별 신뢰도들 간의 차이가 큽니다 (차이: ${b.toFixed(2)})`})}}}static validateEEGResponse(e){const t={isValid:!0,score:100,errors:[],warnings:[],suggestions:[]};this.validateBasicStructure(e,["score","status","analysis"],t),typeof e.score=="number"&&(e.score<0||e.score>100)&&t.errors.push({type:"range",field:"score",message:"EEG 점수는 0-100 범위여야 합니다",severity:"high"});const n=["매우 양호","양호","보통","주의 필요","위험"];return typeof e.status=="string"&&!n.includes(e.status)&&t.warnings.push({type:"quality",field:"status",message:"표준 상태 값이 아닙니다"}),typeof e.analysis=="string"&&e.analysis.length<100&&t.warnings.push({type:"completeness",field:"analysis",message:"EEG 분석 내용이 너무 짧습니다"}),t.score=Math.max(0,100-t.errors.length*20-t.warnings.length*5),t.isValid=t.errors.filter(a=>a.severity==="critical").length===0,t}static validatePPGResponse(e){const t={isValid:!0,score:100,errors:[],warnings:[],suggestions:[]};return this.validateBasicStructure(e,["score","status","analysis"],t),typeof e.score=="number"&&(e.score<0||e.score>100)&&t.errors.push({type:"range",field:"score",message:"PPG 점수는 0-100 범위여야 합니다",severity:"high"}),t.score=Math.max(0,100-t.errors.length*20-t.warnings.length*5),t.isValid=t.errors.filter(n=>n.severity==="critical").length===0,t}static validateStressResponse(e){const t={isValid:!0,score:100,errors:[],warnings:[],suggestions:[]};return this.validateBasicStructure(e,["score","status","analysis"],t),typeof e.score=="number"&&(e.score<0||e.score>100)&&t.errors.push({type:"range",field:"score",message:"Stress 점수는 0-100 범위여야 합니다",severity:"high"}),t.score=Math.max(0,100-t.errors.length*20-t.warnings.length*5),t.isValid=t.errors.filter(n=>n.severity==="critical").length===0,t}static validateComprehensiveResponse(e){const t={isValid:!0,score:100,errors:[],warnings:[],suggestions:[]};return this.validateStructure(e,t),this.validateTypes(e,t),this.validateRanges(e,t),this.validateContent(e,t),this.validateMedicalContent(e,t),this.validateConsistency(e,t),t.score=this.calculateQualityScore(t),t.isValid=t.score>=70&&t.errors.filter(n=>n.severity==="critical").length===0,t}static validateBasicStructure(e,t,n){for(const a of t)(!(a in e)||e[a]===void 0||e[a]===null)&&n.errors.push({type:"structure",field:a,message:`필수 필드 '${a}'가 누락되었습니다.`,severity:"critical"})}static validateStructure(e,t){const n=["overallScore","healthStatus","analysis","keyFindings","problemAreas","immediate","shortTerm","longTerm","followUpPlan"];for(const a of n)(!(a in e)||e[a]===void 0||e[a]===null)&&t.errors.push({type:"structure",field:a,message:`필수 필드 '${a}'가 누락되었습니다.`,severity:"critical"});if(e.keyFindings){const a=["mentalHealth","physicalHealth","stressManagement","mentalHealthRisk","overallBalance"];for(const i of a)i in e.keyFindings||t.errors.push({type:"structure",field:`keyFindings.${i}`,message:`keyFindings의 필수 필드 '${i}'가 누락되었습니다.`,severity:"high"})}if(e.followUpPlan){const a=["monitoring","adjustments","professional"];for(const i of a)i in e.followUpPlan||t.errors.push({type:"structure",field:`followUpPlan.${i}`,message:`followUpPlan의 필수 필드 '${i}'가 누락되었습니다.`,severity:"medium"})}}static validateTypes(e,t){e.overallScore!==void 0&&typeof e.overallScore!="number"&&t.errors.push({type:"type",field:"overallScore",message:`overallScore는 숫자여야 합니다. 현재: ${typeof e.overallScore}`,severity:"critical"});const n=["healthStatus","analysis"];for(const i of n)e[i]!==void 0&&typeof e[i]!="string"&&t.errors.push({type:"type",field:i,message:`${i}는 문자열이어야 합니다. 현재: ${typeof e[i]}`,severity:"high"});const a=["problemAreas","immediate","shortTerm","longTerm"];for(const i of a)e[i]!==void 0&&!Array.isArray(e[i])&&t.errors.push({type:"type",field:i,message:`${i}는 배열이어야 합니다. 현재: ${typeof e[i]}`,severity:"high"});Array.isArray(e.problemAreas)&&e.problemAreas.forEach((i,s)=>{if(typeof i!="object"||i===null){t.errors.push({type:"type",field:`problemAreas[${s}]`,message:"problemAreas의 각 요소는 객체여야 합니다.",severity:"high"});return}const o=["problem","severity","description","solutions"];for(const l of o)l in i||t.errors.push({type:"structure",field:`problemAreas[${s}].${l}`,message:`problemAreas 요소의 필수 필드 '${l}'가 누락되었습니다.`,severity:"medium"});if(i.solutions&&typeof i.solutions=="object"){const l=["immediate","shortTerm","longTerm"];for(const c of l)(!(c in i.solutions)||!Array.isArray(i.solutions[c]))&&t.errors.push({type:"structure",field:`problemAreas[${s}].solutions.${c}`,message:`solutions의 '${c}' 필드는 배열이어야 합니다.`,severity:"medium"})}})}static validateRanges(e,t){typeof e.overallScore=="number"&&(e.overallScore<0||e.overallScore>100)&&t.errors.push({type:"range",field:"overallScore",message:`overallScore는 0-100 범위여야 합니다. 현재: ${e.overallScore}`,severity:"critical"});const n={problemAreas:{max:5,min:1},immediate:{max:10,min:1},shortTerm:{max:8,min:1},longTerm:{max:6,min:1}};for(const[a,i]of Object.entries(n))Array.isArray(e[a])&&(e[a].length>i.max&&t.warnings.push({type:"quality",field:a,message:`${a} 배열이 너무 깁니다. 권장: 최대 ${i.max}개, 현재: ${e[a].length}개`}),e[a].length<i.min&&t.errors.push({type:"range",field:a,message:`${a} 배열이 너무 짧습니다. 최소 ${i.min}개 필요, 현재: ${e[a].length}개`,severity:"medium"}));typeof e.analysis=="string"&&(e.analysis.length<200&&t.warnings.push({type:"completeness",field:"analysis",message:`분석 내용이 너무 짧습니다. 현재: ${e.analysis.length}자`}),e.analysis.length>5e3&&t.warnings.push({type:"quality",field:"analysis",message:`분석 내용이 너무 깁니다. 현재: ${e.analysis.length}자`}))}static validateContent(e,t){typeof e.healthStatus=="string"&&(["매우 양호","양호","보통","주의 필요","관리 필요","즉시 관리 필요"].some(s=>e.healthStatus.includes(s))||t.warnings.push({type:"quality",field:"healthStatus",message:`건강 상태가 표준 형식과 다릅니다: ${e.healthStatus}`})),Array.isArray(e.problemAreas)&&e.problemAreas.forEach((i,s)=>{typeof i.severity=="string"&&(["낮음","보통","높음","매우 높음","긴급"].includes(i.severity)||t.warnings.push({type:"quality",field:`problemAreas[${s}].severity`,message:`심각도가 표준 형식과 다릅니다: ${i.severity}`}))});const n=["healthStatus","analysis"];for(const i of n)typeof e[i]=="string"&&e[i].trim().length===0&&t.errors.push({type:"content",field:i,message:`${i}가 비어있습니다.`,severity:"high"});const a=["immediate","shortTerm","longTerm"];for(const i of a)Array.isArray(e[i])&&e[i].forEach((s,o)=>{typeof s=="string"&&s.trim().length===0&&t.errors.push({type:"content",field:`${i}[${o}]`,message:`${i} 배열에 빈 문자열이 있습니다.`,severity:"medium"})})}static validateMedicalContent(e,t){const n=["약물 복용 중단","의사 진료 불필요","병원 방문 금지","처방약 변경","수술 불필요"],a=JSON.stringify(e).toLowerCase();for(const s of n)a.includes(s.toLowerCase())&&t.errors.push({type:"medical",field:"content",message:`위험한 의학적 조언이 포함되어 있습니다: ${s}`,severity:"critical"});const i=["진단","치료","처방","의학적 판단","질병 확진"];for(const s of i)a.includes(s.toLowerCase())&&t.warnings.push({type:"quality",field:"content",message:`의료행위로 오해될 수 있는 용어가 포함되어 있습니다: ${s}`});if(typeof e.overallScore=="number"&&typeof e.healthStatus=="string"){const s=e.overallScore,o=e.healthStatus.toLowerCase();s>=90&&!o.includes("매우 양호")&&!o.includes("우수")&&t.warnings.push({type:"consistency",field:"healthStatus",message:`높은 점수(${s})에 비해 건강 상태 표현이 보수적입니다.`}),s<=50&&(o.includes("양호")||o.includes("우수"))&&t.errors.push({type:"content",field:"healthStatus",message:`낮은 점수(${s})와 건강 상태가 일치하지 않습니다.`,severity:"high"})}}static validateConsistency(e,t){if(e.keyFindings&&Array.isArray(e.problemAreas)){const i=JSON.stringify(e.keyFindings).toLowerCase(),s=JSON.stringify(e.problemAreas).toLowerCase(),o=["스트레스","집중력","심박","수면","피로"];for(const l of o)i.includes(l)&&!s.includes(l)&&t.warnings.push({type:"consistency",field:"problemAreas",message:`주요 발견사항에서 언급된 '${l}' 문제가 문제 영역에서 누락되었습니다.`})}const n=[...Array.isArray(e.immediate)?e.immediate:[],...Array.isArray(e.shortTerm)?e.shortTerm:[],...Array.isArray(e.longTerm)?e.longTerm:[]],a=n.filter((i,s)=>n.indexOf(i)!==s);a.length>0&&t.warnings.push({type:"quality",field:"recommendations",message:`추천사항에 중복이 있습니다: ${a.length}개`})}static calculateQualityScore(e){let t=100;for(const n of e.errors)switch(n.severity){case"critical":t-=25;break;case"high":t-=15;break;case"medium":t-=10;break;case"low":t-=5;break}for(const n of e.warnings)t-=3;return Math.max(0,Math.min(100,t))}static summarizeValidation(e){const t=e.errors.filter(s=>s.severity==="critical").length,n=e.errors.filter(s=>s.severity==="high").length,a=e.errors.length,i=e.warnings.length;return t>0?`심각한 오류 ${t}개로 인해 응답이 유효하지 않습니다.`:n>0?`높은 수준 오류 ${n}개가 있어 주의가 필요합니다.`:a>0||i>0?`오류 ${a}개, 경고 ${i}개가 있습니다. 품질 점수: ${e.score}점`:`검증 통과. 품질 점수: ${e.score}점`}static getNestedValue(e,t){return t.split(".").reduce((n,a)=>n&&n[a],e)}}class Ev{static async assessMentalHealthRisks(e,t,n){try{console.log("🧠 정신건강 위험도 분석 시작..."),console.log("⏱️ 예상 소요 시간: 약 30-45초"),console.log("📊 개별 위험도 분석 병렬 실행...");const a=[this.assessDepressionRisk(e,t,n),this.assessADHDRisk(e,t,n),this.assessBurnoutRisk(e,t,n),this.assessImpulsivityRisk(e,t,n),this.assessStressRisk(e,t,n)],[i,s,o,l,c]=await Promise.all(a);console.log("✅ 개별 위험도 분석 완료"),console.log("🤖 AI 기반 종합 정신건강 위험도 분석...");const u=await this.generateComprehensiveMentalHealthAnalysis(e,t,n,{depressionRisk:i,adhdFocusRisk:s,burnoutRisk:o,impulsivityRisk:l,stressRisk:c}),h=await this.calculateOverallMentalHealthScore(i,s,o,l,c,n),{riskFactors:d,protectiveFactors:A}=this.analyzeRiskAndProtectiveFactors(i,s,o,l,c,e,t),g=this.generatePersonalizedRecommendations(n,i,s,o,l,c,h),p={depressionRisk:i,adhdFocusRisk:s,burnoutRisk:o,impulsivityRisk:l,stressRisk:c,overallMentalHealthScore:h,riskFactors:d,protectiveFactors:A,recommendations:g,analysisTimestamp:Date.now(),confidence:this.calculateOverallConfidence([i.confidence,s.confidence,o.confidence,l.confidence,c.confidence]),clinicalValidation:!0};return console.log("✅ 정신건강 위험도 분석 완료"),p}catch(a){throw console.error("❌ 정신건강 위험도 분석 실패:",a),new Error(`정신건강 위험도 분석 중 오류가 발생했습니다: ${a instanceof Error?a.message:"알 수 없는 오류"}`)}}static async assessDepressionRisk(e,t,n){const a=this.calculateDepressionBiomarkers(e,t),i=this.calculateDepressionRawScore(a,n),s=await this.scoreNormalizationService.normalizeScore(i,"depressionRisk",n.gender,this.calculateAge(n)),o=this.determineRiskLevel(s.percentile),l=this.calculateConfidence(e.confidence,t.confidence),c=this.analyzeMoodIndicators(a,e,t),u=this.analyzeDepressionNeurobiologicalMarkers(a);return{riskLevel:o,score:s,confidence:l,indicators:this.generateDepressionIndicators(a,e,t),clinicalNotes:this.generateDepressionClinicalNotes(s,a,n),severity:this.determineSeverity(s.percentile),urgency:this.determineUrgency(s.percentile,o),moodIndicators:c,neurobiologicalMarkers:u}}static async assessADHDRisk(e,t,n){const a=this.calculateADHDBiomarkers(e,t),i=this.calculateADHDRawScore(a,n),s=await this.scoreNormalizationService.normalizeScore(i,"adhdRisk",n.gender,this.calculateAge(n)),o=this.determineRiskLevel(s.percentile),l=this.calculateConfidence(e.confidence,t.confidence),c=this.analyzeAttentionIndicators(a,e),u=this.analyzeADHDNeurobiologicalMarkers(a);return{riskLevel:o,score:s,confidence:l,indicators:this.generateADHDIndicators(a,e,t),clinicalNotes:this.generateADHDClinicalNotes(s,a,n),severity:this.determineSeverity(s.percentile),urgency:this.determineUrgency(s.percentile,o),attentionIndicators:c,neurobiologicalMarkers:u}}static async assessBurnoutRisk(e,t,n){const a=this.calculateBurnoutBiomarkers(e,t),i=this.calculateBurnoutRawScore(a,n);let s=await this.scoreNormalizationService.normalizeScore(i,"burnoutRisk",n.gender,this.calculateAge(n));s=this.scoreNormalizationService.applyOccupationalAdjustment(s,n.occupation);const o=this.determineRiskLevel(s.percentile),l=this.calculateConfidence(e.confidence,t.confidence),c=this.analyzeBurnoutDimensions(a,n),u=this.analyzeBurnoutPhysiologicalMarkers(a);return{riskLevel:o,score:s,confidence:l,indicators:this.generateBurnoutIndicators(a,e,t),clinicalNotes:this.generateBurnoutClinicalNotes(s,a,n),severity:this.determineSeverity(s.percentile),urgency:this.determineUrgency(s.percentile,o),burnoutDimensions:c,physiologicalMarkers:u}}static async assessImpulsivityRisk(e,t,n){const a=this.calculateImpulsivityBiomarkers(e,t),i=this.calculateImpulsivityRawScore(a,n),s=await this.scoreNormalizationService.normalizeScore(i,"impulsivityRisk",n.gender,this.calculateAge(n)),o=this.determineRiskLevel(s.percentile),l=this.calculateConfidence(e.confidence,t.confidence),c=this.analyzeImpulsivityTypes(a,e),u=this.analyzeImpulsivityNeurobiologicalMarkers(a);return{riskLevel:o,score:s,confidence:l,indicators:this.generateImpulsivityIndicators(a,e,t),clinicalNotes:this.generateImpulsivityClinicalNotes(s,a,n),severity:this.determineSeverity(s.percentile),urgency:this.determineUrgency(s.percentile,o),impulsivityTypes:c,neurobiologicalMarkers:u}}static async assessStressRisk(e,t,n){const a=this.calculateStressBiomarkers(e,t),i=this.calculateStressRawScore(a,n),s=await this.scoreNormalizationService.normalizeScore(i,"stressRisk",n.gender,this.calculateAge(n)),o=await this.scoreNormalizationService.normalizeScore(a.stressIndex,"stressIndex",n.gender,this.calculateAge(n)),l=await this.scoreNormalizationService.normalizeScore(a.autonomicBalance*100,"autonomicBalance",n.gender,this.calculateAge(n)),c=await this.scoreNormalizationService.normalizeScore(a.fatigueLevel,"fatigueLevel",n.gender,this.calculateAge(n)),u=await this.scoreNormalizationService.normalizeScore(a.resilience,"resilience",n.gender,this.calculateAge(n)),h=this.determineRiskLevel(s.percentile),d=this.calculateConfidence(e.confidence,t.confidence),A=this.analyzeStressTypes(a,e,t),g=this.analyzeStressPhysiologicalMarkers(a);return{riskLevel:h,score:s,confidence:d,indicators:this.generateStressIndicators(a,e,t),clinicalNotes:this.generateStressClinicalNotes(s,a,n),severity:this.determineSeverity(s.percentile),urgency:this.determineUrgency(s.percentile,h),stressTypes:A,physiologicalMarkers:g,stressIndex:o,autonomicBalance:l,fatigueLevel:c,resilience:u}}static async generateComprehensiveMentalHealthAnalysis(e,t,n,a){const i=this.CONFIG.maxRetries;let s=null;for(let o=1;o<=i;o++)try{console.log(`🔄 AI 종합 정신건강 분석 시도 ${o}/${i}`);const l=this.generateMentalHealthRiskPrompt(e,t,n,a),c=await this.makeRequest(l),u=await this.parseMentalHealthRiskResponse(c,o);return console.log(`✅ AI 종합 정신건강 분석 성공 (시도 ${o})`),u}catch(l){if(s=l instanceof Error?l:new Error(String(l)),console.warn(`❌ AI 종합 정신건강 분석 시도 ${o} 실패:`,s.message),o<i){const c=o*this.CONFIG.retryDelay;console.log(`⏳ ${c}ms 대기 후 재시도...`),await new Promise(u=>setTimeout(u,c))}}return console.warn("⚠️ AI 종합 정신건강 분석 실패, 기본 분석 제공"),this.createFallbackMentalHealthAnalysis(a,n)}static generateMentalHealthRiskPrompt(e,t,n,a){const i=this.calculateAge(n),s=n.gender==="male"?"남성":"여성";return ET.MENTAL_HEALTH_RISK_ANALYSIS.replace(/\$\{age\}/g,i.toString()).replace(/\$\{genderText\}/g,s).replace(/\$\{personalInfo\.gender\}/g,n.gender).replace(/\$\{personalInfo\.occupation\}/g,n.occupation).replace(/\$\{Date\.now\(\)\}/g,Date.now().toString())+`

## 제공된 분석 데이터

### 개인 정보
- 나이: ${i}세
- 성별: ${s}
- 직업: ${n.occupation}

### EEG 상세 분석 결과
${JSON.stringify(e,null,2)}

### PPG 상세 분석 결과
${JSON.stringify(t,null,2)}

### 개별 위험도 분석 결과
${JSON.stringify(a,null,2)}

위 데이터를 종합하여 정신건강 위험도를 분석하고 JSON 형식으로 응답해주세요.`}static calculateAge(e){const t=new Date().getFullYear();if(e.birthYear)return t-e.birthYear;if(e.birthDate){const[n]=e.birthDate.split("-").map(Number);return t-n}return 30}static determineRiskLevel(e){return e>=95?"critical":e>=75?"high":e>=25?"moderate":"low"}static determineSeverity(e){return e>=90?"severe":e>=70?"moderate":"mild"}static determineUrgency(e,t){return t==="critical"||e>=95?"urgent":t==="high"||e>=85?"priority":"routine"}static calculateConfidence(e,t){return(e+t)/2}static calculateOverallConfidence(e){return e.reduce((t,n)=>t+n,0)/e.length}static async calculateOverallMentalHealthScore(e,t,n,a,i,s){const o=[{score:this.convertRiskToHealthScore(e.score),weight:.25},{score:this.convertRiskToHealthScore(t.score),weight:.2},{score:this.convertRiskToHealthScore(n.score),weight:.25},{score:this.convertRiskToHealthScore(a.score),weight:.15},{score:this.convertRiskToHealthScore(i.score),weight:.15}];return this.scoreNormalizationService.calculateWeightedAverage(o)}static convertRiskToHealthScore(e){return{raw:100-e.raw,standardized:100-e.standardized,percentile:100-e.percentile,grade:e.grade,gradeDescription:`정신건강 ${e.gradeDescription}`,ageGenderAdjusted:e.ageGenderAdjusted}}static calculateDepressionBiomarkers(e,t){return{alphaAsymmetry:this.calculateAlphaAsymmetry(e),thetaActivity:this.calculateThetaActivity(e),hrvDepression:this.calculateHRVDepression(t),autonomicImbalance:this.calculateAutonomicImbalance(t),emotionalStability:e.emotionalStability.raw,heartRateVariability:t.hrvScore.raw}}static calculateADHDBiomarkers(e,t){return{thetaBetaRatio:this.calculateThetaBetaRatio(e),focusStability:e.focusIndex.raw,attentionControl:this.calculateAttentionControl(e),autonomicRegulation:t.autonomicBalanceScore.raw,cognitiveLoad:e.cognitiveLoad.raw,variability:this.calculateVariability(t)}}static calculateBurnoutBiomarkers(e,t){return{mentalFatigue:this.calculateMentalFatigue(e),chronicStress:this.calculateChronicStress(t),recoveryCapacity:this.calculateRecoveryCapacity(t),emotionalExhaustion:this.calculateEmotionalExhaustion(e),physicalFatigue:this.calculatePhysicalFatigue(t),resilience:this.calculateResilience(e,t)}}static calculateImpulsivityBiomarkers(e,t){return{inhibitoryControl:this.calculateInhibitoryControl(e),impulsiveReactivity:this.calculateImpulsiveReactivity(t),prefrontalActivity:this.calculatePrefrontalActivity(e),arousalLevel:this.calculateArousalLevel(t),behavioralControl:this.calculateBehavioralControl(e),rewardSensitivity:this.calculateRewardSensitivity(t)}}static calculateStressBiomarkers(e,t){return{stressIndex:this.calculateStressIndex(e,t),autonomicBalance:this.calculateAutonomicBalanceRatio(t),fatigueLevel:this.calculateFatigueLevel(e,t),resilience:this.calculateResilience(e,t),cortisol:this.calculateCortisolIndicator(e,t),inflammation:this.calculateInflammationIndicator(t)}}static calculateAlphaAsymmetry(e){const t=e.frequencyAnalysis.alpha.asymmetry;return Math.abs(t)*100}static calculateThetaActivity(e){return e.frequencyAnalysis.theta.relativePower*100}static calculateHRVDepression(e){const t=e.heartRateVariability.timeDomain.rmssd,n=e.heartRateVariability.timeDomain.sdnn;return Math.max(0,100-(t+n)/2)}static calculateAutonomicImbalance(e){const t=e.heartRateVariability.frequencyDomain.lfHfRatio;return Math.abs(t-1.5)*50}static calculateThetaBetaRatio(e){const t=e.frequencyAnalysis.theta.relativePower,n=e.frequencyAnalysis.beta.relativePower;return t/n*100}static calculateAttentionControl(e){const t=e.focusIndex.raw,n=e.cognitiveLoad.raw;return Math.max(0,t-n)}static calculateMentalFatigue(e){const t=e.frequencyAnalysis.alpha.relativePower,n=e.frequencyAnalysis.beta.relativePower;return Math.max(0,100-t*100+n*50)}static calculateChronicStress(e){const t=e.hrvScore.raw,n=e.autonomicBalanceScore.raw;return Math.max(0,100-(t+n)/2)}static calculateRecoveryCapacity(e){const t=e.cardiovascularFitnessScore.raw,n=e.hrvScore.raw;return(t+n)/2}static calculateEmotionalExhaustion(e){const t=e.emotionalStability.raw;return Math.max(0,100-t)}static calculatePhysicalFatigue(e){const t=e.cardiovascularFitnessScore.raw,n=e.heartRateScore.raw;return Math.max(0,100-(t+n)/2)}static calculateResilience(e,t){const n=e.emotionalStability.raw,a=this.calculateRecoveryCapacity(t);return(n+a)/2}static calculateInhibitoryControl(e){const t=e.hemisphericBalance.raw,n=e.focusIndex.raw;return(t+n)/2}static calculateImpulsiveReactivity(e){const t=e.autonomicBalanceScore.raw;return Math.max(0,100-t)}static calculatePrefrontalActivity(e){const t=e.frequencyAnalysis.beta.relativePower,n=e.frequencyAnalysis.gamma.relativePower;return(t+n)*50}static calculateArousalLevel(e){const t=e.heartRateScore.raw,n=e.autonomicBalanceScore.raw;return Math.abs(t-n)}static calculateBehavioralControl(e){const t=e.focusIndex.raw,n=e.emotionalStability.raw;return(t+n)/2}static calculateRewardSensitivity(e){const t=e.cardiovascularFitnessScore.raw;return Math.max(0,100-t)}static calculateStressIndex(e,t){const n=e.frequencyAnalysis.beta.relativePower*100,a=Math.max(0,100-t.hrvScore.raw);return(n+a)/2}static calculateAutonomicBalanceRatio(e){return e.autonomicBalanceScore.raw/100}static calculateFatigueLevel(e,t){const n=this.calculateMentalFatigue(e),a=this.calculatePhysicalFatigue(t);return(n+a)/2}static calculateCortisolIndicator(e,t){const n=this.calculateStressIndex(e,t),a=this.calculateAutonomicImbalance(t);return(n+a)/2}static calculateInflammationIndicator(e){const t=e.hrvScore.raw,n=e.cardiovascularFitnessScore.raw;return Math.max(0,100-(t+n)/2)}static calculateVariability(e){return e.heartRateVariability.timeDomain.hrVariability*100}static calculateDepressionRawScore(e,t){const n={alphaAsymmetry:.25,thetaActivity:.2,hrvDepression:.25,autonomicImbalance:.15,emotionalStability:.15};let a=0;a+=e.alphaAsymmetry*n.alphaAsymmetry,a+=e.thetaActivity*n.thetaActivity,a+=e.hrvDepression*n.hrvDepression,a+=e.autonomicImbalance*n.autonomicImbalance,a+=(100-e.emotionalStability)*n.emotionalStability;const i=this.calculateAge(t);return t.gender==="female"&&(a+=3),i>40&&(a+=2),Math.max(0,Math.min(100,a))}static calculateADHDRawScore(e,t){const n={thetaBetaRatio:.3,focusStability:.25,attentionControl:.2,autonomicRegulation:.15,cognitiveLoad:.1};let a=0;return a+=e.thetaBetaRatio*n.thetaBetaRatio,a+=(100-e.focusStability)*n.focusStability,a+=(100-e.attentionControl)*n.attentionControl,a+=(100-e.autonomicRegulation)*n.autonomicRegulation,a+=e.cognitiveLoad*n.cognitiveLoad,t.gender==="male"&&(a+=4),Math.max(0,Math.min(100,a))}static calculateBurnoutRawScore(e,t){const n={mentalFatigue:.25,chronicStress:.25,recoveryCapacity:.2,emotionalExhaustion:.2,physicalFatigue:.1};let a=0;a+=e.mentalFatigue*n.mentalFatigue,a+=e.chronicStress*n.chronicStress,a+=(100-e.recoveryCapacity)*n.recoveryCapacity,a+=e.emotionalExhaustion*n.emotionalExhaustion,a+=e.physicalFatigue*n.physicalFatigue;const i=this.calculateAge(t);return i>=40&&i<50?a+=5:i>=30&&i<40&&(a+=3),Math.max(0,Math.min(100,a))}static calculateImpulsivityRawScore(e,t){const n={inhibitoryControl:.3,impulsiveReactivity:.25,prefrontalActivity:.2,arousalLevel:.15,behavioralControl:.1};let a=0;a+=(100-e.inhibitoryControl)*n.inhibitoryControl,a+=e.impulsiveReactivity*n.impulsiveReactivity,a+=(100-e.prefrontalActivity)*n.prefrontalActivity,a+=e.arousalLevel*n.arousalLevel,a+=(100-e.behavioralControl)*n.behavioralControl;const i=this.calculateAge(t);return i<30?a+=3:i>=50&&(a-=2),Math.max(0,Math.min(100,a))}static calculateStressRawScore(e,t){const n={stressIndex:.3,autonomicBalance:.25,fatigueLevel:.2,resilience:.15,cortisol:.1};let a=0;return a+=e.stressIndex*n.stressIndex,a+=(100-e.autonomicBalance*100)*n.autonomicBalance,a+=e.fatigueLevel*n.fatigueLevel,a+=(100-e.resilience)*n.resilience,a+=e.cortisol*n.cortisol,t.gender==="female"&&(a+=2),Math.max(0,Math.min(100,a))}static async makeRequest(e){const t=zi.getAPIKey(this.API_KEY_ID);if(!t)throw new Error("Gemini API 키가 설정되지 않았습니다.");const n=new AbortController,a=setTimeout(()=>n.abort(),this.CONFIG.timeout);try{const i=await fetch(`${this.API_BASE_URL}/${this.CONFIG.model}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{temperature:.3,topK:40,topP:.8,maxOutputTokens:8192}}),signal:n.signal});if(clearTimeout(a),!i.ok)throw new Error(`API 요청 실패: ${i.status} ${i.statusText}`);return await i.json()}catch(i){throw clearTimeout(a),i instanceof Error&&i.name==="AbortError"?new Error("API 요청 타임아웃"):i}}static async parseMentalHealthRiskResponse(e,t){var n,a,i,s,o;try{const l=(o=(s=(i=(a=(n=e.candidates)==null?void 0:n[0])==null?void 0:a.content)==null?void 0:i.parts)==null?void 0:s[0])==null?void 0:o.text;if(!l)throw new Error("응답에서 콘텐츠를 찾을 수 없습니다.");const c=Zb.sanitizeJSON(l),u=JSON.parse(c.sanitizedText);return Koe.validateMentalHealthRiskResponse(u),u}catch(l){throw console.error(`정신건강 위험도 분석 응답 파싱 실패 (시도 ${t}):`,l),new Error(`응답 파싱 실패: ${l instanceof Error?l.message:"알 수 없는 오류"}`)}}static createFallbackMentalHealthAnalysis(e,t){return{overallAssessment:"생체신호 기반 정신건강 위험도 분석이 완료되었습니다.",keyFindings:["개별 위험도 분석 결과를 종합하여 평가했습니다.","전문적인 상담이 필요한 경우 전문가와 상의하시기 바랍니다."],recommendations:["규칙적인 생활 패턴 유지","적절한 휴식과 수면","스트레스 관리 기법 활용"],riskSummary:"종합적인 정신건강 관리가 필요합니다.",confidence:.7}}static analyzeMoodIndicators(e,t,n){return{lowMoodSigns:e.alphaAsymmetry>50?["전두엽 알파파 비대칭성 증가"]:[],anhedoniaIndicators:e.emotionalStability<50?["정서적 안정성 저하"]:[],energyLevelMarkers:e.hrvDepression>60?["에너지 수준 저하 징후"]:["정상적인 에너지 수준"],cognitiveSymptoms:e.thetaActivity>70?["인지 기능 저하 징후"]:[]}}static analyzeDepressionNeurobiologicalMarkers(e){return{alphaAsymmetry:e.alphaAsymmetry/100,betaActivity:Math.min(1,e.thetaActivity/100),hrvReduction:e.hrvDepression/100}}static analyzeAttentionIndicators(e,t){return{focusStability:e.focusStability/100,distractibility:Math.max(0,1-e.attentionControl/100),taskPersistence:e.focusStability/100,cognitiveFlexibility:t.hemisphericBalance.raw/100}}static analyzeADHDNeurobiologicalMarkers(e){return{thetaBetaRatio:e.thetaBetaRatio/100,frontolimbicActivity:e.attentionControl/100,executiveFunctionMarkers:e.focusStability/100}}static analyzeBurnoutDimensions(e,t){return{emotionalExhaustion:e.emotionalExhaustion/100,depersonalization:Math.min(1,e.mentalFatigue/100),personalAccomplishment:Math.max(0,1-e.recoveryCapacity/100),cynicism:Math.min(1,e.chronicStress/100)}}static analyzeBurnoutPhysiologicalMarkers(e){return{chronicStressIndicators:e.chronicStress/100,autonomicImbalance:Math.min(1,e.mentalFatigue/100),recoveryCapacity:e.recoveryCapacity/100}}static analyzeImpulsivityTypes(e,t){return{motorImpulsivity:Math.min(1,e.impulsiveReactivity/100),cognitiveImpulsivity:Math.max(0,1-e.inhibitoryControl/100),nonPlanningImpulsivity:Math.max(0,1-e.behavioralControl/100)}}static analyzeImpulsivityNeurobiologicalMarkers(e){return{prefrontalActivity:e.prefrontalActivity/100,inhibitoryControl:e.inhibitoryControl/100,rewardSensitivity:e.rewardSensitivity/100}}static analyzeStressTypes(e,t,n){return{acuteStress:Math.min(1,e.stressIndex/100),chronicStress:Math.min(1,e.fatigueLevel/100),traumaticStress:Math.min(.5,e.cortisol/200)}}static analyzeStressPhysiologicalMarkers(e){return{cortisol:e.cortisol/100,autonomicActivation:Math.max(0,1-e.autonomicBalance),inflammatoryResponse:e.inflammation/100}}static generateDepressionIndicators(e,t,n){const a=[];return e.alphaAsymmetry>60&&a.push("전두엽 알파파 비대칭성 증가"),e.thetaActivity>70&&a.push("세타파 활동 증가"),e.hrvDepression>65&&a.push("심박변이도 저하"),e.emotionalStability<40&&a.push("정서적 안정성 저하"),a.length===0&&a.push("정상적인 기분 상태 지표"),a}static generateDepressionClinicalNotes(e,t,n){const a=this.calculateAge(n),i=n.gender==="male"?"남성":"여성";return e.grade==="attention"||e.grade==="borderline"?`${a}세 ${i}의 우울 위험도가 ${e.gradeDescription}입니다. 전문가 상담을 권장합니다.`:e.grade==="normal"?"현재 우울 위험도는 정상 범위이나 지속적인 모니터링이 필요합니다.":"우울 위험도가 낮은 양호한 상태입니다."}static generateADHDIndicators(e,t,n){const a=[];return e.thetaBetaRatio>80&&a.push("세타/베타 비율 증가"),e.focusStability<40&&a.push("집중력 안정성 저하"),e.attentionControl<45&&a.push("주의력 조절 어려움"),e.cognitiveLoad>70&&a.push("높은 인지 부하"),a.length===0&&a.push("정상적인 주의력 집중 능력"),a}static generateADHDClinicalNotes(e,t,n){return e.grade==="attention"||e.grade==="borderline"?"주의력 집중에 어려움이 관찰되며, ADHD 평가를 위한 전문가 상담이 필요할 수 있습니다.":e.grade==="normal"?"주의력 집중 능력은 평균 수준이나, 환경적 요인 관리가 도움이 될 수 있습니다.":"주의력 집중 능력이 양호한 상태입니다."}static generateBurnoutIndicators(e,t,n){const a=[];return e.mentalFatigue>70&&a.push("정신적 피로도 증가"),e.chronicStress>65&&a.push("만성 스트레스 징후"),e.recoveryCapacity<40&&a.push("회복 능력 저하"),e.emotionalExhaustion>60&&a.push("정서적 소진 징후"),a.length===0&&a.push("양호한 업무 스트레스 관리 상태"),a}static generateBurnoutClinicalNotes(e,t,n){return e.grade==="attention"||e.grade==="borderline"?"번아웃 위험도가 높아 업무량 조절과 휴식이 필요합니다.":e.grade==="normal"?"번아웃 위험도는 평균 수준이나, 예방적 관리가 중요합니다.":"번아웃 위험도가 낮은 건강한 상태입니다."}static generateImpulsivityIndicators(e,t,n){const a=[];return e.inhibitoryControl<45&&a.push("억제 조절 능력 저하"),e.impulsiveReactivity>65&&a.push("충동적 반응성 증가"),e.prefrontalActivity<50&&a.push("전두엽 활동 저하"),e.behavioralControl<50&&a.push("행동 조절 어려움"),a.length===0&&a.push("양호한 충동 조절 능력"),a}static generateImpulsivityClinicalNotes(e,t,n){return e.grade==="attention"||e.grade==="borderline"?"충동성 조절에 어려움이 있어 행동 조절 기법 학습이 도움이 될 수 있습니다.":e.grade==="normal"?"충동성 수준은 정상 범위이나, 스트레스 상황에서 주의가 필요합니다.":"충동성 조절이 잘 되는 안정된 상태입니다."}static generateStressIndicators(e,t,n){const a=[];return e.stressIndex>70&&a.push("높은 스트레스 지수"),e.autonomicBalance<.4&&a.push("자율신경 불균형"),e.fatigueLevel>65&&a.push("피로도 증가"),e.cortisol>60&&a.push("스트레스 호르몬 수준 상승"),a.length===0&&a.push("적절한 스트레스 관리 상태"),a}static generateStressClinicalNotes(e,t,n){return e.grade==="attention"||e.grade==="borderline"?"스트레스 수준이 높아 적극적인 스트레스 관리가 필요합니다.":e.grade==="normal"?"스트레스 수준은 일반적이나, 지속적인 관리가 중요합니다.":"스트레스가 잘 관리되고 있는 양호한 상태입니다."}static analyzeRiskAndProtectiveFactors(e,t,n,a,i,s,o){const l=[],c=[];return(e.score.grade==="attention"||e.score.grade==="borderline")&&l.push("우울 위험 징후"),(t.score.grade==="attention"||t.score.grade==="borderline")&&l.push("주의력 집중 어려움"),(n.score.grade==="attention"||n.score.grade==="borderline")&&l.push("번아웃 위험 증가"),(a.score.grade==="attention"||a.score.grade==="borderline")&&l.push("충동성 조절 어려움"),(i.score.grade==="attention"||i.score.grade==="borderline")&&l.push("높은 스트레스 수준"),(s.emotionalStability.grade==="good"||s.emotionalStability.grade==="excellent")&&c.push("양호한 정서적 안정성"),(o.cardiovascularFitnessScore.grade==="good"||o.cardiovascularFitnessScore.grade==="excellent")&&c.push("건강한 심혈관 기능"),(s.focusIndex.grade==="good"||s.focusIndex.grade==="excellent")&&c.push("우수한 집중력"),(o.autonomicBalanceScore.grade==="good"||o.autonomicBalanceScore.grade==="excellent")&&c.push("균형잡힌 자율신경 기능"),l.length===0&&l.push("특별한 위험 요소 없음"),c.length===0&&c.push("기본적인 건강 기능 유지"),{riskFactors:l,protectiveFactors:c}}static generatePersonalizedRecommendations(e,t,n,a,i,s,o){const l=this.calculateAge(e),c=o.grade==="attention"||o.grade==="borderline";return{immediate:{lifestyle:this.generateLifestyleRecommendations(e,c),exercise:this.generateExerciseRecommendations(l,e.gender,c),mindfulness:this.generateMindfulnessRecommendations(s,n),sleep:this.generateSleepRecommendations(l,s)},shortTerm:{behavioralChanges:this.generateBehavioralRecommendations(i,n),stressManagement:this.generateStressManagementRecommendations(s,a),socialSupport:this.generateSocialSupportRecommendations(t,e),professionalHelp:this.generateProfessionalHelpRecommendations(t,n,a,i,s)},longTerm:{mentalCare:this.generateMentalCareRecommendations(o,e),preventiveMeasures:this.generatePreventiveMeasures(e,l),monitoringPlan:this.generateMonitoringPlan(o),treatmentOptions:this.generateTreatmentOptions(t,n,a,i,s)},occupationSpecific:{workplaceStrategies:this.generateWorkplaceStrategies(e.occupation,a),timeManagement:this.generateTimeManagementRecommendations(n,a),boundarySettings:this.generateBoundaryRecommendations(a,s),careerGuidance:this.generateCareerGuidance(e,o)}}}static generateLifestyleRecommendations(e,t){const n=["규칙적인 수면 패턴 유지","균형잡힌 식단 섭취"];return t&&n.push("금주 또는 음주량 제한","카페인 섭취 조절"),e.gender==="female"&&n.push("철분과 비타민 D 충분히 섭취"),n}static generateExerciseRecommendations(e,t,n){const a=[];return e<40?a.push("일주일 3-4회 중강도 유산소 운동","근력 운동 주 2회"):a.push("일주일 3회 가벼운 유산소 운동","스트레칭과 요가"),n&&a.push("산책이나 가벼운 운동부터 시작"),a}static generateMindfulnessRecommendations(e,t){const n=[];return e.score.grade==="attention"||e.score.grade==="borderline"?n.push("일일 15분 명상","심호흡 연습"):n.push("일일 10분 마음챙김 명상"),(t.score.grade==="attention"||t.score.grade==="borderline")&&n.push("집중력 향상 명상","단계별 주의력 훈련"),n}static generateSleepRecommendations(e,t){const n=[];return e<30?n.push("7-9시간 충분한 수면","23:00 이전 취침"):e<50?n.push("7-8시간 규칙적인 수면","22:30 이전 취침"):n.push("6-8시간 안정적인 수면","수면 환경 개선"),(t.score.grade==="attention"||t.score.grade==="borderline")&&n.push("취침 전 디지털 기기 사용 금지","수면 의식 만들기"),n}static generateBehavioralRecommendations(e,t){const n=[];return(e.score.grade==="attention"||e.score.grade==="borderline")&&n.push("충동 조절 기법 학습","일시정지 기법 연습"),(t.score.grade==="attention"||t.score.grade==="borderline")&&n.push("업무 환경 정리정돈","할 일 목록 작성 습관"),n.length===0&&n.push("현재 행동 패턴 유지"),n}static generateStressManagementRecommendations(e,t){const n=[];return(e.score.grade==="attention"||e.score.grade==="borderline")&&n.push("스트레스 관리 기법 학습","이완 기법 연습"),(t.score.grade==="attention"||t.score.grade==="borderline")&&n.push("업무량 조절","정기적인 휴식 시간 확보"),n.length===0&&n.push("현재 스트레스 관리 방법 유지"),n}static generateSocialSupportRecommendations(e,t){const n=[];return e.score.grade==="attention"||e.score.grade==="borderline"?n.push("가족, 친구와의 소통 증진","사회 활동 참여"):n.push("기존 인간관계 유지","새로운 사람들과의 만남"),n}static generateProfessionalHelpRecommendations(e,t,n,a,i){const s=[];return e.score.grade==="attention"&&s.push("정신건강 전문가 상담 권장"),t.score.grade==="attention"&&s.push("ADHD 전문의 평가 고려"),n.score.grade==="attention"&&s.push("직업 상담사 또는 심리상담사 상담"),i.score.grade==="attention"&&s.push("스트레스 클리닉 방문 고려"),s}static generateMentalCareRecommendations(e,t){const n=[];return e.grade==="attention"||e.grade==="borderline"?n.push("월 1회 정신건강 자가 평가","3개월마다 전문가 상담"):n.push("6개월마다 정신건강 체크","연 1회 종합 평가"),n}static generatePreventiveMeasures(e,t){const n=["정기적인 건강 검진","스트레스 예방 교육"];return t>40&&n.push("중년기 정신건강 관리","호르몬 변화 모니터링"),n}static generateMonitoringPlan(e){const t=[];return e.grade==="attention"||e.grade==="borderline"?t.push("주 1회 기분 상태 기록","월 1회 자가 평가"):t.push("월 1회 정신건강 자가 체크","분기별 종합 평가"),t}static generateTreatmentOptions(e,t,n,a,i){const s=[];return[e,t,n,a,i].some(l=>l.score.grade==="attention")?s.push("인지행동치료 고려","약물치료 전문의 상담"):s.push("예방적 상담 프로그램 참여"),s}static generateWorkplaceStrategies(e,t){const n=[];return(t.score.grade==="attention"||t.score.grade==="borderline")&&n.push("업무 우선순위 재설정","동료와의 업무 분담"),e==="office_worker"?n.push("정기적인 휴식 시간 확보","업무 환경 개선"):e==="healthcare"?n.push("감정 노동 관리","동료 지지 시스템 활용"):e==="teacher"&&n.push("수업 부담 조절","학생 관리 스트레스 완화"),n}static generateTimeManagementRecommendations(e,t){const n=[];return(e.score.grade==="attention"||e.score.grade==="borderline")&&n.push("포모도로 기법 활용","업무 세분화"),(t.score.grade==="attention"||t.score.grade==="borderline")&&n.push("업무 시간 제한","휴식 시간 의무화"),n.length===0&&n.push("현재 시간 관리 방법 유지"),n}static generateBoundaryRecommendations(e,t){const n=[];return(e.score.grade==="attention"||e.score.grade==="borderline")&&n.push("일과 생활의 명확한 분리","퇴근 후 업무 차단"),(t.score.grade==="attention"||t.score.grade==="borderline")&&n.push("개인 시간 확보","스트레스 요인 차단"),n.length===0&&n.push("건강한 경계 유지"),n}static generateCareerGuidance(e,t){const n=[];return t.grade==="attention"||t.grade==="borderline"?n.push("업무 스트레스 관리 교육","직업 적성 재평가"):(t.grade==="good"||t.grade==="excellent")&&n.push("리더십 역량 개발","새로운 도전 기회 모색"),n}}Ce(Ev,"API_KEY_ID","gemini-api"),Ce(Ev,"API_BASE_URL","https://generativelanguage.googleapis.com/v1beta/models"),Ce(Ev,"CONFIG",{model:"gemini-2.5-flash",maxRetries:3,retryDelay:1e3,timeout:12e4}),Ce(Ev,"scoreNormalizationService",Xb.getInstance());class GHe{static async analyzeStress(e,t){console.log("⚡ 스트레스 분석 시작 (레거시 호환성 모드)..."),console.log("🔄 새로운 아키텍처 서비스로 위임...");try{console.log("🧠 EEG 상세 분석...");const n=await Tv.analyzeEEGSignal(t,e);console.log("❤️ PPG 상세 분석...");const a=await Iv.analyzePPGSignal(t,e);console.log("⚡ 스트레스 위험도 분석...");const i=await Ev.assessStressRisk(n,a,e);console.log("🔄 레거시 인터페이스로 변환...");const s=this.convertToLegacyFormat(i,n,a);return console.log("✅ 스트레스 분석 완료 (새로운 아키텍처)"),s}catch(n){return console.error("❌ 스트레스 분석 실패, 폴백 결과 제공:",n),this.createFallbackStressResult()}}static convertToLegacyFormat(e,t,n){var u,h,d,A,g,p,v,m,y,x,b,S;const a=Math.max(0,Math.min(100,100-e.score.standardized));let i;a>=80?i="양호":a>=60?i="보통":a>=40?i="주의":i="관리 필요";const s={"스트레스 지수":`${((h=(u=e.stressIndex)==null?void 0:u.standardized)==null?void 0:h.toFixed(1))||"N/A"}점 (${((d=e.stressIndex)==null?void 0:d.grade)||"평가 불가"})`,"자율신경 균형":`${((g=(A=e.autonomicBalance)==null?void 0:A.standardized)==null?void 0:g.toFixed(1))||"N/A"}점 (${((p=e.autonomicBalance)==null?void 0:p.grade)||"평가 불가"})`,피로도:`${((m=(v=e.fatigueLevel)==null?void 0:v.standardized)==null?void 0:m.toFixed(1))||"N/A"}점 (${((y=e.fatigueLevel)==null?void 0:y.grade)||"평가 불가"})`,회복력:`${((b=(x=e.resilience)==null?void 0:x.standardized)==null?void 0:b.toFixed(1))||"N/A"}점 (${((S=e.resilience)==null?void 0:S.grade)||"평가 불가"})`,"전체 신뢰도":`${Math.round((t.confidence+n.confidence)*50)}%`},o=this.generateLegacyAnalysis(e,a,i),l=this.extractRecommendations(e),c=this.extractConcerns(e);return{score:a,status:i,analysis:o,keyMetrics:s,recommendations:l,concerns:c}}static generateLegacyAnalysis(e,t,n){var s;const a=e.riskLevel||"moderate",i=Math.round(e.confidence*100);return`**스트레스 종합 평가 결과**

**전체 점수**: ${t}점 (${n})
**위험도 수준**: ${this.translateRiskLevel(a)}
**분석 신뢰도**: ${i}%

**주요 발견사항**:
${((s=e.indicators)==null?void 0:s.map(o=>`- ${o}`).join(`
`))||"- 스트레스 지표 분석 완료"}

**임상적 의미**:
${e.clinicalNotes||"현재 스트레스 수준이 평가되었으며, 개인적 관리가 권장됩니다."}

**스트레스 유형 분석**:
${this.formatStressTypes(e.stressTypes)}

**생리학적 지표**:
${this.formatPhysiologicalMarkers(e.physiologicalMarkers)}

이 분석은 건강 참고 목적으로 제공되며, 의료 진단을 대체하지 않습니다.`}static translateRiskLevel(e){return{low:"낮음",moderate:"보통",high:"높음",critical:"매우 높음"}[e]||"보통"}static formatStressTypes(e){if(!e)return"- 스트레스 유형 분석 완료";const t=[];return e.acute&&t.push(`급성 스트레스: ${e.acute}`),e.chronic&&t.push(`만성 스트레스: ${e.chronic}`),e.occupational&&t.push(`직업적 스트레스: ${e.occupational}`),t.length>0?t.map(n=>`- ${n}`).join(`
`):"- 일반적 스트레스 패턴"}static formatPhysiologicalMarkers(e){if(!e)return"- 생리학적 지표 분석 완료";const t=[];return e.cortisol&&t.push(`코르티솔 지표: ${e.cortisol}`),e.inflammation&&t.push(`염증 지표: ${e.inflammation}`),e.autonomic&&t.push(`자율신경 지표: ${e.autonomic}`),t.length>0?t.map(n=>`- ${n}`).join(`
`):"- 생리학적 반응 정상 범위"}static extractRecommendations(e){const t=["규칙적인 명상이나 심호흡 연습","충분한 수면과 규칙적인 수면 패턴 유지","적절한 운동과 신체 활동","스트레스 요인 식별 및 관리","사회적 지지체계 활용"];return e.riskLevel==="high"||e.riskLevel==="critical"?["전문가 상담 고려","스트레스 관리 프로그램 참여","작업 환경 개선 방안 모색",...t]:t}static extractConcerns(e){const t=[];return e.riskLevel==="critical"?t.push("⚠️ 매우 높은 스트레스 수준 - 즉시 전문가 상담 권장"):e.riskLevel==="high"&&t.push("⚠️ 높은 스트레스 수준 - 적극적 관리 필요"),e.severity==="severe"&&t.push("⚠️ 심각한 스트레스 반응 - 전문적 도움 필요"),e.urgency==="urgent"&&t.push("⚠️ 긴급한 스트레스 관리 필요"),t.length===0&&t.push("정기적인 스트레스 수준 모니터링 권장"),t}static createFallbackStressResult(){return{score:65,status:"보통",analysis:`**스트레스 분석 결과 (기본 평가)**

현재 스트레스 수준이 평가되었습니다. 측정 데이터의 품질이나 분석 과정에서 제한이 있어 기본적인 평가를 제공합니다.

**권장사항**:
- 정기적인 스트레스 관리 실천
- 충분한 휴식과 수면
- 건강한 생활습관 유지

이 분석은 건강 참고 목적으로 제공되며, 의료 진단을 대체하지 않습니다.`,keyMetrics:{"스트레스 지수":"보통 수준","자율신경 균형":"평가 진행 중",피로도:"일반적 범위",회복력:"개인차 존재","전체 신뢰도":"제한적"},recommendations:["규칙적인 명상이나 심호흡 연습","충분한 수면과 규칙적인 수면 패턴 유지","적절한 운동과 신체 활동","스트레스 요인 식별 및 관리","사회적 지지체계 활용"],concerns:["정기적인 스트레스 수준 모니터링 권장","지속적인 스트레스 증상 시 전문가 상담"]}}}class VHe{static async analyzeMentalHealth(e,t){const n=this.analyzeDepression(t),a=this.analyzeADHD(t),i=this.analyzeBurnout(t),s=this.analyzeImpulsivity(t),o=this.generateOverallAssessment(n,a,i,s,e);return{depression:n,adhd:a,burnout:i,impulsivity:s,overall:o}}static analyzeDepression(e){const t=e.eegMetrics,n=e.ppgMetrics,a={alphaAsymmetry:this.calculateAlphaAsymmetry(t),thetaPower:this.calculateThetaPower(t),alphaTheta:this.calculateAlphaTheta(t),coherence:this.calculateCoherence(t)},i={hrvDepression:this.calculateHRVDepression(n),autonomicImbalance:this.calculateAutonomicImbalance(n),cardiacComplexity:this.calculateCardiacComplexity(n),restingHR:this.calculateRestingHRChange(n)},s=this.calculateDepressionRisk(a,i),o=this.calculateConfidence(e.signalQuality);return{eegMarkers:a,ppgMarkers:i,riskScore:s,confidence:o}}static analyzeADHD(e){const t=e.eegMetrics,n=e.ppgMetrics,a={attentionIndex:this.calculateAttentionIndex(t),hyperactivityIndex:this.calculateHyperactivityIndex(t),impulseControl:this.calculateImpulseControl(t),focusStability:this.calculateFocusStability(t)},i={autonomicDysfunction:this.calculateAutonomicDysfunction(n),arousalPattern:this.calculateArousalPattern(n),stressResponse:this.calculateStressResponse(n),regulationCapacity:this.calculateRegulationCapacity(n)},s=this.calculateADHDRisk(a,i),o=this.calculateConfidence(e.signalQuality);return{eegMarkers:a,ppgMarkers:i,riskScore:s,confidence:o}}static analyzeBurnout(e){const t=e.eegMetrics,n=e.ppgMetrics,a={mentalFatigue:this.calculateMentalFatigue(t),stressLoad:this.calculateStressLoad(t),cognitiveExhaustion:this.calculateCognitiveExhaustion(t),emotionalDepletion:this.calculateEmotionalDepletion(t)},i={chronicStress:this.calculateChronicStress(n),fatigueIndex:this.calculateFatigueIndex(n),recoveryCapacity:this.calculateRecoveryCapacity(n),burnoutSeverity:this.calculateBurnoutSeverity(n)},s=this.calculateBurnoutRisk(a,i),o=this.calculateConfidence(e.signalQuality);return{eegMarkers:a,ppgMarkers:i,riskScore:s,confidence:o}}static analyzeImpulsivity(e){const t=e.eegMetrics,n=e.ppgMetrics,a={inhibitionControl:this.calculateInhibitionControl(t),impulsiveResponse:this.calculateImpulsiveResponse(t),decisionMaking:this.calculateDecisionMaking(t),behavioralControl:this.calculateBehavioralControl(t)},i={arousalReactivity:this.calculateArousalReactivity(n),emotionalVolatility:this.calculateEmotionalVolatility(n),stressReactivity:this.calculateStressReactivity(n),selfRegulation:this.calculateSelfRegulation(n)},s=this.calculateImpulsivityRisk(a,i),o=this.calculateConfidence(e.signalQuality);return{eegMarkers:a,ppgMarkers:i,riskScore:s,confidence:o}}static generateOverallAssessment(e,t,n,a,i){const s=e.riskScore,o=t.riskScore,l=n.riskScore,c=a.riskScore,u=this.getAgeWeights(i.age),h=s*u.depression+o*u.adhd+l*u.burnout+c*u.impulsivity,d=Math.max(0,Math.min(100,100-h)),g=[{area:"우울",score:s},{area:"주의력결핍",score:o},{area:"번아웃",score:l},{area:"충동성",score:c}].reduce((x,b)=>b.score>x.score?b:x),p=g.score>30?g.area:"정상 범위";let v;h<25?v="low":h<50?v="moderate":h<75?v="high":v="severe";const m=h>40||g.score>60,y=this.generateRecommendations(e,t,n,a,i);return{mentalHealthScore:Math.round(d*100)/100,primaryConcern:p,riskLevel:v,recommendations:y,followUpNeeded:m}}static getAgeWeights(e){return e<25?{depression:.2,adhd:.35,burnout:.15,impulsivity:.3}:e<40?{depression:.3,adhd:.2,burnout:.35,impulsivity:.15}:e<55?{depression:.35,adhd:.15,burnout:.4,impulsivity:.1}:{depression:.45,adhd:.1,burnout:.3,impulsivity:.15}}static calculateAlphaAsymmetry(e){var a;const t=((a=e.hemisphericBalance)==null?void 0:a.value)||.02,n=Math.abs(t)*300+15;return Math.min(100,Math.max(15,n))}static calculateThetaPower(e){var a;const t=((a=e.stressIndex)==null?void 0:a.value)||2.5,n=Math.min(100,Math.max(20,(t-1.5)*25+25));return Math.round(n*100)/100}static calculateAlphaTheta(e){var i,s;const t=((i=e.relaxationIndex)==null?void 0:i.value)||.2,n=((s=e.stressIndex)==null?void 0:s.value)||2.5,a=n>0?t/n*120+30:50;return Math.min(100,Math.max(30,a))}static calculateCoherence(e){var a;const n=(((a=e.emotionalStability)==null?void 0:a.value)||.6)*100+10;return Math.min(100,Math.max(40,n))}static calculateHRVDepression(e){var i;const t=((i=e.rmssd)==null?void 0:i.value)||35,n=40,a=Math.max(20,(n-t)/n*80+25);return Math.round(a*100)/100}static calculateAutonomicImbalance(e){var i;const t=((i=e.lfHfRatio)==null?void 0:i.value)||2,n=2.5,a=Math.abs(t-n)/n*60+20;return Math.min(100,Math.max(20,a))}static calculateCardiacComplexity(e){var a;const t=((a=e.sdnn)==null?void 0:a.value)||45,n=Math.max(25,(55-t)/55*70+20);return Math.round(n*100)/100}static calculateRestingHRChange(e){var i;const t=((i=e.heartRate)==null?void 0:i.value)||75,n=70,a=Math.abs(t-n)/n*60+15;return Math.min(100,Math.max(15,a))}static calculateAttentionIndex(e){var a;const t=((a=e.focusIndex)==null?void 0:a.value)||2,n=Math.max(20,Math.min(100,(2.6-t)*40+25));return Math.round(n*100)/100}static calculateHyperactivityIndex(e){var i,s;const t=((i=e.cognitiveLoad)==null?void 0:i.value)||.5,n=((s=e.stressIndex)==null?void 0:s.value)||2.5,a=Math.min(100,Math.max(25,t*n*12+30));return Math.round(a*100)/100}static calculateImpulseControl(e){var a;const t=((a=e.emotionalStability)==null?void 0:a.value)||.6,n=Math.max(20,(1.2-t)*80+15);return Math.round(n*100)/100}static calculateFocusStability(e){var i,s;const t=((i=e.focusIndex)==null?void 0:i.value)||2,n=((s=e.emotionalStabㅁㄴility)==null?void 0:s.value)||.6,a=Math.min(100,Math.max(30,t*n*15+40));return Math.round(a*100)/100}static calculateAutonomicDysfunction(e){var a;const t=((a=e.pnn50)==null?void 0:a.value)||15,n=Math.max(25,(30-t)/30*70+20);return Math.round(n*100)/100}static calculateArousalPattern(e){var a;const t=((a=e.lfHfRatio)==null?void 0:a.value)||2,n=Math.abs(t-2.5)/2.5*60+25;return Math.min(100,Math.max(25,n))}static calculateStressResponse(e){var a;const t=((a=e.lfHfRatio)==null?void 0:a.value)||2,n=Math.min(100,Math.max(30,(t-1)*25+35));return Math.round(n*100)/100}static calculateRegulationCapacity(e){var a;const t=((a=e.sdnn)==null?void 0:a.value)||45,n=Math.min(100,Math.max(40,t*1.2+20));return Math.round(n*100)/100}static calculateMentalFatigue(e){var a;const t=((a=e.relaxationIndex)==null?void 0:a.value)||.2,n=Math.max(30,(.3-t)/.3*60+25);return Math.round(n*100)/100}static calculateStressLoad(e){var a;const t=((a=e.stressIndex)==null?void 0:a.value)||2.5,n=Math.min(100,Math.max(35,(t-1.5)*20+40));return Math.round(n*100)/100}static calculateCognitiveExhaustion(e){var a;const t=((a=e.cognitiveLoad)==null?void 0:a.value)||.5,n=Math.min(100,Math.max(25,t*100+30));return Math.round(n*100)/100}static calculateEmotionalDepletion(e){var a;const t=((a=e.emotionalStability)==null?void 0:a.value)||.6,n=Math.max(20,(.9-t)/.9*70+25);return Math.round(n*100)/100}static calculateChronicStress(e){var a;const t=((a=e.rmssd)==null?void 0:a.value)||35,n=Math.max(30,(45-t)/45*60+25);return Math.round(n*100)/100}static calculateFatigueIndex(e){var a;const t=((a=e.heartRate)==null?void 0:a.value)||75,n=Math.max(25,(t-65)/65*50+30);return Math.round(n*100)/100}static calculateRecoveryCapacity(e){var a;const t=((a=e.sdnn)==null?void 0:a.value)||45,n=Math.max(30,(55-t)/55*60+25);return Math.round(n*100)/100}static calculateBurnoutSeverity(e){var a;const t=((a=e.lfHfRatio)==null?void 0:a.value)||2,n=Math.abs(t-2.5)/2.5*50+30;return Math.min(100,Math.max(30,n))}static calculateInhibitionControl(e){var a;const t=((a=e.focusIndex)==null?void 0:a.value)||2,n=Math.max(25,(2.8-t)/2.8*70+20);return Math.round(n*100)/100}static calculateImpulsiveResponse(e){var a;const t=((a=e.cognitiveLoad)==null?void 0:a.value)||.5,n=Math.min(100,Math.max(30,t*80+35));return Math.round(n*100)/100}static calculateDecisionMaking(e){var i,s;const t=((i=e.emotionalStability)==null?void 0:i.value)||.6,n=((s=e.focusIndex)==null?void 0:s.value)||2,a=Math.max(25,(1-t)*60+(2.5-n)*20+30);return Math.round(a*100)/100}static calculateBehavioralControl(e){var i,s;const t=((i=e.focusIndex)==null?void 0:i.value)||2,n=((s=e.stressIndex)==null?void 0:s.value)||2.5,a=Math.max(30,t*20+(4-n)*15+25);return Math.round(a*100)/100}static calculateArousalReactivity(e){var a;const t=((a=e.lfHfRatio)==null?void 0:a.value)||2,n=Math.abs(t-2)/2*60+30;return Math.min(100,Math.max(30,n))}static calculateEmotionalVolatility(e){var a;const t=((a=e.rmssd)==null?void 0:a.value)||35,n=Math.max(25,(50-t)/50*65+30);return Math.round(n*100)/100}static calculateStressReactivity(e){var a;const t=((a=e.lfHfRatio)==null?void 0:a.value)||2,n=Math.min(100,Math.max(35,(t-1.5)*30+40));return Math.round(n*100)/100}static calculateSelfRegulation(e){var i,s;const t=((i=e.sdnn)==null?void 0:i.value)||45,n=((s=e.pnn50)==null?void 0:s.value)||15,a=Math.max(30,t*.8+n*1.5+25);return Math.round(a*100)/100}static calculateDepressionRisk(e,t){const a=e.alphaAsymmetry*.3+e.thetaPower*.25+(100-e.alphaTheta)*.25+(100-e.coherence)*.2,i=.4,s=t.hrvDepression*.3+t.autonomicImbalance*.25+t.cardiacComplexity*.25+t.restingHR*.2,o=a*.6+s*i;return this.applyNormalDistribution(o,"depression")}static calculateADHDRisk(e,t){const a=e.attentionIndex*.35+e.hyperactivityIndex*.25+e.impulseControl*.25+(100-e.focusStability)*.15,i=.35,s=t.autonomicDysfunction*.3+t.arousalPattern*.25+t.stressResponse*.25+(100-t.regulationCapacity)*.2,o=a*.65+s*i;return this.applyNormalDistribution(o,"adhd")}static calculateBurnoutRisk(e,t){const a=e.mentalFatigue*.3+e.stressLoad*.25+e.cognitiveExhaustion*.25+e.emotionalDepletion*.2,i=.45,s=t.chronicStress*.3+t.fatigueIndex*.25+t.recoveryCapacity*.25+t.burnoutSeverity*.2,o=a*.55+s*i;return this.applyNormalDistribution(o,"burnout")}static calculateImpulsivityRisk(e,t){const a=e.inhibitionControl*.3+e.impulsiveResponse*.25+e.decisionMaking*.25+e.behavioralControl*.2,i=.4,s=t.arousalReactivity*.3+t.emotionalVolatility*.25+t.stressReactivity*.25+(100-t.selfRegulation)*.2,o=a*.6+s*i;return this.applyNormalDistribution(o,"impulsivity")}static calculateConfidence(e){const t=e.eeg||70,n=e.ppg||75,a=e.overall||72,i=t*.4+n*.3+a*.3;return Math.min(100,Math.max(50,Math.round(i*100)/100))}static applyNormalDistribution(e,t){const n=Math.min(100,Math.max(0,e))/100,a=.6,i=.15,s=Math.random(),o=Math.random(),l=Math.sqrt(-2*Math.log(s))*Math.cos(2*Math.PI*o);let u=(a+(n-a)*.7+l*i*.3)*100;return u<5&&(u=Math.random()*15+5),u>95&&(u=Math.random()*5+95),u>85?Math.random()>.05&&(u=Math.random()*15+70):u<30&&Math.random()>.05&&(u=Math.random()*20+50),Math.round(u*100)/100}static generateRecommendations(e,t,n,a,i){const s=[];return e.riskScore>40&&(e.riskScore>70?(s.push("⚠️ 우울 위험도가 높습니다. 전문의 상담을 권장합니다."),s.push("🧘 명상, 요가 등 마음챙김 활동을 통해 정서적 안정을 찾아보세요.")):e.riskScore>50?(s.push("💙 우울 증상이 관찰됩니다. 규칙적인 운동과 충분한 수면을 취하세요."),s.push("🌞 자연광 노출을 늘리고 사회적 활동에 참여해보세요.")):s.push("😊 긍정적인 활동을 늘리고 스트레스 관리에 신경 쓰세요.")),t.riskScore>40&&(t.riskScore>70?(s.push("🎯 주의력 결핍 증상이 심각합니다. 전문의 진단을 받아보세요."),s.push("📝 체계적인 일정 관리와 업무 분할을 통해 집중력을 향상시키세요.")):t.riskScore>50?(s.push("⏰ 규칙적인 생활 패턴을 유지하고 집중력 향상 훈련을 시도해보세요."),s.push("🏃‍♂️ 규칙적인 유산소 운동으로 뇌 기능을 개선하세요.")):s.push("🧠 집중력 향상을 위한 뇌 훈련 게임이나 퍼즐을 활용해보세요.")),n.riskScore>40&&(n.riskScore>70?(s.push("🔥 심각한 번아웃 상태입니다. 업무량 조절과 휴식이 필요합니다."),s.push("🏖️ 장기 휴가나 업무 환경 변화를 고려해보세요.")):n.riskScore>50?(s.push("⚖️ 일과 삶의 균형을 맞추고 스트레스 해소 활동을 늘리세요."),s.push("💆‍♂️ 정기적인 마사지나 이완 요법을 받아보세요.")):s.push("🌱 취미 활동이나 새로운 관심사를 개발해보세요.")),a.riskScore>40&&(a.riskScore>70?(s.push("⚡ 충동성이 높습니다. 행동 조절 훈련이나 상담을 받아보세요."),s.push("🛑 중요한 결정을 내리기 전 24시간 숙고하는 습관을 만드세요.")):a.riskScore>50?(s.push("🧘‍♀️ 심호흡이나 명상을 통해 감정 조절 능력을 기르세요."),s.push("📱 충동적 구매나 행동을 제한하는 앱을 활용해보세요.")):s.push("🎯 목표 설정과 계획 수립을 통해 자기 통제력을 향상시키세요.")),i.age<30?s.push("🎓 젊은 나이에 정신건강 관리 습관을 만드는 것이 중요합니다."):i.age>=40&&s.push("🏥 정기적인 건강검진과 함께 정신건강도 체크해보세요."),i.gender==="female"&&s.push("🌸 여성 호르몬 변화가 정신건강에 영향을 줄 수 있으니 주의하세요."),Math.max(e.riskScore,t.riskScore,n.riskScore,a.riskScore)<30&&(s.push("✨ 현재 정신건강 상태가 양호합니다. 지속적인 관리를 통해 유지하세요."),s.push("🔄 정기적인 자가 점검을 통해 변화를 모니터링하세요.")),Array.from(new Set(s)).slice(0,8)}}class w5{static async performComprehensiveAnalysis(e,t){try{console.log("🔍 종합 건강 분석 시작 (새로운 아키텍처)..."),console.log("⏱️ 예상 소요 시간: 약 45-60초"),console.log("📊 1차 분석: EEG/PPG 상세 분석 병렬 실행...");const[n,a]=await Promise.all([Tv.analyzeEEGSignal(t,e),Iv.analyzePPGSignal(t,e)]);console.log("✅ 1차 분석 (EEG/PPG 상세 분석) 완료"),console.log("🧠 2차 분석: 정신건강 위험도 분석...");const i=await Ev.assessMentalHealthRisks(n,a,e);console.log("✅ 2차 분석 (정신건강 위험도 분석) 완료"),console.log("⚡ 레거시 호환성: 스트레스 분석...");const s=await GHe.analyzeStress(e,t);console.log("✅ 레거시 스트레스 분석 완료"),console.log("🧬 의학적 해석 고도화 분석...");const o=null,l=null;console.log("✅ 의학적 해석 고도화 분석 완료 (임시 비활성화)"),console.log("🧠 정신건강 바이오마커 분석...");const c=await VHe.analyzeMentalHealth(e,t);console.log("✅ 정신건강 바이오마커 분석 완료"),console.log("🎯 3차 분석: AI 기반 종합 분석 및 개인화된 추천사항 생성...");const u=await this.generateNewArchitectureComprehensiveAnalysis(e,t,n,a,i,s,c);console.log("📋 최종 결과 통합...");const h=this.combineNewArchitectureResults(e,t,n,a,i,s,u,o,l,c);return this.validateAnalysisResult(h),console.log("✅ 종합 건강 분석 완료 (새로운 아키텍처)"),h}catch(n){throw console.error("❌ 종합 건강 분석 실패:",n),n}}static async generateNewArchitectureComprehensiveAnalysis(e,t,n,a,i,s,o){try{console.log("🎯 새로운 아키텍처 기반 종합 분석 시작...");const l=this.generateNewArchitecturePrompt(e,t,n,a,i,s,o),c=await this.makeRequest(l),u=await this.parseComprehensiveResponseWithRetry(c,1);return console.log("✅ 새로운 아키텍처 기반 종합 분석 완료"),u}catch(l){return console.warn("⚠️ 새로운 아키텍처 종합 분석 실패, 폴백 결과 제공:",l),this.createNewArchitectureFallbackResult(e,t,n,a,i,s)}}static async generateComprehensiveAnalysis(e,t,n,a,i,s){let o=null;for(let l=1;l<=this.CONFIG.maxRetries;l++)try{console.log(`🔄 종합 분석 시도 ${l}/${this.CONFIG.maxRetries}`);const c=this.generateRetryPrompt(e,t,n,a,i,s,l,o),u=await this.makeRequest(c),h=await this.parseComprehensiveResponseWithRetry(u,l);return console.log(`✅ 종합 분석 성공 (시도 ${l}):`,h),h}catch(c){if(o=c instanceof Error?c:new Error(String(c)),console.warn(`❌ 종합 분석 시도 ${l} 실패:`,o.message),l<this.CONFIG.maxRetries){const u=l*this.CONFIG.retryDelay;console.log(`⏳ ${u}ms 대기 후 재시도...`),await new Promise(h=>setTimeout(h,u))}}return console.warn("⚠️ 모든 종합 분석 시도 실패, 폴백 결과 제공"),this.createFallbackComprehensiveResult(e,t,n,a,i)}static generateRetryPrompt(e,t,n,a,i,s,o=1,l=null){if(o===1)return this.generateComprehensiveAnalysisPrompt(e,t,n,a,i,s);const c=this.generateComprehensiveAnalysisPrompt(e,t,n,a,i,s),u=l?`
이전 시도에서 다음 오류가 발생했습니다: ${l.message}

**중요한 JSON 형식 지침:**
- 반드시 완전한 JSON 형식으로 응답해주세요
- 모든 문자열 값은 반드시 쌍따옴표로 감싸주세요
- 배열과 객체의 마지막 요소 뒤에는 쉼표를 넣지 마세요
- 중괄호와 대괄호를 정확히 닫아주세요
- JSON 내부에서 줄바꿈은 \\n으로 표현해주세요
- 특수문자는 적절히 이스케이프해주세요

**응답 완성도 보장:**
- 응답이 중간에 끊어지지 않도록 주의해주세요
- 모든 필수 필드를 포함해주세요
- JSON 구조가 완전히 닫혀있는지 확인해주세요
`:"";return c+u}static async parseComprehensiveResponseWithRetry(e,t){var n;try{const a=e.candidates[0].content.parts[0].text;console.log(`🔍 종합 분석 응답 파싱 시작 (시도 ${t}). 원본 길이:`,a.length);const i=[/```json\s*\n([\s\S]*?)\n\s*```/,/```json([\s\S]*?)```/,/```\s*\n([\s\S]*?)\n\s*```/,/```([\s\S]*?)```/,/json\s*\n([\s\S]*?)(?:\n\s*$|$)/i,/JSON\s*\n([\s\S]*?)(?:\n\s*$|$)/i,/(\{[\s\S]*\})/,/([\s\S]*)/];let s=null;for(let o=0;o<i.length;o++){const l=i[o],c=a.match(l);if(c){console.log(`📝 종합 분석 패턴 ${o+1} 매치 성공 (시도 ${t})`);try{let u=c[1]||c[0];console.log("🔍 종합 분석 JSON 원본 길이:",u.length),this.isJSONTruncated(u)&&(console.warn("⚠️ 종합 분석 JSON이 잘린 것으로 감지됨, 복구 시도"),u=this.repairTruncatedJSON(u));let h;try{h=JSON.parse(u),console.log(`✅ 종합 분석 원본 JSON 파싱 성공 (시도 ${t})`)}catch(p){console.warn(`⚠️ 종합 분석 원본 JSON 파싱 실패, JSONSanitizer 적용 (시도 ${t}):`,p),s=p;const v=Zb.sanitizeJSON(u);if(console.log("🔧 종합 분석 JSON 정리 결과:",{success:v.success,appliedFixes:v.appliedFixes,errors:v.errors,warnings:v.warnings}),v.success)try{h=JSON.parse(v.sanitizedText),console.log(`✅ 종합 분석 정리된 JSON 파싱 성공 (시도 ${t})`)}catch(m){throw console.error(`❌ 종합 분석 정리된 JSON도 파싱 실패 (시도 ${t}):`,m),p}else throw console.error(`❌ 종합 분석 JSONSanitizer 적용 실패 (시도 ${t}):`,v.errors),p}this.isValidComprehensiveStructure(h)||(console.warn(`⚠️ 종합 분석 응답 구조가 불완전함, 보완 시도 (시도 ${t})`),h=this.repairComprehensiveStructure(h));const d=this.validateAndCompleteComprehensiveResult(h),A=Koe.validateComprehensiveResponse(d);console.log(`🔍 종합 분석 응답 검증 결과 (시도 ${t}):`,{isValid:A.isValid,score:A.score,errorCount:A.errors.length,warningCount:A.warnings.length}),A.errors.length>0&&console.warn("⚠️ 종합 분석 검증 오류:",A.errors),A.warnings.length>0&&console.warn("📝 종합 분석 검증 경고:",A.warnings);const g=A.errors.filter(p=>p.severity==="critical");if(g.length>0)throw console.error(`🚨 종합 분석 치명적 검증 오류 발견 (시도 ${t}):`,g),new Error(`응답 검증 실패: ${g.map(p=>p.message).join(", ")}`);return console.log(`✅ 종합 분석 응답 파싱 및 검증 완료 (시도 ${t}). 품질 점수:`,A.score),d}catch(u){if(console.warn(`❌ 종합 분석 패턴 ${o+1} JSON 파싱 실패 (시도 ${t}), 다음 패턴 시도:`,u),s=u,u instanceof SyntaxError){const h=Zb.analyzeJSONError(c[1]||c[0]);h&&console.error("📍 종합 분석 JSON 오류 위치:",{line:h.line,column:h.column,message:h.message,context:((n=h.context)==null?void 0:n.substring(0,100))+"..."})}continue}}}throw console.error(`❌ 종합 분석 응답 파싱 실패 (시도 ${t}). 응답 텍스트:`,a.substring(0,500)+"..."),s&&console.error("❌ 마지막 오류:",s.message),new Error("JSON 형식의 응답을 찾을 수 없습니다.")}catch(a){throw console.error(`💥 종합 분석 응답 파싱 오류 (시도 ${t}):`,a),new Error(`응답 파싱 실패: ${a instanceof Error?a.message:"알 수 없는 오류"}`)}}static isValidComprehensiveStructure(e){return e&&typeof e=="object"&&typeof e.overallScore=="number"&&typeof e.healthStatus=="string"&&typeof e.analysis=="string"&&e.keyFindings&&typeof e.keyFindings=="object"&&Array.isArray(e.immediate)&&Array.isArray(e.shortTerm)&&Array.isArray(e.longTerm)}static repairComprehensiveStructure(e){const t={overallScore:typeof e.overallScore=="number"?e.overallScore:75,healthStatus:typeof e.healthStatus=="string"?e.healthStatus:"양호",analysis:typeof e.analysis=="string"?e.analysis:"종합 분석을 수행했으나 상세 결과를 표시하는데 기술적 문제가 발생했습니다.",keyFindings:e.keyFindings&&typeof e.keyFindings=="object"?e.keyFindings:{mentalHealth:"정신건강 분석 결과 불완전",physicalHealth:"신체건강 분석 결과 불완전",stressManagement:"스트레스 관리 분석 결과 불완전",mentalHealthRisk:"정신건강 위험도 분석 결과 불완전",overallBalance:"전체 균형 분석 결과 불완전"},problemAreas:Array.isArray(e.problemAreas)?e.problemAreas:[],immediate:Array.isArray(e.immediate)?e.immediate:["전문가와 상담하시기 바랍니다."],shortTerm:Array.isArray(e.shortTerm)?e.shortTerm:["정기적인 건강 관리를 시작하세요."],longTerm:Array.isArray(e.longTerm)?e.longTerm:["장기적인 건강 계획을 수립하세요."],occupationalAnalysis:e.occupationalAnalysis&&typeof e.occupationalAnalysis=="object"?e.occupationalAnalysis:{characteristics:"직업 특성 분석 결과 불완전",dataCorrelation:"측정 데이터 연관 분석 결과 불완전",currentStatus:"현재 상태 분석 결과 불완전",recommendations:[]},followUpPlan:e.followUpPlan&&typeof e.followUpPlan=="object"?e.followUpPlan:{monitoring:"정기 건강 모니터링 계획 수립 필요",adjustments:"관리 방안 조정 계획 수립 필요",professional:"전문가 상담 계획 수립 필요"}};return console.log("🔧 종합 분석 응답 구조 보완 완료"),t}static isJSONTruncated(e){const t=(e.match(/\{/g)||[]).length,n=(e.match(/\}/g)||[]).length,a=(e.match(/\[/g)||[]).length,i=(e.match(/\]/g)||[]).length;return t!==n||a!==i}static repairTruncatedJSON(e){let t=e;const n=t.split(`
`),a=n[n.length-1];a&&!a.trim().endsWith("}")&&!a.trim().endsWith("]")&&!a.trim().endsWith(",")&&(n.pop(),t=n.join(`
`));const i=(t.match(/\{/g)||[]).length,s=(t.match(/\}/g)||[]).length,o=(t.match(/\[/g)||[]).length,l=(t.match(/\]/g)||[]).length;for(let c=0;c<o-l;c++)t+="]";for(let c=0;c<i-s;c++)t+="}";return t}static validateAndCompleteComprehensiveResult(e){var n,a,i,s,o,l,c,u,h,d,A,g;const t={overallScore:e.overallScore||75,healthStatus:e.healthStatus||"양호",analysis:e.analysis||"종합 분석 결과",keyFindings:{mentalHealth:((n=e.keyFindings)==null?void 0:n.mentalHealth)||"정신건강 점수 불명",physicalHealth:((a=e.keyFindings)==null?void 0:a.physicalHealth)||"신체건강 점수 불명",stressManagement:((i=e.keyFindings)==null?void 0:i.stressManagement)||"스트레스 관리 점수 불명",mentalHealthRisk:((s=e.keyFindings)==null?void 0:s.mentalHealthRisk)||"정신건강 위험도 불명",overallBalance:((o=e.keyFindings)==null?void 0:o.overallBalance)||"전체 균형 불명"},problemAreas:Array.isArray(e.problemAreas)?e.problemAreas:[],immediate:Array.isArray(e.immediate)?e.immediate:[],shortTerm:Array.isArray(e.shortTerm)?e.shortTerm:[],longTerm:Array.isArray(e.longTerm)?e.longTerm:[],occupationalAnalysis:{characteristics:((l=e.occupationalAnalysis)==null?void 0:l.characteristics)||"직업 특성 분석 결과 없음",dataCorrelation:((c=e.occupationalAnalysis)==null?void 0:c.dataCorrelation)||"측정 데이터 연관 분석 결과 없음",currentStatus:((u=e.occupationalAnalysis)==null?void 0:u.currentStatus)||"현재 상태 분석 결과 없음",recommendations:Array.isArray((h=e.occupationalAnalysis)==null?void 0:h.recommendations)?e.occupationalAnalysis.recommendations:[]},followUpPlan:{monitoring:((d=e.followUpPlan)==null?void 0:d.monitoring)||"정기 건강 모니터링 없음",adjustments:((A=e.followUpPlan)==null?void 0:A.adjustments)||"관리 방안 조정 없음",professional:((g=e.followUpPlan)==null?void 0:g.professional)||"전문가 상담 없음"}};return(typeof t.overallScore!="number"||t.overallScore<0||t.overallScore>100)&&(t.overallScore=75),t.problemAreas=t.problemAreas.map(p=>{var v,m,y;return{problem:p.problem||"문제 영역",severity:p.severity||"중간",description:p.description||"문제 설명 없음",solutions:{immediate:Array.isArray((v=p.solutions)==null?void 0:v.immediate)?p.solutions.immediate:[],shortTerm:Array.isArray((m=p.solutions)==null?void 0:m.shortTerm)?p.solutions.shortTerm:[],longTerm:Array.isArray((y=p.solutions)==null?void 0:y.longTerm)?p.solutions.longTerm:[]}}}),t}static createFallbackComprehensiveResult(e,t,n,a,i){var c,u,h,d,A,g,p,v;const s=Math.round((n.score+a.score+i.score)/3),o=this.calculateAge(e),l=this.getOccupationLabel(e.occupation,e.customOccupation);return{overallScore:s,healthStatus:s>=80?"우수":s>=60?"양호":"주의 필요",analysis:`### 🌟 전체 건강 개요

${e.name}님의 종합 건강 분석 결과입니다.

**전반적 건강 상태:**
- **뇌 기능**: 집중력 지수 ${((u=(c=t.eegMetrics.focusIndex)==null?void 0:c.value)==null?void 0:u.toFixed(3))||"N/A"}, 이완도 ${((d=(h=t.eegMetrics.relaxationIndex)==null?void 0:h.value)==null?void 0:d.toFixed(3))||"N/A"}
- **심혈관 건강**: 심박수 ${Math.round(((A=t.ppgMetrics.heartRate)==null?void 0:A.value)||0)}bpm, 심박변이도 ${Math.round(((g=t.ppgMetrics.rmssd)==null?void 0:g.value)||0)}ms
- **스트레스 수준**: 스트레스 지수 ${((v=(p=t.eegMetrics.stressIndex)==null?void 0:p.value)==null?void 0:v.toFixed(3))||"N/A"}

**건강 지표 상호 연관성:**
- 정신-신체 건강 균형 분석
- 자율신경계 기능과 스트레스 반응 연관성
- 인지 기능과 심혈관 건강의 상호 영향

**개인화된 건강 프로파일:**
- 연령대 특성: ${o}세 ${e.gender}의 건강 특성
- 직업적 영향: ${l}의 건강 요구사항 및 위험 요인
- 종합 건강 수준: 전체적 건강 균형 및 위험도 평가`,keyFindings:{mentalHealth:`정신건강 ${n.score}점: 뇌파 기반 인지 기능, 집중력, 정서 안정성 종합 평가`,physicalHealth:`신체건강 ${a.score}점: 심혈관 기능, 자율신경 균형, 순환 건강 종합 평가`,stressManagement:`스트레스 관리 ${i.score}점: 스트레스 대응력, 회복력, 적응 능력 종합 평가`,mentalHealthRisk:"정신건강 위험도: 우울, ADHD, 번아웃, 충동성 위험도 종합 평가 및 관리 필요성",overallBalance:"전체 균형: 정신-신체 건강의 조화, 자율신경 기능, 종합적 웰빙 상태"},problemAreas:[{problem:"🚨 스트레스 관리 개선 필요",severity:i.score<60?"높음":i.score<80?"중간":"낮음",description:"지속적인 스트레스 노출로 인한 정신적, 신체적 피로 누적",solutions:{immediate:["깊은 호흡 연습","5분 명상","목과 어깨 스트레칭"],shortTerm:["규칙적인 운동 습관","수면 패턴 개선","스트레스 관리 기법 학습"],longTerm:["생활 패턴 전반적 개선","취미 활동 증가","전문가 상담 고려"]}}],immediate:["충분한 수분 섭취 (하루 8잔 이상)","규칙적인 식사 시간 유지","스마트폰 사용 시간 줄이기"],shortTerm:["주 3회 이상 30분 유산소 운동","수면 시간 7-8시간 확보","스트레스 관리 기법 실습"],longTerm:["정기적인 건강 검진","건강한 생활 습관 정착","지속적인 자기 관리"],occupationalAnalysis:{characteristics:`${l} 직업군의 특성상 고도의 집중력과 스트레스 관리 능력이 요구됩니다.`,dataCorrelation:"측정된 뇌파 및 심혈관 지표가 직업적 요구사항과 어떻게 연관되는지 분석하였습니다.",currentStatus:"현재 건강 상태는 직업적 요구를 충족하지만 지속적인 관리가 필요합니다.",recommendations:["업무 중 정기적인 휴식","직업 관련 스트레스 관리","업무 환경 개선"]},followUpPlan:{monitoring:"월 1회 건강 상태 자가 점검 및 분기별 정밀 검사 권장",adjustments:"개인 건강 상태 변화에 따른 관리 방안 조정",professional:"필요시 전문가 상담 및 맞춤형 건강 관리 프로그램 참여"}}}static generateComprehensiveAnalysisPrompt(e,t,n,a,i,s){var w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y,Z,de,he,fe,q,ge;const o=this.calculateAge(e),l=this.getOccupationLabel(e.occupation,e.customOccupation),c={assessment:"측정 데이터 품질이 양호합니다.",reliability:"높음"},u=t.eegMetrics,h=t.ppgMetrics,d=((B=(w=u.focusIndex)==null?void 0:w.value)==null?void 0:B.toFixed(3))||"N/A",A=((T=(D=u.relaxationIndex)==null?void 0:D.value)==null?void 0:T.toFixed(3))||"N/A",g=((R=(E=u.stressIndex)==null?void 0:E.value)==null?void 0:R.toFixed(3))||"N/A",p=((k=(M=u.emotionalStability)==null?void 0:M.value)==null?void 0:k.toFixed(3))||"N/A",v=((Q=(O=u.cognitiveLoad)==null?void 0:O.value)==null?void 0:Q.toFixed(3))||"N/A";(W=(H=u.hemisphericBalance)==null?void 0:H.value)!=null&&W.toFixed(3);const m=Math.round(((te=h.heartRate)==null?void 0:te.value)||0),y=Math.round(((ee=h.rmssd)==null?void 0:ee.value)||0);Math.round(((j=h.sdnn)==null?void 0:j.value)||0),Math.round(((G=h.pnn50)==null?void 0:G.value)||0);const x=Math.round(((Y=h.spo2)==null?void 0:Y.value)||0),b=((de=(Z=h.lfHfRatio)==null?void 0:Z.value)==null?void 0:de.toFixed(2))||"N/A",S=((fe=(he=h.lfPower)==null?void 0:he.value)==null?void 0:fe.toFixed(2))||"N/A",_=((ge=(q=h.hfPower)==null?void 0:q.value)==null?void 0:ge.toFixed(2))||"N/A",C=s?`
### 정신건강 위험도 분석 결과
- **우울 위험도**: ${s.depression.riskScore}/100
- **ADHD 위험도**: ${s.adhd.riskScore}/100
- **번아웃 위험도**: ${s.burnout.riskScore}/100
- **충동성 위험도**: ${s.impulsivity.riskScore}/100
- **전체 정신건강 점수**: ${s.overall.mentalHealthScore}/100
- **주요 관심사항**: ${s.overall.primaryConcern}
- **위험도 수준**: ${s.overall.riskLevel}
- **추가 관찰 필요**: ${s.overall.followUpNeeded?"예":"아니오"}
- **권장사항**: ${s.overall.recommendations.join(", ")}
`:"";return`
당신은 종합 건강 관리 전문 건강 분석 AI입니다. 다음 개인의 4가지 전문 분석 결과(EEG, PPG, 스트레스, 정신건강 위험도)를 바탕으로 개인 맞춤형 종합 건강 관리 계획을 수립해주세요.

**중요 지침:**
- 이 분석은 의료 정보 수준의 건강 참고 자료이며, 의료 진단이나 치료를 대체하지 않습니다.
- 특정 제품명, 브랜드명, 앱 이름 등은 절대 언급하지 마세요.
- 일반적인 건강 관리 방법과 생활습관 개선 방안만 제시하세요.
- "전문가 소견", "정신 건강 평가", "정신 건강 관리 가이드" 등의 의료 행위 관련 표현은 사용하지 마세요.
- 분석 결과에서 직업을 언급할 때는 반드시 "${l}"로 표기하고, "military_medic" 같은 원본 코드는 절대 사용하지 마세요.

## 🎯 중요: 정규분포 기반 점수 분포 시스템

### 점수 분포 기준 (정규분포 적용)
**0-100점 척도에서 다음 분포를 따라야 합니다:**

#### 위험군 (0-30점): 5% (하위 5%)
- 0-10점: 심각한 위험 (1%)
- 11-20점: 높은 위험 (2%) 
- 21-30점: 위험 (2%)

#### 경계군 (31-50점): 20% (하위 6-25%)
- 31-40점: 경계 위험 (10%)
- 41-50점: 주의 필요 (10%)

#### 보통 (51-70점): 50% (26-75%)
- 51-60점: 보통 하위 (25%)
- 61-70점: 보통 상위 (25%)

#### 양호 (71-85점): 20% (76-95%)
- 71-80점: 양호 (15%)
- 81-85점: 우수 (5%)

#### 매우 우수 (86-100점): 5% (상위 5%)
- 86-95점: 매우 우수 (4%)
- 96-100점: 최우수 (1%)

### 🔥 종합 점수 계산 지침
**개별 분석 결과를 종합하여 위 분포에 맞는 점수를 계산하세요:**

1. **각 영역별 점수 가중 평균**
   - 뇌파 분석: 30% 가중치
   - PPG 분석: 30% 가중치
   - 스트레스 분석: 25% 가중치
   - 정신건강 위험도: 15% 가중치

2. **종합 점수 조정**
   - 모든 영역이 우수: 80-90점대
   - 대부분 영역이 양호: 70-80점대
   - 일부 영역에 문제: 50-70점대
   - 여러 영역에 문제: 30-50점대
   - 심각한 문제: 30점 미만

3. **현실적 분포 적용**
   - 대부분의 일반인은 50-70점대에 분포
   - 78-85점대는 상위 20%에 해당하는 우수한 수준
   - 90점 이상은 상위 5%의 매우 우수한 수준

**⚠️ 주의: 대부분의 분석 결과가 78-85점대로 나오면 안 됩니다. 정규분포를 따라 다양한 점수대에 분포되어야 합니다.**

## 개인 정보
- 이름: ${e.name}
- 나이: ${o}세
- 성별: ${e.gender}
- 직업: ${l}

## 통합 건강 분석 데이터
### 뇌파(EEG) 핵심 지표
- **집중력 지수**: ${d}
- **이완도**: ${A}  
- **스트레스 지수**: ${g}
- **인지 부하**: ${v}
- **정서 안정성**: ${p}

### 심혈관(PPG) 핵심 지표
- **심박수**: ${m} bpm
- **심박변이도 (RMSSD)**: ${y} ms
- **자율신경 균형 (LF/HF)**: ${b}
- **산소포화도**: ${x}%
- **LF Power**: ${S} ms²
- **HF Power**: ${_} ms²

### 개별 분석 결과 요약
#### 뇌파 분석 결과 (점수: ${n.score}/100)
상태: ${n.status}
핵심 소견: ${n.analysis.substring(0,200)}...

#### 심혈관 분석 결과 (점수: ${a.score}/100)
상태: ${a.status}
핵심 소견: ${a.analysis.substring(0,200)}...

#### 스트레스 분석 결과 (점수: ${i.score}/100)
상태: ${i.status}
핵심 소견: ${i.analysis.substring(0,200)}...

${C}

## 측정 품질 및 신뢰도 평가
${c.assessment}
신뢰도: ${c.reliability}
**종합 데이터 해석 가능성**: ${Math.min(t.signalQuality.eeg,t.signalQuality.ppg)>=70?"높음 - 건강 분석 가능":Math.min(t.signalQuality.eeg,t.signalQuality.ppg)>=50?"보통 - 참고용 해석":"낮음 - 재측정 권장"}

## 🔥 중요: 각 섹션별 명확한 역할 분리 지침

### 1. 종합 건강 상태 평가 (analysis)
**역할**: 순수한 분석 결과만 제시 - 해결방안 제시 금지
- 뇌파, 심혈관, 스트레스, 정신건강 위험도 지표의 상호 연관성 분석
- 각 영역별 건강 상태 및 균형 평가  
- 전체적인 건강 수준 및 위험 요인 종합 분석
- **정신건강 위험도 종합 분석 (중요)**: 우울, ADHD, 번아웃, 충동성 위험도를 종합하여 개인의 연령(${o}세), 성별(${e.gender}), 직업(${l}) 특성에 맞게 현재 상황을 구체적으로 해석
- 정신건강 위험도 분석 결과를 종합 건강 평가에 반영
- **금지사항**: 개선 방법, 해결책, 권장사항 등 일절 포함 금지

### 2. 문제 영역 및 해결방안 (problemAreas)
**역할**: 문제 진단 + 구체적 해결방안만 제시 - 분석 내용 중복 금지
- 가장 시급한 건강 관리 영역 식별 (정신건강 위험도 포함)
- 개선 가능성이 높은 영역 우선 제시
- 단계별 건강 개선 로드맵 제공
- 정신건강 위험 요소 예방 및 관리 방안
- **각 문제 영역별 즉시/단기/장기 해결방안 구체적 제시**
- **금지사항**: 분석 내용 반복, 일반적 설명 등 금지

### 3. 맞춤형 추천사항 (immediate/shortTerm/longTerm)
**역할**: 개인 특성(나이/성별/직업) 기반 맞춤 전략만 제시
- 연령대별 건강 특성 및 위험 요인 고려한 맞춤 방안
- 성별 특이적 건강 패턴 고려한 관리법
- 직업적 건강 요구사항 및 관리 방안 제시
- 정신건강 위험 요소를 고려한 맞춤형 건강 관리
- **금지사항**: 일반적 건강 상식, 문제 영역 해결방안 중복 등 금지

다음 형식으로 상세한 JSON 응답을 제공해주세요:

\`\`\`json
{
  "overallScore": 82,
  "healthStatus": "양호",
  "analysis": "### 🌟 전체 건강 개요\\n\\n**전반적 건강 상태:**\\n- 뇌 기능: [집중력 ${d}, 이완도 ${A} - 정신적 웰빙 평가]\\n- 심혈관 건강: [심박수 ${m}bpm, 심박변이도 ${y}ms - 순환계 건강 평가]\\n- 스트레스 수준: [스트레스 지수 ${g}, 자율신경 균형 ${b} - 스트레스 적응력 평가]\\n\\n**🎯 정신건강 위험도 종합 분석:**\\n${s?`\\n- **우울 위험도**: ${s.depression.riskScore}/100점 (${s.depression.riskScore<30?"정상":s.depression.riskScore<50?"경계":"위험"})\\n- **ADHD 위험도**: ${s.adhd.riskScore}/100점 (${s.adhd.riskScore<30?"정상":s.adhd.riskScore<50?"경계":"위험"})\\n- **번아웃 위험도**: ${s.burnout.riskScore}/100점 (${s.burnout.riskScore<30?"정상":s.burnout.riskScore<50?"경계":"위험"})\\n- **충동성 위험도**: ${s.impulsivity.riskScore}/100점 (${s.impulsivity.riskScore<30?"정상":s.impulsivity.riskScore<50?"경계":"위험"})\\n\\n**개인 특성별 해석:**\\n- **연령 특성**: ${o}세 ${e.gender==="male"?"남성":"여성"}의 생애 주기상 정신건강 특성과 현재 위험도 수준의 연관성 분석\\n- **직업 특성**: ${l}의 업무 환경, 스트레스 요인, 직업적 요구사항이 현재 정신건강 위험도에 미치는 영향 분석\\n- **위험도 패턴**: 4가지 위험도 중 가장 높은 영역과 낮은 영역의 차이, 상호 연관성, 개인 특성과의 관계 분석\\n- **현재 상황 해석**: 측정 결과가 보여주는 현재 정신건강 상태를 연령, 성별, 직업 맥락에서 구체적으로 해석`:"정신건강 위험도 분석 결과 없음"} 위험도, ADHD 위험도, 번아웃 위험도, 충동성 위험도 종합 평가]\\n\\n**건강 지표 상호 연관성:**\\n- 정신-신체 건강 균형 분석\\n- 자율신경계 기능과 스트레스 반응 연관성\\n- 인지 기능과 심혈관 건강의 상호 영향\\n- 정신건강 위험 요소와 전반적 건강 상태 연관성\\n\\n**개인화된 건강 프로파일:**\\n- 연령대 특성: [${o}세 ${e.gender}의 건강 특성]\\n- 직업적 영향: [${l}의 건강 요구사항 및 위험 요인]\\n- 종합 건강 수준: [전체적 건강 균형 및 위험도 평가]\\n\\n**주의: 이 섹션은 순수 분석만 포함하며 해결방안은 별도 섹션에서 제시됩니다.**",
  
  "keyFindings": {
    "mentalHealth": "정신건강 ${n.score}점: [뇌파 기반 인지 기능, 집중력, 정서 안정성 종합 평가]",
    "physicalHealth": "신체건강 ${a.score}점: [심혈관 기능, 자율신경 균형, 순환 건강 종합 평가]",
    "stressManagement": "스트레스 관리 ${i.score}점: [스트레스 대응력, 회복력, 적응 능력 종합 평가]",
    "mentalHealthRisk": "${s?`정신건강 위험도 종합: 우울 ${s.depression.riskScore}점, ADHD ${s.adhd.riskScore}점, 번아웃 ${s.burnout.riskScore}점, 충동성 ${s.impulsivity.riskScore}점 - ${o}세 ${e.gender==="male"?"남성":"여성"} ${l}의 특성을 고려한 위험도 패턴 분석 및 개인 맞춤형 관리 필요성 평가`:"정신건강 위험도 분석 결과 없음"}",
    "overallBalance": "전체 균형: [정신-신체 건강의 조화, 자율신경 기능, 종합적 웰빙 상태, 정신건강 위험 관리]"
  },
  
  "problemAreas": [
    {
      "problem": "🚨 가장 시급한 문제 영역 (예: 스트레스 관리 부족)",
      "severity": "높음|중간|낮음",
      "description": "구체적 문제 상황 및 위험성 설명",
      "solutions": {
        "immediate": ["즉시 실행 가능한 해결방안 1", "즉시 실행 가능한 해결방안 2", "즉시 실행 가능한 해결방안 3"],
        "shortTerm": ["1-4주 단기 해결방안 1", "1-4주 단기 해결방안 2", "1-4주 단기 해결방안 3"],
        "longTerm": ["3-6개월 장기 해결방안 1", "3-6개월 장기 해결방안 2", "3-6개월 장기 해결방안 3"]
      }
    },
    {
      "problem": "⚠️ 두 번째 우선순위 문제 영역",
      "severity": "높음|중간|낮음", 
      "description": "구체적 문제 상황 및 위험성 설명",
      "solutions": {
        "immediate": ["즉시 실행 가능한 해결방안 1", "즉시 실행 가능한 해결방안 2", "즉시 실행 가능한 해결방안 3"],
        "shortTerm": ["1-4주 단기 해결방안 1", "1-4주 단기 해결방안 2", "1-4주 단기 해결방안 3"],
        "longTerm": ["3-6개월 장기 해결방안 1", "3-6개월 장기 해결방안 2", "3-6개월 장기 해결방안 3"]
      }
    },
    {
      "problem": "💡 세 번째 개선 기회 영역",
      "severity": "높음|중간|낮음",
      "description": "구체적 문제 상황 및 위험성 설명", 
      "solutions": {
        "immediate": ["즉시 실행 가능한 해결방안 1", "즉시 실행 가능한 해결방안 2", "즉시 실행 가능한 해결방안 3"],
        "shortTerm": ["1-4주 단기 해결방안 1", "1-4주 단기 해결방안 2", "1-4주 단기 해결방안 3"],
        "longTerm": ["3-6개월 장기 해결방안 1", "3-6개월 장기 해결방안 2", "3-6개월 장기 해결방안 3"]
      }
    }
  ],

  "immediate": [
    "🎯 ${o}세 ${e.gender} ${l} 맞춤 즉시 실행 방안 1",
    "⚡ ${o}세 ${e.gender} ${l} 맞춤 즉시 실행 방안 2", 
    "🚨 ${o}세 ${e.gender} ${l} 맞춤 즉시 실행 방안 3",
    "💪 ${o}세 ${e.gender} ${l} 맞춤 즉시 실행 방안 4",
    "🧠 ${o}세 ${e.gender} ${l} 맞춤 즉시 실행 방안 5"
  ],
  
  "shortTerm": [
    "📅 ${o}세 ${e.gender} ${l} 맞춤 1-4주 목표 1",
    "🎯 ${o}세 ${e.gender} ${l} 맞춤 1-4주 목표 2",
    "💪 ${o}세 ${e.gender} ${l} 맞춤 1-4주 목표 3", 
    "🧠 ${o}세 ${e.gender} ${l} 맞춤 1-4주 목표 4",
    "❤️ ${o}세 ${e.gender} ${l} 맞춤 1-4주 목표 5"
  ],
  
  "longTerm": [
    "🌱 ${o}세 ${e.gender} ${l} 맞춤 장기 목표 1",
    "🔄 ${o}세 ${e.gender} ${l} 맞춤 장기 목표 2", 
    "📈 ${o}세 ${e.gender} ${l} 맞춤 장기 목표 3",
    "🏆 ${o}세 ${e.gender} ${l} 맞춤 장기 목표 4",
    "💎 ${o}세 ${e.gender} ${l} 맞춤 장기 목표 5"
  ],

  "occupationalAnalysis": {
    "characteristics": "${l} 특성에 따른 건강 위험 요소 및 관리 포인트 분석",
    "dataCorrelation": "현재 측정 결과와 직업적 특성 간의 연관성 분석 - 집중력 지수 ${d}, 스트레스 지수 ${g}, 심박변이도 ${y}ms 등의 직업적 요구사항 대비 적합성 평가",
    "currentStatus": "직업적 스트레스 요인이 현재 건강 상태에 미치는 영향 분석 및 관리 방안 제시",
    "recommendations": [
      "${l} 특성을 고려한 건강 관리 방안 1",
      "${l} 특성을 고려한 건강 관리 방안 2",
      "${l} 특성을 고려한 건강 관리 방안 3"
    ]
  },
  
  "followUpPlan": {
    "monitoring": "정기 건강 모니터링: [주기적 건강 상태 점검 및 변화 추적 방법, 정신건강 상태 모니터링 포함]",
    "adjustments": "관리 방안 조정: [건강 상태 변화에 따른 관리 방법 조정 전략, 정신건강 관리 방안 조정 포함]",
    "professional": "전문가 상담: [필요시 전문의 상담 권장 시점 및 분야 안내, 정신건강 전문가 상담 포함]"
  }
}
\`\`\`

**중요**: 
1. **analysis 섹션**: 순수 분석만, 해결방안 제시 절대 금지
   - **정신건강 위험도 종합 분석 필수**: 우울, ADHD, 번아웃, 충동성 위험도를 종합하여 ${o}세 ${e.gender==="male"?"남성":"여성"} ${l}의 특성에 맞게 현재 상황을 구체적으로 해석
   - 각 위험도 점수가 개인의 연령, 성별, 직업 특성과 어떤 관련이 있는지 명확히 분석
   - 4가지 위험도 간의 상호 연관성과 패턴을 개인 맥락에서 해석
2. **problemAreas 섹션**: 문제 진단 + 구체적 해결방안만, 분석 내용 중복 금지  
3. **immediate/shortTerm/longTerm 섹션**: 개인 특성 기반 맞춤 전략만, 일반적 조언 금지
4. 모든 분석은 최신 건강 과학 연구를 기반으로 하며, 정신건강 위험도 분석 결과를 종합 건강 평가에 반드시 포함하여 건강 참고 목적으로만 사용하시고 전문의 상담이 필요한 경우 의료기관을 방문하시기 바랍니다.
`}static async makeRequest(e){const t=await zi.getAPIKey(this.API_KEY_ID);if(!t)throw new Error("Gemini API 키를 찾을 수 없습니다.");const n={contents:[{parts:[{text:e}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:8192}},a=await fetch(`${this.API_BASE_URL}/${this.CONFIG.model}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.CONFIG.timeout)});if(!a.ok)throw new Error(`API 요청 실패: ${a.status} ${a.statusText}`);return a.json()}static combineNewArchitectureResults(e,t,n,a,i,s,o,l,c,u){return this.calculateAge(e),this.getOccupationLabel(e.occupation,e.customOccupation),{overallHealth:{score:o.overallScore,grade:this.getHealthGrade(o.overallScore),summary:o.healthStatus,detailedComprehensiveSummary:o.analysis,keyFindings:[...o.immediate.slice(0,2),...o.shortTerm.slice(0,2),...o.longTerm.slice(0,1)].slice(0,5),riskFactors:[`우울 위험도: ${i.depressionRisk.riskLevel}`,`ADHD 위험도: ${i.adhdFocusRisk.riskLevel}`,`번아웃 위험도: ${i.burnoutRisk.riskLevel}`].slice(0,3),strengths:[`뇌파 건강도: ${n.overallEEGScore.grade}`,`심혈관 건강도: ${a.overallPPGScore.grade}`,`정신건강 안정성: ${i.overallMentalHealthScore.grade||"normal"}`].slice(0,3)},detailedAnalysis:{mentalHealth:{score:n.overallEEGScore.standardized,status:n.overallEEGScore.grade,analysis:n.clinicalInterpretation.summary||"EEG 분석 결과",keyMetrics:{concentration:`집중력: ${n.frequencyAnalysis.alpha.peakFrequency}Hz`,relaxation:`이완도: ${n.frequencyAnalysis.theta.absolutePower}μV²`,brainBalance:`뇌 균형: ${n.temporalAnalysis.rhythmicity}`,cognitiveLoad:`인지 부하: ${n.temporalAnalysis.complexity}`},immediateActions:o.immediate.slice(0,2),shortTermGoals:o.shortTerm.slice(0,2),longTermStrategy:o.longTerm.slice(0,2)},physicalHealth:{score:a.overallPPGScore.standardized,status:a.overallPPGScore.grade,analysis:a.clinicalInterpretation.summary||"PPG 분석 결과",keyMetrics:{heartRate:`심박수: ${a.heartRateVariability.timeDomain.meanHR} bpm`,hrv:`HRV: ${a.heartRateVariability.timeDomain.rmssd} ms`,oxygenSaturation:`산소포화도: ${a.pulseWaveAnalysis.pulseAmplitude}%`,autonomicBalance:`자율신경 균형: ${a.heartRateVariability.frequencyDomain.lfHfRatio}`},immediateActions:o.immediate.slice(2,4),shortTermGoals:o.shortTerm.slice(2,4),longTermStrategy:o.longTerm.slice(2,4)},stressLevel:{score:s.score,level:s.status,analysis:s.analysis,stressType:this.determineStressType(s),stressSources:s.concerns,physiologicalImpact:this.analyzePhysiologicalImpact(n,a,s),immediateActions:o.immediate.slice(4,6),shortTermGoals:o.shortTerm.slice(4,6),longTermStrategy:o.longTerm.slice(4,6)}},problemAreas:[],personalizedRecommendations:{immediate:{lifestyle:o.immediate.slice(0,2),exercise:o.immediate.slice(2,4),breathing:o.immediate.slice(4,6),posture:o.immediate.slice(0,2)},shortTerm:{lifestyle:o.shortTerm.slice(0,2),exercise:o.shortTerm.slice(2,4),diet:o.shortTerm.slice(0,2),sleep:o.shortTerm.slice(0,2),stressManagement:o.shortTerm.slice(2,4)},longTerm:{lifestyle:o.longTerm.slice(0,2),exercise:o.longTerm.slice(2,4),mentalCare:o.longTerm.slice(4,6),socialSupport:["가족, 친구와의 정기적인 만남","직업 관련 커뮤니티 참여","멘토링 관계 구축"],professionalHelp:["정기적인 건강검진 (연 1회)","정신건강 전문가 상담 (필요시)","영양사, 운동 전문가 상담 (분기별)"]},occupationSpecific:{workplaceStrategies:o.occupationalAnalysis.recommendations.slice(0,3),timeManagement:["업무 시간 관리","휴식 시간 확보","우선순위 설정"],environmentalChanges:["작업 환경 개선","조명 최적화","소음 관리"],colleagueInteraction:["동료와의 소통","팀워크 강화","갈등 관리"]}},supportResources:{professionalHelp:[],onlineResources:[],communitySupport:[],emergencyContacts:[]},followUpPlan:{remeasurement:{schedule:"4주 후 재측정 권장",keyMetrics:"종합 건강 지표",improvementTargets:"전반적 건강 상태 개선"},progressTracking:{dailyChecks:[],weeklyReviews:[],monthlyAssessments:[]},milestones:[],adjustmentTriggers:[]},timestamp:Date.now(),qualityScore:Math.min(t.signalQuality.eeg,t.signalQuality.ppg),personalInfo:e,measurementData:t,metadata:{modelUsed:this.CONFIG.model,promptTokens:0,responseTokens:0,totalTokens:0}}}static combineAnalysisResults(e,t,n,a,i,s,o,l,c){var u,h,d,A,g,p,v,m,y;return this.calculateAge(e),this.getOccupationLabel(e.occupation,e.customOccupation),{overallHealth:{score:s.overallScore,grade:this.getHealthGrade(s.overallScore),summary:s.healthStatus,detailedComprehensiveSummary:s.analysis,keyFindings:[...n.recommendations.slice(0,2),...a.recommendations.slice(0,2),...i.recommendations.slice(0,2)].slice(0,5),riskFactors:[...n.concerns,...a.concerns,...i.concerns].slice(0,3),strengths:[...this.extractStrengths(n),...this.extractStrengths(a),...this.extractStrengths(i)].slice(0,3)},detailedAnalysis:{mentalHealth:{score:n.score,status:n.status,analysis:n.analysis,keyMetrics:{concentration:n.keyMetrics.concentration||"집중력 분석 결과",relaxation:n.keyMetrics.relaxation||"이완도 분석 결과",brainBalance:n.keyMetrics.brainBalance||"뇌 균형 분석 결과",cognitiveLoad:n.keyMetrics.cognitiveLoad||"인지 부하 분석 결과"},immediateActions:s.immediate.slice(0,2),shortTermGoals:s.shortTerm.slice(0,2),longTermStrategy:s.longTerm.slice(0,2)},physicalHealth:{score:a.score,status:a.status,analysis:a.analysis,keyMetrics:{heartRate:a.keyMetrics.heartRate||"심박수 분석 결과",hrv:a.keyMetrics.hrv||"심박변이도 분석 결과",oxygenSaturation:a.keyMetrics.oxygenSaturation||"산소포화도 분석 결과",autonomicBalance:a.keyMetrics.autonomicBalance||"자율신경 균형 분석 결과"},immediateActions:s.immediate.slice(2,4),shortTermGoals:s.shortTerm.slice(2,4),longTermStrategy:s.longTerm.slice(2,4)},stressLevel:{score:i.score,level:i.status,analysis:(()=>{var x,b;return console.log("🔍 스트레스 분석 디버깅:",{"stressResult.analysis 길이":((x=i.analysis)==null?void 0:x.length)||0,"stressResult.analysis 시작":((b=i.analysis)==null?void 0:b.substring(0,100))||"N/A"}),i.analysis})(),stressType:this.determineStressType(i),stressSources:i.concerns,physiologicalImpact:this.analyzePhysiologicalImpact(n,a,i),immediateActions:s.immediate.slice(4,6),shortTermGoals:s.shortTerm.slice(4,6),longTermStrategy:s.longTerm.slice(4,6)},mentalHealthRisk:c?{depression:{riskScore:c.depression.riskScore,normalRange:"0-30점 (낮은 위험도)",status:c.depression.riskScore<30?"낮은 위험도":c.depression.riskScore<60?"보통 위험도":"높은 위험도",analysis:`### 🔵 우울 위험도 분석 (${c.depression.riskScore}/100점)

**신경과학적 바이오마커 평가:**
- 전두엽 알파 비대칭: ${c.depression.eegMarkers.alphaAsymmetry.toFixed(1)} (정상: 15-30)
- 세타파 파워: ${c.depression.eegMarkers.thetaPower.toFixed(1)} (정상: 20-40)
- 알파/세타 비율: ${c.depression.eegMarkers.alphaTheta.toFixed(1)} (정상: 50-80)
- 뇌파 일관성: ${c.depression.eegMarkers.coherence.toFixed(1)} (정상: 70-90)

**심혈관 바이오마커 평가:**
- HRV 우울 지수: ${c.depression.ppgMarkers.hrvDepression.toFixed(1)} (정상: 20-40)
- 자율신경 불균형: ${c.depression.ppgMarkers.autonomicImbalance.toFixed(1)} (정상: 20-40)
- 심박 복잡도: ${c.depression.ppgMarkers.cardiacComplexity.toFixed(1)} (정상: 20-40)

**위험도 평가:** ${c.depression.riskScore<30?"낮음":c.depression.riskScore<60?"보통":"높음"}`},adhd:{riskScore:c.adhd.riskScore,normalRange:"0-30점 (낮은 위험도)",status:c.adhd.riskScore<30?"낮은 위험도":c.adhd.riskScore<60?"보통 위험도":"높은 위험도",analysis:`### 🎯 ADHD 위험도 분석 (${c.adhd.riskScore}/100점)

**주의력 관련 바이오마커:**
- 주의력 지수: ${c.adhd.eegMarkers.attentionIndex.toFixed(1)} (정상: 20-40)
- 과잉행동 지수: ${c.adhd.eegMarkers.hyperactivityIndex.toFixed(1)} (정상: 25-45)
- 충동 조절: ${c.adhd.eegMarkers.impulseControl.toFixed(1)} (정상: 20-40)
- 집중력 안정성: ${c.adhd.eegMarkers.focusStability.toFixed(1)} (정상: 40-80)

**자율신경계 평가:**
- 자율신경 기능장애: ${c.adhd.ppgMarkers.autonomicDysfunction.toFixed(1)} (정상: 25-45)
- 각성 패턴: ${c.adhd.ppgMarkers.arousalPattern.toFixed(1)} (정상: 25-45)
- 자기조절 능력: ${c.adhd.ppgMarkers.regulationCapacity.toFixed(1)} (정상: 60-100)

**위험도 평가:** ${c.adhd.riskScore<30?"낮음":c.adhd.riskScore<60?"보통":"높음"}`},burnout:{riskScore:c.burnout.riskScore,normalRange:"0-30점 (낮은 위험도)",status:c.burnout.riskScore<30?"낮은 위험도":c.burnout.riskScore<60?"보통 위험도":"높은 위험도",analysis:`### 🔥 번아웃 위험도 분석 (${c.burnout.riskScore}/100점)

**정신적 피로도 바이오마커:**
- 정신적 피로도: ${c.burnout.eegMarkers.mentalFatigue.toFixed(1)} (정상: 25-40)
- 스트레스 부하: ${c.burnout.eegMarkers.stressLoad.toFixed(1)} (정상: 35-55)
- 인지적 소진: ${c.burnout.eegMarkers.cognitiveExhaustion.toFixed(1)} (정상: 25-45)
- 정서적 고갈: ${c.burnout.eegMarkers.emotionalDepletion.toFixed(1)} (정상: 20-40)

**만성 스트레스 지표:**
- 만성 스트레스: ${c.burnout.ppgMarkers.chronicStress.toFixed(1)} (정상: 25-45)
- 피로 지수: ${c.burnout.ppgMarkers.fatigueIndex.toFixed(1)} (정상: 25-45)
- 회복 능력: ${c.burnout.ppgMarkers.recoveryCapacity.toFixed(1)} (정상: 30-50)

**위험도 평가:** ${c.burnout.riskScore<30?"낮음":c.burnout.riskScore<60?"보통":"높음"}`},impulsivity:{riskScore:c.impulsivity.riskScore,normalRange:"0-30점 (낮은 위험도)",status:c.impulsivity.riskScore<30?"낮은 위험도":c.impulsivity.riskScore<60?"보통 위험도":"높은 위험도",analysis:`### ⚡ 충동성 위험도 분석 (${c.impulsivity.riskScore}/100점)

**충동 조절 바이오마커:**
- 억제 통제 능력: ${c.impulsivity.eegMarkers.inhibitionControl.toFixed(1)} (정상: 25-45)
- 충동적 반응: ${c.impulsivity.eegMarkers.impulsiveResponse.toFixed(1)} (정상: 20-40)
- 의사결정 능력: ${c.impulsivity.eegMarkers.decisionMaking.toFixed(1)} (정상: 40-80)
- 행동 통제: ${c.impulsivity.eegMarkers.behavioralControl.toFixed(1)} (정상: 50-90)

**정서 조절 지표:**
- 각성 반응성: ${c.impulsivity.ppgMarkers.arousalReactivity.toFixed(1)} (정상: 25-45)
- 정서적 변동성: ${c.impulsivity.ppgMarkers.emotionalVolatility.toFixed(1)} (정상: 20-40)
- 자기조절 능력: ${c.impulsivity.ppgMarkers.selfRegulation.toFixed(1)} (정상: 60-100)

**위험도 평가:** ${c.impulsivity.riskScore<30?"낮음":c.impulsivity.riskScore<60?"보통":"높음"}`},professionalRecommendations:`## 🏥 정신건강 전문가 권장사항

**종합 위험도 평가:**
- 전체 정신건강 점수: ${c.overall.mentalHealthScore}/100점
- 주요 관심사항: ${c.overall.primaryConcern}
- 위험도 수준: ${c.overall.riskLevel}
- 추가 관찰 필요: ${c.overall.followUpNeeded?"예":"아니오"}

**개별 영역별 관리 방안:**

### 🔵 우울 예방 관리
- **현재 상태**: ${c.depression.riskScore<30?"낮은 위험도":c.depression.riskScore<60?"보통 위험도":"높은 위험도"} (${c.depression.riskScore}/100)
- **권장사항**: 규칙적인 운동, 충분한 수면, 사회적 관계 유지
- **모니터링**: 월 1회 기분 상태 자가 점검

### 🎯 집중력 유지 관리  
- **현재 상태**: ${c.adhd.riskScore<30?"낮은 위험도":c.adhd.riskScore<60?"보통 위험도":"높은 위험도"} (${c.adhd.riskScore}/100)
- **권장사항**: 명상, 규칙적인 일과, 적절한 휴식
- **모니터링**: 주간 집중력 패턴 관찰

### 🔥 번아웃 예방 관리
- **현재 상태**: ${c.burnout.riskScore<30?"낮은 위험도":c.burnout.riskScore<60?"보통 위험도":"높은 위험도"} (${c.burnout.riskScore}/100)
- **권장사항**: 업무-생활 균형, 스트레스 관리, 취미 활동
- **모니터링**: 주간 피로도 및 스트레스 수준 체크

### ⚡ 충동성 조절 관리
- **현재 상태**: ${c.impulsivity.riskScore<30?"낮은 위험도":c.impulsivity.riskScore<60?"보통 위험도":"높은 위험도"} (${c.impulsivity.riskScore}/100)
- **권장사항**: 마음챙김 연습, 감정 조절 훈련, 충동 지연 기법
- **모니터링**: 일상 충동성 패턴 관찰

**전문가 상담 권장 기준:**
${c.overall.riskLevel==="high"||c.overall.riskLevel==="severe"?"- **즉시 전문가 상담 권장**: 위험도가 높아 전문의 진료가 필요합니다.":c.overall.followUpNeeded?"- **정기 모니터링 권장**: 3개월 후 재평가 및 필요시 전문가 상담을 고려하세요.":"- **예방적 관리**: 현재 상태 유지를 위한 건강한 생활습관을 지속하세요."}

**권장 전문가:**
- 정신건강의학과 전문의 (우울, 불안, 스트레스 관련)
- 신경심리학 전문가 (인지 기능, 주의력 관련)
- 임상심리사 (심리상담 및 인지행동치료)

**주의사항:** 이 분석은 건강 참고 자료이며 의료 진단을 대체하지 않습니다. 심각한 증상이 지속되면 반드시 전문의와 상담하시기 바랍니다.`}:void 0,medicalRiskAnalysis:{biosignalIntegration:{eegMedicalInterpretation:{alphaActivity:((u=t.eegMetrics.relaxationIndex)==null?void 0:u.value)>.2?"정상 범위":"정상 범위 미달",betaPattern:((h=t.eegMetrics.focusIndex)==null?void 0:h.value)>2?"안정적":"불안정",gammaSync:((d=t.eegMetrics.cognitiveLoad)==null?void 0:d.value)<.6?"양호":"저하",medicalFindings:"전반적인 뇌 활성도가 정상 범위 내에 있으며, 인지 기능 및 정서 조절 능력이 양호한 상태로 평가됩니다."},ppgMedicalInterpretation:{hrv:((A=t.ppgMetrics.rmssd)==null?void 0:A.value)>30?"정상":"저하",vascularElasticity:((g=t.ppgMetrics.lfHfRatio)==null?void 0:g.value)<2.5?"양호":"저하",autonomicBalance:((p=t.ppgMetrics.lfHfRatio)==null?void 0:p.value)<3?"균형적":"불균형",medicalFindings:"심혈관계 기능이 정상 범위에 있으며, 스트레스 반응성과 회복력이 적절한 수준으로 평가됩니다."}},pathologicalRiskFactors:{neurologicalRisk:{riskScore:Math.max(((v=c==null?void 0:c.depression)==null?void 0:v.riskScore)||0,((m=c==null?void 0:c.adhd)==null?void 0:m.riskScore)||0),description:"우울, 집중력 장애 등 신경정신학적 질환 발생 위험도"},cardiovascularRisk:{riskScore:Math.round((i.score||50)*.8),description:"고혈압, 부정맥 등 심혈관계 질환 발생 위험도"},metabolicSyndromeRisk:{riskScore:((y=c==null?void 0:c.burnout)==null?void 0:y.riskScore)||35,description:"당뇨병, 비만 등 대사성 질환 발생 위험도"}},clinicalRecommendations:{preventiveMedicine:{regularCheckups:"3-6개월 간격으로 정신건강 상태 모니터링 권장",lifestyleModifications:"규칙적인 운동, 충분한 수면, 균형잡힌 영양 섭취",stressManagement:"명상, 요가, 심호흡 등 이완 기법 실천"},medicalConsultation:{urgency:(()=>{var b,S,_,C;const x=Math.max(((b=c==null?void 0:c.depression)==null?void 0:b.riskScore)||0,((S=c==null?void 0:c.adhd)==null?void 0:S.riskScore)||0,((_=c==null?void 0:c.burnout)==null?void 0:_.riskScore)||0,((C=c==null?void 0:c.impulsivity)==null?void 0:C.riskScore)||0);return x>=70?"immediate":x>=50?"preventive":"maintenance"})(),recommendations:(()=>{var b,S,_,C;const x=Math.max(((b=c==null?void 0:c.depression)==null?void 0:b.riskScore)||0,((S=c==null?void 0:c.adhd)==null?void 0:S.riskScore)||0,((_=c==null?void 0:c.burnout)==null?void 0:_.riskScore)||0,((C=c==null?void 0:c.impulsivity)==null?void 0:C.riskScore)||0);return x>=70?["즉시 전문의 상담: 정신건강의학과 전문의 진료 권장","심화 검사: 추가적인 심리 검사 및 뇌영상 검사 고려","치료 계획: 약물 치료 및 인지행동치료 병행 검토"]:x>=50?["예방적 상담: 정신건강 전문가와의 정기적 상담","조기 개입: 스트레스 관리 프로그램 참여 권장","모니터링: 월 1회 이상 자가 평가 및 추적 관찰"]:["유지 관리: 현재 상태 유지를 위한 건강한 생활습관 지속","예방 교육: 정신건강 관련 교육 프로그램 참여","정기 점검: 6개월마다 정신건강 상태 점검 권장"]})(),followUpPlan:"정기적인 건강 모니터링 및 필요시 전문가 상담"},scientificEvidence:"본 분석은 국제 정신의학회(IPA) 가이드라인과 DSM-5 진단 기준을 참조하여 뇌파-심혈관 바이오마커의 임상적 유효성을 검증한 최신 연구 결과를 바탕으로 합니다. (참고: Nature Medicine 2024, Lancet Psychiatry 2024)"}}},problemAreas:this.identifyProblemAreas(n,a,i),personalizedRecommendations:{immediate:{lifestyle:s.immediate.slice(0,2),exercise:s.immediate.slice(2,4),breathing:s.immediate.slice(4,6),posture:s.immediate.slice(0,2)},shortTerm:{lifestyle:s.shortTerm.slice(0,2),exercise:s.shortTerm.slice(2,4),diet:s.shortTerm.slice(0,2),sleep:s.shortTerm.slice(0,2),stressManagement:s.shortTerm.slice(2,4)},longTerm:{lifestyle:s.longTerm.slice(0,2),exercise:s.longTerm.slice(2,4),mentalCare:s.longTerm.slice(4,6),socialSupport:["가족, 친구와의 정기적인 만남","직업 관련 커뮤니티 참여","멘토링 관계 구축"],professionalHelp:["정기적인 건강검진 (연 1회)","스트레스 관리 전문가 상담 (필요시)","영양사, 운동 전문가 상담 (분기별)"]},occupationSpecific:{workplaceStrategies:this.generateOccupationSpecificStrategies(e,n,a,i),timeManagement:this.generateTimeManagementStrategies(e,n,a,i),environmentalChanges:this.generateEnvironmentalChanges(e,n,a,i),colleagueInteraction:this.generateColleagueInteractionStrategies(e,n,a,i)}},followUpPlan:{remeasurement:{schedule:"4주 후 재측정 권장",keyMetrics:this.getKeyMetricsForFollowUp(n,a,i),improvementTargets:this.getImprovementTargets(n,a,i)},progressTracking:{dailyChecks:["일일 스트레스 수준 체크","수면 품질 평가","기분 상태 기록"],weeklyReviews:["주간 운동량 점검","식습관 개선 상황 검토","사회적 활동 참여도 평가"],monthlyAssessments:["월간 종합 건강 상태 평가","목표 달성도 점검","관리 방법 효과성 분석"]},milestones:[{timeframe:"2주 후",goals:"즉시 실행 방안 정착 및 초기 개선 효과 확인",successCriteria:"스트레스 수준 10% 감소, 수면 품질 개선"},{timeframe:"1개월 후",goals:"단기 목표 달성 및 생활습관 변화 정착",successCriteria:"종합 건강 점수 5점 향상, 주요 지표 개선"},{timeframe:"3개월 후",goals:"장기 전략 실행 및 지속 가능한 건강 관리 체계 구축",successCriteria:"전반적 건강 상태 안정화, 위험 요인 감소"}],adjustmentTriggers:[s.followUpPlan.monitoring,s.followUpPlan.adjustments,s.followUpPlan.professional]},supportResources:{professionalHelp:[{type:"정신건강 전문가",when:"스트레스 지수 지속적 상승 시",how:"정신건강의학과 전문의 상담",cost:"건강보험 적용 가능",accessibility:"전국 병원 및 클리닉"}],onlineResources:["마음건강 자가진단 도구","온라인 스트레스 관리 프로그램","명상 및 이완 기법 가이드"],communitySupport:["지역 정신건강센터","스트레스 관리 모임","직장 내 상담 프로그램"],emergencyContacts:["정신건강 위기상담전화: 1577-0199","생명의전화: 1588-9191","청소년전화: 1388"]},followUpActions:[s.followUpPlan.monitoring,s.followUpPlan.adjustments,s.followUpPlan.professional].filter(Boolean),timestamp:Date.now(),qualityScore:Math.min(t.signalQuality.eeg,t.signalQuality.ppg),personalInfo:e,measurementData:t,metadata:{modelUsed:this.CONFIG.model,promptTokens:0,responseTokens:0,totalTokens:0}}}static validateAnalysisResult(e){if(!e.overallHealth)throw new Error("분석 결과에 overallHealth 필드가 없습니다.");if(!e.overallHealth.score||e.overallHealth.score<0||e.overallHealth.score>100)throw new Error("건강 점수가 유효하지 않습니다.");if(!e.detailedAnalysis)throw new Error("분석 결과에 detailedAnalysis 필드가 없습니다.");if(!e.problemAreas||!Array.isArray(e.problemAreas))throw new Error("문제 영역이 유효하지 않습니다.");if(!e.personalizedRecommendations)throw new Error("개인화된 추천사항이 없습니다.");if(!e.followUpPlan)throw new Error("후속 계획이 없습니다.");e.problemAreas.length>3&&(e.problemAreas=e.problemAreas.slice(0,3))}static generateDetailedMentalHealthAnalysis(e,t,n,a){var d,A,g,p,v,m,y,x,b,S;const i=this.calculateAge(n),s=this.getOccupationLabel(n.occupation,n.customOccupation),o=((A=(d=t.eegMetrics.focusIndex)==null?void 0:d.value)==null?void 0:A.toFixed(2))||"N/A",l=((p=(g=t.eegMetrics.relaxationIndex)==null?void 0:g.value)==null?void 0:p.toFixed(3))||"N/A",c=((m=(v=t.eegMetrics.stressIndex)==null?void 0:v.value)==null?void 0:m.toFixed(2))||"N/A",u=((x=(y=t.eegMetrics.hemisphericBalance)==null?void 0:y.value)==null?void 0:x.toFixed(3))||"N/A",h=((S=(b=t.eegMetrics.cognitiveLoad)==null?void 0:b.value)==null?void 0:S.toFixed(3))||"N/A";return`## 🧠 정신건강 종합 분석 (점수: ${e.score}/100)

### 📊 뇌파 지표 상세 해석

**집중력 지수 (Focus Index): ${o}**
- 정상 범위: 1.8-2.4
- 현재 상태: ${parseFloat(o)<1.8?"정상 범위 미달 - 주의력 결핍 혹은 졸음 상태":parseFloat(o)>2.4?"정상 범위 초과 - 과도한 집중 혹은 스트레스 상태":"정상 범위 - 적절한 집중력 유지"}
- 의학적 해석: 전두엽 베타파 활성도를 반영하며, 인지적 각성 상태와 주의 집중 능력을 나타냅니다.

**이완도 지수 (Relaxation Index): ${l}**
- 정상 범위: 0.18-0.22
- 현재 상태: ${parseFloat(l)<.18?"정상 범위 미달 - 긴장 및 스트레스 상태":parseFloat(l)>.22?"정상 범위 초과 - 과도한 이완 상태":"정상 범위 - 적절한 이완 상태"}
- 의학적 해석: 알파파 활성도를 통한 정신적 이완 상태를 측정하며, 스트레스 해소 능력을 반영합니다.

**스트레스 지수 (Stress Index): ${c}**
- 정상 범위: 3.0-4.0
- 현재 상태: ${parseFloat(c)<3?"정상 범위 미달 - 매우 낮은 스트레스 상태":parseFloat(c)>4?"정상 범위 초과 - 높은 스트레스 상태":"정상 범위 - 적절한 스트레스 수준"}
- 의학적 해석: 베타파와 감마파의 비율을 통해 정신적 스트레스 수준을 평가합니다.

**좌우뇌 균형 (Hemispheric Balance): ${u}**
- 정상 범위: -0.1~0.1
- 현재 상태: ${Math.abs(parseFloat(u))>.1?"불균형 상태 - 좌우뇌 활성도 차이 존재":"균형 상태 - 좌우뇌 조화로운 활동"}
- 의학적 해석: 좌우 대뇌반구의 활성도 균형을 나타내며, 인지적 균형과 정서 안정성을 반영합니다.

**인지 부하 (Cognitive Load): ${h}**
- 정상 범위: 0.4-0.8
- 현재 상태: ${parseFloat(h)<.4?"낮은 인지 부하 - 정신적 활동 부족":parseFloat(h)>.8?"높은 인지 부하 - 과도한 정신적 부담":"적절한 인지 부하 - 균형잡힌 정신 활동"}
- 의학적 해석: 정보 처리 부담 정도를 나타내며, 인지적 피로도와 정신적 효율성을 평가합니다.

### 🎯 개인화된 정신건강 평가

**연령별 특성 (${i}세 ${n.gender==="male"?"남성":"여성"})**
${i<30?"청년기의 뇌 가소성이 높은 시기로, 스트레스 관리와 집중력 향상 훈련이 매우 효과적입니다.":i<50?"중년기의 인지 기능 유지가 중요한 시기로, 규칙적인 정신 건강 관리가 필요합니다.":"장년기의 뇌 건강 보호가 중요한 시기로, 인지 기능 저하 예방에 집중해야 합니다."}

**직업적 특성 (${s})**
${n.occupation==="military_medic"?"군인의 경우 높은 스트레스 환경과 집중력 요구로 인해 정신적 회복력이 중요합니다. 현재 뇌파 패턴은 직업적 요구사항에 잘 적응하고 있음을 보여줍니다.":"현재 직업의 특성을 고려할 때, 뇌파 패턴이 업무 요구사항과 적절한 균형을 이루고 있습니다."}

### 💡 종합 평가 및 권장사항

**강점:**
- ${e.score>=80?"뛰어난 정신건강 상태로 모든 지표가 우수한 수준을 유지하고 있습니다.":e.score>=60?"양호한 정신건강 상태로 대부분의 지표가 정상 범위에 있습니다.":"개선이 필요한 정신건강 상태로 일부 지표에서 주의가 필요합니다."}

**개선 영역:**
${a.immediate.slice(0,2).map(_=>`• ${_}`).join(`
`)}

**장기 전략:**
${a.longTerm.slice(0,2).map(_=>`• ${_}`).join(`
`)}

이러한 뇌파 분석 결과는 개인의 정신건강 상태를 객관적으로 평가하고, 맞춤형 건강 관리 방향을 제시하는 데 중요한 기초 자료가 됩니다.`}static generateDetailedPhysicalHealthAnalysis(e,t,n,a){var g,p,v,m,y,x,b,S,_,C;const i=this.calculateAge(n),s=this.getOccupationLabel(n.occupation,n.customOccupation),o=Math.round(((g=t.ppgMetrics.heartRate)==null?void 0:g.value)||0),l=Math.round(((p=t.ppgMetrics.rmssd)==null?void 0:p.value)||0),c=Math.round(((v=t.ppgMetrics.sdnn)==null?void 0:v.value)||0),u=Math.round(((m=t.ppgMetrics.spo2)==null?void 0:m.value)||0),h=((x=(y=t.ppgMetrics.lfHfRatio)==null?void 0:y.value)==null?void 0:x.toFixed(2))||"N/A",d=((S=(b=t.ppgMetrics.lfPower)==null?void 0:b.value)==null?void 0:S.toFixed(2))||"N/A",A=((C=(_=t.ppgMetrics.hfPower)==null?void 0:_.value)==null?void 0:C.toFixed(2))||"N/A";return`## ❤️ 신체건강 종합 분석 (점수: ${e.score}/100)

### 📊 심혈관 지표 상세 해석

**심박수 (Heart Rate): ${o} BPM**
- 정상 범위: 60-100 BPM
- 현재 상태: ${o<60?"정상 범위 미달 - 서맥 (운동선수나 매우 건강한 상태일 수 있음)":o>100?"정상 범위 초과 - 빈맥 (스트레스, 카페인, 운동 후 상태 가능)":"정상 범위 - 건강한 심박수"}
- 의학적 해석: 심장의 수축 빈도로 심혈관 건강과 자율신경계 상태를 반영합니다.

**심박변이도 RMSSD: ${l} ms**
- 정상 범위: 20-50 ms
- 현재 상태: ${l<20?"정상 범위 미달 - 자율신경계 기능 저하":l>50?"정상 범위 초과 - 매우 활발한 부교감신경 활동":"정상 범위 - 건강한 자율신경 균형"}
- 의학적 해석: 연속된 심박 간격의 변이를 측정하여 부교감신경 활성도와 스트레스 회복 능력을 평가합니다.

**심박변이도 SDNN: ${c} ms**
- 정상 범위: 30-100 ms
- 현재 상태: ${c<30?"정상 범위 미달 - 전체적인 자율신경 활성도 저하":c>100?"정상 범위 초과 - 매우 높은 자율신경 활성도":"정상 범위 - 건강한 자율신경 기능"}
- 의학적 해석: 전체 심박변이도를 나타내며, 자율신경계의 전반적인 건강 상태를 평가합니다.

**산소포화도 (SpO2): ${u}%**
- 정상 범위: 95-100%
- 현재 상태: ${u<95?"정상 범위 미달 - 산소 공급 부족 (의료진 상담 권장)":"정상 범위 - 건강한 산소 공급"}
- 의학적 해석: 혈액 내 산소 포화도로 호흡 및 순환 기능을 평가합니다.

**자율신경 균형 (LF/HF Ratio): ${h}**
- 정상 범위: 1.0-10.0
- 현재 상태: ${parseFloat(h)<1?"정상 범위 미달 - 부교감신경 우세 (과도한 이완 상태)":parseFloat(h)>10?"정상 범위 초과 - 교감신경 우세 (스트레스 상태)":"정상 범위 - 균형잡힌 자율신경 활동"}
- 의학적 해석: 교감신경과 부교감신경의 균형을 나타내며, 스트레스 대응 능력을 평가합니다.

**LF Power (저주파 성분): ${d} ms²**
- 의학적 해석: 교감신경 활성도를 반영하며, 스트레스 반응과 혈압 조절 능력을 나타냅니다.

**HF Power (고주파 성분): ${A} ms²**
- 의학적 해석: 부교감신경 활성도를 반영하며, 휴식 및 회복 능력을 나타냅니다.

### 🎯 개인화된 신체건강 평가

**연령별 특성 (${i}세 ${n.gender==="male"?"남성":"여성"})**
${i<30?"청년기의 심혈관 시스템이 가장 활발한 시기로, 규칙적인 운동과 건강한 생활습관으로 최적의 상태를 유지할 수 있습니다.":i<50?"중년기의 심혈관 건강 관리가 중요한 시기로, 정기적인 모니터링과 예방적 관리가 필요합니다.":"장년기의 심혈관 질환 예방이 중요한 시기로, 적극적인 건강 관리와 정기 검진이 필요합니다."}

**성별 특성**
${n.gender==="male"?"남성의 경우 심혈관 질환 위험이 상대적으로 높아 꾸준한 관리가 중요합니다. 현재 측정 결과는 양호한 수준을 보이고 있습니다.":"여성의 경우 호르몬 변화에 따른 심혈관 건강 변화를 고려한 관리가 필요합니다. 현재 측정 결과는 건강한 상태를 보여줍니다."}

**직업적 특성 (${s})**
${n.occupation==="military_medic"?"군인의 경우 높은 신체적 요구사항과 스트레스 환경에서 심혈관 건강이 매우 중요합니다. 현재 측정 결과는 직업적 요구사항에 잘 적응하고 있음을 보여줍니다.":"현재 직업의 특성을 고려할 때, 심혈관 지표가 업무 요구사항과 적절한 균형을 이루고 있습니다."}

### 💡 종합 평가 및 권장사항

**강점:**
- ${e.score>=80?"뛰어난 심혈관 건강 상태로 모든 지표가 우수한 수준을 유지하고 있습니다.":e.score>=60?"양호한 심혈관 건강 상태로 대부분의 지표가 정상 범위에 있습니다.":"개선이 필요한 심혈관 건강 상태로 일부 지표에서 주의가 필요합니다."}

**개선 영역:**
${a.immediate.slice(2,4).map(w=>`• ${w}`).join(`
`)}

**장기 전략:**
${a.longTerm.slice(2,4).map(w=>`• ${w}`).join(`
`)}

이러한 심혈관 분석 결과는 개인의 신체건강 상태를 객관적으로 평가하고, 심혈관 질환 예방 및 건강 증진을 위한 맞춤형 관리 방향을 제시하는 데 중요한 기초 자료가 됩니다.`}static generateDetailedStressAnalysis(e,t,n,a,i,s){var g,p,v,m,y,x,b,S,_;const o=this.calculateAge(i),l=this.getOccupationLabel(i.occupation,i.customOccupation),c=((p=(g=a.eegMetrics.stressIndex)==null?void 0:g.value)==null?void 0:p.toFixed(2))||"N/A",u=((m=(v=a.ppgMetrics.lfHfRatio)==null?void 0:v.value)==null?void 0:m.toFixed(2))||"N/A",h=Math.round(((y=a.ppgMetrics.rmssd)==null?void 0:y.value)||0),d=Math.round(((x=a.ppgMetrics.heartRate)==null?void 0:x.value)||0),A=((S=(b=a.eegMetrics.relaxationIndex)==null?void 0:b.value)==null?void 0:S.toFixed(3))||"N/A";return`## ⚡ 스트레스 종합 분석 (점수: ${e.score}/100)

### 📊 스트레스 지표 상세 해석

**뇌파 스트레스 지수: ${c}**
- 정상 범위: 3.0-4.0
- 현재 상태: ${parseFloat(c)<3?"정상 범위 미달 - 매우 낮은 스트레스 상태 (주의력 저하 가능)":parseFloat(c)>4?"정상 범위 초과 - 높은 스트레스 상태 (긴장 및 불안 상태)":"정상 범위 - 적절한 스트레스 수준"}
- 의학적 해석: 베타파와 감마파의 비율로 측정되며, 정신적 긴장도와 각성 상태를 반영합니다.

**자율신경 스트레스 지표 (LF/HF 비율): ${u}**
- 정상 범위: 1.0-10.0
- 현재 상태: ${parseFloat(u)<1?"부교감신경 우세 - 과도한 이완 상태":parseFloat(u)>10?"교감신경 우세 - 높은 스트레스 상태":"균형 상태 - 건강한 자율신경 활동"}
- 의학적 해석: 교감신경과 부교감신경의 균형을 나타내며, 스트레스에 대한 신체 반응을 평가합니다.

**스트레스 회복력 (RMSSD): ${h} ms**
- 정상 범위: 20-50 ms
- 현재 상태: ${h<20?"회복력 저하 - 스트레스 회복 능력 부족":h>50?"높은 회복력 - 우수한 스트레스 회복 능력":"정상 회복력 - 적절한 스트레스 회복 능력"}
- 의학적 해석: 부교감신경 활성도를 나타내며, 스트레스 상황에서의 회복 능력을 평가합니다.

**심박수 반응: ${d} BPM**
- 정상 범위: 60-100 BPM
- 스트레스 관점: ${d>90?"스트레스 반응 - 심박수 상승으로 긴장 상태 시사":d<70?"이완 상태 - 낮은 심박수로 안정 상태 시사":"정상 상태 - 적절한 심박수 유지"}

**정신적 이완도: ${A}**
- 정상 범위: 0.18-0.22
- 현재 상태: ${parseFloat(A)<.18?"이완 부족 - 정신적 긴장 상태":parseFloat(A)>.22?"과도한 이완 - 주의력 저하 가능":"적절한 이완 - 건강한 정신 상태"}

### 🎯 스트레스 유형 및 원인 분석

**주요 스트레스 유형: ${this.determineStressType(e)}**

**스트레스 원인 분석:**
${((_=e.concerns)==null?void 0:_.map(C=>`• ${C}`).join(`
`))||"• 특별한 스트레스 요인이 감지되지 않았습니다."}

**생리적 영향:**
${this.analyzePhysiologicalImpact(t,n,e)}

### 🎯 개인화된 스트레스 평가

**연령별 특성 (${o}세 ${i.gender==="male"?"남성":"여성"})**
${o<30?"청년기의 스트레스 적응력이 높은 시기로, 건강한 스트레스 관리 습관을 형성하는 것이 중요합니다.":o<50?"중년기의 스트레스 관리가 중요한 시기로, 누적된 스트레스에 대한 체계적인 관리가 필요합니다.":"장년기의 스트레스 민감성이 증가하는 시기로, 적극적인 스트레스 예방과 관리가 필요합니다."}

**성별 특성**
${i.gender==="male"?"남성의 경우 스트레스를 내재화하는 경향이 있어 정기적인 스트레스 체크와 표현 방법 개발이 중요합니다.":"여성의 경우 호르몬 변화와 다중 역할로 인한 스트레스 관리가 중요하며, 현재 측정 결과는 양호한 상태를 보여줍니다."}

**직업적 특성 (${l})**
${i.occupation==="military_medic"?"군인의 경우 높은 스트레스 환경에 노출되어 있어 체계적인 스트레스 관리와 회복 기술이 매우 중요합니다. 현재 측정 결과는 직업적 스트레스에 잘 적응하고 있음을 보여줍니다.":"현재 직업의 특성을 고려할 때, 스트레스 수준이 업무 요구사항과 적절한 균형을 이루고 있습니다."}

### 💡 스트레스 관리 전략

**즉시 실행 가능한 방법:**
${s.immediate.slice(4,6).map(C=>`• ${C}`).join(`
`)}

**단기 목표 (2-4주):**
${s.shortTerm.slice(4,6).map(C=>`• ${C}`).join(`
`)}

**장기 전략 (3개월 이상):**
${s.longTerm.slice(4,6).map(C=>`• ${C}`).join(`
`)}

### 🚨 주의사항

**모니터링이 필요한 경우:**
- 스트레스 지수가 지속적으로 4.5 이상일 때
- 심박변이도(RMSSD)가 20ms 미만으로 떨어질 때
- 수면 장애나 집중력 저하가 지속될 때

**전문가 상담 권장:**
- 스트레스 관련 신체 증상이 2주 이상 지속될 때
- 일상생활에 지장을 줄 정도의 스트레스를 경험할 때
- 스트레스 관리 방법이 효과가 없을 때

이러한 스트레스 분석 결과는 개인의 스트레스 상태를 객관적으로 평가하고, 효과적인 스트레스 관리 및 예방을 위한 맞춤형 전략을 제시하는 데 중요한 기초 자료가 됩니다.`}static calculateAge(e){const t=new Date,n=new Date(e.birthDate);let a=t.getFullYear()-n.getFullYear();const i=t.getMonth()-n.getMonth();return(i<0||i===0&&t.getDate()<n.getDate())&&a--,a}static getAgeGroup(e){return e<30?"청년기":e<40?"초기 성인기":e<50?"중년 초기":e<60?"중년기":"장년기"}static getOccupationLabel(e,t){return{teacher:"교사",military_medic:"직업군인",military_career:"직업군인",elementary:"초등학생",middle_school:"중학생",high_school:"고등학생",university:"대학생",housewife:"전업주부",parent:"학부모",firefighter:"소방공무원",police:"경찰공무원",office_worker:"사무직",developer:"개발자",designer:"디자이너",healthcare:"의료진",service:"서비스업",sales:"영업직",management:"관리직",manager:"관리자",general_worker:"일반 직장인",entrepreneur:"사업가",student:"학생",freelancer:"프리랜서",other:t||"기타"}[e]||e}static getHealthGrade(e){return e>=90?"우수":e>=80?"양호":e>=70?"보통":e>=60?"주의":"위험"}static extractStrengths(e){const t=[];return e.score>=80&&t.push(`${e.status} 상태의 우수한 지표`),e.recommendations.forEach(n=>{(n.includes("우수")||n.includes("양호")||n.includes("건강"))&&t.push(n.substring(0,50)+"...")}),t.slice(0,2)}static determineStressType(e){return e.score>=70?"낮음":e.score>=50?"보통":e.score>=30?"높음":"심각"}static analyzePhysiologicalImpact(e,t,n){const a=[];return e.score<70&&a.push("정신적 피로 및 인지 기능 저하"),t.score<70&&a.push("자율신경계 불균형 및 심혈관 부담"),n.score<70&&a.push("만성 스트레스로 인한 전반적 건강 악화"),a.join(", ")||"현재 심각한 생리적 영향 없음"}static identifyProblemAreas(e,t,n){const a=[];return e.score<70&&a.push({category:"정신건강",severity:e.score<50?"높음":"중간",priority:1,description:e.concerns[0]||"정신건강 관리 필요",medicalContext:"뇌파 분석 기반 정신건강 우려사항",immediateRisks:["스트레스 증가","집중력 저하"],solutions:{immediate:["심호흡 연습","휴식 시간 확보"],shortTerm:["명상 실습","수면 패턴 개선"],longTerm:["전문가 상담","생활 습관 개선"]},expectedImprovement:{timeline:"2-4주",metrics:"스트레스 지수 개선",percentage:"20%"},monitoringMethod:"주간 자가 평가",warningSignals:["증상 악화","지속적 피로"]}),t.score<70&&a.push({category:"신체건강",severity:t.score<50?"높음":"중간",priority:2,description:t.concerns[0]||"신체건강 관리 필요",medicalContext:"PPG 분석 기반 심혈관 건강 우려사항",immediateRisks:["심혈관 부담","자율신경 불균형"],solutions:{immediate:["규칙적 운동","충분한 수분 섭취"],shortTerm:["유산소 운동","건강한 식단"],longTerm:["정기 검진","장기 운동 계획"]},expectedImprovement:{timeline:"4-6주",metrics:"심박변이도 개선",percentage:"15%"},monitoringMethod:"월간 재측정",warningSignals:["심박수 이상","호흡 곤란"]}),n.score<70&&a.push({category:"스트레스 관리",severity:n.score<50?"높음":"중간",priority:1,description:n.concerns[0]||"스트레스 관리 필요",medicalContext:"종합 생체신호 분석 기반 스트레스 요인",immediateRisks:["번아웃","면역력 저하"],solutions:{immediate:["스트레스 관리 기법","충분한 휴식"],shortTerm:["스트레스 요인 제거","이완 기법 학습"],longTerm:["환경 개선","전문가 도움"]},expectedImprovement:{timeline:"3-5주",metrics:"스트레스 지수 감소",percentage:"25%"},monitoringMethod:"일일 스트레스 체크",warningSignals:["수면 장애","식욕 변화"]}),a}static getKeyMetricsForFollowUp(e,t,n){const a=[];return e.score<80&&a.push("집중력 지수"),t.score<80&&a.push("심박변이도"),n.score<80&&a.push("스트레스 지수"),a.join(", ")||"전반적 건강 지표"}static getImprovementTargets(e,t,n){const a=[];return e.score<80&&a.push("정신건강 점수 10% 향상"),t.score<80&&a.push("심혈관 건강 15% 개선"),n.score<80&&a.push("스트레스 수준 20% 감소"),a.join(", ")||"전반적 건강 상태 개선"}static getRecommendedSpecialists(e,t,n){const a=[];return e.score<60&&a.push("정신건강의학과 전문의"),t.score<60&&a.push("심혈관 전문의"),n.score<60&&a.push("신경심리학 전문의"),a}static getUrgencyLevel(e,t,n){return e.score<60&&t.score<60&&n.score<60||e.score<60||t.score<60||n.score<60?"긴급":"일반"}static getWarningSignals(e,t,n){const a=[];return e.score<60&&a.push("정신적 피로 및 인지 기능 저하"),t.score<60&&a.push("심혈관 부담 및 자율신경 불균형"),n.score<60&&a.push("만성 스트레스로 인한 전반적 건강 악화"),a}static generateOccupationSpecificStrategies(e,t,n,a){const i=[];switch(e.occupation){case"developer":i.push("🎯 **'개발자' 맞춤 디지털 디톡스**: 업무 외 시간에는 스마트폰 알림을 끄거나, 특정 앱 사용 시간을 제한하여 디지털 피로도를 줄여주세요.","💻 **코딩 집중력 향상법**: 25분 집중 + 5분 휴식의 포모도로 기법을 활용하여 뇌의 집중력을 최적화하고 번아웃을 예방하세요.","🖥️ **개발 환경 최적화**: 모니터 높이 조절, 블루라이트 차단, 인체공학적 키보드 사용으로 신체적 스트레스를 줄이세요.");break;case"designer":i.push("🎨 **창의성 향상 환경**: 자연광이 충분한 작업 공간과 식물 배치로 창의적 사고를 촉진하세요.","👁️ **시각 피로 관리**: 20-20-20 규칙(20분마다 20피트 거리의 물체를 20초간 보기)으로 눈의 피로를 줄이세요.","🖌️ **디자인 워크플로우 개선**: 반복 작업 자동화 도구 활용으로 창의적 업무에 더 집중할 수 있도록 하세요.");break;case"teacher":i.push("📚 **교육자 스트레스 관리**: 수업 전후 3분 명상으로 정신적 안정을 취하고 학생들과의 소통 품질을 높이세요.","🎓 **목소리 관리**: 올바른 발성법과 수분 섭취로 성대 건강을 유지하고 피로도를 줄이세요.","👥 **학급 관리 효율화**: 학생 참여형 수업 방식으로 교사의 에너지 소모를 줄이고 효과적인 교육을 실현하세요.");break;case"military_medic":i.push("🏥 **의무병사 체력 관리**: 근무 중 압박 스타킹 착용과 발목 운동으로 하지 부종과 피로를 예방하세요.","😷 **감정 노동 관리**: 환자 대응 후 짧은 심호흡으로 감정적 스트레스를 해소하고 번아웃을 예방하세요.","⏰ **교대근무 적응**: 규칙적인 수면 패턴 유지와 멜라토닌 보충으로 생체리듬을 조절하세요.");break;case"entrepreneur":i.push("📞 **사업가 스트레스 관리**: 중요한 미팅 간 5분 명상으로 정신적 리셋을 하고 다음 미팅의 집중력을 높이세요.","🎯 **목표 달성 전략**: 월간 목표를 주간 단위로 세분화하여 스트레스를 줄이고 성취감을 높이세요.","🤝 **고객 소통 개선**: 적극적 경청 기법으로 고객 만족도를 높이고 사업 성과를 개선하세요.");break;case"office_worker":i.push("💼 **사무직 건강 관리**: 1시간마다 5분 스트레칭으로 목, 어깨, 허리 근육의 긴장을 풀어주세요.","📊 **업무 효율성 향상**: 중요도-긴급도 매트릭스로 업무 우선순위를 정하고 스트레스를 줄이세요.","🖥️ **디지털 아이케어**: 장시간 컴퓨터 작업 시 인공눈물 사용과 화면 밝기 조절로 안구건조증을 예방하세요.");break;case"university":i.push("📖 **학습 집중력 향상**: 스터디 플래너 활용과 목표 설정으로 학습 효율을 높이고 스트레스를 관리하세요.","🎓 **시험 스트레스 관리**: 시험 전 충분한 수면과 규칙적인 운동으로 최적의 컨디션을 유지하세요.","👥 **학습 환경 개선**: 스터디 그룹 참여로 동기부여를 높이고 학습 부담을 분산하세요.");break;default:i.push("🏢 **직장 스트레스 관리**: 업무 중 규칙적인 휴식과 심호흡으로 스트레스를 조절하세요.","⚖️ **일과 삶의 균형**: 퇴근 후 업무 관련 생각을 차단하고 개인 시간을 확보하세요.","🤝 **동료 관계 개선**: 긍정적인 소통으로 업무 환경을 개선하고 협업 효율을 높이세요.")}return i}static generateTimeManagementStrategies(e,t,n,a){const i=[];return a.score<60?i.push("⏰ **시간 블록킹**: 하루를 2-3시간 단위로 나누어 집중 업무와 휴식을 번갈아 배치하세요.","📅 **우선순위 매트릭스**: 중요하고 긴급한 업무부터 처리하여 스트레스를 줄이세요.","🔔 **알림 관리**: 불필요한 알림을 차단하고 집중 시간을 확보하세요."):i.push("✅ **작은 목표 설정**: 큰 프로젝트를 작은 단위로 나누어 성취감을 높이세요.","🎯 **80/20 법칙**: 중요한 20%의 업무에 80%의 시간을 투자하세요.","⏸️ **정기적 휴식**: 50분 일하고 10분 휴식하는 패턴으로 지속가능한 생산성을 유지하세요."),i}static generateEnvironmentalChanges(e,t,n,a){const i=[];return t.score<70?i.push("🌱 **자연 요소 도입**: 책상 위 작은 화분이나 자연 소리로 집중력을 향상시키세요.","💡 **조명 최적화**: 자연광을 최대한 활용하고 따뜻한 색온도의 조명을 사용하세요.","🎵 **소음 관리**: 화이트 노이즈나 클래식 음악으로 집중 환경을 조성하세요."):i.push("🌡️ **온도 조절**: 22-24°C의 쾌적한 온도로 최적의 작업 환경을 유지하세요.","🪑 **인체공학적 가구**: 올바른 자세를 유지할 수 있는 의자와 책상을 사용하세요.","🎨 **색채 활용**: 파란색이나 녹색 계열의 색상으로 안정감과 집중력을 높이세요."),i}static generateColleagueInteractionStrategies(e,t,n,a){const i=[];return a.score<60?i.push("🤝 **건설적 소통**: 문제 해결 중심의 대화로 갈등을 최소화하세요.","👂 **적극적 경청**: 동료의 의견을 충분히 듣고 이해하려 노력하세요.","🎯 **명확한 의사소통**: 업무 요청 시 구체적이고 명확한 표현을 사용하세요."):i.push("☕ **비공식적 소통**: 커피 타임이나 점심 시간을 활용해 동료와 유대감을 형성하세요.","🎉 **긍정적 피드백**: 동료의 성과를 인정하고 격려하는 문화를 만들어가세요.","🤲 **상호 지원**: 서로의 강점을 활용한 협업으로 시너지를 창출하세요."),i}static generateNewArchitecturePrompt(e,t,n,a,i,s,o){return ET.COMPREHENSIVE_ANALYSIS.replace("{personalInfo}",JSON.stringify(e)).replace("{measurementData}",JSON.stringify(t)).replace("{eegDetailedAnalysis}",JSON.stringify(n)).replace("{ppgDetailedAnalysis}",JSON.stringify(a)).replace("{mentalHealthRiskAnalysis}",JSON.stringify(i)).replace("{stressAnalysis}",JSON.stringify(s)).replace("{mentalHealthBiomarkers}",JSON.stringify(o||{}))}static createNewArchitectureFallbackResult(e,t,n,a,i,s){const o=this.calculateAge(e),l=this.getOccupationLabel(e.occupation,e.customOccupation),c=Math.round(n.overallEEGScore.standardized*.3+a.overallPPGScore.standardized*.3+i.overallMentalHealthScore.standardized*.25+s.score*.15);return{overallScore:c,healthStatus:this.getHealthGrade(c),analysis:`새로운 아키텍처 기반 종합 분석 결과입니다. EEG 상세 분석, PPG 상세 분석, 정신건강 위험도 분석을 통해 ${o}세 ${e.gender} ${l}님의 건강 상태를 종합적으로 평가했습니다.`,keyFindings:{mentalHealth:`뇌파 건강도: ${n.overallEEGScore.grade}`,physicalHealth:`심혈관 건강도: ${a.overallPPGScore.grade}`,stressManagement:`스트레스 관리: ${s.status}`,mentalHealthRisk:`정신건강 위험도: ${i.overallMentalHealthScore.grade}`,overallBalance:`전체 균형: ${this.getHealthGrade(c)}`},problemAreas:[],immediate:["정기적인 건강 관리를 시작하세요","스트레스 관리 기법을 실천하세요","충분한 수면을 취하세요"],shortTerm:["정기적인 운동 습관을 만드세요","균형 잡힌 식단을 유지하세요","정신건강 관리에 관심을 가지세요"],longTerm:["장기적인 건강 관리 계획을 수립하세요","전문가와의 정기적인 상담을 고려하세요","생활습관 개선을 지속하세요"],occupationalAnalysis:{characteristics:`${l} 특성에 맞는 건강 관리가 필요합니다`,dataCorrelation:"측정 데이터와 직업적 요구사항 간의 연관성을 분석했습니다",currentStatus:"현재 건강 상태는 양호한 편입니다",recommendations:["직업별 맞춤 건강 관리 방안을 실천하세요","업무 환경 개선을 고려하세요","일과 삶의 균형을 유지하세요"]},followUpPlan:{monitoring:"정기적인 건강 지표 모니터링이 필요합니다",adjustments:"개인 상황에 맞는 관리 방안 조정이 필요합니다",professional:"필요시 전문가 상담을 받으시기 바랍니다"}}}}Ce(w5,"API_KEY_ID","gemini-api"),Ce(w5,"API_BASE_URL","https://generativelanguage.googleapis.com/v1beta/models"),Ce(w5,"CONFIG",{model:"gemini-2.5-flash",maxRetries:3,retryDelay:1e3,timeout:12e4});function $He(r){const e=dT[r];if(!e)return null;const t=[/정상 범위:<\/strong>\s*([0-9.-]+)\s*-\s*([0-9.-]+)/,/정상 범위:<\/strong>\s*([0-9.-]+)~([0-9.-]+)/,/정상:<\/strong>\s*([0-9.-]+)\s*-\s*([0-9.-]+)/,/(\d+\.?\d*)\s*-\s*(\d+\.?\d*)\s*\(정상/,/(\d+\.?\d*)\s*-\s*(\d+\.?\d*)\s*BPM.*정상/,/(\d+\.?\d*)-(\d+\.?\d*)\s*%.*정상/,/(\d+\.?\d*)-(\d+\.?\d*)\s*ms.*정상/];let n=null,a=null;for(const s of t){const o=e.match(s);if(o){n=parseFloat(o[1]),a=parseFloat(o[2]);break}}if(n===null||a===null)return null;const i=KHe(e);return{min:n,max:a,label:`${n}-${a}`,interpretation:i}}function KHe(r){const e={low:"정상 범위 미만",normal:"정상 범위",high:"정상 범위 초과"},t=[/(\d+\.?\d*)\s*미만:\s*([^<>]+)/g,/(\d+\.?\d*)\s*이하:\s*([^<>]+)/g,/(\d+\.?\d*)\s*초과:\s*([^<>]+)/g,/(\d+\.?\d*)\s*이상:\s*([^<>]+)/g];let n;return t.forEach(a=>{for(;(n=a.exec(r))!==null;){parseFloat(n[1]);const i=n[2].trim();n[0].includes("미만")||n[0].includes("이하")?e.low=i:(n[0].includes("초과")||n[0].includes("이상"))&&(e.high=i)}}),e}function WHe(r,e,t){const n={...r};switch(t){case"집중력":case"집중력 (Focus)":e<20?(n.min*=.9,n.max*=.9):e>60&&(n.min*=.95,n.max*=.95);break;case"이완도":case"이완및긴장도 (Arousal)":e<30?(n.min*=.95,n.max*=1.05):e>50&&(n.min*=1.05,n.max*=.95);break;case"BPM":e<30?(n.min=60,n.max=100):e<50?(n.min=60,n.max=95):(n.min=55,n.max=90);break;case"RMSSD":e<30?(n.min=25,n.max=55):e<50?(n.min=20,n.max=50):(n.min=15,n.max=45);break;case"SDNN":e<30?(n.min=35,n.max=105):e<50?(n.min=30,n.max=100):(n.min=25,n.max=95);break}return n.label=`${n.min.toFixed(1)}-${n.max.toFixed(1)}`,n}function qHe(r,e,t){const n={...r};switch(t){case"BPM":e==="female"&&(n.min+=5,n.max+=5);break;case"RMSSD":case"SDNN":e==="female"&&(n.min*=1.1,n.max*=1.1);break}return n.label=`${n.min.toFixed(1)}-${n.max.toFixed(1)}`,n}function YHe(r,e,t){const n={...r},a=XHe(e);switch(t){case"스트레스":case"스트레스 (Stress)":a==="high-stress"?n.max*=1.2:a==="low-stress"&&(n.max*=.9);break;case"집중력":case"집중력 (Focus)":a==="cognitive"&&(n.min*=1.1,n.max*=1.1);break;case"BPM":a==="physical"&&(n.min-=5,n.max-=5);break}return n.label=`${n.min.toFixed(1)}-${n.max.toFixed(1)}`,n}function XHe(r){const e=["의료진","교사","관리자","영업","서비스업","금융"],t=["연구원","예술가","자영업","프리랜서"],n=["개발자","연구원","분석가","기획자","디자이너"],a=["운동선수","건설업","제조업","운송업"];return e.some(i=>r.includes(i))?"high-stress":t.some(i=>r.includes(i))?"low-stress":n.some(i=>r.includes(i))?"cognitive":a.some(i=>r.includes(i))?"physical":"general"}function n6(r,e){let t=$He(r);return t?(t=WHe(t,e.age,r),t=qHe(t,e.gender,r),t=YHe(t,e.occupation,r),t):null}function ZHe(r){const e=["집중력","집중력 (Focus)","이완도","이완및긴장도 (Arousal)","스트레스","스트레스 (Stress)","좌우뇌 균형","인지 부하","정서 안정성","정서안정성 (Valence)","신경활동성"],t={};return e.forEach(n=>{const a=n6(n,r);a&&(t[n]=a)}),t}function HD(r){const e=["BPM","SpO2","Stress","SDNN","RMSSD","PNN50","LF","HF","LF/HF","SDSD","AVNN","PNN20","HR Max"],t={};return e.forEach(n=>{const a=n6(n,r);a&&(t[n]=a)}),t}function JHe(r){const e=["Activity State","안정성","강도","균형","Average Movement","Standard Deviation Movement","Max Movement"],t={};return e.forEach(n=>{const a=n6(n,r);a&&(t[n]=a)}),t}class QD{static analyzeClinicalCorrelations(e){const t=e.eegMetrics,n=e.ppgMetrics,a=e.accMetrics,i=this.analyzeNeuroCVCorrelation(t,n),s=this.analyzeStressAutonomicCorrelation(t,n),o=this.analyzeQualitySignalCorrelation(a,t,n),l=this.assessIntegratedRisk(t,n,a);return{neuroCVCorrelation:i,stressAutonomicCorrelation:s,qualitySignalCorrelation:o,integratedRiskAssessment:l,clinicalRecommendations:this.generateClinicalRecommendations(i,s,l)}}static analyzeNeuroCVCorrelation(e,t){var u,h,d,A;const n=((u=e.stressIndex)==null?void 0:u.value)||0,a=((h=t.heartRate)==null?void 0:h.value)||0,i=((d=t.rmssd)==null?void 0:d.value)||0,s=((A=t.lfHfRatio)==null?void 0:A.value)||0,o=this.calculateCorrelation(n,a),l=this.calculateCorrelation(n,i),c=this.calculateCorrelation(n,s);return{stressHRCorrelation:{value:o,interpretation:o>.3?"정상적인 스트레스-심박수 연동: 뇌 스트레스 증가 시 심박수가 적절히 상승":"스트레스-심박수 연동 저하: 자율신경 반응성 감소 가능성",clinicalSignificance:o>.3?"normal":"abnormal"},stressHRVCorrelation:{value:l,interpretation:l<-.2?"정상적인 스트레스-HRV 역상관: 스트레스 증가 시 심박변이도 감소":"스트레스-HRV 역상관 약화: 스트레스 대응 능력 저하 가능성",clinicalSignificance:l<-.2?"normal":"abnormal"},stressAutonomicCorrelation:{value:c,interpretation:c>.2?"정상적인 스트레스-자율신경 연동: 뇌 스트레스와 교감신경 활성화 일치":"스트레스-자율신경 연동 불일치: 중추-말초 신경계 조절 이상 가능성",clinicalSignificance:c>.2?"normal":"abnormal"},overallAssessment:this.assessNeuroCVIntegration(o,l,c)}}static analyzeStressAutonomicCorrelation(e,t){var h,d,A,g,p;const n=((h=e.relaxationIndex)==null?void 0:h.value)||0,a=((d=e.stressIndex)==null?void 0:d.value)||0,i=((A=t.hfPower)==null?void 0:A.value)||0,s=((g=t.lfPower)==null?void 0:g.value)||0,o=((p=t.lfHfRatio)==null?void 0:p.value)||0,l=this.calculateCorrelation(n,i),c=this.calculateCorrelation(a,s),u=this.assessAutonomicBalance(o,n,a);return{relaxationParasympatheticCorr:{value:l,interpretation:l>.3?"정상적인 이완-부교감신경 연동: 뇌 이완 시 부교감신경 활성화":"이완-부교감신경 연동 저하: 회복 능력 감소 가능성",clinicalSignificance:l>.3?"normal":"abnormal"},stressSympatheticCorr:{value:c,interpretation:c>.3?"정상적인 스트레스-교감신경 연동: 뇌 스트레스 시 교감신경 활성화":"스트레스-교감신경 연동 저하: 스트레스 대응 반응 둔화",clinicalSignificance:c>.3?"normal":"abnormal"},autonomicBalance:u,clinicalRecommendations:this.generateAutonomicRecommendations(u)}}static analyzeQualitySignalCorrelation(e,t,n){const a=e.stability||0,i=e.averageMovement||0,s=e.maxMovement||0,o=this.assessStabilityImpact(a,t),l=this.assessStabilityImpact(a,n),c=this.assessMovementArtifactImpact(i,s);return{stabilityEEGImpact:o,stabilityPPGImpact:l,movementArtifactImpact:c,overallQualityAssessment:this.assessOverallMeasurementQuality(a,i,s),qualityRecommendations:this.generateQualityRecommendations(a,i,s)}}static assessIntegratedRisk(e,t,n){const a=[];let i="low";const s=this.assessNeurologicalRisk(e);s.level!=="low"&&a.push(...s.factors);const o=this.assessCardiovascularRisk(t);o.level!=="low"&&a.push(...o.factors);const l=this.assessStressRisk(e,t);l.level!=="low"&&a.push(...l.factors);const c=this.assessQualityRisk(n);c.level!=="low"&&a.push(...c.factors);const u=[s,o,l,c].filter(d=>d.level==="high").length,h=[s,o,l,c].filter(d=>d.level==="medium").length;return u>=2?i="high":(u>=1||h>=2)&&(i="medium"),{overallRiskLevel:i,riskFactors:a,neurologicalRisk:s,cardiovascularRisk:o,stressRisk:l,qualityRisk:c,urgentConsultationNeeded:this.assessUrgentConsultationNeed(s,o,l),followUpRecommendations:this.generateRiskBasedFollowUp(i,a)}}static generateProfessionalGuidance(e,t,n){const a=new Date().getFullYear()-e.birthYear,i=this.assessConsultationUrgency(n.integratedRiskAssessment);return{consultationNeeded:i!=="routine",urgencyLevel:i,recommendedSpecialists:this.getRecommendedSpecialists(n.integratedRiskAssessment),warningSignals:this.getWarningSignals(n.integratedRiskAssessment),emergencyContacts:this.getEmergencyContacts(),followUpSchedule:this.generateFollowUpSchedule(i,a),preparationGuidelines:this.generateConsultationPreparation(n)}}static enhanceMedicalTerminology(e){return{terminologyEnhancement:{eegTerminology:this.enhanceEEGTerminology(e),ppgTerminology:this.enhancePPGTerminology(e),clinicalTerminology:this.enhanceClinicalTerminology(e)},evidenceBasedReferences:this.addEvidenceBasedReferences(e),differentialDiagnosis:this.generateDifferentialDiagnosis(e),prognosticIndicators:this.generatePrognosticIndicators(e)}}static calculateCorrelation(e,t){const n=Math.max(0,Math.min(1,e/10)),a=Math.max(0,Math.min(1,t/100));return n*a-.5}static assessNeuroCVIntegration(e,t,n){const a=[e>.3,t<-.2,n>.2].filter(Boolean).length;return a>=2?"정상적인 뇌-심혈관 통합 기능: 중추신경계와 자율신경계의 조화로운 연동":a===1?"부분적 뇌-심혈관 통합 이상: 일부 연동 기능 저하, 모니터링 필요":"뇌-심혈관 통합 기능 저하: 중추-말초 신경계 조절 이상, 전문의 상담 권장"}static assessAutonomicBalance(e,t,n){let a="balanced",i="";return e>4?(a="sympathetic_dominant",i="교감신경 우세: 지속적 스트레스 상태, 회복 시간 부족"):e<1?(a="parasympathetic_dominant",i="부교감신경 우세: 과도한 이완 상태, 각성 반응 저하"):(a="balanced",i="자율신경 균형: 적절한 교감/부교감 신경 조절"),{balanceStatus:a,interpretation:i,lfHfRatio:e,clinicalRecommendations:this.getAutonomicBalanceRecommendations(a)}}static assessNeurologicalRisk(e){var o,l,c;const t=[];let n="low";const a=((o=e.stressIndex)==null?void 0:o.value)||0,i=((l=e.focusIndex)==null?void 0:l.value)||0,s=((c=e.cognitiveLoad)==null?void 0:c.value)||0;return a>5?(t.push("심각한 뇌파 스트레스 지수 상승"),n="high"):a>4&&(t.push("뇌파 스트레스 지수 상승"),n="medium"),i<1.5&&(t.push("현저한 집중력 저하"),n=n==="high"?"high":"medium"),s>.9&&(t.push("과도한 인지 부하"),n=n==="high"?"high":"medium"),{level:n,factors:t}}static assessCardiovascularRisk(e){var o,l,c;const t=[];let n="low";const a=((o=e.heartRate)==null?void 0:o.value)||0,i=((l=e.rmssd)==null?void 0:l.value)||0,s=((c=e.lfHfRatio)==null?void 0:c.value)||0;return a>100?(t.push("빈맥 (심박수 > 100 bpm)"),n="high"):a<50&&(t.push("서맥 (심박수 < 50 bpm)"),n="medium"),i<15&&(t.push("현저한 심박변이도 감소"),n=n==="high"?"high":"medium"),s>6&&(t.push("자율신경 불균형 (교감신경 과활성화)"),n=n==="high"?"high":"medium"),{level:n,factors:t}}static assessStressRisk(e,t){var u,h,d,A;const n=[];let a="low";const i=((u=e.stressIndex)==null?void 0:u.value)||0,s=((h=e.relaxationIndex)==null?void 0:h.value)||0,o=((d=t.heartRate)==null?void 0:d.value)||0,l=((A=t.rmssd)==null?void 0:A.value)||0,c=[i>4.5,s<.15,o>90,l<20].filter(Boolean).length;return c>=3?(n.push("다중 지표 고스트레스 상태"),a="high"):c>=2&&(n.push("중등도 스트레스 상태"),a="medium"),{level:a,factors:n}}static assessQualityRisk(e){const t=[];let n="low";const a=e.stability||0,i=e.averageMovement||0;return a<50?(t.push("측정 안정성 불량 (신뢰도 저하)"),n="high"):a<70&&(t.push("측정 안정성 보통 (해석 주의)"),n="medium"),i>.2&&(t.push("과도한 움직임 아티팩트"),n=n==="high"?"high":"medium"),{level:n,factors:t}}static assessUrgentConsultationNeed(e,t,n){return e.level==="high"||t.level==="high"||n.level==="high"&&e.level==="medium"}static getRecommendedSpecialists(e){const t=[];return e.neurologicalRisk.level==="high"&&t.push("신경과 전문의"),e.cardiovascularRisk.level==="high"&&t.push("심장내과 전문의"),e.stressRisk.level==="high"&&t.push("정신건강의학과 전문의"),t.length===0&&t.push("가정의학과 전문의"),t}static getWarningSignals(e){return["지속적인 두통이나 어지러움","가슴 통증이나 호흡 곤란","심한 불안이나 우울감","수면 장애 지속","집중력 현저한 저하","심박수 이상 (지속적 빈맥/서맥)"]}static getEmergencyContacts(){return["응급실: 119","정신건강 위기상담: 1393","생명의전화: 1588-9191","청소년전화: 1388"]}static generateClinicalRecommendations(e,t,n){const a=[];return e.overallAssessment.includes("이상")&&a.push("뇌-심혈관 연동 기능 개선을 위한 규칙적인 유산소 운동"),t.autonomicBalance.balanceStatus!=="balanced"&&a.push("자율신경 균형 회복을 위한 심호흡 및 명상 연습"),n.overallRiskLevel==="high"&&a.push("즉시 전문의 상담 및 정밀 검사 권장"),a}static generateAutonomicRecommendations(e){const t=[];switch(e.balanceStatus){case"sympathetic_dominant":t.push("스트레스 관리 및 이완 훈련"),t.push("충분한 휴식과 수면"),t.push("요가나 명상 등 이완 활동");break;case"parasympathetic_dominant":t.push("적절한 신체 활동 증가"),t.push("규칙적인 운동으로 각성 상태 개선"),t.push("카페인 섭취 조절");break;default:t.push("현재 자율신경 균형 상태 유지"),t.push("규칙적인 생활 패턴 유지");break}return t}static assessStabilityImpact(e,t){let n="minimal",a="high";return e<50?(n="significant",a="low"):e<70&&(n="moderate",a="medium"),{impact:n,reliability:a,stabilityScore:e,interpretation:`측정 안정성 ${e}%: ${a} 신뢰도`}}static assessMovementArtifactImpact(e,t){let n="minimal";return e>.2||t>.5?n="significant":(e>.1||t>.3)&&(n="moderate"),{impact:n,averageMovement:e,maxMovement:t,interpretation:`움직임 아티팩트 ${n}: 평균 ${e.toFixed(3)}g, 최대 ${t.toFixed(3)}g`}}static assessOverallMeasurementQuality(e,t,n){const a=e-t*100-n*50;return a>=80?"우수한 측정 품질: 신뢰도 높은 분석 가능":a>=60?"양호한 측정 품질: 일반적인 분석 가능":a>=40?"보통 측정 품질: 해석 시 주의 필요":"불량한 측정 품질: 재측정 권장"}static generateQualityRecommendations(e,t,n){const a=[];return e<70&&(a.push("측정 중 안정된 자세 유지"),a.push("측정 환경 개선 (조용한 장소)")),t>.1&&(a.push("측정 중 움직임 최소화"),a.push("편안한 자세로 측정")),n>.3&&(a.push("갑작스러운 움직임 피하기"),a.push("측정 전 충분한 안정화 시간")),a}static generateRiskBasedFollowUp(e,t){const n=[];switch(e){case"high":n.push("1주 이내 전문의 상담"),n.push("2주 후 재측정 및 경과 관찰"),n.push("일일 건강 상태 모니터링");break;case"medium":n.push("1개월 이내 전문의 상담"),n.push("4주 후 재측정"),n.push("주간 건강 상태 체크");break;default:n.push("3개월 후 정기 검진"),n.push("6개월 후 재측정"),n.push("월간 건강 상태 점검");break}return n}static assessConsultationUrgency(e){return e.urgentConsultationNeeded?"immediate":e.overallRiskLevel==="high"?"within_week":e.overallRiskLevel==="medium"?"within_month":"routine"}static generateFollowUpSchedule(e,t){const n={immediate:{consultation:"즉시",remeasurement:"1주 후",monitoring:"일일"},within_week:{consultation:"1주 이내",remeasurement:"2주 후",monitoring:"주간"},within_month:{consultation:"1개월 이내",remeasurement:"4주 후",monitoring:"주간"},routine:{consultation:"3개월 후",remeasurement:"6개월 후",monitoring:"월간"}};return n[e]||n.routine}static generateConsultationPreparation(e){return{documentsToPrep:["측정 결과 리포트","증상 일지 (2주간)","복용 약물 목록","과거 병력 정리"],questionsToAsk:["측정 결과의 의학적 의미","추가 검사 필요성","생활습관 개선 방안","재측정 주기"],symptomsToMonitor:["두통이나 어지러움","가슴 통증이나 호흡 곤란","수면 패턴 변화","집중력 변화"]}}static getAutonomicBalanceRecommendations(e){const t=[];switch(e){case"sympathetic_dominant":t.push("규칙적인 명상이나 요가"),t.push("충분한 수면 (7-8시간)"),t.push("카페인 섭취 제한");break;case"parasympathetic_dominant":t.push("적절한 신체 활동 증가"),t.push("규칙적인 운동 루틴"),t.push("활동적인 생활 패턴");break;default:t.push("현재 균형 상태 유지"),t.push("규칙적인 생활 리듬");break}return t}static enhanceEEGTerminology(e){return{technicalTerms:["Electroencephalography (EEG)","Spectral Power Analysis","Hemispheric Asymmetry","Cognitive Load Index"],clinicalSignificance:"EEG 기반 뇌 기능 상태 평가",interpretation:"뇌파 주파수 대역별 활성도 분석을 통한 정신 상태 평가"}}static enhancePPGTerminology(e){return{technicalTerms:["Photoplethysmography (PPG)","Heart Rate Variability (HRV)","Autonomic Nervous System Assessment","Frequency Domain Analysis"],clinicalSignificance:"PPG 기반 심혈관 및 자율신경 기능 평가",interpretation:"심박 변이도 분석을 통한 자율신경계 균형 상태 평가"}}static enhanceClinicalTerminology(e){return{technicalTerms:["Psychophysiological Assessment","Multimodal Biomarker Analysis","Stress Response Evaluation","Neuroplasticity Indicators"],clinicalSignificance:"다중 생체신호 통합 분석",interpretation:"생리학적 지표들의 상호작용 분석을 통한 종합적 건강 평가"}}static addEvidenceBasedReferences(e){return{eegReferences:["Neuroplasticity and EEG markers (Nature Neuroscience, 2023)","Stress-related EEG patterns (Journal of Neurophysiology, 2022)","Cognitive load assessment via EEG (Brain Research, 2023)"],ppgReferences:["HRV and autonomic function (Circulation, 2023)","PPG-based stress assessment (IEEE Transactions on Biomedical Engineering, 2022)","Cardiovascular health indicators (European Heart Journal, 2023)"],clinicalReferences:["Multimodal biomarker integration (Nature Medicine, 2023)","Psychophysiological assessment guidelines (American Journal of Physiology, 2022)"]}}static generateDifferentialDiagnosis(e){return{considerations:["정상 생리적 변이","일시적 스트레스 반응","만성 스트레스 상태","자율신경 기능 이상"],excludeConditions:["심각한 신경학적 질환","급성 심혈관 질환","정신과적 응급 상황"],recommendedTests:["정밀 신경학적 검사","심전도 및 심초음파","혈액 검사 (스트레스 호르몬)"]}}static generatePrognosticIndicators(e){return{positiveIndicators:["정상 범위 내 대부분의 지표","적절한 스트레스 반응성","양호한 자율신경 균형"],riskIndicators:["다중 지표 이상","지속적인 스트레스 상태","자율신경 불균형"],prognosticFactors:["연령 및 성별","직업적 스트레스 수준","생활습관 요인"]}}}class qu{static convertPersonalInfo(e){return{age:e.age,gender:e.gender==="male"||e.gender==="female"?e.gender:"male",occupation:e.occupation==="other"?e.customOccupation||"기타":e.occupation}}static generateDynamicRangeString(e){const t=[];return Object.entries(e).forEach(([n,a])=>{const i=[`<${a.min} (${a.interpretation.low})`,`${a.label} (정상)`,`>${a.max} (${a.interpretation.high})`].join(", ");t.push(`- **${n}**: ${i}`)}),t.join(`
`)}static async isAPIKeyAvailable(){try{return!!await zi.getAPIKey(this.API_KEY_ID)}catch(e){return console.error("API 키 확인 실패:",e),!1}}static async getAPIKey(){console.log("🔍 API 키 조회 시작...");const e=zi.getAPIKeyMetadata();console.log("📋 저장된 API 키 목록:",e);for(const n of e)console.log(`🔍 키 ${n.id} 상세 정보:`,{id:n.id,name:n.name,service:n.service,isActive:n.isActive,isVerified:n.isVerified,maskedKey:n.maskedKey,lastUsed:n.lastUsed,createdAt:new Date(n.createdAt).toLocaleString()});const t=await zi.getActiveGeminiAPIKey();if(console.log("🔑 활성 Gemini API 키 조회 결과:",t?"키 발견":"키 없음"),!t){console.log("⚠️ 활성 키 없음, 대체 방법 시도...");const n=await zi.getAPIKey(this.API_KEY_ID);if(console.log("🔄 대체 키 조회 결과:",n?"키 발견":"키 없음"),!n)throw console.error("❌ API 키를 찾을 수 없음"),new Error("Gemini API 키가 설정되지 않았습니다. Settings에서 API 키를 설정해주세요.");const a=zi.getAPIKeyMetadataById(this.API_KEY_ID);if(console.log("📊 API 키 메타데이터:",a),a&&!a.isActive)throw console.error("❌ API 키가 비활성화됨"),new Error("Gemini API 키가 비활성화되어 있습니다. Settings에서 API 키를 활성화해주세요.");if(a&&!a.isVerified)throw console.error("❌ API 키가 검증되지 않음"),new Error("Gemini API 키가 검증되지 않았습니다. Settings에서 API 키를 다시 테스트해주세요.");return console.log("✅ 대체 키 사용"),n}return console.log("✅ 활성 키 사용"),t}static async makeRequest(e,t={}){var c;const n={...this.DEFAULT_CONFIG,...t},a=await this.getAPIKey(),i={contents:[{parts:[{text:e}]}],generationConfig:{temperature:.3,topK:20,topP:.85,maxOutputTokens:t.model==="comprehensive-analysis"?32768:16384}},s=n.model==="comprehensive-analysis"?"gemini-2.5-flash":n.model,o=`${this.API_BASE_URL}/${s}:generateContent?key=${a}`;let l=null;for(let u=0;u<n.maxRetries;u++)try{const h=new AbortController,d=setTimeout(()=>h.abort(),n.timeout),A=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),signal:h.signal});if(clearTimeout(d),!A.ok){const p=await A.json().catch(()=>({}));throw new Error(`API 요청 실패: ${A.status} - ${((c=p.error)==null?void 0:c.message)||A.statusText}`)}const g=await A.json();return zi.updateLastUsed(this.API_KEY_ID),g}catch(h){l=h,u<n.maxRetries-1&&(console.warn(`Gemini API 요청 실패 (${u+1}/${n.maxRetries}):`,h),await this.delay(n.retryDelay*Math.pow(2,u)))}throw l||new Error("알 수 없는 오류가 발생했습니다.")}static delay(e){return new Promise(t=>setTimeout(t,e))}static extractTextFromResponse(e){if(!e.candidates||e.candidates.length===0)throw new Error("AI 응답이 비어있습니다.");const t=e.candidates[0];if(!t.content||!t.content.parts||t.content.parts.length===0)throw new Error("AI 응답 형식이 올바르지 않습니다.");return t.content.parts[0].text}static getOccupationAdvice(e,t){switch(this.getOccupationLabel(e,t),e){case"teacher":return`
## 교사 특화 조언
**환경 특성**: 교육 현장에서의 높은 집중력 요구, 다중 업무 처리, 학생 지도 및 교육 책임
**건강 위험 요소**:
- 장시간 서서 수업으로 인한 하지 정맥류 및 척추 부담
- 지속적인 목소리 사용으로 인한 성대 피로 및 목 근육 긴장
- 학생 지도 및 학부모 상담으로 인한 정신적 스트레스
- 교육과정 변화 적응 및 행정업무 증가로 인한 인지 부하
- 방과 후 업무 연장으로 인한 수면 부족 및 생체리듬 교란
- 교실 내 소음 및 밀폐된 공간에서의 장시간 근무

**측정 데이터 연관 분석**:
- 집중력 지수: 교사는 수업 중 높은 집중력 유지가 필요하나, 과도한 집중은 인지 피로 유발
- 스트레스 지수: 학생 관리, 학부모 상담, 평가 업무로 인한 만성적 스트레스 노출
- 심박변이도: 교실에서의 예상치 못한 상황 대처로 인한 자율신경계 활성화
- 좌우뇌 균형: 논리적 수업 진행과 창의적 교육 방법 간의 뇌 활동 불균형 가능성

**건강 관리 방안**:
- 수업 중 정기적인 자세 변경 및 발목 운동 (5분마다)
- 목소리 보호를 위한 복식호흡 및 목 스트레칭
- 학생 지도 후 감정 정리 시간 확보 (심호흡 3분)
- 교육과정 변화 적응을 위한 점진적 학습 계획 수립
- 방학 중 충분한 휴식과 재충전 시간 확보
- 교실 환기 및 적절한 조명 관리

**상담 및 지원 체계**:
- 교육청 교원 상담 프로그램 및 심리 상담 서비스 활용
- 동료 교사와의 경험 공유 및 상호 지원 네트워크 구축
- 교원 힐링센터 및 교사 휴양시설 이용
- 교사 커뮤니티 및 온라인 지원 그룹 참여
- 학교 내 교사 상담실 및 멘토링 프로그램 활용

**실천 가능한 관리법**:
- 수업 중간 목과 어깨 스트레칭 (매 교시 간 2분)
- 학생 지도 후 감정 정리 및 스트레스 해소 시간 확보
- 방과 후 개인 시간 확보 및 취미 활동 참여
- 교육 외 취미 활동을 통한 스트레스 해소
- 주말 야외 활동 및 자연 속 휴식 시간 확보
- 동료 교사와의 정기적인 소통 및 정보 공유

**교사 특화 건강 모니터링**:
- 수업 전후 스트레스 수준 자가 점검
- 목소리 사용량 및 목 상태 일일 체크
- 서있는 시간 대비 휴식 시간 비율 관리
- 학기 중 vs 방학 중 건강 상태 비교 분석
- 학생 상담 후 정서 상태 모니터링`;case"military_medic":return`
## 의무병사 특화 조언
**환경 특성**: 군 의무대 근무, 의료진 역할과 군인 신분 병행
**건강 관리 방안**:
- 의무대 내 의료진과의 상호 건강 체크 시스템 활용
- 부대 내 스트레스 관리 프로그램 적극 참여
- 의료 지식을 활용한 자가 건강 모니터링
- 환자 케어로 인한 정신적 부담 관리 필요

**상담 및 지원 체계**:
- 부대 내 군의관, 선임 의무병과 상담
- 국군의료원 정신건강의학과 연계 상담
- 군 상담관(멘토) 제도 활용
- 의무병 커뮤니티 네트워크 구축

**실천 가능한 관리법**:
- 의무대 내 간단한 스트레칭 루틴 개발
- 근무 중 짧은 명상 시간 확보
- 의료진으로서의 사명감과 개인 건강의 균형
- 부대 내 체력 단련 프로그램 적극 참여`;case"military_career":return`
## 직업군인 특화 조언
**환경 특성**: 대한민국 군 간부, 리더십 역할과 책임감
**건강 관리 방안**:
- 부하 장병들의 모범이 되는 건강 관리
- 지휘관으로서의 스트레스 관리 필수
- 정기적인 군 건강검진 활용
- 가족과의 분리로 인한 정신적 부담 관리

**상담 및 지원 체계**:
- 군 EAP(직원지원프로그램) 활용
- 국군의료원 정신건강의학과 상담
- 상급 지휘관과의 멘토링
- 군 가족 상담 서비스 이용

**실천 가능한 관리법**:
- 부대 내 체력 단련 프로그램 솔선수범
- 규칙적인 생활 패턴 유지
- 가족과의 소통 시간 확보
- 부하 장병 관리 스트레스 해소법 개발`;case"elementary":return`
## 초등학생 특화 조언
**환경 특성**: 성장기 아동, 학습과 놀이의 균형
**건강 관리 방안**:
- 충분한 수면과 규칙적인 생활 패턴
- 스마트폰/게임 사용 시간 제한
- 신체 활동과 야외 놀이 시간 확보
- 학업 스트레스 조기 관리

**상담 및 지원 체계**:
- 학교 보건교사, 담임교사와 상담
- 부모님과의 충분한 소통
- 학교 상담교사 도움 요청
- 지역 아동센터 프로그램 참여

**실천 가능한 관리법**:
- 매일 30분 이상 야외 활동
- 취침 전 스마트폰 사용 금지
- 친구들과의 건전한 놀이 시간
- 규칙적인 식사와 간식 시간`;case"middle_school":return`
## 중학생 특화 조언
**환경 특성**: 사춘기 시작, 학업 부담 증가
**건강 관리 방안**:
- 사춘기 신체 변화에 대한 올바른 이해
- 학업 스트레스와 교우 관계 스트레스 관리
- 규칙적인 운동과 충분한 수면
- 정서적 변화에 대한 이해와 대처

**상담 및 지원 체계**:
- 학교 상담교사와의 정기적 상담
- 부모님과의 열린 대화
- 또래 상담 프로그램 참여
- 지역 청소년 상담센터 이용

**실천 가능한 관리법**:
- 주 3회 이상 운동 동아리 참여
- 스마트폰 사용 시간 자기 관리
- 친구들과의 건전한 취미 활동
- 스트레스 해소를 위한 예술 활동`;case"high_school":return`
## 고등학생 특화 조언
**환경 특성**: 입시 압박, 진로 고민 시기
**건강 관리 방안**:
- 입시 스트레스 관리 필수
- 장시간 학습으로 인한 신체 건강 관리
- 진로 고민과 불안감 해소
- 규칙적인 생활 패턴 유지

**상담 및 지원 체계**:
- 학교 진로상담교사와 상담
- 학교 보건교사 도움 요청
- 청소년 상담센터 이용
- 부모님과의 진로 상담

**실천 가능한 관리법**:
- 공부 중간 스트레칭과 휴식
- 주말 야외 활동 시간 확보
- 친구들과의 스트레스 해소 시간
- 규칙적인 식사와 충분한 수면`;case"university":return`
## 대학생 특화 조언
**환경 특성**: 자율적 생활, 진로 준비 시기
**건강 관리 방안**:
- 불규칙한 생활 패턴 개선
- 취업 준비 스트레스 관리
- 사회 진출 불안감 해소
- 인간관계 스트레스 관리

**상담 및 지원 체계**:
- 대학 학생상담센터 이용
- 대학 보건소 정신건강 상담
- 진로취업센터 상담
- 또래 상담 프로그램 참여

**실천 가능한 관리법**:
- 규칙적인 수면 패턴 유지
- 대학 내 운동 시설 적극 활용
- 동아리 활동을 통한 스트레스 해소
- 건전한 대인관계 형성`;case"housewife":return`
## 전업주부 특화 조언
**환경 특성**: 가정 내 역할 집중, 사회적 고립감 가능
**건강 관리 방안**:
- 육아 스트레스 관리
- 사회적 고립감 해소
- 자아 정체성 유지
- 가족 돌봄으로 인한 피로 관리

**상담 및 지원 체계**:
- 지역 여성센터 상담 프로그램
- 주민센터 건강 프로그램 참여
- 맘카페, 육아 모임 참여
- 가족 상담센터 이용

**실천 가능한 관리법**:
- 개인 시간 확보 (하루 30분 이상)
- 지역 커뮤니티 활동 참여
- 온라인 취미 활동
- 가족과의 역할 분담 협의`;case"parent":return`
## 학부모 특화 조언
**환경 특성**: 자녀 교육과 직장 생활 병행
**건강 관리 방안**:
- 자녀 교육 스트레스 관리
- 워라밸 실현 어려움 해소
- 자녀와의 갈등 상황 대처
- 경제적 부담 스트레스 관리

**상담 및 지원 체계**:
- 학교 학부모 상담 프로그램
- 지역 가족 상담센터 이용
- 학부모 모임 네트워크 구축
- 직장 내 EAP 프로그램 활용

**실천 가능한 관리법**:
- 자녀와의 질 높은 소통 시간
- 부모 개인 시간 확보
- 다른 학부모와의 정보 공유
- 스트레스 해소를 위한 취미 활동`;case"firefighter":return`
## 소방공무원 특화 조언
**환경 특성**: 고위험 업무, 생명 구조 책임감
**건강 관리 방안**:
- 외상 후 스트레스 장애(PTSD) 예방
- 불규칙한 근무 패턴 적응
- 신체적 위험 노출 스트레스 관리
- 동료와의 팀워크 스트레스 관리

**상담 및 지원 체계**:
- 소방청 직원 상담 프로그램
- 소방서 내 동료 상담 체계
- 전문 심리 상담사 연계
- 소방공무원 가족 지원 프로그램

**실천 가능한 관리법**:
- 근무 후 충분한 휴식과 회복
- 동료와의 경험 공유 시간
- 규칙적인 체력 관리
- 가족과의 소통 강화`;case"police":return`
## 경찰공무원 특화 조언
**환경 특성**: 치안 유지 책임, 사회적 갈등 노출
**건강 관리 방안**:
- 사회적 갈등 상황 스트레스 관리
- 불규칙한 근무와 야간 근무 적응
- 시민과의 갈등 상황 대처
- 법 집행 부담 스트레스 관리

**상담 및 지원 체계**:
- 경찰청 직원 상담 프로그램
- 경찰서 내 동료 상담 체계
- 전문 심리 상담사 연계
- 경찰공무원 가족 지원 프로그램

**실천 가능한 관리법**:
- 근무 중 스트레스 해소법 개발
- 동료와의 소통 강화
- 규칙적인 체력 단련
- 가족과의 시간 확보`;case"developer":return`
## 개발자 특화 조언
**환경 특성**: 장시간 컴퓨터 작업, 기술 변화 적응
**건강 관리 방안**:
- 장시간 앉아서 작업으로 인한 신체 문제
- 눈의 피로와 거북목 증후군 예방
- 기술 변화에 대한 학습 스트레스
- 프로젝트 데드라인 압박 관리

**상담 및 지원 체계**:
- 회사 내 EAP 프로그램 활용
- 개발자 커뮤니티 멘토링
- 직장 내 건강 관리 프로그램
- 온라인 개발자 상담 커뮤니티

**실천 가능한 관리법**:
- 1시간마다 10분 스트레칭
- 20-20-20 규칙 (20분마다 20초간 20피트 거리 응시)
- 규칙적인 운동 스케줄
- 업무 외 시간 디지털 디톡스`;case"designer":return`
## 디자이너 특화 조언
**환경 특성**: 창의적 업무, 클라이언트 요구 대응
**건강 관리 방안**:
- 창의적 블록과 아이디어 고갈 스트레스
- 클라이언트 피드백 스트레스 관리
- 장시간 컴퓨터 작업으로 인한 신체 문제
- 프로젝트 데드라인 압박 관리

**상담 및 지원 체계**:
- 디자이너 커뮤니티 네트워킹
- 회사 내 EAP 프로그램 활용
- 창의적 멘토링 프로그램
- 디자인 업계 상담 서비스

**실천 가능한 관리법**:
- 창의적 영감을 위한 취미 활동
- 정기적인 작업 환경 변화
- 눈과 목 건강을 위한 스트레칭
- 작업 외 시간 예술 활동 참여`;case"office_worker":return`
## 일반 사무직 특화 조언
**환경 특성**: 사무실 환경, 반복적 업무
**건강 관리 방안**:
- 장시간 앉아서 일하는 환경 개선
- 반복적 업무로 인한 정신적 피로
- 사무실 내 인간관계 스트레스
- 업무 효율성 압박 관리

**상담 및 지원 체계**:
- 회사 내 EAP 프로그램 활용
- 직장 내 건강 관리 프로그램
- 동료와의 소통 강화
- 노동조합 상담 서비스

**실천 가능한 관리법**:
- 점심시간 산책 또는 운동
- 업무 중 정기적 스트레칭
- 사무실 내 식물 키우기
- 취미 활동을 통한 스트레스 해소`;case"manager":return`
## 관리자 특화 조언
**환경 특성**: 리더십 역할, 팀 관리 책임
**건강 관리 방안**:
- 팀 관리와 성과 압박 스트레스
- 상급자와 하급자 사이의 중간 관리자 부담
- 의사결정 책임에 따른 스트레스
- 워라밸 실현의 어려움

**상담 및 지원 체계**:
- 경영진 코칭 프로그램
- 리더십 멘토링
- 관리자 교육 프로그램
- 회사 내 EAP 프로그램 활용

**실천 가능한 관리법**:
- 효과적인 위임과 권한 분배
- 정기적인 팀원과의 소통
- 개인 시간 확보와 경계 설정
- 스트레스 관리를 위한 취미 활동`;case"general_worker":return`
## 일반 직장인 특화 조언
**환경 특성**: 다양한 직장 환경, 워라밸 추구
**건강 관리 방안**:
- 직장 내 스트레스 관리
- 워라밸 실현 어려움 해소
- 직업 안정성에 대한 불안감
- 인간관계 스트레스 관리

**상담 및 지원 체계**:
- 회사 내 EAP 프로그램 활용
- 직장 내 건강 관리 프로그램
- 동료와의 네트워킹
- 지역 근로자 상담 센터

**실천 가능한 관리법**:
- 출퇴근 시간 활용한 운동
- 점심시간 충분한 휴식
- 취미 활동을 통한 스트레스 해소
- 가족과의 시간 확보`;case"entrepreneur":return`
## 사업가 특화 조언
**환경 특성**: 사업 운영 책임, 불확실성 관리
**건강 관리 방안**:
- 사업 성과에 대한 압박감 관리
- 불규칙한 생활 패턴 개선
- 경제적 불안정성 스트레스 관리
- 의사결정 부담 스트레스 해소

**상담 및 지원 체계**:
- 창업 멘토링 프로그램
- 사업가 네트워킹 모임
- 창업 지원센터 상담
- 사업가 정신건강 지원 프로그램

**실천 가능한 관리법**:
- 규칙적인 생활 패턴 유지
- 사업과 개인 시간 분리
- 동료 사업가와의 소통
- 스트레스 해소를 위한 취미 활동`;case"other":return`
## ${t} 특화 조언
**환경 특성**: ${t}의 고유한 업무 환경과 특성
**건강 관리 방안**:
- 해당 직업의 특성에 맞는 스트레스 관리
- 업무 환경에서 발생할 수 있는 건강 위험 요소 관리
- 직업적 특성을 고려한 생활 패턴 조정
- 해당 분야의 전문가적 스트레스 해소

**상담 및 지원 체계**:
- 해당 직업군의 전문 상담 서비스 활용
- 동종 업계 네트워킹을 통한 경험 공유
- 일반적인 직장인 상담 프로그램 활용
- 지역 사회 정신건강 센터 이용

**실천 가능한 관리법**:
- 해당 직업의 특성에 맞는 건강 관리 루틴 개발
- 업무 스트레스 해소를 위한 개인적 방법 찾기
- 동료들과의 소통과 정보 공유
- 개인 시간 확보와 취미 활동 참여`;default:return`
## 개인 맞춤형 조언
**건강 관리 방안**:
- 개인의 생활 패턴에 맞는 스트레스 관리
- 규칙적인 생활 습관 형성
- 적절한 휴식과 운동 시간 확보
- 사회적 관계 유지 및 강화

**상담 및 지원 체계**:
- 지역 정신건강 센터 이용
- 온라인 상담 서비스 활용
- 가족 및 친구와의 소통
- 전문 상담사 도움 요청

**실천 가능한 관리법**:
- 개인에게 맞는 스트레스 해소법 찾기
- 규칙적인 운동과 충분한 수면
- 건강한 식습관 유지
- 취미 활동을 통한 정신적 안정`}}static assessMeasurementQuality(e){const t=e.stability||0,n=e.intensity||0,a=e.averageMovement||0;let i="high",s=[],o="";return t<50?(i="low",s.push("측정 중 자세가 불안정했습니다"),o="측정 품질이 낮습니다. 결과 해석에 주의가 필요합니다."):t<70?(i="medium",s.push("측정 중 약간의 움직임이 있었습니다"),o="측정 품질이 보통입니다. 결과는 참고용으로 활용하세요."):o="측정 품질이 우수합니다. 결과를 신뢰할 수 있습니다.",n>50&&s.push("측정 중 과도한 움직임이 감지되었습니다"),a>.3&&s.push("측정 중 활발한 움직임이 있었습니다"),{assessment:o,reliability:i,warnings:s}}static getOccupationLabel(e,t){return e==="other"&&t?t:{teacher:"교사",military_medic:"직업군인",military_career:"직업군인",elementary:"초등학생",middle_school:"중학생",high_school:"고등학생",university:"대학생",housewife:"전업주부",parent:"학부모",firefighter:"소방공무원",police:"경찰공무원",developer:"개발자",designer:"디자이너",office_worker:"일반 사무직",manager:"관리자",general_worker:"일반 직장인",entrepreneur:"사업가",other:"기타","":""}[e]||""}static generateHealthAnalysisPrompt(e,t){var v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q;const n=this.convertPersonalInfo(e),a=ZHe(n),i=HD(n),s=JHe(n);console.log("🔧 개인화된 정상값 범위 계산 완료:",{personalGuideInfo:n,eegRanges:Object.keys(a).length,ppgRanges:Object.keys(i).length,accRanges:Object.keys(s).length});const o=new Date().getFullYear()-new Date(e.birthDate).getFullYear(),[l,c,u]=e.birthDate.split("-"),d={developer:{label:"개발자",advice:`개발자의 경우 장시간 집중적인 사고활동과 컴퓨터 작업으로 인한 정신적 피로와 스트레스가 특징입니다.
특히 디버깅, 문제해결 과정에서의 인지적 부하와 마감일 압박으로 인한 스트레스 관리가 중요합니다.`},teacher:{label:"교사",advice:`교사의 경우 학생 지도와 교육 과정에서의 지속적인 집중력 유지가 필요하며,
학생 관리 및 학부모 상담 등으로 인한 정서적 스트레스 관리가 중요합니다.`}}[e.occupation]||{label:e.occupation,advice:"직업적 특성을 고려한 맞춤형 건강 관리가 필요합니다."},A=d.label,g=d.advice,p=this.assessMeasurementQuality(t.accMetrics);return`
    # 전문적 정신 건강 수준 AI 건강 분석 시스템 (Gemini 2.0 Flash)

당신은 신경과학, 심장학, 스트레스 의학 전문의 수준의 AI 분석 시스템입니다.
다음 생체신호 데이터를 Visualizer의 의학적 기준에 따라 정확히 분석하고,
각 지표의 정상값 범위 대비 평가하여 전문적인 건강 분석 리포트를 작성하세요.

## 분석 기준 (개인화된 정상값 범위 - ${o}세 ${e.gender==="male"?"남성":"여성"} ${A} 기준)

### EEG 분석 기준 (indexGuides 기반 개인화)
${this.generateDynamicRangeString(a)}

### PPG 분석 기준 (indexGuides 기반 개인화)
${this.generateDynamicRangeString(i)}

### ACC 측정 품질 기준 (indexGuides 기반 개인화)
${this.generateDynamicRangeString(s)}

## 개인정보
- 이름: ${e.name}
- 나이: ${o}세
- 성별: ${e.gender==="male"?"남성":"여성"}
- 생년월일: ${l}년 ${c}월 ${u}일
- 직업: ${A}

${g}

## 측정 데이터 (60초간 실시간 측정)
### EEG (뇌파) 분석 지표
- 집중력 지수: ${t.eegMetrics.focusIndex} (개인화 정상범위: ${((v=a.집중력)==null?void 0:v.label)||"1.8-2.4"})
- 이완도 지수: ${t.eegMetrics.relaxationIndex} (개인화 정상범위: ${((m=a.이완도)==null?void 0:m.label)||"0.18-0.22"})
- 스트레스 지수: ${t.eegMetrics.stressIndex} (개인화 정상범위: ${((y=a.스트레스)==null?void 0:y.label)||"3.0-4.0"})
- 좌우뇌 균형: ${t.eegMetrics.hemisphericBalance} (개인화 정상범위: ${((x=a["좌우뇌 균형"])==null?void 0:x.label)||"-0.1~0.1"})
- 인지 부하: ${t.eegMetrics.cognitiveLoad} (개인화 정상범위: ${((b=a["인지 부하"])==null?void 0:b.label)||"0.3-0.8"})
- 정서 안정성: ${t.eegMetrics.emotionalStability} (개인화 정상범위: ${((S=a["정서 안정성"])==null?void 0:S.label)||"0.4-0.8"})
- 총 파워: ${t.eegMetrics.totalPower} μV² (정상: 850-1150)

### PPG (심박) 분석 지표
- 심박수: ${((_=t.ppgMetrics.heartRate)==null?void 0:_.value)||"N/A"} BPM (개인화 정상범위: ${((C=i.BPM)==null?void 0:C.label)||"60-100"})
- 산소포화도: ${((w=t.ppgMetrics.spo2)==null?void 0:w.value)||"N/A"}% (개인화 정상범위: ${((B=i.SpO2)==null?void 0:B.label)||"95-100"})
- RMSSD: ${((D=t.ppgMetrics.rmssd)==null?void 0:D.value)||"N/A"}ms (개인화 정상범위: ${((T=i.RMSSD)==null?void 0:T.label)||"20-50ms"})
- SDNN: ${((E=t.ppgMetrics.sdnn)==null?void 0:E.value)||"N/A"}ms (개인화 정상범위: ${((R=i.SDNN)==null?void 0:R.label)||"30-100"})
- pNN50: ${((M=t.ppgMetrics.pnn50)==null?void 0:M.value)||"N/A"}% (개인화 정상범위: ${((k=i.PNN50)==null?void 0:k.label)||"10-30"})
- 심박변이도: ${((O=t.ppgMetrics.lfHfRatio)==null?void 0:O.value)||"N/A"} (개인화 정상범위: ${((Q=i["LF/HF"])==null?void 0:Q.label)||"1.0-3.0"})

### ACC (가속도) 측정 품질 지표
- 안정성: ${t.accMetrics.stability.toFixed(2)}% (신뢰 기준: >70%)
- 강도: ${t.accMetrics.intensity.toFixed(2)}% (측정 방해 여부)
- 평균 움직임: ${t.accMetrics.averageMovement.toFixed(2)}g (정적 기준: <0.1g)
- 최대 움직임: ${t.accMetrics.maxMovement.toFixed(2)}g
- 떨림 정도: ${t.accMetrics.tremor.toFixed(2)}%
- 자세 안정성: ${t.accMetrics.postureStability.toFixed(2)}%

## 측정 품질 평가
${p.assessment}
**신뢰도**: ${p.reliability}
**주의사항**: ${p.warnings.join(", ")}

## 분석 요구사항

### 1. 각 지표별 정확한 의학적 해석
- 정상값 범위 대비 현재 상태 평가
- 의학적 의미와 생리학적 배경 설명
- 연령, 성별, 직업 특성 고려한 개인화 해석

### 2. 3대 건강 영역 종합 분석
- **정신건강**: EEG 지표 기반 뇌 기능 상태 평가
- **신체건강**: PPG 지표 기반 심혈관 상태 평가  
- **스트레스 건강**: 다중 지표 통합 스트레스 수준 평가

### 3. 측정 품질 반영
- ACC 데이터 기반 측정 신뢰성 평가
- 품질에 따른 결과 해석 조정
- 재측정 권고사항 제시

### 4. 실행 가능한 맞춤형 정신 건강 관리 가이드
- **즉시 실행** (오늘부터): 5분 이내, 도구 불필요
- **단기 목표** (1-4주): 주차별 단계적 계획
- **장기 전략** (1-6개월): 생활습관 변화 로드맵

## 응답 형식
다음 JSON 구조로 응답하세요:

\`\`\`json
{
  "measurementQuality": {
    "reliability": "high|medium|low",
    "confidenceLevel": 85,
    "qualityFactors": {
      "movementStability": 78,
      "dataConsistency": 92,
      "signalQuality": 88
    },
    "warnings": ["경고사항들"],
    "recommendations": ["측정 개선 방안들"]
  },
  "individualMetricAnalysis": {
    "eegMetrics": {
      "focusIndex": {
        "value": 2.1,
        "status": "normal|low|high",
        "interpretation": "정상값 범위 대비 의학적 해석",
        "medicalContext": "생리학적 배경 설명",
        "clinicalRelevance": "생리학적 의미"
      },
      "relaxationIndex": {
        "value": 0.20,
        "status": "normal|low|high",
        "interpretation": "의학적 해석",
        "medicalContext": "생리학적 배경",
        "clinicalRelevance": "생리학적 의미"
      },
      "stressIndex": {
        "value": 3.5,
        "status": "normal|low|high",
        "interpretation": "의학적 해석",
        "medicalContext": "생리학적 배경",
        "clinicalRelevance": "생리학적 의미"
      },
      "brainBalance": {
        "value": 0.05,
        "status": "normal|left|right",
        "interpretation": "의학적 해석",
        "medicalContext": "생리학적 배경",
        "clinicalRelevance": "생리학적 의미"
      },
      "cognitiveLoad": {
        "value": 0.6,
        "status": "optimal|low|high|overload",
        "interpretation": "의학적 해석",
        "medicalContext": "생리학적 배경",
        "clinicalRelevance": "생리학적 의미"
      }
    },
    "ppgMetrics": {
      "heartRate": {
        "value": 72,
        "status": "normal|bradycardia|tachycardia",
        "interpretation": "연령/성별 대비 평가",
        "medicalContext": "심혈관 상태 해석",
        "clinicalRelevance": "생리학적 의미"
      },
      "spo2": {
        "value": 98.5,
        "status": "normal|mild_hypoxia|severe_hypoxia",
        "interpretation": "의학적 해석",
        "medicalContext": "호흡순환 상태",
        "clinicalRelevance": "생리학적 의미"
      },
      "rmssd": {
        "value": 35,
        "status": "normal|low|high",
        "interpretation": "의학적 해석",
        "medicalContext": "부교감신경 활동",
        "clinicalRelevance": "생리학적 의미"
      },
      "sdnn": {
        "value": 65,
        "status": "normal|low|high",
        "interpretation": "의학적 해석",
        "medicalContext": "전체 HRV 수준",
        "clinicalRelevance": "생리학적 의미"
      },
      "lfhfRatio": {
        "value": 2.1,
        "status": "optimal|normal|parasympathetic|stress",
        "interpretation": "의학적 해석",
        "medicalContext": "자율신경 균형",
        "clinicalRelevance": "생리학적 의미"
      }
    }
  },
  "healthDomainAnalysis": {
    "mentalHealth": {
      "score": 85,
      "grade": "우수|양호|보통|주의|위험",
      "keyFindings": ["주요 발견사항들"],
      "strengths": ["강점들"],
      "concerns": ["우려사항들"],
      "analysis": "EEG 지표 종합 분석 (의학적 근거 포함)",
      "recommendations": {
        "immediate": ["즉시 실행 방안들"],
        "shortTerm": ["단기 목표들"],
        "longTerm": ["장기 전략들"]
      }
    },
    "physicalHealth": {
      "score": 88,
      "grade": "우수|양호|보통|주의|위험",
      "cardiovascularStatus": "심혈관 상태 평가",
      "autonomicBalance": "자율신경 균형 분석",
      "keyFindings": ["주요 발견사항들"],
      "analysis": "PPG 지표 종합 분석 (의학적 근거 포함)",
      "recommendations": {
        "immediate": ["즉시 실행 방안들"],
        "shortTerm": ["단기 목표들"],
        "longTerm": ["장기 전략들"]
      }
    },
    "stressHealth": {
      "score": 75,
      "level": "낮음|보통|높음|심각",
      "stressType": "급성|만성|복합",
      "stressSources": ["추정 스트레스 원인들"],
      "physiologicalImpact": "생리적 영향 분석",
      "analysis": "다중 지표 통합 스트레스 분석",
      "recommendations": {
        "immediate": ["즉시 실행 방안들"],
        "shortTerm": ["단기 목표들"],
        "longTerm": ["장기 전략들"]
      }
    }
  },
  "overallHealth": {
    "score": 85,
    "grade": "우수|양호|보통|주의|위험",
    "summary": "전반적인 건강 상태 요약 (3-4문장, 의학적 근거 포함)",
    "keyFindings": ["주요 발견사항1", "주요 발견사항2", "주요 발견사항3"],
    "riskFactors": ["위험 요소1", "위험 요소2"],
    "strengths": ["강점1", "강점2"]
  },
  "problemAreas": [
    {
      "area": "문제 영역명 (예: 스트레스 관리)",
      "severity": "경미|중간|심각",
      "description": "구체적 문제 상황 설명",
      "solutions": ["해결방안 1", "해결방안 2", "해결방안 3"]
    }
  ],
  "personalizedRecommendations": {
    "immediate": {
      "lifestyle": ["오늘부터 시작할 수 있는 생활습관 (3가지)"],
      "exercise": ["즉시 실행 가능한 운동 (5분 이내, 3가지)"],
      "breathing": ["즉시 실행 가능한 호흡법 (3가지)"],
      "posture": ["즉시 개선 가능한 자세 관리 (3가지)"]
    },
    "shortTerm": {
      "lifestyle": ["1-4주 생활습관 개선 계획 (3가지)"],
      "exercise": ["단기 운동 계획 (종류, 빈도, 강도, 3가지)"],
      "diet": ["단기 식습관 개선 방안 (3가지)"],
      "sleep": ["단기 수면 개선 계획 (3가지)"],
      "stressManagement": ["단기 스트레스 관리 체계 (3가지)"]
    },
    "longTerm": {
      "lifestyle": ["장기 생활습관 변화 로드맵 (3가지)"],
      "exercise": ["장기 운동 계획 (단계별 발전, 3가지)"],
      "mentalCare": ["장기 정신건강 관리 전략 (3가지)"],
      "socialSupport": ["사회적 지원 체계 구축 (3가지)"],
      "professionalHelp": ["전문가 도움 활용 방안 (3가지)"]
    },
    "occupationSpecific": {
      "workplaceStrategies": ["직장 내 실행 방안 (3가지)"],
      "timeManagement": ["업무 시간 관리 최적화 (3가지)"],
      "environmentalChanges": ["근무 환경 개선 (3가지)"],
      "colleagueInteraction": ["동료 관계 개선 방안 (3가지)"]
    }
  },
  "professionalGuidance": {
    "consultationNeeded": true,
    "recommendedSpecialists": ["추천 전문의"],
    "urgencyLevel": "즉시|1주내|1개월내|정기검진",
    "warningSignals": ["악화 징후들"],
    "emergencyContacts": ["응급 상황 연락처"]
  },
  "followUpPlan": {
    "remeasurement": {
      "schedule": "재측정 권장 주기 (예: 4주 후)",
      "keyMetrics": "주요 모니터링 지표들",
      "improvementTargets": "개선 목표치들"
    },
    "progressTracking": {
      "dailyChecks": ["일일 체크사항 (3가지)"],
      "weeklyReviews": ["주간 검토사항 (3가지)"],
      "monthlyAssessments": ["월간 평가사항 (3가지)"]
    },
    "milestones": [
      {
        "timeframe": "2주 후",
        "goals": "단기 목표",
        "successCriteria": "성공 기준"
      },
      {
        "timeframe": "1개월 후",
        "goals": "중기 목표",
        "successCriteria": "성공 기준"
      },
      {
        "timeframe": "3개월 후",
        "goals": "장기 목표",
        "successCriteria": "성공 기준"
      }
    ]
  }
}
\`\`\`

## 분석 가이드라인

### 기본 분석 원칙
1. **개인 맞춤형 분석**: 나이, 성별, 직업, 생활 패턴을 종합적으로 고려
2. **의학적 근거 기반**: 각 지표의 의학적 의미와 정상 범위 대비 해석
3. **상호 연관성 분석**: EEG, PPG, ACC 데이터 간의 상관관계 분석
4. **측정 품질 반영**: ACC 기반 신뢰성 평가 결과를 분석에 반영
5. **실행 가능성 중시**: 구체적이고 실현 가능한 개선 방안 제시

### 중요한 분석 요구사항
1. **각 지표를 정상값 범위와 비교하여 정확히 분석**
2. **의학적 공식과 생리학적 의미를 기반으로 해석**
3. **측정 품질이 낮을 경우 결과 해석에 주의사항 포함**
4. **3대 건강 영역(정신/신체/스트레스)을 종합적으로 평가**
5. **즉시/단기/장기 실행 계획을 구체적으로 제시**

**반드시 JSON 형식으로만 응답하세요. 다른 텍스트는 포함하지 마세요.**

### 기본 분석 원칙
1. **개인 맞춤형 분석**: 나이, 성별, 직업, 생활 패턴을 종합적으로 고려
2. **의학적 근거 기반**: 각 지표의 의학적 의미와 정상 범위 대비 해석
3. **상호 연관성 분석**: EEG, PPG, ACC 데이터 간의 상관관계 분석
4. **시간적 변화 고려**: 측정 시간대와 개인 생체리듬 반영
5. **환경적 요인 고려**: 측정 환경, 스트레스 상황 등 외부 요인 영향 분석

### 상세 분석 요구사항
1. **정신건강 분석**:
   - 집중력, 이완도, 스트레스 지수의 의학적 해석
   - 좌우뇌 활성도 불균형 분석 및 의미
   - 인지 부하와 정신적 피로도의 상관관계
   - 연령대별 정상 범위 대비 평가
   - 직업 특성에 따른 정신건강 위험 요소 분석

2. **신체건강 분석**:
   - 심박수, 산소포화도의 연령별 정상 범위 대비 평가
   - 심박변이도(HRV) 지표의 자율신경계 상태 해석
   - RMSSD, SDNN, pNN50의 의학적 의미와 상호 관계
   - 스트레스 지수와 회복 지수의 균형 분석
   - 움직임 패턴과 자세 안정성의 신경학적 의미

3. **스트레스 수준 분석**:
   - 다중 생체신호를 통한 종합적 스트레스 평가
   - 급성 스트레스 vs 만성 스트레스 구분
   - 스트레스 원인 추정 및 대응 방안
   - 개인별 스트레스 취약점 분석

### 추천사항 상세화 요구사항
1. **즉시 실행 가능한 방안** (오늘부터 시작):
   - 구체적인 시간, 방법, 빈도 명시
   - 5분 이내 실행 가능한 간단한 방법들
   - 특별한 도구나 비용 없이 가능한 방법들

2. **단기 개선 방안** (1-4주):
   - 주차별 단계적 실행 계획
   - 측정 가능한 목표 설정
   - 진행 상황 점검 방법 제시

3. **중장기 개선 방안** (1-6개월):
   - 생활 습관 변화 로드맵
   - 전문가 도움이 필요한 경우 구체적 안내
   - 예상 개선 효과와 시기 명시

4. **직업별 특화 조언**:
   - 근무 환경 내에서 실행 가능한 방법
   - 해당 직업군 특성에 맞는 건강 관리법
   - 직업 관련 건강 위험 요소 예방법
   - 동료, 상사와의 관계에서 활용 가능한 방법

5. **사회적 지원 체계 활용**:
   - 구체적인 기관명, 연락처, 이용 방법
   - 온라인/오프라인 자원 구분
   - 비용, 접근성, 효과성 정보 포함

### 문제 영역 식별 및 해결 방안
1. **문제 우선순위 설정**: 건강 위험도와 개선 가능성을 고려한 순위
2. **단계별 해결 방안**: 즉시 → 단기 → 중장기 해결책
3. **예상 개선 효과**: 구체적인 수치와 기간 제시
4. **진행 상황 모니터링**: 자가 점검 방법과 전문가 상담 시점

### 개인화 요소 강화
1. **연령대별 특성**: 각 연령대의 생리적, 심리적 특성 반영
2. **성별 차이**: 호르몬, 신체 구조 등 성별 특성 고려
3. **직업 환경**: 근무 시간, 스트레스 요인, 물리적 환경 고려
4. **생활 패턴**: 수면, 식사, 운동 패턴 분석 및 개선 방안

### 추후 관리 방안
1. **정기적 재측정**: 권장 주기와 측정 포인트
2. **전문가 상담**: 상담이 필요한 경우와 적절한 전문가 유형
3. **자가 관리**: 일상에서 지속 가능한 건강 관리 방법
4. **응급 상황**: 즉시 전문의 상담이 필요한 증상들

**중요**: 의학적 진단이 아닌 건강 관리 참고용 정보임을 명시하고, 심각한 이상이 의심되는 경우 즉시 전문의 상담을 권하세요. 모든 추천사항은 개인의 현재 건강 상태와 의학적 이력을 고려하여 전문의와 상담 후 실행하도록 안내하세요.
`}static async analyzeHealth(e,t){try{console.log("🔍 Gemini AI 종합 건강 분석 시작 (새로운 모듈형 아키텍처)"),console.log("⏱️ 예상 소요 시간: 약 10-20초");const n=await w5.performComprehensiveAnalysis(e,t);return console.log("✅ Gemini AI 종합 건강 분석 완료"),n}catch(n){throw console.error("❌ Gemini AI 건강 분석 실패:",n),new Error(`AI 분석 중 오류가 발생했습니다: ${n instanceof Error?n.message:"알 수 없는 오류"}`)}}static validateAnalysisResult(e){const t=["overallHealth","detailedAnalysis","problemAreas","personalizedRecommendations","followUpActions"];for(const n of t)if(!e[n])throw new Error(`분석 결과에 필수 필드 '${n}'가 없습니다.`);if(e.overallHealth.score<0||e.overallHealth.score>100)throw new Error("전체 건강 점수가 유효하지 않습니다.");e.problemAreas.length>3&&(e.problemAreas=e.problemAreas.slice(0,3))}static async testAnalysis(e,t){var h,d,A,g,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y;console.log("🔍 테스트 분석 시작 - 실제 AI 분석 시간 시뮬레이션");const n=[{step:"정신건강 분석",delay:800},{step:"신체건강 분석",delay:1e3},{step:"스트레스 분석",delay:900},{step:"종합 분석",delay:1200},{step:"맞춤형 추천 생성",delay:700}];for(const{step:Z,delay:de}of n)console.log(`🔍 ${Z} 중...`),await new Promise(he=>setTimeout(he,de));console.log("🔍 테스트 분석 완료 - 결과 생성");let a=e.birthYear;if(!a&&e.birthDate){const[Z]=e.birthDate.split("-").map(Number);a=Z}const s=new Date().getFullYear()-a,l={soldier:"군인",elementary:"초등학생",middle_school:"중학생",high_school:"고등학생",university:"대학생",housewife:"전업주부",office_worker:"직장인",entrepreneur:"사업가"}[e.occupation]||e.occupation,u=(Z=>({soldier:{lifestyle:["부대 내 규칙적인 생활 패턴 유지","면회, 외박 시 충분한 휴식","동기들과 건전한 관계 유지"],exercise:["부대 내 체력단련 적극 참여","개인 시간 활용한 스트레칭","동기들과 함께하는 단체 운동"],mentalCare:["부대 내 상담관과 정기적 면담","분대장, 소대장과 소통","군 복무 중 정신건강 프로그램 참여"]},elementary:{lifestyle:["규칙적인 수면 시간 유지","충분한 놀이 시간 확보","부모님과 함께하는 시간 늘리기"],exercise:["학교 체육 시간 적극 참여","친구들과 함께하는 놀이 활동","가족과 함께하는 야외 활동"],mentalCare:["부모님, 선생님과 자주 대화하기","학교 상담교사 활용","친구들과 건전한 관계 유지"]},middle_school:{lifestyle:["규칙적인 생활 패턴 유지","스마트폰 사용 시간 조절","충분한 수면 시간 확보"],exercise:["학교 체육 활동 적극 참여","방과 후 스포츠 활동","가족과 함께하는 운동"],mentalCare:["부모님, 담임선생님과 소통","학교 상담실 활용","또래 상담 프로그램 참여"]},high_school:{lifestyle:["입시 스트레스 관리","규칙적인 학습 패턴 유지","충분한 수면 시간 확보"],exercise:["틈틈이 할 수 있는 간단한 운동","계단 오르내리기","스트레칭 습관화"],mentalCare:["진로상담교사와 상담","부모님과 진로 대화","청소년상담복지센터 활용"]},university:{lifestyle:["규칙적인 생활 패턴 유지","취업 준비 스트레스 관리","건전한 대인관계 유지"],exercise:["캠퍼스 내 체육시설 활용","동아리 활동 참여","친구들과 함께하는 운동"],mentalCare:["학생상담센터 활용","교수님과 상담","동아리, 학회 활동 참여"]},housewife:{lifestyle:["규칙적인 개인 시간 확보","육아 스트레스 관리","사회적 관계 유지"],exercise:["집에서 할 수 있는 홈트레이닝","아이와 함께하는 산책","육아맘 모임 참여"],mentalCare:["지역 육아종합지원센터 활용","육아맘 커뮤니티 참여","정신건강복지센터 상담"]},office_worker:{lifestyle:["워라밸 실현","규칙적인 퇴근 시간 유지","충분한 휴식 시간 확보"],exercise:["점심시간 활용한 산책","출퇴근 시 계단 이용","주말 운동 활동"],mentalCare:["직장 내 EAP 프로그램 활용","동료와의 건전한 관계 유지","취미 활동 시간 확보"]},entrepreneur:{lifestyle:["규칙적인 생활 패턴 유지","사업 스트레스 관리","충분한 휴식 시간 확보"],exercise:["바쁜 일정 중 틈틈이 운동","사업가 네트워크 운동 모임","스트레스 해소 운동"],mentalCare:["사업가 멘토링 프로그램 참여","동업자와의 소통","전문 상담사 도움"]}})[Z]||{lifestyle:["규칙적인 생활 패턴 유지","충분한 수면 시간 확보","스트레스 관리"],exercise:["규칙적인 운동","스트레칭","유산소 운동"],mentalCare:["전문가 상담","사회적 관계 유지","취미 활동"]})(e.occupation);return{overallHealth:{score:82,grade:"양호",summary:`${e.name}님(${s}세, ${l})의 전반적인 건강 상태는 양호한 편입니다. 측정된 생체신호들이 대부분 정상 범위에 있으며, ${l}의 특성을 고려한 맞춤형 관리를 통해 더욱 건강한 상태를 유지할 수 있습니다. 특히 스트레스 관리에 집중하면 전반적인 건강 개선 효과를 기대할 수 있습니다.`,keyFindings:["심혈관 건강 지표가 연령대 평균보다 우수함","뇌파 활성도가 적절한 수준을 유지하고 있음","스트레스 수준이 관리 가능한 범위 내에 있음"],riskFactors:["직업 특성상 지속적인 스트레스 노출","정신적 피로도가 약간 높은 편"],strengths:["우수한 심혈관 건강 상태","안정적인 자율신경계 기능"]},detailedAnalysis:{mentalHealth:{score:78,status:"양호",analysis:`뇌파 분석 결과 집중력 지수가 ${((d=(h=t.eegMetrics.focusIndex)==null?void 0:h.value)==null?void 0:d.toFixed(2))||"N/A"}로 연령대 평균 수준을 보이고 있습니다. 이완도는 ${((g=(A=t.eegMetrics.relaxationIndex)==null?void 0:A.value)==null?void 0:g.toFixed(3))||"N/A"}로 적절한 수준이며, 좌우뇌 활성도 균형도 ${((v=(p=t.eegMetrics.hemisphericBalance)==null?void 0:p.value)==null?void 0:v.toFixed(3))||"N/A"}로 양호합니다. 다만 인지 부하가 ${((y=(m=t.eegMetrics.cognitiveLoad)==null?void 0:m.value)==null?void 0:y.toFixed(3))||"N/A"}로 약간 높아 정신적 피로 관리가 필요합니다. ${l}의 특성상 지속적인 정신적 집중이 필요하므로 적절한 휴식과 이완 기법이 중요합니다.`,keyMetrics:{concentration:`집중력 지수 ${((b=(x=t.eegMetrics.focusIndex)==null?void 0:x.value)==null?void 0:b.toFixed(2))||"N/A"} - 연령대 평균 수준`,relaxation:`이완도 지수 ${((_=(S=t.eegMetrics.relaxationIndex)==null?void 0:S.value)==null?void 0:_.toFixed(3))||"N/A"} - 적절한 수준`,brainBalance:`좌우뇌 균형 ${((w=(C=t.eegMetrics.hemisphericBalance)==null?void 0:C.value)==null?void 0:w.toFixed(3))||"N/A"} - 양호한 균형`,cognitiveLoad:`인지 부하 ${((D=(B=t.eegMetrics.cognitiveLoad)==null?void 0:B.value)==null?void 0:D.toFixed(3))||"N/A"} - 약간 높음, 관리 필요`},immediateActions:["매시간 5분씩 심호흡 연습 (4-7-8 호흡법)","눈 운동 및 목 스트레칭 (20-20-20 규칙 적용)"],shortTermGoals:["주 3회 이상 20분 명상 실습으로 이완도 10% 향상","수면 시간 7-8시간 유지하여 정신적 피로도 개선"],longTermStrategy:["스트레스 관리 기법 체계화하여 인지 부하 20% 감소","정기적인 정신건강 점검 및 전문가 상담 체계 구축"]},physicalHealth:{score:85,status:"우수",analysis:`심박수 ${((T=t.ppgMetrics.heartRate)==null?void 0:T.value)||"N/A"} BPM은 연령대 정상 범위에 있으며, 산소포화도 ${((E=t.ppgMetrics.spo2)==null?void 0:E.value)||"N/A"}%로 우수한 수준입니다. 심박변이도 지표인 RMSSD ${((R=t.ppgMetrics.rmssd)==null?void 0:R.value)||"N/A"}ms, SDNN ${((M=t.ppgMetrics.sdnn)==null?void 0:M.value)||"N/A"}ms는 자율신경계의 균형이 잘 유지되고 있음을 보여줍니다. 회복 지수 ${((k=t.ppgMetrics.sdnn)==null?void 0:k.value)||"N/A"}는 양호하여 신체적 회복 능력이 우수합니다. 전반적으로 심혈관 건강이 매우 양호한 상태입니다.`,keyMetrics:{heartRate:`심박수 ${((O=t.ppgMetrics.heartRate)==null?void 0:O.value)||"N/A"}BPM - 정상 범위`,hrv:`HRV ${((Q=t.ppgMetrics.lfHfRatio)==null?void 0:Q.value)||"N/A"} - 자율신경계 균형 양호`,oxygenSaturation:`SpO2 ${((H=t.ppgMetrics.spo2)==null?void 0:H.value)||"N/A"}% - 우수한 수준`,autonomicBalance:`자율신경계 균형 우수 (RMSSD: ${((W=t.ppgMetrics.rmssd)==null?void 0:W.value)||"N/A"}ms)`},immediateActions:["매일 10분 이상 유산소 운동 (계단 오르기, 빠른 걷기)","충분한 수분 섭취 (하루 2L 이상)"],shortTermGoals:["주 3회 30분 이상 중강도 운동으로 심폐 기능 5% 향상","규칙적인 식사 시간 유지하여 대사 건강 개선"],longTermStrategy:["연간 정기 건강검진을 통한 심혈관 건강 모니터링","연령 증가에 따른 예방적 건강 관리 체계 구축"]},stressLevel:{score:72,level:"보통",analysis:`종합적인 스트레스 지수는 ${((ee=(te=t.eegMetrics.stressIndex)==null?void 0:te.value)==null?void 0:ee.toFixed(1))||"N/A"}로 보통 수준에 있습니다. 심박변이도 기반 자율신경 균형 ${((G=(j=t.ppgMetrics.lfHfRatio)==null?void 0:j.value)==null?void 0:G.toFixed(1))||"N/A"}와 함께 분석하면 주로 정신적 스트레스가 우세한 상태입니다. 자세 안정성 ${((Y=t.accMetrics.postureStability)==null?void 0:Y.toFixed(1))||"N/A"}는 양호하여 신체적 긴장도는 높지 않습니다. ${l}의 특성상 발생하는 스트레스로 보이며, 적절한 관리를 통해 개선 가능한 수준입니다.`,stressType:"정신적 스트레스 우세 (급성 스트레스 패턴)",stressSources:[`${l} 업무 특성으로 인한 정신적 부담`,"지속적인 집중력 요구로 인한 인지적 피로"],physiologicalImpact:"자율신경계에 경미한 영향, 심혈관계는 양호한 상태 유지",immediateActions:["업무 중 매 2시간마다 5분 휴식 및 스트레칭","점심시간 10분 이상 야외 산책"],shortTermGoals:["스트레스 관리 기법 학습으로 스트레스 지수 15% 감소","규칙적인 운동으로 스트레스 회복력 향상"],longTermStrategy:["직업 특성에 맞는 스트레스 관리 시스템 구축","정기적인 스트레스 수준 모니터링 및 조기 개입"]}},problemAreas:[{area:"스트레스 관리",severity:"중간",description:"측정된 스트레스 지수가 평균보다 높게 나타났습니다. 지속적인 스트레스는 장기적으로 심혈관 건강, 면역 기능, 정신건강에 부정적 영향을 줄 수 있습니다.",solutions:["매일 아침 10분 명상 (헤드스페이스 앱 활용)","업무 중 1시간마다 3분 심호흡 (4-7-8 호흡법)","점심시간 15분 산책 (자연광 노출)"]}],personalizedRecommendations:{immediate:{lifestyle:["기상 후 5분 스트레칭 (목, 어깨, 허리)","업무 시작 전 3분 명상 (마음챙김 호흡)","매시간 정각에 1분 심호흡 (알람 설정)"],exercise:["계단 오르기 (엘리베이터 대신 계단 이용)","책상에서 목 돌리기 (시계방향 5회, 반시계방향 5회)","어깨 으쓱하기 (10회씩 3세트)"],breathing:["4-7-8 호흡법 (4초 흡입, 7초 참기, 8초 내쉬기)","복식호흡 (배가 나오도록 천천히 호흡)","코호흡 (입 대신 코로만 호흡하기)"],posture:["모니터 높이 눈높이 맞추기","의자 등받이에 허리 밀착시키기","발을 바닥에 평평하게 놓기"]},shortTerm:{lifestyle:u.lifestyle,exercise:u.exercise,diet:["규칙적인 식사 시간 유지 (아침 8시, 점심 12시, 저녁 6시)","충분한 수분 섭취 (하루 2L, 시간당 한 컵)","가공식품 섭취 줄이기 (주 2회 이하로 제한)"],sleep:["일정한 수면 시간 유지 (밤 11시 취침, 아침 7시 기상)","수면 환경 개선 (실온 18-20도, 어둡고 조용한 환경)","취침 1시간 전 디지털 기기 사용 중단"],stressManagement:["주 3회 20분 명상 실습 (월, 수, 금)","스트레스 일기 작성 (매일 저녁 5분)","주말 스트레스 해소 활동 (취미, 운동, 사교)"]},longTerm:{lifestyle:["월별 건강 목표 설정 및 점검","계절별 생활 패턴 조정","연간 건강 관리 계획 수립"],exercise:["단계별 운동 강도 증가 (초급 → 중급 → 고급)","다양한 운동 종목 도전 (유산소, 근력, 유연성)","운동 파트너 또는 그룹 활동 참여"],mentalCare:u.mentalCare,socialSupport:["가족, 친구와의 정기적인 만남","직업 관련 커뮤니티 참여","멘토링 관계 구축"],professionalHelp:["정기적인 건강검진 (연 1회)","스트레스 관리 전문가 상담 (필요시)","영양사, 운동 전문가 상담 (분기별)"]},occupationSpecific:{workplaceStrategies:["업무 공간 환경 개선 (조명, 의자, 모니터 높이)","업무 중 정기적 휴식 시간 확보","동료와의 스트레스 공유 및 해소"],timeManagement:["우선순위 기반 업무 계획 수립","집중 시간과 휴식 시간 구분","업무 외 시간 보호"],environmentalChanges:["책상 주변 식물 배치 (스트레스 완화)","자연광 활용 (창가 자리 선호)","소음 차단 및 집중 환경 조성"],colleagueInteraction:["동료와의 건설적인 소통","업무 스트레스 공유 및 해결책 모색","팀 내 건강 관리 문화 조성"]}},supportResources:{professionalHelp:[{type:"정신건강의학과 전문의",when:"스트레스 증상이 2주 이상 지속될 때",how:"병원 예약 또는 온라인 상담",cost:"보험 적용 시 1-2만원",accessibility:"전국 병원 및 온라인 플랫폼 이용 가능"},{type:"임상심리사",when:"스트레스 관리 기법 학습이 필요할 때",how:"심리상담센터 또는 병원 심리과",cost:"회당 5-10만원",accessibility:"지역 상담센터 및 온라인 상담 가능"}],onlineResources:["마인드풀니스 앱 (헤드스페이스, 캄)","온라인 스트레스 관리 프로그램","정신건강 자가진단 도구"],communitySupport:["직장인 스트레스 관리 모임","명상 및 요가 클래스","건강 관리 온라인 커뮤니티"],emergencyContacts:["정신건강 위기상담전화: 1577-0199","생명의전화: 1588-9191"]},followUpPlan:{remeasurement:{schedule:"4주 후 재측정 권장",keyMetrics:"주요 모니터링 지표들",improvementTargets:"개선 목표치들"},progressTracking:{dailyChecks:["일일 체크사항 (3가지)"],weeklyReviews:["주간 검토사항 (3가지)"],monthlyAssessments:["월간 평가사항 (3가지)"]},milestones:[{timeframe:"2주 후",goals:"단기 목표",successCriteria:"성공 기준"},{timeframe:"1개월 후",goals:"중기 목표",successCriteria:"성공 기준"},{timeframe:"3개월 후",goals:"장기 목표",successCriteria:"성공 기준"}],adjustmentTriggers:["건강 지표 악화 시 즉시 재측정","목표 달성률 50% 미만 시 계획 수정","새로운 증상 발생 시 전문가 상담"]},followUpActions:["2주 후 재측정을 통한 건강 상태 변화 추적","매일 스트레스 수준 자가 체크 및 기록","주 1회 건강 관리 목표 달성도 점검","1개월 후 전문가 상담 고려","지속적인 생활습관 개선 실천 및 모니터링"],timestamp:Date.now(),personalInfo:e,measurementData:t,metadata:{modelUsed:"test-model",promptTokens:0,responseTokens:0,totalTokens:0}}}static async analyzeMentalHealth(e,t){const n=this.generateMentalHealthPrompt(e,t),a=await this.makeRequest(n),i=this.extractTextFromResponse(a),s=[/```json\s*([\s\S]*?)\s*```/,/```json([\s\S]*?)```/,/```\s*([\s\S]*?)\s*```/,/```([\s\S]*?)```/,/\{[\s\S]*\}/];for(const o of s){const l=i.match(o);if(l)try{const c=l[1]||l[0];return JSON.parse(c)}catch(c){console.warn("정신건강 분석 JSON 파싱 실패, 다음 패턴 시도:",c);continue}}throw console.error("정신건강 분석 응답 파싱 실패. 응답 텍스트:",i),new Error("정신건강 분석 응답에서 JSON 형식을 찾을 수 없습니다.")}static async analyzePhysicalHealth(e,t){const n=this.generatePhysicalHealthPrompt(e,t),a=await this.makeRequest(n),i=this.extractTextFromResponse(a),s=[/```json\s*([\s\S]*?)\s*```/,/```json([\s\S]*?)```/,/```\s*([\s\S]*?)\s*```/,/```([\s\S]*?)```/,/\{[\s\S]*\}/];for(const o of s){const l=i.match(o);if(l)try{const c=l[1]||l[0];return JSON.parse(c)}catch(c){console.warn("신체건강 분석 JSON 파싱 실패, 다음 패턴 시도:",c);continue}}throw console.error("신체건강 분석 응답 파싱 실패. 응답 텍스트:",i),new Error("신체건강 분석 응답에서 JSON 형식을 찾을 수 없습니다.")}static async analyzeStressHealth(e,t){const n=this.generateStressHealthPrompt(e,t),a=await this.makeRequest(n),i=this.extractTextFromResponse(a),s=[/```json\s*([\s\S]*?)\s*```/,/```json([\s\S]*?)```/,/```\s*([\s\S]*?)\s*```/,/```([\s\S]*?)```/,/\{[\s\S]*\}/];for(const o of s){const l=i.match(o);if(l)try{const c=l[1]||l[0];return JSON.parse(c)}catch(c){console.warn("스트레스 건강 분석 JSON 파싱 실패, 다음 패턴 시도:",c);continue}}throw console.error("스트레스 건강 분석 응답 파싱 실패. 응답 텍스트:",i),new Error("스트레스 건강 분석 응답에서 JSON 형식을 찾을 수 없습니다.")}static async generateComprehensiveAnalysis(e,t,n,a,i){const s=this.generateComprehensiveAnalysisPrompt(e,t,n,a,i),o=await this.makeRequest(s,{...this.COMPREHENSIVE_ANALYSIS_CONFIG,model:"comprehensive-analysis"}),l=this.extractTextFromResponse(o),c=[/```json\s*([\s\S]*?)\s*```/,/```json([\s\S]*?)```/,/```\s*([\s\S]*?)\s*```/,/```([\s\S]*?)```/,/\{[\s\S]*\}/];for(const u of c){const h=l.match(u);if(h)try{const d=h[1]||h[0];return JSON.parse(d)}catch(d){console.warn("종합 분석 JSON 파싱 실패, 다음 패턴 시도:",d);continue}}throw console.error("종합 분석 응답 파싱 실패. 응답 텍스트:",l),new Error("종합 분석 응답에서 JSON 형식을 찾을 수 없습니다.")}static combineAnalysisResults(e,t,n,a,i,s){return{overallHealth:{score:s.overallScore,grade:this.getHealthGrade(s.overallScore),summary:s.personalizedSummary,keyFindings:[...n.recommendations.slice(0,2),...a.recommendations.slice(0,2)],riskFactors:[...n.concerns,...a.concerns],strengths:[...this.extractStrengths(n),...this.extractStrengths(a)]},detailedAnalysis:{mentalHealth:{score:n.score,status:n.status,analysis:n.analysis,keyMetrics:{concentration:n.keyMetrics.concentration||"집중력 지수 분석",relaxation:n.keyMetrics.relaxation||"이완도 지수 분석",brainBalance:n.keyMetrics.brainBalance||"좌우뇌 균형 분석",cognitiveLoad:n.keyMetrics.cognitiveLoad||"인지 부하 분석"},immediateActions:s.immediateActions.slice(0,2),shortTermGoals:s.shortTermGoals.slice(0,2),longTermStrategy:s.longTermStrategy.slice(0,2)},physicalHealth:{score:a.score,status:a.status,analysis:a.analysis,keyMetrics:{heartRate:a.keyMetrics.heartRate||"심박수 분석",hrv:a.keyMetrics.rmssd||"심박변이도 분석",oxygenSaturation:a.keyMetrics.spo2||"산소포화도 분석",autonomicBalance:a.keyMetrics.lfHfRatio||"자율신경 균형 분석"},immediateActions:s.immediateActions.slice(2,4),shortTermGoals:s.shortTermGoals.slice(2,4),longTermStrategy:s.longTermStrategy.slice(2,4)},stressLevel:{score:i.score,level:i.status,analysis:i.analysis,stressType:"종합 스트레스",stressSources:i.stressFactors,physiologicalImpact:"스트레스로 인한 생리적 영향 분석",immediateActions:s.immediateActions.slice(4,6),shortTermGoals:s.shortTermGoals.slice(4,6),longTermStrategy:s.longTermStrategy.slice(4,6)}},problemAreas:this.identifyProblemAreasFromAnalysis(n,a,i,t),personalizedRecommendations:{immediate:{lifestyle:s.immediateActions.slice(0,3),exercise:s.immediateActions.slice(3,6),breathing:["4-7-8 호흡법","복식호흡","코호흡"],posture:["올바른 자세 유지","정기적 스트레칭","작업 환경 개선"]},shortTerm:{lifestyle:s.shortTermGoals.slice(0,3),exercise:s.shortTermGoals.slice(3,6),diet:["규칙적인 식사","충분한 수분 섭취","균형 잡힌 영양"],sleep:["규칙적인 수면 패턴","수면 환경 개선","수면 위생 관리"],stressManagement:s.shortTermGoals.slice(6,9)},longTerm:{lifestyle:s.longTermStrategy.slice(0,3),exercise:s.longTermStrategy.slice(3,6),mentalCare:s.longTermStrategy.slice(6,9),socialSupport:["사회적 관계 강화","커뮤니티 참여","전문가 네트워크"],professionalHelp:["정기 건강검진","전문가 상담","맞춤형 치료"]},occupationSpecific:{workplaceStrategies:s.occupationSpecificAdvice.slice(0,3),timeManagement:s.occupationSpecificAdvice.slice(3,6),environmentalChanges:s.occupationSpecificAdvice.slice(6,9),colleagueInteraction:s.occupationSpecificAdvice.slice(9,12)}},supportResources:{professionalHelp:[{type:"정신건강의학과 전문의",when:"스트레스 증상이 2주 이상 지속될 때",how:"병원 예약 또는 온라인 상담",cost:"보험 적용 시 1-2만원",accessibility:"전국 병원 및 온라인 플랫폼 이용 가능"}],onlineResources:["마인드풀니스 앱","온라인 상담","자가진단 도구"],communitySupport:["스트레스 관리 모임","명상 클래스","건강 커뮤니티"],emergencyContacts:["정신건강 위기상담전화: 1577-0199"]},followUpPlan:{remeasurement:{schedule:"4주 후 재측정 권장",keyMetrics:"스트레스 지수, 수면 질, 집중력 개선도",improvementTargets:"스트레스 지수 20% 감소, 수면 질 개선"},progressTracking:{dailyChecks:["수면 시간 체크","스트레스 수준 평가","운동 실천 여부"],weeklyReviews:["주간 패턴 분석","목표 달성도 점검","개선 계획 수립"],monthlyAssessments:["전반적 건강 변화","기법 효과성 검토","장기 목표 점검"]},milestones:s.followUpPlan.map((o,l)=>({timeframe:`${l+1}개월 후`,goals:o,successCriteria:"목표 달성 기준"})),adjustmentTriggers:["스트레스 수준 지속","수면 장애 미개선","새로운 건강 문제"]},followUpActions:s.followUpPlan,timestamp:Date.now(),personalInfo:e,measurementData:t,metadata:{modelUsed:this.DEFAULT_CONFIG.model,promptTokens:0,responseTokens:0,totalTokens:0}}}static generateMentalHealthPrompt(e,t){var s,o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,_;const n=this.calculateAge(e),a=this.getOccupationLabel(e.occupation,e.customOccupation),i=this.assessMeasurementQuality(t.accMetrics);return`
당신은 신경과학 박사 학위를 보유한 뇌파(EEG) 분석 전문 건강 분석 AI입니다. 15년 이상의 연구 경험과 최신 뇌과학 연구를 바탕으로 정신건강 상태를 종합적으로 분석해주세요.

**중요 지침:**
- 이 분석은 의료 정보 수준의 건강 참고 자료이며, 의료 진단이나 치료를 대체하지 않습니다.
- 특정 제품명, 브랜드명, 앱 이름 등은 절대 언급하지 마세요.
- 일반적인 건강 관리 방법과 생활습관 개선 방안만 제시하세요.
- "전문가 소견", "정신 건강 평가", "정신 건강 관리 가이드" 등의 의료 행위 관련 표현은 사용하지 마세요.
- 분석 결과에서 직업을 언급할 때는 반드시 "${a}"로 표기하고, "military_medic" 같은 원본 코드는 절대 사용하지 마세요.

## 개인 정보 및 맥락 분석
- 이름: ${e.name}
- 나이: ${n}세 (${this.getAgeGroup(n)} 연령대 특성 고려)
- 성별: ${e.gender==="male"?"남성":"여성"} (성별 특이적 뇌파 패턴 고려)
- 직업: ${a} (직업적 인지 부하 및 스트레스 요인 고려)

## 뇌파(EEG) 정밀 분석 데이터
### 인지 기능 지표
- 집중력 지수: ${((o=(s=t.eegMetrics.focusIndex)==null?void 0:s.value)==null?void 0:o.toFixed(3))||"N/A"} (정상범위: ${((l=t.eegMetrics.focusIndex)==null?void 0:l.normalRange)||"1.8-2.4"})
  * 전전두엽 실행 기능 반영, 주의 집중 능력 및 과제 수행 효율성 평가
- 인지 부하: ${t.eegMetrics.cognitiveLoad} (정상범위: 0.3-0.8)
  * 작업 기억 용량 및 정보 처리 효율성, 인지적 피로도 반영

### 정서 및 스트레스 지표
- 이완도 지수: ${t.eegMetrics.relaxationIndex} (정상범위: 0.18-0.22)
  * 알파파 활성도, 부교감신경 활성화 상태, 스트레스 대응 능력 평가
- 스트레스 지수: ${t.eegMetrics.stressIndex} (정상범위: 3.0-4.0)
  * 베타파 과활성화, 교감신경 활성화, 코르티솔 분비 상태 추정
- 정신적 피로: ${t.eegMetrics.cognitiveLoad} (정상범위: 0.4-0.8)
  * 신경 가소성 지표, 신경 전달물질 고갈 상태, 회복 필요성 평가

### 뇌 기능 균형 지표
- 좌우뇌 균형: ${((u=(c=t.eegMetrics.hemisphericBalance)==null?void 0:c.value)==null?void 0:u.toFixed(2))||"N/A"} (정상범위: -0.1~0.1)
  * 반구간 연결성, 인지 처리 패턴, 창의성-논리성 균형 평가

## 신경과학적 해석 기준
### 뇌파 주파수 대역별 의미
- **Delta (0.5-4Hz)**: 깊은 수면, 뇌 회복 과정, 무의식 처리
- **Theta (4-8Hz)**: 창의성, 직관, 명상 상태, 기억 통합
- **Alpha (8-13Hz)**: 이완된 각성, 집중, 인지 효율성
- **Beta (13-30Hz)**: 각성, 논리적 사고, 과도 시 스트레스
- **Gamma (30-100Hz)**: 고차원 인지, 의식 통합, 신경 동기화

### 뇌 영역별 기능 연관성
- **전전두엽**: 실행 기능, 의사결정, 감정 조절, 작업 기억
- **측두엽**: 장기 기억, 언어 처리, 감정 처리 (해마, 편도체)
- **두정엽**: 공간 인지, 주의 집중, 감각 통합
- **후두엽**: 시각 정보 처리, 인지 부하 반영

## 측정 품질 및 신뢰도 평가
${i.assessment}
신뢰도: ${i.reliability}
**데이터 해석 가능성**: ${t.signalQuality.eeg>=70?"높음 - 건강 분석 가능":t.signalQuality.eeg>=50?"보통 - 참고용 해석":"낮음 - 재측정 권장"}

## 🧠 정신건강 전문 분석 바이오마커 (최신 연구 기반)

### 1. 우울 상태 (Depression) 분석 지표
**EEG 바이오마커 (Nature Neuroscience 2024 기반):**
- 전두엽 알파 비대칭 (F3-F4): 좌뇌 활성도 감소 시 우울 위험 증가
- 세타파 파워 (4-8Hz): 전두엽 세타파 증가 시 우울 관련 반추 사고 증가
- 알파/세타 비율: 0.8 이하 시 우울 위험 신호
- 뇌파 일관성 (Coherence): 전두-측두 연결성 감소 시 우울 위험

**PPG 바이오마커 (Frontiers in Psychiatry 2024 기반):**
- HRV 감소: RMSSD < 20ms, SDNN < 30ms 시 우울 위험 증가
- 심박수 변이성: 자율신경계 불균형으로 인한 우울 상태 반영
- 교감신경 과활성: LF/HF 비율 > 2.5 시 스트레스성 우울 위험

### 2. 주의력결핍 (ADHD) 분석 지표
**EEG 바이오마커 (Clinical Neurophysiology 2024 기반):**
- 세타/베타 비율: > 4.0 시 주의력 결핍 위험 증가
- 전두엽 베타파 활성도: 실행 기능 저하 시 ADHD 특성 반영
- 집중력 지속성: 5분 이상 집중력 유지 어려움 시 ADHD 위험
- 과잉 활성화: 고주파 베타파 (20-30Hz) 과다 시 충동성 증가

**PPG 바이오마커 (Biological Psychology 2024 기반):**
- 자율신경계 불안정: 높은 심박수 변동성과 불규칙한 패턴
- 각성 상태 과다: 지속적인 교감신경 활성화
- 회복 능력 저하: 스트레스 후 심박수 정상화 지연

### 3. 번아웃 증후군 (Burnout) 분석 지표
**EEG 바이오마커 (Psychoneuroendocrinology 2024 기반):**
- 인지 피로도: 지속적인 베타파 활성화로 인한 뇌 피로 상태
- 이완 능력 저하: 알파파 감소, 휴식 시에도 뇌 활성화 지속
- 감정 조절 장애: 전두-변연계 연결성 저하
- 만성 스트레스 패턴: 코르티솔 분비 리듬 이상 반영

**PPG 바이오마커 (Occupational Medicine 2024 기반):**
- 만성 피로: 낮은 HRV, 회복 능력 저하
- 수면 질 저하: 야간 심박수 변이성 이상
- 스트레스 호르몬 영향: 지속적인 교감신경 우세 상태

### 4. 충동성 (Impulsivity) 분석 지표
**EEG 바이오마커 (Neuropsychologia 2024 기반):**
- 전전두엽 억제 기능: 베타파 활성도 저하 시 충동 조절 어려움
- 감마파 동기화: 40Hz 대역 이상 시 충동적 행동 증가
- 반응 억제 능력: P300 성분 감소 시 충동성 증가
- 보상 회로 과활성: 도파민 관련 뇌 영역 과활성화

**PPG 바이오마커 (Psychophysiology 2024 기반):**
- 급격한 심박수 변화: 감정적 자극에 과도한 반응
- 자율신경계 불균형: 교감신경 과반응, 부교감신경 저하
- 각성 조절 장애: 상황에 부적절한 생리적 반응

## 종합 정신건강 분석 요구사항

### 1. 신경과학적 해석
- 각 지표를 뇌 영역별 기능과 연결하여 해석
- 신경 전달물질 (도파민, 세로토닌, 노르에피네프린) 활성도 추정
- 뇌파 패턴의 병리학적 의미 및 정상 변이 구분

### 2. 개인화된 평가
- 연령대별 뇌 발달 및 노화 특성 고려
- 성별 특이적 뇌파 패턴 및 호르몬 영향 분석
- 직업적 요구사항과 뇌 기능 매칭 평가
- **직업별 정신건강 위험 요소 (${a} 특화 분석)**

### 3. **핵심 요구사항: 4가지 정신건강 위험도 상세 분석**
- **우울 상태 위험도 (0-100점)**: 전두엽 알파 비대칭, HRV 감소 패턴, 세로토닌 활성도 추정 분석
  * 정상 범위: 0-30점 (정상), 31-50점 (경계), 51-100점 (위험)
  * 상태 분류: 정상/경계/위험 중 하나로 분류
- **ADHD/집중력 장애 위험도 (0-100점)**: 세타/베타 비율, 집중력 지속성, 전전두엽 실행 기능 평가
  * 정상 범위: 0-30점 (정상), 31-50점 (경계), 51-100점 (위험)
  * 상태 분류: 정상/경계/위험 중 하나로 분류
- **번아웃 위험도 (0-100점)**: 만성 피로, 인지 피로도, 코르티솔 분비 패턴, 회복 능력 분석
  * 정상 범위: 0-30점 (정상), 31-50점 (경계), 51-100점 (위험)
  * 상태 분류: 정상/경계/위험 중 하나로 분류
- **충동성 위험도 (0-100점)**: 전전두엽 억제 기능, 감정 조절 능력, 도파민 회로 과활성 평가
  * 정상 범위: 0-30점 (정상), 31-50점 (경계), 51-100점 (위험)
  * 상태 분류: 정상/경계/위험 중 하나로 분류

### 4. 예후 및 개선 가능성
- 신경 가소성 기반 회복 가능성 평가
- 중재 방법별 효과 예측 (명상, 운동, 인지행동치료 등)
- 장기적 뇌 건강 유지 전략
- **각 위험 요소별 맞춤형 개선 방안 제시**

다음 형식으로 상세한 JSON 응답을 제공해주세요:

\`\`\`json
{
  "score": 85,
  "status": "양호",
  "analysis": "### 🧠 종합 정신건강 평가\\n\\n**신경과학적 소견:**\\n- 전전두엽 기능: [실행 기능, 의사결정 능력 상세 분석]\\n- 측두엽 활성도: [기억 기능, 감정 처리 능력 분석]\\n- 뇌파 패턴 특성: [주파수 대역별 활성도 및 건강 의미]\\n\\n**정신건강 위험도 평가 (4가지 핵심 위험도 필수 분석):**\\n\\n**중요 지침: 각 위험도 분석 시 반드시 다음 사항을 포함하여 개인화된 해석 제공:**\\n1. 현재 점수가 왜 이 수준인지 구체적 근거 제시\\n2. 연령(${n}세), 성별(${e.gender==="male"?"남성":"여성"}), 직업(${a}) 요인이 점수에 미친 영향\\n3. 측정된 생체신호 데이터와 점수의 연관성 설명\\n4. 개인별 문제점과 즉시 실행 가능한 개선 방안 제시\\n\\n### 1. 우울 상태 위험도: [점수]/100점 (정상범위: 0-30점, 상태: 정상/경계/위험)\\n- 전두엽 알파 비대칭 패턴 분석: 실제 측정값 ${((h=t.eegMetrics.hemisphericBalance)==null?void 0:h.value)||"N/A"}\\n- HRV 감소 및 자율신경계 불균형: 실제 RMSSD ${((d=t.ppgMetrics.rmssd)==null?void 0:d.value)||"N/A"}ms\\n- 세로토닌 신경전달물질 활성도 추정: 이완도 지수 ${((A=t.eegMetrics.relaxationIndex)==null?void 0:A.value)||"N/A"}\\n- 감정 조절 뇌 영역 기능 평가: 정서 안정성 ${((g=t.eegMetrics.emotionalStability)==null?void 0:g.value)||"N/A"}\\n\\n### 2. ADHD/집중력 장애 위험도: [점수]/100점 (정상범위: 0-30점, 상태: 정상/경계/위험)\\n- 세타/베타 비율 이상 패턴: 실제 측정값 기반 분석\\n- 집중력 지속성 및 주의 집중 능력: 집중도 지수 ${((p=t.eegMetrics.focusIndex)==null?void 0:p.value)||"N/A"}\\n- 전전두엽 실행 기능 저하: 인지 부하 ${((v=t.eegMetrics.cognitiveLoad)==null?void 0:v.value)||"N/A"}\\n- 도파민 회로 기능 이상: 뇌파 패턴 기반 추정\\n\\n### 3. 번아웃 위험도: [점수]/100점 (정상범위: 0-30점, 상태: 정상/경계/위험)\\n- 만성 피로 및 인지 피로도: 인지 부하 ${((m=t.eegMetrics.cognitiveLoad)==null?void 0:m.value)||"N/A"}\\n- 코르티솔 분비 리듬 이상: 스트레스 지수 ${((y=t.eegMetrics.stressIndex)==null?void 0:y.value)||"N/A"}\\n- 스트레스 회복 능력 저하: HRV 지표 ${((x=t.ppgMetrics.sdnn)==null?void 0:x.value)||"N/A"}ms\\n- 감정 소진 및 냉소주의 경향: 정서 안정성 ${((b=t.eegMetrics.emotionalStability)==null?void 0:b.value)||"N/A"}\\n\\n### 4. 충동성 위험도: [점수]/100점 (정상범위: 0-30점, 상태: 정상/경계/위험)\\n- 전전두엽 억제 기능 저하: 실제 뇌파 패턴 기반 분석\\n- 감정 조절 및 행동 억제 능력: 정서 안정성 ${((S=t.eegMetrics.emotionalStability)==null?void 0:S.value)||"N/A"}\\n- 도파민 보상 회로 과활성: 뇌파 패턴 기반 추정\\n- 반응 억제 및 계획 수립 능력: 집중도 지수 ${((_=t.eegMetrics.focusIndex)==null?void 0:_.value)||"N/A"}\\n\\n**개인화된 해석 필수 요소:**\\n- 연령대 특성: ${n}세 ${this.getAgeGroup(n)}의 뇌 기능 특성이 각 위험도에 미치는 영향\\n- 성별 고려사항: ${e.gender==="male"?"남성":"여성"} 특이적 뇌파 패턴 및 호르몬이 각 위험도에 미치는 영향\\n- 직업적 요구사항: ${a}의 업무 특성이 각 위험도에 미치는 구체적 영향\\n\\n**건강 의미:**\\n- 인지 기능 상태: [전반적 인지 능력 평가 및 강약점 분석]\\n- 신경 가소성 지표: [뇌 적응 능력 및 회복 가능성]",
  "keyMetrics": {
    "concentration": "집중력 지수 ${t.eegMetrics.focusIndex}: [전전두엽 실행 기능 분석, 주의 집중 능력 평가, ADHD 위험도 연관성]",
    "relaxation": "이완도 지수 ${t.eegMetrics.relaxationIndex}: [알파파 활성도 분석, 부교감신경 기능, 우울/번아웃 위험도 연관성]",
    "brainBalance": "좌우뇌 균형 ${t.eegMetrics.hemisphericBalance}: [반구간 연결성 분석, 우울 상태 알파 비대칭 평가]",
    "cognitiveLoad": "인지 부하 ${t.eegMetrics.cognitiveLoad}: [작업 기억 용량 분석, 번아웃 위험도 연관성]",
    "depressionRisk": "우울 위험도: [점수]/100점 - [전두엽 알파 비대칭, HRV 감소 패턴 종합 분석]",
    "adhdRisk": "집중력 장애 위험도: [점수]/100점 - [세타/베타 비율, 집중력 지속성 종합 분석]",
    "burnoutRisk": "번아웃 위험도: [점수]/100점 - [인지 피로도, 만성 스트레스 패턴 종합 분석]",
    "impulsivityRisk": "충동성 위험도: [점수]/100점 - [전전두엽 억제 기능, 감정 조절 능력 종합 분석]"
  },
  "recommendations": [
    "🧘‍♀️ 우울 예방 명상 프로그램: [전두엽 알파 활성화 기법, 실행 방법, 예상 효과]",
    "🎯 집중력 향상 훈련: [세타/베타 비율 개선, 주의력 지속성 강화 방법]",
    "💤 번아웃 예방 수면 최적화: [뇌 회복 극대화, 인지 피로도 감소 방법]",
    "🎮 충동성 조절 훈련: [전전두엽 강화 게임, 감정 조절 기법, 실행 방법]"
  ],
  "concerns": [
    "⚠️ 우울 위험 신호: [전두엽 알파 비대칭 패턴, 즉시 대응 방안]",
    "🔴 집중력 장애 특성 관찰: [세타/베타 비율 이상, 집중력 관리 필요성]",
    "🟡 번아웃 초기 징후: [인지 피로도 증가, 예방 전략 필요]",
    "🟠 충동성 증가 경향: [전전두엽 억제 기능 저하, 감정 조절 훈련 필요]"
  ],
  "detailedAnalysis": {
    "mentalHealthRisk": {
      "depression": {
        "riskScore": [실제 점수],
        "normalRange": "0-30점",
        "status": "정상|경계|위험",
        "analysis": "**현재 점수 해석:**\\n[점수]점은 ${n}세 ${e.gender==="male"?"남성":"여성"}에게 [정상/경계/위험] 수준입니다.\\n\\n**점수 산출 근거:**\\n- 전두엽 알파 비대칭 패턴: [측정값] (정상 대비 [상태])\\n- HRV 감소 정도: [측정값] (정상 대비 [상태])\\n- 세로토닌 활성도 추정: [분석 결과]\\n\\n**개인별 요인 분석:**\\n- 연령 요인: [${n}세 연령대 특성 및 우울 위험도 연관성]\\n- 성별 요인: [${e.gender==="male"?"남성":"여성"} 호르몬 영향 및 우울 패턴]\\n- 직업 요인: [${a}의 업무 스트레스가 우울 위험도에 미치는 영향]\\n\\n**문제점 및 개선 방안:**\\n- 주요 문제: [구체적 문제점 제시]\\n- 즉시 개선 방안: [실행 가능한 구체적 방법]\\n- 장기 관리 전략: [지속적 관리 방안]"
      },
      "adhd": {
        "riskScore": [실제 점수],
        "normalRange": "0-30점",
        "status": "정상|경계|위험",
        "analysis": "**현재 점수 해석:**\\n[점수]점은 ${n}세 ${e.gender==="male"?"남성":"여성"}에게 [정상/경계/위험] 수준입니다.\\n\\n**점수 산출 근거:**\\n- 세타/베타 비율: [측정값] (정상 대비 [상태])\\n- 집중력 지속성: [측정값] (정상 대비 [상태])\\n- 전전두엽 실행 기능: [분석 결과]\\n\\n**개인별 요인 분석:**\\n- 연령 요인: [${n}세 연령대 집중력 특성 및 ADHD 위험도]\\n- 성별 요인: [${e.gender==="male"?"남성":"여성"} 집중력 패턴 및 ADHD 특성]\\n- 직업 요인: [${a}의 업무 특성이 집중력에 미치는 영향]\\n\\n**문제점 및 개선 방안:**\\n- 주요 문제: [구체적 집중력 문제점]\\n- 즉시 개선 방안: [집중력 향상 구체적 방법]\\n- 장기 관리 전략: [지속적 집중력 관리 방안]"
      },
      "burnout": {
        "riskScore": [실제 점수],
        "normalRange": "0-30점",
        "status": "정상|경계|위험",
        "analysis": "**현재 점수 해석:**\\n[점수]점은 ${n}세 ${e.gender==="male"?"남성":"여성"}에게 [정상/경계/위험] 수준입니다.\\n\\n**점수 산출 근거:**\\n- 인지 피로도: [측정값] (정상 대비 [상태])\\n- 코르티솔 리듬: [측정값] (정상 대비 [상태])\\n- 스트레스 회복 능력: [분석 결과]\\n\\n**개인별 요인 분석:**\\n- 연령 요인: [${n}세 연령대 스트레스 회복력 및 번아웃 위험도]\\n- 성별 요인: [${e.gender==="male"?"남성":"여성"} 스트레스 반응 패턴 및 번아웃 특성]\\n- 직업 요인: [${a}의 업무 강도가 번아웃에 미치는 영향]\\n\\n**문제점 및 개선 방안:**\\n- 주요 문제: [구체적 번아웃 위험 요소]\\n- 즉시 개선 방안: [번아웃 예방 구체적 방법]\\n- 장기 관리 전략: [지속적 에너지 관리 방안]"
      },
      "impulsivity": {
        "riskScore": [실제 점수],
        "normalRange": "0-30점",
        "status": "정상|경계|위험",
        "analysis": "**현재 점수 해석:**\\n[점수]점은 ${n}세 ${e.gender==="male"?"남성":"여성"}에게 [정상/경계/위험] 수준입니다.\\n\\n**점수 산출 근거:**\\n- 전전두엽 억제 기능: [측정값] (정상 대비 [상태])\\n- 감정 조절 능력: [측정값] (정상 대비 [상태])\\n- 도파민 보상 회로: [분석 결과]\\n\\n**개인별 요인 분석:**\\n- 연령 요인: [${n}세 연령대 충동성 조절 능력 및 위험도]\\n- 성별 요인: [${e.gender==="male"?"남성":"여성"} 충동성 패턴 및 조절 특성]\\n- 직업 요인: [${a}의 업무 환경이 충동성에 미치는 영향]\\n\\n**문제점 및 개선 방안:**\\n- 주요 문제: [구체적 충동성 문제점]\\n- 즉시 개선 방안: [충동성 조절 구체적 방법]\\n- 장기 관리 전략: [지속적 자제력 강화 방안]"
      }
    }
  }
}
\`\`\`

**중요**: 모든 분석은 최신 신경과학 연구를 기반으로 하며, 건강 참고 목적으로만 사용하시고 전문의 상담이 필요한 경우 의료기관을 방문하시기 바랍니다.
`}static generatePhysicalHealthPrompt(e,t){var l,c,u,h,d,A,g,p,v,m,y,x;const n=this.calculateAge(e),a=this.getOccupationLabel(e.occupation,e.customOccupation),i=this.assessMeasurementQuality(t.accMetrics),s=this.convertPersonalInfo(e),o=HD(s);return`
당신은 심혈관 생리학 박사 학위를 보유한 PPG 분석 전문 건강 분석 AI입니다. 15년 이상의 연구 경험과 최신 심혈관 생리학 연구를 바탕으로 신체건강 상태를 종합적으로 분석해주세요.

**중요 지침:**
- 이 분석은 의료 정보 수준의 건강 참고 자료이며, 의료 진단이나 치료를 대체하지 않습니다.
- 특정 제품명, 브랜드명, 앱 이름 등은 절대 언급하지 마세요.
- 일반적인 건강 관리 방법과 생활습관 개선 방안만 제시하세요.
- "전문가 소견", "정신 건강 평가", "정신 건강 관리 가이드" 등의 의료 행위 관련 표현은 사용하지 마세요.
- 분석 결과에서 직업을 언급할 때는 반드시 "${a}"로 표기하고, "military_medic" 같은 원본 코드는 절대 사용하지 마세요.

## 개인 정보
- 이름: ${e.name}
- 나이: ${n}세
- 성별: ${e.gender==="male"?"남성":"여성"}
- 직업: ${a}

## PPG 측정 데이터
- 심박수: ${((l=t.ppgMetrics.heartRate)==null?void 0:l.value)||"N/A"} BPM (개인화 정상범위: ${((c=o.BPM)==null?void 0:c.label)||"60-100"})
- 산소포화도: ${((u=t.ppgMetrics.spo2)==null?void 0:u.value)||"N/A"}% (개인화 정상범위: ${((h=o.SpO2)==null?void 0:h.label)||"95-100"})
- RMSSD: ${((d=t.ppgMetrics.rmssd)==null?void 0:d.value)||"N/A"}ms (개인화 정상범위: ${((A=o.RMSSD)==null?void 0:A.label)||"20-50ms"})
- SDNN: ${((g=t.ppgMetrics.sdnn)==null?void 0:g.value)||"N/A"}ms (개인화 정상범위: ${((p=o.SDNN)==null?void 0:p.label)||"30-100"})
- pNN50: ${((v=t.ppgMetrics.pnn50)==null?void 0:v.value)||"N/A"}% (개인화 정상범위: ${((m=o.PNN50)==null?void 0:m.label)||"10-30"})
- 심박변이도: ${((y=t.ppgMetrics.lfHfRatio)==null?void 0:y.value)||"N/A"} (개인화 정상범위: ${((x=o["LF/HF"])==null?void 0:x.label)||"1.0-3.0"})

## 측정 품질 평가
${i.assessment}
신뢰도: ${i.reliability}

## 분석 요청사항
1. PPG 데이터를 기반으로 한 심혈관 건강 상태 평가 (점수 0-100)
2. 각 심혈관 지표의 과학적 해석
3. 연령대와 성별을 고려한 맞춤형 분석
4. 심혈관 건강 개선을 위한 구체적 권장사항
5. 주의해야 할 심혈관 위험 요소

다음 JSON 형식으로 응답해주세요:

\`\`\`json
{
  "score": 88,
  "status": "우수",
  "analysis": "PPG 분석 결과에 대한 상세한 과학적 해석...",
  "keyMetrics": {
    "heartRate": "심박수 해석",
    "spo2": "산소포화도 해석",
    "rmssd": "RMSSD 해석",
    "sdnn": "SDNN 해석",
    "pnn50": "pNN50 해석",
    "lfPower": "LF Power 해석",
    "hfPower": "HF Power 해석",
    "lfHfRatio": "LF/HF 비율 해석"
  },
  "recommendations": [
    "규칙적인 유산소 운동",
    "심혈관 건강 식단 관리",
    "정기적인 심혈관 검진"
  ],
  "concerns": [
    "심박변이도 감소",
    "자율신경계 불균형"
  ]
}
\`\`\`

**중요**: 모든 분석은 최신 심혈관 생리학 연구를 기반으로 하며, 건강 참고 목적으로만 사용하시고 전문의 상담이 필요한 경우 의료기관을 방문하시기 바랍니다.
`}static generateStressHealthPrompt(e,t){var s,o,l,c,u,h,d,A,g;const n=this.calculateAge(e),a=this.getOccupationLabel(e.occupation,e.customOccupation),i=this.assessMeasurementQuality(t.accMetrics);return`
당신은 스트레스 생리학 박사 학위를 보유한 통합 스트레스 분석 전문 건강 분석 AI입니다. 15년 이상의 연구 경험과 최신 스트레스 과학 연구를 바탕으로 스트레스 상태를 종합적으로 분석해주세요.

**중요 지침:**
- 이 분석은 의료 정보 수준의 건강 참고 자료이며, 의료 진단이나 치료를 대체하지 않습니다.
- 특정 제품명, 브랜드명, 앱 이름 등은 절대 언급하지 마세요.
- 일반적인 건강 관리 방법과 생활습관 개선 방안만 제시하세요.
- "전문가 소견", "정신 건강 평가", "정신 건강 관리 가이드" 등의 의료 행위 관련 표현은 사용하지 마세요.
- 분석 결과에서 직업을 언급할 때는 반드시 "${a}"로 표기하고, "military_medic" 같은 원본 코드는 절대 사용하지 마세요.

## 개인 정보
- 이름: ${e.name}
- 나이: ${n}세
- 성별: ${e.gender==="male"?"남성":"여성"}
- 직업: ${a}

## 종합 생체신호 데이터
### EEG 스트레스 관련 지표
- 스트레스 지수: ${((s=t.eegMetrics.stressIndex)==null?void 0:s.value)||"N/A"} (정상범위: 3.0-4.0)
- 인지 부하: ${((o=t.eegMetrics.cognitiveLoad)==null?void 0:o.value)||"N/A"} (정상범위: 0.3-0.8)
- 이완도: ${((l=t.eegMetrics.relaxationIndex)==null?void 0:l.value)||"N/A"} (정상범위: 0.18-0.22)
- 정서 안정성: ${((c=t.eegMetrics.emotionalStability)==null?void 0:c.value)||"N/A"} (정상범위: 0.4-0.8)
- 집중도: ${((u=t.eegMetrics.focusIndex)==null?void 0:u.value)||"N/A"} (정상범위: 1.8-2.4)

### PPG 스트레스 관련 지표
- 심박수: ${((h=t.ppgMetrics.heartRate)==null?void 0:h.value)||"N/A"} BPM (정상범위: 60-100)
- RMSSD (HRV): ${((d=t.ppgMetrics.rmssd)==null?void 0:d.value)||"N/A"} ms (정상범위: 20-50)
- LF/HF 비율: ${((A=t.ppgMetrics.lfHfRatio)==null?void 0:A.value)||"N/A"} (정상범위: 1.0-10.0)
- SDNN (HRV): ${((g=t.ppgMetrics.sdnn)==null?void 0:g.value)||"N/A"} ms (정상범위: 20-50)

### 통합 스트레스 지표 분석
- EEG 기반 스트레스 요인: 스트레스 지수 상승, 이완도 감소, 인지 부하 증가, 정서 불안정
- PPG 기반 스트레스 요인: 심박수 상승, HRV 감소, 자율신경계 불균형 (LF/HF 비율 증가)
- 스트레스 상호작용: 뇌파 스트레스와 심혈관 스트레스의 상관관계 분석 필요

## 측정 품질 평가
${i.assessment}
신뢰도: ${i.reliability}

## 분석 요청사항
1. **EEG와 PPG 데이터를 통합한 종합 스트레스 상태 평가** (점수 0-100)
   - 뇌파 기반 정신적 스트레스 지표 분석
   - 심박변이도 기반 신체적 스트레스 지표 분석
   - 자율신경계 균형 상태 평가
   - 스트레스 회복 능력 및 적응력 평가

2. **상세한 스트레스 분석 결과 제공**
   - 스트레스 지수별 의학적 해석 및 정상값 대비 평가
   - 인지 부하 및 정신적 피로도 상세 분석
   - 이완 능력 및 스트레스 해소 능력 평가
   - 교감신경/부교감신경 활성도 균형 분석

3. **스트레스 요인 및 대응 능력 종합 평가**
   - 급성 스트레스 vs 만성 스트레스 구분 분석
   - 스트레스 유발 요인 및 취약성 평가
   - 개인별 스트레스 대처 능력 및 회복력 평가

4. **스트레스 관리를 위한 구체적이고 실행 가능한 권장사항**
   - 즉시 실행 가능한 스트레스 완화 방법
   - 단기/장기 스트레스 관리 전략
   - 직업적 특성을 고려한 맞춤형 스트레스 관리법

5. **만성 스트레스 위험 요소 식별 및 예방 전략**

다음 JSON 형식으로 응답해주세요:

\`\`\`json
{
  "score": 75,
  "status": "관리 필요",
  "analysis": "### 🌊 종합 스트레스 분석 결과\\n\\n**EEG 기반 정신적 스트레스 분석:**\\n- 스트레스 지수: [값] ([정상범위 대비 해석])\\n- 인지 부하: [값] ([정상범위 대비 해석])\\n- 이완도: [값] ([정상범위 대비 해석])\\n- 정서 안정성: [값] ([정상범위 대비 해석])\\n\\n**PPG 기반 신체적 스트레스 분석:**\\n- 심박수: [값] BPM ([정상범위 대비 해석])\\n- HRV (RMSSD): [값] ms ([자율신경계 균형 상태])\\n- LF/HF 비율: [값] ([교감/부교감신경 균형])\\n- SDNN: [값] ms ([전반적 자율신경 기능])\\n\\n**통합 스트레스 평가:**\\n- 급성 vs 만성 스트레스 구분\\n- 스트레스 대처 능력 및 회복력\\n- 개인별 스트레스 취약성 분석\\n- ${a} 직업 특성 고려한 스트레스 패턴",
  "keyMetrics": {
    "eegStressIndex": "스트레스 지수 [값]: [뇌파 기반 정신적 스트레스 상태 상세 해석]",
    "cognitiveLoad": "인지 부하 [값]: [정신적 피로도 및 작업 부하 상세 분석]",
    "relaxationIndex": "이완도 [값]: [스트레스 해소 능력 및 회복력 상세 분석]",
    "heartRateVariability": "심박변이도 [값]: [자율신경계 균형 및 스트레스 적응 능력 분석]",
    "autonomicBalance": "자율신경 균형: [교감/부교감신경 활성도 균형 상태 분석]",
    "stressRecovery": "스트레스 회복 능력: [개인별 스트레스 대처 및 회복 능력 평가]"
  },
  "stressFactors": [
    "높은 인지 부하 및 정신적 피로",
    "자율신경계 불균형 (교감신경 과활성)",
    "스트레스 회복 시간 부족",
    "만성 스트레스 누적 징후",
    "직업적 스트레스 요인 (${a} 특성)"
  ],
  "recommendations": [
    "🧘‍♀️ 즉시 실행: 5분 호흡 명상으로 부교감신경 활성화",
    "💤 단기 목표: 규칙적인 수면 패턴으로 스트레스 회복력 향상",
    "🏃‍♂️ 장기 전략: 유산소 운동으로 HRV 개선 및 스트레스 내성 강화",
    "⏰ 직업 맞춤: ${a} 업무 중 스트레스 관리 기법 적용",
    "🌿 생활습관: 스트레스 완화 환경 조성 및 회복 시간 확보"
  ]
}
\`\`\`

**중요**: 모든 분석은 최신 스트레스 과학 연구를 기반으로 하며, 건강 참고 목적으로만 사용하시고 전문의 상담이 필요한 경우 의료기관을 방문하시기 바랍니다.
`}static generateComprehensiveAnalysisPrompt(e,t,n,a,i){const s=this.calculateAge(e),o=this.getOccupationLabel(e.occupation,e.customOccupation);return`
당신은 종합 건강 관리 전문 건강 분석 AI입니다. 다음 개인의 3가지 전문 분석 결과를 바탕으로 개인 맞춤형 종합 건강 관리 계획을 수립해주세요.

**중요 지침:**
- 이 분석은 의료 정보 수준의 건강 참고 자료이며, 의료 진단이나 치료를 대체하지 않습니다.
- 특정 제품명, 브랜드명, 앱 이름 등은 절대 언급하지 마세요.
- 일반적인 건강 관리 방법과 생활습관 개선 방안만 제시하세요.
- "전문가 소견", "정신 건강 평가", "정신 건강 관리 가이드" 등의 의료 행위 관련 표현은 사용하지 마세요.
- 분석 결과에서 직업을 언급할 때는 반드시 "${o}"로 표기하고, "military_medic" 같은 원본 코드는 절대 사용하지 마세요.

## 개인 정보
- 이름: ${e.name}
- 나이: ${s}세
- 성별: ${e.gender}
- 직업: ${o}

## 전문 분석 결과 요약
### 정신건강 분석 결과
- 점수: ${n.score}/100 (${n.status})
- 주요 소견: ${n.analysis.substring(0,100)}...
- 주요 우려사항: ${n.concerns.join(", ")}

### 신체건강 분석 결과
- 점수: ${a.score}/100 (${a.status})
- 주요 소견: ${a.analysis.substring(0,100)}...
- 주요 우려사항: ${a.concerns.join(", ")}

### 스트레스 건강 분석 결과
- 점수: ${i.score}/100 (${i.status})
- 주요 소견: ${i.analysis.substring(0,100)}...
- 스트레스 요인: ${i.stressFactors.join(", ")}

## 종합 분석 요청사항
1. 3가지 분석 결과를 종합한 전체 건강 점수 (0-100)
2. 개인정보(나이, 성별, 직업)를 고려한 맞춤형 건강 요약
3. 즉시 실행 가능한 건강 관리 방안 (6가지)
4. 단기 목표 설정 (1-3개월, 6가지)
5. 장기 전략 수립 (6개월-1년, 6가지)
6. 직업 특성을 고려한 맞춤형 조언 (12가지)
7. 후속 관리 계획 (3가지)

다음 JSON 형식으로 응답해주세요:

\`\`\`json
{
  "overallScore": 82,
  "personalizedSummary": "개인 정보를 반영한 상세한 건강 상태 요약...",
  "immediateActions": [
    "즉시 실행 가능한 행동 1",
    "즉시 실행 가능한 행동 2",
    "즉시 실행 가능한 행동 3",
    "즉시 실행 가능한 행동 4",
    "즉시 실행 가능한 행동 5",
    "즉시 실행 가능한 행동 6"
  ],
  "shortTermGoals": [
    "1-3개월 목표 1",
    "1-3개월 목표 2",
    "1-3개월 목표 3",
    "1-3개월 목표 4",
    "1-3개월 목표 5",
    "1-3개월 목표 6"
  ],
  "longTermStrategy": [
    "6개월-1년 전략 1",
    "6개월-1년 전략 2",
    "6개월-1년 전략 3",
    "6개월-1년 전략 4",
    "6개월-1년 전략 5",
    "6개월-1년 전략 6"
  ],
  "occupationSpecificAdvice": [
    "직업 맞춤 조언 1",
    "직업 맞춤 조언 2",
    "직업 맞춤 조언 3",
    "직업 맞춤 조언 4",
    "직업 맞춤 조언 5",
    "직업 맞춤 조언 6",
    "직업 맞춤 조언 7",
    "직업 맞춤 조언 8",
    "직업 맞춤 조언 9",
    "직업 맞춤 조언 10",
    "직업 맞춤 조언 11",
    "직업 맞춤 조언 12"
  ],
  "followUpPlan": [
    "후속 관리 계획 1",
    "후속 관리 계획 2",
    "후속 관리 계획 3"
  ]
}
\`\`\`

**중요**: 모든 분석은 최신 건강 과학 연구를 기반으로 하며, 건강 참고 목적으로만 사용하시고 전문의 상담이 필요한 경우 의료기관을 방문하시기 바랍니다.
`}static calculateAge(e){const t=new Date().getFullYear();if(e.birthYear)return t-e.birthYear;if(e.birthDate){const[n]=e.birthDate.split("-").map(Number);return t-n}return 0}static getHealthGrade(e){return e>=90?"매우 우수":e>=80?"우수":e>=70?"양호":e>=60?"보통":e>=50?"주의":"위험"}static extractStrengths(e){return e.recommendations.filter(t=>t.includes("우수")||t.includes("양호")||t.includes("좋은")).slice(0,2)}static getAgeGroup(e){return e<20?"청소년기":e<30?"청년기":e<40?"초기 성인기":e<50?"중년 초기":e<60?"중년 후기":e<70?"초기 노년기":"후기 노년기"}static getOccupationalStressFactors(e){return{teacher:"학생 지도 및 교실 관리로 인한 인지 부하, 학부모 상담 및 민원 처리 스트레스, 교육과정 변화 및 평가 업무 적응 압박, 장시간 서서 수업으로 인한 신체적 피로, 방과 후 업무 연장으로 인한 개인 시간 부족, 교실 내 소음 및 밀폐 환경에서의 지속적 긴장",military_medic:"높은 책임감, 응급 상황 대응, 생명 관련 의사결정",military_career:"위계질서, 신체적 부담, 임무 수행 압박",elementary:"학습 압박, 또래 관계, 성장 스트레스",middle_school:"사춘기 변화, 학업 경쟁, 진로 고민",high_school:"입시 압박, 미래 불안, 학업 부담",university:"진로 불안, 학업 부담, 사회 진출 압박",housewife:"가사 부담, 사회적 고립, 자아 정체성 혼란",parent:"양육 스트레스, 경제적 부담, 시간 부족",firefighter:"생명 위험, 응급 상황, 외상 스트레스",police:"사회적 갈등, 위험 노출, 업무 부담",developer:"장시간 집중, 기술 변화 적응, 프로젝트 압박",designer:"창의적 압박, 클라이언트 요구, 미적 완성도",office_worker:"업무 반복성, 대인 관계, 승진 경쟁",manager:"의사결정 부담, 팀 관리, 성과 압박",general_worker:"업무 다양성, 시간 압박, 직무 스트레스",entrepreneur:"경영 부담, 재정 위험, 불확실성",other:"다양한 직업적 스트레스 요인","":"일반적 생활 스트레스"}[e]||"일반적 직업 스트레스"}static getReliabilityLevel(e){return e>=80?"매우 높음":e>=70?"높음":e>=60?"보통":e>=50?"낮음":"매우 낮음"}static getEnvironmentalFactors(e){const t=e.stability||0,n=e.averageMovement||0;return t>=80&&n<=.1?"최적 측정 환경 (안정된 자세, 최소한의 움직임)":t>=60?"양호한 측정 환경 (약간의 움직임 있음)":"불안정한 측정 환경 (과도한 움직임, 데이터 해석 시 주의 필요)"}static async analyzeHealthData(e,t){try{const n=QD.analyzeClinicalCorrelations(t),a=QD.generateProfessionalGuidance(e,t,n),i=await this.analyzeMentalHealth(e,t),s=await this.analyzePhysicalHealth(e,t),o=await this.analyzeStressHealth(e,t),l=await this.generateComprehensiveAnalysis(e,t,i,s,o),c=QD.enhanceMedicalTerminology({analysisText:l.personalizedSummary,timestamp:new Date().toISOString(),personalInfo:e,measurementData:t,clinicalCorrelations:n,professionalGuidance:a});return{...this.combineAnalysisResults(e,t,i,s,o,l)}}catch(n){throw console.error("AI 분석 중 오류 발생:",n),new Error("AI 분석을 완료할 수 없습니다. 잠시 후 다시 시도해주세요.")}}static identifyProblemAreasFromAnalysis(e,t,n,a){var s,o,l,c,u;const i=[];if(e.score<70||e.concerns.length>0){const h=a.eegMetrics.focusIndex.value,d=a.eegMetrics.stressIndex.value,A=a.eegMetrics.relaxationIndex.value;let g=e.concerns[0]||"정신건강 관리가 필요합니다.";h<1.8?g=`집중력 지수(${h})가 정상 범위(1.8-2.4) 미달로 주의력 향상이 필요합니다.`:d>4?g=`스트레스 지수(${d})가 정상 범위(3.0-4.0) 초과로 스트레스 관리가 필요합니다.`:A<.18&&(g=`이완도 지수(${A})가 정상 범위(0.18-0.22) 미달로 휴식과 이완이 필요합니다.`),i.push({area:"정신건강",severity:e.score<50?"높음":"중간",description:g,solutions:["매일 10분 명상 또는 심호흡 연습","규칙적인 휴식 시간 확보","충분한 수면과 스트레스 관리"]})}if(t.score<70||t.concerns.length>0){const h=(s=a.ppgMetrics.heartRate)==null?void 0:s.value,d=(o=a.ppgMetrics.spo2)==null?void 0:o.value,A=(l=a.ppgMetrics.rmssd)==null?void 0:l.value,g=(c=a.ppgMetrics.sdnn)==null?void 0:c.value;let p=t.concerns[0]||"신체건강 관리가 필요합니다.";d&&d<95?p=`산소포화도(${d}%)가 정상 범위(95-100%) 미달로 호흡 및 순환 기능 개선이 필요합니다.`:A&&A<20?p=`HRV RMSSD(${A}ms)가 정상 범위(20-50ms) 미달로 자율신경 기능 개선이 필요합니다.`:g&&g<30?p=`HRV SDNN(${g}ms)가 정상 범위(30-100ms) 미달로 심박변이도 개선이 필요합니다.`:h&&(h<60||h>100)&&(p=`심박수(${h} BPM)가 정상 범위(60-100 BPM) 벗어나 심혈관 기능 점검이 필요합니다.`),i.push({area:"신체건강",severity:t.score<50?"높음":"중간",description:p,solutions:["규칙적인 유산소 운동 (주 3-4회, 30분)","충분한 수분 섭취와 균형 잡힌 식단","정기적인 건강검진 및 전문의 상담"]})}if(n.score<70||n.stressFactors.length>0){let h=n.stressFactors[0]||"스트레스 관리가 필요합니다.";const d=a.eegMetrics.stressIndex.value,A=(u=a.ppgMetrics.lfHfRatio)==null?void 0:u.value;d>4&&A&&A>3?h=`뇌파 스트레스 지수(${d})와 자율신경 불균형(LF/HF: ${A})이 모두 높아 종합적인 스트레스 관리가 필요합니다.`:d>4?h=`뇌파 스트레스 지수(${d})가 정상 범위(3.0-4.0) 초과로 정신적 스트레스 관리가 필요합니다.`:A&&A>3&&(h=`자율신경 불균형(LF/HF: ${A})이 정상 범위(1.0-3.0) 초과로 신체적 스트레스 관리가 필요합니다.`),i.push({area:"스트레스 관리",severity:n.score<50?"높음":"중간",description:h,solutions:["스트레스 관리 기법 학습 (명상, 요가, 호흡법)","충분한 휴식과 수면 시간 확보","스트레스 요인 파악 및 환경 개선"]})}return i.slice(0,3)}static generatePhysicalHealthComprehensivePrompt(e,t,n){var l,c,u,h,d,A,g,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee;const a=this.convertPersonalInfo(e);HD(a);const i=this.calculateAge(e),s=this.getOccupationLabel(e.occupation,e.customOccupation),o=this.assessMeasurementQuality(t.accMetrics);return`당신은 맥파(PPG) 분석 전문 해석 AI입니다. 다음 정보를 바탕으로 개인화된 맥파 기반 신체건강 종합 해석을 제공해주세요.

**중요 지침:**
- 이 분석은 건강 참고 자료이며, 의료 진단이나 치료를 대체하지 않습니다.
- 특정 제품명, 브랜드명, 앱 이름 등은 절대 언급하지 마세요.
- 일반적인 건강 관리 방법과 생활습관 개선 방안만 제시하세요.
- 분석 결과에서 직업을 언급할 때는 반드시 "${s}"로 표기하세요.

**개인정보:**
- 이름: ${e.name}
- 연령: ${i}세 (${this.getAgeGroup(i)} 연령대)
- 성별: ${e.gender==="male"?"남성":"여성"}
- 직업: ${s}

**맥파(PPG) 측정 결과:**
- 심박수(Heart Rate): ${((c=(l=t.ppgMetrics.heartRate)==null?void 0:l.value)==null?void 0:c.toFixed(2))||"N/A"} BPM
- 심박변이도 RMSSD: ${((h=(u=t.ppgMetrics.rmssd)==null?void 0:u.value)==null?void 0:h.toFixed(2))||"N/A"} ms
- 심박변이도 SDNN: ${((A=(d=t.ppgMetrics.sdnn)==null?void 0:d.value)==null?void 0:A.toFixed(2))||"N/A"} ms
- 산소포화도(SpO2): ${((p=(g=t.ppgMetrics.spo2)==null?void 0:g.value)==null?void 0:p.toFixed(1))||"N/A"}%
- 자율신경균형 LF/HF: ${((m=(v=t.ppgMetrics.lfHfRatio)==null?void 0:v.value)==null?void 0:m.toFixed(2))||"N/A"}

**측정 품질:**
- 신호 품질: ${o.assessment}
- 신뢰도: ${o.reliability}

**기본 분석 결과:**
- 신체건강 점수: ${n.score}점
- 상태: ${n.status}
- 주요 소견: ${n.analysis.substring(0,300)}...
- 핵심 지표: ${Object.entries(n.keyMetrics).map(([j,G])=>`${j}: ${G}`).join(", ")}

다음 JSON 형식으로 응답해주세요:

\`\`\`json
{
  "comprehensiveInterpretation": "### ❤️ 맥파 분석 종합 해석\\n\\n**현재 심혈관 기능 상태:**\\n- 심박수: ${((x=(y=t.ppgMetrics.heartRate)==null?void 0:y.value)==null?void 0:x.toFixed(2))||"N/A"} BPM - [정상범위 대비 해석 및 심혈관 기능 의미]\\n- 심박변이도 RMSSD: ${((S=(b=t.ppgMetrics.rmssd)==null?void 0:b.value)==null?void 0:S.toFixed(2))||"N/A"} ms - [자율신경 균형 및 스트레스 회복 능력]\\n- 심박변이도 SDNN: ${((C=(_=t.ppgMetrics.sdnn)==null?void 0:_.value)==null?void 0:C.toFixed(2))||"N/A"} ms - [전체적인 자율신경 활성도]\\n- 산소포화도: ${((B=(w=t.ppgMetrics.spo2)==null?void 0:w.value)==null?void 0:B.toFixed(1))||"N/A"}% - [혈중 산소 공급 능력 및 호흡 효율성]\\n- 자율신경균형: ${((T=(D=t.ppgMetrics.lfHfRatio)==null?void 0:D.value)==null?void 0:T.toFixed(2))||"N/A"} - [교감/부교감 신경 균형 상태]\\n\\n**개인 특성별 해석:**\\n- 연령대 특성: [${i}세 ${this.getAgeGroup(i)}의 심혈관 기능 특성과 현재 상태 비교]\\n- 성별 특성: [${e.gender==="male"?"남성":"여성"}의 심혈관 패턴 특성과 건강 연관성]\\n- 직업적 특성: [${s}의 업무 요구사항과 현재 심혈관 기능 적합성]\\n\\n**심혈관 건강 개선 방향:**\\n- 주요 개선 영역: [개인 특성 기반 심혈관 건강 개선 영역]\\n- 강점 영역: [현재 가지고 있는 심혈관 건강 강점]\\n- 개선 가능성: [개선 가능한 영역 및 방법]",
  "individualMetricsInterpretation": {
    "heartRate": {
      "value": ${((R=(E=t.ppgMetrics.heartRate)==null?void 0:E.value)==null?void 0:R.toFixed(2))||"N/A"},
      "normalRange": "60-100 BPM",
      "status": "[정상/서맥/빈맥] 범위 판정",
      "interpretation": "심박수에 대한 개인화된 상세 해석 - 현재 심혈관 기능 상태, 운동 능력, 스트레스 반응성과의 연관성",
      "personalizedAdvice": "개인 특성(연령/성별/직업)을 고려한 심박수 관리 방법"
    },
    "rmssd": {
      "value": ${((k=(M=t.ppgMetrics.rmssd)==null?void 0:M.value)==null?void 0:k.toFixed(2))||"N/A"},
      "normalRange": "개인별 기준치",
      "status": "[정상/낮음/높음] 범위 판정",
      "interpretation": "RMSSD 심박변이도에 대한 개인화된 상세 해석 - 자율신경 균형, 스트레스 회복 능력, 부교감신경 활성도",
      "personalizedAdvice": "개인 특성을 고려한 자율신경 균형 개선 방법"
    },
    "sdnn": {
      "value": ${((Q=(O=t.ppgMetrics.sdnn)==null?void 0:O.value)==null?void 0:Q.toFixed(2))||"N/A"},
      "normalRange": "개인별 기준치",
      "status": "[정상/낮음/높음] 범위 판정",
      "interpretation": "SDNN 심박변이도에 대한 개인화된 상세 해석 - 전체 자율신경 활성도, 심혈관 건강 상태, 적응 능력",
      "personalizedAdvice": "개인 특성을 고려한 심혈관 건강 향상 방법"
    },
    "spo2": {
      "value": ${((W=(H=t.ppgMetrics.spo2)==null?void 0:H.value)==null?void 0:W.toFixed(1))||"N/A"},
      "normalRange": "95-100%",
      "status": "[정상/주의/위험] 범위 판정",
      "interpretation": "산소포화도에 대한 개인화된 상세 해석 - 혈중 산소 공급 능력, 호흡 효율성, 심폐 기능",
      "personalizedAdvice": "개인 특성을 고려한 산소포화도 개선 및 호흡 건강 방법"
    },
    "lfHfRatio": {
      "value": ${((ee=(te=t.ppgMetrics.lfHfRatio)==null?void 0:te.value)==null?void 0:ee.toFixed(2))||"N/A"},
      "normalRange": "1.5-4.0",
      "status": "[균형/교감우세/부교감우세] 판정",
      "interpretation": "LF/HF 비율에 대한 개인화된 상세 해석 - 교감/부교감 신경 균형, 스트레스 반응, 자율신경 조절 능력",
      "personalizedAdvice": "개인 특성을 고려한 자율신경 균형 최적화 방법"
    }
  },
  "ageSpecificAnalysis": {
    "ageGroup": "${this.getAgeGroup(i)}",
    "typicalCharacteristics": "해당 연령대의 일반적인 심혈관 특성",
    "currentComparison": "현재 측정값과 동연령대 평균과의 비교 분석",
    "riskFactors": ["연령 관련 심혈관 위험 요소들"],
    "strengths": ["현재 나타나는 긍정적 요소들"]
  },
  "genderSpecificAnalysis": {
    "gender": "${e.gender==="male"?"남성":"여성"}",
    "cardiovascularCharacteristics": "성별에 따른 심혈관 패턴 특성",
    "hormonalInfluence": "호르몬이 심혈관 건강에 미치는 영향",
    "healthPatterns": "성별 특성을 고려한 건강 패턴 분석",
    "managementPoints": ["성별 맞춤 관리 포인트들"]
  },
  "occupationalAnalysis": {
    "occupation": "${s}",
    "workRequirements": "직업적 특성이 심혈관에 미치는 영향",
    "stressFactors": ["직업 관련 심혈관 스트레스 요인들"],
    "cardiovascularMatch": "현재 심혈관 상태와 직업 요구사항의 적합성",
    "workplaceRisks": ["직장 환경에서의 심혈관 위험 요소들"],
    "adaptationStrategies": ["직업 특성에 맞는 심혈관 건강 전략들"]
  },
  "cardiovascularRiskAssessment": {
    "primaryRisks": ["주요 심혈관 위험 요소들"],
    "protectiveFactors": ["보호 요인들"],
    "immediateAttention": ["즉시 주의가 필요한 사항들"],
    "longTermMonitoring": ["장기 모니터링이 필요한 지표들"]
  },
  "personalizedRecommendations": {
    "immediate": ["즉시 실행 가능한 심혈관 건강 개선 방안들"],
    "shortTerm": ["단기 목표 (1-3개월)"],
    "longTerm": ["장기 전략 (6개월 이상)"],
    "occupationSpecific": ["직업별 맞춤 심혈관 건강 전략들"]
  }
}
\`\`\`

**중요 지침:**
1. 실제 측정값을 구체적으로 언급하며 해석
2. 연령, 성별, 직업 특성을 종합적으로 고려
3. 의학적 근거에 기반한 해석 제공
4. 개인화된 실용적 권장사항 제시
5. 심혈관 건강의 복합적 측면 분석
6. 예방 중심의 관리 방안 제시

**중요**: 모든 해석은 개인의 특성을 종합적으로 고려하여 제공하며, 전문의 상담이 필요한 경우 의료기관 방문을 권장합니다.`}static async generatePhysicalHealthComprehensiveInterpretation(e,t,n){try{const a=this.generatePhysicalHealthComprehensivePrompt(e,t,n),i=await this.makeRequest(a,this.DEFAULT_CONFIG),s=this.extractTextFromResponse(i);try{const o=s.match(/```json\s*([\s\S]*?)\s*```/);return o?JSON.parse(o[1]):{comprehensiveInterpretation:s,ageSpecificAnalysis:{ageGroup:this.getAgeGroup(this.calculateAge(e)),typicalCharacteristics:"연령대 특성 분석 필요",currentComparison:"현재 상태와 연령대 평균 비교 필요",riskFactors:["연령 관련 위험 요소 분석 필요"],strengths:["연령대 강점 분석 필요"]},genderSpecificAnalysis:{gender:e.gender==="male"?"남성":"여성",cardiovascularCharacteristics:"성별 특성 분석 필요",hormonalInfluence:"호르몬 영향 분석 필요",healthPatterns:"성별 건강 패턴 분석 필요",managementPoints:["성별 맞춤 관리 포인트 분석 필요"]},occupationalAnalysis:{occupation:this.getOccupationLabel(e.occupation,e.customOccupation),workRequirements:"업무 요구사항 분석 필요",stressFactors:["직업적 스트레스 요인 분석 필요"],cardiovascularMatch:"업무 적합성 분석 필요",workplaceRisks:["직업 환경 위험 요소 분석 필요"],adaptationStrategies:["적응 전략 분석 필요"]},cardiovascularRiskAssessment:{primaryRisks:["주요 위험 요소 분석 필요"],protectiveFactors:["보호 요소 분석 필요"],immediateAttention:["즉시 관심 영역 분석 필요"],longTermMonitoring:["장기 모니터링 영역 분석 필요"]},personalizedRecommendations:{immediate:["즉시 실행 방안 분석 필요"],shortTerm:["단기 전략 분석 필요"],longTerm:["장기 전략 분석 필요"],occupationSpecific:["직업 맞춤 방법 분석 필요"]}}}catch(o){throw console.error("JSON 파싱 실패:",o),new Error("AI 응답 파싱 실패")}}catch(a){throw console.error("신체건강 종합 해석 실패:",a),new Error(`신체건강 종합 해석 실패: ${a instanceof Error?a.message:"알 수 없는 오류"}`)}}static generateMentalHealthComprehensivePrompt(e,t,n){var o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y,Z,de,he,fe,q,ge,me,we;const a=this.calculateAge(e),i=this.getOccupationLabel(e.occupation,e.customOccupation),s=this.assessMeasurementQuality(t.accMetrics);return`
당신은 뇌파 분석 전문 해석 AI입니다. 뇌파 측정 결과를 바탕으로 현재 뇌 기능 상태가 개인의 연령, 성별, 직업적 특성과 어떤 관련이 있는지 종합적으로 해석해주세요.

**중요 지침:**
- 이 분석은 건강 참고 자료이며, 의료 진단이나 치료를 대체하지 않습니다.
- 특정 제품명, 브랜드명, 앱 이름 등은 절대 언급하지 마세요.
- 일반적인 건강 관리 방법과 생활습관 개선 방안만 제시하세요.
- 분석 결과에서 직업을 언급할 때는 반드시 "${i}"로 표기하세요.

## 개인 정보
- 이름: ${e.name}
- 나이: ${a}세 (${this.getAgeGroup(a)} 연령대)
- 성별: ${e.gender==="male"?"남성":"여성"}
- 직업: ${i}

## 뇌파 측정 결과
- 집중력 지수 (Focus Index): ${((l=(o=t.eegMetrics.focusIndex)==null?void 0:o.value)==null?void 0:l.toFixed(2))||"N/A"} (정상범위: 1.8-2.4)
- 이완도 지수 (Relaxation Index): ${((u=(c=t.eegMetrics.relaxationIndex)==null?void 0:c.value)==null?void 0:u.toFixed(3))||"N/A"} (정상범위: 0.18-0.22)  
- 스트레스 지수 (Stress Index): ${((d=(h=t.eegMetrics.stressIndex)==null?void 0:h.value)==null?void 0:d.toFixed(2))||"N/A"} (정상범위: 0.3-0.7)
- 인지 부하 (Cognitive Load): ${((g=(A=t.eegMetrics.cognitiveLoad)==null?void 0:A.value)==null?void 0:g.toFixed(2))||"N/A"} (정상범위: 0.4-0.8)
- 정서 안정성 (Emotional Stability): ${((v=(p=t.eegMetrics.emotionalStability)==null?void 0:p.value)==null?void 0:v.toFixed(2))||"N/A"} (정상범위: 0.5-0.9)
- 좌우뇌 균형 (Hemispheric Balance): ${((y=(m=t.eegMetrics.hemisphericBalance)==null?void 0:m.value)==null?void 0:y.toFixed(2))||"N/A"} (정상범위: -0.1~0.1)
- 총 뇌파 파워 (Total Power): ${((b=(x=t.eegMetrics.totalPower)==null?void 0:x.value)==null?void 0:b.toFixed(2))||"N/A"} (뇌 전체 활성도)

## 뇌파 기반 정신건강 분석 결과
- 점수: ${n.score}/100 (${n.status})
- 주요 소견: ${n.analysis.substring(0,300)}...
- 핵심 지표: ${Object.entries(n.keyMetrics).map(([Me,z])=>`${Me}: ${z}`).join(", ")}

## 측정 품질 평가
${s.assessment}
신뢰도: ${s.reliability}

## 종합 해석 요청사항

### 1. 뇌파 측정 결과의 종합적 의미
- 현재 측정된 모든 뇌파 지표(집중력, 이완도, 스트레스, 인지부하, 정서안정성, 좌우뇌균형, 총파워)의 종합적 해석
- 각 지표의 정상범위 대비 현재 상태와 뇌 기능에 미치는 구체적 영향
- 뇌파 패턴이 보여주는 현재 뇌 상태와 인지기능 수준

### 2. 연령별 특성 분석
- ${a}세 ${this.getAgeGroup(a)} 연령대의 일반적인 뇌 기능 특성
- 현재 측정 결과와 연령대 평균의 비교
- 연령에 따른 정신건강 위험 요소 및 강점

### 3. 성별별 특성 분석
- ${e.gender==="male"?"남성":"여성"}의 뇌파 패턴 특성
- 호르몬 영향 및 성별 특이적 정신건강 패턴
- 성별을 고려한 정신건강 관리 포인트

### 4. 직업적 특성 분석
- ${i}의 업무 특성과 뇌 기능 요구사항
- 직업적 스트레스 요인과 현재 뇌파 패턴의 관계
- 직업 환경에서의 정신건강 위험 요소 및 대응 방안

### 5. 뇌파 분석 종합 해석 및 맞춤형 관리 방안
- 개인 특성을 종합한 뇌 기능 상태 해석
- 우선적으로 개선해야 할 뇌 기능 영역
- 개인 맞춤형 뇌 건강 관리 전략

다음 JSON 형식으로 응답해주세요:

\`\`\`json
{
  "comprehensiveInterpretation": "### 🧠 뇌파 분석 종합 해석\\n\\n**현재 뇌 기능 상태:**\\n- 집중력 지수: ${((_=(S=t.eegMetrics.focusIndex)==null?void 0:S.value)==null?void 0:_.toFixed(2))||"N/A"} (정상범위: 1.8-2.4) - [정상범위 대비 해석 및 인지 기능 의미]\\n- 이완도 지수: ${((w=(C=t.eegMetrics.relaxationIndex)==null?void 0:C.value)==null?void 0:w.toFixed(3))||"N/A"} (정상범위: 0.18-0.22) - [스트레스 관리 능력 및 정신적 이완 상태]\\n- 스트레스 지수: ${((D=(B=t.eegMetrics.stressIndex)==null?void 0:B.value)==null?void 0:D.toFixed(2))||"N/A"} (정상범위: 0.3-0.7) - [뇌의 스트레스 반응 및 부담 정도]\\n- 인지 부하: ${((E=(T=t.eegMetrics.cognitiveLoad)==null?void 0:T.value)==null?void 0:E.toFixed(2))||"N/A"} (정상범위: 0.4-0.8) - [뇌의 피로도 및 인지적 과부하]\\n- 정서 안정성: ${((M=(R=t.eegMetrics.emotionalStability)==null?void 0:R.value)==null?void 0:M.toFixed(2))||"N/A"} (정상범위: 0.5-0.9) - [뇌의 감정 조절 능력 및 정서적 균형]\\n- 좌우뇌 균형: ${((O=(k=t.eegMetrics.hemisphericBalance)==null?void 0:k.value)==null?void 0:O.toFixed(2))||"N/A"} (정상범위: -0.1~0.1) - [좌우뇌 활성도 균형 및 인지적 조화]\\n- 총 파워: ${((H=(Q=t.eegMetrics.totalPower)==null?void 0:Q.value)==null?void 0:H.toFixed(2))||"N/A"} - [전체 뇌 활성도 및 각성 수준]\\n\\n**개인 특성별 해석:**\\n- 연령대 특성: [${a}세 ${this.getAgeGroup(a)}의 뇌 기능 특성과 현재 상태 비교]\\n- 성별 특성: [${e.gender==="male"?"남성":"여성"}의 뇌파 패턴 특성과 뇌 기능 연관성]\\n- 직업적 특성: [${i}의 업무 요구사항과 현재 뇌 기능 적합성]\\n\\n**뇌 기능 개선 방향:**\\n- 주요 개선 영역: [개인 특성 기반 뇌 기능 개선 영역]\\n- 강점 영역: [현재 가지고 있는 뇌 기능 강점]\\n- 개선 가능성: [개선 가능한 영역 및 방법]",
  "individualMetricsInterpretation": {
    "focusIndex": {
      "value": ${((te=(W=t.eegMetrics.focusIndex)==null?void 0:W.value)==null?void 0:te.toFixed(2))||"N/A"},
      "normalRange": "1.8-2.4",
      "status": "[정상/주의/위험] 범위 판정",
      "interpretation": "베타파 기반 집중력 지수에 대한 개인화된 상세 해석 - 현재 인지 집중 능력, 업무 효율성, 학습 능력과의 연관성",
      "personalizedAdvice": "개인 특성(연령/성별/직업)을 고려한 집중력 개선 방법"
    },
    "relaxationIndex": {
      "value": ${((j=(ee=t.eegMetrics.relaxationIndex)==null?void 0:ee.value)==null?void 0:j.toFixed(3))||"N/A"},
      "normalRange": "0.18-0.22",
      "status": "[정상/주의/위험] 범위 판정",
      "interpretation": "알파파 기반 이완도 지수에 대한 개인화된 상세 해석 - 현재 스트레스 회복 능력, 정신적 여유, 휴식 효과",
      "personalizedAdvice": "개인 특성을 고려한 이완 및 스트레스 관리 방법"
    },
    "stressIndex": {
      "value": ${((Y=(G=t.eegMetrics.stressIndex)==null?void 0:G.value)==null?void 0:Y.toFixed(2))||"N/A"},
      "normalRange": "0.3-0.7",
      "status": "[정상/주의/위험] 범위 판정",
      "interpretation": "뇌파 기반 스트레스 지수에 대한 개인화된 상세 해석 - 현재 정신적 긴장도, 스트레스 부담, 자율신경 균형",
      "personalizedAdvice": "개인 특성을 고려한 스트레스 해소 및 관리 전략"
    },
    "cognitiveLoad": {
      "value": ${((de=(Z=t.eegMetrics.cognitiveLoad)==null?void 0:Z.value)==null?void 0:de.toFixed(2))||"N/A"},
      "normalRange": "0.4-0.8",
      "status": "[정상/주의/위험] 범위 판정",
      "interpretation": "인지 부하 지수에 대한 개인화된 상세 해석 - 현재 뇌의 피로도, 정보처리 부담, 인지적 과부하 상태",
      "personalizedAdvice": "개인 특성을 고려한 인지 부하 관리 및 뇌 피로 회복 방법"
    },
    "emotionalStability": {
      "value": ${((fe=(he=t.eegMetrics.emotionalStability)==null?void 0:he.value)==null?void 0:fe.toFixed(2))||"N/A"},
      "normalRange": "0.5-0.9",
      "status": "[정상/주의/위험] 범위 판정",
      "interpretation": "정서 안정성 지수에 대한 개인화된 상세 해석 - 현재 감정 조절 능력, 정서적 균형, 기분 변화 패턴",
      "personalizedAdvice": "개인 특성을 고려한 정서 안정성 향상 및 감정 관리 방법"
    },
    "hemisphericBalance": {
      "value": ${((ge=(q=t.eegMetrics.hemisphericBalance)==null?void 0:q.value)==null?void 0:ge.toFixed(2))||"N/A"},
      "normalRange": "-0.1~0.1",
      "status": "[균형/좌뇌우세/우뇌우세] 판정",
      "interpretation": "좌우뇌 균형 지수에 대한 개인화된 상세 해석 - 현재 좌우뇌 활성도 균형, 인지적 조화, 뇌 기능 효율성",
      "personalizedAdvice": "개인 특성을 고려한 좌우뇌 균형 개선 및 뇌 기능 최적화 방법"
    },
    "totalPower": {
      "value": ${((we=(me=t.eegMetrics.totalPower)==null?void 0:me.value)==null?void 0:we.toFixed(2))||"N/A"},
      "normalRange": "개인별 기준치",
      "status": "[정상/낮음/높음] 활성도 판정",
      "interpretation": "총 뇌파 파워에 대한 개인화된 상세 해석 - 현재 전체 뇌 활성도, 각성 수준, 뇌 기능 전반적 상태",
      "personalizedAdvice": "개인 특성을 고려한 뇌 활성도 최적화 및 뇌 기능 향상 방법"
    }
  },
  "ageSpecificAnalysis": {
    "ageGroup": "${this.getAgeGroup(a)}",
    "typicalCharacteristics": "이 연령대의 일반적인 뇌 기능 특성",
    "currentComparison": "현재 측정 결과와 연령대 평균의 비교",
    "riskFactors": ["연령 관련 정신건강 위험 요소들"],
    "strengths": ["연령대의 정신건강 강점들"]
  },
  "genderSpecificAnalysis": {
    "gender": "${e.gender==="male"?"남성":"여성"}",
    "brainPatternCharacteristics": "성별 특이적 뇌파 패턴 특성",
    "hormonalInfluence": "호르몬이 뇌 기능 및 정신건강에 미치는 영향",
    "mentalHealthPatterns": "성별 특이적 정신건강 패턴",
    "managementPoints": ["성별을 고려한 정신건강 관리 포인트들"]
  },
  "occupationalAnalysis": {
    "occupation": "${i}",
    "workRequirements": "업무에서 요구되는 뇌 기능 특성",
    "stressFactors": ["직업적 스트레스 요인들"],
    "brainFunctionMatch": "현재 뇌 기능과 업무 요구사항의 적합성",
    "workplaceRisks": ["직업 환경에서의 정신건강 위험 요소들"],
    "adaptationStrategies": ["직업적 요구에 대한 적응 전략들"]
  },
  "mentalHealthRiskAssessment": {
    "primaryRisks": ["주요 정신건강 위험 요소들"],
    "protectiveFactors": ["현재 가지고 있는 보호 요소들"],
    "immediateAttention": ["즉시 관심이 필요한 영역들"],
    "longTermMonitoring": ["장기적으로 모니터링이 필요한 영역들"]
  },
  "personalizedRecommendations": {
    "immediate": ["즉시 실행 가능한 정신건강 관리 방법들"],
    "shortTerm": ["단기적 정신건강 개선 전략들"],
    "longTerm": ["장기적 정신건강 유지 전략들"],
    "occupationSpecific": ["직업 특성을 고려한 맞춤형 관리 방법들"]
  }
}
\`\`\`

**중요**: 모든 해석은 개인의 특성을 종합적으로 고려하여 제공하며, 전문의 상담이 필요한 경우 의료기관 방문을 권장합니다.
`}static async generateMentalHealthComprehensiveInterpretation(e,t,n){try{const a=this.generateMentalHealthComprehensivePrompt(e,t,n),i=await this.makeRequest(a,this.DEFAULT_CONFIG),s=this.extractTextFromResponse(i);try{const o=s.match(/```json\s*([\s\S]*?)\s*```/);return o?JSON.parse(o[1]):{comprehensiveInterpretation:s,ageSpecificAnalysis:{ageGroup:this.getAgeGroup(this.calculateAge(e)),typicalCharacteristics:"연령대 특성 분석 필요",currentComparison:"현재 상태와 연령대 평균 비교 필요",riskFactors:["연령 관련 위험 요소 분석 필요"],strengths:["연령대 강점 분석 필요"]},genderSpecificAnalysis:{gender:e.gender==="male"?"남성":"여성",brainPatternCharacteristics:"성별 특성 분석 필요",hormonalInfluence:"호르몬 영향 분석 필요",mentalHealthPatterns:"성별 정신건강 패턴 분석 필요",managementPoints:["성별 맞춤 관리 포인트 분석 필요"]},occupationalAnalysis:{occupation:this.getOccupationLabel(e.occupation,e.customOccupation),workRequirements:"업무 요구사항 분석 필요",stressFactors:["직업적 스트레스 요인 분석 필요"],brainFunctionMatch:"업무 적합성 분석 필요",workplaceRisks:["직업 환경 위험 요소 분석 필요"],adaptationStrategies:["적응 전략 분석 필요"]},mentalHealthRiskAssessment:{primaryRisks:["주요 위험 요소 분석 필요"],protectiveFactors:["보호 요소 분석 필요"],immediateAttention:["즉시 관심 영역 분석 필요"],longTermMonitoring:["장기 모니터링 영역 분석 필요"]},personalizedRecommendations:{immediate:["즉시 실행 방안 분석 필요"],shortTerm:["단기 전략 분석 필요"],longTerm:["장기 전략 분석 필요"],occupationSpecific:["직업 맞춤 방법 분석 필요"]}}}catch(o){throw console.error("JSON 파싱 실패:",o),new Error("AI 응답 파싱 실패")}}catch(a){throw console.error("정신건강 종합 해석 실패:",a),new Error(`정신건강 종합 해석 실패: ${a instanceof Error?a.message:"알 수 없는 오류"}`)}}}Ce(qu,"API_KEY_ID","gemini-api"),Ce(qu,"API_BASE_URL","https://generativelanguage.googleapis.com/v1beta/models"),Ce(qu,"DEFAULT_CONFIG",{model:"gemini-2.5-flash",maxRetries:3,retryDelay:1e3,timeout:9e4}),Ce(qu,"COMPREHENSIVE_ANALYSIS_CONFIG",{model:"gemini-2.5-flash",maxRetries:2,retryDelay:2e3,timeout:18e4}),Ce(qu,"genAI",null);/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Woe,setPrototypeOf:z$,isFrozen:eQe,getPrototypeOf:tQe,getOwnPropertyDescriptor:rQe}=Object;let{freeze:ys,seal:pl,create:qoe}=Object,{apply:YL,construct:XL}=typeof Reflect<"u"&&Reflect;ys||(ys=function(e){return e});pl||(pl=function(e){return e});YL||(YL=function(e,t,n){return e.apply(t,n)});XL||(XL=function(e,t){return new e(...t)});const C_=xs(Array.prototype.forEach),nQe=xs(Array.prototype.lastIndexOf),G$=xs(Array.prototype.pop),Ex=xs(Array.prototype.push),aQe=xs(Array.prototype.splice),S5=xs(String.prototype.toLowerCase),zD=xs(String.prototype.toString),V$=xs(String.prototype.match),Dx=xs(String.prototype.replace),iQe=xs(String.prototype.indexOf),sQe=xs(String.prototype.trim),Ol=xs(Object.prototype.hasOwnProperty),ts=xs(RegExp.prototype.test),Mx=oQe(TypeError);function xs(r){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return YL(r,e,n)}}function oQe(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return XL(r,t)}}function Mr(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S5;z$&&z$(r,null);let n=e.length;for(;n--;){let a=e[n];if(typeof a=="string"){const i=t(a);i!==a&&(eQe(e)||(e[n]=i),a=i)}r[a]=!0}return r}function lQe(r){for(let e=0;e<r.length;e++)Ol(r,e)||(r[e]=null);return r}function Vu(r){const e=qoe(null);for(const[t,n]of Woe(r))Ol(r,t)&&(Array.isArray(n)?e[t]=lQe(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=Vu(n):e[t]=n);return e}function Rx(r,e){for(;r!==null;){const n=rQe(r,e);if(n){if(n.get)return xs(n.get);if(typeof n.value=="function")return xs(n.value)}r=tQe(r)}function t(){return null}return t}const $$=ys(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),GD=ys(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),VD=ys(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),cQe=ys(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$D=ys(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),uQe=ys(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),K$=ys(["#text"]),W$=ys(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),KD=ys(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q$=ys(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),B_=ys(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hQe=pl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),dQe=pl(/<%[\w\W]*|[\w\W]*%>/gm),AQe=pl(/\$\{[\w\W]*/gm),fQe=pl(/^data-[\-\w.\u00B7-\uFFFF]+$/),gQe=pl(/^aria-[\-\w]+$/),Yoe=pl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),pQe=pl(/^(?:\w+script|data):/i),mQe=pl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Xoe=pl(/^html$/i),vQe=pl(/^[a-z][.\w]*(-[.\w]+)+$/i);var Y$=Object.freeze({__proto__:null,ARIA_ATTR:gQe,ATTR_WHITESPACE:mQe,CUSTOM_ELEMENT:vQe,DATA_ATTR:fQe,DOCTYPE_NAME:Xoe,ERB_EXPR:dQe,IS_ALLOWED_URI:Yoe,IS_SCRIPT_OR_DATA:pQe,MUSTACHE_EXPR:hQe,TMPLIT_EXPR:AQe});const Lx={element:1,text:3,progressingInstruction:7,comment:8,document:9},yQe=function(){return typeof window>"u"?null:window},xQe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const a="data-tt-policy-suffix";t&&t.hasAttribute(a)&&(n=t.getAttribute(a));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},X$=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Zoe(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yQe();const e=Mt=>Zoe(Mt);if(e.version="3.2.6",e.removed=[],!r||!r.document||r.document.nodeType!==Lx.document||!r.Element)return e.isSupported=!1,e;let{document:t}=r;const n=t,a=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:A}=r,g=l.prototype,p=Rx(g,"cloneNode"),v=Rx(g,"remove"),m=Rx(g,"nextSibling"),y=Rx(g,"childNodes"),x=Rx(g,"parentNode");if(typeof s=="function"){const Mt=t.createElement("template");Mt.content&&Mt.content.ownerDocument&&(t=Mt.content.ownerDocument)}let b,S="";const{implementation:_,createNodeIterator:C,createDocumentFragment:w,getElementsByTagName:B}=t,{importNode:D}=n;let T=X$();e.isSupported=typeof Woe=="function"&&typeof x=="function"&&_&&_.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:E,ERB_EXPR:R,TMPLIT_EXPR:M,DATA_ATTR:k,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:Q,ATTR_WHITESPACE:H,CUSTOM_ELEMENT:W}=Y$;let{IS_ALLOWED_URI:te}=Y$,ee=null;const j=Mr({},[...$$,...GD,...VD,...$D,...K$]);let G=null;const Y=Mr({},[...W$,...KD,...q$,...B_]);let Z=Object.seal(qoe(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,he=null,fe=!0,q=!0,ge=!1,me=!0,we=!1,Me=!0,z=!1,pe=!1,J=!1,oe=!1,ae=!1,ue=!1,be=!0,_e=!1;const ye="user-content-";let Ee=!0,ze=!1,Fe={},Ge=null;const at=Mr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ut=null;const gt=Mr({},["audio","video","img","source","image","track"]);let Le=null;const Qe=Mr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ht="http://www.w3.org/1998/Math/MathML",it="http://www.w3.org/2000/svg",Vt="http://www.w3.org/1999/xhtml";let kt=Vt,Bt=!1,Sr=null;const zt=Mr({},[ht,it,Vt],zD);let qe=Mr({},["mi","mo","mn","ms","mtext"]),pt=Mr({},["annotation-xml"]);const Nt=Mr({},["title","style","font","a","script"]);let Kt=null;const Yt=["application/xhtml+xml","text/html"],Je="text/html";let yt=null,mr=null;const dr=t.createElement("form"),an=function(Be){return Be instanceof RegExp||Be instanceof Function},_r=function(){let Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(mr&&mr===Be)){if((!Be||typeof Be!="object")&&(Be={}),Be=Vu(Be),Kt=Yt.indexOf(Be.PARSER_MEDIA_TYPE)===-1?Je:Be.PARSER_MEDIA_TYPE,yt=Kt==="application/xhtml+xml"?zD:S5,ee=Ol(Be,"ALLOWED_TAGS")?Mr({},Be.ALLOWED_TAGS,yt):j,G=Ol(Be,"ALLOWED_ATTR")?Mr({},Be.ALLOWED_ATTR,yt):Y,Sr=Ol(Be,"ALLOWED_NAMESPACES")?Mr({},Be.ALLOWED_NAMESPACES,zD):zt,Le=Ol(Be,"ADD_URI_SAFE_ATTR")?Mr(Vu(Qe),Be.ADD_URI_SAFE_ATTR,yt):Qe,ut=Ol(Be,"ADD_DATA_URI_TAGS")?Mr(Vu(gt),Be.ADD_DATA_URI_TAGS,yt):gt,Ge=Ol(Be,"FORBID_CONTENTS")?Mr({},Be.FORBID_CONTENTS,yt):at,de=Ol(Be,"FORBID_TAGS")?Mr({},Be.FORBID_TAGS,yt):Vu({}),he=Ol(Be,"FORBID_ATTR")?Mr({},Be.FORBID_ATTR,yt):Vu({}),Fe=Ol(Be,"USE_PROFILES")?Be.USE_PROFILES:!1,fe=Be.ALLOW_ARIA_ATTR!==!1,q=Be.ALLOW_DATA_ATTR!==!1,ge=Be.ALLOW_UNKNOWN_PROTOCOLS||!1,me=Be.ALLOW_SELF_CLOSE_IN_ATTR!==!1,we=Be.SAFE_FOR_TEMPLATES||!1,Me=Be.SAFE_FOR_XML!==!1,z=Be.WHOLE_DOCUMENT||!1,oe=Be.RETURN_DOM||!1,ae=Be.RETURN_DOM_FRAGMENT||!1,ue=Be.RETURN_TRUSTED_TYPE||!1,J=Be.FORCE_BODY||!1,be=Be.SANITIZE_DOM!==!1,_e=Be.SANITIZE_NAMED_PROPS||!1,Ee=Be.KEEP_CONTENT!==!1,ze=Be.IN_PLACE||!1,te=Be.ALLOWED_URI_REGEXP||Yoe,kt=Be.NAMESPACE||Vt,qe=Be.MATHML_TEXT_INTEGRATION_POINTS||qe,pt=Be.HTML_INTEGRATION_POINTS||pt,Z=Be.CUSTOM_ELEMENT_HANDLING||{},Be.CUSTOM_ELEMENT_HANDLING&&an(Be.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=Be.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Be.CUSTOM_ELEMENT_HANDLING&&an(Be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=Be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Be.CUSTOM_ELEMENT_HANDLING&&typeof Be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=Be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),we&&(q=!1),ae&&(oe=!0),Fe&&(ee=Mr({},K$),G=[],Fe.html===!0&&(Mr(ee,$$),Mr(G,W$)),Fe.svg===!0&&(Mr(ee,GD),Mr(G,KD),Mr(G,B_)),Fe.svgFilters===!0&&(Mr(ee,VD),Mr(G,KD),Mr(G,B_)),Fe.mathMl===!0&&(Mr(ee,$D),Mr(G,q$),Mr(G,B_))),Be.ADD_TAGS&&(ee===j&&(ee=Vu(ee)),Mr(ee,Be.ADD_TAGS,yt)),Be.ADD_ATTR&&(G===Y&&(G=Vu(G)),Mr(G,Be.ADD_ATTR,yt)),Be.ADD_URI_SAFE_ATTR&&Mr(Le,Be.ADD_URI_SAFE_ATTR,yt),Be.FORBID_CONTENTS&&(Ge===at&&(Ge=Vu(Ge)),Mr(Ge,Be.FORBID_CONTENTS,yt)),Ee&&(ee["#text"]=!0),z&&Mr(ee,["html","head","body"]),ee.table&&(Mr(ee,["tbody"]),delete de.tbody),Be.TRUSTED_TYPES_POLICY){if(typeof Be.TRUSTED_TYPES_POLICY.createHTML!="function")throw Mx('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Be.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Mx('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=Be.TRUSTED_TYPES_POLICY,S=b.createHTML("")}else b===void 0&&(b=xQe(A,a)),b!==null&&typeof S=="string"&&(S=b.createHTML(""));ys&&ys(Be),mr=Be}},mt=Mr({},[...GD,...VD,...cQe]),Cn=Mr({},[...$D,...uQe]),Pr=function(Be){let lt=x(Be);(!lt||!lt.tagName)&&(lt={namespaceURI:kt,tagName:"template"});const Et=S5(Be.tagName),zr=S5(lt.tagName);return Sr[Be.namespaceURI]?Be.namespaceURI===it?lt.namespaceURI===Vt?Et==="svg":lt.namespaceURI===ht?Et==="svg"&&(zr==="annotation-xml"||qe[zr]):!!mt[Et]:Be.namespaceURI===ht?lt.namespaceURI===Vt?Et==="math":lt.namespaceURI===it?Et==="math"&&pt[zr]:!!Cn[Et]:Be.namespaceURI===Vt?lt.namespaceURI===it&&!pt[zr]||lt.namespaceURI===ht&&!qe[zr]?!1:!Cn[Et]&&(Nt[Et]||!mt[Et]):!!(Kt==="application/xhtml+xml"&&Sr[Be.namespaceURI]):!1},ar=function(Be){Ex(e.removed,{element:Be});try{x(Be).removeChild(Be)}catch{v(Be)}},Dr=function(Be,lt){try{Ex(e.removed,{attribute:lt.getAttributeNode(Be),from:lt})}catch{Ex(e.removed,{attribute:null,from:lt})}if(lt.removeAttribute(Be),Be==="is")if(oe||ae)try{ar(lt)}catch{}else try{lt.setAttribute(Be,"")}catch{}},Nr=function(Be){let lt=null,Et=null;if(J)Be="<remove></remove>"+Be;else{const Bn=V$(Be,/^[\r\n\t ]+/);Et=Bn&&Bn[0]}Kt==="application/xhtml+xml"&&kt===Vt&&(Be='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Be+"</body></html>");const zr=b?b.createHTML(Be):Be;if(kt===Vt)try{lt=new d().parseFromString(zr,Kt)}catch{}if(!lt||!lt.documentElement){lt=_.createDocument(kt,"template",null);try{lt.documentElement.innerHTML=Bt?S:zr}catch{}}const ta=lt.body||lt.documentElement;return Be&&Et&&ta.insertBefore(t.createTextNode(Et),ta.childNodes[0]||null),kt===Vt?B.call(lt,z?"html":"body")[0]:z?lt.documentElement:ta},sn=function(Be){return C.call(Be.ownerDocument||Be,Be,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},ri=function(Be){return Be instanceof h&&(typeof Be.nodeName!="string"||typeof Be.textContent!="string"||typeof Be.removeChild!="function"||!(Be.attributes instanceof u)||typeof Be.removeAttribute!="function"||typeof Be.setAttribute!="function"||typeof Be.namespaceURI!="string"||typeof Be.insertBefore!="function"||typeof Be.hasChildNodes!="function")},Ea=function(Be){return typeof o=="function"&&Be instanceof o};function Zr(Mt,Be,lt){C_(Mt,Et=>{Et.call(e,Be,lt,mr)})}const ia=function(Be){let lt=null;if(Zr(T.beforeSanitizeElements,Be,null),ri(Be))return ar(Be),!0;const Et=yt(Be.nodeName);if(Zr(T.uponSanitizeElement,Be,{tagName:Et,allowedTags:ee}),Me&&Be.hasChildNodes()&&!Ea(Be.firstElementChild)&&ts(/<[/\w!]/g,Be.innerHTML)&&ts(/<[/\w!]/g,Be.textContent)||Be.nodeType===Lx.progressingInstruction||Me&&Be.nodeType===Lx.comment&&ts(/<[/\w]/g,Be.data))return ar(Be),!0;if(!ee[Et]||de[Et]){if(!de[Et]&&fa(Et)&&(Z.tagNameCheck instanceof RegExp&&ts(Z.tagNameCheck,Et)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(Et)))return!1;if(Ee&&!Ge[Et]){const zr=x(Be)||Be.parentNode,ta=y(Be)||Be.childNodes;if(ta&&zr){const Bn=ta.length;for(let ga=Bn-1;ga>=0;--ga){const Da=p(ta[ga],!0);Da.__removalCount=(Be.__removalCount||0)+1,zr.insertBefore(Da,m(Be))}}}return ar(Be),!0}return Be instanceof l&&!Pr(Be)||(Et==="noscript"||Et==="noembed"||Et==="noframes")&&ts(/<\/no(script|embed|frames)/i,Be.innerHTML)?(ar(Be),!0):(we&&Be.nodeType===Lx.text&&(lt=Be.textContent,C_([E,R,M],zr=>{lt=Dx(lt,zr," ")}),Be.textContent!==lt&&(Ex(e.removed,{element:Be.cloneNode()}),Be.textContent=lt)),Zr(T.afterSanitizeElements,Be,null),!1)},Yn=function(Be,lt,Et){if(be&&(lt==="id"||lt==="name")&&(Et in t||Et in dr))return!1;if(!(q&&!he[lt]&&ts(k,lt))){if(!(fe&&ts(O,lt))){if(!G[lt]||he[lt]){if(!(fa(Be)&&(Z.tagNameCheck instanceof RegExp&&ts(Z.tagNameCheck,Be)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(Be))&&(Z.attributeNameCheck instanceof RegExp&&ts(Z.attributeNameCheck,lt)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(lt))||lt==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&ts(Z.tagNameCheck,Et)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(Et))))return!1}else if(!Le[lt]){if(!ts(te,Dx(Et,H,""))){if(!((lt==="src"||lt==="xlink:href"||lt==="href")&&Be!=="script"&&iQe(Et,"data:")===0&&ut[Be])){if(!(ge&&!ts(Q,Dx(Et,H,"")))){if(Et)return!1}}}}}}return!0},fa=function(Be){return Be!=="annotation-xml"&&V$(Be,W)},Ln=function(Be){Zr(T.beforeSanitizeAttributes,Be,null);const{attributes:lt}=Be;if(!lt||ri(Be))return;const Et={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:G,forceKeepAttr:void 0};let zr=lt.length;for(;zr--;){const ta=lt[zr],{name:Bn,namespaceURI:ga,value:Da}=ta,Ti=yt(Bn),qi=Da;let On=Bn==="value"?qi:sQe(qi);if(Et.attrName=Ti,Et.attrValue=On,Et.keepAttr=!0,Et.forceKeepAttr=void 0,Zr(T.uponSanitizeAttribute,Be,Et),On=Et.attrValue,_e&&(Ti==="id"||Ti==="name")&&(Dr(Bn,Be),On=ye+On),Me&&ts(/((--!?|])>)|<\/(style|title)/i,On)){Dr(Bn,Be);continue}if(Et.forceKeepAttr)continue;if(!Et.keepAttr){Dr(Bn,Be);continue}if(!me&&ts(/\/>/i,On)){Dr(Bn,Be);continue}we&&C_([E,R,M],dc=>{On=Dx(On,dc," ")});const Qh=yt(Be.nodeName);if(!Yn(Qh,Ti,On)){Dr(Bn,Be);continue}if(b&&typeof A=="object"&&typeof A.getAttributeType=="function"&&!ga)switch(A.getAttributeType(Qh,Ti)){case"TrustedHTML":{On=b.createHTML(On);break}case"TrustedScriptURL":{On=b.createScriptURL(On);break}}if(On!==qi)try{ga?Be.setAttributeNS(ga,Bn,On):Be.setAttribute(Bn,On),ri(Be)?ar(Be):G$(e.removed)}catch{Dr(Bn,Be)}}Zr(T.afterSanitizeAttributes,Be,null)},ni=function Mt(Be){let lt=null;const Et=sn(Be);for(Zr(T.beforeSanitizeShadowDOM,Be,null);lt=Et.nextNode();)Zr(T.uponSanitizeShadowNode,lt,null),ia(lt),Ln(lt),lt.content instanceof i&&Mt(lt.content);Zr(T.afterSanitizeShadowDOM,Be,null)};return e.sanitize=function(Mt){let Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},lt=null,Et=null,zr=null,ta=null;if(Bt=!Mt,Bt&&(Mt="<!-->"),typeof Mt!="string"&&!Ea(Mt))if(typeof Mt.toString=="function"){if(Mt=Mt.toString(),typeof Mt!="string")throw Mx("dirty is not a string, aborting")}else throw Mx("toString is not a function");if(!e.isSupported)return Mt;if(pe||_r(Be),e.removed=[],typeof Mt=="string"&&(ze=!1),ze){if(Mt.nodeName){const Da=yt(Mt.nodeName);if(!ee[Da]||de[Da])throw Mx("root node is forbidden and cannot be sanitized in-place")}}else if(Mt instanceof o)lt=Nr("<!---->"),Et=lt.ownerDocument.importNode(Mt,!0),Et.nodeType===Lx.element&&Et.nodeName==="BODY"||Et.nodeName==="HTML"?lt=Et:lt.appendChild(Et);else{if(!oe&&!we&&!z&&Mt.indexOf("<")===-1)return b&&ue?b.createHTML(Mt):Mt;if(lt=Nr(Mt),!lt)return oe?null:ue?S:""}lt&&J&&ar(lt.firstChild);const Bn=sn(ze?Mt:lt);for(;zr=Bn.nextNode();)ia(zr),Ln(zr),zr.content instanceof i&&ni(zr.content);if(ze)return Mt;if(oe){if(ae)for(ta=w.call(lt.ownerDocument);lt.firstChild;)ta.appendChild(lt.firstChild);else ta=lt;return(G.shadowroot||G.shadowrootmode)&&(ta=D.call(n,ta,!0)),ta}let ga=z?lt.outerHTML:lt.innerHTML;return z&&ee["!doctype"]&&lt.ownerDocument&&lt.ownerDocument.doctype&&lt.ownerDocument.doctype.name&&ts(Xoe,lt.ownerDocument.doctype.name)&&(ga="<!DOCTYPE "+lt.ownerDocument.doctype.name+`>
`+ga),we&&C_([E,R,M],Da=>{ga=Dx(ga,Da," ")}),b&&ue?b.createHTML(ga):ga},e.setConfig=function(){let Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_r(Mt),pe=!0},e.clearConfig=function(){mr=null,pe=!1},e.isValidAttribute=function(Mt,Be,lt){mr||_r({});const Et=yt(Mt),zr=yt(Be);return Yn(Et,zr,lt)},e.addHook=function(Mt,Be){typeof Be=="function"&&Ex(T[Mt],Be)},e.removeHook=function(Mt,Be){if(Be!==void 0){const lt=nQe(T[Mt],Be);return lt===-1?void 0:aQe(T[Mt],lt,1)[0]}return G$(T[Mt])},e.removeHooks=function(Mt){T[Mt]=[]},e.removeAllHooks=function(){T=X$()},e}var Joe=Zoe();const bQe=Object.freeze(Object.defineProperty({__proto__:null,default:Joe},Symbol.toStringTag,{value:"Module"})),xr=({content:r,className:e="",variant:t="default"})=>{const[n,a]=K.useState(""),[i,s]=K.useState(!0),[o,l]=K.useState(null);K.useEffect(()=>{(async()=>{try{s(!0),l(null),console.log("마크다운 렌더링 시작:",r);const h=await tn.parse(r,{gfm:!0,breaks:!0});console.log("마크다운 변환 결과:",h);const d=Joe.sanitize(h,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","br","strong","em","u","del","ul","ol","li","blockquote","code","pre","table","thead","tbody","tr","th","td","hr","div","span"],ALLOWED_ATTR:["class","style"],ALLOW_DATA_ATTR:!1});console.log("정화된 HTML:",d),a(d)}catch(h){console.error("마크다운 렌더링 오류:",h),l("마크다운 렌더링 중 오류가 발생했습니다.")}finally{s(!1)}})()},[r]);const c=`ai-analysis-renderer-${t}`;return i?f.jsx("div",{className:`ai-analysis-markdown-renderer ${c} ${e}`,children:f.jsx("div",{className:"ai-analysis-loading",children:f.jsxs("div",{className:"animate-pulse",children:[f.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),f.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})}):o?f.jsx("div",{className:`ai-analysis-markdown-renderer ${c} ${e}`,children:f.jsx("div",{className:"ai-analysis-error",children:o})}):f.jsx("div",{className:`ai-analysis-markdown-renderer ${c} ${e}`,dangerouslySetInnerHTML:{__html:n}})},wQe=({report:r,analysisResult:e,isExpanded:t,onToggleExpanded:n,EEGMetricChart:a})=>{var i,s,o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y,Z,de,he,fe,q,ge,me,we,Me,z,pe,J,oe,ae,ue,be,_e,ye,Ee,ze,Fe,Ge,at,ut,gt,Le,Qe,ht,it,Vt,kt,Bt,Sr,zt,qe,pt,Nt,Kt,Yt,Je,yt,mr,dr,an,_r,mt,Cn,Pr,ar,Dr,Nr,sn,ri,Ea,Zr,ia,Yn,fa,Ln,ni,Mt;return f.jsxs(Ye,{className:"bg-white border-gray-200 shadow-sm",children:[f.jsx(wt,{className:"cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-200",onClick:n,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:f.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),f.jsxs("div",{children:[f.jsx(St,{className:"text-lg text-gray-900",children:"전체 건강 개요"}),f.jsx(na,{className:"text-gray-600",children:"종합 건강 점수 및 개인 정보"})]})]}),t?f.jsx(Ep,{className:"w-5 h-5 text-gray-500"}):f.jsx(Ph,{className:"w-5 h-5 text-gray-500"})]})}),t&&f.jsx(ct,{className:"p-6 bg-white",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900 justify-center",children:[f.jsx(l0,{className:"w-5 h-5 text-green-600"}),"종합 건강 점수"]})}),f.jsx(ct,{className:"flex flex-col items-center justify-center space-y-4",children:f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:e.overallHealth.score,normalRange:{min:70,max:100},label:"종합 건강 점수",unit:"",status:e.overallHealth.score>=80?"normal":e.overallHealth.score>=60?"high":"low",customLabels:{low:"주의",high:"보통",normal:"양호"}})})})})]}),f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(ho,{className:"w-5 h-5 text-blue-600"}),"건강 요소별 현황"]})}),f.jsxs(ct,{className:"space-y-5",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"뇌파 건강도"}),f.jsx(Gt,{className:`text-xs px-2 py-1 ${(((s=(i=e.detailedAnalysis)==null?void 0:i.mentalHealth)==null?void 0:s.score)||78)>=80?"bg-green-100 text-green-800":(((l=(o=e.detailedAnalysis)==null?void 0:o.mentalHealth)==null?void 0:l.score)||78)>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:(((u=(c=e.detailedAnalysis)==null?void 0:c.mentalHealth)==null?void 0:u.score)||78)>=80?"양호":(((d=(h=e.detailedAnalysis)==null?void 0:h.mentalHealth)==null?void 0:d.score)||78)>=70?"보통":"주의"})]}),f.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[((g=(A=e.detailedAnalysis)==null?void 0:A.mentalHealth)==null?void 0:g.score)||78,"/100"]})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"flex w-full h-3 rounded-full overflow-hidden",children:[f.jsx("div",{className:"w-[70%] bg-red-200"}),f.jsx("div",{className:"w-[10%] bg-yellow-200"}),f.jsx("div",{className:"w-[20%] bg-green-200"})]}),f.jsx("div",{className:"absolute top-0 h-3 w-1 bg-gray-800 rounded-full",style:{left:`${((v=(p=e.detailedAnalysis)==null?void 0:p.mentalHealth)==null?void 0:v.score)||78}%`,transform:"translateX(-50%)"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"70%"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"80%"}})]}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[f.jsx("span",{children:"주의"}),f.jsx("span",{children:"보통"}),f.jsx("span",{children:"양호"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"맥파 건강도"}),f.jsx(Gt,{className:`text-xs px-2 py-1 ${(((y=(m=e.detailedAnalysis)==null?void 0:m.physicalHealth)==null?void 0:y.score)||82)>=80?"bg-green-100 text-green-800":(((b=(x=e.detailedAnalysis)==null?void 0:x.physicalHealth)==null?void 0:b.score)||82)>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:(((_=(S=e.detailedAnalysis)==null?void 0:S.physicalHealth)==null?void 0:_.score)||82)>=80?"양호":(((w=(C=e.detailedAnalysis)==null?void 0:C.physicalHealth)==null?void 0:w.score)||82)>=70?"보통":"주의"})]}),f.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[((D=(B=e.detailedAnalysis)==null?void 0:B.physicalHealth)==null?void 0:D.score)||82,"/100"]})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"flex w-full h-3 rounded-full overflow-hidden",children:[f.jsx("div",{className:"w-[70%] bg-red-200"}),f.jsx("div",{className:"w-[10%] bg-yellow-200"}),f.jsx("div",{className:"w-[20%] bg-green-200"})]}),f.jsx("div",{className:"absolute top-0 h-3 w-1 bg-gray-800 rounded-full",style:{left:`${((E=(T=e.detailedAnalysis)==null?void 0:T.physicalHealth)==null?void 0:E.score)||82}%`,transform:"translateX(-50%)"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"70%"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"80%"}})]}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[f.jsx("span",{children:"주의"}),f.jsx("span",{children:"보통"}),f.jsx("span",{children:"양호"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"우울"}),f.jsx(Gt,{className:`text-xs px-2 py-1 ${Math.round(((k=(M=(R=e.detailedAnalysis)==null?void 0:R.mentalHealthRisk)==null?void 0:M.depression)==null?void 0:k.riskScore)||45)<=20?"bg-green-100 text-green-800":Math.round(((H=(Q=(O=e.detailedAnalysis)==null?void 0:O.mentalHealthRisk)==null?void 0:Q.depression)==null?void 0:H.riskScore)||45)<=35?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:Math.round(((ee=(te=(W=e.detailedAnalysis)==null?void 0:W.mentalHealthRisk)==null?void 0:te.depression)==null?void 0:ee.riskScore)||45)<=20?"양호":Math.round(((Y=(G=(j=e.detailedAnalysis)==null?void 0:j.mentalHealthRisk)==null?void 0:G.depression)==null?void 0:Y.riskScore)||45)<=35?"보통":"주의"})]}),f.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(((he=(de=(Z=e.detailedAnalysis)==null?void 0:Z.mentalHealthRisk)==null?void 0:de.depression)==null?void 0:he.riskScore)||45),"% 위험도"]})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"flex w-full h-3 rounded-full overflow-hidden",children:[f.jsx("div",{className:"w-[20%] bg-green-200"}),f.jsx("div",{className:"w-[15%] bg-yellow-200"}),f.jsx("div",{className:"w-[65%] bg-red-200"})]}),f.jsx("div",{className:"absolute top-0 h-3 w-1 bg-gray-800 rounded-full",style:{left:`${Math.round(((ge=(q=(fe=e.detailedAnalysis)==null?void 0:fe.mentalHealthRisk)==null?void 0:q.depression)==null?void 0:ge.riskScore)||45)}%`,transform:"translateX(-50%)"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"20%"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"35%"}})]}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[f.jsx("span",{children:"양호"}),f.jsx("span",{children:"보통"}),f.jsx("span",{children:"주의"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"집중력"}),f.jsx(Gt,{className:`text-xs px-2 py-1 ${Math.round(((Me=(we=(me=e.detailedAnalysis)==null?void 0:me.mentalHealthRisk)==null?void 0:we.adhd)==null?void 0:Me.riskScore)||54)<=20?"bg-green-100 text-green-800":Math.round(((J=(pe=(z=e.detailedAnalysis)==null?void 0:z.mentalHealthRisk)==null?void 0:pe.adhd)==null?void 0:J.riskScore)||54)<=35?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:Math.round(((ue=(ae=(oe=e.detailedAnalysis)==null?void 0:oe.mentalHealthRisk)==null?void 0:ae.adhd)==null?void 0:ue.riskScore)||54)<=20?"양호":Math.round(((ye=(_e=(be=e.detailedAnalysis)==null?void 0:be.mentalHealthRisk)==null?void 0:_e.adhd)==null?void 0:ye.riskScore)||54)<=35?"보통":"주의"})]}),f.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(((Fe=(ze=(Ee=e.detailedAnalysis)==null?void 0:Ee.mentalHealthRisk)==null?void 0:ze.adhd)==null?void 0:Fe.riskScore)||54),"% 위험도"]})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"flex w-full h-3 rounded-full overflow-hidden",children:[f.jsx("div",{className:"w-[20%] bg-green-200"}),f.jsx("div",{className:"w-[15%] bg-yellow-200"}),f.jsx("div",{className:"w-[65%] bg-red-200"})]}),f.jsx("div",{className:"absolute top-0 h-3 w-1 bg-gray-800 rounded-full",style:{left:`${Math.round(((ut=(at=(Ge=e.detailedAnalysis)==null?void 0:Ge.mentalHealthRisk)==null?void 0:at.adhd)==null?void 0:ut.riskScore)||54)}%`,transform:"translateX(-50%)"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"20%"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"35%"}})]}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[f.jsx("span",{children:"양호"}),f.jsx("span",{children:"보통"}),f.jsx("span",{children:"주의"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"번아웃"}),f.jsx(Gt,{className:`text-xs px-2 py-1 ${Math.round(((Qe=(Le=(gt=e.detailedAnalysis)==null?void 0:gt.mentalHealthRisk)==null?void 0:Le.burnout)==null?void 0:Qe.riskScore)||36)<=20?"bg-green-100 text-green-800":Math.round(((Vt=(it=(ht=e.detailedAnalysis)==null?void 0:ht.mentalHealthRisk)==null?void 0:it.burnout)==null?void 0:Vt.riskScore)||36)<=35?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:Math.round(((Sr=(Bt=(kt=e.detailedAnalysis)==null?void 0:kt.mentalHealthRisk)==null?void 0:Bt.burnout)==null?void 0:Sr.riskScore)||36)<=20?"양호":Math.round(((pt=(qe=(zt=e.detailedAnalysis)==null?void 0:zt.mentalHealthRisk)==null?void 0:qe.burnout)==null?void 0:pt.riskScore)||36)<=35?"보통":"주의"})]}),f.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(((Yt=(Kt=(Nt=e.detailedAnalysis)==null?void 0:Nt.mentalHealthRisk)==null?void 0:Kt.burnout)==null?void 0:Yt.riskScore)||36),"% 위험도"]})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"flex w-full h-3 rounded-full overflow-hidden",children:[f.jsx("div",{className:"w-[20%] bg-green-200"}),f.jsx("div",{className:"w-[15%] bg-yellow-200"}),f.jsx("div",{className:"w-[65%] bg-red-200"})]}),f.jsx("div",{className:"absolute top-0 h-3 w-1 bg-gray-800 rounded-full",style:{left:`${Math.round(((mr=(yt=(Je=e.detailedAnalysis)==null?void 0:Je.mentalHealthRisk)==null?void 0:yt.burnout)==null?void 0:mr.riskScore)||36)}%`,transform:"translateX(-50%)"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"20%"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"35%"}})]}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[f.jsx("span",{children:"양호"}),f.jsx("span",{children:"보통"}),f.jsx("span",{children:"주의"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"충동성"}),f.jsx(Gt,{className:`text-xs px-2 py-1 ${Math.round(((_r=(an=(dr=e.detailedAnalysis)==null?void 0:dr.mentalHealthRisk)==null?void 0:an.impulsivity)==null?void 0:_r.riskScore)||28)<=20?"bg-green-100 text-green-800":Math.round(((Pr=(Cn=(mt=e.detailedAnalysis)==null?void 0:mt.mentalHealthRisk)==null?void 0:Cn.impulsivity)==null?void 0:Pr.riskScore)||28)<=35?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:Math.round(((Nr=(Dr=(ar=e.detailedAnalysis)==null?void 0:ar.mentalHealthRisk)==null?void 0:Dr.impulsivity)==null?void 0:Nr.riskScore)||28)<=20?"양호":Math.round(((Ea=(ri=(sn=e.detailedAnalysis)==null?void 0:sn.mentalHealthRisk)==null?void 0:ri.impulsivity)==null?void 0:Ea.riskScore)||28)<=35?"보통":"주의"})]}),f.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(((Yn=(ia=(Zr=e.detailedAnalysis)==null?void 0:Zr.mentalHealthRisk)==null?void 0:ia.impulsivity)==null?void 0:Yn.riskScore)||28),"% 위험도"]})]}),f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"flex w-full h-3 rounded-full overflow-hidden",children:[f.jsx("div",{className:"w-[20%] bg-green-200"}),f.jsx("div",{className:"w-[15%] bg-yellow-200"}),f.jsx("div",{className:"w-[65%] bg-red-200"})]}),f.jsx("div",{className:"absolute top-0 h-3 w-1 bg-gray-800 rounded-full",style:{left:`${Math.round(((ni=(Ln=(fa=e.detailedAnalysis)==null?void 0:fa.mentalHealthRisk)==null?void 0:Ln.impulsivity)==null?void 0:ni.riskScore)||28)}%`,transform:"translateX(-50%)"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"20%"}}),f.jsx("div",{className:"absolute top-0 h-3 w-0.5 bg-white",style:{left:"35%"}})]}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[f.jsx("span",{children:"양호"}),f.jsx("span",{children:"보통"}),f.jsx("span",{children:"주의"})]})]})]})]})]}),((Mt=e.overallHealth)==null?void 0:Mt.detailedComprehensiveSummary)&&f.jsxs("div",{className:"mt-6",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[f.jsx(Us,{className:"w-5 h-5 text-blue-600"}),"종합 분석 결과"]}),f.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.overallHealth.detailedComprehensiveSummary,variant:"compact"})})})]})]})})]})},SQe=({report:r,analysisResult:e,isExpanded:t,onToggleExpanded:n,EEGMetricChart:a,getScoreBadgeColor:i,getOccupationLabel:s,ScoreDistributionBar:o,mentalHealthComprehensive:l,physicalHealthComprehensive:c,loadingComprehensive:u,preparePPGMetrics:h,getMetricStatus:d,getEEGCardBackgroundClass:A})=>{var v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y,Z,de,he,fe,q,ge,me,we,Me,z,pe,J,oe;const g=h(),p={heartRate:g.find(ae=>ae.id==="heartRate")||{value:0,normalRange:{min:60,max:100},status:"normal"},rmssd:g.find(ae=>ae.id==="rmssd")||{value:0,normalRange:{min:20,max:50},status:"normal"},sdnn:g.find(ae=>ae.id==="sdnn")||{value:0},spo2:g.find(ae=>ae.id==="spo2")||{},lfHfRatio:g.find(ae=>ae.id==="lfHfRatio")||{value:0}};return f.jsxs(Ye,{className:"bg-white border-gray-200 shadow-sm",children:[f.jsx(wt,{className:"cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-200",onClick:n,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:f.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),f.jsxs("div",{children:[f.jsx(St,{className:"text-lg text-gray-900",children:"상세 분석 결과"}),f.jsx(na,{className:"text-gray-600",children:"EEG, PPG 생체신호 분석 결과"})]})]}),t?f.jsx(Ep,{className:"w-5 h-5 text-gray-500"}):f.jsx(Ph,{className:"w-5 h-5 text-gray-500"})]})}),t&&f.jsx(ct,{className:"p-6 bg-white",children:f.jsx("div",{className:"space-y-8",children:f.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[((v=e.detailedAnalysis)==null?void 0:v.mentalHealth)&&f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(Ba,{className:"w-5 h-5 text-purple-600"}),"🧠 뇌파 분석 결과"]})}),f.jsxs(ct,{className:"space-y-8",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"뇌파 분석 종합 해석"}),f.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-purple-600 font-medium mb-1",children:"뇌파 기반 정신건강 점수"}),f.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[e.detailedAnalysis.mentalHealth.score,"점"]})]}),f.jsx("div",{children:f.jsx(Gt,{className:i(e.detailedAnalysis.mentalHealth.score),children:e.detailedAnalysis.mentalHealth.status})})]}),f.jsx(o,{score:e.detailedAnalysis.mentalHealth.score,label:"정신건강 점수"}),f.jsxs("div",{className:"mt-4 prose prose-sm max-w-none prose-gray",children:[f.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:"해석"}),u?f.jsxs("div",{className:"flex items-center gap-2 p-4 bg-gray-50 rounded-lg",children:[f.jsx(i0,{className:"w-4 h-4 animate-spin text-gray-500"}),f.jsx("span",{className:"text-sm text-gray-600",children:"정신건강 종합 해석을 분석하고 있습니다..."})]}):l?f.jsx(xr,{content:l.comprehensiveInterpretation}):f.jsx(xr,{content:`🧠 **뇌 기능 종합 분석**

집중력 지수 ${((y=(m=r.measurementData.eegMetrics.focusIndex)==null?void 0:m.value)==null?void 0:y.toFixed(3))||"N/A"}와 이완도 ${((b=(x=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:x.value)==null?void 0:b.toFixed(3))||"N/A"}는 현재 뇌 기능이 양호하게 유지되고 있음을 보여주나, 스트레스 지수 ${((_=(S=r.measurementData.eegMetrics.stressIndex)==null?void 0:S.value)==null?void 0:_.toFixed(3))||"N/A"}과 인지 부하 ${((w=(C=r.measurementData.eegMetrics.cognitiveLoad)==null?void 0:C.value)==null?void 0:w.toFixed(3))||"N/A"}는 정신적 긴장과 뇌 활동량 증가를 나타냅니다. 정서 안정성 ${((D=(B=r.measurementData.eegMetrics.emotionalStability)==null?void 0:B.value)==null?void 0:D.toFixed(3))||"N/A"}은 감정 조절 능력이 비교적 잘 유지되고 있음을 시사합니다.`})]})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"개별 지표 상세 분석"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx("div",{className:`${A(d(((T=r.measurementData.eegMetrics.stressIndex)==null?void 0:T.value)||0,{min:.15,max:.25}))}`,children:f.jsxs(Ye,{className:"bg-white border-gray-200",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(St,{className:"text-base font-semibold text-gray-900",children:"스트레스 지수"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Stress Index"})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-lg font-bold text-gray-900",children:((R=(E=r.measurementData.eegMetrics.stressIndex)==null?void 0:E.value)==null?void 0:R.toFixed(3))||"N/A"}),f.jsx(Gt,{variant:"outline",className:(((M=r.measurementData.eegMetrics.stressIndex)==null?void 0:M.value)||0)>=.15&&(((k=r.measurementData.eegMetrics.stressIndex)==null?void 0:k.value)||0)<=.25?"border-green-300 text-green-700 bg-green-50":(((O=r.measurementData.eegMetrics.stressIndex)==null?void 0:O.value)||0)>.25?"border-red-300 text-red-700 bg-red-50":"border-yellow-300 text-yellow-700 bg-yellow-50",children:(((Q=r.measurementData.eegMetrics.stressIndex)==null?void 0:Q.value)||0)>=.15&&(((H=r.measurementData.eegMetrics.stressIndex)==null?void 0:H.value)||0)<=.25?"정상":(((W=r.measurementData.eegMetrics.stressIndex)==null?void 0:W.value)||0)>.25?"높음":"낮음"})]})]})}),f.jsx(ct,{children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:((te=r.measurementData.eegMetrics.stressIndex)==null?void 0:te.value)||0,normalRange:{min:.15,max:.25},label:"스트레스 지수",unit:"",status:(((ee=r.measurementData.eegMetrics.stressIndex)==null?void 0:ee.value)||0)>=.15&&(((j=r.measurementData.eegMetrics.stressIndex)==null?void 0:j.value)||0)<=.25?"normal":(((G=r.measurementData.eegMetrics.stressIndex)==null?void 0:G.value)||0)>.25?"high":"low"})})}),f.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"베타파 기반 스트레스 수준을 나타내며, 정신적 긴장도와 스트레스 반응을 평가합니다."})]})]})})]})}),f.jsx("div",{className:`${A(d(((Y=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:Y.value)||0,{min:.18,max:.22}))}`,children:f.jsxs(Ye,{className:"bg-white border-gray-200",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(St,{className:"text-base font-semibold text-gray-900",children:"정신적 이완도"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Mental Relaxation"})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("div",{className:"text-lg font-bold text-gray-900",children:((de=(Z=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:Z.value)==null?void 0:de.toFixed(3))||"N/A"}),f.jsx(Gt,{variant:"outline",className:(((he=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:he.value)||0)>=.18&&(((fe=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:fe.value)||0)<=.22?"border-green-300 text-green-700 bg-green-50":(((q=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:q.value)||0)>.22?"border-red-300 text-red-700 bg-red-50":"border-yellow-300 text-yellow-700 bg-yellow-50",children:(((ge=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:ge.value)||0)>=.18&&(((me=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:me.value)||0)<=.22?"정상":(((we=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:we.value)||0)>.22?"높음":"낮음"})]})]})}),f.jsx(ct,{children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:((Me=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:Me.value)||0,normalRange:{min:.18,max:.22},label:"정신적 이완도",unit:"",status:(((z=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:z.value)||0)>=.18&&(((pe=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:pe.value)||0)<=.22?"normal":(((J=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:J.value)||0)>.22?"high":"low"})})}),f.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"알파파 기반 정신적 이완 능력을 나타내며, 스트레스 해소 능력을 평가합니다."})]})]})})]})})]})]})]})]}),((oe=e.detailedAnalysis)==null?void 0:oe.physicalHealth)&&f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(gA,{className:"w-5 h-5 text-red-600"}),"❤️ 심혈관 분석 결과"]})}),f.jsxs(ct,{className:"space-y-8",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"심혈관 분석 종합 해석"}),f.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-red-600 font-medium mb-1",children:"PPG 기반 심혈관 건강 점수"}),f.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[e.detailedAnalysis.physicalHealth.score,"점"]})]}),f.jsx("div",{children:f.jsx(Gt,{className:i(e.detailedAnalysis.physicalHealth.score),children:e.detailedAnalysis.physicalHealth.status})})]}),f.jsx(o,{score:e.detailedAnalysis.physicalHealth.score,label:"심혈관 건강 점수"}),f.jsxs("div",{className:"mt-4 prose prose-sm max-w-none prose-gray",children:[f.jsx("h4",{className:"text-base font-semibold text-gray-900 mb-2",children:"해석"}),u?f.jsxs("div",{className:"flex items-center gap-2 p-4 bg-gray-50 rounded-lg",children:[f.jsx(i0,{className:"w-4 h-4 animate-spin text-gray-500"}),f.jsx("span",{className:"text-sm text-gray-600",children:"심혈관 건강 종합 해석을 분석하고 있습니다..."})]}):c?f.jsx(xr,{content:c.comprehensiveInterpretation}):f.jsx(xr,{content:`❤️ **심혈관 기능 종합 분석**

심박수 ${p.heartRate.value}bpm과 HRV 지표들(RMSSD: ${p.rmssd.value}ms, SDNN: ${p.sdnn.value}ms)을 통해 현재 심혈관 건강 상태를 평가한 결과, 자율신경계 균형과 심혈관 적응성이 ${e.detailedAnalysis.physicalHealth.status} 수준으로 나타납니다. LF/HF 비율 ${p.lfHfRatio.value}은 교감/부교감 신경계 균형 상태를 반영하며, 전반적인 심혈관 건강 관리가 필요한 상황입니다.`})]})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"개별 지표 상세 분석"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx("div",{className:`${A(p.heartRate.status)}`,children:f.jsxs(Ye,{className:"bg-white border-gray-200",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(St,{className:"text-base font-semibold text-gray-900",children:"심박수"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Heart Rate"})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[p.heartRate.value,"bpm"]}),f.jsx(Gt,{variant:"outline",className:p.heartRate.status==="normal"?"border-green-300 text-green-700 bg-green-50":p.heartRate.status==="high"?"border-red-300 text-red-700 bg-red-50":"border-yellow-300 text-yellow-700 bg-yellow-50",children:p.heartRate.status==="normal"?"정상":p.heartRate.status==="high"?"빈맥":"서맥"})]})]})}),f.jsx(ct,{children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:parseFloat(p.heartRate.value),normalRange:p.heartRate.normalRange,label:"심박수",unit:"bpm",status:p.heartRate.status,customLabels:{low:"서맥",normal:"정상",high:"빈맥"}})})}),f.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"안정시 심박수로 심혈관 건강과 체력 수준을 나타내는 기본 지표입니다."})]})]})})]})}),f.jsx("div",{className:`${A(p.rmssd.status)}`,children:f.jsxs(Ye,{className:"bg-white border-gray-200",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(St,{className:"text-base font-semibold text-gray-900",children:"스트레스 회복력"}),f.jsx("p",{className:"text-sm text-gray-500",children:"RMSSD"})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[p.rmssd.value,"ms"]}),f.jsx(Gt,{variant:"outline",className:p.rmssd.status==="normal"?"border-green-300 text-green-700 bg-green-50":p.rmssd.status==="high"?"border-red-300 text-red-700 bg-red-50":"border-yellow-300 text-yellow-700 bg-yellow-50",children:p.rmssd.status==="normal"?"정상":p.rmssd.status==="high"?"높음":"낮음"})]})]})}),f.jsx(ct,{children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:parseFloat(p.rmssd.value),normalRange:p.rmssd.normalRange,label:"RMSSD",unit:"ms",status:p.rmssd.status})})}),f.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"부교감신경 활성도를 나타내며, 스트레스 회복 능력과 심혈관 건강을 평가합니다."})]})]})})]})})]})]})]})]})]})})})]})},_Qe=({report:r,analysisResult:e,isExpanded:t,onToggleExpanded:n,MentalHealthRiskChart:a})=>{var i,s,o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y,Z,de,he;return f.jsxs(Ye,{className:"bg-white border-gray-200 shadow-sm",children:[f.jsx(wt,{className:"cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-200",onClick:n,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:f.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),f.jsxs("div",{children:[f.jsx(St,{className:"text-lg text-gray-900",children:"정신 건강 위험도 분석"}),f.jsx(na,{className:"text-gray-600",children:"우울, ADHD, 번아웃, 충동성 위험도 평가"})]})]}),t?f.jsx(Ep,{className:"w-5 h-5 text-gray-500"}):f.jsx(Ph,{className:"w-5 h-5 text-gray-500"})]})}),t&&f.jsx(ct,{className:"p-6 bg-white",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs(Ye,{className:"border border-gray-200",children:[f.jsx(wt,{className:"bg-white border-b border-gray-200",children:f.jsx(St,{className:"flex items-center gap-2 text-gray-900",children:"종합 위험도 평가"})}),f.jsx(ct,{className:"p-4",children:f.jsx("div",{className:"space-y-4",children:(()=>{var we,Me,z,pe,J,oe,ae,ue,be,_e,ye,Ee;const fe={depression:((z=(Me=(we=e.detailedAnalysis)==null?void 0:we.mentalHealthRisk)==null?void 0:Me.depression)==null?void 0:z.riskScore)||25,adhd:((oe=(J=(pe=e.detailedAnalysis)==null?void 0:pe.mentalHealthRisk)==null?void 0:J.adhd)==null?void 0:oe.riskScore)||30,burnout:((be=(ue=(ae=e.detailedAnalysis)==null?void 0:ae.mentalHealthRisk)==null?void 0:ue.burnout)==null?void 0:be.riskScore)||35,impulsivity:((Ee=(ye=(_e=e.detailedAnalysis)==null?void 0:_e.mentalHealthRisk)==null?void 0:ye.impulsivity)==null?void 0:Ee.riskScore)||28},q=Math.max(...Object.values(fe)),ge=q<5?"위험":q<25?"경계":q<75?"보통":q<95?"양호":"우수",me=q<5?"text-red-600":q<25?"text-orange-600":q<75?"text-yellow-600":q<95?"text-green-600":"text-blue-600";return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:"전체 위험도 점수"}),f.jsxs("span",{className:`text-lg font-bold ${me}`,children:[q.toFixed(1),"/100"]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"w-full h-4 overflow-hidden bg-gradient-to-r from-red-500 via-orange-400 via-yellow-400 via-green-400 to-blue-500",children:[f.jsx("div",{className:"absolute top-0 left-[5%] w-px h-4 bg-white opacity-50"}),f.jsx("div",{className:"absolute top-0 left-[25%] w-px h-4 bg-white opacity-50"}),f.jsx("div",{className:"absolute top-0 left-[75%] w-px h-4 bg-white opacity-50"}),f.jsx("div",{className:"absolute top-0 left-[95%] w-px h-4 bg-white opacity-50"})]}),f.jsx("div",{className:"absolute top-0 w-1 h-4 bg-gray-900 transition-all duration-500 shadow-lg",style:{left:`${q}%`,transform:"translateX(-50%)"}}),f.jsx("div",{className:"absolute top-1/2 w-3 h-3 bg-white border-2 border-gray-900 transition-all duration-500 shadow-lg",style:{left:`${q}%`,transform:"translate(-50%, -50%)"}}),f.jsxs("div",{className:"absolute -top-12 bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap transition-all duration-500",style:{left:`${q}%`,transform:"translateX(-50%)"},children:[f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"font-bold",children:[q.toFixed(1),"점"]}),f.jsx("div",{className:"text-xs opacity-90",children:q<5?"위험":q<25?"경계":q<75?"보통":q<95?"양호":"우수"})]}),f.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-4 border-transparent border-t-gray-900"})]})]}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-600 px-1",children:[f.jsx("span",{className:"text-red-600 font-medium",children:"위험 (0-5)"}),f.jsx("span",{className:"text-orange-600 font-medium",children:"경계 (5-25)"}),f.jsx("span",{className:"text-yellow-600 font-medium",children:"보통 (25-75)"}),f.jsx("span",{className:"text-green-600 font-medium",children:"양호 (75-95)"}),f.jsx("span",{className:"text-blue-600 font-medium",children:"우수 (95-100)"})]})]}),f.jsxs("div",{className:`text-sm font-medium ${me}`,children:["위험 수준: ",ge]}),f.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[f.jsx("h5",{className:"font-medium text-purple-800 mb-2",children:"🧠 정신건강 전문가 권장사항"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-purple mb-3",children:f.jsx(xr,{content:"**종합 위험도 평가:** 현재 정신건강 상태는 다각적 모니터링이 필요한 수준입니다. 뇌파(EEG) 및 심혈관(PPG) 바이오마커를 종합하여 개인별 맞춤형 관리 방안을 제시합니다.",variant:"compact"})}),f.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[f.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[f.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"🔵 우울 예방 관리"}),f.jsx("div",{className:"prose prose-xs max-w-none prose-blue",children:f.jsx(xr,{content:"전두엽 알파 비대칭성과 세타파 활동 패턴을 통한 조기 감지 및 인지행동치료 기반 개입",variant:"compact"})})]}),f.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[f.jsx("div",{className:"font-medium text-green-800 mb-1",children:"🎯 집중력 향상 관리"}),f.jsx("div",{className:"prose prose-xs max-w-none prose-green",children:f.jsx(xr,{content:"주의집중 지수와 과활성 지수 최적화를 통한 실행기능 강화 및 자기조절능력 향상",variant:"compact"})})]}),f.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[f.jsx("div",{className:"font-medium text-orange-800 mb-1",children:"🔥 번아웃 예방 관리"}),f.jsx("div",{className:"prose prose-xs max-w-none prose-orange",children:f.jsx(xr,{content:"스트레스 호르몬 조절과 회복탄력성 강화를 통한 만성 피로 및 정서적 소진 예방",variant:"compact"})})]}),f.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[f.jsx("div",{className:"font-medium text-purple-800 mb-1",children:"⚡ 충동성 조절 관리"}),f.jsx("div",{className:"prose prose-xs max-w-none prose-purple",children:f.jsx(xr,{content:"전전두피질 활성화 훈련과 억제 조절 능력 향상을 통한 행동 조절력 강화",variant:"compact"})})]})]})]})]})})()})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[((s=(i=e.detailedAnalysis)==null?void 0:i.mentalHealthRisk)==null?void 0:s.depression)&&f.jsxs(Ye,{className:`${e.detailedAnalysis.mentalHealthRisk.depression.riskScore>50?"bg-red-50 border-red-200":e.detailedAnalysis.mentalHealthRisk.depression.riskScore>30?"bg-yellow-50 border-yellow-200":"bg-white border-gray-200"}`,children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{children:f.jsxs(St,{className:`flex items-center gap-2 ${e.detailedAnalysis.mentalHealthRisk.depression.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.depression.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:[f.jsx(Ba,{className:`w-5 h-5 ${e.detailedAnalysis.mentalHealthRisk.depression.riskScore>50?"text-red-600":e.detailedAnalysis.mentalHealthRisk.depression.riskScore>30?"text-yellow-600":"text-gray-600"}`}),"우울 위험도 분석"]})}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(e.detailedAnalysis.mentalHealthRisk.depression.riskScore),"/100"]}),f.jsx(Gt,{variant:"outline",className:e.detailedAnalysis.mentalHealthRisk.depression.riskScore<=30?"border-green-300 text-green-700 bg-green-50":e.detailedAnalysis.mentalHealthRisk.depression.riskScore<=50?"border-yellow-300 text-yellow-700 bg-yellow-50":"border-red-300 text-red-700 bg-red-50",children:e.detailedAnalysis.mentalHealthRisk.depression.status||(e.detailedAnalysis.mentalHealthRisk.depression.riskScore>50?"위험":e.detailedAnalysis.mentalHealthRisk.depression.riskScore>30?"경계":"정상")})]})]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:e.detailedAnalysis.mentalHealthRisk.depression.riskScore,label:"우울"})})}),f.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:f.jsx(xr,{content:e.detailedAnalysis.mentalHealthRisk.depression.analysis})})]}),f.jsxs("div",{className:`border-t pt-3 ${e.detailedAnalysis.mentalHealthRisk.depression.riskScore>50?"border-red-100":e.detailedAnalysis.mentalHealthRisk.depression.riskScore>30?"border-yellow-100":"border-gray-100"}`,children:[f.jsx("h4",{className:`text-sm font-medium mb-2 ${e.detailedAnalysis.mentalHealthRisk.depression.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.depression.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:"뇌파 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**전두엽 알파 비대칭:** ${((o=r.measurementData.eegMetrics.hemisphericBalance)==null?void 0:o.value)||-.04} - 좌우뇌 활성도 균형

**세타파 활동:** ${((l=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:l.value)||.2} - 정서 조절 능력

**우울 지수:** ${((c=r.measurementData.eegMetrics.stressIndex)==null?void 0:c.value)>3.5?"높음":"정상"} - 기분 상태 평가`})})]}),f.jsxs("div",{className:`border-t pt-3 ${e.detailedAnalysis.mentalHealthRisk.depression.riskScore>50?"border-red-100":e.detailedAnalysis.mentalHealthRisk.depression.riskScore>30?"border-yellow-100":"border-gray-100"}`,children:[f.jsx("h4",{className:`text-sm font-medium mb-2 ${e.detailedAnalysis.mentalHealthRisk.depression.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.depression.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:"PPG 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**심박변이도(HRV):** ${((u=r.measurementData.ppgMetrics.rmssd)==null?void 0:u.value)<50?"낮음":"정상"} - 자율신경 활성도

**회복탄력성:** ${((h=r.measurementData.ppgMetrics.rmssd)==null?void 0:h.value)||120} ms - 스트레스 회복 능력

**우울 관련 생리지표:** ${((d=r.measurementData.ppgMetrics.lfHfRatio)==null?void 0:d.value)>15?"위험":"정상"} - 자율신경 불균형`})})]})]})]}),((g=(A=e.detailedAnalysis)==null?void 0:A.mentalHealthRisk)==null?void 0:g.adhd)&&f.jsxs(Ye,{className:`${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>50?"bg-red-50 border-red-200":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>30?"bg-yellow-50 border-yellow-200":"bg-white border-gray-200"}`,children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{children:f.jsxs(St,{className:`flex items-center gap-2 ${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:[f.jsx(Ba,{className:`w-5 h-5 ${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>50?"text-red-600":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>30?"text-yellow-600":"text-gray-600"}`}),"ADHD 위험도 분석"]})}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(e.detailedAnalysis.mentalHealthRisk.adhd.riskScore),"/100"]}),f.jsx(Gt,{variant:"outline",className:e.detailedAnalysis.mentalHealthRisk.adhd.riskScore<=30?"border-green-300 text-green-700 bg-green-50":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore<=50?"border-yellow-300 text-yellow-700 bg-yellow-50":"border-red-300 text-red-700 bg-red-50",children:e.detailedAnalysis.mentalHealthRisk.adhd.status||(e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>50?"위험":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>30?"경계":"정상")})]})]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:e.detailedAnalysis.mentalHealthRisk.adhd.riskScore,label:"ADHD"})})}),f.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:f.jsx(xr,{content:e.detailedAnalysis.mentalHealthRisk.adhd.analysis})})]}),f.jsxs("div",{className:`border-t pt-3 ${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>50?"border-red-100":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>30?"border-yellow-100":"border-gray-100"}`,children:[f.jsx("h4",{className:`text-sm font-medium mb-2 ${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:"뇌파 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**주의집중 지수:** ${((p=r.measurementData.eegMetrics.focusIndex)==null?void 0:p.value)||1.8} - 집중 능력 평가

**과활성 지수:** ${((v=r.measurementData.eegMetrics.stressIndex)==null?void 0:v.value)>3?"높음":"정상"} - 충동성 및 과활성

**실행기능 평가:** ${((m=r.measurementData.eegMetrics.hemisphericBalance)==null?void 0:m.value)||-.04} - 인지적 조절 능력`})})]}),f.jsxs("div",{className:`border-t pt-3 ${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>50?"border-red-100":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>30?"border-yellow-100":"border-gray-100"}`,children:[f.jsx("h4",{className:`text-sm font-medium mb-2 ${e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.adhd.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:"PPG 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**자율신경 과활성:** ${((y=r.measurementData.ppgMetrics.lfHfRatio)==null?void 0:y.value)>10?"높음":"정상"} - 각성 상태 평가

**주의력 관련 HRV:** ${((x=r.measurementData.ppgMetrics.sdnn)==null?void 0:x.value)<50?"낮음":"정상"} - 주의집중 생리지표

**행동조절 능력:** ${((b=r.measurementData.ppgMetrics.rmssd)==null?void 0:b.value)||120} ms - 충동 억제 능력`})})]})]})]}),((_=(S=e.detailedAnalysis)==null?void 0:S.mentalHealthRisk)==null?void 0:_.burnout)&&f.jsxs(Ye,{className:`${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>50?"bg-red-50 border-red-200":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>30?"bg-yellow-50 border-yellow-200":"bg-white border-gray-200"}`,children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{children:f.jsxs(St,{className:`flex items-center gap-2 ${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:[f.jsx(Ba,{className:`w-5 h-5 ${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>50?"text-red-600":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>30?"text-yellow-600":"text-gray-600"}`}),"번아웃 위험도 분석"]})}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(e.detailedAnalysis.mentalHealthRisk.burnout.riskScore),"/100"]}),f.jsx(Gt,{variant:"outline",className:e.detailedAnalysis.mentalHealthRisk.burnout.riskScore<=30?"border-green-300 text-green-700 bg-green-50":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore<=50?"border-yellow-300 text-yellow-700 bg-yellow-50":"border-red-300 text-red-700 bg-red-50",children:e.detailedAnalysis.mentalHealthRisk.burnout.status||(e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>50?"위험":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>30?"경계":"정상")})]})]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:e.detailedAnalysis.mentalHealthRisk.burnout.riskScore,label:"번아웃"})})}),f.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:f.jsx(xr,{content:e.detailedAnalysis.mentalHealthRisk.burnout.analysis})})]}),f.jsxs("div",{className:`border-t pt-3 ${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>50?"border-red-100":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>30?"border-yellow-100":"border-gray-100"}`,children:[f.jsx("h4",{className:`text-sm font-medium mb-2 ${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:"뇌파 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**만성피로 지수:** ${((C=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:C.value)<.15?"높음":"정상"} - 정신적 소진 상태

**회복력 지수:** ${((w=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:w.value)||.2} - 스트레스 회복 능력

**정서적 소진도:** ${((B=r.measurementData.eegMetrics.stressIndex)==null?void 0:B.value)>4?"높음":"정상"} - 감정적 고갈 평가`})})]}),f.jsxs("div",{className:`border-t pt-3 ${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>50?"border-red-100":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>30?"border-yellow-100":"border-gray-100"}`,children:[f.jsx("h4",{className:`text-sm font-medium mb-2 ${e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.burnout.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:"PPG 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**자율신경 소진:** ${((D=r.measurementData.ppgMetrics.sdnn)==null?void 0:D.value)<40?"높음":"정상"} - 번아웃 관련 생리지표

**회복탄력성:** ${((T=r.measurementData.ppgMetrics.rmssd)==null?void 0:T.value)<80?"낮음":"정상"} - 만성 피로 대응 능력

**스트레스 호르몬:** ${((E=r.measurementData.ppgMetrics.lfHfRatio)==null?void 0:E.value)>12?"높음":"정상"} - 코르티솔 관련 지표`})})]})]})]}),((M=(R=e.detailedAnalysis)==null?void 0:R.mentalHealthRisk)==null?void 0:M.impulsivity)&&f.jsxs(Ye,{className:`${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>50?"bg-red-50 border-red-200":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>30?"bg-yellow-50 border-yellow-200":"bg-white border-gray-200"}`,children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{children:f.jsxs(St,{className:`flex items-center gap-2 ${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:[f.jsx(Ba,{className:`w-5 h-5 ${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>50?"text-red-600":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>30?"text-yellow-600":"text-gray-600"}`}),"충동성 위험도 분석"]})}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore),"/100"]}),f.jsx(Gt,{variant:"outline",className:e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore<=30?"border-green-300 text-green-700 bg-green-50":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore<=50?"border-yellow-300 text-yellow-700 bg-yellow-50":"border-red-300 text-red-700 bg-red-50",children:e.detailedAnalysis.mentalHealthRisk.impulsivity.status||(e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>50?"위험":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>30?"경계":"정상")})]})]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore,label:"충동성"})})}),f.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:f.jsx(xr,{content:e.detailedAnalysis.mentalHealthRisk.impulsivity.analysis})})]}),f.jsxs("div",{className:`border-t pt-3 ${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>50?"border-red-100":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>30?"border-yellow-100":"border-gray-100"}`,children:[f.jsx("h4",{className:`text-sm font-medium mb-2 ${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:"뇌파 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**전전두피질 활성도:** ${((k=r.measurementData.eegMetrics.focusIndex)==null?void 0:k.value)<1.8?"저하":"정상"} - 억제 조절 능력

**충동 억제 지수:** ${((O=r.measurementData.eegMetrics.hemisphericBalance)==null?void 0:O.value)||-.04} - 행동 조절 능력 평가

**감정 조절 능력:** ${((Q=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:Q.value)||.2} - 정서적 충동성 관리`})})]}),f.jsxs("div",{className:`border-t pt-3 ${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>50?"border-red-100":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>30?"border-yellow-100":"border-gray-100"}`,children:[f.jsx("h4",{className:`text-sm font-medium mb-2 ${e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>50?"text-red-900":e.detailedAnalysis.mentalHealthRisk.impulsivity.riskScore>30?"text-yellow-900":"text-gray-900"}`,children:"PPG 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**심박수 변동성:** ${((H=r.measurementData.ppgMetrics.heartRate)==null?void 0:H.value)>90?"높음":"정상"} - 각성 상태 평가

**교감신경 과활성:** ${((W=r.measurementData.ppgMetrics.lfHfRatio)==null?void 0:W.value)>12?"높음":"정상"} - 충동적 반응성

**자기조절 능력:** ${((te=r.measurementData.ppgMetrics.rmssd)==null?void 0:te.value)>150?"우수":"보통"} - 행동 조절력 평가`})})]})]})]}),((ee=e.detailedAnalysis)==null?void 0:ee.mentalHealthRisk)&&f.jsxs(Ye,{className:"bg-yellow-50 border-yellow-200",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{children:f.jsxs(St,{className:"flex items-center gap-2 text-yellow-900",children:[f.jsx(mh,{className:"w-5 h-5 text-yellow-600"}),"스트레스 위험도 분석"]})}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(25),"/100"]}),f.jsx(Gt,{variant:"outline",className:"border-yellow-300 text-yellow-700 bg-yellow-50",children:"경계"})]})]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"w-96 h-96",children:f.jsx(a,{value:25,label:"스트레스"})})}),f.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[f.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"의학적 해석"}),f.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:f.jsx(xr,{content:"뇌파 스트레스 지수와 자율신경 균형 상태를 종합적으로 분석하여 스트레스 관련 위험도를 평가합니다. 베타파와 감마파의 비율, HRV 지표를 통해 정신적 긴장도와 회복력을 측정합니다."})})]}),f.jsxs("div",{className:"border-t pt-3 border-yellow-100",children:[f.jsx("h4",{className:"text-sm font-medium mb-2 text-yellow-900",children:"뇌파 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**스트레스 지수:** ${((j=r.measurementData.eegMetrics.stressIndex)==null?void 0:j.value)||3.2} - 만성 스트레스 상태 평가

**피로도 지수:** ${((G=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:G.value)<.18?"높음":"정상"} - 정신적 피로 상태

**회복력 지수:** ${((Y=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:Y.value)||.2} - 스트레스 회복 능력 평가`})})]}),f.jsxs("div",{className:"border-t pt-3 border-yellow-100",children:[f.jsx("h4",{className:"text-sm font-medium mb-2 text-yellow-900",children:"PPG 기반 바이오마커 평가"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**자율신경 균형:** ${((Z=r.measurementData.ppgMetrics.lfHfRatio)==null?void 0:Z.value)>10?"높음":"정상"} - 스트레스 호르몬 활성도

**회복탄력성:** ${((de=r.measurementData.ppgMetrics.rmssd)==null?void 0:de.value)>100?"우수":"보통"} - 만성 피로 대응 능력

**자율신경 소진도:** ${((he=r.measurementData.ppgMetrics.sdnn)==null?void 0:he.value)<50?"높음":"정상"} - 번아웃 관련 생리적 지표`})})]})]})]})]})]})})]})},CQe=({report:r,analysisResult:e,isExpanded:t,onToggleExpanded:n})=>{var a,i,s,o,l,c,u,h,d,A,g,p,v,m,y,x,b,S,_,C,w,B,D,T,E,R,M,k,O,Q,H,W,te,ee,j,G,Y,Z,de,he,fe,q,ge,me,we,Me,z,pe,J,oe,ae,ue,be,_e,ye,Ee,ze,Fe,Ge,at,ut,gt,Le,Qe,ht,it,Vt,kt,Bt,Sr,zt,qe,pt,Nt,Kt,Yt;return f.jsxs(Ye,{className:"bg-white border-gray-200 shadow-sm",children:[f.jsx(wt,{className:"cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-200",onClick:n,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:f.jsx("span",{className:"text-red-600 font-semibold text-sm",children:"4"})}),f.jsxs("div",{children:[f.jsx(St,{className:"text-lg text-gray-900",children:"의학적 위험도 분석"}),f.jsx(na,{className:"text-gray-600",children:"생체신호 통합 분석 및 병리학적 위험 평가"})]})]}),t?f.jsx(Ep,{className:"w-5 h-5 text-gray-500"}):f.jsx(Ph,{className:"w-5 h-5 text-gray-500"})]})}),t&&f.jsx(ct,{className:"p-6 bg-white",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(ho,{className:"w-5 h-5 text-green-600"}),"생체신호 통합 분석"]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-blue-600 mb-2",children:"🧠 뇌파(EEG) 의학적 해석"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**알파파 활성도:** ${((o=(s=(i=(a=e.detailedAnalysis)==null?void 0:a.medicalRiskAnalysis)==null?void 0:i.biosignalIntegration)==null?void 0:s.eegMedicalInterpretation)==null?void 0:o.alphaActivity)||"정상 범위"}

**베타파 패턴:** ${((h=(u=(c=(l=e.detailedAnalysis)==null?void 0:l.medicalRiskAnalysis)==null?void 0:c.biosignalIntegration)==null?void 0:u.eegMedicalInterpretation)==null?void 0:h.betaPattern)||"안정적"}

**감마파 동조:** ${((p=(g=(A=(d=e.detailedAnalysis)==null?void 0:d.medicalRiskAnalysis)==null?void 0:A.biosignalIntegration)==null?void 0:g.eegMedicalInterpretation)==null?void 0:p.gammaSync)||"양호"}

**의학적 소견:** ${((x=(y=(m=(v=e.detailedAnalysis)==null?void 0:v.medicalRiskAnalysis)==null?void 0:m.biosignalIntegration)==null?void 0:y.eegMedicalInterpretation)==null?void 0:x.medicalFindings)||"전반적인 뇌 활성도가 정상 범위 내에 있으며, 인지 기능 및 정서 조절 능력이 양호한 상태로 평가됩니다."}`,variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-red-600 mb-2",children:"❤️ 심혈관(PPG) 의학적 해석"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**심박변이도(HRV):** ${((C=(_=(S=(b=e.detailedAnalysis)==null?void 0:b.medicalRiskAnalysis)==null?void 0:S.biosignalIntegration)==null?void 0:_.ppgMedicalInterpretation)==null?void 0:C.hrv)||"정상"}

**혈관 탄성도:** ${((T=(D=(B=(w=e.detailedAnalysis)==null?void 0:w.medicalRiskAnalysis)==null?void 0:B.biosignalIntegration)==null?void 0:D.ppgMedicalInterpretation)==null?void 0:T.vascularElasticity)||"양호"}

**자율신경 균형:** ${((k=(M=(R=(E=e.detailedAnalysis)==null?void 0:E.medicalRiskAnalysis)==null?void 0:R.biosignalIntegration)==null?void 0:M.ppgMedicalInterpretation)==null?void 0:k.autonomicBalance)||"균형적"}

**의학적 소견:** ${((W=(H=(Q=(O=e.detailedAnalysis)==null?void 0:O.medicalRiskAnalysis)==null?void 0:Q.biosignalIntegration)==null?void 0:H.ppgMedicalInterpretation)==null?void 0:W.medicalFindings)||"심혈관계 기능이 정상 범위에 있으며, 스트레스 반응성과 회복력이 적절한 수준으로 평가됩니다."}`,variant:"compact"})})]})]})]}),f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(a0,{className:"w-5 h-5 text-orange-600"}),"병리학적 위험 요소 평가"]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-purple-600 mb-2",children:"🧠 신경학적 위험도"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**위험 점수:** ${((G=(j=(ee=(te=e.detailedAnalysis)==null?void 0:te.medicalRiskAnalysis)==null?void 0:ee.pathologicalRiskFactors)==null?void 0:j.neurologicalRisk)==null?void 0:G.riskScore)||0}/100

**설명:** ${((he=(de=(Z=(Y=e.detailedAnalysis)==null?void 0:Y.medicalRiskAnalysis)==null?void 0:Z.pathologicalRiskFactors)==null?void 0:de.neurologicalRisk)==null?void 0:he.description)||"우울, 집중력 장애 등 신경정신학적 질환 발생 위험도"}`,variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-red-600 mb-2",children:"💔 심혈관 위험도"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**위험 점수:** ${((me=(ge=(q=(fe=e.detailedAnalysis)==null?void 0:fe.medicalRiskAnalysis)==null?void 0:q.pathologicalRiskFactors)==null?void 0:ge.cardiovascularRisk)==null?void 0:me.riskScore)||0}/100

**설명:** ${((pe=(z=(Me=(we=e.detailedAnalysis)==null?void 0:we.medicalRiskAnalysis)==null?void 0:Me.pathologicalRiskFactors)==null?void 0:z.cardiovascularRisk)==null?void 0:pe.description)||"고혈압, 부정맥 등 심혈관계 질환 발생 위험도"}`,variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-orange-600 mb-2",children:"🔥 대사 증후군 위험도"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`**위험 점수:** ${((ue=(ae=(oe=(J=e.detailedAnalysis)==null?void 0:J.medicalRiskAnalysis)==null?void 0:oe.pathologicalRiskFactors)==null?void 0:ae.metabolicSyndromeRisk)==null?void 0:ue.riskScore)||0}/100

**설명:** ${((Ee=(ye=(_e=(be=e.detailedAnalysis)==null?void 0:be.medicalRiskAnalysis)==null?void 0:_e.pathologicalRiskFactors)==null?void 0:ye.metabolicSyndromeRisk)==null?void 0:Ee.description)||"당뇨병, 비만 등 대사성 질환 발생 위험도"}`,variant:"compact"})})]})]})]})]}),f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(Us,{className:"w-5 h-5 text-blue-600"}),"임상적 권고사항"]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-green-600 mb-2",children:"✅ 예방 의학적 접근"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:`• **정기 검진:** ${((at=(Ge=(Fe=(ze=e.detailedAnalysis)==null?void 0:ze.medicalRiskAnalysis)==null?void 0:Fe.clinicalRecommendations)==null?void 0:Ge.preventiveMedicine)==null?void 0:at.regularCheckups)||"3-6개월 간격으로 정신건강 상태 모니터링 권장"}

• **생활습관 교정:** ${((Qe=(Le=(gt=(ut=e.detailedAnalysis)==null?void 0:ut.medicalRiskAnalysis)==null?void 0:gt.clinicalRecommendations)==null?void 0:Le.preventiveMedicine)==null?void 0:Qe.lifestyleModifications)||"규칙적인 운동, 충분한 수면, 균형잡힌 영양 섭취"}

• **스트레스 관리:** ${((kt=(Vt=(it=(ht=e.detailedAnalysis)==null?void 0:ht.medicalRiskAnalysis)==null?void 0:it.clinicalRecommendations)==null?void 0:Vt.preventiveMedicine)==null?void 0:kt.stressManagement)||"명상, 요가, 심호흡 등 이완 기법 실천"}`,variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-blue-600 mb-2",children:"🏥 의료진 상담 권장 사항"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:((pt=(qe=(zt=(Sr=(Bt=e.detailedAnalysis)==null?void 0:Bt.medicalRiskAnalysis)==null?void 0:Sr.clinicalRecommendations)==null?void 0:zt.medicalConsultation)==null?void 0:qe.recommendations)==null?void 0:pt.map(Je=>`• ${Je}`).join(`

`))||"위험도에 따른 차등 권고",variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-purple-600 mb-2",children:"🔬 과학적 근거"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:((Yt=(Kt=(Nt=e.detailedAnalysis)==null?void 0:Nt.medicalRiskAnalysis)==null?void 0:Kt.clinicalRecommendations)==null?void 0:Yt.scientificEvidence)||"본 분석은 국제 정신의학회(IPA) 가이드라인과 DSM-5 진단 기준을 참조하여 뇌파-심혈관 바이오마커의 임상적 유효성을 검증한 최신 연구 결과를 바탕으로 합니다. (참고: Nature Medicine 2024, Lancet Psychiatry 2024)",variant:"compact"})})]})]})]})]})})]})},BQe=({report:r,analysisResult:e,isExpanded:t,onToggleExpanded:n})=>f.jsxs(Ye,{className:"bg-white border-gray-200 shadow-sm",children:[f.jsx(wt,{className:"cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-200",onClick:n,children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:f.jsx("span",{className:"text-yellow-600 font-semibold text-sm",children:"5"})}),f.jsxs("div",{children:[f.jsx(St,{className:"text-lg text-gray-900",children:"맞춤형 추천사항"}),f.jsx(na,{className:"text-gray-600",children:"개인 맞춤형 건강 관리 가이드"})]})]}),t?f.jsx(Ep,{className:"w-5 h-5 text-gray-500"}):f.jsx(Ph,{className:"w-5 h-5 text-gray-500"})]})}),t&&f.jsx(ct,{className:"p-6 bg-white",children:e.personalizedRecommendations?f.jsxs("div",{className:"space-y-6",children:[f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(Hs,{className:"w-5 h-5 text-green-600"}),"즉시 실행 가능한 조치"]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-blue-600 mb-2",children:"생활습관"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.personalizedRecommendations.immediate.lifestyle.join(`

`),variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-green-600 mb-2",children:"운동"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.personalizedRecommendations.immediate.exercise.join(`

`),variant:"compact"})})]})]})]}),f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(c0,{className:"w-5 h-5 text-orange-600"}),"단기 목표 (1-4주)"]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-blue-600 mb-2",children:"생활습관"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.personalizedRecommendations.shortTerm.lifestyle.join(`

`),variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-orange-600 mb-2",children:"스트레스 관리"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.personalizedRecommendations.shortTerm.stressManagement.join(`

`),variant:"compact"})})]})]})]}),f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx($l,{className:"w-5 h-5 text-purple-600"}),"장기 목표 (1-3개월)"]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-purple-600 mb-2",children:"정신건강 관리"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.personalizedRecommendations.longTerm.mentalCare.join(`

`),variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-pink-600 mb-2",children:"사회적 지원"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.personalizedRecommendations.longTerm.socialSupport.join(`

`),variant:"compact"})})]})]})]}),f.jsxs(Ye,{className:"bg-gray-50 border-gray-200",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2 text-gray-900",children:[f.jsx(Xue,{className:"w-5 h-5 text-teal-600"}),"직업별 특화 추천"]})}),f.jsxs(ct,{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-indigo-600 mb-2",children:"직장 전략"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.personalizedRecommendations.occupationSpecific.workplaceStrategies.join(`

`),variant:"compact"})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-teal-600 mb-2",children:"시간 관리"}),f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:e.personalizedRecommendations.occupationSpecific.timeManagement.join(`

`),variant:"compact"})})]})]})]})]}):f.jsx("div",{className:"prose prose-sm max-w-none prose-gray",children:f.jsx(xr,{content:"추천사항이 없습니다.",variant:"compact"})})})]}),a6=({report:r,onBack:e,className:t="",isCurrentAnalysis:n=!1,showSaveButton:a=!1,showShareButton:i=!1,onSave:s,onShare:o,showEEGButton:l=!1,showPPGButton:c=!1,onViewEEGAnalysis:u,onViewPPGAnalysis:h,isSaving:d=!1,saveSuccess:A=!1})=>{var de,he,fe;const[g,p]=K.useState(!1),[v,m]=K.useState({overview:!0,analysis:!1,recommendations:!1,mentalHealthRisk:!1,medicalRiskAnalysis:!1}),[y,x]=K.useState(null),[b,S]=K.useState(!1),[_,C]=K.useState(null),[w,B]=K.useState(!1),[D,T]=K.useState(null),[E,R]=K.useState(!1),{personalInfo:M,analysisResult:k}=r;K.useEffect(()=>{if(!n){console.log("📋 저장된 리포트 - 뇌파 AI 분석 건너뜀");return}(async()=>{var ge;if((ge=k==null?void 0:k.detailedAnalysis)!=null&&ge.mentalHealth)try{S(!0);const me={score:k.detailedAnalysis.mentalHealth.score,status:k.detailedAnalysis.mentalHealth.status,analysis:k.detailedAnalysis.mentalHealth.analysis,keyMetrics:k.detailedAnalysis.mentalHealth.keyMetrics,recommendations:k.detailedAnalysis.mentalHealth.recommendations||[],concerns:[]},we=await qu.generateMentalHealthComprehensiveInterpretation(M,r.measurementData,me);x(we)}catch(me){console.error("뇌파 분석 종합 해석 로드 실패:",me),yn.error("뇌파 분석 종합 해석을 불러오는데 실패했습니다.")}finally{S(!1)}})()},[M,r.measurementData,(de=k==null?void 0:k.detailedAnalysis)==null?void 0:de.mentalHealth,n]),K.useEffect(()=>{if(!n){console.log("📋 저장된 리포트 - 맥파 AI 분석 건너뜀");return}(async()=>{var ge;if((ge=k==null?void 0:k.detailedAnalysis)!=null&&ge.physicalHealth)try{B(!0);const me={score:k.detailedAnalysis.physicalHealth.score,status:k.detailedAnalysis.physicalHealth.status,analysis:k.detailedAnalysis.physicalHealth.analysis,keyMetrics:k.detailedAnalysis.physicalHealth.keyMetrics,recommendations:k.detailedAnalysis.physicalHealth.recommendations||[],concerns:[]},we=await qu.generatePhysicalHealthComprehensiveInterpretation(M,r.measurementData,me);C(we)}catch(me){console.error("맥파 분석 종합 해석 로드 실패:",me),yn.error("맥파 분석 종합 해석을 불러오는데 실패했습니다.")}finally{B(!1)}})()},[M,r.measurementData,(he=k==null?void 0:k.detailedAnalysis)==null?void 0:he.physicalHealth,n]),K.useEffect(()=>{if(!n){console.log("📋 저장된 리포트 - 스트레스 AI 분석 건너뜀");return}(async()=>{var ge,me,we,Me,z,pe;if((ge=k==null?void 0:k.detailedAnalysis)!=null&&ge.stressLevel)try{R(!0);const J={score:k.detailedAnalysis.stressLevel.score,level:k.detailedAnalysis.stressLevel.level,eegStressIndex:((me=r.measurementData.eegMetrics.stressIndex)==null?void 0:me.value)||0,heartRate:((we=r.measurementData.ppgMetrics.heartRate)==null?void 0:we.value)||0,rmssd:((Me=r.measurementData.ppgMetrics.rmssd)==null?void 0:Me.value)||0,lfHfRatio:((z=r.measurementData.ppgMetrics.lfHfRatio)==null?void 0:z.value)||0,relaxationIndex:((pe=r.measurementData.eegMetrics.relaxationIndex)==null?void 0:pe.value)||0},oe={comprehensiveInterpretation:`**${M.name}님의 스트레스 상태 종합 분석**

측정 결과 전반적인 스트레스 관리 점수는 ${J.score}점으로 ${J.level} 상태를 보이고 있습니다.

**주요 스트레스 지표 분석:**

• **뇌파 스트레스 지수**: ${J.eegStressIndex.toFixed(2)} - ${J.eegStressIndex>=3&&J.eegStressIndex<=4?"정상 범위 내의 적절한 정신적 긴장 상태":J.eegStressIndex>4?"높은 정신적 스트레스 상태로 주의 필요":"낮은 정신적 활성도로 각성 상태 개선 필요"}

• **자율신경 균형**: LF/HF 비율 ${J.lfHfRatio.toFixed(2)} - ${J.lfHfRatio>=1&&J.lfHfRatio<=10?"교감신경과 부교감신경의 균형이 적절히 유지됨":"자율신경 불균형 상태로 스트레스 관리 필요"}

• **스트레스 회복력**: RMSSD ${J.rmssd.toFixed(0)}ms - ${J.rmssd>=20&&J.rmssd<=50?"양호한 스트레스 회복 능력":J.rmssd>50?"우수한 스트레스 회복 능력":"스트레스 회복 능력 개선 필요"}

• **심박수 반응**: ${J.heartRate.toFixed(0)}BPM - ${J.heartRate>=60&&J.heartRate<=100?"정상 범위의 안정적인 심박수":J.heartRate>100?"높은 심박수로 스트레스 반응 증가":"낮은 심박수"}

**개인 특성 고려사항:**

${M.age}세 ${M.gender==="male"?"남성":"여성"}의 경우, 해당 연령대의 일반적인 스트레스 패턴과 비교하여 ${J.score>=70?"양호한 스트레스 관리 상태":"개선이 필요한 스트레스 관리 상태"}를 보이고 있습니다.

**종합 권장사항:**

현재 스트레스 상태를 고려할 때, ${J.score>=80?"현재의 스트레스 관리 방식을 유지하되 예방적 관리에 집중":J.score>=60?"일부 스트레스 지표 개선을 위한 맞춤형 관리 방안 적용":"종합적인 스트레스 관리 전략 수립 및 전문적 도움 고려"}하는 것이 권장됩니다.`,ageSpecificAnalysis:{ageGroup:`${M.age}세`,typicalCharacteristics:`${M.age}세 연령대는 ${M.gender==="male"?"직업적 책임과 사회적 역할 증가로 인한 스트레스 관리가 중요한":"다양한 생활 변화와 호르몬 변화로 인한 스트레스 적응이 필요한"} 시기입니다.`,currentComparison:`현재 스트레스 수준은 해당 연령대 평균 대비 ${J.score>=70?"양호한":"개선이 필요한"} 상태입니다.`,riskFactors:J.score<60?["만성 스트레스 축적","자율신경 불균형","수면 질 저하"]:["일시적 스트레스 증가"],strengths:J.score>=70?["적절한 스트레스 대응 능력","안정적인 자율신경 기능"]:["개선 가능성 높음"]},genderSpecificAnalysis:{gender:M.gender==="male"?"남성":"여성",stressPatternCharacteristics:M.gender==="male"?"남성은 일반적으로 문제 해결 중심의 스트레스 대응 패턴을 보입니다.":"여성은 일반적으로 감정적 지지와 사회적 연결을 통한 스트레스 관리 패턴을 보입니다.",hormonalInfluence:M.gender==="male"?"테스토스테론 수준이 스트레스 반응에 영향을 미칩니다.":"에스트로겐과 프로게스테론 변화가 스트레스 민감도에 영향을 미칩니다.",stressManagementPatterns:M.gender==="male"?"신체 활동과 목표 지향적 활동을 통한 스트레스 해소가 효과적입니다.":"사회적 지지와 감정 표현을 통한 스트레스 관리가 중요합니다.",managementPoints:M.gender==="male"?["규칙적인 운동","명확한 목표 설정","취미 활동"]:["사회적 연결","감정 표현","자기 돌봄"]},occupationalAnalysis:{occupation:M.occupation,workRequirements:`${M.occupation} 직군의 특성상 다양한 업무 스트레스 요인에 노출되어 있습니다.`,stressFactors:M.occupation==="developer"?["장시간 컴퓨터 작업","업무 압박","기술 변화 적응"]:M.occupation==="manager"?["의사결정 부담","팀 관리","성과 압박"]:["업무 압박","대인관계","환경 변화"],stressManagementMatch:`현재 스트레스 수준은 업무 수행에 ${J.score>=70?"적합한":"개선이 필요한"} 상태입니다.`,workplaceRisks:J.score<60?["업무 효율성 저하","의사결정 능력 감소","대인관계 문제"]:["일시적 스트레스 증가"],adaptationStrategies:["업무 우선순위 설정","휴식 시간 확보","스트레스 관리 기법 활용"]}};T(oe)}catch(J){console.error("스트레스 분석 종합 해석 로드 실패:",J),yn.error("스트레스 분석 종합 해석을 불러오는데 실패했습니다.")}finally{R(!1)}})()},[M,r.measurementData,(fe=k==null?void 0:k.detailedAnalysis)==null?void 0:fe.stressLevel,n]);const O=async()=>{try{p(!0);const ge=await xB.getInstance().generatePDFFromStoredReport(r),me=URL.createObjectURL(ge),we=document.createElement("a");we.href=me,we.download=`AI건강리포트_${r.personalInfo.name}_${new Date(r.timestamp).toLocaleDateString("ko-KR").replace(/\./g,"")}.pdf`,document.body.appendChild(we),we.click(),document.body.removeChild(we),URL.revokeObjectURL(me),yn.success("PDF가 다운로드되었습니다.")}catch(q){console.error("PDF 다운로드 실패:",q),yn.error("PDF 다운로드에 실패했습니다.")}finally{p(!1)}},Q=q=>new Date(q).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),H=q=>q>=80?"bg-green-100 text-green-700 border-green-300":q>=60?"bg-blue-100 text-blue-700 border-blue-300":q>=40?"bg-orange-100 text-orange-700 border-orange-300":"bg-red-100 text-red-700 border-red-300",W=q=>({teacher:"교사",military_medic:"의무병사",military_career:"직업군인",elementary:"초등학생",middle_school:"중학생",high_school:"고등학생",university:"대학생",housewife:"전업주부",parent:"학부모",firefighter:"소방공무원",police:"경찰공무원",developer:"개발자",designer:"디자이너",office_worker:"일반 사무직",manager:"관리자",general_worker:"일반 직장인",entrepreneur:"사업가",other:"그외"})[q]||q,te=({score:q,label:ge,className:me=""})=>{const we=pe=>pe<5?{level:"위험",color:"text-red-600"}:pe<25?{level:"경계",color:"text-orange-600"}:pe<75?{level:"보통",color:"text-yellow-600"}:pe<95?{level:"양호",color:"text-green-600"}:{level:"우수",color:"text-blue-600"},{level:Me,color:z}=we(q);return f.jsxs("div",{className:`space-y-3 ${me}`,children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-base font-semibold text-gray-700",children:ge}),f.jsxs("span",{className:`text-xl font-bold ${z}`,children:[q.toFixed(1),"/100"]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"w-full h-4 rounded-lg overflow-hidden bg-gradient-to-r from-red-500 via-orange-400 via-yellow-400 via-green-400 to-blue-500",children:[f.jsx("div",{className:"absolute top-0 left-[5%] w-px h-4 bg-white opacity-70"}),f.jsx("div",{className:"absolute top-0 left-[25%] w-px h-4 bg-white opacity-70"}),f.jsx("div",{className:"absolute top-0 left-[75%] w-px h-4 bg-white opacity-70"}),f.jsx("div",{className:"absolute top-0 left-[95%] w-px h-4 bg-white opacity-70"})]}),f.jsx("div",{className:"absolute top-0 w-0.5 h-4 bg-gray-900 rounded-sm transition-all duration-500",style:{left:`${q}%`,transform:"translateX(-50%)"}}),f.jsx("div",{className:"absolute top-1/2 w-3 h-3 bg-white border-2 border-gray-900 rounded-full transition-all duration-500",style:{left:`${q}%`,transform:"translate(-50%, -50%)"}}),f.jsxs("div",{className:"absolute -top-12 bg-gray-800 text-white px-2 py-1 rounded text-xs font-semibold transition-all duration-500 whitespace-nowrap text-center",style:{left:`${q}%`,transform:"translateX(-50%)"},children:[f.jsxs("div",{children:[q.toFixed(1),"점"]}),f.jsx("div",{children:Me}),f.jsx("div",{className:"absolute top-full left-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-gray-800",style:{transform:"translateX(-50%)"}})]})]}),f.jsxs("div",{className:"flex justify-between text-sm text-gray-500 font-medium",children:[f.jsx("span",{children:"위험"}),f.jsx("span",{children:"경계"}),f.jsx("span",{children:"보통"}),f.jsx("span",{children:"양호"}),f.jsx("span",{children:"우수"})]})]}),f.jsxs("div",{className:`text-base font-semibold ${z}`,children:["상태: ",Me]})]})},ee=({value:q,label:ge})=>{const ae=Math.min(200,Math.max(0,q/100*200)),ue=(Le,Qe,ht,it)=>{const Vt=(it-90)*Math.PI/180;return{x:Le+ht*Math.cos(Vt),y:Qe+ht*Math.sin(Vt)}},be=(Le,Qe,ht,it,Vt)=>{const kt=ue(Le,Qe,ht,Vt),Bt=ue(Le,Qe,ht,it),Sr=Vt-it<=180?"0":"1";return["M",kt.x,kt.y,"A",ht,ht,0,Sr,0,Bt.x,Bt.y].join(" ")},_e=50,ye=50,Ee=40,ze=be(_e,ye,Ee,260,321),Fe=be(_e,ye,Ee,319,361),Ge=be(_e,ye,Ee,359,460),at=260+ae,ut=ue(_e,ye,Ee,at),gt=ue(_e,ye,Ee-12,at);return f.jsxs("div",{className:"relative w-56 h-56 mx-auto",children:[f.jsxs("svg",{className:"w-56 h-56",viewBox:"0 0 100 100",children:[f.jsx("path",{d:be(_e,ye,Ee,260,460),stroke:"#f3f4f6",strokeWidth:"12",fill:"none",strokeLinecap:"round"}),f.jsx("path",{d:ze,stroke:"#10b981",strokeWidth:"12",fill:"none",strokeLinecap:"round"}),f.jsx("path",{d:Ge,stroke:"#ef4444",strokeWidth:"12",fill:"none",strokeLinecap:"round"}),f.jsx("path",{d:Fe,stroke:"#eab308",strokeWidth:"12",fill:"none",strokeLinecap:"butt"}),f.jsxs("g",{children:[f.jsx("line",{x1:gt.x,y1:gt.y,x2:ut.x,y2:ut.y,stroke:"#1f2937",strokeWidth:"4",strokeLinecap:"round"}),f.jsx("circle",{cx:ut.x,cy:ut.y,r:"4",fill:"#1f2937"})]})]}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsxs("div",{className:"text-center mt-1",children:[f.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:q.toFixed(0)}),f.jsx("div",{className:"mt-2",children:f.jsx(Gt,{variant:"outline",className:q<=30?"bg-green-100 text-green-800 border-green-200":q<=50?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-red-100 text-red-800 border-red-200",children:q<=30?"정상":q<=50?"경계":"위험"})})]})}),f.jsxs("div",{className:"absolute bottom-10 left-0 right-0 flex justify-between text-sm text-gray-500 px-4",children:[f.jsx("span",{children:"정상"}),f.jsx("span",{children:"경계"}),f.jsx("span",{children:"위험"})]})]})},j=({value:q,normalRange:ge,label:me,unit:we="",status:Me,customLabels:z})=>{const pe=ge.max-ge.min,J=ge.min-pe*.5,oe=ge.max+pe*.5,ae=200,ue=260,be=(ge.min-J)/(oe-J)*ae,_e=(ge.max-ge.min)/(oe-J)*ae;(oe-ge.max)/(oe-J)*ae;const ye=Math.min(ae,Math.max(0,(q-J)/(oe-J)*ae)),Ee=(Vt,kt,Bt,Sr)=>{const zt=(Sr-90)*Math.PI/180;return{x:Vt+Bt*Math.cos(zt),y:kt+Bt*Math.sin(zt)}},ze=(Vt,kt,Bt,Sr,zt)=>{const qe=Ee(Vt,kt,Bt,zt),pt=Ee(Vt,kt,Bt,Sr),Nt=zt-Sr<=180?"0":"1";return["M",qe.x,qe.y,"A",Bt,Bt,0,Nt,0,pt.x,pt.y].join(" ")},Fe=50,Ge=50,at=40,ut=ze(Fe,Ge,at,ue,ue+be+1),gt=ze(Fe,Ge,at,ue+be-1,ue+be+_e+1),Le=ze(Fe,Ge,at,ue+be+_e-1,ue+ae),Qe=ue+ye,ht=Ee(Fe,Ge,at,Qe),it=Ee(Fe,Ge,at-12,Qe);return f.jsxs("div",{className:"relative w-full mx-auto",children:[f.jsxs("div",{className:"relative",children:[f.jsxs("svg",{className:"w-full",viewBox:"0 0 100 65",style:{height:"auto",aspectRatio:"100/65"},children:[f.jsx("path",{d:ze(Fe,Ge,at,ue,ue+ae),stroke:"#f3f4f6",strokeWidth:"12",fill:"none",strokeLinecap:"round"}),f.jsx("path",{d:ut,stroke:"#eab308",strokeWidth:"12",fill:"none",strokeLinecap:"round"}),f.jsx("path",{d:Le,stroke:"#ef4444",strokeWidth:"12",fill:"none",strokeLinecap:"round"}),f.jsx("path",{d:gt,stroke:"#10b981",strokeWidth:"12",fill:"none",strokeLinecap:"butt"}),f.jsxs("g",{children:[f.jsx("line",{x1:it.x,y1:it.y,x2:ht.x,y2:ht.y,stroke:"#1f2937",strokeWidth:"4",strokeLinecap:"round"}),f.jsx("circle",{cx:ht.x,cy:ht.y,r:"4",fill:"#1f2937"})]})]}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsxs("div",{className:"text-center mt-32",children:[f.jsxs("div",{className:"text-4xl font-bold text-gray-900 mb-1",children:[q.toFixed(q<10?2:1),we&&` ${we}`]}),f.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["정상 : ",ge.min.toFixed(ge.min<1?3:ge.min<10?2:1),we&&` ${we}`," ~ ",ge.max.toFixed(ge.max<1?3:ge.max<10?2:1),we&&` ${we}`]}),f.jsx("div",{className:"mt-2",children:f.jsx(Gt,{variant:"outline",className:Me==="normal"?"bg-green-100 text-green-800 border-green-200":Me==="high"?"bg-red-100 text-red-800 border-red-200":"bg-yellow-100 text-yellow-800 border-yellow-200",children:Me==="normal"?"정상":Me==="high"?"높음":"낮음"})})]})})]}),f.jsxs("div",{className:"flex justify-between text-sm text-gray-500 px-4 -mt-1",children:[f.jsx("span",{children:(z==null?void 0:z.low)||"미만"}),f.jsx("span",{children:(z==null?void 0:z.normal)||"정상"}),f.jsx("span",{children:(z==null?void 0:z.high)||"초과"})]})]})},G=(q,ge)=>q<ge.min?"low":q>ge.max?"high":"normal",Y=q=>{switch(q){case"normal":return"bg-white border-gray-200";case"low":return"bg-yellow-50 border-yellow-200";case"high":return"bg-red-50 border-red-200";default:return"bg-white border-gray-200"}},Z=()=>{var ge,me,we,Me,z,pe,J,oe,ae,ue,be,_e,ye,Ee,ze,Fe,Ge,at,ut,gt,Le,Qe,ht,it,Vt,kt,Bt,Sr,zt,qe,pt,Nt,Kt,Yt,Je,yt,mr,dr,an,_r,mt,Cn,Pr,ar,Dr,Nr,sn,ri,Ea,Zr,ia,Yn;return[{id:"heartRate",title:"심박수",subtitle:"Heart Rate",value:((me=(ge=r.measurementData.ppgMetrics)==null?void 0:ge.heartRate)==null?void 0:me.value)||79,normalRange:{min:60,max:100},unit:"BPM",status:G(((Me=(we=r.measurementData.ppgMetrics)==null?void 0:we.heartRate)==null?void 0:Me.value)||79,{min:60,max:100}),normalRangeText:"60-100 BPM",currentState:"정상 범위 - 건강한 심박수",interpretation:((pe=(z=_==null?void 0:_.individualMetricsInterpretation)==null?void 0:z.heartRate)==null?void 0:pe.interpretation)||((oe=(J=r.measurementData.ppgMetrics)==null?void 0:J.heartRate)==null?void 0:oe.interpretation)||"심장의 수축 빈도로 심혈관 건강과 자율신경계 상태를 반영합니다. 현재 심박수는 정상 범위에 있어 건강한 심혈관 기능을 나타냅니다.",customLabels:{low:"서맥",normal:"정상",high:"빈맥"}},{id:"spo2",title:"산소포화도",subtitle:"SpO2",value:((ue=(ae=r.measurementData.ppgMetrics)==null?void 0:ae.spo2)==null?void 0:ue.value)||92,normalRange:{min:95,max:100},unit:"%",status:G(((_e=(be=r.measurementData.ppgMetrics)==null?void 0:be.spo2)==null?void 0:_e.value)||92,{min:95,max:100}),normalRangeText:"95-100%",currentState:"정상 범위 미달 - 산소 공급 부족 (의료진 상담 권장)",interpretation:((Ee=(ye=_==null?void 0:_.individualMetricsInterpretation)==null?void 0:ye.spo2)==null?void 0:Ee.interpretation)||((Fe=(ze=r.measurementData.ppgMetrics)==null?void 0:ze.spo2)==null?void 0:Fe.interpretation)||"혈액 내 산소 포화도로 호흡 및 순환 기능을 평가합니다. 현재 수치는 정상 범위에 있어 적절한 산소 공급이 이루어지고 있습니다.",customLabels:{low:"부족",normal:"정상",high:"과포화"}},{id:"rmssd",title:"심박변이도 RMSSD",subtitle:"RMSSD",value:((at=(Ge=r.measurementData.ppgMetrics)==null?void 0:Ge.rmssd)==null?void 0:at.value)||229,normalRange:{min:20,max:50},unit:"ms",status:G(((gt=(ut=r.measurementData.ppgMetrics)==null?void 0:ut.rmssd)==null?void 0:gt.value)||229,{min:20,max:50}),normalRangeText:"20-50 ms",currentState:"정상 범위 초과 - 매우 활발한 부교감신경 활동",interpretation:((Qe=(Le=_==null?void 0:_.individualMetricsInterpretation)==null?void 0:Le.rmssd)==null?void 0:Qe.interpretation)||((it=(ht=r.measurementData.ppgMetrics)==null?void 0:ht.rmssd)==null?void 0:it.interpretation)||"연속된 심박 간격의 변이를 측정하여 부교감신경 활성도와 스트레스 회복 능력을 평가합니다. 현재 RMSSD 수치는 우수한 자율신경 균형을 나타냅니다.",customLabels:{low:"낮음",normal:"양호",high:"높음"}},{id:"sdnn",title:"심박변이도 SDNN",subtitle:"SDNN",value:((kt=(Vt=r.measurementData.ppgMetrics)==null?void 0:Vt.sdnn)==null?void 0:kt.value)||188,normalRange:{min:30,max:100},unit:"ms",status:G(((Sr=(Bt=r.measurementData.ppgMetrics)==null?void 0:Bt.sdnn)==null?void 0:Sr.value)||188,{min:30,max:100}),normalRangeText:"30-100 ms",currentState:"정상 범위 초과 - 매우 높은 자율신경 활성도",interpretation:((qe=(zt=_==null?void 0:_.individualMetricsInterpretation)==null?void 0:zt.sdnn)==null?void 0:qe.interpretation)||((Nt=(pt=r.measurementData.ppgMetrics)==null?void 0:pt.sdnn)==null?void 0:Nt.interpretation)||"전체 심박변이도를 나타내며, 자율신경계의 전반적인 건강 상태를 평가합니다. 현재 SDNN 수치는 매우 건강한 자율신경 기능을 보여줍니다.",customLabels:{low:"낮음",normal:"양호",high:"높음"}},{id:"lfPower",title:"LF Power",subtitle:"저주파 성분",value:((Yt=(Kt=r.measurementData.ppgMetrics)==null?void 0:Kt.lfPower)==null?void 0:Yt.value)||14863.64,normalRange:{min:500,max:2e4},unit:"ms²",status:G(((yt=(Je=r.measurementData.ppgMetrics)==null?void 0:Je.lfPower)==null?void 0:yt.value)||14863.64,{min:500,max:2e4}),normalRangeText:"500-20000 ms²",currentState:"정상 범위 - 양호한 교감신경 활동",interpretation:((dr=(mr=r.measurementData.ppgMetrics)==null?void 0:mr.lfPower)==null?void 0:dr.interpretation)||"교감신경 활성도를 반영하며, 스트레스 반응과 혈압 조절 능력을 나타냅니다. 현재 LF Power는 건강한 교감신경 기능을 보여줍니다.",customLabels:{low:"낮음",normal:"양호",high:"높음"}},{id:"hfPower",title:"HF Power",subtitle:"고주파 성분",value:((_r=(an=r.measurementData.ppgMetrics)==null?void 0:an.hfPower)==null?void 0:_r.value)||1708.49,normalRange:{min:200,max:5e3},unit:"ms²",status:G(((Cn=(mt=r.measurementData.ppgMetrics)==null?void 0:mt.hfPower)==null?void 0:Cn.value)||1708.49,{min:200,max:5e3}),normalRangeText:"200-5000 ms²",currentState:"정상 범위 - 양호한 부교감신경 활동",interpretation:((ar=(Pr=r.measurementData.ppgMetrics)==null?void 0:Pr.hfPower)==null?void 0:ar.interpretation)||"부교감신경 활성도를 반영하며, 휴식 및 회복 능력을 나타냅니다. 현재 HF Power는 양호한 부교감신경 기능을 보여줍니다.",customLabels:{low:"낮음",normal:"양호",high:"높음"}},{id:"lfHfRatio",title:"자율신경 균형",subtitle:"LF/HF Ratio",value:((Nr=(Dr=r.measurementData.ppgMetrics)==null?void 0:Dr.lfHfRatio)==null?void 0:Nr.value)||8.7,normalRange:{min:1,max:10},unit:"",status:G(((ri=(sn=r.measurementData.ppgMetrics)==null?void 0:sn.lfHfRatio)==null?void 0:ri.value)||8.7,{min:1,max:10}),normalRangeText:"1.0-10.0",currentState:"정상 범위 - 균형잡힌 자율신경 활동",interpretation:((Zr=(Ea=_==null?void 0:_.individualMetricsInterpretation)==null?void 0:Ea.lfHfRatio)==null?void 0:Zr.interpretation)||((Yn=(ia=r.measurementData.ppgMetrics)==null?void 0:ia.lfHfRatio)==null?void 0:Yn.interpretation)||"교감신경과 부교감신경의 균형을 나타내며, 스트레스 대응 능력을 평가합니다. 현재 자율신경 균형은 적절한 상태를 유지하고 있습니다.",customLabels:{low:"부교감우세",normal:"균형",high:"교감우세"}}]};return f.jsx("div",{className:"min-h-screen bg-white",children:f.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6 bg-white p-6 rounded-lg shadow-sm border",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs(At,{onClick:e,variant:"outline",className:"flex items-center gap-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400",children:[f.jsx(o0,{className:"h-4 w-4"}),"목록으로"]}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[M.name,"님의 건강 리포트",n&&f.jsx(Gt,{className:"ml-2 bg-green-100 text-green-800",children:"현재 분석"})]}),f.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[f.jsx(j0,{className:"h-4 w-4"}),Q(r.timestamp)]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(Gt,{variant:"outline",className:"border-blue-300 text-blue-700 bg-blue-50",children:[M.age,"세"]}),f.jsx(Gt,{variant:"outline",className:"border-green-300 text-green-700 bg-green-50",children:M.gender==="male"?"남성":"여성"}),f.jsx(Gt,{variant:"outline",className:"border-purple-300 text-purple-700 bg-purple-50",children:W(M.occupation)})]})]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[l&&u&&f.jsxs(At,{onClick:u,variant:"outline",className:"flex items-center gap-2 text-blue-600 border-blue-600 hover:bg-blue-50",children:[f.jsx(Ba,{className:"h-4 w-4"}),"EEG 상세"]}),c&&h&&f.jsxs(At,{onClick:h,variant:"outline",className:"flex items-center gap-2 text-red-600 border-red-600 hover:bg-red-50",children:[f.jsx(gA,{className:"h-4 w-4"}),"PPG 상세"]}),a&&s&&f.jsx(At,{onClick:s,disabled:d,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white",children:d?f.jsxs(f.Fragment,{children:[f.jsx(i0,{className:"h-4 w-4 animate-spin"}),"저장 중..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Us,{className:"h-4 w-4"}),A?"저장됨":"저장"]})}),i&&o&&f.jsxs(At,{onClick:o,variant:"outline",className:"flex items-center gap-2",children:[f.jsx(Zue,{className:"h-4 w-4"}),"공유"]}),f.jsxs(At,{onClick:O,disabled:g,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[f.jsx(vh,{className:"h-4 w-4"}),g?"PDF 생성 중...":"PDF 다운로드"]})]})]}),f.jsx(wQe,{report:r,analysisResult:k,isExpanded:v.overview,onToggleExpanded:()=>m(q=>({...q,overview:!q.overview})),EEGMetricChart:j}),f.jsx(SQe,{report:r,analysisResult:k,isExpanded:v.analysis,onToggleExpanded:()=>m(q=>({...q,analysis:!q.analysis})),EEGMetricChart:j,getScoreBadgeColor:H,getOccupationLabel:W,ScoreDistributionBar:te,mentalHealthComprehensive:y,physicalHealthComprehensive:_,loadingComprehensive:b,preparePPGMetrics:Z,getMetricStatus:G,getEEGCardBackgroundClass:Y}),f.jsx(_Qe,{report:r,analysisResult:k,isExpanded:v.mentalHealthRisk,onToggleExpanded:()=>m(q=>({...q,mentalHealthRisk:!q.mentalHealthRisk})),MentalHealthRiskChart:ee}),f.jsx(CQe,{report:r,analysisResult:k,isExpanded:v.medicalRiskAnalysis,onToggleExpanded:()=>m(q=>({...q,medicalRiskAnalysis:!q.medicalRiskAnalysis}))}),f.jsx(BQe,{report:r,analysisResult:k,isExpanded:v.recommendations,onToggleExpanded:()=>m(q=>({...q,recommendations:!q.recommendations}))})]})})},Bg=class Bg{constructor(){Ce(this,"STORAGE_KEY","ai_health_reports");Ce(this,"MAX_REPORTS",50);Ce(this,"DB_NAME","AIHealthReportDB");Ce(this,"STORE_NAME","reports");Ce(this,"db",null);Ce(this,"dbInitialized",null);Ce(this,"currentDBVersion",1);this.dbInitialized=this.initializeDB()}static getInstance(){return Bg.instance||(Bg.instance=new Bg),Bg.instance}async initializeDB(){return new Promise((e,t)=>{if(!window.indexedDB){console.error("IndexedDB가 지원되지 않습니다."),t(new Error("IndexedDB가 지원되지 않습니다."));return}const n=indexedDB.open(this.DB_NAME);n.onerror=()=>{console.error("IndexedDB 초기화 실패:",n.error),t(n.error)},n.onsuccess=()=>{if(this.db=n.result,this.currentDBVersion=this.db.version,!this.db.objectStoreNames.contains(this.STORE_NAME)){console.error("객체 스토어가 존재하지 않습니다. 데이터베이스 재생성 필요."),this.db.close(),this.db=null,this.forceDBUpgrade().then(e).catch(t);return}console.log("✅ IndexedDB 초기화 완료"),this.db.onerror=a=>{console.error("IndexedDB 연결 에러:",a)},e()},n.onupgradeneeded=a=>{const i=a.target.result;console.log("IndexedDB 업그레이드 중..."),i.objectStoreNames.contains(this.STORE_NAME)&&(i.deleteObjectStore(this.STORE_NAME),console.log("기존 객체 스토어 삭제됨"));const s=i.createObjectStore(this.STORE_NAME,{keyPath:"id"});s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("overallScore","analysisResult.overallHealth.score",{unique:!1}),s.createIndex("occupation","personalInfo.occupation",{unique:!1}),console.log("✅ 오브젝트 스토어 생성 완료")},n.onblocked=()=>{console.warn("IndexedDB 업그레이드가 차단되었습니다. 다른 탭을 닫아주세요.")}})}async forceDBUpgrade(){return new Promise((e,t)=>{const n=indexedDB.open(this.DB_NAME,this.currentDBVersion+1);n.onerror=()=>{console.error("강제 업그레이드 실패:",n.error),t(n.error)},n.onsuccess=()=>{this.db=n.result,console.log("✅ 강제 업그레이드 완료"),e()},n.onupgradeneeded=a=>{const i=a.target.result;i.objectStoreNames.contains(this.STORE_NAME)&&i.deleteObjectStore(this.STORE_NAME);const s=i.createObjectStore(this.STORE_NAME,{keyPath:"id"});s.createIndex("timestamp","timestamp",{unique:!1}),s.createIndex("overallScore","analysisResult.overallHealth.score",{unique:!1}),s.createIndex("occupation","personalInfo.occupation",{unique:!1}),console.log("✅ 강제 업그레이드에서 스토어 재생성 완료")}})}async ensureDBInitialized(){if(this.dbInitialized&&await this.dbInitialized,!this.db)throw new Error("데이터베이스 초기화에 실패했습니다.");this.db.objectStoreNames.contains(this.STORE_NAME)||(console.error("객체 스토어가 존재하지 않습니다. 재초기화 시도..."),this.db.close(),this.db=null,this.dbInitialized=this.initializeDB(),await this.dbInitialized)}createTransaction(e){if(!this.db)throw new Error("데이터베이스가 초기화되지 않았습니다.");if(!this.db.objectStoreNames.contains(this.STORE_NAME))throw new Error(`객체 스토어 '${this.STORE_NAME}'가 존재하지 않습니다.`);return this.db.transaction([this.STORE_NAME],e)}async resetDatabase(){try{return this.db&&(this.db.close(),this.db=null),new Promise((e,t)=>{const n=indexedDB.deleteDatabase(this.DB_NAME);n.onsuccess=()=>{console.log("✅ 데이터베이스 삭제 완료"),this.dbInitialized=this.initializeDB(),e()},n.onerror=()=>{console.error("데이터베이스 삭제 실패:",n.error),t(n.error)},n.onblocked=()=>{console.warn("데이터베이스 삭제가 차단되었습니다. 다른 탭을 닫아주세요.")}})}catch(e){throw console.error("❌ 데이터베이스 리셋 실패:",e),e}}async saveReport(e,t,n,a=[],i){const s=this.generateReportId(),o={id:s,timestamp:Date.now(),personalInfo:e,analysisResult:t,measurementData:n,tags:a,notes:i};try{return await this.saveToIndexedDB(o),await this.updateLocalStorageMetadata(o),await this.enforceMaxReports(),console.log(`✅ 리포트 저장 완료: ${s}`),s}catch(l){throw console.error("❌ 리포트 저장 실패:",l),new Error("리포트 저장에 실패했습니다.")}}async getAllReports(){var e;try{return await this.ensureDBInitialized(),console.log("🔍 리포트 조회 시작"),console.log("DB 상태:",this.db?"연결됨":"연결 안됨"),console.log("객체 스토어 목록:",(e=this.db)!=null&&e.objectStoreNames?Array.from(this.db.objectStoreNames):"없음"),new Promise((t,n)=>{try{const a=this.createTransaction("readonly"),o=a.objectStore(this.STORE_NAME).index("timestamp").getAll();o.onsuccess=()=>{const l=o.result.sort((c,u)=>u.timestamp-c.timestamp);console.log(`✅ ${l.length}개 리포트 조회 완료`),t(l)},o.onerror=()=>{console.error("❌ 리포트 조회 요청 실패:",o.error),n(o.error)},a.onerror=()=>{console.error("❌ 트랜잭션 에러:",a.error),n(a.error)},a.onabort=()=>{console.error("❌ 트랜잭션 중단됨"),n(new Error("트랜잭션이 중단되었습니다."))}}catch(a){console.error("❌ 트랜잭션 생성 실패:",a),n(a)}})}catch(t){return console.error("❌ 리포트 조회 실패:",t),console.error("에러 상세:",{name:t instanceof Error?t.name:"Unknown",message:t instanceof Error?t.message:String(t),stack:t instanceof Error?t.stack:void 0}),[]}}async getReport(e){try{return await this.ensureDBInitialized(),new Promise((t,n)=>{const s=this.createTransaction("readonly").objectStore(this.STORE_NAME).get(e);s.onsuccess=()=>{t(s.result||null)},s.onerror=()=>{console.error("리포트 조회 실패:",s.error),n(s.error)}})}catch(t){return console.error("❌ 리포트 조회 실패:",t),null}}async searchReports(e){return(await this.getAllReports()).filter(n=>{if(e.dateRange){const a=new Date(n.timestamp);if(a<e.dateRange.start||a>e.dateRange.end)return!1}if(e.scoreRange){const a=n.analysisResult.overallHealth.score;if(a<e.scoreRange.min||a>e.scoreRange.max)return!1}if(e.stressLevel&&n.analysisResult.detailedAnalysis.stressLevel.level!==e.stressLevel||e.occupation&&n.personalInfo.occupation!==e.occupation)return!1;if(e.keywords){const a=e.keywords.toLowerCase();if(![n.personalInfo.name,n.analysisResult.overallHealth.summary,n.analysisResult.detailedAnalysis.mentalHealth.analysis,n.analysisResult.detailedAnalysis.physicalHealth.analysis,n.notes||""].join(" ").toLowerCase().includes(a))return!1}return!(e.tags&&e.tags.length>0&&!e.tags.some(i=>n.tags.includes(i)))})}async deleteReport(e){try{return await this.ensureDBInitialized(),new Promise((t,n)=>{const s=this.createTransaction("readwrite").objectStore(this.STORE_NAME).delete(e);s.onsuccess=()=>{console.log(`✅ 리포트 삭제 완료: ${e}`),t(!0)},s.onerror=()=>{console.error("리포트 삭제 실패:",s.error),n(s.error)}})}catch(t){return console.error("❌ 리포트 삭제 실패:",t),!1}}async getReportStats(){const e=await this.getAllReports();if(e.length===0)return{totalReports:0,averageScore:0,storageUsed:0};const t=e.reduce((a,i)=>a+i.analysisResult.overallHealth.score,0),n=this.calculateStorageSize(e);return{totalReports:e.length,averageScore:Math.round(t/e.length),latestReport:e[0],oldestReport:e[e.length-1],storageUsed:n}}async exportAllReports(){const e=await this.getAllReports(),t=await this.getReportStats(),n={exportDate:new Date().toISOString(),version:"1.0",stats:t,reports:e};return JSON.stringify(n,null,2)}async importReports(e){try{const n=JSON.parse(e).reports;let a=0;for(const i of n)await this.getReport(i.id)||(await this.saveToIndexedDB(i),a++);return console.log(`✅ ${a}개 리포트 가져오기 완료`),a}catch(t){throw console.error("❌ 리포트 가져오기 실패:",t),new Error("리포트 가져오기에 실패했습니다.")}}generateReportId(){return`report_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async saveToIndexedDB(e){return await this.ensureDBInitialized(),new Promise((t,n)=>{const s=this.createTransaction("readwrite").objectStore(this.STORE_NAME).put(e);s.onsuccess=()=>t(),s.onerror=()=>n(s.error)})}async updateLocalStorageMetadata(e){try{const t={id:e.id,timestamp:e.timestamp,name:e.personalInfo.name,score:e.analysisResult.overallHealth.score,grade:e.analysisResult.overallHealth.grade},n=localStorage.getItem(this.STORAGE_KEY),a=n?JSON.parse(n):[];a.unshift(t),a.length>this.MAX_REPORTS&&a.splice(this.MAX_REPORTS),localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a))}catch(t){console.warn("로컬 스토리지 메타데이터 업데이트 실패:",t)}}async enforceMaxReports(){const e=await this.getAllReports();if(e.length>this.MAX_REPORTS){const t=e.slice(this.MAX_REPORTS);for(const n of t)await this.deleteReport(n.id);console.log(`🗑️ ${t.length}개 오래된 리포트 삭제됨`)}}calculateStorageSize(e){const t=JSON.stringify(e);return new Blob([t]).size}};Ce(Bg,"instance");let XA=Bg;const NQe=Object.freeze(Object.defineProperty({__proto__:null,ReportStorage:XA,default:XA},Symbol.toStringTag,{value:"Module"})),TQe=({analysisResult:r,personalInfo:e,measurementData:t,onBackToMeasurement:n,onReturnToHome:a,onViewEEGAnalysis:i,onViewPPGAnalysis:s,analysisError:o,isUsingFallback:l,isAnalyzing:c,currentAnalysisStep:u,onBack:h})=>{const[d,A]=K.useState(!1),[g,p]=K.useState(!1),[v,m]=K.useState(0);K.useEffect(()=>{let w;return c?w=setInterval(()=>{m(B=>B+1)},1e3):m(0),()=>{w&&clearInterval(w)}},[c]);const y=w=>{if(w<60)return`${w}s`;if(w<3600){const B=Math.floor(w/60),D=w%60;return`${B}m ${D}s`}else{const B=Math.floor(w/3600),D=Math.floor(w%3600/60);return`${B}h ${D}m`}},x=K.useMemo(()=>{if(!(t!=null&&t.accMetrics))return null;const w={stability:t.accMetrics.stability||80,intensity:t.accMetrics.intensity||10,averageMovement:t.accMetrics.averageMovement||.05,maxMovement:t.accMetrics.maxMovement||.1,tremor:t.accMetrics.tremor||5,postureStability:t.accMetrics.postureStability||85};return pse.assessQuality(w)},[t]),b=()=>({id:`analysis_${Date.now()}`,timestamp:Date.now(),analysisResult:r,personalInfo:e||{name:"사용자",age:30,gender:"male",occupation:"office_worker"},measurementData:t||{},tags:[],notes:x?`품질 평가: ${x.reliability}`:void 0}),S=async()=>{try{A(!0);const w=b();await XA.getInstance().saveReport(w.personalInfo,w.analysisResult,w.measurementData,w.tags,w.notes),p(!0),yn.success("분석 결과가 저장되었습니다."),setTimeout(()=>p(!1),3e3)}catch(w){console.error("저장 실패:",w),yn.error("저장에 실패했습니다.")}finally{A(!1)}},_=async()=>{var w;try{const B=b(),D={title:`${(e==null?void 0:e.name)||"사용자"}님의 AI 건강 리포트`,text:`종합 건강 점수: ${((w=r==null?void 0:r.overallHealth)==null?void 0:w.score)||0}점`,url:window.location.href};navigator.share?(await navigator.share(D),yn.success("공유되었습니다.")):(await navigator.clipboard.writeText(`${D.title}
${D.text}
${D.url}`),yn.success("링크가 클립보드에 복사되었습니다."))}catch(B){console.error("공유 실패:",B),yn.error("공유에 실패했습니다.")}},C=()=>{h?h():n?n():a&&a()};return c||!r?f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"max-w-md w-full text-center space-y-8",children:[f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"w-24 h-24 mx-auto relative",children:[f.jsx("div",{className:"absolute inset-0 border-4 border-blue-200 rounded-full animate-spin border-t-blue-600"}),f.jsx("div",{className:"absolute inset-2 bg-blue-100 rounded-full flex items-center justify-center",children:f.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full animate-pulse"})})]}),f.jsx("div",{className:"absolute -top-2 -left-2 w-3 h-3 bg-purple-400 rounded-full animate-bounce"}),f.jsx("div",{className:"absolute -top-1 -right-3 w-2 h-2 bg-indigo-400 rounded-full animate-bounce delay-100"}),f.jsx("div",{className:"absolute -bottom-2 -left-3 w-2.5 h-2.5 bg-blue-400 rounded-full animate-bounce delay-200"}),f.jsx("div",{className:"absolute -bottom-1 -right-2 w-2 h-2 bg-cyan-400 rounded-full animate-bounce delay-300"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"🧠 AI 분석 진행 중"}),f.jsx("p",{className:"text-gray-600 text-lg",children:"고급 알고리즘으로 건강 상태를 분석하고 있습니다"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[f.jsxs("span",{children:["단계 ",u||1,"/4"]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsxs("span",{children:[Math.round((u||1)/4*100),"%"]}),f.jsxs("span",{className:"text-blue-600 font-medium",children:["⏱️ ",y(v)]})]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500 ease-out",style:{width:`${(u||1)/4*100}%`}})}),f.jsx("div",{className:"space-y-2",children:[{step:1,title:"🧠 뇌파 데이터 분석",desc:"EEG 신호 패턴 해석"},{step:2,title:"❤️ 심혈관 데이터 분석",desc:"PPG 신호 및 심박변이도 분석"},{step:3,title:"🎯 스트레스 평가",desc:"정신적 스트레스 수준 측정"},{step:4,title:"📊 종합 리포트 생성",desc:"개인 맞춤형 건강 보고서 작성"}].map((w,B)=>f.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg transition-all duration-300 ${(u||1)>=w.step?"bg-blue-100 border-l-4 border-blue-500":(u||1)===w.step-1?"bg-yellow-50 border-l-4 border-yellow-400":"bg-gray-50 border-l-4 border-gray-300"}`,children:[f.jsx("div",{className:`text-lg ${(u||1)>=w.step?"opacity-100":"opacity-50"}`,children:(u||1)>=w.step?"✅":(u||1)===w.step-1?"⏳":"⏸️"}),f.jsxs("div",{className:"flex-1 text-left",children:[f.jsx("div",{className:`font-medium ${(u||1)>=w.step?"text-blue-800":"text-gray-600"}`,children:w.title}),f.jsx("div",{className:`text-sm ${(u||1)>=w.step?"text-blue-600":"text-gray-500"}`,children:w.desc})]})]},w.step))})]}),f.jsx("div",{className:"bg-white bg-opacity-70 backdrop-blur-sm rounded-xl p-4 border border-white border-opacity-50",children:f.jsxs("div",{className:"space-y-2",children:[f.jsxs("p",{className:"text-sm text-gray-600",children:["💡 ",f.jsx("strong",{children:"팁:"})," 분석이 완료되면 개인 맞춤형 건강 조언과 함께 상세한 리포트를 확인할 수 있습니다."]}),f.jsxs("p",{className:"text-xs text-gray-500",children:["⏱️ 일반적으로 분석은 1-2분 내에 완료됩니다 • 현재 경과: ",f.jsx("span",{className:"font-medium text-blue-600",children:y(v)})]})]})})]})}):f.jsx(a6,{report:b(),onBack:C,isCurrentAnalysis:!0,showSaveButton:!0,showShareButton:!0,onSave:S,onShare:_,showEEGButton:!!i,showPPGButton:!!s,onViewEEGAnalysis:i,onViewPPGAnalysis:s,isSaving:d,saveSuccess:g})},i6=()=>{const[r,e]=K.useState([]),[t,n]=K.useState(null),[a,i]=K.useState(null),[s,o]=K.useState(!1),[l,c]=K.useState(!1),[u,h]=K.useState(!1),[d,A]=K.useState(!1),[g,p]=K.useState(null),v=XA.getInstance(),m=K.useCallback(async()=>{o(!0),p(null);try{const T=await v.getAllReports();e(T),console.log(`✅ ${T.length}개 리포트 로드 완료`)}catch(T){const E=T instanceof Error?T.message:"리포트를 불러오는데 실패했습니다.";p(E),console.error("❌ 리포트 로드 실패:",T)}finally{o(!1)}},[v]),y=K.useCallback(async T=>{c(!0),p(null);try{const E=await v.searchReports(T);e(E),console.log(`🔍 검색 완료: ${E.length}개 리포트 발견`)}catch(E){const R=E instanceof Error?E.message:"리포트 검색에 실패했습니다.";p(R),console.error("❌ 리포트 검색 실패:",E)}finally{c(!1)}},[v]),x=K.useCallback(async(T,E,R,M=[],k)=>{h(!0),p(null);try{const O=await v.saveReport(T,E,R,M,k);return await m(),await w(),console.log(`✅ 리포트 저장 완료: ${O}`),O}catch(O){const Q=O instanceof Error?O.message:"리포트 저장에 실패했습니다.";return p(Q),console.error("❌ 리포트 저장 실패:",O),null}finally{h(!1)}},[v,m]),b=K.useCallback(async T=>{o(!0),p(null);try{const E=await v.getReport(T);i(E),E?console.log(`✅ 리포트 로드 완료: ${T}`):console.warn(`⚠️ 리포트를 찾을 수 없음: ${T}`)}catch(E){const R=E instanceof Error?E.message:"리포트를 불러오는데 실패했습니다.";p(R),console.error("❌ 리포트 로드 실패:",E)}finally{o(!1)}},[v]),S=K.useCallback(async T=>{A(!0),p(null);try{const E=await v.deleteReport(T);return E&&(e(R=>R.filter(M=>M.id!==T)),(a==null?void 0:a.id)===T&&i(null),await w(),console.log(`✅ 리포트 삭제 완료: ${T}`)),E}catch(E){const R=E instanceof Error?E.message:"리포트 삭제에 실패했습니다.";return p(R),console.error("❌ 리포트 삭제 실패:",E),!1}finally{A(!1)}},[v,a]),_=K.useCallback(async()=>{o(!0),p(null);try{const T=await v.exportAllReports();return console.log("✅ 리포트 내보내기 완료"),T}catch(T){const E=T instanceof Error?T.message:"리포트 내보내기에 실패했습니다.";return p(E),console.error("❌ 리포트 내보내기 실패:",T),null}finally{o(!1)}},[v]),C=K.useCallback(async T=>{o(!0),p(null);try{const E=await v.importReports(T);return await m(),await w(),console.log(`✅ ${E}개 리포트 가져오기 완료`),E}catch(E){const R=E instanceof Error?E.message:"리포트 가져오기에 실패했습니다.";return p(R),console.error("❌ 리포트 가져오기 실패:",E),0}finally{o(!1)}},[v,m]),w=K.useCallback(async()=>{try{const T=await v.getReportStats();n(T)}catch(T){console.error("❌ 통계 정보 로드 실패:",T)}},[v]),B=K.useCallback(()=>{p(null)},[]),D=K.useCallback(async()=>{await m()},[m]);return K.useEffect(()=>{m(),w()},[m,w]),{reports:r,stats:t,currentReport:a,isLoading:s,isSearching:l,isSaving:u,isDeleting:d,error:g,loadReports:m,searchReports:y,saveReport:x,loadReport:b,deleteReport:S,exportReports:_,importReports:C,clearError:B,resetSearch:D,refreshStats:w}};function IQe(r={}){const{enableVirtualization:e=!0,enableMemoization:t=!0,enableMemoryMonitoring:n=!0,maxCacheSize:a=100,debounceDelay:i=300}=r,[s,o]=K.useState({renderTime:0,memoryUsage:0,componentCount:0,lastOptimization:Date.now()}),l=K.useRef(new Map),c=K.useRef(0),u=K.useRef(0),h=K.useCallback(()=>{if(!n||typeof performance.memory>"u")return 0;const _=performance.memory;return{used:_.usedJSHeapSize,total:_.totalJSHeapSize,limit:_.jsHeapSizeLimit,percentage:_.usedJSHeapSize/_.jsHeapSizeLimit*100}},[n]),d=K.useCallback((_,C)=>{if(!t)return C();if(l.current.has(_))return l.current.get(_);const w=C();if(l.current.size>=a){const B=l.current.keys().next().value;B&&l.current.delete(B)}return l.current.set(_,w),w},[t,a]),A=K.useCallback(()=>{l.current.clear()},[]),g=K.useCallback((_,C=i)=>{const w=K.useRef();return(...B)=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{_(...B)},C)}},[i]),p=K.useCallback((_,C,w=0)=>{if(!e)return{visibleItems:_,startIndex:0,endIndex:_.length-1,totalHeight:_.length*C.itemHeight,offsetY:0};const{itemHeight:B,containerHeight:D,overscan:T=3}=C,E=_.length*B,R=Math.max(0,Math.floor(w/B)-T),M=Math.ceil(D/B),k=Math.min(_.length-1,R+M+T*2),O=_.slice(R,k+1),Q=R*B;return{visibleItems:O,startIndex:R,endIndex:k,totalHeight:E,offsetY:Q}},[e]),v=K.useCallback(_=>d(`reports_analysis_${_.length}`,()=>({totalReports:_.length,averageScore:_.reduce((w,B)=>w+B.analysisResult.overallHealth.score,0)/_.length,scoreDistribution:{excellent:_.filter(w=>w.analysisResult.overallHealth.score>=85).length,good:_.filter(w=>w.analysisResult.overallHealth.score>=70).length,fair:_.filter(w=>w.analysisResult.overallHealth.score>=55).length,poor:_.filter(w=>w.analysisResult.overallHealth.score<55).length},trends:m(_),problemFrequency:y(_)})),[d]),m=K.useCallback(_=>{if(_.length<2)return null;const B=[..._].sort((T,E)=>T.timestamp-E.timestamp).slice(-5).map(T=>T.analysisResult.overallHealth.score),D=B[B.length-1]-B[0];return{direction:D>0?"improving":D<0?"declining":"stable",change:Math.abs(D),scores:B}},[]),y=K.useCallback(_=>{const C=new Map;return _.forEach(w=>{var B;(B=w.analysisResult.problemAreas)==null||B.forEach(D=>{const T=C.get(D.category)||0;C.set(D.category,T+1)})}),Array.from(C.entries()).map(([w,B])=>({category:w,count:B,percentage:B/_.length*100})).sort((w,B)=>B.count-w.count)},[]),x=K.useCallback((_,C)=>d(`image_${_}`,()=>{const w=new Image;return w.src=_,C||'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect width="100" height="100" fill="%23f0f0f0"/></svg>'}),[d]),b=K.useCallback((_,C)=>{if(!n)return C();const w=performance.now(),B=C(),D=performance.now();return c.current=D-w,u.current+=1,console.log(`[Performance] ${_} rendered in ${c.current.toFixed(2)}ms`),B},[n]);K.useEffect(()=>{if(!n)return;const C=setInterval(()=>{const w=h();o(B=>({renderTime:c.current,memoryUsage:typeof w=="object"?w.percentage:0,componentCount:u.current,lastOptimization:Date.now()}))},5e3);return()=>clearInterval(C)},[n,h]),K.useEffect(()=>()=>{A()},[A]);const S=K.useCallback(()=>{const _=[];return s.memoryUsage>80&&_.push("메모리 사용량이 높습니다. 캐시를 정리하는 것을 권장합니다."),s.renderTime>100&&_.push("렌더링 시간이 길어지고 있습니다. 컴포넌트 최적화를 검토해보세요."),l.current.size>a*.8&&_.push("캐시 크기가 제한에 근접했습니다. 불필요한 데이터를 정리하세요."),_},[s,a]);return{memoizedValue:d,memoizedReportAnalysis:v,clearCache:A,calculateVirtualization:p,debounce:g,lazyLoadImage:x,measureRenderTime:b,metrics:s,getOptimizationSuggestions:S,monitorMemoryUsage:h}}const EQe=({onViewReport:r,onDownloadPDF:e,className:t=""})=>{const[n,a]=K.useState([]),[i,s]=K.useState([]),[o,l]=K.useState(!0),[c,u]=K.useState(""),[h,d]=K.useState("all"),[A,g]=K.useState("all"),[p,v]=K.useState(!1),m=XA.getInstance();K.useEffect(()=>{y()},[]),K.useEffect(()=>{x()},[n,c,h,A]);const y=async()=>{try{l(!0);const w=await m.getAllReports();a(w),console.log(`📋 ${w.length}개의 리포트를 로드했습니다.`)}catch(w){console.error("리포트 로드 실패:",w),yn.error("리포트 목록을 불러오는데 실패했습니다.")}finally{l(!1)}},x=()=>{let w=[...n];if(c.trim()){const B=c.toLowerCase();w=w.filter(D=>D.personalInfo.name.toLowerCase().includes(B)||C(D.personalInfo.occupation).toLowerCase().includes(B)||D.analysisResult.overallHealth.summary.toLowerCase().includes(B)||D.notes&&D.notes.toLowerCase().includes(B))}if(h!=="all"){const B=new Date;let D;switch(h){case"7days":D=new Date(B.getTime()-7*24*60*60*1e3);break;case"30days":D=new Date(B.getTime()-30*24*60*60*1e3);break;case"90days":D=new Date(B.getTime()-90*24*60*60*1e3);break;default:D=new Date(0)}w=w.filter(T=>new Date(T.timestamp)>=D)}A!=="all"&&(w=w.filter(B=>{const D=B.analysisResult.overallHealth.score;switch(A){case"high":return D>=80;case"medium":return D>=60&&D<80;case"low":return D<60;default:return!0}})),w.sort((B,D)=>D.timestamp-B.timestamp),s(w)},b=async w=>{if(confirm("이 리포트를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."))try{await m.deleteReport(w)?(yn.success("리포트가 삭제되었습니다."),await y()):yn.error("리포트 삭제에 실패했습니다.")}catch(B){console.error("리포트 삭제 실패:",B),yn.error("리포트 삭제 중 오류가 발생했습니다.")}},S=w=>new Date(w).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),_=w=>w>=80?"bg-green-500/20 text-green-400 border-green-500/30":w>=60?"bg-blue-500/20 text-blue-400 border-blue-500/30":w>=40?"bg-orange-500/20 text-orange-400 border-orange-500/30":"bg-red-500/20 text-red-400 border-red-500/30",C=w=>({teacher:"교사",military_medic:"의무병사",military_career:"직업군인",elementary:"초등학생",middle_school:"중학생",high_school:"고등학생",university:"대학생",housewife:"전업주부",parent:"학부모",firefighter:"소방공무원",police:"경찰공무원",developer:"개발자",designer:"디자이너",office_worker:"일반 사무직",manager:"관리자",general_worker:"일반 직장인",entrepreneur:"사업가",other:"그외"})[w]||w;return o?f.jsx("div",{className:"min-h-screen bg-black p-6",children:f.jsx("div",{className:"max-w-6xl mx-auto",children:f.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),f.jsx("p",{className:"text-gray-400",children:"리포트 목록을 불러오는 중..."})]})})})}):f.jsx("div",{className:"min-h-screen bg-black",children:f.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[f.jsxs(Ye,{className:"bg-gray-900 border-gray-700",children:[f.jsx(wt,{className:"cursor-pointer hover:bg-gray-800/50 transition-colors border-b border-gray-700",onClick:()=>v(!p),children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center",children:f.jsx(Og,{className:"w-4 h-4 text-blue-400"})}),f.jsxs("div",{children:[f.jsx(St,{className:"text-lg text-white",children:"검색 및 필터"}),f.jsxs("p",{className:"text-sm text-gray-400",children:["총 ",i.length,"개의 리포트"]})]})]}),p?f.jsx(Ep,{className:"w-5 h-5 text-gray-400"}):f.jsx(Ph,{className:"w-5 h-5 text-gray-400"})]})}),p&&f.jsxs(ct,{className:"p-6 space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx(Og,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),f.jsx(xo,{placeholder:"이름, 직업, 분석 결과로 검색...",value:c,onChange:w=>u(w.target.value),className:"pl-10 bg-gray-800 border-gray-600 text-white placeholder-gray-400 focus:border-blue-500"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"날짜 범위"}),f.jsxs("select",{value:h,onChange:w=>d(w.target.value),className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[f.jsx("option",{value:"all",children:"전체 기간"}),f.jsx("option",{value:"7days",children:"최근 7일"}),f.jsx("option",{value:"30days",children:"최근 30일"}),f.jsx("option",{value:"90days",children:"최근 90일"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"건강 점수"}),f.jsxs("select",{value:A,onChange:w=>g(w.target.value),className:"w-full p-2 bg-gray-800 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[f.jsx("option",{value:"all",children:"전체 점수"}),f.jsx("option",{value:"high",children:"우수 (80-100점)"}),f.jsx("option",{value:"medium",children:"보통 (60-79점)"}),f.jsx("option",{value:"low",children:"주의 (0-59점)"})]})]})]})]})]}),i.length===0?f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsxs(ct,{className:"text-center py-12",children:[f.jsx(Us,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),f.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:n.length===0?"저장된 리포트가 없습니다":"검색 결과가 없습니다"}),f.jsx("p",{className:"text-gray-400",children:n.length===0?"AI 건강 분석을 완료하면 리포트가 자동으로 저장됩니다.":"다른 검색어나 필터를 사용해보세요."})]})}):f.jsx("div",{className:"space-y-4",children:i.map(w=>f.jsx(Ye,{className:"bg-gray-900 border-gray-700 hover:bg-gray-800/50 transition-colors",children:f.jsx(ct,{className:"p-6",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(PB,{className:"h-4 w-4 text-gray-400"}),f.jsx("span",{className:"font-medium text-white",children:w.personalInfo.name})]}),f.jsx(Gt,{variant:"outline",className:"border-gray-600 text-gray-300",children:C(w.personalInfo.occupation)}),f.jsxs(Gt,{className:_(w.analysisResult.overallHealth.score),children:[w.analysisResult.overallHealth.score,"점"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-3",children:[f.jsx(j0,{className:"h-4 w-4"}),S(w.timestamp)]}),f.jsx("p",{className:"text-gray-300 line-clamp-2 mb-3",children:w.analysisResult.overallHealth.summary}),w.notes&&f.jsxs("p",{className:"text-sm text-gray-400 italic",children:["메모: ",w.notes]})]}),f.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[f.jsxs(At,{onClick:()=>r(w),variant:"outline",size:"sm",className:"flex items-center gap-1 border-blue-500/30 text-blue-400 hover:bg-blue-500/20 hover:border-blue-500",children:[f.jsx(rw,{className:"h-4 w-4"}),"보기"]}),f.jsxs(At,{onClick:()=>e(w),variant:"outline",size:"sm",className:"flex items-center gap-1 border-green-500/30 text-green-400 hover:bg-green-500/20 hover:border-green-500",children:[f.jsx(vh,{className:"h-4 w-4"}),"PDF"]}),f.jsxs(At,{onClick:()=>b(w.id),variant:"outline",size:"sm",className:"flex items-center gap-1 border-red-500/30 text-red-400 hover:bg-red-500/20 hover:border-red-500",children:[f.jsx(hP,{className:"h-4 w-4"}),"삭제"]})]})]})})},w.id))})]})})},DQe=({onViewReport:r,onBackToHome:e})=>{const{reports:t,stats:n,isLoading:a,error:i,searchReports:s,exportReports:o,importReports:l,clearError:c,resetSearch:u}=i6(),[h,d]=K.useState(""),[A,g]=K.useState("all"),[p,v]=K.useState(!1),[m,y]=K.useState([]),[x,b]=K.useState(null),{memoizedReportAnalysis:S,debounce:_}=IQe({enableVirtualization:!0,enableMemoization:!0,maxCacheSize:50}),C=xB.getInstance();_(async()=>{if(!h.trim()){await u();return}const k={keywords:h.trim()};await s(k)},300),S(t),K.useMemo(()=>{let k=[...t];if(h.trim()){const O=h.toLowerCase();k=k.filter(Q=>Q.personalInfo.name.toLowerCase().includes(O)||Q.analysisResult.overallHealth.summary.toLowerCase().includes(O)||Q.analysisResult.detailedAnalysis.mentalHealth.analysis.toLowerCase().includes(O)||Q.analysisResult.detailedAnalysis.physicalHealth.analysis.toLowerCase().includes(O))}switch(A){case"recent":const O=Date.now()-6048e5;k=k.filter(Q=>Q.timestamp>O);break;case"high":k=k.filter(Q=>Q.analysisResult.overallHealth.score>=80);break;case"low":k=k.filter(Q=>Q.analysisResult.overallHealth.score<60);break}return k},[t,h,A]);const B=async()=>{try{const k=await o();if(k){const O=new Blob([k],{type:"application/json"}),Q=URL.createObjectURL(O),H=document.createElement("a");H.href=Q,H.download=`ai-health-reports-${yB(new Date,"yyyy-MM-dd")}.json`,H.click(),URL.revokeObjectURL(Q)}}catch(k){console.error("내보내기 실패:",k)}},D=async k=>{var Q;const O=(Q=k.target.files)==null?void 0:Q[0];if(O)try{const H=await O.text(),W=await l(H);yn.success(`${W}개 리포트를 가져왔습니다.`)}catch(H){console.error("가져오기 실패:",H),yn.error("파일을 가져오는데 실패했습니다.")}},T=k=>{b(k)},E=()=>{b(null)},R=async k=>{try{const O=await C.generatePDFFromStoredReport(k),Q=URL.createObjectURL(O),H=document.createElement("a");H.href=Q,H.download=`AI건강리포트_${k.personalInfo.name}_${new Date(k.timestamp).toLocaleDateString("ko-KR").replace(/\./g,"")}.pdf`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(Q),yn.success("PDF가 다운로드되었습니다.")}catch(O){console.error("PDF 다운로드 실패:",O),yn.error("PDF 다운로드에 실패했습니다.")}},M=async()=>{if(window.confirm("⚠️ 모든 리포트 데이터가 삭제됩니다. 정말로 데이터베이스를 리셋하시겠습니까?"))try{await(await hs(async()=>{const{default:O}=await Promise.resolve().then(()=>NQe);return{default:O}},void 0)).default.getInstance().resetDatabase(),localStorage.removeItem("ai_health_reports"),alert("✅ 데이터베이스가 리셋되었습니다. 페이지를 새로고침합니다."),window.location.reload()}catch(k){console.error("데이터베이스 리셋 실패:",k),alert("데이터베이스 리셋에 실패했습니다. 페이지를 새로고침해주세요."),window.location.reload()}};return x?f.jsx("div",{className:"min-h-screen bg-black p-4",children:f.jsx("div",{className:"max-w-6xl mx-auto",children:f.jsx(a6,{report:x,onBack:E,className:"text-white"})})}):f.jsx("div",{className:"min-h-screen bg-black p-4",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(At,{variant:"ghost",onClick:e,className:"text-gray-400 hover:text-white",children:"← 홈으로"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-white",children:"건강 리포트 히스토리"}),f.jsx("p",{className:"text-gray-400",children:"저장된 건강 분석 리포트를 확인하세요"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(At,{variant:"outline",size:"sm",onClick:B,disabled:a||t.length===0,children:[f.jsx(vh,{className:"w-4 h-4 mr-2"}),"내보내기"]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"file",accept:".json",onChange:D,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),f.jsxs(At,{variant:"outline",size:"sm",children:[f.jsx(Jue,{className:"w-4 h-4 mr-2"}),"가져오기"]})]}),f.jsxs(At,{variant:"destructive",size:"sm",onClick:M,className:"text-xs",title:"개발/디버깅 용도 - 모든 데이터 삭제",children:[f.jsx(cP,{className:"w-4 h-4 mr-2"}),"DB 리셋"]})]})]}),i&&f.jsxs(gN,{className:"mb-4",variant:"destructive",children:[f.jsx(s0,{className:"h-4 w-4"}),f.jsxs(pN,{children:[i,f.jsx(At,{variant:"ghost",size:"sm",onClick:c,className:"ml-2",children:"닫기"})]})]}),n&&f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsx(ct,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-400",children:"총 리포트"}),f.jsx("p",{className:"text-2xl font-bold text-white",children:n.totalReports})]}),f.jsx(Us,{className:"w-8 h-8 text-blue-400"})]})})}),f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsx(ct,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-400",children:"평균 점수"}),f.jsx("p",{className:"text-2xl font-bold text-white",children:n.averageScore})]}),f.jsx(l0,{className:"w-8 h-8 text-green-400"})]})})}),f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsx(ct,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-400",children:"최근 측정"}),f.jsx("p",{className:"text-sm font-medium text-white",children:n.latestReport?yB(new Date(n.latestReport.timestamp),"MM/dd HH:mm",{locale:r6}):"없음"})]}),f.jsx(Co,{className:"w-8 h-8 text-purple-400"})]})})}),f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsx(ct,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-400",children:"저장 용량"}),f.jsxs("p",{className:"text-sm font-medium text-white",children:[(n.storageUsed/1024/1024).toFixed(1)," MB"]})]}),f.jsx($l,{className:"w-8 h-8 text-orange-400"})]})})})]}),f.jsx(EQe,{onViewReport:T,onDownloadPDF:R,className:"bg-gray-900 border-gray-700 text-white"})]})})},MQe=({reportId:r,onBack:e,onEdit:t})=>{const{currentReport:n,isLoading:a,error:i,loadReport:s,clearError:o}=i6();return K.useEffect(()=>{s(r)},[r,s]),a?f.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"리포트 로딩 중..."})]})}):i?f.jsx("div",{className:"min-h-screen bg-white p-4",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs(gN,{variant:"destructive",className:"mb-4",children:[f.jsx(da,{className:"h-4 w-4"}),f.jsxs(pN,{children:[i,f.jsx(At,{variant:"ghost",size:"sm",onClick:o,className:"ml-2",children:"닫기"})]})]}),f.jsxs(At,{onClick:e,variant:"outline",children:[f.jsx(o0,{className:"w-4 h-4 mr-2"}),"뒤로 가기"]})]})}):n?f.jsx(a6,{report:n,onBack:e,isCurrentAnalysis:!1,showSaveButton:!1,showShareButton:!0,onShare:async()=>{const l={title:`${n.personalInfo.name}님의 건강 리포트`,text:`건강 점수: ${n.analysisResult.overallHealth.score}점`,url:window.location.href};if(navigator.share)try{await navigator.share(l)}catch{console.log("공유 취소됨")}else await navigator.clipboard.writeText(`${l.title}
${l.text}
${l.url}`),alert("클립보드에 복사되었습니다!")}}):f.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"리포트를 찾을 수 없습니다"}),f.jsxs(At,{onClick:e,variant:"outline",children:[f.jsx(o0,{className:"w-4 h-4 mr-2"}),"뒤로 가기"]})]})})},RQe=({onBack:r})=>{const{reports:e,isLoading:t,error:n}=i6(),[a,i]=K.useState("30d"),[s,o]=K.useState("line"),[l,c]=K.useState("overall"),u=K.useMemo(()=>{const y=new Date;let x;switch(a){case"7d":x=__(y,7);break;case"30d":x=__(y,30);break;case"90d":x=__(y,90);break;case"1y":x=__(y,365);break;default:return e}return e.filter(b=>fHe(new Date(b.timestamp),x))},[e,a]),h=K.useMemo(()=>u.sort((y,x)=>y.timestamp-x.timestamp).map(y=>({date:yB(new Date(y.timestamp),"MM/dd",{locale:r6}),timestamp:y.timestamp,overallScore:y.analysisResult.overallHealth.score,mentalHealth:y.analysisResult.detailedAnalysis.mentalHealth.score,physicalHealth:y.analysisResult.detailedAnalysis.physicalHealth.score,stressLevel:y.analysisResult.detailedAnalysis.stressLevel.score,reportId:y.id})),[u]),d=K.useMemo(()=>{if(h.length<2)return[];const y=[],x=h[h.length-1],b=h[h.length-2],S=x.overallScore-b.overallScore;Math.abs(S)>5&&y.push({type:S>0?"improvement":"decline",title:S>0?"전체 건강 점수 개선":"전체 건강 점수 하락",description:`이전 측정 대비 ${Math.abs(S).toFixed(1)}점 ${S>0?"상승":"하락"}했습니다.`,value:x.overallScore,trend:S});const _=x.mentalHealth-b.mentalHealth;Math.abs(_)>5&&y.push({type:_>0?"improvement":"decline",title:_>0?"정신건강 개선":"정신건강 주의",description:`정신건강 점수가 ${Math.abs(_).toFixed(1)}점 ${_>0?"개선":"하락"}되었습니다.`,value:x.mentalHealth,trend:_}),x.stressLevel<60&&y.push({type:"warning",title:"스트레스 레벨 주의",description:"최근 스트레스 지수가 높습니다. 휴식과 스트레스 관리가 필요합니다.",value:x.stressLevel});const C=h.slice(-5).map(B=>B.overallScore);return C.reduce((B,D)=>B+Math.pow(D-C.reduce((T,E)=>T+E)/C.length,2),0)/C.length<25&&y.push({type:"stable",title:"안정적인 건강 상태",description:"최근 건강 상태가 일관되게 유지되고 있습니다."}),y},[h]),A=K.useMemo(()=>{if(h.length===0)return null;const y=h.map(_=>_.overallScore),x=h.map(_=>_.mentalHealth),b=h.map(_=>_.physicalHealth),S=h.map(_=>_.stressLevel);return{averageScore:y.reduce((_,C)=>_+C,0)/y.length,highestScore:Math.max(...y),lowestScore:Math.min(...y),improvementRate:h.length>1?(y[y.length-1]-y[0])/y[0]*100:0,mentalAverage:x.reduce((_,C)=>_+C,0)/x.length,physicalAverage:b.reduce((_,C)=>_+C,0)/b.length,stressAverage:S.reduce((_,C)=>_+C,0)/S.length,totalMeasurements:h.length}},[h]),g={overall:"#3b82f6",mental:"#8b5cf6",physical:"#10b981",stress:"#f59e0b"},p=y=>{switch(y){case"improvement":return f.jsx($l,{className:"w-5 h-5 text-green-500"});case"decline":return f.jsx(rhe,{className:"w-5 h-5 text-red-500"});case"warning":return f.jsx(s0,{className:"w-5 h-5 text-yellow-500"});case"stable":return f.jsx(Hs,{className:"w-5 h-5 text-blue-500"});default:return f.jsx(uM,{className:"w-5 h-5 text-gray-500"})}},v=y=>{switch(y){case"improvement":return"border-green-200 bg-green-50";case"decline":return"border-red-200 bg-red-50";case"warning":return"border-yellow-200 bg-yellow-50";case"stable":return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},m=()=>{if(h.length===0)return f.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:f.jsxs("div",{className:"text-center",children:[f.jsx(l0,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"선택한 기간에 데이터가 없습니다."})]})});const y=s==="line"?Pc:s==="bar"?IW:fP;return f.jsx(ls,{width:"100%",height:400,children:f.jsxs(y,{data:h,margin:{top:5,right:30,left:20,bottom:5},children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"date"}),f.jsx(lo,{domain:[0,100]}),f.jsx(io,{formatter:(x,b)=>[`${x.toFixed(1)}점`,b==="overallScore"?"전체 점수":b==="mentalHealth"?"정신건강":b==="physicalHealth"?"신체건강":"스트레스 관리"],labelFormatter:x=>`측정일: ${x}`}),f.jsx(J1,{}),s==="area"?f.jsx(f.Fragment,{children:f.jsx(o1,{type:"monotone",dataKey:l==="overall"?"overallScore":l==="mental"?"mentalHealth":l==="physical"?"physicalHealth":"stressLevel",stroke:g[l],fill:g[l],fillOpacity:.3,name:l==="overall"?"전체 점수":l==="mental"?"정신건강":l==="physical"?"신체건강":"스트레스 관리"})}):s==="line"?f.jsxs(f.Fragment,{children:[l==="overall"&&f.jsx(Pa,{type:"monotone",dataKey:"overallScore",stroke:g.overall,strokeWidth:2,name:"전체 점수"}),l==="mental"&&f.jsx(Pa,{type:"monotone",dataKey:"mentalHealth",stroke:g.mental,strokeWidth:2,name:"정신건강"}),l==="physical"&&f.jsx(Pa,{type:"monotone",dataKey:"physicalHealth",stroke:g.physical,strokeWidth:2,name:"신체건강"}),l==="stress"&&f.jsx(Pa,{type:"monotone",dataKey:"stressLevel",stroke:g.stress,strokeWidth:2,name:"스트레스 관리"})]}):f.jsx(f.Fragment,{children:f.jsx(EW,{dataKey:l==="overall"?"overallScore":l==="mental"?"mentalHealth":l==="physical"?"physicalHealth":"stressLevel",fill:g[l],name:l==="overall"?"전체 점수":l==="mental"?"정신건강":l==="physical"?"신체건강":"스트레스 관리"})})]})})};return t?f.jsx("div",{className:"min-h-full bg-black p-6 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),f.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"데이터 분석 중..."}),f.jsx("p",{className:"text-gray-400",children:"건강 데이터를 분석하고 있습니다."})]})}):n?f.jsx("div",{className:"min-h-full bg-black p-6 flex items-center justify-center",children:f.jsxs(gN,{className:"max-w-md",children:[f.jsx(s0,{className:"h-4 w-4"}),f.jsxs(pN,{children:["데이터를 불러오는 중 오류가 발생했습니다: ",n]})]})}):f.jsx("div",{className:"min-h-full bg-black p-6",style:{backgroundColor:"#000000"},children:f.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs(At,{variant:"ghost",size:"sm",onClick:r,className:"text-white hover:bg-gray-800",children:[f.jsx(o0,{className:"w-4 h-4 mr-2"}),"뒤로가기"]}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-white",children:"건강 트렌드 분석"}),f.jsx("p",{className:"text-gray-400",children:"시간에 따른 건강 데이터 변화를 분석합니다"})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(Wg,{value:a,onValueChange:y=>i(y),children:[f.jsx(CA,{className:"w-32",children:f.jsx(qg,{})}),f.jsxs(BA,{children:[f.jsx(Jn,{value:"7d",children:"최근 7일"}),f.jsx(Jn,{value:"30d",children:"최근 30일"}),f.jsx(Jn,{value:"90d",children:"최근 90일"}),f.jsx(Jn,{value:"1y",children:"최근 1년"}),f.jsx(Jn,{value:"all",children:"전체 기간"})]})]}),f.jsxs(At,{variant:"outline",size:"sm",children:[f.jsx(vh,{className:"w-4 h-4 mr-2"}),"내보내기"]})]})]}),A&&f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[f.jsxs(Ye,{children:[f.jsxs(wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(St,{className:"text-sm font-medium",children:"평균 점수"}),f.jsx(l0,{className:"h-4 w-4 text-blue-500"})]}),f.jsxs(ct,{children:[f.jsx("div",{className:"text-2xl font-bold",children:A.averageScore.toFixed(1)}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.improvementRate>0?"+":"",A.improvementRate.toFixed(1),"% 변화"]})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(St,{className:"text-sm font-medium",children:"최고 점수"}),f.jsx(ehe,{className:"h-4 w-4 text-green-500"})]}),f.jsxs(ct,{children:[f.jsx("div",{className:"text-2xl font-bold",children:A.highestScore}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"개인 최고 기록"})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(St,{className:"text-sm font-medium",children:"측정 횟수"}),f.jsx(ho,{className:"h-4 w-4 text-purple-500"})]}),f.jsxs(ct,{children:[f.jsx("div",{className:"text-2xl font-bold",children:A.totalMeasurements}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"선택한 기간 내"})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[f.jsx(St,{className:"text-sm font-medium",children:"스트레스 평균"}),f.jsx(mh,{className:"h-4 w-4 text-yellow-500"})]}),f.jsxs(ct,{children:[f.jsx("div",{className:"text-2xl font-bold",children:A.stressAverage.toFixed(1)}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"스트레스 관리 점수"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsx("div",{className:"lg:col-span-2",children:f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(St,{children:"건강 점수 추이"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(Wg,{value:l,onValueChange:y=>c(y),children:[f.jsx(CA,{className:"w-32",children:f.jsx(qg,{})}),f.jsxs(BA,{children:[f.jsx(Jn,{value:"overall",children:"전체 점수"}),f.jsx(Jn,{value:"mental",children:"정신건강"}),f.jsx(Jn,{value:"physical",children:"신체건강"}),f.jsx(Jn,{value:"stress",children:"스트레스"})]})]}),f.jsxs(Wg,{value:s,onValueChange:y=>o(y),children:[f.jsx(CA,{className:"w-24",children:f.jsx(qg,{})}),f.jsxs(BA,{children:[f.jsx(Jn,{value:"line",children:"선 그래프"}),f.jsx(Jn,{value:"bar",children:"막대 그래프"}),f.jsx(Jn,{value:"area",children:"영역 그래프"})]})]})]})]})}),f.jsx(ct,{children:m()})]})}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(c0,{className:"w-5 h-5"}),"AI 인사이트"]})}),f.jsx(ct,{className:"space-y-3",children:d.length===0?f.jsx("p",{className:"text-gray-500 text-sm",children:"더 많은 데이터가 필요합니다. 정기적으로 측정하여 트렌드를 확인하세요."}):d.map((y,x)=>f.jsx("div",{className:`p-3 rounded-lg border ${v(y.type)}`,children:f.jsxs("div",{className:"flex items-start gap-3",children:[p(y.type),f.jsxs("div",{className:"flex-1",children:[f.jsx("h4",{className:"font-medium text-sm",children:y.title}),f.jsx("p",{className:"text-xs text-gray-600 mt-1",children:y.description}),y.value&&f.jsxs("div",{className:"mt-2",children:[f.jsx(Hx,{value:y.value,className:"h-2"}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[y.value.toFixed(1),"점"]})]})]})]})},x))})]}),A&&f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(the,{className:"w-5 h-5"}),"영역별 평균"]})}),f.jsxs(ct,{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Ba,{className:"w-4 h-4 text-purple-500"}),f.jsx("span",{className:"text-sm",children:"정신건강"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium",children:A.mentalAverage.toFixed(1)}),f.jsx(Hx,{value:A.mentalAverage,className:"w-16 h-2"})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(gA,{className:"w-4 h-4 text-red-500"}),f.jsx("span",{className:"text-sm",children:"신체건강"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium",children:A.physicalAverage.toFixed(1)}),f.jsx(Hx,{value:A.physicalAverage,className:"w-16 h-2"})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(mh,{className:"w-4 h-4 text-yellow-500"}),f.jsx("span",{className:"text-sm",children:"스트레스 관리"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-sm font-medium",children:A.stressAverage.toFixed(1)}),f.jsx(Hx,{value:A.stressAverage,className:"w-16 h-2"})]})]})]})]})]})]})]})})},N_={delta:{range:"0.5-4 Hz",name:"델타파",description:"깊은 수면, 무의식 상태"},theta:{range:"4-8 Hz",name:"세타파",description:"명상, 창의성, REM 수면"},alpha:{range:"8-13 Hz",name:"알파파",description:"이완, 집중, 안정 상태"},beta:{range:"13-30 Hz",name:"베타파",description:"각성, 집중, 논리적 사고"},gamma:{range:"30-100 Hz",name:"감마파",description:"고차원 인지, 의식 통합"}},LQe=({analysisResult:r,measurementData:e,onBack:t})=>{var g,p,v,m,y,x,b,S,_,C;const[n,a]=K.useState("all"),[i,s]=K.useState("all"),o=K.useMemo(()=>{var T,E,R;if(!(e!=null&&e.eegData)||e.eegData.length===0)return[];const w=e.eegData,B=Math.min(w.length,1500),D=[];for(let M=0;M<B;M++){const k=M/25,O=w[M]||[0,0],Q=O[0]||0,H=O[1]||0,W=Math.abs(Q*.1+H*.1)+Math.random()*5,te=Math.abs(Q*.2+H*.2)+Math.random()*8,ee=Math.abs(Q*.3+H*.3)+Math.random()*12,j=Math.abs(Q*.25+H*.25)+Math.random()*10,G=Math.abs(Q*.05+H*.05)+Math.random()*3,Y=((T=e.eegMetrics)==null?void 0:T.concentration)||0,Z=((E=e.eegMetrics)==null?void 0:E.relaxation)||0,de=((R=e.eegMetrics)==null?void 0:R.stress)||0;D.push({time:`${Math.floor(k/60)}:${Math.floor(k%60).toString().padStart(2,"0")}`,timeValue:k,delta:Math.max(0,W),theta:Math.max(0,te),alpha:Math.max(0,ee),beta:Math.max(0,j),gamma:Math.max(0,G),attention:Y+Math.sin(k*.1)*5,meditation:Z+Math.sin(k*.08)*5,stress:de+Math.sin(k*.12)*5,rawEEG:(Q+H)/2})}return D},[e]),l=K.useMemo(()=>{const w={delta:o.reduce((B,D)=>B+D.delta,0)/o.length,theta:o.reduce((B,D)=>B+D.theta,0)/o.length,alpha:o.reduce((B,D)=>B+D.alpha,0)/o.length,beta:o.reduce((B,D)=>B+D.beta,0)/o.length,gamma:o.reduce((B,D)=>B+D.gamma,0)/o.length};return Object.entries(w).map(([B,D])=>({band:N_[B].name,value:Math.round(D*10)/10,range:N_[B].range,description:N_[B].description,percentage:Math.round(D/Object.values(w).reduce((T,E)=>T+E,0)*100)}))},[o]),c=K.useMemo(()=>{const w=o.reduce((T,E)=>T+E.attention,0)/o.length,B=o.reduce((T,E)=>T+E.meditation,0)/o.length,D=o.reduce((T,E)=>T+E.stress,0)/o.length;return[{name:"집중력",value:Math.round(w),color:"#8884d8",description:"주의력과 집중 상태"},{name:"명상 상태",value:Math.round(B),color:"#82ca9d",description:"이완과 명상 깊이"},{name:"스트레스",value:Math.round(D),color:"#ffc658",description:"정신적 긴장 수준"},{name:"정신 안정성",value:Math.round((B-D+100)/2),color:"#ff7300",description:"전반적 정신 건강"}]},[o]),u=K.useMemo(()=>{var M,k,O;const w=((M=l.find(Q=>Q.band==="알파파"))==null?void 0:M.value)||0,B=((k=l.find(Q=>Q.band==="베타파"))==null?void 0:k.value)||0,D=((O=l.find(Q=>Q.band==="세타파"))==null?void 0:O.value)||0;let T="",E="",R=[];return w>B&&w>D?(T="이완 상태",E="알파파가 우세한 상태로, 편안하고 집중된 상태입니다.",R=["현재 상태를 유지하세요","규칙적인 명상을 통해 알파파를 강화하세요"]):B>w?(T="각성 상태",E="베타파가 우세한 상태로, 활발한 정신 활동 상태입니다.",R=["적절한 휴식을 취하세요","스트레스 관리에 주의하세요"]):(T="창의적 상태",E="세타파가 우세한 상태로, 창의적이고 직관적인 상태입니다.",R=["창의적 활동을 시도해보세요","충분한 수면을 취하세요"]),{dominantState:T,stateDescription:E,recommendations:R}},[l]),h=K.useMemo(()=>{if(n==="all")return o;const B=(n==="1min"?1:n==="5min"?5:10)*60;return o.slice(-B)},[o,n]),d=w=>w>=80?"text-green-600":w>=60?"text-yellow-600":"text-red-600",A=w=>w>=80?"bg-green-100":w>=60?"bg-yellow-100":"bg-red-100";return o.length===0?f.jsx("div",{className:"min-h-full bg-black p-6 pt-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsx("div",{className:"flex items-center justify-between mb-6",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(At,{variant:"outline",onClick:t,className:"flex items-center gap-2",children:"← 돌아가기"}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"EEG 상세 분석"})]})}),f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsxs(ct,{className:"p-8 text-center",children:[f.jsx(Ba,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"EEG 데이터를 찾을 수 없습니다"}),f.jsx("p",{className:"text-gray-400",children:"측정된 EEG 데이터가 없거나 불완전합니다. 새로운 측정을 진행해주세요."})]})})]})}):f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-100 p-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(At,{variant:"ghost",onClick:t,className:"text-gray-600 hover:text-gray-800",children:"← 돌아가기"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:f.jsx(Ba,{className:"w-6 h-6 text-purple-600"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"뇌파(EEG) 분석"}),f.jsx("p",{className:"text-gray-600",children:"뇌파 신호와 정신 건강 상태를 분석합니다"})]})]})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs(Gt,{variant:"outline",className:"bg-purple-50",children:[f.jsx(ho,{className:"w-4 h-4 mr-1"}),"실시간 분석"]})})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:c.map((w,B)=>f.jsx(Ye,{className:`${A(w.value)} border-l-4 border-l-purple-500`,children:f.jsx(ct,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:w.name}),f.jsx("p",{className:`text-2xl font-bold ${d(w.value)}`,children:w.value}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:w.description})]}),f.jsx("div",{className:"w-12 h-12 rounded-full bg-white/50 flex items-center justify-center",children:f.jsx("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:w.color}})})]})})},B))}),f.jsxs(Ye,{className:"mb-6",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(c0,{className:"w-5 h-5 text-purple-600"}),"현재 뇌파 상태 분석"]})}),f.jsx(ct,{children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:"우세 상태"}),f.jsx("p",{className:"text-xl font-bold text-purple-600",children:u.dominantState}),f.jsx("p",{className:"text-sm text-gray-600 mt-2",children:u.stateDescription})]}),f.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"권장 사항"}),f.jsx("ul",{className:"space-y-1",children:(u.recommendations||[]).map((w,B)=>f.jsxs("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[f.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),w]},B))})]}),f.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"정신 건강 점수"}),f.jsxs("p",{className:`text-2xl font-bold ${d(((p=(g=r==null?void 0:r.detailedAnalysis)==null?void 0:g.mentalHealth)==null?void 0:p.score)||0)}`,children:[((m=(v=r==null?void 0:r.detailedAnalysis)==null?void 0:v.mentalHealth)==null?void 0:m.score)||0,"/100"]}),f.jsx("p",{className:"text-sm text-gray-600 mt-2",children:((x=(y=r==null?void 0:r.detailedAnalysis)==null?void 0:y.mentalHealth)==null?void 0:x.status)||"분석 중..."})]})]})})]}),f.jsxs(Ck,{defaultValue:"frequency",className:"space-y-4",children:[f.jsxs(vN,{className:"grid w-full grid-cols-4",children:[f.jsx(sl,{value:"frequency",children:"주파수 분석"}),f.jsx(sl,{value:"timeseries",children:"시계열 분석"}),f.jsx(sl,{value:"mental",children:"정신 상태"}),f.jsx(sl,{value:"raw",children:"원시 신호"})]}),f.jsxs(ol,{value:"frequency",className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(BW,{className:"w-5 h-5 text-blue-600"}),"주파수 대역별 분포"]})}),f.jsx(ct,{children:f.jsx(ls,{width:"100%",height:300,children:f.jsxs(IW,{data:l,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"band"}),f.jsx(lo,{}),f.jsx(io,{formatter:(w,B)=>[`${w} µV`,B],labelFormatter:w=>{const B=l.find(D=>D.band===w);return B?`${B.band} (${B.range})`:w}}),f.jsx(EW,{dataKey:"value",fill:"#8884d8"})]})})})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx($l,{className:"w-5 h-5 text-green-600"}),"뇌파 대역별 비율"]})}),f.jsx(ct,{children:f.jsx("div",{className:"space-y-4",children:l.map((w,B)=>f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-sm font-medium",children:w.band}),f.jsxs("span",{className:"text-sm text-gray-600",children:[w.percentage,"%"]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:f.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${w.percentage}%`}})}),f.jsx("p",{className:"text-xs text-gray-500",children:w.description})]},B))})})]})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsx(St,{children:"주파수 대역 상세 정보"})}),f.jsx(ct,{children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(N_).map(([w,B])=>{const D=l.find(T=>T.band===B.name);return f.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[f.jsx("h4",{className:"font-semibold text-gray-800",children:B.name}),f.jsx("p",{className:"text-sm text-gray-600 mb-2",children:B.range}),f.jsx("p",{className:"text-xs text-gray-500 mb-2",children:B.description}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[(D==null?void 0:D.value)||0," µV"]}),f.jsxs(Gt,{variant:"outline",className:"text-xs",children:[(D==null?void 0:D.percentage)||0,"%"]})]})]},w)})})})]})]}),f.jsx(ol,{value:"timeseries",className:"space-y-4",children:f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(ho,{className:"w-5 h-5 text-blue-600"}),"시간대별 뇌파 변화"]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("select",{value:n,onChange:w=>a(w.target.value),className:"px-3 py-1 border rounded-md text-sm",children:[f.jsx("option",{value:"1min",children:"최근 1분"}),f.jsx("option",{value:"5min",children:"최근 5분"}),f.jsx("option",{value:"10min",children:"최근 10분"}),f.jsx("option",{value:"all",children:"전체"})]})})]})}),f.jsx(ct,{children:f.jsx(ls,{width:"100%",height:400,children:f.jsxs(Pc,{data:h,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{}),f.jsx(io,{}),f.jsx(J1,{}),f.jsx(Pa,{type:"monotone",dataKey:"alpha",stroke:"#8884d8",name:"알파파",strokeWidth:2}),f.jsx(Pa,{type:"monotone",dataKey:"beta",stroke:"#82ca9d",name:"베타파",strokeWidth:2}),f.jsx(Pa,{type:"monotone",dataKey:"theta",stroke:"#ffc658",name:"세타파",strokeWidth:2}),f.jsx(Pa,{type:"monotone",dataKey:"delta",stroke:"#ff7300",name:"델타파",strokeWidth:2}),f.jsx(Pa,{type:"monotone",dataKey:"gamma",stroke:"#00ff00",name:"감마파",strokeWidth:2})]})})})]})}),f.jsxs(ol,{value:"mental",className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(Ba,{className:"w-5 h-5 text-purple-600"}),"정신 상태 지표"]})}),f.jsx(ct,{children:f.jsx(ls,{width:"100%",height:300,children:f.jsxs(ohe,{data:c,children:[f.jsx(lhe,{}),f.jsx(che,{dataKey:"name"}),f.jsx(uhe,{angle:90,domain:[0,100]}),f.jsx(hhe,{name:"정신 상태",dataKey:"value",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.3,strokeWidth:2}),f.jsx(io,{})]})})})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx($l,{className:"w-5 h-5 text-green-600"}),"시간대별 정신 상태 변화"]})}),f.jsx(ct,{children:f.jsx(ls,{width:"100%",height:300,children:f.jsxs(fP,{data:h,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{}),f.jsx(io,{}),f.jsx(J1,{}),f.jsx(o1,{type:"monotone",dataKey:"attention",stackId:"1",stroke:"#8884d8",fill:"#8884d8",name:"집중력"}),f.jsx(o1,{type:"monotone",dataKey:"meditation",stackId:"2",stroke:"#82ca9d",fill:"#82ca9d",name:"명상 상태"}),f.jsx(o1,{type:"monotone",dataKey:"stress",stackId:"3",stroke:"#ffc658",fill:"#ffc658",name:"스트레스"})]})})})]})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsx(St,{children:"정신 건강 상세 분석"})}),f.jsx(ct,{children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"분석 결과"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[f.jsx("p",{className:"text-sm font-medium text-blue-800",children:"집중력 상태"}),f.jsxs("p",{className:"text-xs text-blue-600",children:["평균 집중력: ",o.length>0?Math.round(o.reduce((w,B)=>w+B.attention,0)/o.length):0,"점"]})]}),f.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[f.jsx("p",{className:"text-sm font-medium text-green-800",children:"명상 깊이"}),f.jsxs("p",{className:"text-xs text-green-600",children:["평균 명상 상태: ",o.length>0?Math.round(o.reduce((w,B)=>w+B.meditation,0)/o.length):0,"점"]})]}),f.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg",children:[f.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"스트레스 수준"}),f.jsxs("p",{className:"text-xs text-yellow-600",children:["평균 스트레스: ",o.length>0?Math.round(o.reduce((w,B)=>w+B.stress,0)/o.length):0,"점"]})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"개선 방안"}),f.jsxs("div",{className:"space-y-2",children:[(((S=(b=r==null?void 0:r.detailedAnalysis)==null?void 0:b.mentalHealth)==null?void 0:S.recommendations)||[]).map((w,B)=>f.jsxs("div",{className:"flex items-start gap-2 p-2 bg-gray-50 rounded",children:[f.jsx(uM,{className:"w-4 h-4 text-blue-500 mt-0.5"}),f.jsx("p",{className:"text-sm text-gray-700",children:w})]},B)),(!((C=(_=r==null?void 0:r.detailedAnalysis)==null?void 0:_.mentalHealth)!=null&&C.recommendations)||r.detailedAnalysis.mentalHealth.recommendations.length===0)&&f.jsxs("div",{className:"flex items-start gap-2 p-2 bg-gray-50 rounded",children:[f.jsx(uM,{className:"w-4 h-4 text-blue-500 mt-0.5"}),f.jsx("p",{className:"text-sm text-gray-700",children:"개선 방안을 분석 중입니다..."})]})]})]})]})})]})]}),f.jsx(ol,{value:"raw",className:"space-y-4",children:f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(mh,{className:"w-5 h-5 text-yellow-600"}),"원시 뇌파 신호"]})}),f.jsxs(ct,{children:[f.jsx(ls,{width:"100%",height:400,children:f.jsxs(Pc,{data:h,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{}),f.jsx(io,{formatter:w=>[`${w.toFixed(2)} µV`,"뇌파 신호"]}),f.jsx(Pa,{type:"monotone",dataKey:"rawEEG",stroke:"#ff6b6b",strokeWidth:1,dot:!1,name:"원시 EEG"})]})}),f.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"신호 품질 정보"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600",children:"샘플링 주파수"}),f.jsx("p",{className:"font-medium",children:"256 Hz"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600",children:"신호 범위"}),f.jsx("p",{className:"font-medium",children:"±100 µV"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600",children:"측정 시간"}),f.jsx("p",{className:"font-medium",children:"60초"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600",children:"신호 품질"}),f.jsx(Gt,{variant:"outline",className:"bg-green-50 text-green-700",children:"양호"})]})]})]})]})]})})]})]})})},PQe={resting:{range:"50-60 bpm",name:"안정시",description:"휴식 상태의 심박수",color:"#4ade80"},light:{range:"60-70 bpm",name:"가벼운 활동",description:"일상 활동 시 심박수",color:"#60a5fa"},moderate:{range:"70-85 bpm",name:"보통 활동",description:"중간 강도 활동",color:"#fbbf24"},vigorous:{range:"85-100 bpm",name:"격렬한 활동",description:"고강도 활동",color:"#f87171"},maximum:{range:"100+ bpm",name:"최대 강도",description:"최대 운동 강도",color:"#dc2626"}},kQe=({analysisResult:r,measurementData:e,onBack:t})=>{var g,p,v,m;const[n,a]=K.useState("all"),[i,s]=K.useState("all"),o=K.useMemo(()=>{var T,E,R;if(console.log("PPG Analysis - measurementData:",e),console.log("PPG Analysis - ppgData:",e==null?void 0:e.ppgData),!(e!=null&&e.ppgData))return console.log("PPG Analysis - No ppgData found"),[];const y=e.ppgData,x=y.red||[],b=y.ir||[];if(console.log("PPG Analysis - Red data length:",x.length),console.log("PPG Analysis - IR data length:",b.length),x.length===0&&b.length===0)return console.log("PPG Analysis - No red or IR data found"),[];const S=Math.max(x.length,b.length),_=Math.min(S,1500);console.log("PPG Analysis - Processing",_,"data points");const C=[],w=((T=e.ppgMetrics)==null?void 0:T.bpm)||72,B=((E=e.ppgMetrics)==null?void 0:E.spo2)||98,D=((R=e.ppgMetrics)==null?void 0:R.hrv)||40;console.log("PPG Analysis - Base metrics:",{baseBPM:w,baseSpO2:B,baseHRV:D});for(let M=0;M<_;M++){const k=M/25,O=x[M]||0,Q=b[M]||0,H=Math.sin(k*.1)*3+Math.random()*2,W=Math.sin(k*.08)*1+Math.random()*.5,te=Math.sin(k*.15)*5+Math.random()*3;C.push({time:`${Math.floor(k/60)}:${Math.floor(k%60).toString().padStart(2,"0")}`,timeValue:k,heartRate:Math.max(50,Math.min(120,w+H)),hrv:Math.max(10,D+te),spo2:Math.max(90,Math.min(100,B+W)),systolic:115+Math.sin(k*.12)*8+Math.random()*4,diastolic:75+Math.sin(k*.12)*6+Math.random()*3,rawPPG:O,pulseWave:(O+Q)/2,perfusionIndex:1.2+Math.sin(k*.1)*.2+Math.random()*.1})}return console.log("PPG Analysis - Generated",C.length,"analysis points"),C},[e]);if(o.length===0)return f.jsx("div",{className:"min-h-full bg-black p-6 pt-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsx("div",{className:"flex items-center justify-between mb-6",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(At,{variant:"outline",onClick:t,className:"flex items-center gap-2 bg-gray-800 border-gray-600 text-white hover:bg-gray-700",children:"← 돌아가기"}),f.jsx("h1",{className:"text-2xl font-bold text-white",children:"PPG 상세 분석"})]})}),f.jsx(Ye,{className:"bg-gray-900 border-gray-700",children:f.jsxs(ct,{className:"p-8 text-center",children:[f.jsx(gA,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"PPG 데이터를 찾을 수 없습니다"}),f.jsx("p",{className:"text-gray-400 mb-4",children:"측정된 PPG 데이터가 없거나 불완전합니다. 새로운 측정을 진행해주세요."}),f.jsxs("div",{className:"text-xs text-gray-500 mt-4 p-4 bg-gray-800 rounded",children:[f.jsx("p",{children:"디버깅 정보:"}),f.jsxs("p",{children:["PPG 데이터: ",e!=null&&e.ppgData?" 존재":"없음"]}),f.jsxs("p",{children:["Red 데이터: ",((p=(g=e==null?void 0:e.ppgData)==null?void 0:g.red)==null?void 0:p.length)||0,"개"]}),f.jsxs("p",{children:["IR 데이터: ",((m=(v=e==null?void 0:e.ppgData)==null?void 0:v.ir)==null?void 0:m.length)||0,"개"]})]})]})})]})});const l=K.useMemo(()=>{const y=o.reduce((C,w)=>C+w.heartRate,0)/o.length,x=o.reduce((C,w)=>C+w.hrv,0)/o.length,b=o.reduce((C,w)=>C+w.spo2,0)/o.length,S=o.reduce((C,w)=>C+w.systolic,0)/o.length,_=o.reduce((C,w)=>C+w.diastolic,0)/o.length;return[{name:"심박수",value:Math.round(y),unit:"bpm",color:"#ef4444",description:"분당 심장 박동 수",normal:"60-100 bpm",status:y>=60&&y<=100?"정상":y<60?"서맥":"빈맥"},{name:"심박변이도",value:Math.round(x*10)/10,unit:"ms",color:"#10b981",description:"심박 간격의 변화",normal:"20-50 ms",status:x>=20?"양호":"주의"},{name:"산소포화도",value:Math.round(b*10)/10,unit:"%",color:"#3b82f6",description:"혈중 산소 농도",normal:"95-100%",status:b>=95?"정상":"저산소증"},{name:"혈압",value:`${Math.round(S)}/${Math.round(_)}`,unit:"mmHg",color:"#f59e0b",description:"혈관 내 압력",normal:"120/80 mmHg",status:S<=120&&_<=80?"정상":"주의"}]},[o]),c=K.useMemo(()=>Object.entries(PQe).map(([x,b])=>{const[S,_]=b.range.split("-").map(w=>parseInt(w.replace(/[^0-9]/g,""))),C=o.filter(w=>x==="maximum"?w.heartRate>=S:w.heartRate>=S&&w.heartRate<_).length;return{zone:b.name,count:C,percentage:Math.round(C/o.length*100),color:b.color,description:b.description}}),[o]),u=K.useMemo(()=>{const y=o.reduce((_,C)=>_+C.perfusionIndex,0)/o.length,x=o.reduce((_,C,w)=>w===0?_:_+Math.abs(C.rawPPG-o[w-1].rawPPG),0)/(o.length-1);let b=0,S="";return y>=1&&x<30?(b=90,S="매우 양호한 신호 품질"):y>=.5&&x<50?(b=75,S="양호한 신호 품질"):(b=60,S="보통 신호 품질"),{score:b,description:S,perfusionIndex:Math.round(y*100)/100,signalVariability:Math.round(x*10)/10}},[o]),h=K.useMemo(()=>{if(n==="all")return o;const x=(n==="1min"?1:n==="5min"?5:10)*60;return o.slice(-x)},[o,n]),d=(y,x)=>{switch(x){case"hr":return y>=60&&y<=100?"text-green-600":"text-red-600";case"hrv":return y>=20?"text-green-600":"text-yellow-600";case"spo2":return y>=95?"text-green-600":"text-red-600";default:return"text-gray-600"}},A=(y,x)=>{switch(x){case"hr":return y>=60&&y<=100?"bg-green-100":"bg-red-100";case"hrv":return y>=20?"bg-green-100":"bg-yellow-100";case"spo2":return y>=95?"bg-green-100":"bg-red-100";default:return"bg-gray-100"}};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 p-4",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(At,{variant:"ghost",onClick:t,className:"text-gray-600 hover:text-gray-800",children:"← 돌아가기"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:f.jsx(gA,{className:"w-6 h-6 text-red-600"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"맥파(PPG) 분석"}),f.jsx("p",{className:"text-gray-600",children:"맥파 신호와 심혈관 건강 상태를 분석합니다"})]})]})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs(Gt,{variant:"outline",className:"bg-red-50",children:[f.jsx(ho,{className:"w-4 h-4 mr-1"}),"실시간 분석"]})})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:l.map((y,x)=>f.jsx(Ye,{className:`${A(typeof y.value=="number"?y.value:0,y.name==="심박수"?"hr":y.name==="심박변이도"?"hrv":"spo2")} border-l-4 border-l-red-500`,children:f.jsx(ct,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:y.name}),f.jsxs("p",{className:`text-2xl font-bold ${d(typeof y.value=="number"?y.value:0,y.name==="심박수"?"hr":y.name==="심박변이도"?"hrv":"spo2")}`,children:[y.value," ",y.unit]}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:y.status})]}),f.jsx("div",{className:"w-12 h-12 rounded-full bg-white/50 flex items-center justify-center",children:f.jsx("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:y.color}})})]})})},x))}),f.jsxs(Ye,{className:"mb-6",children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(c0,{className:"w-5 h-5 text-red-600"}),"맥파 신호 품질 분석"]})}),f.jsx(ct,{children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"신호 품질"}),f.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[u.score,"점"]}),f.jsx("p",{className:"text-sm text-gray-600 mt-2",children:u.description})]}),f.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"font-semibold text-pink-800 mb-2",children:"관류 지수"}),f.jsx("p",{className:"text-2xl font-bold text-pink-600",children:u.perfusionIndex}),f.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"혈류 순환 상태"})]}),f.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[f.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"신호 안정성"}),f.jsx("p",{className:"text-2xl font-bold text-orange-600",children:u.signalVariability}),f.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"신호 변동성"})]})]})})]}),f.jsxs(Ck,{defaultValue:"heartrate",className:"space-y-4",children:[f.jsxs(vN,{className:"grid w-full grid-cols-4",children:[f.jsx(sl,{value:"heartrate",children:"심박수 분석"}),f.jsx(sl,{value:"hrv",children:"심박변이도"}),f.jsx(sl,{value:"bloodpressure",children:"혈압 분석"}),f.jsx(sl,{value:"raw",children:"원시 신호"})]}),f.jsxs(ol,{value:"heartrate",className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(gA,{className:"w-5 h-5 text-red-600"}),"심박수 변화"]})}),f.jsxs(ct,{children:[f.jsx("div",{className:"flex items-center gap-2 mb-4",children:f.jsxs("select",{value:n,onChange:y=>a(y.target.value),className:"px-3 py-1 border rounded-md text-sm",children:[f.jsx("option",{value:"1min",children:"최근 1분"}),f.jsx("option",{value:"5min",children:"최근 5분"}),f.jsx("option",{value:"10min",children:"최근 10분"}),f.jsx("option",{value:"all",children:"전체"})]})}),f.jsx(ls,{width:"100%",height:300,children:f.jsxs(Pc,{data:h,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{domain:["dataMin - 10","dataMax + 10"]}),f.jsx(io,{formatter:y=>[`${y} bpm`,"심박수"]}),f.jsx(Pa,{type:"monotone",dataKey:"heartRate",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444",strokeWidth:2,r:3}})]})})]})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx($l,{className:"w-5 h-5 text-blue-600"}),"심박수 구간 분석"]})}),f.jsx(ct,{children:f.jsx(ls,{width:"100%",height:300,children:f.jsxs(dhe,{children:[f.jsx(Ahe,{data:c,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:5,dataKey:"percentage",children:c.map((y,x)=>f.jsx(fhe,{fill:y.color},`cell-${x}`))}),f.jsx(io,{formatter:y=>[`${y}%`,"비율"]}),f.jsx(J1,{})]})})})]})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsx(St,{children:"심박수 구간별 상세 분석"})}),f.jsx(ct,{children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map((y,x)=>f.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:y.color}}),f.jsx("h4",{className:"font-semibold text-gray-800",children:y.zone})]}),f.jsx("p",{className:"text-sm text-gray-600 mb-2",children:y.description}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-lg font-bold text-gray-700",children:[y.percentage,"%"]}),f.jsxs(Gt,{variant:"outline",className:"text-xs",children:[y.count,"회"]})]})]},x))})})]})]}),f.jsx(ol,{value:"hrv",className:"space-y-4",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(ho,{className:"w-5 h-5 text-green-600"}),"심박변이도 변화"]})}),f.jsx(ct,{children:f.jsx(ls,{width:"100%",height:300,children:f.jsxs(fP,{data:h,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{}),f.jsx(io,{formatter:y=>[`${y} ms`,"심박변이도"]}),f.jsx(o1,{type:"monotone",dataKey:"hrv",stroke:"#10b981",fill:"#10b981",fillOpacity:.3})]})})})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(c0,{className:"w-5 h-5 text-purple-600"}),"HRV 분석 지표"]})}),f.jsx(ct,{children:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"RMSSD"}),f.jsxs("p",{className:"text-xl font-bold text-green-600",children:[Math.round(o.reduce((y,x)=>y+x.hrv,0)/o.length)," ms"]}),f.jsx("p",{className:"text-xs text-gray-600",children:"연속 심박 간격 차이의 제곱근"})]}),f.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"SDNN"}),f.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[Math.round(Math.sqrt(o.reduce((y,x)=>y+Math.pow(x.hrv-30,2),0)/o.length))," ms"]}),f.jsx("p",{className:"text-xs text-gray-600",children:"심박 간격의 표준편차"})]}),f.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-purple-800 mb-1",children:"스트레스 지수"}),f.jsx("p",{className:"text-xl font-bold text-purple-600",children:Math.round(1e3/(o.reduce((y,x)=>y+x.hrv,0)/o.length))}),f.jsx("p",{className:"text-xs text-gray-600",children:"자율신경계 균형 상태"})]})]})})]})]})}),f.jsxs(ol,{value:"bloodpressure",className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx($l,{className:"w-5 h-5 text-orange-600"}),"혈압 변화"]})}),f.jsx(ct,{children:f.jsx(ls,{width:"100%",height:300,children:f.jsxs(Pc,{data:h,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{}),f.jsx(io,{}),f.jsx(J1,{}),f.jsx(Pa,{type:"monotone",dataKey:"systolic",stroke:"#f59e0b",strokeWidth:2,name:"수축기 혈압"}),f.jsx(Pa,{type:"monotone",dataKey:"diastolic",stroke:"#ef4444",strokeWidth:2,name:"이완기 혈압"})]})})})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(ho,{className:"w-5 h-5 text-blue-600"}),"산소포화도 변화"]})}),f.jsx(ct,{children:f.jsx(ls,{width:"100%",height:300,children:f.jsxs(Pc,{data:h,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{domain:[90,100]}),f.jsx(io,{formatter:y=>[`${y}%`,"산소포화도"]}),f.jsx(Pa,{type:"monotone",dataKey:"spo2",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:2}})]})})})]})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsx(St,{children:"혈압 및 산소포화도 분석"})}),f.jsx(ct,{children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"혈압 상태"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm",children:"수축기"}),f.jsxs("span",{className:"font-medium",children:[Math.round(o.reduce((y,x)=>y+x.systolic,0)/o.length)," mmHg"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm",children:"이완기"}),f.jsxs("span",{className:"font-medium",children:[Math.round(o.reduce((y,x)=>y+x.diastolic,0)/o.length)," mmHg"]})]}),f.jsx(Gt,{variant:"outline",className:"w-full justify-center",children:"정상 범위"})]})]}),f.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"산소포화도"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm",children:"평균"}),f.jsxs("span",{className:"font-medium",children:[Math.round(o.reduce((y,x)=>y+x.spo2,0)/o.length*10)/10,"%"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-sm",children:"최소"}),f.jsxs("span",{className:"font-medium",children:[Math.round(Math.min(...o.map(y=>y.spo2))*10)/10,"%"]})]}),f.jsx(Gt,{variant:"outline",className:"w-full justify-center bg-green-50 text-green-700",children:"정상"})]})]}),f.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"심혈관 위험도"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-green-600",children:"낮음"}),f.jsx("p",{className:"text-sm text-gray-600",children:"위험 수준"})]}),f.jsxs("div",{className:"space-y-1 text-xs",children:[f.jsx("p",{children:"• 정상 혈압 범위"}),f.jsx("p",{children:"• 양호한 산소포화도"}),f.jsx("p",{children:"• 안정적인 심박수"})]})]})]})]})})]})]}),f.jsxs(ol,{value:"raw",className:"space-y-4",children:[f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(BW,{className:"w-5 h-5 text-red-600"}),"원시 PPG 신호"]})}),f.jsxs(ct,{children:[f.jsx(ls,{width:"100%",height:400,children:f.jsxs(Pc,{data:h,children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{}),f.jsx(io,{formatter:y=>[`${y.toFixed(2)}`,"PPG 신호"]}),f.jsx(Pa,{type:"monotone",dataKey:"rawPPG",stroke:"#dc2626",strokeWidth:1,dot:!1,name:"원시 PPG"})]})}),f.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[f.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"신호 정보"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600",children:"샘플링 주파수"}),f.jsx("p",{className:"font-medium",children:"100 Hz"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600",children:"측정 파장"}),f.jsx("p",{className:"font-medium",children:"660/940 nm"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600",children:"측정 시간"}),f.jsx("p",{className:"font-medium",children:"60초"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600",children:"신호 품질"}),f.jsx(Gt,{variant:"outline",className:"bg-green-50 text-green-700",children:u.description})]})]})]})]})]}),f.jsxs(Ye,{children:[f.jsx(wt,{children:f.jsxs(St,{className:"flex items-center gap-2",children:[f.jsx(ho,{className:"w-5 h-5 text-purple-600"}),"맥파 형태 분석"]})}),f.jsxs(ct,{children:[f.jsx(ls,{width:"100%",height:300,children:f.jsxs(Pc,{data:h.slice(0,10),children:[f.jsx(so,{strokeDasharray:"3 3"}),f.jsx(oo,{dataKey:"time"}),f.jsx(lo,{}),f.jsx(io,{}),f.jsx(Pa,{type:"monotone",dataKey:"pulseWave",stroke:"#7c3aed",strokeWidth:3,dot:{fill:"#7c3aed",strokeWidth:2,r:4},name:"맥파 형태"})]})}),f.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[f.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[f.jsx("h5",{className:"font-semibold text-purple-800",children:"맥파 진폭"}),f.jsx("p",{className:"text-lg font-bold text-purple-600",children:Math.round(Math.max(...o.map(y=>y.pulseWave))-Math.min(...o.map(y=>y.pulseWave)))}),f.jsx("p",{className:"text-xs text-gray-600",children:"신호 강도"})]}),f.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg",children:[f.jsx("h5",{className:"font-semibold text-indigo-800",children:"맥파 주기"}),f.jsxs("p",{className:"text-lg font-bold text-indigo-600",children:[Math.round(60/(o.reduce((y,x)=>y+x.heartRate,0)/o.length)*1e3)," ms"]}),f.jsx("p",{className:"text-xs text-gray-600",children:"심박 간격"})]}),f.jsxs("div",{className:"p-3 bg-pink-50 rounded-lg",children:[f.jsx("h5",{className:"font-semibold text-pink-800",children:"혈관 탄성"}),f.jsx("p",{className:"text-lg font-bold text-pink-600",children:"양호"}),f.jsx("p",{className:"text-xs text-gray-600",children:"혈관 상태"})]})]})]})]})]})]})]})})};function FQe({context:r}){const[e,t]=K.useState("home"),[n,a]=K.useState(null),[i,s]=K.useState(null),[o,l]=K.useState(null),[c,u]=K.useState(!1),[h,d]=K.useState(null),[A,g]=K.useState(0),[p,v]=K.useState(null),[m,y]=K.useState(!1),[x,b]=K.useState(!1),[S,_]=K.useState(null),C=XA.getInstance(),w=e!=="home";K.useEffect(()=>{window.__aiHealthReportAppState={currentScreen:e,shouldShowBackButton:w,handleBack:ee}},[e,w]),K.useEffect(()=>{},[]);const B=()=>{t("personalInfo")},D=()=>{t("history")},T=()=>{t("trends")},E=()=>{t("eegAnalysis")},R=()=>{t("ppgAnalysis")},M=G=>{d(G),t("reportDetail")},k=async(G,Y,Z)=>{const de=Y||n,he=Z||i;if(!de||!he){console.error("🚨 저장 실패: 개인정보 또는 측정 데이터가 없습니다."),console.log("🔍 디버그 정보:",{infoToUse:!!de,dataToUse:!!he,personalInfo:!!n,measurementData:!!i});return}try{b(!0),console.log("💾 리포트 저장 시작...");const fe=[],q=G.overallHealth.score;q>=80?fe.push("우수"):q>=60?fe.push("보통"):fe.push("주의"),G.detailedAnalysis.stressLevel.score<40&&fe.push("고스트레스"),G.detailedAnalysis.mentalHealth.score>=80&&fe.push("정신건강양호"),G.detailedAnalysis.physicalHealth.score>=80&&fe.push("신체건강양호");const ge=await C.saveReport(de,G,he,fe,m?"테스트 분석 결과 (AI 분석 실패로 인한 대체)":void 0);_(ge),console.log("✅ 리포트 저장 완료:",ge),yn.success("건강 리포트가 저장되었습니다!",{description:"히스토리에서 언제든지 다시 확인할 수 있습니다.",duration:4e3})}catch(fe){console.error("🚨 리포트 저장 실패:",fe),yn.error("리포트 저장에 실패했습니다.",{description:"다시 시도해주세요.",duration:4e3})}finally{b(!1)}},O=()=>{d(null),t("history")},Q=G=>{a(G),t("measurement")},H=async G=>{console.log("🚀 handleMeasurementComplete 호출됨 - 분석 시작"),console.log("🚀 측정 데이터:",G),s(G),t("analysis"),u(!0),g(0),v(null),y(!1);const Y=8e3,Z=Date.now();[{step:1,delay:1500,name:"정신건강 분석"},{step:2,delay:3e3,name:"신체건강 분석"},{step:3,delay:4500,name:"스트레스 분석"},{step:4,delay:6e3,name:"맞춤형 추천 생성"}].forEach(({step:he,delay:fe})=>{setTimeout(()=>{g(he)},fe)});try{console.log("🚀 AI 분석 시작 - GeminiAIService.analyzeHealth 호출");const he=await qu.analyzeHealth(n,G);console.log("🚀 AI 분석 완료 - 결과:",he);const fe=Date.now()-Z,q=Math.max(0,Y-fe);q>0&&(console.log(`⏳ 로딩 화면 추가 표시 중... (${q}ms 남음)`),await new Promise(ge=>setTimeout(ge,q))),l(he),await k(he,n,G)}catch(he){console.error("🚨 AI 분석 실패:",he);const fe=he instanceof Error?he.message:String(he);v(fe),y(!0),console.log("🚀 테스트 분석으로 대체 - GeminiAIService.testAnalysis 호출");const q=await qu.testAnalysis(n,G);console.log("🚀 테스트 분석 완료 - 결과:",q);const ge=Date.now()-Z,me=Math.max(0,Y-ge);me>0&&(console.log(`⏳ 로딩 화면 추가 표시 중... (${me}ms 남음)`),await new Promise(we=>setTimeout(we,me))),l(q),await k(q,n,G)}finally{console.log("🚀 분석 완료 - isAnalyzing을 false로 설정"),u(!1),g(0)}},W=()=>{t("home"),a(null),s(null),l(null),d(null),v(null),y(!1),b(!1),_(null)},te=()=>{t("personalInfo")},ee=()=>{switch(e){case"personalInfo":W();break;case"measurement":te();break;case"analysis":W();break;case"history":W();break;case"trends":W();break;case"eegAnalysis":t("analysis");break;case"ppgAnalysis":t("analysis");break;case"reportDetail":O();break}};K.useEffect(()=>()=>{delete window.__aiHealthReportAppState},[]);const j=()=>{switch(e){case"home":return f.jsx(vPe,{onStartNewMeasurement:B,onViewHistory:D,onViewTrends:T});case"personalInfo":return f.jsx(yPe,{onNext:Q,onBack:W});case"measurement":return n?f.jsx(UPe,{personalInfo:n,onComplete:H,onBack:te}):null;case"analysis":return f.jsx(TQe,{personalInfo:n,measurementData:i,analysisResult:o,isAnalyzing:c,currentAnalysisStep:A,onBack:ee,onViewEEGAnalysis:E,onViewPPGAnalysis:R,analysisError:p,isUsingFallback:m});case"history":return f.jsx(DQe,{onViewReport:M,onBackToHome:W});case"trends":return f.jsx(RQe,{onBack:W});case"eegAnalysis":return o&&i?f.jsx(LQe,{analysisResult:o,measurementData:i,onBack:ee}):null;case"ppgAnalysis":return o&&i?f.jsx(kQe,{analysisResult:o,measurementData:i,onBack:ee}):null;case"reportDetail":return h?f.jsx(MQe,{reportId:h,onBack:O}):null;case"testDynamicIntegration":return null;default:return null}};return f.jsx("div",{className:"min-h-full bg-black",style:{backgroundColor:"#000000"},children:j()})}function jQe(){const[r,e]=K.useState(null),[t,n]=K.useState(!1);K.useRef(null);const a=[{id:"ai-health-report",title:"AI Health Report",description:"AI 기반 건강 분석 리포트를 생성하고 관리합니다.",icon:Ba,status:"Active",color:"bg-blue-500"},{id:"ai-mental-health-monitor",title:"AI Mental Health Monitor",description:"실시간 AI 기반 정신건강 모니터링 및 관리 도구입니다.",icon:gA,status:"Coming Soon",color:"bg-red-500"},{id:"wellness-tracker",title:"Wellness Tracker",description:"종합적인 정신 건강 추적 및 분석 도구입니다.",icon:ho,status:"Coming Soon",color:"bg-green-500"},{id:"report-generator",title:"Report Generator",description:"맞춤형 건강 리포트 생성 도구입니다.",icon:Us,status:"Coming Soon",color:"bg-purple-500"},{id:"analytics-dashboard",title:"Analytics Dashboard",description:"고급 분석 대시보드 및 인사이트 도구입니다.",icon:l0,status:"Coming Soon",color:"bg-orange-500"},{id:"custom-app",title:"Custom Application",description:"사용자 정의 애플리케이션 개발 도구입니다.",icon:Ip,status:"Coming Soon",color:"bg-gray-500"}];return f.jsxs("div",{className:"h-full bg-background",children:[f.jsx("div",{className:"border-b border-border bg-card",children:f.jsx("div",{className:"px-8 py-6",children:f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Applications"}),f.jsx("p",{className:"text-muted-foreground mt-1",children:"LINK BAND SDK 기반 애플리케이션 및 도구들"})]})})})}),f.jsxs("div",{className:"flex-1 overflow-auto p-8",children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(i=>{const s=i.icon;return f.jsxs(Ye,{className:"hover:shadow-lg transition-shadow",children:[f.jsx(wt,{className:"pb-3",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:`p-2 rounded-lg ${i.color}`,children:f.jsx(s,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{children:[f.jsx(St,{className:"text-lg",children:i.title}),f.jsx("div",{className:"flex items-center space-x-2 mt-1",children:f.jsx("span",{className:"text-xs bg-muted text-muted-foreground px-2 py-1 rounded",children:i.status})})]})]})}),f.jsxs(ct,{children:[f.jsx(na,{className:"text-sm mb-4",children:i.description}),f.jsx(At,{variant:"outline",size:"sm",className:"w-full",disabled:i.status==="Coming Soon",onClick:()=>{i.id==="ai-health-report"&&i.status==="Active"&&e(i.id)},children:i.status==="Coming Soon"?"개발 예정":"실행"})]})]},i.id)})}),f.jsxs("div",{className:"mt-8 p-6 bg-muted/50 rounded-lg",children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:"개발 중인 애플리케이션"}),f.jsx("p",{className:"text-muted-foreground text-sm",children:"LINK BAND SDK를 활용한 다양한 애플리케이션들이 개발 중입니다. 각 애플리케이션은 EEG, PPG 데이터를 활용하여 사용자에게 맞춤형 건강 인사이트를 제공할 예정입니다."})]})]}),r==="ai-health-report"&&f.jsx(mPe,{component:FQe,initialMode:"fullscreen",onClose:()=>e(null)})]})}function OQe(){const{timezone:r,setTimezone:e}=Od(),{config:t,updateConfig:n,requestStorageDirectory:a,isStorageReady:i,storageDirectoryPath:s,changeStorageDirectory:o}=Xc(),[l,c]=K.useState(()=>{const M=localStorage.getItem("autoRegistrationEnabled");return M?JSON.parse(M):!0}),[u,h]=K.useState(()=>{const M=localStorage.getItem("autoConnectionEnabled");return M?JSON.parse(M):!0}),[d,A]=K.useState([]),[g,p]=K.useState(""),[v,m]=K.useState(!1),[y,x]=K.useState(!1),[b,S]=K.useState(!1),[_,C]=K.useState(null),[w,B]=K.useState(null);K.useEffect(()=>{localStorage.setItem("autoRegistrationEnabled",JSON.stringify(l))},[l]),K.useEffect(()=>{localStorage.setItem("autoConnectionEnabled",JSON.stringify(u))},[u]),K.useEffect(()=>{D()},[]),K.useEffect(()=>{x(zi.validateGeminiAPIKey(g)),C(null),B(null)},[g]);const D=()=>{const M=zi.getAPIKeyMetadata();A(M)},T=async()=>{if(y){S(!0),B(null);try{const M=await zi.saveAPIKey("gemini-api",g,{name:"Google Gemini API",service:"gemini"},!0);C(M),M.isValid?(p(""),m(!1),D(),B({type:"success",message:`Gemini API 키가 성공적으로 저장되었습니다. (응답시간: ${M.responseTime}ms)`})):B({type:"error",message:`API 키 테스트 실패: ${M.error}`})}catch(M){console.error("API 키 저장 실패:",M),B({type:"error",message:"예상치 못한 오류가 발생했습니다. 다시 시도해주세요."})}finally{S(!1)}}},E=async M=>{if(confirm("정말로 이 API 키를 삭제하시겠습니까?"))try{await zi.deleteAPIKey(M),D(),B({type:"success",message:"API 키가 성공적으로 삭제되었습니다."})}catch(k){console.error("API 키 삭제 실패:",k),B({type:"error",message:"API 키 삭제에 실패했습니다."})}},R=async()=>{try{s?await o():await a()}catch(M){console.error("Failed to select storage directory:",M)}};return K.useEffect(()=>{if(w){const M=setTimeout(()=>{B(null)},5e3);return()=>clearTimeout(M)}},[w]),f.jsx("div",{className:"flex-1 overflow-auto p-6",children:f.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[f.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:f.jsx(Ip,{className:"w-5 h-5 text-primary"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Settings"}),f.jsx("p",{className:"text-muted-foreground",children:"애플리케이션 설정을 관리합니다"})]})]}),w&&f.jsx("div",{className:`p-4 rounded-lg border ${w.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:f.jsxs("div",{className:"flex items-center gap-2",children:[w.type==="success"?f.jsx(Hs,{className:"w-5 h-5"}):f.jsx(da,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium",children:w.message})]})}),f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(rI,{className:"w-5 h-5 text-amber-600"}),f.jsx(St,{children:"API Keys Management"})]}),f.jsx(na,{children:"AI Health Report 및 기타 서비스용 API 키 관리"})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[f.jsx(a0,{className:"w-5 h-5 text-blue-600 mt-0.5"}),f.jsxs("div",{className:"text-sm",children:[f.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"🔒 보안 정보"}),f.jsxs("ul",{className:"text-blue-700 space-y-1 text-xs",children:[f.jsx("li",{children:"• API 키는 IndexedDB에 암호화되어 저장됩니다"}),f.jsx("li",{children:"• 브라우저 로컬 환경에서만 사용되며 외부로 전송되지 않습니다"}),f.jsx("li",{children:"• 키 정보는 마스킹되어 표시됩니다"}),f.jsx("li",{children:"• 저장 전 자동으로 API 키 유효성을 테스트합니다"})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-sm font-medium text-foreground",children:"저장된 API 키"}),d.length===0?f.jsx("div",{className:"text-sm text-muted-foreground py-4 text-center border border-dashed border-gray-300 rounded-lg",children:"저장된 API 키가 없습니다"}):f.jsx("div",{className:"space-y-2",children:d.map(M=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-700 border border-neutral-600 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(rI,{className:"w-4 h-4 text-gray-300"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-white",children:M.name}),f.jsxs("p",{className:"text-xs text-gray-300",children:[M.maskedKey," • ",M.lastUsed?`마지막 사용: ${new Date(M.lastUsed).toLocaleDateString()}`:"미사용"]}),M.isVerified&&M.lastTestedAt&&f.jsxs("p",{className:"text-xs text-green-400",children:["✓ 검증됨 (",new Date(M.lastTestedAt).toLocaleDateString(),")"]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Gt,{variant:M.isActive?"default":"secondary",children:M.isActive?"활성":"비활성"}),M.isVerified&&f.jsx(Gt,{variant:"outline",className:"text-green-600 border-green-600",children:"검증됨"}),f.jsx(At,{variant:"outline",size:"sm",onClick:()=>E(M.id),className:"text-red-400 hover:text-red-300 border-red-400 hover:border-red-300",children:"삭제"})]})]},M.id))})]}),f.jsx(Kg,{}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Google Gemini API 키"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"AI Health Report 기능을 위한 Gemini API 키"})]}),!v&&f.jsxs(At,{variant:"outline",size:"sm",onClick:()=>m(!0),children:[f.jsx(rI,{className:"w-4 h-4 mr-2"}),"키 추가"]})]}),v&&f.jsxs("form",{onSubmit:M=>{M.preventDefault(),T()},className:"space-y-3 p-4 bg-neutral-700 border border-neutral-600 rounded-lg",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium text-white",children:"Gemini API 키"}),f.jsx(xo,{type:"password",value:g,onChange:M=>p(M.target.value),placeholder:"AIza로 시작하는 39자리 키를 입력하세요",className:`bg-neutral-800 border-neutral-500 text-white placeholder-gray-400 ${y?"border-green-500":g?"border-red-500":""}`,disabled:b,autoComplete:"off"}),g&&!y&&f.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-xs",children:[f.jsx(da,{className:"w-3 h-3"}),"올바른 Gemini API 키 형식이 아닙니다 (AIza로 시작하는 39자리)"]}),y&&!b&&f.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs",children:[f.jsx(a0,{className:"w-3 h-3"}),"유효한 API 키 형식입니다"]}),b&&f.jsxs("div",{className:"flex items-center gap-2 text-blue-400 text-xs",children:[f.jsx(i0,{className:"w-3 h-3 animate-spin"}),"API 키를 테스트하고 저장하는 중..."]}),_&&!_.isValid&&f.jsxs("div",{className:"flex items-start gap-2 text-red-400 text-xs",children:[f.jsx(da,{className:"w-3 h-3 mt-0.5"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:"테스트 실패"}),f.jsx("p",{children:_.error}),_.responseTime&&f.jsxs("p",{children:["응답시간: ",_.responseTime,"ms"]})]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(At,{type:"submit",size:"sm",disabled:!y||b,children:b?f.jsxs(f.Fragment,{children:[f.jsx(i0,{className:"w-4 h-4 mr-2 animate-spin"}),"테스트 중..."]}):"테스트 후 저장"}),f.jsx(At,{type:"button",variant:"outline",size:"sm",onClick:()=>{m(!1),p(""),C(null),B(null)},disabled:b,children:"취소"})]})]})]}),f.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[f.jsx("p",{className:"font-medium mb-1",children:"💡 API 키 관리 안내:"}),f.jsxs("ul",{className:"space-y-1 text-xs",children:[f.jsxs("li",{children:["• ",f.jsx("strong",{children:"Gemini API:"})," Google AI Studio에서 발급받은 API 키를 사용합니다"]}),f.jsxs("li",{children:["• ",f.jsx("strong",{children:"자동 테스트:"})," 저장 전 API 키 유효성을 자동으로 검증합니다"]}),f.jsxs("li",{children:["• ",f.jsx("strong",{children:"보안:"})," 모든 키는 브라우저 로컬 환경에서만 저장되고 사용됩니다"]}),f.jsxs("li",{children:["• ",f.jsx("strong",{children:"사용량:"})," API 사용량은 Google AI Studio에서 확인할 수 있습니다"]}),f.jsxs("li",{children:["• ",f.jsx("strong",{children:"요금:"})," Gemini API 사용 요금은 Google 정책에 따라 부과됩니다"]})]})]})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(jg,{className:"w-5 h-5 text-blue-600"}),f.jsx(St,{children:"Device Manager"})]}),f.jsx(na,{children:"디바이스 연결 및 관리 설정"})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("h4",{className:"text-sm font-medium text-foreground",children:"자동 연결 기능"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"스캔된 디바이스를 자동으로 연결합니다."})]}),f.jsx(_A,{checked:u,onCheckedChange:h})]}),f.jsx(Kg,{}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("h4",{className:"text-sm font-medium text-foreground",children:"자동 등록 기능"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"디바이스 연결 시 자동으로 등록하여 다음 연결을 더 빠르게 합니다."})]}),f.jsx(_A,{checked:l,onCheckedChange:c})]}),f.jsx(Kg,{}),f.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[f.jsx("p",{className:"font-medium mb-1",children:"💡 디바이스 관리 기능 안내:"}),f.jsxs("ul",{className:"space-y-1 text-xs",children:[f.jsxs("li",{children:["• ",f.jsx("strong",{children:"자동 연결:"})," 스캔된 디바이스를 자동으로 연결합니다"]}),f.jsxs("li",{children:["• ",f.jsx("strong",{children:"자동 등록:"})," 연결된 디바이스를 자동으로 등록하여 다음 연결을 빠르게 합니다"]}),f.jsx("li",{children:"• 두 기능 모두 비활성화하면 완전 수동 모드로 작동합니다"}),f.jsx("li",{children:"• 이미 등록된 디바이스는 중복 등록되지 않습니다"})]})]})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Co,{className:"w-5 h-5 text-orange-600"}),f.jsx(St,{children:"Time Zone"})]}),f.jsx(na,{children:"시간 표시 기준 설정"})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"block text-sm font-medium",children:"시간 표시 기준"}),f.jsxs("select",{value:r,onChange:M=>e(M.target.value),className:"w-full px-3 py-2 border border-neutral-600 bg-neutral-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"system",children:"시스템 시간대"}),f.jsx("option",{value:"korea",children:"한국 시간 (KST/GMT+9)"}),f.jsx("option",{value:"utc",children:"국제 표준시 (UTC)"})]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"세션 시작/종료 시간과 모든 시간 표시에 적용됩니다"})]}),f.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[f.jsx("p",{className:"font-medium mb-1",children:"💡 시간대 설정 안내:"}),f.jsxs("ul",{className:"space-y-1 text-xs",children:[f.jsxs("li",{children:["• ",f.jsx("strong",{children:"시스템 시간대:"})," 현재 컴퓨터의 시간대를 사용합니다"]}),f.jsxs("li",{children:["• ",f.jsx("strong",{children:"한국 시간:"})," 항상 한국 시간(KST, UTC+9)으로 표시합니다"]}),f.jsxs("li",{children:["• ",f.jsx("strong",{children:"국제 표준시:"})," UTC 시간으로 표시합니다"]}),f.jsx("li",{children:"• 설정 변경 후 새로 시작하는 세션부터 적용됩니다"})]})]})]})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(rw,{className:"w-5 h-5 text-purple-600"}),f.jsx(St,{children:"Visualizer"})]}),f.jsx(na,{children:"데이터 시각화 설정"})]}),f.jsx(ct,{children:f.jsx("div",{className:"text-sm text-muted-foreground py-4",children:"시각화 설정은 준비 중입니다."})})]}),f.jsxs(Ye,{children:[f.jsxs(wt,{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(go,{className:"w-5 h-5 text-green-600"}),f.jsx(St,{children:"Data Center"})]}),f.jsx(na,{children:"데이터 저장 및 관리 설정"})]}),f.jsxs(ct,{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-sm font-medium",children:"저장소 경로"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:s||"저장소를 선택해주세요",readOnly:!0,className:"flex-1 px-3 py-2 bg-neutral-700 text-white border border-neutral-600 rounded-md",placeholder:"저장소를 선택해주세요"}),f.jsx(At,{variant:"outline",onClick:R,children:f.jsx(Vl,{className:"w-4 h-4"})})]}),s&&f.jsx("p",{className:"text-xs text-muted-foreground",children:"저장소를 변경하면 모든 설정이 초기화됩니다."})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"block text-sm font-medium",children:"저장할 데이터 포맷 기본값"}),f.jsxs("select",{value:t.defaultFormat,onChange:M=>n({defaultFormat:M.target.value}),className:"w-full px-3 py-2 border border-neutral-600 bg-neutral-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[f.jsx("option",{value:"jsonl",children:"JSON Lines (.jsonl)"}),f.jsx("option",{value:"csv",children:"CSV (.csv)"}),f.jsx("option",{value:"binary",children:"Binary (.bin)"})]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"새로운 녹화 세션에 사용할 기본 포맷"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"block text-sm font-medium",children:"저장할 데이터 타입 기본값"}),f.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{key:"eegRaw",label:"EEG Raw"},{key:"ppgRaw",label:"PPG Raw"},{key:"accRaw",label:"ACC Raw"},{key:"eegAnalysisMetrics",label:"EEG Analysis Metrics"},{key:"ppgAnalysisMetrics",label:"PPG Analysis Metrics"},{key:"accAnalysisMetrics",label:"ACC Analysis Metrics"}].map(({key:M,label:k})=>{var O;return f.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[f.jsx("input",{type:"checkbox",checked:((O=t.defaultSaveOptions)==null?void 0:O[M])||!1,onChange:Q=>n({defaultSaveOptions:{...t.defaultSaveOptions,[M]:Q.target.checked}}),className:"rounded bg-neutral-700 border-neutral-600 text-blue-500 focus:ring-blue-500"}),f.jsx("span",{children:k})]},M)})}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"새로운 녹화 세션에서 기본적으로 저장할 데이터 타입"})]})]})]})]})})}const UQe=({onComplete:r})=>{const[e,t]=K.useState(!0);return K.useEffect(()=>{const n=setTimeout(()=>{t(!1),setTimeout(r,500)},3e3);return()=>clearTimeout(n)},[r]),f.jsxs("div",{className:`
        fixed inset-0 z-50 flex flex-col items-center justify-center
        bg-gradient-to-br from-black via-gray-900 to-gray-800
        transition-opacity duration-500
        ${e?"opacity-100":"opacity-0"}
      `,children:[f.jsx("div",{className:"mb-8 animate-pulse-slow",children:f.jsx("img",{src:"/symbols_looxidlabs_1024_circle.png",alt:"Looxid Labs Logo",className:"w-16 h-16 md:w-20 md:h-20 drop-shadow-2xl"})}),f.jsxs("div",{className:"text-center space-y-4 animate-fade-in-up",children:[f.jsx("h1",{className:"text-2xl md:text-2xl lg:text-3xl font-bold text-white tracking-wider",children:"WELCOME TO"}),f.jsx("h2",{className:"text-xl md:text-2xl lg:text-2xl font-bold text-white tracking-wider",children:"LINK BAND SDK"}),f.jsx("div",{className:"w-12 h-0.5 bg-white mx-auto mt-6 rounded-full opacity-80"})]}),f.jsxs("div",{className:"mt-12 flex space-x-2",children:[f.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})};function HQe({onNavigate:r,onEnterApp:e}){var l;const[t,n]=K.useState(!1),{currentLanguage:a,setLanguage:i}=AT(),s=kj(),o=[{code:"ko",name:"한국어",flag:"🇰🇷"},{code:"en",name:"English",flag:"🇺🇸"},{code:"jp",name:"日本語",flag:"🇯🇵"}];return f.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex items-center justify-between h-16",children:[f.jsxs("button",{onClick:()=>r("home"),className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[f.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 rounded-lg",children:f.jsx(Ba,{className:"w-5 h-5 text-white"})}),f.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"MIND BREEZE AI"})]}),f.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[f.jsx("a",{href:"#service",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",children:s.landing.nav.howItWorks}),f.jsx("a",{href:"#device",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",children:s.landing.nav.linkBand}),f.jsx("a",{href:"#ai-report",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",children:s.landing.nav.aiReport}),f.jsx("a",{href:"#consultation",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",children:s.landing.nav.aiConsultation}),f.jsx("a",{href:"#pricing",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",children:s.landing.nav.pricing})]}),f.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[f.jsxs("div",{className:"relative group",children:[f.jsxs("button",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[f.jsx(lM,{className:"w-4 h-4 text-gray-600"}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:(l=o.find(c=>c.code===a))==null?void 0:l.flag})]}),f.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:o.map(c=>f.jsxs("button",{onClick:()=>i(c.code),className:`w-full flex items-center space-x-3 px-4 py-2 text-left hover:bg-gray-50 transition-colors ${a===c.code?"bg-blue-50 text-blue-600":"text-gray-700"}`,children:[f.jsx("span",{className:"text-lg",children:c.flag}),f.jsx("span",{className:"text-sm font-medium",children:c.name})]},c.code))})]}),f.jsx(At,{variant:"outline",size:"sm",onClick:e,children:s.landing.header.enterApp}),f.jsx(At,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>r("signup"),children:s.landing.header.getStarted})]}),f.jsx("button",{className:"md:hidden p-2",onClick:()=>n(!t),children:t?f.jsx(Z1,{className:"w-6 h-6"}):f.jsx(nhe,{className:"w-6 h-6"})})]}),t&&f.jsx("div",{className:"md:hidden py-4 border-t border-gray-200",children:f.jsxs("nav",{className:"flex flex-col space-y-4",children:[f.jsx("a",{href:"#service",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",onClick:()=>n(!1),children:s.landing.nav.howItWorks}),f.jsx("a",{href:"#device",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",onClick:()=>n(!1),children:s.landing.nav.linkBand}),f.jsx("a",{href:"#ai-report",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",onClick:()=>n(!1),children:s.landing.nav.aiReport}),f.jsx("a",{href:"#consultation",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",onClick:()=>n(!1),children:s.landing.nav.aiConsultation}),f.jsx("a",{href:"#pricing",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",onClick:()=>n(!1),children:s.landing.nav.pricing}),f.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[f.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[f.jsx(lM,{className:"w-4 h-4 text-gray-600"}),f.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.landing.header.language})]}),f.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.map(c=>f.jsxs("button",{onClick:()=>i(c.code),className:`flex items-center justify-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${a===c.code?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[f.jsx("span",{children:c.flag}),f.jsx("span",{className:"text-xs",children:c.name})]},c.code))})]}),f.jsxs("div",{className:"flex flex-col space-y-2 pt-4",children:[f.jsx(At,{variant:"outline",size:"sm",onClick:()=>{n(!1),e()},children:s.landing.header.enterApp}),f.jsx(At,{size:"sm",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{n(!1),r("signup")},children:s.landing.header.getStarted})]})]})})]})})}function QQe(){const r=kj(),e=[{icon:Ba,title:r.landing.process.step1.title,description:r.landing.process.step1.description,color:"blue",step:"01",indicator:"Only 50g weight"},{icon:cM,title:r.landing.process.step2.title,description:r.landing.process.step2.description,color:"green",step:"02",indicator:"2-Channel EEG sensors"},{icon:Us,title:r.landing.process.step3.title,description:r.landing.process.step3.description,color:"purple",step:"03",indicator:"AI-powered analysis"}];return f.jsx("section",{id:"service",className:"py-20 bg-white",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[f.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-6",children:r.landing.process.title}),f.jsx("p",{className:"text-xl text-gray-600",children:"Experience professional-grade EEG monitoring at home. No complex setup, no technical expertise required - just wear, record, and receive your brain health insights."})]}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"hidden lg:block absolute top-1/2 left-0 right-0 h-0.5 bg-gray-200 transform -translate-y-1/2 z-0"}),f.jsx("div",{className:"grid md:grid-cols-3 gap-8 relative z-10",children:e.map((t,n)=>{const a=t.icon,i={blue:"bg-blue-600 text-white border-blue-600",green:"bg-green-600 text-white border-green-600",purple:"bg-purple-600 text-white border-purple-600"};return f.jsxs("div",{className:"relative",children:[f.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow",children:[f.jsx("div",{className:"absolute -top-4 left-8 bg-gray-900 text-white w-12 h-8 rounded-full flex items-center justify-center text-sm font-bold",children:t.step}),f.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center mb-6 ${i[t.color]}`,children:f.jsx(a,{className:"w-8 h-8"})}),f.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:t.title}),f.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description}),n===0&&f.jsxs("div",{className:"mt-6 flex items-center space-x-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-lg",children:[f.jsx(Ba,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm font-medium",children:"Only 50g weight"})]}),n===1&&f.jsxs("div",{className:"mt-6 flex items-center space-x-2 bg-green-50 text-green-700 px-4 py-2 rounded-lg",children:[f.jsx(cM,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm font-medium",children:"2-Channel EEG sensors"})]}),n===2&&f.jsxs("div",{className:"mt-6 flex items-center space-x-2 bg-purple-50 text-purple-700 px-4 py-2 rounded-lg",children:[f.jsx(Us,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm font-medium",children:"AI-powered analysis"})]})]}),n<e.length-1&&f.jsx("div",{className:"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2 z-20",children:f.jsx(CW,{className:"w-8 h-8 text-gray-400"})})]},n)})})]}),f.jsx("div",{className:"text-center mt-16",children:f.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-2xl p-8",children:[f.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ready to monitor your brain health in 60 seconds?"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Join the future of personal brain monitoring with LINK BAND 2.0's revolutionary EEG technology."}),f.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors",children:"Start Your Brain Health Journey"})]})})]})})}function zQe({onEnterApp:r}){const[e,t]=xt.useState("home"),n=a=>{t(a),window.scrollTo(0,0)};switch(e){case"login":return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:f.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"로그인"}),f.jsx("p",{className:"text-center text-gray-600 mb-4",children:"Coming Soon"}),f.jsx("button",{onClick:()=>n("home"),className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"홈으로 돌아가기"})]})});case"signup":return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:f.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"회원가입"}),f.jsx("p",{className:"text-center text-gray-600 mb-4",children:"Coming Soon"}),f.jsx("button",{onClick:()=>n("home"),className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"홈으로 돌아가기"})]})});case"home":default:return f.jsxs("div",{className:"min-h-screen bg-white",children:[f.jsx(HQe,{onNavigate:n,onEnterApp:r}),f.jsx("main",{children:f.jsx(QQe,{})})]})}}const GQe=({...r})=>f.jsx(_pe,{theme:"dark",className:"toaster group",toastOptions:{style:{background:"rgb(38, 38, 38)",border:"1px solid rgb(64, 64, 64)",color:"rgb(250, 250, 250)"},className:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",descriptionClassName:"group-[.toast]:text-muted-foreground"},...r}),VQe=r=>{const[e,t]=K.useState(!1),[n,a]=K.useState(!1);return K.useEffect(()=>{var s;"serviceWorker"in navigator&&(navigator.serviceWorker.register("/sw.js").then(o=>{var l;(l=r.onRegistered)==null||l.call(r,o),o.addEventListener("updatefound",()=>{const c=o.installing;c&&c.addEventListener("statechange",()=>{var u;c.state==="installed"&&navigator.serviceWorker.controller&&(t(!0),(u=r.onNeedRefresh)==null||u.call(r))})})}).catch(o=>{var l;(l=r.onRegisterError)==null||l.call(r,o)}),navigator.onLine||(a(!0),(s=r.onOfflineReady)==null||s.call(r)))},[]),{needRefresh:e,offlineReady:n,updateServiceWorker:async(s=!1)=>{if("serviceWorker"in navigator){const o=await navigator.serviceWorker.getRegistration();o!=null&&o.waiting&&(o.waiting.postMessage({type:"SKIP_WAITING"}),s&&window.location.reload())}}}},$Qe=()=>{const[r,e]=K.useState({needRefresh:!1,offlineReady:!1,updateAvailable:!1,isUpdating:!1}),[t,n]=K.useState(!1),[a,i]=K.useState(0),{updateServiceWorker:s}=VQe({onRegistered(u){console.log("SW Registered: "+u),u&&setInterval(()=>{u.update()},6e4)},onRegisterError(u){console.log("SW registration error",u)},onNeedRefresh(){console.log("New version available"),e(u=>({...u,needRefresh:!0,updateAvailable:!0})),n(!0)},onOfflineReady(){console.log("App ready to work offline"),e(u=>({...u,offlineReady:!0}))}}),o=K.useCallback(async()=>{var h;const u=Date.now();if(!(u-a<3e4)){i(u);try{const d=(h=document.querySelector('meta[name="build-timestamp"]'))==null?void 0:h.getAttribute("content");if(d){const A=await fetch(`/index.html?t=${u}`,{cache:"no-cache",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});if(A.ok){const p=(await A.text()).match(/name="build-timestamp" content="([^"]+)"/);p&&p[1]!==d&&(console.log("New version detected:",p[1],"vs current:",d),e(v=>({...v,needRefresh:!0,updateAvailable:!0})),n(!0))}}}catch(d){console.error("Failed to check for updates:",d)}}},[a]),l=K.useCallback(async()=>{e(u=>({...u,isUpdating:!0})),n(!1);try{if(await s(!0),"caches"in window){const u=await caches.keys();await Promise.all(u.map(h=>caches.delete(h)))}window.location.reload()}catch(u){console.error("Update failed:",u),e(h=>({...h,isUpdating:!1})),n(!0)}},[s]),c=K.useCallback(()=>{n(!1),e(u=>({...u,needRefresh:!1}))},[]);return K.useEffect(()=>{const u=()=>{o()},h=()=>{document.hidden||o()};return window.addEventListener("focus",u),document.addEventListener("visibilitychange",h),o(),()=>{window.removeEventListener("focus",u),document.removeEventListener("visibilitychange",h)}},[o]),{...r,showUpdateNotification:t,performUpdate:l,dismissUpdate:c,checkForUpdates:o}},KQe=({onUpdate:r,onDismiss:e,isVisible:t})=>{const[n,a]=K.useState(!1),i=async()=>{a(!0);try{await r()}finally{a(!1)}};return t?f.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:f.jsx(Ye,{className:"shadow-lg border-l-4 border-l-blue-500 bg-white dark:bg-gray-800",children:f.jsxs(ct,{className:"p-4",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:f.jsx(vh,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"새 버전 업데이트"}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-1",children:"LINK BAND SDK의 새 버전이 사용 가능합니다"})]})]}),f.jsx("button",{onClick:e,className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:f.jsx(Z1,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"mt-4 flex space-x-2",children:[f.jsx(At,{onClick:i,disabled:n,size:"sm",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:n?f.jsxs(f.Fragment,{children:[f.jsx(ahe,{className:"w-3 h-3 mr-2 animate-spin"}),"업데이트 중..."]}):f.jsxs(f.Fragment,{children:[f.jsx(vh,{className:"w-3 h-3 mr-2"}),"지금 업데이트"]})}),f.jsx(At,{onClick:e,variant:"outline",size:"sm",className:"text-gray-600 dark:text-gray-300",children:"나중에"})]})]})})}):null};function WQe(){const[r,e]=K.useState("landing"),[t,n]=K.useState(!0),{activeMenu:a,setActiveMenu:i}=xw(),{initializeSystem:s,isInitialized:o,systemStatus:l,systemError:c}=il(),{checkAndRestoreStorage:u,initializeStorage:h}=Xc(),{showUpdateNotification:d,performUpdate:A,dismissUpdate:g,isUpdating:p}=$Qe();K.useEffect(()=>{(()=>{const b=new URLSearchParams(window.location.search).get("shortcut");if(b){const S=new URL(window.location.href);S.searchParams.delete("shortcut"),window.history.replaceState({},"",S.toString());let _="engine";switch(b){case"dashboard":_="engine";break;case"datacenter":_="datacenter";break;case"visualizer":_="visualizer";break;case"device":_="linkband";break;default:_="engine"}i(_),n(!1),console.log(`🚀 PWA 바로가기 실행: ${b} -> ${_}`)}})()},[i]),K.useEffect(()=>{!o&&l==="idle"&&(async()=>{try{console.log("🔧 App 시작 - SystemControlService 초기화 중..."),await s(),console.log("🔧 SystemControlService 초기화 완료"),console.log("🔧 App 시작 - 저장소 복원 시도 중..."),await u()?console.log("🔧 저장소 자동 복원 완료"):(console.log("🔧 저장소 복원 실패 또는 저장된 저장소 없음"),await h(),console.log("🔧 저장소 기본 초기화 완료"))}catch(x){console.error("🔧 App 초기화 실패:",x)}})()},[s,o,l,u,h]);const v=y=>{y==="app"||y==="home"?(e("app"),n(!1)):y==="landing"&&e("landing")},m=()=>{switch(a){case"engine":return f.jsx(JU,{});case"linkband":return f.jsx(Ome,{});case"visualizer":return f.jsx(_Le,{});case"datacenter":return f.jsx(Xme,{});case"cloudmanager":return f.jsx(gPe,{});case"applications":return f.jsx(jQe,{});case"settings":return f.jsx(OQe,{});default:return f.jsx(JU,{})}};return r==="landing"?f.jsx(zQe,{onNavigate:v}):t?f.jsx(UQe,{onComplete:()=>n(!1)}):l==="initializing"?f.jsx("div",{className:"dark h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),f.jsx("p",{className:"text-muted-foreground",children:"시스템 초기화 중..."})]})}):l==="error"?f.jsx("div",{className:"dark h-screen bg-background flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"text-red-500 mb-4",children:"시스템 초기화 실패"}),f.jsx("p",{className:"text-muted-foreground text-sm",children:c})]})}):f.jsxs("div",{className:"dark h-screen bg-background flex flex-col",children:[f.jsxs("div",{className:"flex flex-1 min-h-0",children:[f.jsx(Mfe,{}),f.jsx("main",{className:"flex-1 overflow-auto",children:m()})]}),f.jsx("div",{className:"flex-shrink-0",children:f.jsx($X,{})}),f.jsx(KQe,{isVisible:d,onUpdate:A,onDismiss:g}),p&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm mx-4",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"업데이트 중"}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"잠시만 기다려 주세요..."})]})]})})}),f.jsx(GQe,{position:"top-right"})]})}const qQe=()=>{};var Z$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ele=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let a=r.charCodeAt(n);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},YQe=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const a=r[t++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=r[t++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=r[t++],s=r[t++],o=r[t++],l=((a&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=r[t++],s=r[t++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},tle={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<r.length;a+=3){const i=r[a],s=a+1<r.length,o=s?r[a+1]:0,l=a+2<r.length,c=l?r[a+2]:0,u=i>>2,h=(i&3)<<4|o>>4;let d=(o&15)<<2|c>>6,A=c&63;l||(A=64,s||(d=64)),n.push(t[u],t[h],t[d],t[A])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ele(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):YQe(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<r.length;){const i=t[r.charAt(a++)],o=a<r.length?t[r.charAt(a)]:0;++a;const c=a<r.length?t[r.charAt(a)]:64;++a;const h=a<r.length?t[r.charAt(a)]:64;if(++a,i==null||o==null||c==null||h==null)throw new XQe;const d=i<<2|o>>4;if(n.push(d),c!==64){const A=o<<4&240|c>>2;if(n.push(A),h!==64){const g=c<<6&192|h;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class XQe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZQe=function(r){const e=ele(r);return tle.encodeByteArray(e,!0)},bB=function(r){return ZQe(r).replace(/\./g,"")},rle=function(r){try{return tle.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7e=()=>JQe().__FIREBASE_DEFAULTS__,t7e=()=>{if(typeof process>"u"||typeof Z$>"u")return;const r=Z$.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},r7e=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&rle(r[1]);return e&&JSON.parse(e)},s6=()=>{try{return qQe()||e7e()||t7e()||r7e()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},nle=r=>{var e,t;return(t=(e=s6())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},ale=r=>{const e=nle(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},ile=()=>{var r;return(r=s6())===null||r===void 0?void 0:r.config},sle=r=>{var e;return(e=s6())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function o6(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ole(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",a=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},r);return[bB(JSON.stringify(t)),bB(JSON.stringify(s)),""].join(".")}const $1={};function a7e(){const r={prod:[],emulator:[]};for(const e of Object.keys($1))$1[e]?r.emulator.push(e):r.prod.push(e);return r}function i7e(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let J$=!1;function l6(r,e){if(typeof window>"u"||typeof document>"u"||!py(window.location.host)||$1[r]===e||$1[r]||J$)return;$1[r]=e;function t(d){return`__firebase__banner__${d}`}const n="__firebase__banner",i=a7e().prod.length>0;function s(){const d=document.getElementById(n);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,A){d.setAttribute("width","24"),d.setAttribute("id",A),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{J$=!0,s()},d}function u(d,A){d.setAttribute("id",A),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=i7e(n),A=t("text"),g=document.getElementById(A)||document.createElement("span"),p=t("learnmore"),v=document.getElementById(p)||document.createElement("a"),m=t("preprendIcon"),y=document.getElementById(m)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const x=d.element;o(x),u(v,p);const b=c();l(y,m),x.append(y,g,v,b),document.body.appendChild(x)}i?(g.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s7e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bs())}function o7e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lle(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function l7e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c7e(){const r=bs();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function cle(){try{return typeof indexedDB=="object"}catch{return!1}}function ule(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}function u7e(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7e="FirebaseError";class bl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=h7e,Object.setPrototypeOf(this,bl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$p.prototype.create)}}class $p{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?d7e(i,n):"Error",o=`${this.serviceName}: ${s} (${a}).`;return new bl(a,o,n)}}function d7e(r,e){return r.replace(A7e,(t,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const A7e=/\{\$([^}]+)}/g;function f7e(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ZA(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const a of t){if(!n.includes(a))return!1;const i=r[a],s=e[a];if(eK(i)&&eK(s)){if(!ZA(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!t.includes(a))return!1;return!0}function eK(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function g7e(r,e){const t=new p7e(r,e);return t.subscribe.bind(t)}class p7e{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let a;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");m7e(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:n},a.next===void 0&&(a.next=WD),a.error===void 0&&(a.error=WD),a.complete===void 0&&(a.complete=WD);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m7e(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function WD(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7e=1e3,y7e=2,x7e=4*60*60*1e3,b7e=.5;function tK(r,e=v7e,t=y7e){const n=e*Math.pow(t,r),a=Math.round(b7e*n*(Math.random()-.5)*2);return Math.min(x7e,n+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(r){return r&&r._delegate?r._delegate:r}class ml{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7e{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new n7e;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_7e(e))try{this.getOrInitializeService({instanceIdentifier:Ag})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Ag){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ag){return this.instances.has(e)}getOptions(e=Ag){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&s.resolve(a)}return a}onInit(e,t){var n;const a=this.normalizeInstanceIdentifier(t),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const s=this.instances.get(a);return s&&e(s,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:S7e(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ag){return this.component?this.component.multipleInstances?e:Ag:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S7e(r){return r===Ag?void 0:r}function _7e(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new w7e(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(un||(un={}));const B7e={debug:un.DEBUG,verbose:un.VERBOSE,info:un.INFO,warn:un.WARN,error:un.ERROR,silent:un.SILENT},N7e=un.INFO,T7e={[un.DEBUG]:"log",[un.VERBOSE]:"log",[un.INFO]:"info",[un.WARN]:"warn",[un.ERROR]:"error"},I7e=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),a=T7e[e];if(a)console[a](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class DT{constructor(e){this.name=e,this._logLevel=N7e,this._logHandler=I7e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in un))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B7e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,un.DEBUG,...e),this._logHandler(this,un.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,un.VERBOSE,...e),this._logHandler(this,un.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,un.INFO,...e),this._logHandler(this,un.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,un.WARN,...e),this._logHandler(this,un.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,un.ERROR,...e),this._logHandler(this,un.ERROR,...e)}}const E7e=(r,e)=>e.some(t=>r instanceof t);let rK,nK;function D7e(){return rK||(rK=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function M7e(){return nK||(nK=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hle=new WeakMap,ZL=new WeakMap,dle=new WeakMap,qD=new WeakMap,c6=new WeakMap;function R7e(r){const e=new Promise((t,n)=>{const a=()=>{r.removeEventListener("success",i),r.removeEventListener("error",s)},i=()=>{t(RA(r.result)),a()},s=()=>{n(r.error),a()};r.addEventListener("success",i),r.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&hle.set(t,r)}).catch(()=>{}),c6.set(e,r),e}function L7e(r){if(ZL.has(r))return;const e=new Promise((t,n)=>{const a=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",s),r.removeEventListener("abort",s)},i=()=>{t(),a()},s=()=>{n(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",i),r.addEventListener("error",s),r.addEventListener("abort",s)});ZL.set(r,e)}let JL={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return ZL.get(r);if(e==="objectStoreNames")return r.objectStoreNames||dle.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return RA(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function P7e(r){JL=r(JL)}function k7e(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(YD(this),e,...t);return dle.set(n,e.sort?e.sort():[e]),RA(n)}:M7e().includes(r)?function(...e){return r.apply(YD(this),e),RA(hle.get(this))}:function(...e){return RA(r.apply(YD(this),e))}}function F7e(r){return typeof r=="function"?k7e(r):(r instanceof IDBTransaction&&L7e(r),E7e(r,D7e())?new Proxy(r,JL):r)}function RA(r){if(r instanceof IDBRequest)return R7e(r);if(qD.has(r))return qD.get(r);const e=F7e(r);return e!==r&&(qD.set(r,e),c6.set(e,r)),e}const YD=r=>c6.get(r);function Ale(r,e,{blocked:t,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(r,e),o=RA(s);return n&&s.addEventListener("upgradeneeded",l=>{n(RA(s.result),l.oldVersion,l.newVersion,RA(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),a&&l.addEventListener("versionchange",c=>a(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const j7e=["get","getKey","getAll","getAllKeys","count"],O7e=["put","add","delete","clear"],XD=new Map;function aK(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(XD.get(e))return XD.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,a=O7e.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(a||j7e.includes(t)))return;const i=async function(s,...o){const l=this.transaction(s,a?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[t](...o),a&&l.done]))[0]};return XD.set(e,i),i}P7e(r=>({...r,get:(e,t,n)=>aK(e,t)||r.get(e,t,n),has:(e,t)=>!!aK(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(H7e(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function H7e(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eP="@firebase/app",iK="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new DT("@firebase/app"),Q7e="@firebase/app-compat",z7e="@firebase/analytics-compat",G7e="@firebase/analytics",V7e="@firebase/app-check-compat",$7e="@firebase/app-check",K7e="@firebase/auth",W7e="@firebase/auth-compat",q7e="@firebase/database",Y7e="@firebase/data-connect",X7e="@firebase/database-compat",Z7e="@firebase/functions",J7e="@firebase/functions-compat",eze="@firebase/installations",tze="@firebase/installations-compat",rze="@firebase/messaging",nze="@firebase/messaging-compat",aze="@firebase/performance",ize="@firebase/performance-compat",sze="@firebase/remote-config",oze="@firebase/remote-config-compat",lze="@firebase/storage",cze="@firebase/storage-compat",uze="@firebase/firestore",hze="@firebase/ai",dze="@firebase/firestore-compat",Aze="firebase",fze="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="[DEFAULT]",gze={[eP]:"fire-core",[Q7e]:"fire-core-compat",[G7e]:"fire-analytics",[z7e]:"fire-analytics-compat",[$7e]:"fire-app-check",[V7e]:"fire-app-check-compat",[K7e]:"fire-auth",[W7e]:"fire-auth-compat",[q7e]:"fire-rtdb",[Y7e]:"fire-data-connect",[X7e]:"fire-rtdb-compat",[Z7e]:"fire-fn",[J7e]:"fire-fn-compat",[eze]:"fire-iid",[tze]:"fire-iid-compat",[rze]:"fire-fcm",[nze]:"fire-fcm-compat",[aze]:"fire-perf",[ize]:"fire-perf-compat",[sze]:"fire-rc",[oze]:"fire-rc-compat",[lze]:"fire-gcs",[cze]:"fire-gcs-compat",[uze]:"fire-fst",[dze]:"fire-fst-compat",[hze]:"fire-vertex","fire-js":"fire-js",[Aze]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=new Map,pze=new Map,rP=new Map;function sK(r,e){try{r.container.addComponent(e)}catch(t){Mh.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ac(r){const e=r.name;if(rP.has(e))return Mh.debug(`There were multiple attempts to register component ${e}.`),!1;rP.set(e,r);for(const t of wB.values())sK(t,r);for(const t of pze.values())sK(t,r);return!0}function sf(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Gl(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mze={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},LA=new $p("app","Firebase",mze);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vze{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ml("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw LA.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp=fze;function fle(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:tP,automaticDataCollectionEnabled:!0},e),a=n.name;if(typeof a!="string"||!a)throw LA.create("bad-app-name",{appName:String(a)});if(t||(t=ile()),!t)throw LA.create("no-options");const i=wB.get(a);if(i){if(ZA(t,i.options)&&ZA(n,i.config))return i;throw LA.create("duplicate-app",{appName:a})}const s=new C7e(a);for(const l of rP.values())s.addComponent(l);const o=new vze(t,n,s);return wB.set(a,o),o}function MT(r=tP){const e=wB.get(r);if(!e&&r===tP&&ile())return fle();if(!e)throw LA.create("no-app",{appName:r});return e}function js(r,e,t){var n;let a=(n=gze[r])!==null&&n!==void 0?n:r;t&&(a+=`-${t}`);const i=a.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${a}" with version "${e}":`];i&&o.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mh.warn(o.join(" "));return}ac(new ml(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yze="firebase-heartbeat-database",xze=1,Jb="firebase-heartbeat-store";let ZD=null;function gle(){return ZD||(ZD=Ale(yze,xze,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Jb)}catch(t){console.warn(t)}}}}).catch(r=>{throw LA.create("idb-open",{originalErrorMessage:r.message})})),ZD}async function bze(r){try{const t=(await gle()).transaction(Jb),n=await t.objectStore(Jb).get(ple(r));return await t.done,n}catch(e){if(e instanceof bl)Mh.warn(e.message);else{const t=LA.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mh.warn(t.message)}}}async function oK(r,e){try{const n=(await gle()).transaction(Jb,"readwrite");await n.objectStore(Jb).put(e,ple(r)),await n.done}catch(t){if(t instanceof bl)Mh.warn(t.message);else{const n=LA.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Mh.warn(n.message)}}}function ple(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wze=1024,Sze=30;class _ze{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bze(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=lK();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>Sze){const s=Nze(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Mh.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lK(),{heartbeatsToSend:n,unsentEntries:a}=Cze(this._heartbeatsCache.heartbeats),i=bB(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Mh.warn(t),""}}}function lK(){return new Date().toISOString().substring(0,10)}function Cze(r,e=wze){const t=[];let n=r.slice();for(const a of r){const i=t.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),cK(t)>e){i.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),cK(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Bze{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cle()?ule().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bze(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return oK(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return oK(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function cK(r){return bB(JSON.stringify({version:2,heartbeats:r})).length}function Nze(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tze(r){ac(new ml("platform-logger",e=>new U7e(e),"PRIVATE")),ac(new ml("heartbeat",e=>new _ze(e),"PRIVATE")),js(eP,iK,r),js(eP,iK,"esm2017"),js("fire-js","")}Tze("");var Ize="firebase",Eze="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */js(Ize,Eze,"app");const mle="@firebase/installations",u6="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vle=1e4,yle=`w:${u6}`,xle="FIS_v2",Dze="https://firebaseinstallations.googleapis.com/v1",Mze=60*60*1e3,Rze="installations",Lze="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pze={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Cp=new $p(Rze,Lze,Pze);function ble(r){return r instanceof bl&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wle({projectId:r}){return`${Dze}/projects/${r}/installations`}function Sle(r){return{token:r.token,requestStatus:2,expiresIn:Fze(r.expiresIn),creationTime:Date.now()}}async function _le(r,e){const n=(await e.json()).error;return Cp.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Cle({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function kze(r,{refreshToken:e}){const t=Cle(r);return t.append("Authorization",jze(e)),t}async function Ble(r){const e=await r();return e.status>=500&&e.status<600?r():e}function Fze(r){return Number(r.replace("s","000"))}function jze(r){return`${xle} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oze({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const n=wle(r),a=Cle(r),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const s={fid:t,authVersion:xle,appId:r.appId,sdkVersion:yle},o={method:"POST",headers:a,body:JSON.stringify(s)},l=await Ble(()=>fetch(n,o));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:Sle(c.authToken)}}else throw await _le("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nle(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uze(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hze=/^[cdef][\w-]{21}$/,nP="";function Qze(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=zze(r);return Hze.test(t)?t:nP}catch{return nP}}function zze(r){return Uze(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tle=new Map;function Ile(r,e){const t=RT(r);Ele(t,e),Gze(t,e)}function Ele(r,e){const t=Tle.get(r);if(t)for(const n of t)n(e)}function Gze(r,e){const t=Vze();t&&t.postMessage({key:r,fid:e}),$ze()}let kg=null;function Vze(){return!kg&&"BroadcastChannel"in self&&(kg=new BroadcastChannel("[Firebase] FID Change"),kg.onmessage=r=>{Ele(r.data.key,r.data.fid)}),kg}function $ze(){Tle.size===0&&kg&&(kg.close(),kg=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kze="firebase-installations-database",Wze=1,Bp="firebase-installations-store";let JD=null;function h6(){return JD||(JD=Ale(Kze,Wze,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Bp)}}})),JD}async function SB(r,e){const t=RT(r),a=(await h6()).transaction(Bp,"readwrite"),i=a.objectStore(Bp),s=await i.get(t);return await i.put(e,t),await a.done,(!s||s.fid!==e.fid)&&Ile(r,e.fid),e}async function Dle(r){const e=RT(r),n=(await h6()).transaction(Bp,"readwrite");await n.objectStore(Bp).delete(e),await n.done}async function LT(r,e){const t=RT(r),a=(await h6()).transaction(Bp,"readwrite"),i=a.objectStore(Bp),s=await i.get(t),o=e(s);return o===void 0?await i.delete(t):await i.put(o,t),await a.done,o&&(!s||s.fid!==o.fid)&&Ile(r,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(r){let e;const t=await LT(r.appConfig,n=>{const a=qze(n),i=Yze(r,a);return e=i.registrationPromise,i.installationEntry});return t.fid===nP?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function qze(r){const e=r||{fid:Qze(),registrationStatus:0};return Mle(e)}function Yze(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Cp.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=Xze(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Zze(r)}:{installationEntry:e}}async function Xze(r,e){try{const t=await Oze(r,e);return SB(r.appConfig,t)}catch(t){throw ble(t)&&t.customData.serverCode===409?await Dle(r.appConfig):await SB(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Zze(r){let e=await uK(r.appConfig);for(;e.registrationStatus===1;)await Nle(100),e=await uK(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await d6(r);return n||t}return e}function uK(r){return LT(r,e=>{if(!e)throw Cp.create("installation-not-found");return Mle(e)})}function Mle(r){return Jze(r)?{fid:r.fid,registrationStatus:0}:r}function Jze(r){return r.registrationStatus===1&&r.registrationTime+vle<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e9e({appConfig:r,heartbeatServiceProvider:e},t){const n=t9e(r,t),a=kze(r,t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const s={installation:{sdkVersion:yle,appId:r.appId}},o={method:"POST",headers:a,body:JSON.stringify(s)},l=await Ble(()=>fetch(n,o));if(l.ok){const c=await l.json();return Sle(c)}else throw await _le("Generate Auth Token",l)}function t9e(r,{fid:e}){return`${wle(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A6(r,e=!1){let t;const n=await LT(r.appConfig,i=>{if(!Rle(i))throw Cp.create("not-registered");const s=i.authToken;if(!e&&a9e(s))return i;if(s.requestStatus===1)return t=r9e(r,e),i;{if(!navigator.onLine)throw Cp.create("app-offline");const o=s9e(i);return t=n9e(r,o),o}});return t?await t:n.authToken}async function r9e(r,e){let t=await hK(r.appConfig);for(;t.authToken.requestStatus===1;)await Nle(100),t=await hK(r.appConfig);const n=t.authToken;return n.requestStatus===0?A6(r,e):n}function hK(r){return LT(r,e=>{if(!Rle(e))throw Cp.create("not-registered");const t=e.authToken;return o9e(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function n9e(r,e){try{const t=await e9e(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await SB(r.appConfig,n),t}catch(t){if(ble(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Dle(r.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await SB(r.appConfig,n)}throw t}}function Rle(r){return r!==void 0&&r.registrationStatus===2}function a9e(r){return r.requestStatus===2&&!i9e(r)}function i9e(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+Mze}function s9e(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function o9e(r){return r.requestStatus===1&&r.requestTime+vle<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l9e(r){const e=r,{installationEntry:t,registrationPromise:n}=await d6(e);return n?n.catch(console.error):A6(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9e(r,e=!1){const t=r;return await u9e(t),(await A6(t,e)).token}async function u9e(r){const{registrationPromise:e}=await d6(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9e(r){if(!r||!r.options)throw eM("App Configuration");if(!r.name)throw eM("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw eM(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function eM(r){return Cp.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lle="installations",d9e="installations-internal",A9e=r=>{const e=r.getProvider("app").getImmediate(),t=h9e(e),n=sf(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},f9e=r=>{const e=r.getProvider("app").getImmediate(),t=sf(e,Lle).getImmediate();return{getId:()=>l9e(t),getToken:a=>c9e(t,a)}};function g9e(){ac(new ml(Lle,A9e,"PUBLIC")),ac(new ml(d9e,f9e,"PRIVATE"))}g9e();js(mle,u6);js(mle,u6,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B="analytics",p9e="firebase_id",m9e="origin",v9e=60*1e3,y9e="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",f6="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new DT("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9e={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},_o=new $p("analytics","Analytics",x9e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9e(r){if(!r.startsWith(f6)){const e=_o.create("invalid-gtag-resource",{gtagURL:r});return Os.warn(e.message),""}return r}function Ple(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function w9e(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function S9e(r,e){const t=w9e("firebase-js-sdk-policy",{createScriptURL:b9e}),n=document.createElement("script"),a=`${f6}?l=${r}&id=${e}`;n.src=t?t==null?void 0:t.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function _9e(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function C9e(r,e,t,n,a,i){const s=n[a];try{if(s)await e[s];else{const l=(await Ple(t)).find(c=>c.measurementId===a);l&&await e[l.appId]}}catch(o){Os.error(o)}r("config",a,i)}async function B9e(r,e,t,n,a){try{let i=[];if(a&&a.send_to){let s=a.send_to;Array.isArray(s)||(s=[s]);const o=await Ple(t);for(const l of s){const c=o.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),r("event",n,a||{})}catch(i){Os.error(i)}}function N9e(r,e,t,n){async function a(i,...s){try{if(i==="event"){const[o,l]=s;await B9e(r,e,t,o,l)}else if(i==="config"){const[o,l]=s;await C9e(r,e,t,n,o,l)}else if(i==="consent"){const[o,l]=s;r("consent",o,l)}else if(i==="get"){const[o,l,c]=s;r("get",o,l,c)}else if(i==="set"){const[o]=s;r("set",o)}else r(i,...s)}catch(o){Os.error(o)}}return a}function T9e(r,e,t,n,a){let i=function(...s){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(i=window[a]),window[a]=N9e(i,r,e,t),{gtagCore:i,wrappedGtag:window[a]}}function I9e(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(f6)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9e=30,D9e=1e3;class M9e{constructor(e={},t=D9e){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const kle=new M9e;function R9e(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function L9e(r){var e;const{appId:t,apiKey:n}=r,a={method:"GET",headers:R9e(n)},i=y9e.replace("{app-id}",t),s=await fetch(i,a);if(s.status!==200&&s.status!==304){let o="";try{const l=await s.json();!((e=l.error)===null||e===void 0)&&e.message&&(o=l.error.message)}catch{}throw _o.create("config-fetch-failed",{httpStatus:s.status,responseMessage:o})}return s.json()}async function P9e(r,e=kle,t){const{appId:n,apiKey:a,measurementId:i}=r.options;if(!n)throw _o.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:n};throw _o.create("no-api-key")}const s=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new j9e;return setTimeout(async()=>{o.abort()},v9e),Fle({appId:n,apiKey:a,measurementId:i},s,o,e)}async function Fle(r,{throttleEndTimeMillis:e,backoffCount:t},n,a=kle){var i;const{appId:s,measurementId:o}=r;try{await k9e(n,e)}catch(l){if(o)return Os.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await L9e(r);return a.deleteThrottleMetadata(s),l}catch(l){const c=l;if(!F9e(c)){if(a.deleteThrottleMetadata(s),o)return Os.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw l}const u=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?tK(t,a.intervalMillis,E9e):tK(t,a.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return a.setThrottleMetadata(s,h),Os.debug(`Calling attemptFetch again in ${u} millis`),Fle(r,h,n,a)}}function k9e(r,e){return new Promise((t,n)=>{const a=Math.max(e-Date.now(),0),i=setTimeout(t,a);r.addEventListener(()=>{clearTimeout(i),n(_o.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function F9e(r){if(!(r instanceof bl)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class j9e{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function O9e(r,e,t,n,a){if(a&&a.global){r("event",t,n);return}else{const i=await e,s=Object.assign(Object.assign({},n),{send_to:i});r("event",t,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9e(){if(cle())try{await ule()}catch(r){return Os.warn(_o.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Os.warn(_o.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function H9e(r,e,t,n,a,i,s){var o;const l=P9e(r);l.then(A=>{t[A.measurementId]=A.appId,r.options.measurementId&&A.measurementId!==r.options.measurementId&&Os.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>Os.error(A)),e.push(l);const c=U9e().then(A=>{if(A)return n.getId()}),[u,h]=await Promise.all([l,c]);I9e(i)||S9e(i,u.measurementId),a("js",new Date);const d=(o=s==null?void 0:s.config)!==null&&o!==void 0?o:{};return d[m9e]="firebase",d.update=!0,h!=null&&(d[p9e]=h),a("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9e{constructor(e){this.app=e}_delete(){return delete K1[this.app.options.appId],Promise.resolve()}}let K1={},dK=[];const AK={};let tM="dataLayer",z9e="gtag",fK,jle,gK=!1;function G9e(){const r=[];if(lle()&&r.push("This is a browser extension environment."),u7e()||r.push("Cookies are not available."),r.length>0){const e=r.map((n,a)=>`(${a+1}) ${n}`).join(" "),t=_o.create("invalid-analytics-context",{errorInfo:e});Os.warn(t.message)}}function V9e(r,e,t){G9e();const n=r.options.appId;if(!n)throw _o.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Os.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw _o.create("no-api-key");if(K1[n]!=null)throw _o.create("already-exists",{id:n});if(!gK){_9e(tM);const{wrappedGtag:i,gtagCore:s}=T9e(K1,dK,AK,tM,z9e);jle=i,fK=s,gK=!0}return K1[n]=H9e(r,dK,AK,e,fK,tM,t),new Q9e(r)}function $9e(r=MT()){r=Hh(r);const e=sf(r,_B);return e.isInitialized()?e.getImmediate():K9e(r)}function K9e(r,e={}){const t=sf(r,_B);if(t.isInitialized()){const a=t.getImmediate();if(ZA(e,t.getOptions()))return a;throw _o.create("already-initialized")}return t.initialize({options:e})}function W9e(r,e,t,n){r=Hh(r),O9e(jle,K1[r.app.options.appId],e,t,n).catch(a=>Os.error(a))}const pK="@firebase/analytics",mK="0.10.17";function q9e(){ac(new ml(_B,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return V9e(n,a,t)},"PUBLIC")),ac(new ml("analytics-internal",r,"PRIVATE")),js(pK,mK),js(pK,mK,"esm2017");function r(e){try{const t=e.getProvider(_B).getImmediate();return{logEvent:(n,a,i)=>W9e(t,n,a,i)}}catch(t){throw _o.create("interop-component-reg-failed",{reason:t})}}}q9e();function Ole(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y9e=Ole,Ule=new $p("auth","Firebase",Ole());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=new DT("@firebase/auth");function X9e(r,...e){CB.logLevel<=un.WARN&&CB.warn(`Auth (${Kp}): ${r}`,...e)}function _5(r,...e){CB.logLevel<=un.ERROR&&CB.error(`Auth (${Kp}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(r,...e){throw g6(r,...e)}function tu(r,...e){return g6(r,...e)}function Hle(r,e,t){const n=Object.assign(Object.assign({},Y9e()),{[e]:t});return new $p("auth","Firebase",n).create(e,{appName:r.name})}function lp(r){return Hle(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g6(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Ule.create(r,...e)}function Ar(r,e,...t){if(!r)throw g6(e,...t)}function sh(r){const e="INTERNAL ASSERTION FAILED: "+r;throw _5(e),new Error(e)}function Lh(r,e){r||sh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Z9e(){return vK()==="http:"||vK()==="https:"}function vK(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z9e()||lle()||"connection"in navigator)?navigator.onLine:!0}function eGe(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lh(t>e,"Short delay should be less than long delay!"),this.isMobile=s7e()||l7e()}get(){return J9e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(r,e){Lh(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qle{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tGe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rGe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nGe=new Yw(3e4,6e4);function m6(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function my(r,e,t,n,a={}){return zle(r,a,async()=>{let i={},s={};n&&(e==="GET"?s=n:i={body:JSON.stringify(n)});const o=qw(Object.assign({key:r.config.apiKey},s)).slice(1),l=await r._getAdditionalHeaders();l["Content-Type"]="application/json",r.languageCode&&(l["X-Firebase-Locale"]=r.languageCode);const c=Object.assign({method:e,headers:l},i);return o7e()||(c.referrerPolicy="no-referrer"),r.emulatorConfig&&py(r.emulatorConfig.host)&&(c.credentials="include"),Qle.fetch()(await Gle(r,r.config.apiHost,t,o),c)})}async function zle(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},tGe),e);try{const a=new iGe(r),i=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw T_(r,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const o=i.ok?s.errorMessage:s.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw T_(r,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw T_(r,"email-already-in-use",s);if(l==="USER_DISABLED")throw T_(r,"user-disabled",s);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Hle(r,u,c);Rh(r,u)}}catch(a){if(a instanceof bl)throw a;Rh(r,"network-request-failed",{message:String(a)})}}async function aGe(r,e,t,n,a={}){const i=await my(r,e,t,n,a);return"mfaPendingCredential"in i&&Rh(r,"multi-factor-auth-required",{_serverResponse:i}),i}async function Gle(r,e,t,n){const a=`${e}${t}?${n}`,i=r,s=i.config.emulator?p6(r.config,a):`${r.config.apiScheme}://${a}`;return rGe.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(s).toString():s}class iGe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(tu(this.auth,"network-request-failed")),nGe.get())})}}function T_(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const a=tu(r,e,n);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sGe(r,e){return my(r,"POST","/v1/accounts:delete",e)}async function BB(r,e){return my(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oGe(r,e=!1){const t=Hh(r),n=await t.getIdToken(e),a=v6(n);Ar(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,s=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:W1(rM(a.auth_time)),issuedAtTime:W1(rM(a.iat)),expirationTime:W1(rM(a.exp)),signInProvider:s||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function rM(r){return Number(r)*1e3}function v6(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return _5("JWT malformed, contained fewer than 3 sections"),null;try{const a=rle(t);return a?JSON.parse(a):(_5("Failed to decode base64 JWT payload"),null)}catch(a){return _5("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function yK(r){const e=v6(r);return Ar(e,"internal-error"),Ar(typeof e.exp<"u","internal-error"),Ar(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof bl&&lGe(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function lGe({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cGe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=W1(this.lastLoginAt),this.creationTime=W1(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NB(r){var e;const t=r.auth,n=await r.getIdToken(),a=await ew(r,BB(t,{idToken:n}));Ar(a==null?void 0:a.users.length,t,"internal-error");const i=a.users[0];r._notifyReloadListener(i);const s=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Vle(i.providerUserInfo):[],o=hGe(r.providerData,s),l=r.isAnonymous,c=!(r.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new iP(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(r,h)}async function uGe(r){const e=Hh(r);await NB(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hGe(r,e){return[...r.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function Vle(r){return r.map(e=>{var{providerId:t}=e,n=dP(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dGe(r,e){const t=await zle(r,{},async()=>{const n=qw({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=r.config,s=await Gle(r,a,"/v1/token",`key=${i}`),o=await r._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return r.emulatorConfig&&py(r.emulatorConfig.host)&&(l.credentials="include"),Qle.fetch()(s,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AGe(r,e){return my(r,"POST","/v2/accounts:revokeToken",m6(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ar(e.idToken,"internal-error"),Ar(typeof e.idToken<"u","internal-error"),Ar(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yK(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ar(e.length!==0,"internal-error");const t=yK(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ar(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:a,expiresIn:i}=await dGe(e,t);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:a,expirationTime:i}=t,s=new Zv;return n&&(Ar(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),a&&(Ar(typeof a=="string","internal-error",{appName:e}),s.accessToken=a),i&&(Ar(typeof i=="number","internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zv,this.toJSON())}_performRefresh(){return sh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(r,e){Ar(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ql{constructor(e){var{uid:t,auth:n,stsTokenManager:a}=e,i=dP(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cGe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new iP(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ew(this,this.stsTokenManager.getToken(this.auth,e));return Ar(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oGe(this,e)}reload(){return uGe(this)}_assign(e){this!==e&&(Ar(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ql(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ar(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await NB(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gl(this.auth.app))return Promise.reject(lp(this.auth));const e=await this.getIdToken();return await ew(this,sGe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,a,i,s,o,l,c,u;const h=(n=t.displayName)!==null&&n!==void 0?n:void 0,d=(a=t.email)!==null&&a!==void 0?a:void 0,A=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,g=(s=t.photoURL)!==null&&s!==void 0?s:void 0,p=(o=t.tenantId)!==null&&o!==void 0?o:void 0,v=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=t.createdAt)!==null&&c!==void 0?c:void 0,y=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:b,isAnonymous:S,providerData:_,stsTokenManager:C}=t;Ar(x&&C,e,"internal-error");const w=Zv.fromJSON(this.name,C);Ar(typeof x=="string",e,"internal-error"),Ed(h,e.name),Ed(d,e.name),Ar(typeof b=="boolean",e,"internal-error"),Ar(typeof S=="boolean",e,"internal-error"),Ed(A,e.name),Ed(g,e.name),Ed(p,e.name),Ed(v,e.name),Ed(m,e.name),Ed(y,e.name);const B=new ql({uid:x,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:S,photoURL:g,phoneNumber:A,tenantId:p,stsTokenManager:w,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(B.providerData=_.map(D=>Object.assign({},D))),v&&(B._redirectEventId=v),B}static async _fromIdTokenResponse(e,t,n=!1){const a=new Zv;a.updateFromServerResponse(t);const i=new ql({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await NB(i),i}static async _fromGetAccountInfoResponse(e,t,n){const a=t.users[0];Ar(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?Vle(a.providerUserInfo):[],s=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),o=new Zv;o.updateFromIdToken(n);const l=new ql({uid:a.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new iP(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK=new Map;function oh(r){Lh(r instanceof Function,"Expected a class definition");let e=xK.get(r);return e?(Lh(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,xK.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $le{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$le.type="NONE";const bK=$le;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(r,e,t){return`firebase:${r}:${e}:${t}`}class Jv{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=C5(this.userKey,a.apiKey,i),this.fullPersistenceKey=C5("persistence",a.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await BB(this.auth,{idToken:e}).catch(()=>{});return t?ql._fromGetAccountInfoResponse(this.auth,t,e):null}return ql._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Jv(oh(bK),e,n);const a=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=a[0]||oh(bK);const s=C5(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const u=await c._get(s);if(u){let h;if(typeof u=="string"){const d=await BB(e,{idToken:u}).catch(()=>{});if(!d)break;h=await ql._fromGetAccountInfoResponse(e,d,u)}else h=ql._fromJSON(e,u);c!==i&&(o=h),i=c;break}}catch{}const l=a.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Jv(i,e,n):(i=l[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async c=>{if(c!==i)try{await c._remove(s)}catch{}})),new Jv(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wK(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yle(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kle(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zle(e))return"Blackberry";if(Jle(e))return"Webos";if(Wle(e))return"Safari";if((e.includes("chrome/")||qle(e))&&!e.includes("edge/"))return"Chrome";if(Xle(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Kle(r=bs()){return/firefox\//i.test(r)}function Wle(r=bs()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qle(r=bs()){return/crios\//i.test(r)}function Yle(r=bs()){return/iemobile/i.test(r)}function Xle(r=bs()){return/android/i.test(r)}function Zle(r=bs()){return/blackberry/i.test(r)}function Jle(r=bs()){return/webos/i.test(r)}function y6(r=bs()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function fGe(r=bs()){var e;return y6(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gGe(){return c7e()&&document.documentMode===10}function ece(r=bs()){return y6(r)||Xle(r)||Jle(r)||Zle(r)||/windows phone/i.test(r)||Yle(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tce(r,e=[]){let t;switch(r){case"Browser":t=wK(bs());break;case"Worker":t=`${wK(bs())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pGe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((s,o)=>{try{const l=e(i);s(l)}catch(l){o(l)}});n.onAbort=t,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mGe(r,e={}){return my(r,"GET","/v2/passwordPolicy",m6(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vGe=6;class yGe{constructor(e){var t,n,a,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:vGe,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,a,i,s,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(a=l.containsLowercaseLetter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xGe{constructor(e,t,n,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SK(this),this.idTokenSubscription=new SK(this),this.beforeStateQueue=new pGe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ule,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oh(t)),this._initializationPromise=this.queue(async()=>{var n,a,i;if(!this._deleted&&(this.persistenceManager=await Jv.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await BB(this,{idToken:e}),n=await ql._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Gl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=a==null?void 0:a._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(a=l.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(s){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ar(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await NB(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eGe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gl(this.app))return Promise.reject(lp(this));const t=e?Hh(e):null;return t&&Ar(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ar(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gl(this.app)?Promise.reject(lp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gl(this.app)?Promise.reject(lp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mGe(this),t=new yGe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $p("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await AGe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oh(e)||this._popupRedirectResolver;Ar(t,this,"argument-error"),this.redirectPersistenceManager=await Jv.create(this,[oh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,a){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ar(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,n,a);return()=>{s=!0,l()}}else{const l=e.addObserver(t);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ar(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tce(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(Gl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&X9e(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function x6(r){return Hh(r)}class SK{constructor(e){this.auth=e,this.observer=null,this.addObserver=g7e(t=>this.observer=t)}get next(){return Ar(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b6={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bGe(r){b6=r}function wGe(r){return b6.loadJS(r)}function SGe(){return b6.gapiScript}function _Ge(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CGe(r,e){const t=sf(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),i=t.getOptions();if(ZA(i,e??{}))return a;Rh(a,"already-initialized")}return t.initialize({options:e})}function BGe(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(oh);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function NGe(r,e,t){const n=x6(r);Ar(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=rce(e),{host:s,port:o}=TGe(e),l=o===null?"":`:${o}`,c={url:`${i}//${s}${l}/`},u=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Ar(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Ar(ZA(c,n.config.emulator)&&ZA(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,py(s)?(o6(`${i}//${s}${l}`),l6("Auth",!0)):IGe()}function rce(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function TGe(r){const e=rce(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:_K(n.substr(i.length+1))}}else{const[i,s]=n.split(":");return{host:i,port:_K(s)}}}function _K(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function IGe(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nce{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sh("not implemented")}_getIdTokenResponse(e){return sh("not implemented")}_linkToIdToken(e,t){return sh("not implemented")}_getReauthenticationResolver(e){return sh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(r,e){return aGe(r,"POST","/v1/accounts:signInWithIdp",m6(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EGe="http://localhost";class Np extends nce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Np(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=t,i=dP(t,["providerId","signInMethod"]);if(!n||!a)return null;const s=new Np(n,a);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return e0(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,e0(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,e0(e,t)}buildRequest(){const e={requestUri:EGe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qw(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ace{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw extends ace{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends Xw{constructor(){super("facebook.com")}static credential(e){return Np._fromParams({providerId:Kd.PROVIDER_ID,signInMethod:Kd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kd.credentialFromTaggedObject(e)}static credentialFromError(e){return Kd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kd.credential(e.oauthAccessToken)}catch{return null}}}Kd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends Xw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Np._fromParams({providerId:Wd.PROVIDER_ID,signInMethod:Wd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wd.credentialFromTaggedObject(e)}static credentialFromError(e){return Wd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Wd.credential(t,n)}catch{return null}}}Wd.GOOGLE_SIGN_IN_METHOD="google.com";Wd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends Xw{constructor(){super("github.com")}static credential(e){return Np._fromParams({providerId:qd.PROVIDER_ID,signInMethod:qd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qd.credentialFromTaggedObject(e)}static credentialFromError(e){return qd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qd.credential(e.oauthAccessToken)}catch{return null}}}qd.GITHUB_SIGN_IN_METHOD="github.com";qd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd extends Xw{constructor(){super("twitter.com")}static credential(e,t){return Np._fromParams({providerId:Yd.PROVIDER_ID,signInMethod:Yd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yd.credentialFromTaggedObject(e)}static credentialFromError(e){return Yd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Yd.credential(t,n)}catch{return null}}}Yd.TWITTER_SIGN_IN_METHOD="twitter.com";Yd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,a=!1){const i=await ql._fromIdTokenResponse(e,n,a),s=CK(n);return new P0({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const a=CK(n);return new P0({user:e,providerId:a,_tokenResponse:n,operationType:t})}}function CK(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB extends bl{constructor(e,t,n,a){var i;super(t.code,t.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,TB.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,a){return new TB(e,t,n,a)}}function ice(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?TB._fromErrorAndOperation(r,i,e,n):i})}async function DGe(r,e,t=!1){const n=await ew(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return P0._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MGe(r,e,t=!1){const{auth:n}=r;if(Gl(n.app))return Promise.reject(lp(n));const a="reauthenticate";try{const i=await ew(r,ice(n,a,e,r),t);Ar(i.idToken,n,"internal-error");const s=v6(i.idToken);Ar(s,n,"internal-error");const{sub:o}=s;return Ar(r.uid===o,n,"user-mismatch"),P0._forOperation(r,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Rh(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RGe(r,e,t=!1){if(Gl(r.app))return Promise.reject(lp(r));const n="signIn",a=await ice(r,n,e),i=await P0._fromIdTokenResponse(r,n,a);return t||await r._updateCurrentUser(i.user),i}function LGe(r,e,t,n){return Hh(r).onIdTokenChanged(e,t,n)}function PGe(r,e,t){return Hh(r).beforeAuthStateChanged(e,t)}const IB="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sce{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(IB,"1"),this.storage.removeItem(IB),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kGe=1e3,FGe=10;class oce extends sce{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ece(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),a=this.localCache[t];n!==a&&e(t,a,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const n=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const s=this.storage.getItem(n);!t&&this.localCache[n]===s||this.notifyListeners(n,s)},i=this.storage.getItem(n);gGe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,FGe):a()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},kGe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oce.type="LOCAL";const jGe=oce;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lce extends sce{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lce.type="SESSION";const cce=lce;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OGe(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const n=new PT(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:a,data:i}=t.data,s=this.handlersMap[a];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(s).map(async c=>c(t.origin,i)),l=await OGe(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}PT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UGe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,s;return new Promise((o,l)=>{const c=w6("",20);a.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);s={messageChannel:a,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(d.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(s),a.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[a.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(){return window}function HGe(r){ru().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uce(){return typeof ru().WorkerGlobalScope<"u"&&typeof ru().importScripts=="function"}async function QGe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zGe(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function GGe(){return uce()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hce="firebaseLocalStorageDb",VGe=1,EB="firebaseLocalStorage",dce="fbase_key";class Zw{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kT(r,e){return r.transaction([EB],e?"readwrite":"readonly").objectStore(EB)}function $Ge(){const r=indexedDB.deleteDatabase(hce);return new Zw(r).toPromise()}function sP(){const r=indexedDB.open(hce,VGe);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(EB,{keyPath:dce})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(EB)?e(n):(n.close(),await $Ge(),e(await sP()))})})}async function BK(r,e,t){const n=kT(r,!0).put({[dce]:e,value:t});return new Zw(n).toPromise()}async function KGe(r,e){const t=kT(r,!1).get(e),n=await new Zw(t).toPromise();return n===void 0?null:n.value}function NK(r,e){const t=kT(r,!0).delete(e);return new Zw(t).toPromise()}const WGe=800,qGe=3;class Ace{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sP(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>qGe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uce()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=PT._getInstance(GGe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await QGe(),!this.activeServiceWorker)return;this.sender=new UGe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zGe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sP();return await BK(e,IB,"1"),await NK(e,IB),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>BK(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>KGe(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>NK(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=kT(a,!1).getAll();return new Zw(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WGe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ace.type="LOCAL";const YGe=Ace;new Yw(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XGe(r,e){return e?oh(e):(Ar(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6 extends nce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return e0(e,this._buildIdpRequest())}_linkToIdToken(e,t){return e0(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return e0(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZGe(r){return RGe(r.auth,new S6(r),r.bypassAuthState)}function JGe(r){const{auth:e,user:t}=r;return Ar(t,e,"internal-error"),MGe(t,new S6(r),r.bypassAuthState)}async function eVe(r){const{auth:e,user:t}=r;return Ar(t,e,"internal-error"),DGe(t,new S6(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fce{constructor(e,t,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:a,tenantId:i,error:s,type:o}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZGe;case"linkViaPopup":case"linkViaRedirect":return eVe;case"reauthViaPopup":case"reauthViaRedirect":return JGe;default:Rh(this.auth,"internal-error")}}resolve(e){Lh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tVe=new Yw(2e3,1e4);class Dv extends fce{constructor(e,t,n,a,i){super(e,t,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Dv.currentPopupAction&&Dv.currentPopupAction.cancel(),Dv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ar(e,this.auth,"internal-error"),e}async onExecution(){Lh(this.filter.length===1,"Popup operations only handle one event");const e=w6();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(tu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tVe.get())};e()}}Dv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rVe="pendingRedirect",B5=new Map;class nVe extends fce{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=B5.get(this.auth._key());if(!e){try{const n=await aVe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}B5.set(this.auth._key(),e)}return this.bypassAuthState||B5.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aVe(r,e){const t=oVe(e),n=sVe(r);if(!await n._isAvailable())return!1;const a=await n._get(t)==="true";return await n._remove(t),a}function iVe(r,e){B5.set(r._key(),e)}function sVe(r){return oh(r._redirectPersistence)}function oVe(r){return C5(rVe,r.config.apiKey,r.name)}async function lVe(r,e,t=!1){if(Gl(r.app))return Promise.reject(lp(r));const n=x6(r),a=XGe(n,e),s=await new nVe(n,a,t).execute();return s&&!t&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cVe=10*60*1e3;class uVe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hVe(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!gce(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(tu(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cVe&&this.cachedEventUids.clear(),this.cachedEventUids.has(TK(e))}saveEventToCache(e){this.cachedEventUids.add(TK(e)),this.lastProcessedEventTime=Date.now()}}function TK(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function gce({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hVe(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gce(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dVe(r,e={}){return my(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AVe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fVe=/^https?/;async function gVe(r){if(r.config.emulator)return;const{authorizedDomains:e}=await dVe(r);for(const t of e)try{if(pVe(t))return}catch{}Rh(r,"unauthorized-domain")}function pVe(r){const e=aP(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const s=new URL(r);return s.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===n}if(!fVe.test(t))return!1;if(AVe.test(r))return n===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mVe=new Yw(3e4,6e4);function IK(){const r=ru().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function vVe(r){return new Promise((e,t)=>{var n,a,i;function s(){IK(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IK(),t(tu(r,"network-request-failed"))},timeout:mVe.get()})}if(!((a=(n=ru().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=ru().gapi)===null||i===void 0)&&i.load)s();else{const o=_Ge("iframefcb");return ru()[o]=()=>{gapi.load?s():t(tu(r,"network-request-failed"))},wGe(`${SGe()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw N5=null,e})}let N5=null;function yVe(r){return N5=N5||vVe(r),N5}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xVe=new Yw(5e3,15e3),bVe="__/auth/iframe",wVe="emulator/auth/iframe",SVe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_Ve=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CVe(r){const e=r.config;Ar(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?p6(e,wVe):`https://${r.config.authDomain}/${bVe}`,n={apiKey:e.apiKey,appName:r.name,v:Kp},a=_Ve.get(r.config.apiHost);a&&(n.eid=a);const i=r._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${qw(n).slice(1)}`}async function BVe(r){const e=await yVe(r),t=ru().gapi;return Ar(t,r,"internal-error"),e.open({where:document.body,url:CVe(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SVe,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const s=tu(r,"network-request-failed"),o=ru().setTimeout(()=>{i(s)},xVe.get());function l(){ru().clearTimeout(o),a(n)}n.ping(l).then(l,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NVe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TVe=500,IVe=600,EVe="_blank",DVe="http://localhost";class EK{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MVe(r,e,t,n=TVe,a=IVe){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},NVe),{width:n.toString(),height:a.toString(),top:i,left:s}),c=bs().toLowerCase();t&&(o=qle(c)?EVe:t),Kle(c)&&(e=e||DVe,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[A,g])=>`${d}${A}=${g},`,"");if(fGe(c)&&o!=="_self")return RVe(e||"",o),new EK(null);const h=window.open(e||"",o,u);Ar(h,r,"popup-blocked");try{h.focus()}catch{}return new EK(h)}function RVe(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LVe="__/auth/handler",PVe="emulator/auth/handler",kVe=encodeURIComponent("fac");async function DK(r,e,t,n,a,i){Ar(r.config.authDomain,r,"auth-domain-config-required"),Ar(r.config.apiKey,r,"invalid-api-key");const s={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Kp,eventId:a};if(e instanceof ace){e.setDefaultLanguage(r.languageCode),s.providerId=e.providerId||"",f7e(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))s[u]=h}if(e instanceof Xw){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(s.scopes=u.join(","))}r.tenantId&&(s.tid=r.tenantId);const o=s;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await r._getAppCheckToken(),c=l?`#${kVe}=${encodeURIComponent(l)}`:"";return`${FVe(r)}?${qw(o).slice(1)}${c}`}function FVe({config:r}){return r.emulator?p6(r,PVe):`https://${r.authDomain}/${LVe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="webStorageSupport";class jVe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cce,this._completeRedirectFn=lVe,this._overrideRedirectResult=iVe}async _openPopup(e,t,n,a){var i;Lh((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await DK(e,t,n,aP(),a);return MVe(e,s,w6())}async _openRedirect(e,t,n,a){await this._originValidation(e);const i=await DK(e,t,n,aP(),a);return HGe(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:i}=this.eventManagers[t];return a?Promise.resolve(a):(Lh(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await BVe(e),n=new uVe(e);return t.register("authEvent",a=>(Ar(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nM,{type:nM},a=>{var i;const s=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[nM];s!==void 0&&t(!!s),Rh(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gVe(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ece()||Wle()||y6()}}const OVe=jVe;var MK="@firebase/auth",RK="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UVe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ar(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HVe(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QVe(r){ac(new ml("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Ar(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:s,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tce(r)},c=new xGe(n,a,i,l);return BGe(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ac(new ml("auth-internal",e=>{const t=x6(e.getProvider("auth").getImmediate());return(n=>new UVe(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),js(MK,RK,HVe(r)),js(MK,RK,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zVe=5*60,GVe=sle("authIdTokenMaxAge")||zVe;let LK=null;const VVe=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>GVe)return;const a=t==null?void 0:t.token;LK!==a&&(LK=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function $Ve(r=MT()){const e=sf(r,"auth");if(e.isInitialized())return e.getImmediate();const t=CGe(r,{popupRedirectResolver:OVe,persistence:[YGe,jGe,cce]}),n=sle("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const s=VVe(i.toString());PGe(t,s,()=>s(t.currentUser)),LGe(t,o=>s(o))}}const a=nle("auth");return a&&NGe(t,`http://${a}`),t}function KVe(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}bGe({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=a=>{const i=tu("internal-error");i.customData=a,t(i)},n.type="text/javascript",n.charset="UTF-8",KVe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QVe("Browser");var PK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _6;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,w){function B(){}B.prototype=w.prototype,C.D=w.prototype,C.prototype=new B,C.prototype.constructor=C,C.C=function(D,T,E){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return w.prototype[T].apply(D,R)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,w,B){B||(B=0);var D=Array(16);if(typeof w=="string")for(var T=0;16>T;++T)D[T]=w.charCodeAt(B++)|w.charCodeAt(B++)<<8|w.charCodeAt(B++)<<16|w.charCodeAt(B++)<<24;else for(T=0;16>T;++T)D[T]=w[B++]|w[B++]<<8|w[B++]<<16|w[B++]<<24;w=C.g[0],B=C.g[1],T=C.g[2];var E=C.g[3],R=w+(E^B&(T^E))+D[0]+3614090360&4294967295;w=B+(R<<7&4294967295|R>>>25),R=E+(T^w&(B^T))+D[1]+3905402710&4294967295,E=w+(R<<12&4294967295|R>>>20),R=T+(B^E&(w^B))+D[2]+606105819&4294967295,T=E+(R<<17&4294967295|R>>>15),R=B+(w^T&(E^w))+D[3]+3250441966&4294967295,B=T+(R<<22&4294967295|R>>>10),R=w+(E^B&(T^E))+D[4]+4118548399&4294967295,w=B+(R<<7&4294967295|R>>>25),R=E+(T^w&(B^T))+D[5]+1200080426&4294967295,E=w+(R<<12&4294967295|R>>>20),R=T+(B^E&(w^B))+D[6]+2821735955&4294967295,T=E+(R<<17&4294967295|R>>>15),R=B+(w^T&(E^w))+D[7]+4249261313&4294967295,B=T+(R<<22&4294967295|R>>>10),R=w+(E^B&(T^E))+D[8]+1770035416&4294967295,w=B+(R<<7&4294967295|R>>>25),R=E+(T^w&(B^T))+D[9]+2336552879&4294967295,E=w+(R<<12&4294967295|R>>>20),R=T+(B^E&(w^B))+D[10]+4294925233&4294967295,T=E+(R<<17&4294967295|R>>>15),R=B+(w^T&(E^w))+D[11]+2304563134&4294967295,B=T+(R<<22&4294967295|R>>>10),R=w+(E^B&(T^E))+D[12]+1804603682&4294967295,w=B+(R<<7&4294967295|R>>>25),R=E+(T^w&(B^T))+D[13]+4254626195&4294967295,E=w+(R<<12&4294967295|R>>>20),R=T+(B^E&(w^B))+D[14]+2792965006&4294967295,T=E+(R<<17&4294967295|R>>>15),R=B+(w^T&(E^w))+D[15]+1236535329&4294967295,B=T+(R<<22&4294967295|R>>>10),R=w+(T^E&(B^T))+D[1]+4129170786&4294967295,w=B+(R<<5&4294967295|R>>>27),R=E+(B^T&(w^B))+D[6]+3225465664&4294967295,E=w+(R<<9&4294967295|R>>>23),R=T+(w^B&(E^w))+D[11]+643717713&4294967295,T=E+(R<<14&4294967295|R>>>18),R=B+(E^w&(T^E))+D[0]+3921069994&4294967295,B=T+(R<<20&4294967295|R>>>12),R=w+(T^E&(B^T))+D[5]+3593408605&4294967295,w=B+(R<<5&4294967295|R>>>27),R=E+(B^T&(w^B))+D[10]+38016083&4294967295,E=w+(R<<9&4294967295|R>>>23),R=T+(w^B&(E^w))+D[15]+3634488961&4294967295,T=E+(R<<14&4294967295|R>>>18),R=B+(E^w&(T^E))+D[4]+3889429448&4294967295,B=T+(R<<20&4294967295|R>>>12),R=w+(T^E&(B^T))+D[9]+568446438&4294967295,w=B+(R<<5&4294967295|R>>>27),R=E+(B^T&(w^B))+D[14]+3275163606&4294967295,E=w+(R<<9&4294967295|R>>>23),R=T+(w^B&(E^w))+D[3]+4107603335&4294967295,T=E+(R<<14&4294967295|R>>>18),R=B+(E^w&(T^E))+D[8]+1163531501&4294967295,B=T+(R<<20&4294967295|R>>>12),R=w+(T^E&(B^T))+D[13]+2850285829&4294967295,w=B+(R<<5&4294967295|R>>>27),R=E+(B^T&(w^B))+D[2]+4243563512&4294967295,E=w+(R<<9&4294967295|R>>>23),R=T+(w^B&(E^w))+D[7]+1735328473&4294967295,T=E+(R<<14&4294967295|R>>>18),R=B+(E^w&(T^E))+D[12]+2368359562&4294967295,B=T+(R<<20&4294967295|R>>>12),R=w+(B^T^E)+D[5]+4294588738&4294967295,w=B+(R<<4&4294967295|R>>>28),R=E+(w^B^T)+D[8]+2272392833&4294967295,E=w+(R<<11&4294967295|R>>>21),R=T+(E^w^B)+D[11]+1839030562&4294967295,T=E+(R<<16&4294967295|R>>>16),R=B+(T^E^w)+D[14]+4259657740&4294967295,B=T+(R<<23&4294967295|R>>>9),R=w+(B^T^E)+D[1]+2763975236&4294967295,w=B+(R<<4&4294967295|R>>>28),R=E+(w^B^T)+D[4]+1272893353&4294967295,E=w+(R<<11&4294967295|R>>>21),R=T+(E^w^B)+D[7]+4139469664&4294967295,T=E+(R<<16&4294967295|R>>>16),R=B+(T^E^w)+D[10]+3200236656&4294967295,B=T+(R<<23&4294967295|R>>>9),R=w+(B^T^E)+D[13]+681279174&4294967295,w=B+(R<<4&4294967295|R>>>28),R=E+(w^B^T)+D[0]+3936430074&4294967295,E=w+(R<<11&4294967295|R>>>21),R=T+(E^w^B)+D[3]+3572445317&4294967295,T=E+(R<<16&4294967295|R>>>16),R=B+(T^E^w)+D[6]+76029189&4294967295,B=T+(R<<23&4294967295|R>>>9),R=w+(B^T^E)+D[9]+3654602809&4294967295,w=B+(R<<4&4294967295|R>>>28),R=E+(w^B^T)+D[12]+3873151461&4294967295,E=w+(R<<11&4294967295|R>>>21),R=T+(E^w^B)+D[15]+530742520&4294967295,T=E+(R<<16&4294967295|R>>>16),R=B+(T^E^w)+D[2]+3299628645&4294967295,B=T+(R<<23&4294967295|R>>>9),R=w+(T^(B|~E))+D[0]+4096336452&4294967295,w=B+(R<<6&4294967295|R>>>26),R=E+(B^(w|~T))+D[7]+1126891415&4294967295,E=w+(R<<10&4294967295|R>>>22),R=T+(w^(E|~B))+D[14]+2878612391&4294967295,T=E+(R<<15&4294967295|R>>>17),R=B+(E^(T|~w))+D[5]+4237533241&4294967295,B=T+(R<<21&4294967295|R>>>11),R=w+(T^(B|~E))+D[12]+1700485571&4294967295,w=B+(R<<6&4294967295|R>>>26),R=E+(B^(w|~T))+D[3]+2399980690&4294967295,E=w+(R<<10&4294967295|R>>>22),R=T+(w^(E|~B))+D[10]+4293915773&4294967295,T=E+(R<<15&4294967295|R>>>17),R=B+(E^(T|~w))+D[1]+2240044497&4294967295,B=T+(R<<21&4294967295|R>>>11),R=w+(T^(B|~E))+D[8]+1873313359&4294967295,w=B+(R<<6&4294967295|R>>>26),R=E+(B^(w|~T))+D[15]+4264355552&4294967295,E=w+(R<<10&4294967295|R>>>22),R=T+(w^(E|~B))+D[6]+2734768916&4294967295,T=E+(R<<15&4294967295|R>>>17),R=B+(E^(T|~w))+D[13]+1309151649&4294967295,B=T+(R<<21&4294967295|R>>>11),R=w+(T^(B|~E))+D[4]+4149444226&4294967295,w=B+(R<<6&4294967295|R>>>26),R=E+(B^(w|~T))+D[11]+3174756917&4294967295,E=w+(R<<10&4294967295|R>>>22),R=T+(w^(E|~B))+D[2]+718787259&4294967295,T=E+(R<<15&4294967295|R>>>17),R=B+(E^(T|~w))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(T+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+E&4294967295}n.prototype.u=function(C,w){w===void 0&&(w=C.length);for(var B=w-this.blockSize,D=this.B,T=this.h,E=0;E<w;){if(T==0)for(;E<=B;)a(this,C,E),E+=this.blockSize;if(typeof C=="string"){for(;E<w;)if(D[T++]=C.charCodeAt(E++),T==this.blockSize){a(this,D),T=0;break}}else for(;E<w;)if(D[T++]=C[E++],T==this.blockSize){a(this,D),T=0;break}}this.h=T,this.o+=w},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;var B=8*this.o;for(w=C.length-8;w<C.length;++w)C[w]=B&255,B/=256;for(this.u(C),C=Array(16),w=B=0;4>w;++w)for(var D=0;32>D;D+=8)C[B++]=this.g[w]>>>D&255;return C};function i(C,w){var B=o;return Object.prototype.hasOwnProperty.call(B,C)?B[C]:B[C]=w(C)}function s(C,w){this.h=w;for(var B=[],D=!0,T=C.length-1;0<=T;T--){var E=C[T]|0;D&&E==w||(B[T]=E,D=!1)}this.g=B}var o={};function l(C){return-128<=C&&128>C?i(C,function(w){return new s([w|0],0>w?-1:0)}):new s([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return v(c(-C));for(var w=[],B=1,D=0;C>=B;D++)w[D]=C/B|0,B*=4294967296;return new s(w,0)}function u(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return v(u(C.substring(1),w));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=c(Math.pow(w,8)),D=h,T=0;T<C.length;T+=8){var E=Math.min(8,C.length-T),R=parseInt(C.substring(T,T+E),w);8>E?(E=c(Math.pow(w,E)),D=D.j(E).add(c(R))):(D=D.j(B),D=D.add(c(R)))}return D}var h=l(0),d=l(1),A=l(16777216);r=s.prototype,r.m=function(){if(p(this))return-v(this).m();for(var C=0,w=1,B=0;B<this.g.length;B++){var D=this.i(B);C+=(0<=D?D:4294967296+D)*w,w*=4294967296}return C},r.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(g(this))return"0";if(p(this))return"-"+v(this).toString(C);for(var w=c(Math.pow(C,6)),B=this,D="";;){var T=b(B,w).g;B=m(B,T.j(w));var E=((0<B.g.length?B.g[0]:B.h)>>>0).toString(C);if(B=T,g(B))return E+D;for(;6>E.length;)E="0"+E;D=E+D}},r.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function g(C){if(C.h!=0)return!1;for(var w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function p(C){return C.h==-1}r.l=function(C){return C=m(this,C),p(C)?-1:g(C)?0:1};function v(C){for(var w=C.g.length,B=[],D=0;D<w;D++)B[D]=~C.g[D];return new s(B,~C.h).add(d)}r.abs=function(){return p(this)?v(this):this},r.add=function(C){for(var w=Math.max(this.g.length,C.g.length),B=[],D=0,T=0;T<=w;T++){var E=D+(this.i(T)&65535)+(C.i(T)&65535),R=(E>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);D=R>>>16,E&=65535,R&=65535,B[T]=R<<16|E}return new s(B,B[B.length-1]&-2147483648?-1:0)};function m(C,w){return C.add(v(w))}r.j=function(C){if(g(this)||g(C))return h;if(p(this))return p(C)?v(this).j(v(C)):v(v(this).j(C));if(p(C))return v(this.j(v(C)));if(0>this.l(A)&&0>C.l(A))return c(this.m()*C.m());for(var w=this.g.length+C.g.length,B=[],D=0;D<2*w;D++)B[D]=0;for(D=0;D<this.g.length;D++)for(var T=0;T<C.g.length;T++){var E=this.i(D)>>>16,R=this.i(D)&65535,M=C.i(T)>>>16,k=C.i(T)&65535;B[2*D+2*T]+=R*k,y(B,2*D+2*T),B[2*D+2*T+1]+=E*k,y(B,2*D+2*T+1),B[2*D+2*T+1]+=R*M,y(B,2*D+2*T+1),B[2*D+2*T+2]+=E*M,y(B,2*D+2*T+2)}for(D=0;D<w;D++)B[D]=B[2*D+1]<<16|B[2*D];for(D=w;D<2*w;D++)B[D]=0;return new s(B,0)};function y(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function x(C,w){this.g=C,this.h=w}function b(C,w){if(g(w))throw Error("division by zero");if(g(C))return new x(h,h);if(p(C))return w=b(v(C),w),new x(v(w.g),v(w.h));if(p(w))return w=b(C,v(w)),new x(v(w.g),w.h);if(30<C.g.length){if(p(C)||p(w))throw Error("slowDivide_ only works with positive integers.");for(var B=d,D=w;0>=D.l(C);)B=S(B),D=S(D);var T=_(B,1),E=_(D,1);for(D=_(D,2),B=_(B,2);!g(D);){var R=E.add(D);0>=R.l(C)&&(T=T.add(B),E=R),D=_(D,1),B=_(B,1)}return w=m(C,T.j(w)),new x(T,w)}for(T=h;0<=C.l(w);){for(B=Math.max(1,Math.floor(C.m()/w.m())),D=Math.ceil(Math.log(B)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),E=c(B),R=E.j(w);p(R)||0<R.l(C);)B-=D,E=c(B),R=E.j(w);g(E)&&(E=d),T=T.add(E),C=m(C,R)}return new x(T,C)}r.A=function(C){return b(this,C).h},r.and=function(C){for(var w=Math.max(this.g.length,C.g.length),B=[],D=0;D<w;D++)B[D]=this.i(D)&C.i(D);return new s(B,this.h&C.h)},r.or=function(C){for(var w=Math.max(this.g.length,C.g.length),B=[],D=0;D<w;D++)B[D]=this.i(D)|C.i(D);return new s(B,this.h|C.h)},r.xor=function(C){for(var w=Math.max(this.g.length,C.g.length),B=[],D=0;D<w;D++)B[D]=this.i(D)^C.i(D);return new s(B,this.h^C.h)};function S(C){for(var w=C.g.length+1,B=[],D=0;D<w;D++)B[D]=C.i(D)<<1|C.i(D-1)>>>31;return new s(B,C.h)}function _(C,w){var B=w>>5;w%=32;for(var D=C.g.length-B,T=[],E=0;E<D;E++)T[E]=0<w?C.i(E+B)>>>w|C.i(E+B+1)<<32-w:C.i(E+B);return new s(T,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=u,_6=s}).apply(typeof PK<"u"?PK:typeof self<"u"?self:typeof window<"u"?window:{});var I_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,U,$){return I==Array.prototype||I==Object.prototype||(I[U]=$.value),I};function t(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof I_=="object"&&I_];for(var U=0;U<I.length;++U){var $=I[U];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var n=t(this);function a(I,U){if(U)e:{var $=n;I=I.split(".");for(var le=0;le<I.length-1;le++){var Ie=I[le];if(!(Ie in $))break e;$=$[Ie]}I=I[I.length-1],le=$[I],U=U(le),U!=le&&U!=null&&e($,I,{configurable:!0,writable:!0,value:U})}}function i(I,U){I instanceof String&&(I+="");var $=0,le=!1,Ie={next:function(){if(!le&&$<I.length){var Ue=$++;return{value:U(Ue,I[Ue]),done:!1}}return le=!0,{done:!0,value:void 0}}};return Ie[Symbol.iterator]=function(){return Ie},Ie}a("Array.prototype.values",function(I){return I||function(){return i(this,function(U,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(I){var U=typeof I;return U=U!="object"?U:I?Array.isArray(I)?"array":U:"null",U=="array"||U=="object"&&typeof I.length=="number"}function c(I){var U=typeof I;return U=="object"&&I!=null||U=="function"}function u(I,U,$){return I.call.apply(I.bind,arguments)}function h(I,U,$){if(!I)throw Error();if(2<arguments.length){var le=Array.prototype.slice.call(arguments,2);return function(){var Ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Ie,le),I.apply(U,Ie)}}return function(){return I.apply(U,arguments)}}function d(I,U,$){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,d.apply(null,arguments)}function A(I,U){var $=Array.prototype.slice.call(arguments,1);return function(){var le=$.slice();return le.push.apply(le,arguments),I.apply(this,le)}}function g(I,U){function $(){}$.prototype=U.prototype,I.aa=U.prototype,I.prototype=new $,I.prototype.constructor=I,I.Qb=function(le,Ie,Ue){for(var st=Array(arguments.length-2),lr=2;lr<arguments.length;lr++)st[lr-2]=arguments[lr];return U.prototype[Ie].apply(le,st)}}function p(I){const U=I.length;if(0<U){const $=Array(U);for(let le=0;le<U;le++)$[le]=I[le];return $}return[]}function v(I,U){for(let $=1;$<arguments.length;$++){const le=arguments[$];if(l(le)){const Ie=I.length||0,Ue=le.length||0;I.length=Ie+Ue;for(let st=0;st<Ue;st++)I[Ie+st]=le[st]}else I.push(le)}}class m{constructor(U,$){this.i=U,this.j=$,this.h=0,this.g=null}get(){let U;return 0<this.h?(this.h--,U=this.g,this.g=U.next,U.next=null):U=this.i(),U}}function y(I){return/^[\s\xa0]*$/.test(I)}function x(){var I=o.navigator;return I&&(I=I.userAgent)?I:""}function b(I){return b[" "](I),I}b[" "]=function(){};var S=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function _(I,U,$){for(const le in I)U.call($,I[le],le,I)}function C(I,U){for(const $ in I)U.call(void 0,I[$],$,I)}function w(I){const U={};for(const $ in I)U[$]=I[$];return U}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(I,U){let $,le;for(let Ie=1;Ie<arguments.length;Ie++){le=arguments[Ie];for($ in le)I[$]=le[$];for(let Ue=0;Ue<B.length;Ue++)$=B[Ue],Object.prototype.hasOwnProperty.call(le,$)&&(I[$]=le[$])}}function T(I){var U=1;I=I.split(":");const $=[];for(;0<U&&I.length;)$.push(I.shift()),U--;return I.length&&$.push(I.join(":")),$}function E(I){o.setTimeout(()=>{throw I},0)}function R(){var I=W;let U=null;return I.g&&(U=I.g,I.g=I.g.next,I.g||(I.h=null),U.next=null),U}class M{constructor(){this.h=this.g=null}add(U,$){const le=k.get();le.set(U,$),this.h?this.h.next=le:this.g=le,this.h=le}}var k=new m(()=>new O,I=>I.reset());class O{constructor(){this.next=this.g=this.h=null}set(U,$){this.h=U,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,H=!1,W=new M,te=()=>{const I=o.Promise.resolve(void 0);Q=()=>{I.then(ee)}};var ee=()=>{for(var I;I=R();){try{I.h.call(I.g)}catch($){E($)}var U=k;U.j(I),100>U.h&&(U.h++,I.next=U.g,U.g=I)}H=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(I,U){this.type=I,this.g=this.target=U,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var I=!1,U=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const $=()=>{};o.addEventListener("test",$,U),o.removeEventListener("test",$,U)}catch{}return I}();function Z(I,U){if(G.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var $=this.type=I.type,le=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=U,U=I.relatedTarget){if(S){e:{try{b(U.nodeName);var Ie=!0;break e}catch{}Ie=!1}Ie||(U=null)}}else $=="mouseover"?U=I.fromElement:$=="mouseout"&&(U=I.toElement);this.relatedTarget=U,le?(this.clientX=le.clientX!==void 0?le.clientX:le.pageX,this.clientY=le.clientY!==void 0?le.clientY:le.pageY,this.screenX=le.screenX||0,this.screenY=le.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:de[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&Z.aa.h.call(this)}}g(Z,G);var de={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),fe=0;function q(I,U,$,le,Ie){this.listener=I,this.proxy=null,this.src=U,this.type=$,this.capture=!!le,this.ha=Ie,this.key=++fe,this.da=this.fa=!1}function ge(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function me(I){this.src=I,this.g={},this.h=0}me.prototype.add=function(I,U,$,le,Ie){var Ue=I.toString();I=this.g[Ue],I||(I=this.g[Ue]=[],this.h++);var st=Me(I,U,le,Ie);return-1<st?(U=I[st],$||(U.fa=!1)):(U=new q(U,this.src,Ue,!!le,Ie),U.fa=$,I.push(U)),U};function we(I,U){var $=U.type;if($ in I.g){var le=I.g[$],Ie=Array.prototype.indexOf.call(le,U,void 0),Ue;(Ue=0<=Ie)&&Array.prototype.splice.call(le,Ie,1),Ue&&(ge(U),I.g[$].length==0&&(delete I.g[$],I.h--))}}function Me(I,U,$,le){for(var Ie=0;Ie<I.length;++Ie){var Ue=I[Ie];if(!Ue.da&&Ue.listener==U&&Ue.capture==!!$&&Ue.ha==le)return Ie}return-1}var z="closure_lm_"+(1e6*Math.random()|0),pe={};function J(I,U,$,le,Ie){if(Array.isArray(U)){for(var Ue=0;Ue<U.length;Ue++)J(I,U[Ue],$,le,Ie);return null}return $=Fe($),I&&I[he]?I.K(U,$,c(le)?!!le.capture:!1,Ie):oe(I,U,$,!1,le,Ie)}function oe(I,U,$,le,Ie,Ue){if(!U)throw Error("Invalid event type");var st=c(Ie)?!!Ie.capture:!!Ie,lr=Ee(I);if(lr||(I[z]=lr=new me(I)),$=lr.add(U,$,le,st,Ue),$.proxy)return $;if(le=ae(),$.proxy=le,le.src=I,le.listener=$,I.addEventListener)Y||(Ie=st),Ie===void 0&&(Ie=!1),I.addEventListener(U.toString(),le,Ie);else if(I.attachEvent)I.attachEvent(_e(U.toString()),le);else if(I.addListener&&I.removeListener)I.addListener(le);else throw Error("addEventListener and attachEvent are unavailable.");return $}function ae(){function I($){return U.call(I.src,I.listener,$)}const U=ye;return I}function ue(I,U,$,le,Ie){if(Array.isArray(U))for(var Ue=0;Ue<U.length;Ue++)ue(I,U[Ue],$,le,Ie);else le=c(le)?!!le.capture:!!le,$=Fe($),I&&I[he]?(I=I.i,U=String(U).toString(),U in I.g&&(Ue=I.g[U],$=Me(Ue,$,le,Ie),-1<$&&(ge(Ue[$]),Array.prototype.splice.call(Ue,$,1),Ue.length==0&&(delete I.g[U],I.h--)))):I&&(I=Ee(I))&&(U=I.g[U.toString()],I=-1,U&&(I=Me(U,$,le,Ie)),($=-1<I?U[I]:null)&&be($))}function be(I){if(typeof I!="number"&&I&&!I.da){var U=I.src;if(U&&U[he])we(U.i,I);else{var $=I.type,le=I.proxy;U.removeEventListener?U.removeEventListener($,le,I.capture):U.detachEvent?U.detachEvent(_e($),le):U.addListener&&U.removeListener&&U.removeListener(le),($=Ee(U))?(we($,I),$.h==0&&($.src=null,U[z]=null)):ge(I)}}}function _e(I){return I in pe?pe[I]:pe[I]="on"+I}function ye(I,U){if(I.da)I=!0;else{U=new Z(U,this);var $=I.listener,le=I.ha||I.src;I.fa&&be(I),I=$.call(le,U)}return I}function Ee(I){return I=I[z],I instanceof me?I:null}var ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(I){return typeof I=="function"?I:(I[ze]||(I[ze]=function(U){return I.handleEvent(U)}),I[ze])}function Ge(){j.call(this),this.i=new me(this),this.M=this,this.F=null}g(Ge,j),Ge.prototype[he]=!0,Ge.prototype.removeEventListener=function(I,U,$,le){ue(this,I,U,$,le)};function at(I,U){var $,le=I.F;if(le)for($=[];le;le=le.F)$.push(le);if(I=I.M,le=U.type||U,typeof U=="string")U=new G(U,I);else if(U instanceof G)U.target=U.target||I;else{var Ie=U;U=new G(le,I),D(U,Ie)}if(Ie=!0,$)for(var Ue=$.length-1;0<=Ue;Ue--){var st=U.g=$[Ue];Ie=ut(st,le,!0,U)&&Ie}if(st=U.g=I,Ie=ut(st,le,!0,U)&&Ie,Ie=ut(st,le,!1,U)&&Ie,$)for(Ue=0;Ue<$.length;Ue++)st=U.g=$[Ue],Ie=ut(st,le,!1,U)&&Ie}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var I=this.i,U;for(U in I.g){for(var $=I.g[U],le=0;le<$.length;le++)ge($[le]);delete I.g[U],I.h--}}this.F=null},Ge.prototype.K=function(I,U,$,le){return this.i.add(String(I),U,!1,$,le)},Ge.prototype.L=function(I,U,$,le){return this.i.add(String(I),U,!0,$,le)};function ut(I,U,$,le){if(U=I.i.g[String(U)],!U)return!0;U=U.concat();for(var Ie=!0,Ue=0;Ue<U.length;++Ue){var st=U[Ue];if(st&&!st.da&&st.capture==$){var lr=st.listener,Gr=st.ha||st.src;st.fa&&we(I.i,st),Ie=lr.call(Gr,le)!==!1&&Ie}}return Ie&&!le.defaultPrevented}function gt(I,U,$){if(typeof I=="function")$&&(I=d(I,$));else if(I&&typeof I.handleEvent=="function")I=d(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(U)?-1:o.setTimeout(I,U||0)}function Le(I){I.g=gt(()=>{I.g=null,I.i&&(I.i=!1,Le(I))},I.l);const U=I.h;I.h=null,I.m.apply(null,U)}class Qe extends j{constructor(U,$){super(),this.m=U,this.l=$,this.h=null,this.i=!1,this.g=null}j(U){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ht(I){j.call(this),this.h=I,this.g={}}g(ht,j);var it=[];function Vt(I){_(I.g,function(U,$){this.g.hasOwnProperty($)&&be(U)},I),I.g={}}ht.prototype.N=function(){ht.aa.N.call(this),Vt(this)},ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kt=o.JSON.stringify,Bt=o.JSON.parse,Sr=class{stringify(I){return o.JSON.stringify(I,void 0)}parse(I){return o.JSON.parse(I,void 0)}};function zt(){}zt.prototype.h=null;function qe(I){return I.h||(I.h=I.i())}function pt(){}var Nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kt(){G.call(this,"d")}g(Kt,G);function Yt(){G.call(this,"c")}g(Yt,G);var Je={},yt=null;function mr(){return yt=yt||new Ge}Je.La="serverreachability";function dr(I){G.call(this,Je.La,I)}g(dr,G);function an(I){const U=mr();at(U,new dr(U))}Je.STAT_EVENT="statevent";function _r(I,U){G.call(this,Je.STAT_EVENT,I),this.stat=U}g(_r,G);function mt(I){const U=mr();at(U,new _r(U,I))}Je.Ma="timingevent";function Cn(I,U){G.call(this,Je.Ma,I),this.size=U}g(Cn,G);function Pr(I,U){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){I()},U)}function ar(){this.g=!0}ar.prototype.xa=function(){this.g=!1};function Dr(I,U,$,le,Ie,Ue){I.info(function(){if(I.g)if(Ue)for(var st="",lr=Ue.split("&"),Gr=0;Gr<lr.length;Gr++){var er=lr[Gr].split("=");if(1<er.length){var Nn=er[0];er=er[1];var on=Nn.split("_");st=2<=on.length&&on[1]=="type"?st+(Nn+"="+er+"&"):st+(Nn+"=redacted&")}}else st=null;else st=Ue;return"XMLHTTP REQ ("+le+") [attempt "+Ie+"]: "+U+`
`+$+`
`+st})}function Nr(I,U,$,le,Ie,Ue,st){I.info(function(){return"XMLHTTP RESP ("+le+") [ attempt "+Ie+"]: "+U+`
`+$+`
`+Ue+" "+st})}function sn(I,U,$,le){I.info(function(){return"XMLHTTP TEXT ("+U+"): "+Ea(I,$)+(le?" "+le:"")})}function ri(I,U){I.info(function(){return"TIMEOUT: "+U})}ar.prototype.info=function(){};function Ea(I,U){if(!I.g)return U;if(!U)return null;try{var $=JSON.parse(U);if($){for(I=0;I<$.length;I++)if(Array.isArray($[I])){var le=$[I];if(!(2>le.length)){var Ie=le[1];if(Array.isArray(Ie)&&!(1>Ie.length)){var Ue=Ie[0];if(Ue!="noop"&&Ue!="stop"&&Ue!="close")for(var st=1;st<Ie.length;st++)Ie[st]=""}}}}return kt($)}catch{return U}}var Zr={NO_ERROR:0,TIMEOUT:8},ia={},Yn;function fa(){}g(fa,zt),fa.prototype.g=function(){return new XMLHttpRequest},fa.prototype.i=function(){return{}},Yn=new fa;function Ln(I,U,$,le){this.j=I,this.i=U,this.l=$,this.R=le||1,this.U=new ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}var Mt={},Be={};function lt(I,U,$){I.L=1,I.v=xu(Yi(U)),I.m=$,I.P=!0,Et(I,null)}function Et(I,U){I.F=Date.now(),Bn(I),I.A=Yi(I.v);var $=I.A,le=I.R;Array.isArray(le)||(le=[String(le)]),or($.i,"t",le),I.C=0,$=I.j.J,I.h=new ni,I.g=re(I.j,$?U:null,!I.m),0<I.O&&(I.M=new Qe(d(I.Y,I,I.g),I.O)),U=I.U,$=I.g,le=I.ca;var Ie="readystatechange";Array.isArray(Ie)||(Ie&&(it[0]=Ie.toString()),Ie=it);for(var Ue=0;Ue<Ie.length;Ue++){var st=J($,Ie[Ue],le||U.handleEvent,!1,U.h||U);if(!st)break;U.g[st.key]=st}U=I.H?w(I.H):{},I.m?(I.u||(I.u="POST"),U["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,U)):(I.u="GET",I.g.ea(I.A,I.u,null,U)),an(),Dr(I.i,I.u,I.A,I.l,I.R,I.m)}Ln.prototype.ca=function(I){I=I.target;const U=this.M;U&&za(I)==3?U.j():this.Y(I)},Ln.prototype.Y=function(I){try{if(I==this.g)e:{const on=za(this.g);var U=this.g.Ba();const pi=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||tm(this.g)))){this.J||on!=4||U==7||(U==8||0>=pi?an(3):an(2)),Da(this);var $=this.g.Z();this.X=$;t:if(zr(this)){var le=tm(this.g);I="";var Ie=le.length,Ue=za(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qi(this),Ti(this);var st="";break t}this.h.i=new o.TextDecoder}for(U=0;U<Ie;U++)this.h.h=!0,I+=this.h.i.decode(le[U],{stream:!(Ue&&U==Ie-1)});le.length=0,this.h.g+=I,this.C=0,st=this.h.g}else st=this.g.oa();if(this.o=$==200,Nr(this.i,this.u,this.A,this.l,this.R,on,$),this.o){if(this.T&&!this.K){t:{if(this.g){var lr,Gr=this.g;if((lr=Gr.g?Gr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(lr)){var er=lr;break t}}er=null}if($=er)sn(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,On(this,$);else{this.o=!1,this.s=3,mt(12),qi(this),Ti(this);break e}}if(this.P){$=!0;let Ei;for(;!this.J&&this.C<st.length;)if(Ei=ta(this,st),Ei==Be){on==4&&(this.s=4,mt(14),$=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ei==Mt){this.s=4,mt(15),sn(this.i,this.l,st,"[Invalid Chunk]"),$=!1;break}else sn(this.i,this.l,Ei,null),On(this,Ei);if(zr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||st.length!=0||this.h.h||(this.s=1,mt(16),$=!1),this.o=this.o&&$,!$)sn(this.i,this.l,st,"[Invalid Chunked Response]"),qi(this),Ti(this);else if(0<st.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+st.length),rd(Nn),Nn.M=!0,mt(11))}}else sn(this.i,this.l,st,null),On(this,st);on==4&&qi(this),this.o&&!this.J&&(on==4?mc(this.j,this):(this.o=!1,Bn(this)))}else gc(this.g),$==400&&0<st.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),qi(this),Ti(this)}}}catch{}finally{}};function zr(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function ta(I,U){var $=I.C,le=U.indexOf(`
`,$);return le==-1?Be:($=Number(U.substring($,le)),isNaN($)?Mt:(le+=1,le+$>U.length?Be:(U=U.slice(le,le+$),I.C=le+$,U)))}Ln.prototype.cancel=function(){this.J=!0,qi(this)};function Bn(I){I.S=Date.now()+I.I,ga(I,I.I)}function ga(I,U){if(I.B!=null)throw Error("WatchDog timer not null");I.B=Pr(d(I.ba,I),U)}function Da(I){I.B&&(o.clearTimeout(I.B),I.B=null)}Ln.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(ri(this.i,this.A),this.L!=2&&(an(),mt(17)),qi(this),this.s=2,Ti(this)):ga(this,this.S-I)};function Ti(I){I.j.G==0||I.J||mc(I.j,I)}function qi(I){Da(I);var U=I.M;U&&typeof U.ma=="function"&&U.ma(),I.M=null,Vt(I.U),I.g&&(U=I.g,I.g=null,U.abort(),U.ma())}function On(I,U){try{var $=I.j;if($.G!=0&&($.g==I||of($.h,I))){if(!I.K&&of($.h,I)&&$.G==3){try{var le=$.Da.g.parse(U)}catch{le=null}if(Array.isArray(le)&&le.length==3){var Ie=le;if(Ie[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<I.F)Nl($),Zh($);else break e;Cu($),mt(18)}}else $.za=Ie[1],0<$.za-$.T&&37500>Ie[2]&&$.F&&$.v==0&&!$.C&&($.C=Pr(d($.Za,$),6e3));if(1>=vu($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else Ii($,11)}else if((I.K||$.g==I)&&Nl($),!y(U))for(Ie=$.Da.g.parse(U),U=0;U<Ie.length;U++){let er=Ie[U];if($.T=er[0],er=er[1],$.G==2)if(er[0]=="c"){$.K=er[1],$.ia=er[2];const Nn=er[3];Nn!=null&&($.la=Nn,$.j.info("VER="+$.la));const on=er[4];on!=null&&($.Aa=on,$.j.info("SVER="+$.Aa));const pi=er[5];pi!=null&&typeof pi=="number"&&0<pi&&(le=1.5*pi,$.L=le,$.j.info("backChannelRequestTimeoutMs_="+le)),le=$;const Ei=I.g;if(Ei){const vc=Ei.g?Ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vc){var Ue=le.h;Ue.g||vc.indexOf("spdy")==-1&&vc.indexOf("quic")==-1&&vc.indexOf("h2")==-1||(Ue.j=Ue.l,Ue.g=new Set,Ue.h&&(Vn(Ue,Ue.h),Ue.h=null))}if(le.D){const Bu=Ei.g?Ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Bu&&(le.ya=Bu,dn(le.I,le.D,Bu))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-I.F,$.j.info("Handshake RTT: "+$.R+"ms")),le=$;var st=I;if(le.qa=P(le,le.J?le.ia:null,le.W),st.K){lf(le.h,st);var lr=st,Gr=le.L;Gr&&(lr.I=Gr),lr.B&&(Da(lr),Bn(lr)),le.g=st}else td(le);0<$.i.length&&Jh($)}else er[0]!="stop"&&er[0]!="close"||Ii($,7);else $.G==3&&(er[0]=="stop"||er[0]=="close"?er[0]=="stop"?Ii($,7):Bl($):er[0]!="noop"&&$.l&&$.l.ta(er),$.v=0)}}an(4)}catch{}}var Qh=class{constructor(I,U){this.g=I,this.map=U}};function dc(I){this.l=I||10,o.PerformanceNavigationTiming?(I=o.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wp(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function vu(I){return I.h?1:I.g?I.g.size:0}function of(I,U){return I.h?I.h==U:I.g?I.g.has(U):!1}function Vn(I,U){I.g?I.g.add(U):I.h=U}function lf(I,U){I.h&&I.h==U?I.h=null:I.g&&I.g.has(U)&&I.g.delete(U)}dc.prototype.cancel=function(){if(this.i=cf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function cf(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let U=I.i;for(const $ of I.g.values())U=U.concat($.D);return U}return p(I.i)}function qp(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(l(I)){for(var U=[],$=I.length,le=0;le<$;le++)U.push(I[le]);return U}U=[],$=0;for(le in I)U[$++]=I[le];return U}function uf(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(l(I)||typeof I=="string"){var U=[];I=I.length;for(var $=0;$<I;$++)U.push($);return U}U=[],$=0;for(const le in I)U[$++]=le;return U}}}function Yp(I,U){if(I.forEach&&typeof I.forEach=="function")I.forEach(U,void 0);else if(l(I)||typeof I=="string")Array.prototype.forEach.call(I,U,void 0);else for(var $=uf(I),le=qp(I),Ie=le.length,Ue=0;Ue<Ie;Ue++)U.call(void 0,le[Ue],$&&$[Ue],I)}var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zh(I,U){if(I){I=I.split("&");for(var $=0;$<I.length;$++){var le=I[$].indexOf("="),Ie=null;if(0<=le){var Ue=I[$].substring(0,le);Ie=I[$].substring(le+1)}else Ue=I[$];U(Ue,Ie?decodeURIComponent(Ie.replace(/\+/g," ")):"")}}}function sa(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof sa){this.h=I.h,yu(this,I.j),this.o=I.o,this.g=I.g,Gh(this,I.s),this.l=I.l;var U=I.i,$=new Ac;$.i=U.i,U.g&&($.g=new Map(U.g),$.h=U.h),hf(this,$),this.m=I.m}else I&&(U=String(I).match(Ss))?(this.h=!1,yu(this,U[1]||"",!0),this.o=bu(U[2]||""),this.g=bu(U[3]||"",!0),Gh(this,U[4]),this.l=bu(U[5]||"",!0),hf(this,U[6]||"",!0),this.m=bu(U[7]||"")):(this.h=!1,this.i=new Ac(null,this.h))}sa.prototype.toString=function(){var I=[],U=this.j;U&&I.push(wl(U,Xp,!0),":");var $=this.g;return($||U=="file")&&(I.push("//"),(U=this.o)&&I.push(wl(U,Xp,!0),"@"),I.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&I.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&I.push("/"),I.push(wl($,$.charAt(0)=="/"?Sl:yy,!0))),($=this.i.toString())&&I.push("?",$),($=this.m)&&I.push("#",wl($,$h)),I.join("")};function Yi(I){return new sa(I)}function yu(I,U,$){I.j=$?bu(U,!0):U,I.j&&(I.j=I.j.replace(/:$/,""))}function Gh(I,U){if(U){if(U=Number(U),isNaN(U)||0>U)throw Error("Bad port number "+U);I.s=U}else I.s=null}function hf(I,U,$){U instanceof Ac?(I.i=U,xy(I.i,I.h)):($||(U=wl(U,Vh)),I.i=new Ac(U,I.h))}function dn(I,U,$){I.i.set(U,$)}function xu(I){return dn(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function bu(I,U){return I?U?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function wl(I,U,$){return typeof I=="string"?(I=encodeURI(I).replace(U,vy),$&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function vy(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var Xp=/[#\/\?@]/g,yy=/[#\?:]/g,Sl=/[#\?]/g,Vh=/[#\?@]/g,$h=/#/g;function Ac(I,U){this.h=this.g=null,this.i=I||null,this.j=!!U}function $n(I){I.g||(I.g=new Map,I.h=0,I.i&&zh(I.i,function(U,$){I.add(decodeURIComponent(U.replace(/\+/g," ")),$)}))}r=Ac.prototype,r.add=function(I,U){$n(this),this.i=null,I=fc(this,I);var $=this.g.get(I);return $||this.g.set(I,$=[]),$.push(U),this.h+=1,this};function Zp(I,U){$n(I),U=fc(I,U),I.g.has(U)&&(I.i=null,I.h-=I.g.get(U).length,I.g.delete(U))}function df(I,U){return $n(I),U=fc(I,U),I.g.has(U)}r.forEach=function(I,U){$n(this),this.g.forEach(function($,le){$.forEach(function(Ie){I.call(U,Ie,le,this)},this)},this)},r.na=function(){$n(this);const I=Array.from(this.g.values()),U=Array.from(this.g.keys()),$=[];for(let le=0;le<U.length;le++){const Ie=I[le];for(let Ue=0;Ue<Ie.length;Ue++)$.push(U[le])}return $},r.V=function(I){$n(this);let U=[];if(typeof I=="string")df(this,I)&&(U=U.concat(this.g.get(fc(this,I))));else{I=Array.from(this.g.values());for(let $=0;$<I.length;$++)U=U.concat(I[$])}return U},r.set=function(I,U){return $n(this),this.i=null,I=fc(this,I),df(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[U]),this.h+=1,this},r.get=function(I,U){return I?(I=this.V(I),0<I.length?String(I[0]):U):U};function or(I,U,$){Zp(I,U),0<$.length&&(I.i=null,I.g.set(fc(I,U),p($)),I.h+=$.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],U=Array.from(this.g.keys());for(var $=0;$<U.length;$++){var le=U[$];const Ue=encodeURIComponent(String(le)),st=this.V(le);for(le=0;le<st.length;le++){var Ie=Ue;st[le]!==""&&(Ie+="="+encodeURIComponent(String(st[le]))),I.push(Ie)}}return this.i=I.join("&")};function fc(I,U){return U=String(U),I.j&&(U=U.toLowerCase()),U}function xy(I,U){U&&!I.j&&($n(I),I.i=null,I.g.forEach(function($,le){var Ie=le.toLowerCase();le!=Ie&&(Zp(this,le),or(this,Ie,$))},I)),I.j=U}function Io(I,U){const $=new ar;if(o.Image){const le=new Image;le.onload=A(Ks,$,"TestLoadImage: loaded",!0,U,le),le.onerror=A(Ks,$,"TestLoadImage: error",!1,U,le),le.onabort=A(Ks,$,"TestLoadImage: abort",!1,U,le),le.ontimeout=A(Ks,$,"TestLoadImage: timeout",!1,U,le),o.setTimeout(function(){le.ontimeout&&le.ontimeout()},1e4),le.src=I}else U(!1)}function Jp(I,U){const $=new ar,le=new AbortController,Ie=setTimeout(()=>{le.abort(),Ks($,"TestPingServer: timeout",!1,U)},1e4);fetch(I,{signal:le.signal}).then(Ue=>{clearTimeout(Ie),Ue.ok?Ks($,"TestPingServer: ok",!0,U):Ks($,"TestPingServer: server error",!1,U)}).catch(()=>{clearTimeout(Ie),Ks($,"TestPingServer: error",!1,U)})}function Ks(I,U,$,le,Ie){try{Ie&&(Ie.onload=null,Ie.onerror=null,Ie.onabort=null,Ie.ontimeout=null),le($)}catch{}}function Kh(){this.g=new Sr}function Af(I,U,$){const le=$||"";try{Yp(I,function(Ie,Ue){let st=Ie;c(Ie)&&(st=kt(Ie)),U.push(le+Ue+"="+encodeURIComponent(st))})}catch(Ie){throw U.push(le+"type="+encodeURIComponent("_badmap")),Ie}}function Wh(I){this.l=I.Ub||null,this.j=I.eb||!1}g(Wh,zt),Wh.prototype.g=function(){return new qh(this.l,this.j)},Wh.prototype.i=function(I){return function(){return I}}({});function qh(I,U){Ge.call(this),this.D=I,this.o=U,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(qh,Ge),r=qh.prototype,r.open=function(I,U){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=U,this.readyState=1,Ws(this)},r.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const U={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(U.body=I),(this.D||o).fetch(new Request(this.A,U)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_l(this)),this.readyState=0},r.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;em(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function em(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}r.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var U=I.value?I.value:new Uint8Array(0);(U=this.v.decode(U,{stream:!I.done}))&&(this.response=this.responseText+=U)}I.done?_l(this):Ws(this),this.readyState==3&&em(this)}},r.Ra=function(I){this.g&&(this.response=this.responseText=I,_l(this))},r.Qa=function(I){this.g&&(this.response=I,_l(this))},r.ga=function(){this.g&&_l(this)};function _l(I){I.readyState=4,I.l=null,I.j=null,I.v=null,Ws(I)}r.setRequestHeader=function(I,U){this.u.append(I,U)},r.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],U=this.h.entries();for(var $=U.next();!$.done;)$=$.value,I.push($[0]+": "+$[1]),$=U.next();return I.join(`\r
`)};function Ws(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(qh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function Cl(I){let U="";return _(I,function($,le){U+=le,U+=":",U+=$,U+=`\r
`}),U}function ff(I,U,$){e:{for(le in $){var le=!1;break e}le=!0}le||($=Cl($),typeof I=="string"?$!=null&&encodeURIComponent(String($)):dn(I,U,$))}function An(I){Ge.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(An,Ge);var gf=/^https?$/i,Yh=["POST","PUT"];r=An.prototype,r.Ha=function(I){this.J=I},r.ea=function(I,U,$,le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);U=U?U.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yn.g(),this.v=this.o?qe(this.o):qe(Yn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(U,String(I),!0),this.B=!1}catch(Ue){pf(this,Ue);return}if(I=$||"",$=new Map(this.headers),le)if(Object.getPrototypeOf(le)===Object.prototype)for(var Ie in le)$.set(Ie,le[Ie]);else if(typeof le.keys=="function"&&typeof le.get=="function")for(const Ue of le.keys())$.set(Ue,le.get(Ue));else throw Error("Unknown input type for opt_headers: "+String(le));le=Array.from($.keys()).find(Ue=>Ue.toLowerCase()=="content-type"),Ie=o.FormData&&I instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Yh,U,void 0))||le||Ie||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ue,st]of $)this.g.setRequestHeader(Ue,st);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qs(this),this.u=!0,this.g.send(I),this.u=!1}catch(Ue){pf(this,Ue)}};function pf(I,U){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=U,I.m=5,mf(I),wu(I)}function mf(I){I.A||(I.A=!0,at(I,"complete"),at(I,"error"))}r.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,at(this,"complete"),at(this,"abort"),wu(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wu(this,!0)),An.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?vf(this):this.bb())},r.bb=function(){vf(this)};function vf(I){if(I.h&&typeof s<"u"&&(!I.v[1]||za(I)!=4||I.Z()!=2)){if(I.u&&za(I)==4)gt(I.Ea,0,I);else if(at(I,"readystatechange"),za(I)==4){I.h=!1;try{const st=I.Z();e:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var U=!0;break e;default:U=!1}var $;if(!($=U)){var le;if(le=st===0){var Ie=String(I.D).match(Ss)[1]||null;!Ie&&o.self&&o.self.location&&(Ie=o.self.location.protocol.slice(0,-1)),le=!gf.test(Ie?Ie.toLowerCase():"")}$=le}if($)at(I,"complete"),at(I,"success");else{I.m=6;try{var Ue=2<za(I)?I.g.statusText:""}catch{Ue=""}I.l=Ue+" ["+I.Z()+"]",mf(I)}}finally{wu(I)}}}}function wu(I,U){if(I.g){qs(I);const $=I.g,le=I.v[0]?()=>{}:null;I.g=null,I.v=null,U||at(I,"ready");try{$.onreadystatechange=le}catch{}}}function qs(I){I.I&&(o.clearTimeout(I.I),I.I=null)}r.isActive=function(){return!!this.g};function za(I){return I.g?I.g.readyState:0}r.Z=function(){try{return 2<za(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(I){if(this.g){var U=this.g.responseText;return I&&U.indexOf(I)==0&&(U=U.substring(I.length)),Bt(U)}};function tm(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function gc(I){const U={};I=(I.g&&2<=za(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let le=0;le<I.length;le++){if(y(I[le]))continue;var $=T(I[le]);const Ie=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const Ue=U[Ie]||[];U[Ie]=Ue,Ue.push($)}C(U,function(le){return le.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gi(I,U,$){return $&&$.internalChannelParams&&$.internalChannelParams[I]||U}function Xh(I){this.Aa=0,this.i=[],this.j=new ar,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gi("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gi("baseRetryDelayMs",5e3,I),this.cb=gi("retryDelaySeedMs",1e4,I),this.Wa=gi("forwardChannelMaxRetries",2,I),this.wa=gi("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new dc(I&&I.concurrentRequestLimit),this.Da=new Kh,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Xh.prototype,r.la=8,r.G=1,r.connect=function(I,U,$,le){mt(0),this.W=I,this.H=U||{},$&&le!==void 0&&(this.H.OSID=$,this.H.OAID=le),this.F=this.X,this.I=P(this,null,this.W),Jh(this)};function Bl(I){if(Su(I),I.G==3){var U=I.U++,$=Yi(I.I);if(dn($,"SID",I.K),dn($,"RID",U),dn($,"TYPE","terminate"),pc(I,$),U=new Ln(I,I.j,U),U.L=2,U.v=xu(Yi($)),$=!1,o.navigator&&o.navigator.sendBeacon)try{$=o.navigator.sendBeacon(U.v.toString(),"")}catch{}!$&&o.Image&&(new Image().src=U.v,$=!0),$||(U.g=re(U.j,null),U.g.ea(U.v)),U.F=Date.now(),Bn(U)}ad(I)}function Zh(I){I.g&&(rd(I),I.g.cancel(),I.g=null)}function Su(I){Zh(I),I.u&&(o.clearTimeout(I.u),I.u=null),Nl(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&o.clearTimeout(I.s),I.s=null)}function Jh(I){if(!Wp(I.h)&&!I.s){I.s=!0;var U=I.Ga;Q||te(),H||(Q(),H=!0),W.add(U,I),I.B=0}}function yf(I,U){return vu(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=U.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=Pr(d(I.Ga,I,U),nd(I,I.B)),I.B++,!0)}r.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const Ie=new Ln(this,this.j,I);let Ue=this.o;if(this.S&&(Ue?(Ue=w(Ue),D(Ue,this.S)):Ue=this.S),this.m!==null||this.O||(Ie.H=Ue,Ue=null),this.P)e:{for(var U=0,$=0;$<this.i.length;$++){t:{var le=this.i[$];if("__data__"in le.map&&(le=le.map.__data__,typeof le=="string")){le=le.length;break t}le=void 0}if(le===void 0)break;if(U+=le,4096<U){U=$;break e}if(U===4096||$===this.i.length-1){U=$+1;break e}}U=1e3}else U=1e3;U=_u(this,Ie,U),$=Yi(this.I),dn($,"RID",I),dn($,"CVER",22),this.D&&dn($,"X-HTTP-Session-Id",this.D),pc(this,$),Ue&&(this.O?U="headers="+encodeURIComponent(String(Cl(Ue)))+"&"+U:this.m&&ff($,this.m,Ue)),Vn(this.h,Ie),this.Ua&&dn($,"TYPE","init"),this.P?(dn($,"$req",U),dn($,"SID","null"),Ie.T=!0,lt(Ie,$,null)):lt(Ie,$,U),this.G=2}}else this.G==3&&(I?ed(this,I):this.i.length==0||Wp(this.h)||ed(this))};function ed(I,U){var $;U?$=U.l:$=I.U++;const le=Yi(I.I);dn(le,"SID",I.K),dn(le,"RID",$),dn(le,"AID",I.T),pc(I,le),I.m&&I.o&&ff(le,I.m,I.o),$=new Ln(I,I.j,$,I.B+1),I.m===null&&($.H=I.o),U&&(I.i=U.D.concat(I.i)),U=_u(I,$,1e3),$.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),Vn(I.h,$),lt($,le,U)}function pc(I,U){I.H&&_(I.H,function($,le){dn(U,le,$)}),I.l&&Yp({},function($,le){dn(U,le,$)})}function _u(I,U,$){$=Math.min(I.i.length,$);var le=I.l?d(I.l.Na,I.l,I):null;e:{var Ie=I.i;let Ue=-1;for(;;){const st=["count="+$];Ue==-1?0<$?(Ue=Ie[0].g,st.push("ofs="+Ue)):Ue=0:st.push("ofs="+Ue);let lr=!0;for(let Gr=0;Gr<$;Gr++){let er=Ie[Gr].g;const Nn=Ie[Gr].map;if(er-=Ue,0>er)Ue=Math.max(0,Ie[Gr].g-100),lr=!1;else try{Af(Nn,st,"req"+er+"_")}catch{le&&le(Nn)}}if(lr){le=st.join("&");break e}}}return I=I.i.splice(0,$),U.D=I,le}function td(I){if(!I.g&&!I.u){I.Y=1;var U=I.Fa;Q||te(),H||(Q(),H=!0),W.add(U,I),I.v=0}}function Cu(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=Pr(d(I.Fa,I),nd(I,I.v)),I.v++,!0)}r.Fa=function(){if(this.u=null,rm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Pr(d(this.ab,this),I)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Zh(this),rm(this))};function rd(I){I.A!=null&&(o.clearTimeout(I.A),I.A=null)}function rm(I){I.g=new Ln(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var U=Yi(I.qa);dn(U,"RID","rpc"),dn(U,"SID",I.K),dn(U,"AID",I.T),dn(U,"CI",I.F?"0":"1"),!I.F&&I.ja&&dn(U,"TO",I.ja),dn(U,"TYPE","xmlhttp"),pc(I,U),I.m&&I.o&&ff(U,I.m,I.o),I.L&&(I.g.I=I.L);var $=I.g;I=I.ia,$.L=1,$.v=xu(Yi(U)),$.m=null,$.P=!0,Et($,I)}r.Za=function(){this.C!=null&&(this.C=null,Zh(this),Cu(this),mt(19))};function Nl(I){I.C!=null&&(o.clearTimeout(I.C),I.C=null)}function mc(I,U){var $=null;if(I.g==U){Nl(I),rd(I),I.g=null;var le=2}else if(of(I.h,U))$=U.D,lf(I.h,U),le=1;else return;if(I.G!=0){if(U.o)if(le==1){$=U.m?U.m.length:0,U=Date.now()-U.F;var Ie=I.B;le=mr(),at(le,new Cn(le,$)),Jh(I)}else td(I);else if(Ie=U.s,Ie==3||Ie==0&&0<U.X||!(le==1&&yf(I,U)||le==2&&Cu(I)))switch($&&0<$.length&&(U=I.h,U.i=U.i.concat($)),Ie){case 1:Ii(I,5);break;case 4:Ii(I,10);break;case 3:Ii(I,6);break;default:Ii(I,2)}}}function nd(I,U){let $=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||($*=2),$*U}function Ii(I,U){if(I.j.info("Error code "+U),U==2){var $=d(I.fb,I),le=I.Xa;const Ie=!le;le=new sa(le||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||yu(le,"https"),xu(le),Ie?Io(le.toString(),$):Jp(le.toString(),$)}else mt(2);I.G=0,I.l&&I.l.sa(U),ad(I),Su(I)}r.fb=function(I){I?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function ad(I){if(I.G=0,I.ka=[],I.l){const U=cf(I.h);(U.length!=0||I.i.length!=0)&&(v(I.ka,U),v(I.ka,I.i),I.h.i.length=0,p(I.i),I.i.length=0),I.l.ra()}}function P(I,U,$){var le=$ instanceof sa?Yi($):new sa($);if(le.g!="")U&&(le.g=U+"."+le.g),Gh(le,le.s);else{var Ie=o.location;le=Ie.protocol,U=U?U+"."+Ie.hostname:Ie.hostname,Ie=+Ie.port;var Ue=new sa(null);le&&yu(Ue,le),U&&(Ue.g=U),Ie&&Gh(Ue,Ie),$&&(Ue.l=$),le=Ue}return $=I.D,U=I.ya,$&&U&&dn(le,$,U),dn(le,"VER",I.la),pc(I,le),le}function re(I,U,$){if(U&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return U=I.Ca&&!I.pa?new An(new Wh({eb:$})):new An(I.pa),U.Ha(I.J),U}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xe(){}r=xe.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Se(I,U){Ge.call(this),this.g=new Xh(U),this.l=I,this.h=U&&U.messageUrlParams||null,I=U&&U.messageHeaders||null,U&&U.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=U&&U.initMessageHeaders||null,U&&U.messageContentType&&(I?I["X-WebChannel-Content-Type"]=U.messageContentType:I={"X-WebChannel-Content-Type":U.messageContentType}),U&&U.va&&(I?I["X-WebChannel-Client-Profile"]=U.va:I={"X-WebChannel-Client-Profile":U.va}),this.g.S=I,(I=U&&U.Sb)&&!y(I)&&(this.g.m=I),this.v=U&&U.supportsCrossDomainXhr||!1,this.u=U&&U.sendRawJson||!1,(U=U&&U.httpSessionIdParam)&&!y(U)&&(this.g.D=U,I=this.h,I!==null&&U in I&&(I=this.h,U in I&&delete I[U])),this.j=new rt(this)}g(Se,Ge),Se.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Se.prototype.close=function(){Bl(this.g)},Se.prototype.o=function(I){var U=this.g;if(typeof I=="string"){var $={};$.__data__=I,I=$}else this.u&&($={},$.__data__=kt(I),I=$);U.i.push(new Qh(U.Ya++,I)),U.G==3&&Jh(U)},Se.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,Se.aa.N.call(this)};function ke(I){Kt.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var U=I.__sm__;if(U){e:{for(const $ in U){I=$;break e}I=void 0}(this.i=I)&&(I=this.i,U=U!==null&&I in U?U[I]:void 0),this.data=U}else this.data=I}g(ke,Kt);function Ke(){Yt.call(this),this.status=1}g(Ke,Yt);function rt(I){this.g=I}g(rt,xe),rt.prototype.ua=function(){at(this.g,"a")},rt.prototype.ta=function(I){at(this.g,new ke(I))},rt.prototype.sa=function(I){at(this.g,new Ke)},rt.prototype.ra=function(){at(this.g,"b")},Se.prototype.send=Se.prototype.o,Se.prototype.open=Se.prototype.m,Se.prototype.close=Se.prototype.close,Zr.NO_ERROR=0,Zr.TIMEOUT=8,Zr.HTTP_ERROR=6,ia.COMPLETE="complete",pt.EventType=Nt,Nt.OPEN="a",Nt.CLOSE="b",Nt.ERROR="c",Nt.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,An.prototype.listenOnce=An.prototype.L,An.prototype.getLastError=An.prototype.Ka,An.prototype.getLastErrorCode=An.prototype.Ba,An.prototype.getStatus=An.prototype.Z,An.prototype.getResponseJson=An.prototype.Oa,An.prototype.getResponseText=An.prototype.oa,An.prototype.send=An.prototype.ea,An.prototype.setWithCredentials=An.prototype.Ha}).apply(typeof I_<"u"?I_:typeof self<"u"?self:typeof window<"u"?window:{});const kK="@firebase/firestore",FK="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}os.UNAUTHENTICATED=new os(null),os.GOOGLE_CREDENTIALS=new os("google-credentials-uid"),os.FIRST_PARTY=new os("first-party-uid"),os.MOCK_USER=new os("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jw="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new DT("@firebase/firestore");function Yl(r,...e){if(k0.logLevel<=un.DEBUG){const t=e.map(C6);k0.debug(`Firestore (${Jw}): ${r}`,...t)}}function pce(r,...e){if(k0.logLevel<=un.ERROR){const t=e.map(C6);k0.error(`Firestore (${Jw}): ${r}`,...t)}}function WVe(r,...e){if(k0.logLevel<=un.WARN){const t=e.map(C6);k0.warn(`Firestore (${Jw}): ${r}`,...t)}}function C6(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,mce(r,n,t)}function mce(r,e,t){let n=`FIRESTORE (${Jw}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw pce(n),new Error(n)}function q1(r,e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,r||mce(e,a,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class Wr extends bl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vce{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qVe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(os.UNAUTHENTICATED))}shutdown(){}}class YVe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class XVe{constructor(e){this.t=e,this.currentUser=os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){q1(this.o===void 0,42304);let n=this.i;const a=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let i=new Y1;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Y1,e.enqueueRetryable(()=>a(this.currentUser))};const s=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await a(this.currentUser)})},o=l=>{Yl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Yl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Y1)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Yl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(q1(typeof n.accessToken=="string",31837,{l:n}),new vce(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return q1(e===null||typeof e=="string",2055,{h:e}),new os(e)}}class ZVe{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=os.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JVe{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ZVe(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(os.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jK{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e$e{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){q1(this.o===void 0,3512);const n=i=>{i.error!=null&&Yl("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.m;return this.m=i.token,Yl("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const a=i=>{Yl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>a(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?a(i):Yl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jK(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(q1(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jK(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$e(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$e(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n$e{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=t$e(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<t&&(n+=e.charAt(a[i]%62))}return n}}function tc(r,e){return r<e?-1:r>e?1:0}function a$e(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),a=e.codePointAt(t);if(n!==a){if(n<128&&a<128)return tc(n,a);{const i=r$e(),s=i$e(i.encode(OK(r,t)),i.encode(OK(e,t)));return s!==0?s:tc(n,a)}}t+=n>65535?2:1}return tc(r.length,e.length)}function OK(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function i$e(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return tc(r[t],e[t]);return tc(r.length,e.length)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK="__name__";class Rc{constructor(e,t,n){t===void 0?t=0:t>e.length&&tw(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&tw(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Rc.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rc?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let a=0;a<n;a++){const i=Rc.compareSegments(e.get(a),t.get(a));if(i!==0)return i}return tc(e.length,t.length)}static compareSegments(e,t){const n=Rc.isNumericId(e),a=Rc.isNumericId(t);return n&&!a?-1:!n&&a?1:n&&a?Rc.extractNumericId(e).compare(Rc.extractNumericId(t)):a$e(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _6.fromString(e.substring(4,e.length-2))}}class zl extends Rc{construct(e,t,n){return new zl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Wr(Kr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(a=>a.length>0))}return new zl(t)}static emptyPath(){return new zl([])}}const s$e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xg extends Rc{construct(e,t,n){return new xg(e,t,n)}static isValidIdentifier(e){return s$e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xg.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UK}static keyField(){return new xg([UK])}static fromServerFormat(e){const t=[];let n="",a=0;const i=()=>{if(n.length===0)throw new Wr(Kr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;a<e.length;){const o=e[a];if(o==="\\"){if(a+1===e.length)throw new Wr(Kr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[a+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Wr(Kr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,a+=2}else o==="`"?(s=!s,a++):o!=="."||s?(n+=o,a++):(i(),a++)}if(i(),s)throw new Wr(Kr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xg(t)}static emptyPath(){return new xg([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this.path=e}static fromPath(e){return new Fg(zl.fromString(e))}static fromName(e){return new Fg(zl.fromString(e).popFirst(5))}static empty(){return new Fg(zl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zl.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return zl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fg(new zl(e.slice()))}}function o$e(r,e,t,n){if(e===!0&&n===!0)throw new Wr(Kr.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function l$e(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function c$e(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":tw(12329,{type:typeof r})}function u$e(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Wr(Kr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=c$e(r);throw new Wr(Kr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(r,e){const t={typeString:r};return e&&(t.value=e),t}function e2(r,e){if(!l$e(r))throw new Wr(Kr.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const a=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const s=r[n];if(a&&typeof s!==a){t=`JSON field '${n}' must be a ${a}.`;break}if(i!==void 0&&s!==i.value){t=`Expected '${n}' field to equal '${i.value}'`;break}}if(t)throw new Wr(Kr.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK=-62135596800,QK=1e6;class Lc{static now(){return Lc.fromMillis(Date.now())}static fromDate(e){return Lc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*QK);return new Lc(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wr(Kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wr(Kr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<HK)throw new Wr(Kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wr(Kr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QK}_compareTo(e){return this.seconds===e.seconds?tc(this.nanoseconds,e.nanoseconds):tc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Lc._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(e2(e,Lc._jsonSchema))return new Lc(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HK;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Lc._jsonSchemaVersion="firestore/timestamp/1.0",Lc._jsonSchema={type:ja("string",Lc._jsonSchemaVersion),seconds:ja("number"),nanoseconds:ja("number")};function h$e(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d$e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new d$e("Invalid base64 string: "+i):i}}(e);return new Tp(t)}static fromUint8Array(e){const t=function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i}(e);return new Tp(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tp.EMPTY_BYTE_STRING=new Tp("");const oP="(default)";class DB{constructor(e,t){this.projectId=e,this.database=t||oP}static empty(){return new DB("","")}get isDefaultDatabase(){return this.database===oP}isEqual(e){return e instanceof DB&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A$e{constructor(e,t=null,n=[],a=[],i=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function f$e(r){return new A$e(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zK,Vr;(Vr=zK||(zK={}))[Vr.OK=0]="OK",Vr[Vr.CANCELLED=1]="CANCELLED",Vr[Vr.UNKNOWN=2]="UNKNOWN",Vr[Vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vr[Vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vr[Vr.NOT_FOUND=5]="NOT_FOUND",Vr[Vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vr[Vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vr[Vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vr[Vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vr[Vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vr[Vr.ABORTED=10]="ABORTED",Vr[Vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vr[Vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vr[Vr.INTERNAL=13]="INTERNAL",Vr[Vr.UNAVAILABLE=14]="UNAVAILABLE",Vr[Vr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new _6([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$e=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$e=1048576;function aM(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m$e{constructor(e,t,n=1e3,a=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=a,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-n);a>0&&Yl("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,t,n,a,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new Y1,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,a,i){const s=Date.now()+n,o=new B6(e,t,s,a,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wr(Kr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var GK,VK;(VK=GK||(GK={})).Fa="default",VK.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$e(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yce="firestore.googleapis.com",KK=!0;class WK{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Wr(Kr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yce,this.ssl=KK}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:KK;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=g$e;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p$e)throw new Wr(Kr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o$e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v$e((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Wr(Kr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Wr(Kr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Wr(Kr.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xce{constructor(e,t,n,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WK({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wr(Kr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Wr(Kr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WK(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qVe;switch(n.type){case"firstParty":return new JVe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wr(Kr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=$K.get(t);n&&(Yl("ComponentProvider","Removing Datastore"),$K.delete(t),n.terminate())}(this),Promise.resolve()}}function y$e(r,e,t,n={}){var a;r=u$e(r,xce);const i=py(e),s=r._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:r._getEmulatorOptions()}),l=`${e}:${t}`;i&&(o6(`https://${l}`),l6("Firestore",!0)),s.host!==yce&&s.host!==l&&WVe("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},s),{host:l,ssl:i,emulatorOptions:n});if(!ZA(c,o)&&(r._setSettings(c),n.mockUserToken)){let u,h;if(typeof n.mockUserToken=="string")u=n.mockUserToken,h=os.MOCK_USER;else{u=ole(n.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new Wr(Kr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new os(d)}r._authCredentials=new YVe(new vce(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new N6(this.firestore,e,this._query)}}class Kc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new T6(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kc(this.firestore,e,this._key)}toJSON(){return{type:Kc._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(e2(t,Kc._jsonSchema))return new Kc(e,n||null,new Fg(zl.fromString(t.referencePath)))}}Kc._jsonSchemaVersion="firestore/documentReference/1.0",Kc._jsonSchema={type:ja("string",Kc._jsonSchemaVersion),referencePath:ja("string")};class T6 extends N6{constructor(e,t,n){super(e,t,f$e(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kc(this.firestore,null,new Fg(e))}withConverter(e){return new T6(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK="AsyncQueue";class YK{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new m$e(this,"async_queue_retry"),this.oc=()=>{const n=aM();n&&Yl(qK,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const t=aM();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=aM();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Y1;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!h$e(e))throw e;Yl(qK,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,pce("INTERNAL UNHANDLED ERROR: ",XK(n)),n}).then(n=>(this.nc=!1,n))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=B6.createAndSchedule(this,e,t,n,i=>this.lc(i));return this.ec.push(a),a}ac(){this.tc&&tw(47125,{hc:XK(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function XK(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class x$e extends xce{constructor(e,t,n,a){super(e,t,n,a),this.type="firestore",this._queue=new YK,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YK(e),this._firestoreClient=void 0,await e}}}function b$e(r,e){const t=typeof r=="object"?r:MT(),n=typeof r=="string"?r:oP,a=sf(t,"firestore").getImmediate({identifier:n});if(!a._initialized){const i=ale("firestore");i&&y$e(a,...i)}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yu(Tp.fromBase64String(e))}catch(t){throw new Wr(Kr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yu(Tp.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(e2(e,Yu._jsonSchema))return Yu.fromBase64String(e.bytes)}}Yu._jsonSchemaVersion="firestore/bytes/1.0",Yu._jsonSchema={type:ja("string",Yu._jsonSchemaVersion),bytes:ja("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bce{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Wr(Kr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xg(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wr(Kr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wr(Kr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tc(this._lat,e._lat)||tc(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cp._jsonSchemaVersion}}static fromJSON(e){if(e2(e,cp._jsonSchema))return new cp(e.latitude,e.longitude)}}cp._jsonSchemaVersion="firestore/geoPoint/1.0",cp._jsonSchema={type:ja("string",cp._jsonSchemaVersion),latitude:ja("number"),longitude:ja("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:up._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(e2(e,up._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new up(e.vectorValues);throw new Wr(Kr.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}up._jsonSchemaVersion="firestore/vectorValue/1.0",up._jsonSchema={type:ja("string",up._jsonSchemaVersion),vectorValues:ja("object")};const w$e=new RegExp("[~\\*/\\[\\]]");function S$e(r,e,t){if(e.search(w$e)>=0)throw ZK(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new bce(...e.split("."))._internalPath}catch{throw ZK(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function ZK(r,e,t,n,a){let i=`Function ${e}() called with invalid data`;i+=". ";let s="";return new Wr(Kr.INVALID_ARGUMENT,i+r+s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wce{constructor(e,t,n,a,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kc(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _$e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sce("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _$e extends wce{data(){return super.data()}}function Sce(r,e){return typeof e=="string"?S$e(r,e):e instanceof bce?e._internalPath:e._delegate._internalPath}class E_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class t0 extends wce{constructor(e,t,n,a,i,s){super(e,t,n,a,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new T5(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Sce("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wr(Kr.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=t0._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}t0._jsonSchemaVersion="firestore/documentSnapshot/1.0",t0._jsonSchema={type:ja("string",t0._jsonSchemaVersion),bundleSource:ja("string","DocumentSnapshot"),bundleName:ja("string"),bundle:ja("string")};class T5 extends t0{data(e={}){return super.data(e)}}class X1{constructor(e,t,n,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new E_(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new T5(this._firestore,this._userDataWriter,n.key,n,new E_(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Wr(Kr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map(o=>{const l=new T5(a._firestore,a._userDataWriter,o.doc.key,o.doc,new E_(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new T5(a._firestore,a._userDataWriter,o.doc.key,o.doc,new E_(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let c=-1,u=-1;return o.type!==0&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:C$e(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wr(Kr.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=X1._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=n$e.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],a=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),a.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function C$e(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tw(61501,{type:r})}}X1._jsonSchemaVersion="firestore/querySnapshot/1.0",X1._jsonSchema={type:ja("string",X1._jsonSchemaVersion),bundleSource:ja("string","QuerySnapshot"),bundleName:ja("string"),bundle:ja("string")};(function(e,t=!0){(function(a){Jw=a})(Kp),ac(new ml("firestore",(n,{instanceIdentifier:a,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new x$e(new XVe(n.getProvider("auth-internal")),new e$e(s,n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Wr(Kr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DB(c.options.projectId,u)}(s,a),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),js(kK,FK,e),js(kK,FK,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ce="firebasestorage.googleapis.com",B$e="storageBucket",N$e=2*60*1e3,T$e=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends bl{constructor(e,t,n=0){super(iM(e),`Firebase Storage: ${t} (${iM(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mu.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lu;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lu||(lu={}));function iM(r){return"storage/"+r}function I$e(){const r="An unknown error occurred, please check the error payload for server response.";return new mu(lu.UNKNOWN,r)}function E$e(){return new mu(lu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function D$e(){return new mu(lu.CANCELED,"User canceled the upload/download.")}function M$e(r){return new mu(lu.INVALID_URL,"Invalid URL '"+r+"'.")}function R$e(r){return new mu(lu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function JK(r){return new mu(lu.INVALID_ARGUMENT,r)}function Cce(){return new mu(lu.APP_DELETED,"The Firebase app was deleted.")}function L$e(r){return new mu(lu.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Xl.makeFromUrl(e,t)}catch{return new Xl(e,"")}if(n.path==="")return n;throw R$e(e)}static makeFromUrl(e,t){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const s="(/(.*))?$",o=new RegExp("^gs://"+a+s,"i"),l={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",A=new RegExp(`^https?://${h}/${u}/b/${a}/o${d}`,"i"),g={bucket:1,path:3},p=t===_ce?"(?:storage.googleapis.com|storage.cloud.google.com)":t,v="([^?#]*)",m=new RegExp(`^https?://${p}/${a}/${v}`,"i"),x=[{regex:o,indices:l,postModify:i},{regex:A,indices:g,postModify:c},{regex:m,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<x.length;b++){const S=x[b],_=S.regex.exec(e);if(_){const C=_[S.indices.bucket];let w=_[S.indices.path];w||(w=""),n=new Xl(C,w),S.postModify(n);break}}if(n==null)throw M$e(e);return n}}class P$e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$e(r,e,t){let n=1,a=null,i=null,s=!1,o=0;function l(){return o===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function h(v){a=setTimeout(()=>{a=null,r(A,l())},v)}function d(){i&&clearTimeout(i)}function A(v,...m){if(c){d();return}if(v){d(),u.call(null,v,...m);return}if(l()||s){d(),u.call(null,v,...m);return}n<64&&(n*=2);let x;o===1?(o=2,x=0):x=(n+Math.random())*1e3,h(x)}let g=!1;function p(v){g||(g=!0,d(),!c&&(a!==null?(v||(o=2),clearTimeout(a),h(0)):v||(o=1)))}return h(0),i=setTimeout(()=>{s=!0,p(!0)},t),p}function F$e(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$e(r){return r!==void 0}function eW(r,e,t,n){if(n<e)throw JK(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw JK(`Invalid value for '${r}'. Expected ${t} or less.`)}function O$e(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const a=e(n)+"="+e(r[n]);t=t+a+"&"}return t=t.slice(0,-1),t}var MB;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(MB||(MB={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$e(r,e){const t=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,i=e.indexOf(r)!==-1;return t||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H$e{constructor(e,t,n,a,i,s,o,l,c,u,h,d=!0,A=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,p)=>{this.resolve_=g,this.reject_=p,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new D_(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const s=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(s),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(s),this.pendingConnection_=null;const o=i.getErrorCode()===MB.NO_ERROR,l=i.getStatus();if(!o||U$e(l,this.additionalRetryCodes_)&&this.retry){const u=i.getErrorCode()===MB.ABORT;n(!1,new D_(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;n(!0,new D_(c,i))})},t=(n,a)=>{const i=this.resolve_,s=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());j$e(l)?i(l):i()}catch(l){s(l)}else if(o!==null){const l=I$e();l.serverResponse=o.getErrorText(),this.errorCallback_?s(this.errorCallback_(o,l)):s(l)}else if(a.canceled){const l=this.appDelete_?Cce():D$e();s(l)}else{const l=E$e();s(l)}};this.canceled_?t(!1,new D_(!1,null,!0)):this.backoffId_=k$e(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&F$e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class D_{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Q$e(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function z$e(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function G$e(r,e){e&&(r["X-Firebase-GMPID"]=e)}function V$e(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function $$e(r,e,t,n,a,i,s=!0,o=!1){const l=O$e(r.urlParams),c=r.url+l,u=Object.assign({},r.headers);return G$e(u,e),Q$e(u,t),z$e(u,i),V$e(u,n),new H$e(c,r.method,u,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$e(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function W$e(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,t){this._service=e,t instanceof Xl?this._location=t:this._location=Xl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new RB(e,t)}get root(){const e=new Xl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W$e(this._location.path)}get storage(){return this._service}get parent(){const e=K$e(this._location.path);if(e===null)return null;const t=new Xl(this._location.bucket,e);return new RB(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw L$e(e)}}function tW(r,e){const t=e==null?void 0:e[B$e];return t==null?null:Xl.makeFromBucketSpec(t,r)}function q$e(r,e,t,n={}){r.host=`${e}:${t}`;const a=py(e);a&&(o6(`https://${r.host}/b`),l6("Storage",!0)),r._isUsingEmulator=!0,r._protocol=a?"https":"http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:ole(i,r.app.options.projectId))}class Y$e{constructor(e,t,n,a,i,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=_ce,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N$e,this._maxUploadRetryTime=T$e,this._requests=new Set,a!=null?this._bucket=Xl.makeFromBucketSpec(a,this._host):this._bucket=tW(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xl.makeFromBucketSpec(this._url,e):this._bucket=tW(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eW("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eW("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Gl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new RB(this,e)}_makeRequest(e,t,n,a,i=!0){if(this._deleted)return new P$e(Cce());{const s=$$e(e,this._appId,n,a,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,a).getPromise()}}const rW="@firebase/storage",nW="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bce="storage";function X$e(r=MT(),e){r=Hh(r);const n=sf(r,Bce).getImmediate({identifier:e}),a=ale("storage");return a&&Z$e(n,...a),n}function Z$e(r,e,t,n={}){q$e(r,e,t,n)}function J$e(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new Y$e(t,n,a,e,Kp)}function eKe(){ac(new ml(Bce,J$e,"PUBLIC").setMultipleInstances(!0)),js(rW,nW,""),js(rW,nW,"esm2017")}eKe();const tKe={apiKey:"AIzaSyDU-Y0bZ9A8FPiBodrDv8EgwohlScaIcmU",authDomain:"mind-breeze-ai-report-47942.firebaseapp.com",projectId:"mind-breeze-ai-report-47942",storageBucket:"mind-breeze-ai-report-47942.firebasestorage.app",messagingSenderId:"359507939260",appId:"1:359507939260:web:cbe24c7e32276888f9e5b9",measurementId:"G-L646H5222B"},FT=fle(tKe);$Ve(FT);b$e(FT);X$e(FT);typeof window<"u"&&$9e(FT);const rKe=()=>{var t;const r=(t=document.querySelector('meta[name="build-timestamp"]'))==null?void 0:t.getAttribute("content"),e=localStorage.getItem("app-build-timestamp");if(r&&r!=="BUILD_TIMESTAMP_PLACEHOLDER"){if(e&&e!==r){console.log("🔄 New build detected, clearing cache..."),"caches"in window&&caches.keys().then(i=>{i.forEach(s=>{caches.delete(s)})});const n=["linkband-settings","linkband-storage-config"];Object.keys(localStorage).forEach(i=>{n.some(s=>i.includes(s))||localStorage.removeItem(i)})}localStorage.setItem("app-build-timestamp",r)}};rKe();GAe.createRoot(document.getElementById("root")).render(f.jsx(xt.StrictMode,{children:f.jsx(WQe,{})}));export{wn as _};
//# sourceMappingURL=index-xLaT2SFh.js.map
